;-----------------------------------------------------------------------
;  Copyright (C) 2015-2017
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in SOCORRO.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


***********************************************************************
***********************************************************************

                 Changes while 31DEC16 is TST

***********************************************************************
***********************************************************************

14741.  November 26, 2015             PCAL                Eric
        LUN 28 over used - changed all 27 and 28 to other values.
        LUN 28 already open was reported.
        Moved nowhere.

14742.  November 30, 2015         Version update               Eric
        Changed $APLSUB/GETRLS.FOR. $INSUNIX/INSTEP1,
        $SYSPERL/install.pl, $SYSPERL/update.pl, $SYSPERL/ZXHLP2.PL,
        $SYSPERL/LaCook.PL, $UPDUNIX/UPDCONTROL,
        $SYSUNIX/AIPSPATH.CSH, $SYSUNIX/AIPSPATH.SH
        to make 31DEC15 instead of 31DEC14 - also fix dates in
        install.pl.
        Moved nowhere.

14743.  November 30, 2015        install.pl                 Eric
        Corrected grammar in my recent if $ARCH statements.
        Moved to 31DEC15 this date.

14744.  December 1, 2015          FDEFAULT              Eric
        Changed the options for gfortran to those I would recommend.
        The -Wall makes a message for every integer = float statement
        for no good reason, so dropped it among others.
        Moved to 31DEC15 this date.

14745.  December 1, 2015            install.pl           Eric
        Add warning message to changed section re laptop.
        Moved warning to 31DEC15 Dec 6.

14746.  December 6-7, 2015        fix_aips_elcap           Eric
        The Xwindows libraries had an extra close parentheses in their
        names for no good reason.  The nice loop that Josh wrote gave
        a file name of *.dylib for one of the links so changed to make
        it do the 3 files by the names they are known to have.
        Dec 7: Josh wrote a proper test on Xwindows rather than
        linking the files bu force.  His loop looks okay but gives odd
        results on El Cap so left my explicit file linking.
        Moved to 31DEC15 this date.

14747.  December 8, 2015        EDIT class             Eric
        Changed QEDIUTIL at NEXT ANTENNA.  It failed when there was
        only one antenna other than the edited one and that antenna
        was the next antenna.  Now it will start upping the second
        antenna number to one more than the edit one.
        Moved to 31DEC15 this date.

14748.  December 11, 2015          CLVLB               Eric
        It treated the fact that one CL record was below the horizon
        as a fatal error.  Changed to count the below horizon
        indicators and report that number plus the total at the end.
        Moved to 31DEC15 this date.

14749.  December 15, 2015           install.pl          Eric
        Add copies of fix_aips_alcap.sh to $SYSLOCAL and $AIPS_ROOT.
        Moved to 31DEC15 this date.

14750.  December 16, 2015             UVFLG              Eric
        The text-file reading got confused about times which it set to
        minus the day number.  Then it tested if both were zero.
        Added test for both = minus the day number and changed the
        complaint to allow time1=time2 which should not occur.
        INTEXT reading did not re-initialize all adverb values between
        commands leading to later commands inheriting parameters from
        the previous ones.  Simplified the re-initialization to be all
        inclusive.
        Moved to 31DEC15 this date.

14751.  December 16, 2015         DAYNUMBR              Eric
        NEW VERB: prints the day number (in the year) of the
        observation date.  Changed POPSDAT.HLP, NEWPARMS.001, AU3A,
        and made a new help file.  Moved DAYNUM from $APLNOT to
        $APLSUB and corrected it to add the 400 year and 100 year
        provisos although neither matter.
        Moved nowhere.

14752.  December 17, 2015          ABOUT lists          Eric
        Updated HLPIT.LIS and the about files for AP, CALIBRAT,
        CATALOG, PROCEDUR, SPECTRAL, TASK, UTILITY, VERB, and VLBI.
        Moved some to 31DEC15..

14753.  December 18, 2015           PCAL                Eric
        Found out that data points with some but not all polarizations
        flagged would persist in the data selection and cause problems
        including the infamous 'POLARIZATION MODEL NOT PROVIDED'
        message which caused the task to stop.
        Moved to 31DEC15 this date.

14754.  December 18, 2015             PCAL              Eric
        Changed to do linear polarization model only when the data are
        linear and CPARM(5) > 0.  That model does not seem to work and
        circular (APPR) does when the source model has zero for
        polarized flux.
        Moved to 31DEC15 this date.

14755.  December 18, 2015             UVHOL             Eric
        A choice of text LUN=89 was unfortunate - changed to 91.
        Fixed it to do I only with linear polarizations in data set.
        Moved to 31DEC15 this date.

14756.  December 21, 2015            CookBook             Eric/Amy
        Updated chapters:
        3 : PRTMSG (OUTPRINT, line count check), re-word tape section
        4:  TVFLG LOAD LAST PIECE, SOUSP fix SNs, EDITA DO3COLR.
            de-emphasize tape, drop UVRANGE table
        5:  antique wording, OBOXFILE temp fille, DO3COL in
            EDITR/EDITA, reduce priminence of mag tape
        6 : Memo 119 (TVSAD), Memo 118 revised, TVHLD, TVMOVI
            (DOALL), UVIMG, XG2PL, RM2PL, XGAUS (baseline setting)
            Downplay magnetic tapes at the start
        7   Memo 119, TVHLD, MCUBE forgiving, STACK, Memo 118 revised,
            XG2PL, RM2PL
        8.  MCUBE forgiving, TVMOVIE DOALL, Memo 118 revised, UVFRE
        9.  ACSCL, DOVLAMP, DIGICOR in FITLD, dispersion in MBDLY and
            FRING, RLDLY, TYCOP, DELZN, EDITx CROWDED with color
            Overhauled for VLBARUN/VLBAUTIL new cal method and to
            modernize
        13. Update
        C   Overhauled for VLBARUN/VLBAUTIL new cal method and to
            modernize
        E.  FRING dispersion, RLDLY SN tables, fix antique wording
            places, FRING divide in > 2 parts, TVFLG groups, SOUSP SN
            tables, UVRABGE -> break IFs into separate files, SYCOP
            renamed TYCOP
        Moved nowhere.

14757.  December 22, 2015          VPFLG              Eric
        Added calls to make NX (index) table on the fly.
        Moved to 31DEC15 this date.

14758.  December 22, 2015         IRING               Eric
        The geometry was questioned by a user and was reviewed in
        detail.  The radii were increased erroneously by a division by
        cos(inclination) but the rest of the geometry was found to be
        correct.  Changed the task to have OUTTEXT='NONE' suppress
        both the text and message file outputs.  Also changed it to
        honor the Y axis range in CPARM(9,10) when CPARM(8)>0.
        Previously it honored it only when the values did not exceed
        the stated range.
        Moved to 31DEC15 this date.

14759.  December 28, 2015           PBEAM                Eric
        Changed the task the handle data in any order.  Previously it
        demanded that the data lie in columns on the sky, although
        there was some confusion with a row-ordered plan also.
        Changed the plots to be contour plots and to write out the
        data. model. and residual images.  Previous plots were row
        traces.  Corrected a minor issue in EVAUV's contouring.
        Moved to 31DEC15 this date.

14760.  December 28, 2015         AIPSLetter            Eric
        Put in LET15B TEX, PS, and PDF files in $AIPSPUBL.
        Moved everywhere.

14761.  December 29, 2015         PBEAM                 Eric
        Found a variable that was not initialized which caused the
        task to fail to read the data the second time in which the
        normalization was supposed to have been done.  Added APARM(9)
        to control the width of the convolving function which was too
        narrow before.  Re-named the axes and made the X axis right
        handed.  Made less drastic contour intervals for the residual
        image and made the data sample markets slightly bigger.
        Moved to 31DEC15 this date.

14762.  December 29, 2015             HOLOG              Eric
        Correct the amplitude image by the pixel-dependent sum of
        weights making the image be an interpolated one rather than a
        convolved one.  Also normalize that image and make unsampled
        pixels be magic blanks.
        Moved to 31DEC15 this date.

14763.  December 31, 1015         holography              Eric
        Further changes:
        UVHOL   Was limited to documenting only 14 averaged antennas.
                Changed to write more than one line (like ref ants)
        HOLOG   Changed to subtract the phase at the pixel of peak
                amplitude from the phase image, thereby "normalizing"
                phases as well as amplitudes.
        PBEAM   Changed parsing of text file to free format and added
                parsing of the Averaged antennas and Averaged RefAnts
                input lines.  Changed display of antennas and refants
                to support the full (possible) lists.
        Moved to 31DEC15 30 Dec.

14764.  December 31, 2015          PBEAM                  Eric
        Made changes not carried over to 31DEC15:
        1) Dropped lots of unused COMON variables
        2) Changed most of the computation to double precision since
        the dynamic range of is so great.
        3) Dropped unused PIXRANGE adverb and added DOPLOT which must
        be set to get plots.
        4) Added IRING-like plot for the beam and model images,
        plotting them on the same plot for comparison.  A second plot
        of the cumulative sum inside the radius was also added.
        5) On the 3rd DOPLOT bit, optional plots of the difference of
        the two IRING plots and the difference divided by the model
        were also added.
        6) Scaled the Fit parameters by FITPAR(1) not just for the
        printout but also for computing the model.  Otherwise the
        model did not have a peak of 1.0.
        7) Scaled the data and model interpolated images to have peak
        1.0 and changed the residual image to be the difference of the
        two normalized images.  Previously the difference image was
        the interpolated image of the data minus model and so lacked
        all of the normalization.
        8) Fixed it to turn off the graphics planes between plots on
        DOTV true.  Otherwise a plane used in one plot would still be
        present in the next plot.
        Moved nowhere.

14765.  December 31, 2015          year-end                 Eric
        Copied the EVLA.ant.2015 file from the VLA/baselines data area
        and put it into $AIPSTARS.  This has the antenna corrections
        made during 2015 for the EVLA.  Also added dummy VLA files for
        2015 and 2016.
        Moved everywhere (TEXT area available to all).

14766.  January 3, 2016             PBEAM              Eric
        Fixed up some MAX and MIN statements that mixed real*4 with
        real*8.
        Moved nowhere - bug in 31DEC16 only.

14767.  January 5, 2016            FRING              Eric
        Changed the fitting of dispersion to allow more than one group
        of IFs each with its own delay but sharing the same
        dispersion.
        Moved nowhere.

14768.  January 7, 2016         GC tables             Eric
        Changed PGCV.INC back to allow up to 200 values (per
        polarization, per IF, per antenna) for the Y and gain.  Some
        correlators write out 200 values (almost all magic blanks)
        even though they have no use for them.
        Moved to 31DEC15 (patch) this date.

14769.  January 7, 2016            tables                Eric
        IMLOD should be able to read a FITS file containing only a
        table.  Trying this on a source catalog table, the following
        changes were required:
        FITLD    Limited the number of columns to 60, should be 128.
        MAKTAB   Limited the number of columns to 60, should be 128.
        TABHDR   Limited the column number of parsed cards to 99,
                 should be 127.
        Doing these corrections, IMLOD loads the catalog as a UK
        (unknown) table without complaint attached to a dummy image.
        FITLD loads the table as well but complains loudly about the
        lack of an array geometry table.  UVLOD dies because a
        required header card is not present.
        If we encounter tables with more than 127 columns, a special
        table reader will be required to load some but not all of the
        columns.
        Moved nowhere.

14770.  January 12, 2016        PBEAM                  Eric
        Corrected a subscript error that made the addition of RR and
        LL to make Stokes I get scaled incorrectly.  Also fixed a
        format issue telling the user the re-scaling factor.
        Moved fixes only to 31DEC15.

14771.  January 13, 2016          RLDLY               Eric
        The output SN table was written to "CLOVER" which could be set
        to some non-zero value if a new CL table was also written.
        Fixed to always write a new SN table and improved the history
        writing as well.
        Moved to 31DEC15 this date.

14772.  January 15, 2016           FITLD                Eric
        Two subroutines GNINI and TABGN were not compiled when PGCV
        was changed.  They include an include that includes PGCV and
        so have to be compiled.  Then FITLD needs to be relinked.
        Moved to 31DEC15 this date.

14773.  January 19, 2016          CATALOG                Eric
        Changed the format for catalog number and user numbeer and
        date in UCAT, MCAT. PCAT, CATALOG, etc. verbs.  There should
        never be overflows now.
        Moved nowhere.

14774.  January 19, 2016        EDITA, EDITR            Eric
        Changed QEDIUTIL to make the all-source status false to begin
        with.  Corrected the expansion of times in flags to avoid
        going a long way in one direction due to a gap in the selected
        data in the work space.
        Moved to 31DEC15 (patch) this date.

14775.  January 20, 2016            TVSPC                Eric
        NEW TASK: Plots spectra from one or two transposed cubes at
        coordinates selected by cursor on a grey-scale image (e.g.
        moment-0).  The menu allows the last plotted spectrum to be
        fit with up to 4 Gaussians and saved as a slice (SL) file.
        Works with e.g. an I image and Q and U spectral cubes or with
        a moment 0 image and I and V spectral cubes.  Includes help
        with an explain section and real-time help.
        TVLAB was changed to avoid errors on empty strings and to
        honor NTEXT/TEXT even with LABEL >= 7.
        Moved nowhere.

14776.  January 20, 2016        HOLOG                Eric
        Added NORMALIZ adverb to control normalization of gridded amp
        and phase images.
        Moved nowhere.

14777.  January 21, 2016       VLBAUTIL, VLBABPSS            Amy
        Fixed BPASS inputs, main one is use set ICHANSEL to entire
        band as recommended by Craig.
        Moved nowhere.

14778.  January 21, 2016           DOVLAMP                   Amy
        Added UVCOP to DOVLAMP for the case where not all IFs are needed
        for VLBI calibration.  Only works if IFs are contiguous.
        Moved nowhere.

14779.  January 22, 2016          TVSPC                 Eric
        Changed APARM(5) to be fraction of split area for spectra,
        APARM(7) for smoothing support/FWHM.  SET APARM gets the new
        question and is rearranged.  Bottom line on spectra plots gets
        the radius over which averaging was done. Changed HELP and
        run-time help.
        Moved nowhere.

14780.  January 22, 2015        AIPS Memo 120          Eric
        New memo detailing TVSPC with 3 example data sets (HI, OH
        Zeeman, and polarization).
        Moved nowhere.

14781.  January 28, 2016             DBCON               Eric
        DBCON reinstated flagged table rows.  Changed to drop
        them completely.  Number of output records had to be fixed
        in output table header.
        Moved tp 31DEC15 (patch) this date.

14782.  February 1, 2016              TRANS               Eric
        Changed it to allow blank and comma separators in TTRANSCOD.
        Also changed it to refuse to put the same axis out twice and
        to require that all ``real'' (> 1 pixel) axes be specified.
        Updated the help file and the TRANSCOD help file.
        Moved nowhere.

14783.  February 1, 2016          IMLOD et al.           Eric
        Changed the FITS table header reading routines to limi ITNCOL
        to 127 but to report excessively large tables without
        quitting.  Changed TABHDR, TABHDK, and PRTTP.
        Moved nowhere.

14784.  February 1, 2016          UVHOL                  Eric
        Copied DATPOL into this task and commented out the parallactic
        angle correction, which should not be done to holography data.
        It rotates things from telescope to sky but in holography we
        must stay with the telescope frame.
        Moved nowhere.

14785.  February 2, 2016        documentation            Eric
        Updated the TAB completion file HLPIT.LIS and the ABOUT files
        on ANALYSIS, IMAGE-UT, INTERACT, TASK, TV, AP, CALIBRAT, OOP,
        PROCEDUR, and UV..
        Moved nowhere.

14786.  February 3, 2016           MNJ                 Eric
        Changed MNJ to use rsync for binary installations rather than
        CVS.  Getting CVS in Macs is a pain.
        MAKE.BMNJ  Add comment about rsync, say cvs useful.  Ask for
                   cvs path only once, do cvs priming only if CVSLOC
                   is an actual file.
        AIPSUPD    Add comment about using rsync, add code to rsync
                   the UPDATE area mostly to get LASTCVS.DAT to set
                   the dates.  Special work only if neither UpdCVS nor
                   UpdRsync are true.
        UPDCONFIG  Make UpdRsync and UpdCVS have opposite initial
                   values based on whether or not it is a binary
                   installation.
        UPDCONTROL Special work only if neither UpdCVS nor UpdRsync
                   are true.
        UPDRSYNC   Reposition the directory to which it cd's.  Change
                   existing binary file rsyncs to match and add rsyncs
                   for code (AIPS, APL, INC, Q, QY, Y) and control/doc
                   files (DOC, HELP, HIST, RUN, SYSTEM).
        Moved nowhere.

14787.  February 5, 2016          install.pl            Eric
        Changed error messages around the make of XAS to point out
        that fixing Makefile and doing a make in $YSERV/XAS is all
        that is needed.  Also added $CCOMOPT in the rewrite of the
        Makefile before the make.
        Moved nowhere.

14788.  February 5, 2016          web pages             Eric
        Did some work on the MNJ web page (mnj.shtml), a serious
        overhaul on the Mac web page (Mac.shtml), and went though the
        installation guide (install.shtml) carefully.  All should now
        reflect modern reality.  Also install_changelog.shtml.
        Moved to the official aips web site.

14789.  February 9, 2016       TVFLG, SPFLG, FTFLG         Eric
        Changed all 3 tasks to allow STOKES = 'FULL' to mean all 4
        polarizations at one time.  Fixed also the 3 help files and
        the 3 run-time help files.
        Moved nowhere.

14790.  February 9, 2016            DTSUM                Eric
        Typo meant that it did not interpret the new UV format
        correctly and assigned all baselines to the same
        autocorrelation.
        Moved to 31DEC15 (patch) this date.

14791.  February 12, 2016             PBEAM              Eric
        Changed Fortran to have APARM(10) control whether the fit
        parameters are normalized (G0 = 1.0) or not and to have the
        residual image contoured at intervals of 0.01 rather than
        0.02.  Changed help for these and to change the explanation of
        APARM(7) to reflect what it currently means (switch X and Y if
        the first column is vertical offset).
        Moved nowhere.

14792.  February 15, 2016              FITLD              Eric
        Apparently the WR table (IDI weather) has added a WIND_GUST
        column.  Fixed Fortran so that this does not cause an abort.
        Did not change the AIPS weather table to include this column.
        Moved nowhere.

14793.  February 15, 2016         FRING, RLDLY           Eric
        Changed the second test on frequencies being all in the same
        order so that it generates a warning but does not die.  This
        means that two IFs can overlap but we cannot have IFs going in
        one order with channels in the opposite order.  RLDLY somehow
        did not get these tests last year even though it was supposed
        to.  Added them now with the second being only a warning.
        Moved nowhere.

14794.  February 16, 2016         WX table               Eric
        Added two columns now supported by DiFX in IDI: WIND_GUST in
        m/s and PRECIPTATION (cm since midnight).  Changed
        DWXV.INC   To add 2 columns and pointer parameters
        WXINI      Add 2 columns
        TABWX      Changed call sequence, use pointers carefully
        TABSEL     Change TABWX call sequence
        TABLEUTIL  Change call sequence of OTABWX and call to TABWX.
        CLCOR      Change TABWX call sequence
        FILLM      Change TABWX call sequence (2 more 0's)
        FITLD      Change TABWX call sequence, change TABWR, WRINI,
                   and WR local include
        INDXR      Change OTABWX call sequence
        APCAL      Change TABWX call sequence
        WETHR      Changed to support all possible columns plus the
                   computed ones.  Corrected bad subscript in flagging
                   routine that caused it not to take absolute value
                   when it was supposed to.  Fixed one variable which
                   needed a SAVE between plots.
        WETHR      Help - added new OPTYPEs.
        Moved nowhere.

14795.  February 16, 2016           OOCAL               Eric
        NEW PROCEDURE IMSCAL (image self-cal) to split a large CASA
        image into facets with CC files and then do OOCAL (divide by
        model in UVSUB, then CALIB the divided data set, copy SN back
        to original UV data set).  Then zap the facet images.
        New HELP file for IMSCAL.
        Moved nowhere.

14796.  February 16, 2016            PBUTIL             Eric
        Changed the primary-beam utility OOP package to read the
        full spectral-index and curvature images into dynamic memory.
        Then I/O is not needed to find each correction parameter.
        This vastly improved the performance of the step which
        recomputes CC tables (in one test 6-8 minutes went to < 2
        seconds!).
        Moved nowhere.

14797.  February 16, 2016         AIPS Memos 114, 117        Eric
        Updated the memos for changes to weather table.
        Moved everywhere (in $AIPSPUBL).

14798.  February 16, 2016           PBEAM                   Eric
        Added a data-model column to the optional print out and
        corrected the BESSEL computation (needed real*4 not *8).
        Also added a print out of the average residual.  Compute the
        residual image from grdding the actual data samples - model
        rather than difference the two smoothed and separately
        normalized data and model images.  Scale the residual image by
        the average scaling of the two images (only not a
        normalization).  This gets rid of a negative bias apparently
        due to the different normalization scalings.
        Moved nowhere.

14799.  February 16, 2016         EDITA, SNEDT, EDITR      Eric
        The DO3COL routine did not take BIF into account when
        allocating colors and so left colors zero for high numbered
        IFs.  Also changed the coloring when showing only 1 IF but 2
        polarizations so that 2 distinct colors will be used.
        Moved nowhere.

14800.  February 19, 2016        UVFLG                 Eric
        Added BFREQ/EFREQ keywords to the text file input.  UVFLG will
        translate these into zero or more sets of BCHAN/ECHAN/BIF/EIF
        to match the current data set.  This will allow text files to
        specify the standard RFI signals at the VLA for example to be
        used on whatever data set you observed.
        Moved nowhere.

14801.  February 19, 2016            UVHOL              Eric
        Add DOCAL, DOPOL, ICHANSEL to precusor comment cards written
        with 'HOLG' mode.
        Moved nowhere.

14802.  February 22, 2016           LISTR               Eric
        When the last record in a "gain" file (SN, CL, TY, SY) had a
        time greater than the records just before it, the task's table
        record logic caused that record not to be printed.  Changed
        the logic to deal with this situation without messing up the
        normal case where the last record is the same time as at least
        one preceding record.
        Moved nowhere.

14803.  February 23, 2016     SPLIT, SPLAT            Eric
        Added the ANTENNAS adverb (only) to both.  SPLAT is often used
        to do a few once and for all things to a data set and dropping
        bad antenna(s) should be included in that.
        Moved nowhere.

14804.  February 24, 2016            TGET                Eric
        the test in AU2 on disk file size was for the old format (305
        max tasks, 4 records each) while the new format (508 tasks, 8
        records each) needs much more.  Fixed the test.
        Moved nowhere.

14805.  February 25, 2016           APCAL                Eric
        TABGC only fills in YVALGC and GAINGC to the number of terms
        expected.  The routine that tried to avoid being upset over
        duplicate GC records however checked the full amount allowed
        in the GC table.  This led to apparent differences that were
        not real.  Changed to check only to the number of terms for
        the particular antenna, IF, and polarization.
        Moved nowhere.

14806.  February 27, 2016       FTFLG, SPFLG, TVFLG        Eric
        When changing between Stokes to be displayed, the selection of
        string between NOXX and NOYY was reversed.  The actual flags
        1011 and 0111 were correct.  It was fine for the other
        polarizations, just not linear.  Error arose when 4
        polarizations at the same time was added (2/9/2016).
        Moved nowhere.

14807.  March 1, 2016               PBEAM                  Eric
        Changed the IRING difference plots to use the IRING found
        from the real difference image.  Added plot of the IRING
        interior sum of the difference image and changed the
        difference/model to use the real difference rather than
        the difference of the data and model IRINGs.  Fixed an
        issue with string placement in these plots.
        MOved nowhere.

14808.  March 7, 2016             RFLAG                  Eric
        Added YINC adverb to pre-average data in time before applying
        the algorithms.  This will allow the excision of RFI at
        somewhat lower levels.  Also fixed the default XYRATIO to
        1.414 for plot files.
        Moved nowhere.

14809.  March 9, 2016              TYAPL                 Eric
        Changed to have a local version of COPTAB, stolen from UVCOP,
        applying flags to SY, TY, and SN tables when FLAGVER > 0.
        Added DOFLAG adverb to suppress this action if desired.
        TYAPL, like UVCOP, allows 10 times as many flags per time as
        the normal task.
        Moved nowhere.

14810.  March 14 & 15, 2016              TYAPL               ERic
        Unlike UVCOP, TYAPL uses UVGET and so closed the flag table
        before the final routines.  Added an open of the flag table
        to COPTAB.  The FQ table was not copied by the previous, so
        allowed it to be copied simply since there is no IF selection
        here.
        Moved nowhere.

14811.  March 16, 2016             UVPRT                 Eric
        The setup for STOKES left out a section for XXYY pols.
        Moved nowhere.

14812.  March 25, 2016            UVGIT                 Eric
        NEW TASK version of UVFIT with IMFIT's math method instead of
        JMFIT's.  It converges correctly in some cases where UVFIT
        returns the initial guess.
        Moved nowhere.

14813.  March 31, 2016           CURVALUE                 Eric
        Changed the AIPS-task version of TVALUE and the local
        versions in XGAUS, RMFIT, ZEMAN, and TVSAD to handle pixel
        values > 9999.  It does so by dropping the X= and Y= parts
        of the pixel position string.
        Moved nowhere.

14814.  March 31, 2016               ANFIND               Eric
        Added ASKAP as having the same XYZ signs as ATCA.
        Moved nowhere.

14815.  April 15, 2016           PCAL                  Eric
        The baseline pickup for one of two data copies had the
        handling of the new antenna format wrong!  IA2 was not set so
        I do not see how it could work.
        Moved to 31DEC15 this date.

14816.  April 16, 2016             PCAL                Eric
        Changed the handling in RPCALC and LPCALC of times for which
        the I model has value 0.  It reports it but keeps going so
        long as the weight is also zero.  This was caused by the
        ionospheric Faraday rotation being blanked for reasons I
        cannot discover - probably relating to flagging being applied
        to the CL table.  I added DPARM(1) option to tell the task not
        to flag data when the IFR is blanked.  The 2 antennas affected
        for some reason get different (similar) solutions with and
        without this option but the others are essentially unchanged.
        Moved nowhere - I am patching something I do not understand.
        Moved to 31DEC15 29 April without DPARM.

14817.  April 27, 2016            UVMOD                 Eric
        The FLUX adverb has always been confusing.  It is a scaling
        factor times the individual sample's rms - but that is
        meaningless if one is ignoring the input data (FACTOR=0).
        So changed it to use FLUX as noise in Jy when FACTOR is zero
        and added explanations to the help file.
        Moved nowhere.

14818.  April 28, 2016               DTSIM                Eric
        DTPARM had an illegal read format containing '/' and it
        converted individual VLBA or VLA antennas as if latitude,
        longitude, and elevation were given for them rather than the
        XYZ position.  GEOPOS returned a left-handed coordinate -
        changed to right handed (Y = -Y).
        Moved nowhere.

14819.  April 28, 2016           CookBook               Eric
        Added TVSPC to chapters 6, 7, 8, and 13,  Added IMSCAL to 13.
        Redid Appendix L to modernize and be more explanatory and to
        do index.  Updated the numbers in chapter 1 since I ran them
        for the AIPS FAQ web page which was updated.
        Update chapter 0 (T of C) and the index files LaCookI and J
        and the Recipe file.
        Moved nowhere and everywhere.

14820.  April 29, 2016             PCAL                   Eric
        Found what was wrong - the Faraday rotation values were lost
        entirely when an IF was copied to a scratch file before
        pulling out individual channels.  Changed it to:
        (1) Not delete the ION file when killing other scratch files
        except between IFs.  Zero scratch pointers when deleting the
        scratch file.
        (2) Create a new ION scratch file when needed before the copy
        of the individual IF to its scratch file and write the ION as
        that copy is done
        (3) Do the ION file with the data read only when not doing
        spectral solutions as opposed to always doing it.  Values are
        not available if the IF was moved to a scratch.
        Subroutine $QNOT/GRDSUB has to defend itself when pointers to
        SCRGRD and SCRWRK point at improper values (outside NSCR or
        disk or cno <= 0).
        Moved to 31DEC15 this date.

14821.  April 29, 2016              MNJ                   Eric
        The new rsync-only MNJ for binary installations failed to
        rsync the TEXT directories (PUBL, OFM, STARS, IONS, etc.)
        Changed UPDRSYNC to correct this oversight.
        Moved nowhere.

14822.  May 5, 2016           SLPRT                  Eric
        NEW TASK: prints the contents of a slice file, optionally with
        one of the models fit in SLFIT or TVSPC.
        Moved nowhere.

14823.  May 6, 2016               GREYS                   Eric
        Corrected help file to mention STVERS not INVERS and changed
        Fortran to call the variable STVER not INVER and to turn off
        ST plotting if STVERS < 0.
        Moved nowhere.

14824.  May 9, 2016                SLPRT                  Eric
        Changed the "simple" print routine to check for blanks in the
        slice.  Added an rms computation and display when a model is
        printed.
        Moved nowhere.

14825.  May 10, 2016             SNFLG                  Eric
        Changed it to loop over subarray when SUBARRAY=0.
        Moved nowhere.

14826.  May 10, 2016             IMAGR                  Eric
        Changed QCLEAN - it had some wrong subscripts when testing
        islands for making automatic boxes.  If IMSIZE(2) < IMSIZE(1)
        then islands would be found only for X values less than
        IMSIZE(2) - i.e.the left half, quarter, etc of the image.
        Moved to 31DEC15 this date.

14827.  May 13, 2016            PRTAB                   Eric
        Rick printed of order 800 pages without meaning to.  Added to
        the code a routine that counts the number of lines when DOCRT
        <= 0 and OUTPRINT=' '.  If > 500, it forces the user to answer
        Y or y on his terminal before making the large printout.  Put
        a note in the help file about this.
        Lots of other tasks should get this protection too.
        Moved nowhere.

14828.  May 17-18, 2016          Print tasks               Eric
        Print tasks need to check the lines of print when the job will
        go directly to the printer.  This is to prevent the > 1000000
        line job that PRTAB, LISTR, PRTUV, UVPRT, and others can
        generate.  Changed ANBPL, PRTAB, PRTCC, PRTIM, PRTUV,
        UVHOL, and UVPRT  to have separate routines to count lines of
        print and require the user to confirm that he/she wants any
        job > 500 lines.  (PRTAB was done before but I messed up the
        parameter controlling when to return to AIPS quickly or not.)
        Moved nowhere.

14829.  May 19, 2016         Edit Class                 Eric
        The routines used by SNEDT and EDITA to read in the table data
        allowed source number column values <= 0.  But the flagging
        routines with "ONE SOURCE" would not write a flag record if no
        source number > 0 was found.  Fixed EDGT SN, TY, SY in
        QEDIUTIL to force the source number to be 1 or greater.
        Moved to 31DEC15 this date.

14830.  May 19, 2016       OOP code                  Eric
        In ZOINTD.C changed the maximum number of objects from 10240
        to 102400.
        Moved nowhere.

14831.  May 25, 2016       calibration IO routines     Eric
        Corrected DGINIT to search only the correct number of formal-I
        polarization codes.  It searched more but probably over
        addresses containing non-matching stuff.
        Changed UVGET which tested the number of polarization times
        the number of channels times the number of IFs against MAXCIF
        asserting the buffers will be too small.  Changed the test to
        check this product times 3 against the buffer size.  A later
        test will check that the user has requested less than MAXCIF
        for output.
        Moved nowhere.

14832.  May 27, 2016        VLBAUTIL, VLBACRPL        Amy
        Adjusted APARMs in VLBACRPL (simplified POSSM) to work
        better for VLBA tutorial.
        test will check that the user has requested less than MAXCIF
        for output.
        Moved nowhere.

14833.  May 27, 2016        line printer outputs          Eric
        Changed more tasks to check the number of lines going directly
        to a line printer and querying the user if there are > 500.
        Tasks changed are SLPRT, ALVPR, MFPRT, PRTSD, PRTSY, UVDIF,
        DTSUM, ISPEC, and RSPEC.  Both Fortran and Help files were
        changed.
        Moved nowhere.

14834.  May 27, 2016            DOHIST                   Eric
        A number of tasks use DOHIST = -2 and -3 for reasonable things
        but several used DOHIST < -1.5 to mean do not write any
        history at all.  Changed these tasks to take DOHIST <= -9.5
        to have that meaning.  Tasks involved EDITA, EDITR, FTFLG,
        IBLED, SPFLG, and TVFLG.  QEDIUTIL was changed for the first
        two, the remaining 4 had their Fortran changed.  Help files
        also updated.
        Moved nowhere.

14835.  June 3, 2016          STARS, MFPRT              Eric
        Changed STARS to accept RASHIFT DECSHIFT coordinates when
        DECIMAL > 1.5.  These must be in the format for RASHIFT and
        DECSHIFT (RA = RA_0 + Value1 / cos(DEC_0) and DEC = DEC_0 +
        Value2) rather than the form in columns 4 and 5 of the MF
        table
        Changed MFPRT to honor the user's DOHMS adverb value and to
        let DOHMS=-2 mean offsets as described above in arc seconds.
        Changed the determination of the component pixel from using
        the recorded pixel to using the linear offsets which should be
        immune to changes in cell size and reference pixel.
        Moved nowhere.

14836.  June 6, 2016          IMSCAL, IM2CC              Eric
        Changed
        (1) RUN file OOCAL.001 to clrtemp to avoid too many strings
            blowing core.  Changed it to handle the unknown number of
            images from IM2CC.
        (2) IM2CC to keep only those images with actual components in
            the CC table.
        (3) PBUTIL to be more careful about trying to use more models
            than the arrays allow.
        Moved nowhere.

14837.  June 6, 2016               print tasks           Eric
        Fixed all print tasks that count lines to allow 1000 lines in
        batch without trying anything interactive.  Tasks are
        $APLPGM/PRTAB        $APLPGM/PRTCC        $APLPGM/PRTIM
        $APLPGM/SLPRT        $APLPGM/UVDIF        $APGNOT/ALVPR
        $APGNOT/LISTR        $APGNOT/MFPRT        $APGNOT/PRTSD
        $APGNOT/PRTSY        $APGNOT/PRTUV        $APGNOT/SHOUV
        $APGNOT/UVHOL        $APGNOT/UVPRT        $APGOOP/DTSUM
        $YPGM/ISPEC          $YPGM/RSPEC          $YPGNOT/ANBPL
        Moved nowhere.

14837.  June 10, 2016              beams                Eric
        Updated PBCALC subroutine to support the EVLA which becomes
        the default if ARRAY is ' '.  There are a lot more numbers
        since there are up to 48 frequencies within a band having
        separate beam parameterizations.  The beam factors are found
        at the two closest frequencies and then interpolated to the
        desired frequency.  Average values are used fo K, Ka, and Q
        bands for which the apparent frequncy differences were judged
        (by Rick Perley) not to be significant.  No beam values are
        available for 4-band and the P-band ones are thought to be
        unreliable.
        Moved nowhere.

14838.  June 10, 2016              PATGN                Eric
        Added OPTYPE to specify the array type (VLA, EVLA, ATCA)
        rather than use OPCODE for operation and array.
        Moved nowhere.

14839.  June 10, 2016             antenna files           Eric
        The buffers in TABAN were too small for a significant number
        of IFs.  Changed 200 to a parameter value which is currently
        500.
        Moved nowhere.

14840.  June 13, 2016             TYAPL                 Eric
        The new option to flag SY, TY, and SN tables had a residual
        error - the FG table needs to be re-opened by the table copy
        routine.  That re-opening was done even when no flags were to
        be applied so FGVER was changed from <= 0 to something
        positive and no FG tables were copied.  The task knew not to
        apply flags to the table data anyway.  The help file lacked
        info about DOFLAG.
        Moved nowhere.

14841.  June 14, 2016           POLPLOT                Eric
        Subroutine POLVIS had a sign error in the computation of the
        imaginary part.  This affected all ratio plots in FRPLT,
        POSSM, and VPLOT since 1993 when the option was first
        made available.
        Moved nowhere.

14842.  June  16, 2016           UVFIX                  Eric
        UVFIX goes to a lot of work to find the actual frequency of
        each data sample.  However, the definition of U,V,W is
        wavelengths at the header frequency not wavelengths at the
        real frequency.  Changed scaling of U, V, W accordingly.
        Normally, AIPS keeps the offset of the first IF zero so this
        would not matter normally.  But CASA/ALMA has no such
        scruples.
        Moved to 31DEC15 this date.

14843.  June 16, 2016           OOCAL, IMSCAL           Eric
        Changed:
        POPSDAT     New adverb ONEFREQ
        NEWPARMS    New adverb ONEFREQ
        OOCAL       Help: reorder adverbs, add ONEFREQ, INVERS 0 -> 1
        OOSUB       Help: reorder adverbs, add ONEFREQ, INVERS 0 -> 1
        IMSCAL      Help: add OUTNAME
        OOSUB       Fortran: reorder adverbs, add ONEFREQ, pass
                    ONEFREQ as 'MODSFREQ' in object UVIN.
        UVMOD       SAVE two frequency variables used in scaling
                    phases (affect GFORTRAN only)
        OOCAL       Run: add OUTNAME to IMSCAL proc, add progress
                    messages, set INVERS and ONEFREQ before OOCAL
                    invocation.
        PBUTIL      Add MODSFREQ flag to subtraction and division
                    methods, get model frequency in both, pass these
                    down to lower level routines, ultimately to
                    PBFACT.  Changed PBFACT to compute frequency
                    corrections to model based either on the model
                    frequency alone or all frequencies depending on
                    ONEFREQ.  (IMAGR will have ONEFREQ false always.)
                    Spectral index computation now uses the spectral
                    index image frequency for reference.  This will
                    have to be the new standard for images anyway.
                    Corrected error - the flux is 10**F not exp(F)
                    where F is the flux correction factor.
        Moved nowhere.

14844.  June 16, 2016              SETJY              Eric
        Fixed typo in output message string.
        Moved nowhere.

14845.  June 21, 2016            FITLD               Eric
        FITLD sets up antenna files with 2 polarization calibration
        values per IF.  It then allowed the AT file to change the
        number of PCALs to zero.  In general this does not matter but
        VBGLU comes unglued when finding lots of data but no second
        dimension.  Discovered that the AT2AN routine did not pick up
        any calibration that might be inthe AT file except for the
        first IF (it appears someone though NOPCAL was the actual
        NOPCAL times the number of IFs).  Corrected to loop over IF
        should there be incoming values, to retain the presumption of
        2 polarization terms, and to make sure that they are zero
        initially.
        Moved nowhere.

14846.  June 22, 2016            CLPLT                 Eric
        For some reason the error bars were also converted to be
        betwwen -180 and 180 degress.  It makes sense to do the
        closure phase in that way, but not the error bars.
        Moved nowhere.

14847.  June 23, 2016             install.pl             Eric
        I wanted to show the user $CDTST but perl insists on
        translating that so changed the execution of fix_aips_elcap.sh
        from $SYSMACIN to $AIPS_ROOT which will translate properly.
        Moved to 31DEC15 this date.

14848.  June 24, 2016             ALGMEM                 Eric
        If the last pass through this routine started with a model
        number greater than one but only included a single range of
        frequency channels, then the array of scaling numbers to step
        through the frequencies was not set properly.
        Moved to 31DEC15 this date.

14849.  June 24, 2016              IMSCAL               Eric
        Changed OOCAL.001 RUN file to add OUTNAME for all temporary
        files, namely the facet images and the output of OOSUB in the
        OOCAL step.  This allows multiple AIPS to run multiple copies
        of IMSCAL without name conflict.  Changed HELP files for OOCAL
        and IMSCAL.
        Moved nowhere.

14850.  June 27-28, 2016            BPEDT                Eric
        NEW TASK: interactive graphical editor much like EDITA but
        using bandpass tables to edit UV data.  Files include
        $APGOOP/BPEDT.FOR, $APLOOP/BPEDIT.FOR (large library of
        routines), $HLPFIL/BPEDT.HLP, and $HLPFIL/HLPEDIBP.HLP
        (run-time help).
        Moved nowhere.

14851.  June 29, 2016             TABED                Eric
        Changed code to copy all rows of a table to the output table
        even when the output table is new unless APARM(10) > 0.  Then
        only the selected rows are copied.  Before this change, a DELE
        operation would copy only the deleted rows to a new output
        table and a UFLG would copy only the previously flagged rows
        to a new output table.  This change allows one to be more
        cautious and not write over the input file but still keep all
        of the input file.
        Moved nowhere.

14852.  June 30, 2016           AIPSLetter             Eric
        LET16A in TEX, PS, and PDF put into system in $AIPSPUBL and on
        the web pages.  (TABED, BPEDT not included)

14853.  July 1, 2016            VLBAUTIL                  Amy
        Just for safety sake, changes all "sour" to "sources".
        Moved nowhere.

14854.  July 2, 2016               BPEDT               Eric
        Changed BPEDIT to (1) improve formats, (2) to find next sample
        in the area being flagged (area, above, below) and order that
        one to be flagged, (3) do flags as ordered ignoring sample's
        flux.  The last matters when flagging more than one antenna or
        time based on the values of one antenna and one time.
        Moved nowhere.

14855.  July 4, 2016           PC Tones                 Eric
        Changed PPCV.INC to allow up to 256 tones per IF per
        polarization.  Requires a some COMRPLs and a bunch of COMLNKs.
        Moved nowhere.

14856.  July 4, 2016            POSSM                  Eric
        Changed POSSM to plot PC tones as spectra on APARM(8) = 9.
        Scan averaging is based on the NX table and the tones axis is
        always labeled in channels.
        Moved nowhere.

14857.  July 5, 2016              PCFLG                Eric
        NEW TASK: Based on SPFLG, PCFLG edits pulse-cal tables writing
        a new version with blanked out channels.  Also a help file, a
        run-time help file.  Fixed run-time help files for SPFLG and
        FTFLG from things found while editing the one for PCFLG.  Also
        fixed a bug in the PC-plotting of POSSM.
        Moved nowhere.

14858.  July 6, 2016          PCPLT, PCFLG             Eric
        NEW TASK: PCPLT is like BPLOT except for PC tables.  Lets you
        look at pulse-cal spectra as function of antenna, one time
        slice per plot page or as a function of antenna, one antenna
        per plot page.
        PCFLG was found to ignore magic blanks when binning up the
        input pulse-cal table.  Corrected it to put magic blanks for
        real, imaginary, and flag number in the grid for such samples.
        Moved nowhere.

14859.  July 8, 2016          VLBAUTIL/VLBAFRNG           Amy
        Added some CLRTEMPs to VLBAFRNG after a report of a BLEW CORE
        when running.
        Moved nowhere.

14860.  July 18, 2016          ACCOR, ACSCL              Eric
        Changed ACSCL to add the SUBARRAY adverb and to allow it to
        loop over subarray on SUBARRAY=0.  Discovered that the code
        and ACCOR did not handle the last scan correctly if it
        contained auto-correlation data.  That last scan was dropped.
        Also changed help file to change undefined SVAN to "scan
        length" and changed the cutuff to 0.1 * min (SOLINT,
        scan-length) in both code and help.  Changed accumulation of
        integration times in case integration time is not one of the
        random parameters.
        Moved nowhere.

14861.  July 19, 2016             XG2PL                  Eric
        XG2PL needed to set some parameters in order to work in the
        absence of an XG and/or ZE table.  It also had an error in
        computing the Zeeman models done without Gaussians.
        Moved nowhere.

14862.  July 19, 2016              TVSPC                 Eric
        Added APARM(8) option > 0 -> label spectra in channels, else
        label with the first axis units.
        Moved nowhere.

14863.  July 21, 2016          XGAUS, XG2PL, ZEMAN        Eric
        XGINI and ZEINI: to add keywords to the call sequence
           to define the frequency reference value, pixel, increment,
           and type.  On read of an old file, the current header
           provides default values if necessary (thereby handling the
           translation problem).
        XGAUS: (a) to add option DOMODEL to plot the individual
           Gaussian components when there is more than one, (b) call
           sequence to XGINI including header values when creating a
           new XG table, (c) testing old versus new coordinate values
           with warning about using old ones, and (d) using old
           reference values rather than current header values
           throughout.  This is particularly important since the
           component locations are in pixels wrt the reference pixel.
        ZEMAN: (a) to new call sequence for XGINI and ZEINI including
           providing header values for a new ZE table, (b) testing old
           reference values against current header with warning, (c)
           testing ZE reference values against XG reference values to
           warn if they are not the same, and (d) using old XG
           refernce pixel for Gaussian models and old ZE header
           reference values throughout.
        XG2PL: (a) to new call sequence for XGINI and ZEINI, (b)
           comparing reference information from XG and ZE tables with
           a warning if they do not match, (c) using old XG reference
           pixel for frequency reference, and (d) copying and
           displaying enough parameter fit values when doing
           non-Gaussian fits.  The task already uses the current
           header intelligently to plot the X-axis labels.
        RM2PL: correct units to "Jy/beam" rather than "Jansky".
        Moved nowhere.

14864.  July 21, 2016            PCFIT                    Eric
        NEW TASK: Fits delays and phases to multi-pulse cal data
        and writes an SN table usually with the difference in phase
        and delay between the start and the current time.
        Moved nowhere.

14865.  July 26, 2016            BPEDT                  Eric
        The Explain section of the help file had not been edited for
        this task rather than EDITA.
        Moved nowhere.

14866.  July 26, 2016             PCEDT                   Eric
        NEW TASK: graphical editor for pulse-cal tables.  Plots each
        PC spectrum and allows editing functions sort-of like SNEDT,
        EDITA, and EDITR.  It writes a new flagged table if any flags
        are generated.  Changed BPEDIT adding EDITPC (main control
        routine), PCGTPC (read PC table into ram), PCFCAP (apply flag
        command table to PC table values).  The routine to find the
        "nearest" pixel was changed, in the case where the pixels are
        spread distinct along the X axis, to take the nearest one
        always ignoring any directive about above or below.
        Moved nowhere.

14867.  July 27, 2016            IMSTAT                 Eric
        AU6D retained case sensitivity about Jy/beam (JY/BEAM) and so
        did not always show total flux depending on the brightness
        units case.  Made it case insensitive.  Odd that i missed this
        one when I went through lot of routines fixing this issue
        (CASA uses Jy/beam).
        Moved nowhere.

14868.  July 27, 2016             XG2PL                 Eric
        Changed to print to OUTTEXT the same X axis info as requested
        in the plot - frequency, velocity, or whatever is in the
        header.
        Moved nowhere.

14869.  July 28, 2016           PCFIT                  Eric
        I subtracted Cable-Cal from the delays, but forgot to check
        for magic blanks.  Added tests for that, setting the cable-cal
        to zero.
        Moved nowhere.

14870.  July 28, 2016           WIPER                  Eric
        Changed to keep track of up to 25 baselines at each pixel, to
        have large enough buffers to load really wide TVs, and to
        position the wiper display correctly and more sensibly on
        WIPER SET.
        Moved nowhere.

14871.  July 29, 2016             CLCAL                Eric
        Changed:
        SNAPP    To return a logical if any phases, delays, rates are
                 valid and non-zero
        SN2CL    Poor logic allowed the SN table record number to be
                 counted beyond 2 billion and so to warp to negative.
                 At that point it thought it could read more SN table
                 data and died badly.
        CLCAL    Fixed an array declaration to use MAXANT rather than
                 a hard-coded 90.  Changed call to SNAPP and set it up
                 to call CALREF only when phases actually need to be
                 re-referenced.  This will save alarming messages when
                 processing APCAL SN tables.
        Moved nowhere.

14872.  July 30, 2016               DFTPL               Eric
        Added almost all of the calibration adverbs to this task.
        The original and perhaps best usage is still for a uv data set
        having all calibration and flagging applied and interfering
        sources removed.  However, there is no reason not to allow a
        more complete range of access to the UV data.  Flagging is
        especially important.  Extracted TBTIME from TVFLG to use in
        this task and changed TVFLG, SPFLG, and FTFLG to use the
        library version of this routine henceforth.
        Moved nowhere.

14873.  August 12, 2016          subarrays                Eric
        In the new format, the maximum number of subarrays is not
        limited to 99 so changed
        DRNX.INC   Changed MAXSUB to 512 from 50
        FITAB      Added test on maximum subarray to decide output
                   random parameter form.
        FITTP      As FITAB
        Moved nowhere.

14874.  August 12, 2016             RFLAG               Eric
        A couple of variables in the FLAGIT routine required SAVEing.
        Moved nowhere.

14875.  August 16, 2016            UFLAG                 Eric
        NEW INTERACTIVE TASK to display data gridded onto a U-V plane
        and enable various kinds of editing.  The samples are gridded
        with a one-cell pillbox convolution and the image is divided
        by the sum of the weights - equivalent to pure uniform
        weighting.  The images maintained in ram include the scalar
        average amplitude, the vector average amplitude, and their
        difference.  Also maintained at each pixel are the lists of
        baselines contributing to the pixel and the absolute
        visibility record numbers contributing to the pixel (up to 50
        of each).  The image is of positive V only, using the
        Hermitian property, and the scaling is set by CELLSIZE and
        IMSIZE to match the pixel sizes in IMAGR.  Automatic flagging
        options are planned but not yet present.
        Moved nowhere.

14876.  August 17, 2016             WIPER                 Eric
        Changes suggested by UFLAG:
        1. Dropped adverb LTYPE, changed code to use -7.
        2. Changed default image size to allow axis labels to fit.
        3. Use pixel replication if (sub)image is small enough.
        4. Take axis labeling into account when positioning image.
        5. Interactive wiper size settings take pixel replication into
        account.
        6. CURVALUE-like display durring editing now at top of screen
        instead of overlapping the data explicitly.
        7. Changed flag writing to try to combine adjacent spectral
        channels when possible.
        8. Interactive flagging reports the number of pixels and vis
        samples flagged.  (FAT only when done, rest on each flag)
        9. Added PRTLEV adverb to allow users a choice about the
        detailed flagging report.
        Moved nowhere.

14877.  August 17, 2016             DFTPL                 Eric
        Added forgotten setting of BCHAN, ECHAN, BIF, and EIF before
        calling the UVGET routine.  The CHNDAT call had numerous
        issues including LUN, CNO, and wrong header causing it to try
        to find the antique CH table.
        Moved nowhere.

14878.  August 17, 2016       CookBook              Eric/Amy
        Changed LaCook9 to have DOCAL true for BPASS - one does not
        want the delay to also be part of the bandpass solution.
        Moved nowhere.

14879.  August 20, 2016          FGTAB               Eric
        NEW TASK: writes a text file with BFREQ and EFREQ values for
        those flags that have no time range, source, subarray, or
        frequency ID specified.  In addition, no antenna shouold be
        specified, although one may be if OPCODE is 'ANTE'.  In that
        case the ANTENNAS keyword is also written.  This allows flags
        developed for common RFI to be translated into text files
        which may then be read by UVFLG for data sets with different
        frequency structures.
        Moved nowhere.

14880.  August 21, 2016           FGCNT               Eric
        NEW TASK: compares two flag tables by counting the visibility
        samples that get through them separated by source,
        polarization, and IF.  All standard calibration adverbs are
        available for use.  There appears to be a real interest in
        knowing how many samples are flagged by various interactive or
        automated flagging routines.  This task performs a reliable
        count - simply counting in the FG table cannot account for
        significant time ranges in some flags and all of the other
        peculiar situations which AIPS' general flag tables make
        possible.
        Moved nowhere.

14881.  August 21, 2016          FUDGE                 Eric
        Added adverbs ANTENNAS and BASELINE which had for some reason
        been omitted.  FGCNT was based on FUDGE and needed them.
        Moved nowhere.

14882.  August 21, 2016            PBCOR                Eric
        The history file was not telling truth for EVLA images (or for
        any other for that matter).  The real parameters should be
        displayed and, if doing the new EVLA interpolation, both sets
        should appear.  So made an include DPBCALC.INC and changed
        PBCALC to use it and fill in some extra parameters.  Changed
        PBCOR history to print the actual parameters used and, if
        EVLA, to say so and print the second set of parameters used.
        Moved nowhere.

14883.  August 22, 2016          FGCNT                 Eric
        Added options to list iver antennas in a couple of ways.
        Cleaned up issues when only one source is selected from a
        multi-source file and when using a single-source data set.
        Moved nowhere.

14884.  August 22, 2016              UVHIM             Eric
        Added option to do both Hermitian points when doing a u-v
        grid.
        Moved nowhere.

14885.  August 23, 2016           VLAMP               Eric/Amy
        Changed to count valid correlators through the full CL/SY
        table reading rather than depending on the SY table's last
        time.  Changed to average the gain over the IFs and to do
        gains for both polarizations.  At present the values are the
        same in all IFs and polarizations but there is no reason to
        assume that that will always be the case.  Changed to write
        only the one or two averages, rather than a value for each IF
        which ANTAB will not swallow.
        Moved nowhere.

14886.  August 23, 2016            HINOTE               Eric
        The adverb PRTASK should be 8 characters like TASK, not 5.
        Changed
        POPSDAT    To make PRTASK 8
        AU1        To handle old and new lengths silently.
        AU7        To handle old and new lengths silently.
        AU7B       To handle old and new lengths silently.  Changed
                   HINOTE to use PRTASK instead of "HINOTE" when
                   DOHIST <= 0 and doing either the COMMENT form or
                   the interactive input form of the verb.
        PRTASK     HELP: Changed the length, mentioned the change of
                   length and updated the list of verbs using this
                   adverb.
        HINOTE     HELP: Added PRTASK and changed the descriptions of
                   the pre-pending function.
        Moved nowhere.

14887.  August 23, 2016           IMSCAL, OOCAL          Eric
        Changed OOCAL.001 RUN file to add two procedures to write
        history records to the input file.  OOCAL and IMSCAL invoke
        ordinary tasks which write history records to their output
        files, but those files end up deleted most of the time.  The
        SN table is all that is saved and that goes on the input file
        eventually.  IMSCAL will write a full history including OOCAL
        and OOCAL when not used by IMSCAL will write the OOCAL part
        of its history.  All this depends on the changes made to
        HINOTE and the length of PRTASK made today.
        Moved nowhere.

14888.  August 24, 2016         MULIF               Eric/Walter Alef
        There was a wrong argument to UVDFND hard coded as 4, when
        only 1 or 2 are allowed.  Changed to 2, thanks Walter.
        Moved nowhere.

14889.  August 25, 2016           PRTAB                  Eric
        The printer line count routine did not have the width of the
        printer set and so counted lines as if one column at a time
        was printed.  Fixed this.
        Moved nowhere.

14890.  August 25, 2016             INDXR                Eric
        This task had a local limit of 20 for maximum subarray.
        Changed to 512 which is expensive.
        Moved nowhere.

14891.  August 25, 2016         UVLOD, FITLD            Eric
        The conversion of BASELINE to SUBARRAY was inaccurate and
        failed in some cases.  Adding roundup of 0.0001 was not
        enough, changed to 0.05.
        Moved to 31DEC15 this date.

14892.  August 26, 2016      Subarrays                Eric
        The subroutine GETNAN is widely used and customarily had an
        output array dimension of 51 for number of subarrays and
        number of antennas in subarray(i-1).  Changed this to 513.
        Gridding routines in TVFLG and friends double this and use the
        upper half for cumulative number of baselines.  Changed:
        APLNOT: GETNAN, GNSMO, GRIDTB, AN10RS
        APGNOT: ACFIT, ACLIP, BASRM, CLIP, CORER, FGDIF, FLGIT
                GETJY, INDXH, MULTI, OFLAG, PHSRF, QUACK, REFLG,
                SPCAL, TRUEP, TYAPL, TYSMO, UVAVG, UVCOP, UVDI1
                UVFLG, UVIMG, UVLIN, UVMLN, UVMTH, UVRFI, VBGLU
        QPGNOT: BLCAL, BLCHN, DEFLG, LPCAL, PCAL , RLCAL
        YPGNOT: FTFLG, LOCIT, SPFLG, TVFLG, UFLAG, UVHGM, WIPER
        The following tasks called GETNAN but did nothing with the
        output, so dropped the call:
        $YPGNOT: CAPLT, CLPLT, FRPLT, POSSM
        Moved nowhere.

14893.  August 26, 2016             SPLIT                 Eric
        When averaging IFs as well as channels, SPLIT got the wrong
        output frequency.  UVGET had been called so the header
        frequency was adjusted for BIF; the computation did not take
        this into account.  Use OLDFRQ instead.
        Moved to 31DEC15 this date.

14894.  August 26, 2016            UFLAG                 Eric
        1. Changed it to make the list of visibilities a linked list
        so that every pixel can account for its visibility records.
        2. Added ISCALIB adverb to support automatic flagging more
        completely when looking at RR, LL, XX, YY, or I polarization.
        3. Fixed it to handle switching polarizations when no new FG
        table is created.
        4. Added USER and AUTO FLAG VIS functions.  Looks at some of
        the grid pixels, flags visibilities outside specified ranges
        in the FC table, updating the grid.
        5. Computes and displays the median, mean, and rms of the
        current data type.  Uses them in the AUTO FLAG VIS.
        6. Corrected handling of pixel-replicated screen values.
        7. Display phase as well as amplitude when examining vis.
        8. Fix history when looped throuugh Stokes.
        Moved nowhere.

14895.  August 29, 2016          UVHGM                 Eric
        changed:
        1. Allow 32768 total boxes and fix Gaussian fitting to allow
        that many.  It was limited to 1024 but did not check this
        limit.
        2. Changed plotting of histogram with Gaussian fit to plot
        just the outline (DOALL > 1) or the full vertical boxes.
        3. Changed setting of default plot range for real, imaginary,
        and amplitude to find the actual min and max of each.
        Moved nowhere.

14896.  August 30, 2016           UVLOD, FITLD           Eric
        Subroutine RUVTAB did not handle compressed data properly when
        DOKEEP was false.  Added a check that went over the buffer
        properly.
        Moved to 31DEC15 31 August.

14897.  September 3, 2016           UVIMG                Eric
        Added adverb DPARM(8) to signal that the convolution adverbs
        are actually wanted.  XTYPE and YTYPE are usually set to 5 for
        IMAGR but do stuff here that usualy is not wanted.  Added a
        variety of comments about this and about DPARM(5) and (6)
        which almost always have to be set.
        Changed Fortran to implement DPARM(8) and to keep the
        convolver from going off the edges of the image.
        Moved nowhere.

14898.  September 6, 2016         AIPS Memos              Eric
        Added info about related AIPS Memos to help files for XGAUS,
        RMFIT, ZEMAN, XG2PL, RM2PL, TVSAD, and TVSPC.
        Moved nowhere.

14899.  September 7, 2016           UFLAG                Eric
        Changed:
        Help file:  correct inputs description of DOCENTER, mention
                    new memo, add phase image, change VIEW ONLY and
                    auto flag descriptions in Explain
        Realtime help: Change SET PIXRANGE (now type dependent), add
                    phase image type, change AUTO description, change
                    VIEW ONLY and FLAG ALL (now type dependent)
        Fortran:    1. VIEW ONLY and FLAG ALLs now done in image type
                       dependent ways
                    2. SET PIXRANGE now image type dependent
                    3. Phase is now image type 3, difference is 4
                    4. Change plot positioning, reposition if current
                       window corners have changed, corrected Y limit
                    5. Allow VIEW ONLY range to go outside actual
                       range  (which happens for some reason)
                    6. Allow negatives in image (for phase)
                    7. Improve curvalue-like display and other
                       displays for units
                    8. Auto-editing progress messages now every 2
                       minutes or so
                    9. Correct some catalog status issues
        Moved nowhere.

14900.  September 12, 2016      UFLAG, Memo 121            Eric
        Changed UFLAG to have APARM control the multipliers times the
        rms in the AUTO FLAG VIS function.
        Wrote AIPS Memo 121 to describe this task.
        Moved nowhere.

14901.  September 23, 2016          DOVLAMP                 Amy
        Made a couple of improvments to make DOVLAMP more bulletproof:
        1) Now if INCLASS='TYAPL' the proceedure does not try to load
           the data even if ASDMFIL is set to something.  I.e., if
           INCLASS='TYAPL' then always assume that the data is already
           loaded (and TYAPL has been run).
        2) If primary flux calibrator that is present in the data
           should not be used, CALSOUR(1) can be set to 'NOCAL' and
           the SU table will not be searched for a flux calibrator.
        Moved nowhere.

14902.  September 26, 2016        PBCALC              Eric
        Updated all help files with PBPARM primary beam correction
        options.  This included BOXES, FACES, IMFIT, JMFIT, LTESS,
        MOMNT, PATGN, SETFC, STESS, FLATN, PBCOR, SAD, SPCOR, SPIXR,
        XMOM, UTESS, VTESS, and TVSAD.
        Moved nowhere.

14903.  September 27, 2016          VLOG                 Amy
        Took out the half channel shift in the calculation of the freq
        of the edge of IF.  Also added a default of 0.1 Hz for the
        FQTOL (frequency comparison tolerance).  Closed the WRIT
        status of input UV data file.
        Moved nowhere.

14904.  September 27, 2016           CONVL                Eric
        Added OPCDE='GMOD' to convolve with the specified Gaussian
        ignoring all Clean beam information.
        Moved nowhere.

14905.  September 27, 2016           CALIB               Eric
        Added more tricky normalization options which average over
        subarray but separate IF or IF and polarization.
        Moved nowhere.

14906.  September 28. 2016        PBCALC                Eric
        Added a message to say what array parameters are being used by
        PBCALC.  Added web address for EVLA Memos to all the PBCALC
        task help files.
        Moved nowhere.

14907.  September 29, 2016        PCINI                Eric
        The PC table initialization routine regarded a mismatch in
        revision number as an error.  Changed it to a warning.
        Moved nowhere.

14908.  September 29, 2016         BPEDT                Eric
        Fixed 3 bugs:
        1. The flags written by BPEDT were too "exact" in their times
        and needed to be rounded outwards (by 0.095 sec) to get all
        the data contributing to the bandpass solution.
        2. The automatic choice of a fully positive plot range for
        phase failed to change the phase values to all positive.  It
        still plotted correctly, but the flagging failed.  Two loop
        counters were not properly incremented.
        3. A parameter that kept track of whether an IF was flagged
        for EDITA, EDITR, et al. was left in the code.  This is needed
        if all IFs are not in RAM at the same time.  BPEDT really does
        not support this, so the parameter is not needed.  It was
        being filled in badly, writing over other data making a mess
        of things.
        Moved nowhere.

14909.  October 4, 2016        PLGET, EXTLIST             Eric
        Went over all plot tasks to make sure that PLGET and EXTLIST
        are up to date.  Added RM2PL, XG2PL, ALVAR, PCPLT, and PLROW
        to AU2A (PLGET) and AU8A (EXTLIST).  Also udated UVPLT, VPLOT,
        CLPLT, CAPLT, DFTPL, KNTR. RFLAG, EVAUV. DELZN, and SOUSP in
        these routines.
        Modified XG2PL, RM2PL, DFTPL, PLROW, PCPLT, and ALVAR to fill
        in extra defaults into the adverbs to support EXTLIST.
        Changed PLGET and EXTLIST help files.
        Moved nowhere.

14910.  October 6, 2010            SLICE                Eric
        The operation to drill down through a cube with a single pixel
        in X and Y and the slice running along Z had a problem if the
        X and/or Y pixel was not exactly an integer.  Bad slices
        resulted.  Corrected the code to interpolate in X and Y
        correctly during this operation.
        Moved to 31DEC15 this date.

14911.  October 7, 2016              TVSPC               Eric
        Changed to add SET CHANNELS and RESET CHANS operations to set
        the channel range interactively and reset that range.  The
        plots and fits then use only the requested channel range.
        Any slice written out however has the full channel range.
        Moved nowhere.

14912.  October 6, 2016          CookBook                 Eric
        Corrected a bad underline which came across as a subscript in
        a Memo reference.  Changed LaCook9.tex, COOK9.PS and
        COOKBOOK.PDF.
        Moved everywhere (AIPSPUBL goes everywhere).

14913.  October 9, 2016        New Mac                 Eric
        The new Mac to compute binaries from a 10.11 OS (El Cap) but
        designed to run on 10.7 and later requires some changes to the
        compiler options and to the libraries used.  Changed
        $SYSMACIN versions of FDEFAULT.SH. LDOPTS.SH, CCOPTS.SH, and
        fix_aips_elcap.sh and MACINT options in the Makefile contained
        in $YSERV/XAS.SHR.
        Moved nowhere.

14914.  October 12, 2016          DFTPL                 Eric
        Fix up Stokes handling some to allow linear polarizations.
        Moved nowhere.

14915.  October 12, 2016            TVSPC              Eric
        The new SET CHANNELS option could set BCHAN > ECHAN which
        would then cause the task to die.  Fixed it to defend itself
        so that BCHAN is always < ECHAN.
        Moved nowhere.

14916.  October 12, 2016           BPASS               Eric
        New adverb MINANTEN for minimum number of antennas - in
        POPSDAT, NEWPARMS, and a help file.  Added this adverb to
        BPASS help and code.  MINANTEN was 2 inside the code
        previously.
        Moved nowhere.

14917.  October 14, 2016           MNJ                 Eric
        Discovered that the MNJ was not working properly - most
        obvious symptom was POPSGN was not being run for new
        POPSDAT.HLP file.  Changed:
        AIPSUPD      Binary versions need to rsync the transaction
                     files to 2 places.  The cvs version has the
                     appropriate copies.
        UPDCONTROL   Dropped use of UPDOBSLT program which is not
                     needed since the chkout system already removes
                     any "removed" files from PUTBCK, COMRPL, COMLNK
                     lists.  UPDOBSLT was not compiling properly on
                     the new Mac.  Changed the sort command grammar a
                     bit to produce a more correctly sorted PUTBCK.UPD
                     file.
        MAKE.MNJ     Dropped the compilation of UPDOBSLT and fixed
                     reference to 31DEC03.
        MAKE.BMNJ    Changed reference to 31DEC03 (!)
        Unfotunately, these two issues affect the ability of MNJ sites
        to update file automatically so these corrections will have to
        be done manually.
        Moved nowhere.

14918.  October 18, 2016            XAS                Eric
        Mac OS 10.10 (or earlier) made a change to the file descriptor
        lengths that caused them to be too large for the basic limited
        size in the standard socket routine "select".  This is a bug
        which they admit probably brought out by the switch to a
        64-bit version.  Added the compile option
        -D_DARWIN_UNLIMIT_SELECT to the Makefile for MACINT.  Also
        fixed some setting of the TVLIMG parameter which had errors
        (clearly of little or no significance).
        Moved nowhere.

14919.  October 21, 2016             TABED              Eric
        The relatively new controls to always copy had a bug in which
        the records before the first requested record were not copied
        properly but instead a zero-filled record was appended at the
        end (if the input and output tables are the same).
        Moved nowhere (not in NEW).

14920.  October 21, 2016        FTFLG, SPFLG            Eric
        There was an addressing issue when flagging a time or time
        range over a range of IFs.  It left a few channels on some end
        unflagged and potentially could have flagged channels other
        than those desired.  This only arose when a sub-image of the
        whole was loaded to the TV.
        Moved nowhere.

14921.  October 21, 2016           PBCALC               Eric
        The Pband EVLA parameters were not correct.  The values for
        the fourth term were tabulated for the third term and the
        existence of a fourthe term was ignored.  Fixed the third term
        tabulation and added code for the fourth term.  No ther
        frequency uses 4 terms.
        Moved nowhere.

14922.  October 24, 2016         FTFLG, SPFLG             Eric
        When flagging IFs N1 - N2, the interactive flag options want
        to keep the cursor in that region.  If the image is zoomed in
        a way that that region is not visible, confusing things
        happen.  Changed code to detect this and exit gracefully.
        Moved nowhere.

14923.  October 24, 2016         VLBARUN              Amy
        Corrected the tests on the results from BSCAN.
        Moved nowhere.

14924.  October 25, 2016         MULIF                Eric
        Fixed the task to copy autocorrelation data (probably was just
        an oversight) and added (non-OOP style) code to create and
        fill an index table.
        Moved nowhere.

14925.  October 26, 2016          ZMKTMP                  Eric
        $APLUNIX/ZMKTMP.C did not work on the new 64-bit Macs.  The
        format %010d into a 10-character string was no longer
        acceptable.  Changed to use %9d which is more than enough.
        This affects all attempts to make a temporary file name -
        primarily in Cleans (IMAGR for boxes) and verbs FILEBOX,
        DFILEBOX, and the GRIPE verbs.  The calling routine ZFULLN is
        called a million places but I think we need only link imaging
        tasks (IMAGR, WFCLN, SCMAP, SCIMG) and AIPS*.
        Moved nowhere.

14926.  October 27, 2016       Slice fitting            Eric
        Changed
        POPSDAT.HLP    Add verbs TVCOMPS, TVACOMPS to plot individual
                       components
        NEWPARMS.001   Add verbs TVCOMPS, TVACOMPS to plot individual
                       components
        AIPS           Change verb number range for AU6E
        AIPSB          Change verb number range for AU6E
        AIPSC          Change verb number range for AU6E
        AU6E           change branch number values, add TVCOMPS,
                       TVACOMPS
        TVSLIN         change branch numbers
        SLFIT.HLP      add ORDER adverb to specify baseline fit order
        SLFIT          add adverb, add solving for baseline up to
                       quadratic
        MV2C06SL       Document added 6 words
        AU8A           Change EXTLIST for slice models to know about
                       baselines
        TVSLPL         Add component plotting and baseline fit
        TKGMPL         Add baseline fit
        TKRSPL         Add baseline fit
        SLPRT          Add baseline fit
        TVSPC.HLP      Add APARM(9) = ORDER+1
        TVSPC          Add APARM(9) to SET APARM, add baseline fitting
                       to FIT SPECTRA and SAVE SPECTRA.
        HLPTVSPC.HLP   Correct SET APARM and include order setting.
        SL2PL.HLP      DOMODEL up to 3 for comps, sum model
        SL2PL          Change plot to do comps and or sum of model
                       including baseline.
        Moved nowhere.

14927.  October 27, 2016	     VLBARUN		Amy
        VLBARUN often assumed that the input data file's INSEQ was 1, fixed.
        Also added a check on number of stokes before setting stokes='half'
        for UVPLT.
        Moved nowhere.

14928.  October 28, 2016            MNJ                 Eric
        The revised script still updated some files in special areas
        (POPSDAT and MNJ scripts mainly) **before** they were copied
        from the master when using rsync.  Changed AIPSUPD to do the
        update at the right 2 places.
        Moved nowhere.

14929.  October 28, 2016             slices              Eric
        Fixed one more reference to verb number in AU6E (TVSET and
        TV1SET) did not work.  Added help files for the new verbs
        TVCOMPS and TVACOMPS.
        Moved nowhere.

14930.  October 28, 2016       AIPS Memo 120             Eric
        Upgraded AIPS Memo 120 to describe SET CHANNELS, RESET CHANS,
        changes to APARM and SET APARM.  Required new figures in most
        cases for the new menu and pagination did not turns out so
        well.
        Moved everywhere ($AIPSPUBL goes everywhere).

14931.  November 8, 2016             RMSD                 Eric
        Added OPCODEs MEDI for median and MAD for median absolute
        deviation from the median.  The latter is thought to be a more
        stable estimator of noise than regular rms.  RMSD uses a
        robust rms so that may not be important.
        Moved nowhere.

14932.  November 8, 2016       general lists             Eric
        Updated:
        1. HLPIT.LIS  the TAB completion file
        2. ABOUT lists: ADVERB, ANALYSIS, CALIBRAT, EDITING, IMAGING,
              INTERACT, MODELING, ONED, OOP, PLOT, SPECTRAL, TABLE,
              TASK, TV-APPL, TV, UV, VERB, VLBI
        Moved nowhere.

14933.  November 11, 2016            CookBook             Eric
        Updated chapters dropping references to 31DEC11 and older
        releases
        4.  BPEDT
        5.  UFLAG, FGCNT
        6.  SLPRT, TVCOMPS, UFLAG, BPEDT, PCFLG, PCEDT
        7.  TVSPC, SLPRT, PBCOR, PATGN, TVACOMPS, slice baseline,
            SL2PL
        8.  minor rewording
        9.  BPEDT, new PC tasks
        13. Update 18 ABOUT lists
        E.  BPEDT, UFLAG, FGCNT
        2, 3, 10, 11, 12, D, F also changed for old references
        0, I, J brought up to match above
        All COOK*.PS updated, COOKBOOK.PDF, and the html web version.
        Moved nowhere.

14934.  November 16, 2016           PCLOD                Eric
        Added capability to read the new DiFX format text files.
        Other bugs found:
        BPEDIT  The setting of min/max went over all times -
                appropriate for QEDIUTIL where all times are in the
                plot, but not for BPEDT and PCEDT which have only 1
                time per plot.
        PCFLG   Changed the setting of min/max - extending it some.
                Phases of about -180 would stay very black.
        Also made same change to FTFLG, SPFLG, TVFLG.
        Moved nowhere.

14935.  November 21, 2016           RMSD               Eric
        Scale the MAD output to be equivalent to an rms (* 1.4826).
        Moved nowhere.

14936.  November 21, 2016       PC tables             Eric
        Pulled the PC fitting code from PCFIT, making a subroutine set
        to do the fitting, returning the fit delays, phases, errors,
        weights, and residual PC spectra.  The new routine is called
        $APLNOT/PCFITR.  Changed also
        PCFIT    to use PCFITR and to write a new residual PC table as
                 well as an SN table.
        PCFIT    HELP: add info about new PC table
        PCPLT    to use DOCALIB to decide whether to plot residual
                 pulse-cal spectra or input pulse-cal spectra.
        PCPLT    HELP: to change "bandpass" to "pulse-cal spectrum"
                 throughout and to add DOCALIB
        BPEDIT   to store residual phase and PC spectra frequencies in
                 the mammoth data array for PC tables, to display and
                 edit with residual phase if requested, and to
                 re-compute all residual phases when requested.
        PCEDT    HELP: rewording of what it does and fix up the
                 explain file's menus.
        HLPEDIPC HELP: new on-line help reworded some form HLPEDIBP
                 with new options added
        PCLOD    changed to be forgiving about mismatches between the
                 UV data set and the PC table.  A UV data set must be
                 used but it does not have to match in times or
                 frequencies.  It does help if the antennas match or
                 completely do not match.  The task wants to convert
                 times with an NX table to source and FQID numbers and
                 an AN table to convert antenna names to numbers.
        PCLOD    to explain why a data set must exist but that the
                 task is very forgiving.
        Minor typos fixed in BPEDT.HLP and HLPEDIBP.HLP as well.
        Moved nowhere.

14937.  November 23, 2016          PC again             Eric
        Changed BPEDIT to get the PC application routine corrected to
        the new addressing required for the residual display.  It died
        when trying to write out the flagged PC table.
        PCFLG   Changed to do residual computation and display as well
                as displaying alteratively the input values.
        Also PCFLG and HLPPCFLG help files for new options and the
        availablility of residual as well as input data.
        Moved nowhere.

14938.  November 28, 2016       Roll-over prep          Eric
        1. Changed all HLP*.HLP files to say run-time help and fixed
           the wording of several.
        2. TAB completion file (for HLPEDIPC)
        3. Significant number of ABOUT files for the changes to
           HLP*.HLP 1-liners.
        4. Chapter 13 of the CookBook for the ABOUT lists
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC16 is NEW

***********************************************************************
***********************************************************************

14940.  December 1, 2016             PCASS                     Eric
        NEW TASK: Uses pulse-cal amplitudes and, optionally, residual
        phases, to compute bandpass records for each calibrator scan.
        They look like proper bandpass things but remain to be tested
        against real data.
        Moved to 31DEC16 this date.

14941.  December 2, 2106          PCASS                  Eric
        The handling of scans and PC records outside of any scan
        needed significant improvement.  Also the BP table requires
        the max antenna number in its header or DOBAN > 0 will abort
        with a nasty set of dynamic memory failure messages.  Added
        option to treat the PC amplitudes as power or (default) as
        voltage.  Quick tests suggest that I do not know which is
        right.
        Moved to 31DEC16 this date.

14942.  December 5, 2016          UVFLG                 Eric
        The shadowing function used variable DEC for computing the W
        term.  Unfortunately, DEC is the header declination in degrees
        which is zero for multi-source and which needed to be in
        radians for the computation.  Changed it to use DECEPO which
        is correct in all cases.  Changed the inputs section of the
        help file to clarify the meaning of APARM(5) = diameter of the
        antennas to be flagged in meters.
        Moved to 31DEC16 this date.

14944.  December 12, 2016          VLANT                 Eric
        The VLA has had an issue in the on-line atmospheric delay.  It
        was wrong from IAT August 9 to Nov 15, 2016.  I have added
        routines to correct for this following a formula from Barry
        Clark to VLANT which users should use first on their data and
        which writes a new CL table anyway.  The routines check the
        observation dates and only do the correction if it is needed.
        I also added a little-used adverb to let the user turn off
        either this elevation correction or the antenna position
        correction with the default to do both when appropriate.
        Note that the error is a delay error but it is a function of
        time (elevation and azimuth) and of source so the full phase
        correction enters at each IF.  The delay correction itself is
        small at elevations > 20 degrees or so but the phase
        correction matters even at rather higher elevations.
        Moved to 31DEC16 this date.

14945.  December 15, 2016          VLANT                 Eric
        Vivek has determined that there was in fact only one time
        interval and that the approximate best value for the
        correction is -1.0E-15 sec/m.
        Moved to 31DEC16 this date.

14946.  December 16, 2016        RFLAG, REWAY             Eric
        Added some general advice (from Fraser) to the help files for
        these tasks.  There are very many knobs and most can be
        ignored.
        Moved to 31DEC16 27 Dec.

14955.  January 4, 2017           POSSM                Eric
        The help claimed that correlation functions could be labeled
        in seconds (actually milli seconds or less) but the code went
        to trouble to turn off the option.  Changed to allow it using
        Delta_t = 2 * Nchan / Delta_f.
        Moved to 31DEC16 patch this date.

14956.  January 6, 2017         ATLOD                 Eric
        My error setting up TAPIO - worked for real tapes which I
        apparently had some time ago, but failed for disk files.
        The LUN tells TAPIO whether it is a real tape or a disk file.
        Moved to 31DEC16 this date.

14958.  January 12, 2016          CCRES               Eric
        CCRES ignored blanking and so could add a component to the
        magic value making it no longer magic, just very large.  It
        would also rescale magic blanks even if no CCs touched the
        blanked pixel.  Also changed the default OUTCLASS and reworded
        some in the help file.
        Moved to 31DEC16 this date.

14968.  January 30-31, 2017           DFTPL                Eric
        Did not get the frequencies correct when BIF > 1.  Also messed
        up the top label if BIF=EIF or BCHAN=ECHAN.
        Moved to 31DEC16 this date.

14983.  February 24, 2017           DBCON              Eric
        A BAD ERROR was made May 28, 2014 in DBCON.  If the 2 data
        sets differed in frequency (after shifting of the reference
        pixel), the U-V-W of the second data set was scaled by the
        ratio of the frequencies.  This is not correct - the u-v-w
        with no scaling are in wavelengths at the observation and
        should not be changed.  (A shift of reference pixel does
        require a modest re-scaling based only on the frequencies in
        the particular data set.)  I have restored the correct code in
        DBCON and added a loud warning message to the Fortran and the
        help file.  The output of mixed frequencies should NEVER EVER
        be processed by a task that needs to change U-V-W since it
        cannoy fully know the frequencies to use.  The most obvious of
        these is UVFIX.
        Moved to 31DEC16 this date.

14985.  February 28, 2017          DFTPL               Eric
        Corrected addressing of visibility data - pointers need to be
        set after UVGET ('INIT'..) not before.  Led to IFs > BIF being
        ignored.
        Moved pointer fix to 31DEC16 this date.

14994.  March 8, 2017                  BPASS            Eric
        The normalization routine for BPASSPRM(10)=1 had an error
        affecting linearly polarized data.  The normalization was
        likely to be very wrong for some IFs and polarizations.
        Moved to 31DEC16 this date.

15001.  March 21, 2017        Spectral Index              Eric
        I insisted that spectral index was based on 1 GHz and then
        became inconsistent in its application.  Those tasks that
        use Rick Perley's calibrator lists (CLIP, SETJY, UVFND,
        BLCHN, BPASS, CPASS, FTFLG, SPFLG, UVPLT) are obliged to stay
        on 1GHz as a reference to match the lists including when
        SPECINDX and SPECURVE are specified by the user.  But other
        tasks can be more flexible.  Changed
        UVMOD      Help - clarify the meaning of the flux, spectral
                   index, and curvature to be the header reference
                   frequency.
        UVMOD      Fortran - changed a bad kludge that sort of used
                   1GHz for the curvature, but set the fluxes at the
                   header reference frequency.  Now it is the header
                   frequency for all.
        SPIXR      Fortran - changed output image frequency to 1 GHz
                   since that is what it is.
        FNDSPX     Fortran routine made the mistake of leaving a loop
                   counting valid FLUX values on the first invalid.
                   This can happen due to flagging etc - the counting
                   loop must go over all IFs
        Moved above to 31DEC16 this date.
