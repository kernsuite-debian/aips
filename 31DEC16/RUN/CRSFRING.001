* Defines procedure to calibrate VLBI cross polarized delay residuals.
$-----------------------------------------------------------------------
$;  Copyright (C) 1995-1997
$;  Associated Universities, Inc. Washington DC, USA.
$;
$;  This program is free software; you can redistribute it and/or
$;  modify it under the terms of the GNU General Public License as
$;  published by the Free Software Foundation; either version 2 of
$;  the License, or (at your option) any later version.
$;
$;  This program is distributed in the hope that it will be useful,
$;  but WITHOUT ANY WARRANTY; without even the implied warranty of
$;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
$;  GNU General Public License for more details.
$;
$;  You should have received a copy of the GNU General Public
$;  License along with this program; if not, write to the Free
$;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
$;  MA 02139, USA.
$;
$;  Correspondence concerning AIPS should be addressed as follows:
$;         Internet email: aipsmail@nrao.edu.
$;         Postal address: AIPS Project Office
$;                         National Radio Astronomy Observatory
$;                         520 Edgemont Road
$;                         Charlottesville, VA 22903-2475 USA
$-----------------------------------------------------------------------
* Kari Leppanen, 29aug94
proc crsfring
* save adverbs
tput crsfring
in3name=inname; in3c = inclass; in3d=ind; in3s=ins
if outd=0 then outd=ind; end; out2d=outd;
if solint<1.0 then solint=1.0; end
dowa true

type 'Average cross-polarized data over baselines'
task='blavg'; docal=1; sources=calsour;
   bif=1; eif=0; bchan=1; echan=0;
   outn='crosspol tmp'; outc='blavg'; outs=666;
   go
type 'Fringe fit'
inn=outn; inc=outc; ins=outs; ind=outd
task 'indxr'; cparm=0,0,-1,0; go
task='fring';
   anten=0; docal=-1; flagver=-1; doband=-1; clr2n; smodel=0;
   aparm=2,0; dparm=1,0,0,60*solint,0,0,1; solint=0;
   snver=1; dofit=0; search=0;
   go
type 'Process solutions'
task='polsn'; inver=1; outver=2; opcode=''; go
type 'Copy sn table to original uv data'
task='tacop'; inext='sn'; inver=2; ncount=1; keyw='';
   outna=in3n; outc=in3c; outd=in3d; outs=in3s; outver=0; go
type 'Destroy temporary files'
   inty ='uv'; inn='crosspol tmp'; ind=out2d; ins=666
   inclass='blavg'; zap
dowa false
type 'Result is in highest ver SN table on input file'
return; finish

