^PY^-
^IOP^IL0600^IS404^IC1000^IJ00700^IT00700^PN^-

A. SUMMARY OF AN AIPS INSTALLATION

1. Installing AIPS for the first time.

   First read the instructions.  A description of the chapters and
their purpose follows:

   B. SYSTEM ENVIRONMENT FOR AIPS UNDER UNIX

      This chapter describes the AIPS system environment under UNIX
   at NRAO.  It is intended as an overview whereas chapter C provides
   a detailed description of the installation procedure.  It is
   possible to install AIPS without completely understanding this
   chapter, but the details found here can give some insight into how
   AIPS can be tailored to fit the needs of your site.  This chapter
   is also important for people who want to program in AIPS, or to set
   up AIPS in a non-standard way, and is useful for trouble shooting
   if things don't work.

   C. STEP BY STEP PROCEDURE FOR INSTALLING AIPS UNDER UNIX

      The most important instructions.  If you understand these
   instructions enough to fill out the AIPS installation work sheet,
   you know enough to try to install AIPS.

   D. LISTINGS OF THE AIPS INSTALLATION AND PROGRAMMING SHELL SCRIPTS

      This chapter could be useful if things go wrong or hang up or if
   you want to install AIPS in a nonstandard way.  The listings should
   be looked at very carefully.  They are intended to be general, but
   this is not always possible since the syntax for UNIX commands has
   been known to differ from system to system.  In particular, the
   switches for the FORTRAN compiler (f77) may need modification
   (e.g., -I2 may have to be changed to -i2).

   E. Z-ROUTINES AND Z-PROGRAMS

      A collection of notes regarding Z-routines for UNIX/AIPS
   including standards, conventions, what the routines do and system
   dependencies.  Also, which routines are certain to require local
   development.

   F. UNIX/AIPS INSTALLATION WORK SHEET

      After reading the instructions and filling out the installation
   work sheet, proceed as described in chapter C.

   G. F77 BUGS WE HAVE KNOWN

      The successful installation of AIPS on any system is predicated
   on the existence of a Fortran compiler of high integrity.  We have
   had the experience of discovering numerous bugs in the so called
   'portable' f77 compiler.  Several of the bugs also seem to be
   portable.  This chapter contains at least a partial list of the
   ones we have encountered.

2. Updating an existing AIPS system

   ***FIRST BACK UP YOUR CURRENT AIPS SYSTEM***.  Some updates can
become very tricky.  If you have important data in your AIPS system,
backing up before attempting an update is a must.

   Next review the installation instructions and fill out the
Installation Work Sheet.

   Since the 15NOV82 version of AIPS we have provided the capability
to run two different versions of AIPS programs accessing the same
data files.  These versions are called "OLD" and "NEW".  If you
currently (before the update) have an OLD and a NEW area, you will
want to delete all of the OLD code, libraries, executable modules,
etc. by logging into AIPS and typing rm -fr $OLD where OLD is a shell
variable assigned the name of your "OLD" version of AIPS (usually the
release date of that version).  If you only have one area (i.e., a
NEW area), decide if you have the disk space to run both an OLD and a
NEW AIPS, and if the file structures allow them to share the same data
base.  If not, log on to AIPS, and type rm -fr $NEW where new is a
shell variable assigned the name of your newest (maybe only) version
of AIPS.  You may want delete files more selectively. In particular,
you probably want to keep your Z-routine source code directories on
disk, but since you have been careful and you've backed them up on
tape.  After deleting everything in $NEW, you can simply restore the
Z-routine directories and files. If you want to have two versions, you
can set this up during the ILOAD (below) portion of the installation
procedure by responding appropriately to the prompt:

   ENTER NAME OF THE TOP MOST DIRECTORY OF YOUR OLD VERSION OF AIPS
   USUALLY A DATE LIKE 15SEP83 (-1 ==> OLD=NEW)
   ENTER>>>

   Running an OLD version also requires changing a string that
programs AIPS and BATER use to determine whether they are the OLD
version or the NEW version.  This string is currently hard coded in
the programs (sorry).  The best time to change these programs is
before the installation so that the shell variable definitions used by
the compile and link procedures still point to the subdirectories that
will become the OLD subdirectories after the update.  Edit the program
$AIPPGM/AIPS.FOR and change the line that is about the 46th one from
the top from

   DATA PRGNAM, MYVERS /'AI','PS','  ', 'NEW:'/
to
   DATA PRGNAM, MYVERS /'AI','PS','  ', 'OLD:'/

   Then edit program $AIPPGM/BATER.FOR and change the line which is
about 30 lines from the top from

   DATA MYVERS /'NEW:'/
to
   DATA MYVERS /'OLD:'/

Next, compile and link both programs by executing the following two
command lines:

   COMLNK AIPS
   COMLNK BATER

   To update the source code and the work data files, run the standard
installation procedure just as if you were installing AIPS for the
first time.

   After the installation of the new AIPS system is complete you may
have to update the AIPS data files for compatability.  AIPS is still
undergoing rapid development which, unfortunately, often requires
changing file structures.  Since the 15NOV82 version of AIPS we have
been producing version specific instructions for converting the data
files generated in previous versions. We provide conversion programs
for catalog files when formats change, but other files such as
SAVE/GET files must be deleted when they change.  Although you will
only have to go through one installation procedure for the loading,
compiling and linking part, you must follow the instructions for file
format updates for EVERY version IN ORDER that came after your old
version.

   Finally you must run a program that deletes all of the SAVE/GET
files that are incompatible with the current system.  To do this logon
to AIPS and run $LOAD/DELSG.EXE where again LOAD is shell variable that
is assigned the string you are using to designate the load module
library of your NEW AIPS system (i.e., LOAD=$HOME/xxx/LOAD or LOAD=
$NEW/LOAD).  The first prompt issued by DELSG is:

LOWEST STILL USABLE SAVE/GET VERSION NUMBER (I4)

If you are running both an OLD and a NEW AIPS then use the SAVE/GET
version number printed at the top of the supplemental updating
instructions for the OLD release.  If you are running a NEW version
only, use the Save/Get version printed at the top of the instructions
for this release.  The (I4) in the prompt means you must use the
FORTRAN I4 format (i.e., the number 4 is entered as 0004).  The next
prompt is:

USER NUMBERS TO DO (2I4) DEFAULT=    0 999

Enter your lowest and highest user number, or if you don't mind
waiting a few extra minutes while the program searches through the
entire range, just press RETURN and update all users between 0 and 999.
The (2I4) in the prompt reminds you to use FORTRAN 2I4 format for your
input.  For example the numbers 100 to 500 would be entered as
"01000500".  The execution of DELSG is the final step in the update
procedure.
