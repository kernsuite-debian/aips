-----------------------------------------------------------------------
;  Copyright (C) 1995
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;          Internet email: aipsmail@nrao.edu.
;          Postal address: AIPS Project Office
;                          National Radio Astronomy Observatory
;                          520 Edgemont Road
;                          Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
         This file must be used to record any changes made to the
the master version of AIPS kept in Charlottesville.
An entry is:

   line 1:  Date    Program name     Your name
   line 2:  What was done
   line 3:  Where has this change been moved (e.g. 15OCT90)
   line 4:  Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month, day,
 comma, year, some space, a title, some more space, your name.


                    Changes to 15APR92

 ***********************************************************************

        Changes while 15APR92  was TST:

 ***********************************************************************
 ***********************************************************************
 6739.  August 1, 1991             QUACK                Neil/Phil
        QUACK was writing channel and IF ranges as 0,0.  However,
        UVFLG defaults BCHAN and BIF = 0 to 1, so that QUACKed entries
        in the FG table could never be unflagged.  Changed QUACK to
        write channel and IF ranges as 1,0
        Moved from Oz.

 6740.  August 1, 1991             SETJY              Neil/Phil
        Add check for CALC and explicit FREQID setting
        A bug was introduced into GETFLX for calculation of
        1934's flux density.  ISRC was not correctly set.
        The HELP file needed minor chnages for 1934 and FQ selection
        with the CALC OPTYPE.
        Moved from Oz.

 6741.  August 1, 1991             DGHEAD                Neil/Phil
        For Stokes selection IV, DGHEAD was writing the output Stokes
        axis increment as 4 rather than 3.
        Moved from Oz.

 6742.  August 1, 1991                RMEXT               Phil
        Although advertised in the precursor comments as deleting
        all versions of a table if VER = 0, it didn't do so.
        Moved nowhere.

 6743.  August 1, 1991            MAKTAB                Phil
        Minor modification so that if MAKTAB opened a table for
        writing and that table already exists it will not rewrite
        the column titles and units.
        Moved nowhere.

 6744.  August 1, 1991             R3DTAB                Phil
        Minor modification so that if R3DTAB is writing to an already
        existing table it will append the new values rather than
        overwrite those that already exist.
        Moved nowhere.

 6745.  August 16, 1991            APLBERK/ZCREA2.C      Pat/Gareth
        Remove reference to #include <sys/mount.h>.  None of the
        symbols in this file are referenced in the source and it was
        breaking Convex OS9.0+ versions of AIPS.
        Moved to 15OCT91 (and 15APR92, here) this date.

 6746.  August 23, 1991       New include files for binary tables   Phil
        A host of new include files are needed to define the structure
        of the temporary binary tables for the VLBA distribution
        format. These tables are temporary in the sense that when FITTP
        writes this format it creates them, writes them and then deletes
        them. Also when FITLD reads them it creates the,  transforms them
        into standard AIPS tables and then deletes them. The includes
        contain all the information needed to define a table in a
        general way. They are:
            DACV.INC    -     Antenna Characteristics table
            DAGV.INC    -     Array Geometry table
            DBAV.INC    -     Bandpass table
            DBCV.INC    -     Baseline Correction table
            DCAV.INC    -     Calibration table
            DFLV.INC    -     Flag table
            DFRV.INC    -     Frequency table
            DIMV.INC    -     Interferometer Model table
            DSOV.INC    -     Source table
            DUVV.INC    -     UV table
            DWXV.INC    -     Weather table
        Two other includes are also created. These are necessary for
        dealing with the FITS reading of the binary tables:
            DBHD.INC
        and for dealing with the global keywords attached to each binary
        table:
            DGLB.INC.
        Moved nowhere.

 6747.  August 29, 1991                BPASS.HLP               Phil
        Craig pointed out to me that the explain file in BPASS.HLP was
        inconsistent with the help and inputs part of it. Tidied it up.
        Moved to 15OCT91 today.

 6748.  August 29, 1991                 BPCOR                  Phil
        The option to correct for spectral indices across a bandpass
        correction was not working due to a coding error. Fixed and
        added another parameter to the APARMS for the SPEC option so
        the user could specify the channel about which the spectrum
        should pivot.
        Moved to 15OCT91 today.

 6749.  September 6, 1991                POSSM                Phil
        The SOLINT option did not work correctly if SOLINT < 1.
        Fixed.
        Moved to 15OCT91 today.

 6750.  September 9, 1991               LISTR                 Dave A.
        Using DPARM(5)=0, Dparm(1)=7 with OPTYPE='GAIN' - if first
        scan was BLANK, would scale every scan to zero. Added some
        logic to subroutine GAIUV1 so code not only checks NUSCAN,
        but also if the scaling is zero. If it is zero, the scaling
        is recalculated until a non-blanked scan is encountered.
        Moved to 15OCT91 and 15APR92 today.

 6751.  September 9, 1991               $APLNOT/TABFQ.FOR     Athol/Glen
        Array declaration Bug fixed.  TABFQ declared a temp array
        assuming the FQ table had at most 4 columns (as the CH table
        does).  Used existing parameter MAXFQC to specifiy the arrray.
        Moved to 15OCT91 this date.

 6752.  September 10, 1991             $RUNSYS/MAPIT.001      Glen
        Several complaints fixed.  Now allows Non-square images, multi-
        field cleaning and use of FLUX for running MX.
        Moved nowhere yet.

 6753.  September 10, 1991              SETJY                Phil
        The fix Neil and I put in on Aug 1 (6740) was too strong.
        Modified it so that if FREQID=-1 and OPCODE='CALC', the user
        now gets a very visible warning message instead of being
        thrown out of the task.
        Moved to 15OCT91 today.

 6752.  September 11. 1991           $RUNSYS/DDTHLOAD.001    Bill C.
        Added updated version of the procedures for running the Huge DDT
        test.  They should also work for the smaller DDT tests.
        Moved nowhere.

 6753.  September 13, 1991          $APLIBM/ZLASC2 and ZLPCL2     Pat
        For some perverse reason, IBM AIX on RS/6000's appears to
        return from a system() call sometimes with a spurious error.
        The system call went fine, but "error 10, no child processes"
        would appear.  Put in some "UGLY_HACK" stuff to ignore this.
        Yeah, this isn't the right thing to do but who has the time...
        Moved to 15OCT91 today.

 6754.  September 17, 1991          $QPGNOT/CALIB                 Glen
        Calib was failing when more than 1000 clean components were
        used in the source model for self-calibration.  A buffer was
        too small and was being corrupted.  Have now set XBFSZ=8192.
        It is hard to understand how it ever worked except that three
        scratch buffers were declared one-after-another.
        Added a test in $QNOT/VISDFT to make certain the scratch
        buffers are declared to be bigger than the minimum of
        4096 words.
        Will move to 15OCT91 soon.

 6755.  September 17, 1991          $APGNOT/LWPLA                 Glen
        Modified the output so that it is more human readable.  This
        is useful for plot editing tools like "pageview" and
        "ghostview".  Also modified grey scale so that it is possible
        to have blank area inside a plot (not just very light grey).
        Also have lwpla skip printing if a grey scale line is all
        blank.  (This speeds up greatly some plots.)
        Will move to 15OCT91 soon.

 6756.  September 20, 1991          $YPGNOT/KNTR.FOR                Mark
        Added the capability to plot HPBW.  Modified KNTR.HLP too.

 6757.  September 16, 1991              new FITS stuff.        Phil
        Finally inserted all the new subroutines for dealing with the
        new VLBA FITS format into the system. Basically ecah new type of
        table has 3 subroutines associated with it, the first two
        characters of the subroutine name indicate for which type
        of table the routine is applicable. The 3 types of routine are:
            xxINI - routine to initialize the table for reading or
                    writing
            xxIO  - routine to read/write table keywords.
            xxTAB - routine to read/write table rows (does most of the
                    work)
        Other routines that are part of this system are:
            GENKEY.FOR - to read/write a generic set of keywords
            TABERR.FOR - to write a standardized error message when
                         an error is encountered.
            SETDEF/TABHDR - 2 routines which were modified to deal
                         with the new format.
        Most of the work went into getting FITLD to read the new format.
        It has been extensively rewritten, but the new format is
        isolated as much as possible from the older formats.
        FITTP has also been modified in order to write this format, it
        is invoked by setting FORMAT=4. New FITTP.HLP is also present.
        Moved nowhere at all.

 6758.  September 20, 1991              FITTP                   Phil
        Putbck the old version of FITTP, Glen found that the catalogue
        header (number of complex axes) was changed to 3 if it was 1.
        Will fix.
        Moved nowhere.

 6759.  September 24, 1991                 AHIST                  Eric
        New task: It does histogram equalization using a 2-dimensional
        window centered on each pixel.  This allows local enhancement of
        structure in the image without regard for the intensity values
        in other parts of the image.  My older task, HISEQ, does the
        equalization using the histogram of the entire cube.  It is
        faster than the adaptive algorithm, but less effective.
        Moved from Oz to 15APR92.

 6760.  September 24, 1991           UVLSF                 Neil/Eric
        New task.  Fits, by least squares, a straight line to the
        real and imaginary parts of selected groups of channels in a uv
        data set, and subtracts the fitted baseline from each spectrum.
        Also has the option to write a selected channel of the fit
        baseline as a separate uv data set.
        Moved from Oz to 15APR92.

 6761.  26 July 1991               Multiple                     Eric
        Brought back several fixes from Mark, Neil and me:
        UVFLG   Check error status returned by FLAGUP correctly so that
                IRET=-1 is not treated as an error (means last FG entry
                was read but it was already de-selected).
        TABED   Increased all 1024 buffers to 4096.  This so could merge
                BP tables with large numbers of spectral channels.
        MK3IN   Changed to ignore error 10 from TAPIO and to mask length
                incompatibility messages.
        DATGET  Make sure IERR is zero on input.
        BPASET  Increased buffer size and declared it properly.
        Moved from Oz.

 6762.  27 July 1991           TVFLG, SPFLG                     Eric
        Corrected the use of the previous cursor position when calling
        the enhancement routines; subscript (2,1) was used instead of
        (1,2).  Changed the choices routine to reset zoom only when
        actually needed, rather than potentially needed.  And removed
        confusing warning messages about scan lengths incompatible with
        averaging times.  Messages will appear only when the
        incompatible parameter has had to be changed in order to use it.
        Move from Oz to CV 15JUL91.

 6763.  July 30, 1991                SPFLG, TVFLG               Eric
        Changed the ``offzoom'' function to avoid YZOOMC calls unless
        required.  Changed the code to leave graphics overlay channels 1
        and 3 on and to clear out any lines and characters explicitly
        rather than calling YZERO all the time.  This may be marginally
        slower on real TV devices but will be faster on workstations.
        Moved from Oz to 15JUL91.

 6764.  September 25, 1991              New task: AFILE        Phil
        New task to manipulate the text A-files produced by the Haystack
        FRNGE program after it has run on the MkIII correlator output
        data. The A-file produced is a summary of the fringe-fitting
        performed on all scans correlated, it contains a large variety
        of information. Pertinent to this program are the time/date of
        correlation for a particular scan, the SNR of that scan, the
        "quality factor" of that scan and the length (in seconds) of
        the scan. Typically data is recorrelated so the user has to be
        able to tell MK3IN which copy of a scan he/she wishes to read
        into AIPS, this is done by generating a new A-file from the old,
        containing information only on those scans that are wanted.
        AFILE has the ability to sort the scan information by time and
        by baseline and also to edit it based on certain criteria
        specified by the user. The resultant A-file is then passed to
        MK3IN (fix on its way) and is used to select scans from the
        tape. Also a .HLP file.
        Moved nowhere.

 6765.  September 27, 1991              FITLD, *IO.FOR routines   Phil
        Modified the handling of real/double precision global keywords.
        The IO routines and GLBKEY inside FITLD, had assumed that some
        were real and some d.p. John Benson had difficulty writing
        values with the D format (not a C construct) and so FITLD was
        bombing. Now check to see what type of data the keyword is and
        read it in the appropriate manner.
        Moved nowhere.

 6766.  September 30, 1991       DBCON                            Glen
        Seemed to be a problem with merging two multi-source datasets
        when running on an IBM 530.  In second data set, the second
        sources was being renumbered as source number one.
        Moved nowhere.

 6767.  October 2, 1991          LWPLA                            Glen
        Found a compiler bug! (Apparently on several computers, but not
        baboon.  The following text produces an error on the IBM 530:
        CHARACTER CHBUF*256
        INTEGER   NCHAR
        CHBUF = 'THIS IS A TEST'
        CHBUF = '(' // CHBUF(1:14) // ')'
        This assigns the value '((HIS IS A TEST)' to CHBUF.
        Created a temporary variable which produces the correcot result.
        Moved Nowhere.

 6768.  October 4, 1991         AHIST, UVLSF                     Eric
        Added a progress message to AHIST since it is slow.  Added more
        history entries - the essential ones on CHANSEL - to both output
        files.
        Moved to new if possible.

 6769.  October 9, 1991                      FITLD               Phil
        There was a minor bug in routine REQCD - it had assumed that
        the OBJECT keyword would be close to the start of the file
        header. We had a case where this was not so and the task
        bombed because it skipped over essential keywords. Fixed so
        that this will not happen now.
        Moved nowhere.

 6770.  October 10, 1991                   LISTR               Phil
        Neil had missed (and therefore so did I) one instance of a call
        to CHNDAT when running LISTR in OPCODE='SCAN'. Fixed the
        call sequence.
        Moved nowhere.

 6771.  October 11, 1991          $APLNOT/CHNDAT.FOR              Neil/Phil
        CHNDAT was writing, for the frequency increment in the FQ
        table, the signed header value.  Thus, the true increment
        in the FQ table was lost whenever CHNDAT with the WRIT
        operation was invoked.   I have added a new variable to the
        call sequence to pass the frequency increment table in and
        out of CHNDAT. This necessitates a lot of retro-fitting
        to AIPS as detailed below.   I have also changed CHNDAT to
        return SIDEBAND=+1 when reading CH tables, as it always uses
        the signed header increment in this case.
        Moved nowhere.

 6772.  October 11, 1991 $APLNOT routines affected by CHNDAT change. Neil/Phil
        CALADJ  Changed call to CHNDAT.
        CHNCOP  Changed call to CHNDAT.   Call sequence of CHNCOP changed to
          include work array for increment table passed from CHNDAT.
        DGHEAD  Changed call to CHNDAT.
        FQFTAB  A single precision array was being passed to CHNDAT instead
           of a double precision for the frequency offset table. I changed
           this, but can't find any piece of code that calls FQFTAB so it
           didn't matter.
        FRQTAB  Changed call to CHNDAT.  Removed some unused variables.
        GAININ  Changed call to CHNDAT.   Horrid use of FREQIF(1) and
           EQUIV (FREQIF,UBUFF) removed.  Replaced DATP by ISBAND in call
           to CHNDAT for clarity.   Removed unused variables
        GETFQ   Changed call to CHNDAT.  All the stuff reading the FQ table
           could be deleted and just let the call to CHNDAT deal with it now
           as CHNDAT and GETFQ return the same information now (except total
           bandwidth).  Removed unused variable.
        SELSMG  Changed call to CHNDAT.
        SN2CL   Changed call to CHNDAT.   Replaced SNREC by ISBAND in call to
           CHNDAT for clarity.  Removed some unused variables
        SNSMO   Changed call to CHNDAT.
        Moved nowhere.

 6773.  October 11, 1991   $QNOT routines affected by CHNDAT    Neil/Phil
        MAKMAP   Changed call to CHNDAT.
        UVMDIV   Changed call to CHNCOP.  Needed to add new work array to
           call sequence because of change to CHNCOP call sequence.
        Moved nowhere.

 6774.  October 11, 1991  $APGNOT programs affected by CHNDAT    Neil/Phil
        BLFIT   Changed call to CHNDAT.
        CLCOR   Changed call to CHNDAT.  Assume all IFs have same freq.
            increment in assigning BANDW, but BANDW is never used, as far
            as I can tell.
        CLSMO   Changed call to CHNDAT.
        CSCOR   Changed call to CHNDAT.
        FILLR   Changed call to CHNDAT.  In subroutine FLRCRE, assume both
           IFs have the same channel increment.  This is what the old CHNDAT
           would have done, done, and I see no easy alternative given
           the structure.
        LISTR   Changed call to CHNDAT.
        SDCAL   Changed call to CHNDAT.  Note the following bug which I
           have not fixed.   FREQO(*) is an array passed into subrouitne
           SDCCOP as an input parameter.  It is, as far as I can see,
           neither filled nor initialized.  It is then added to
           the regular IF frequency offset.  I presume it is meant
           to be the source specific offset.  It is NOT in any common.
           I leave it to NRAO to do something with this.
           I also removed some equivalences used in SDCCOP
        SETJY  Changed call to CHNDAT.   CHNDAT now returns all (except total
           bandwidth) that GETFQ does.  Remove calls to GETFQ, in subroutine
           SETJ in in favour of CHNDAT.  Removed some unused variables in SETJ.
           Includes fix to warn users if FREQID not set by user for 'CALC'
           Includes fix in GETFLX with source indexing for 1934-638
        SHOUV  Changed call to CHNDAT.  Replaced FREQIF with explicit use of
           FOFF(BIF) to make it clear in code that this offset is from the
           first IF only.
        SNCOR  Changed call to CHNDAT.  Removed unsued BANDW.
        SNSMO   Changed call to CHNDAT.
        SPLIT   Changed call to CHNDAT.  In subroutine SPLCOP removed
           unecessary equivalences (ISBAND,VIS) and (FOFF,UBUFF).
           Included kludge for AT with multi freqid data bases.
        UVCOP    Changed call to CHNDAT.  Completely rewrote the section to
          copy FQ table information in subroutine COPYIN by using only
          CHNDAT.
          Deleted subroutine FQSCOP which is no longer needed. This
          was writing out the wrong part of the FQ table when IF
          selection was invoked, anyway.   Deleted some unsued variables
          in COPYIN.  Initialized  PRTCNT in COPYUV.
        UVFIT    Changed call to CHNDAT.   Loop in UVFDAT to work out averaged
          freq. uses header channel increment.  Replaced by FINC(LOOP)
          Perhaps FINC(BIF) would be safer?
        UVIMG    Changed call to CHNDAT.  There are assumptions throughout
          about equal frequency increments for the IF axis.  Instead of using
          the header frequency increment, as a minimum change use the
          increment for IF number  BIF from the selected FREQID.
        UVMOD    Changed call to CHNDAT.
        Moved nowhere.

 6775.  October 11, 1991  $QYPGNOT programs affected by CHNDAT    Neil/Phil
        MX   Changed call to CHNDAT.  Just before call to CHNDAT, there is a
          factor, GCOR, that is set with the header frequency increment.  I
          don't know if this is meant to be absolute or not, so it is unclear
          whether it is should be using FINC or not.  Also, the case of
          averaging two IFs complicztes this.    I think the use of the
          correct frequency increment in the gridding procedures needs to be
          examined carefully (Glen ?).
          The frequency OFFSET is multiplied by the SIDEBAND indicator
          in subroutine MXSEL in caluclating IFFREQ.  Removed  the
          sideband indicator from this line.
          Changed call sequence to CHNCOP.
        Moved nowhere.

 6776.  October 11, 1991  $YPGNOT programs affected by CHNDAT    Neil/Phil
        POSSM   Changed call to CHNDAT.   After first call to CHNDAT, use FINC
           to set a frequency scale factor.  BUt can select more than one
           IF, so this only valid if all IFs have the same channel
           increment.
           In the last section of LABVEL, BANDW is used as the channel
           increment.    This is fished out of the source table.  For AT data,
           BANDW would be zero, as we don't fill it.   SHould BANDW really be
           FINC(IF) ?  This is unclear to me.
           SNPLT  Changed call to CHNDAT.
           VBPLT  Changed call to CHNDAT.   Pass FRQSEL into subroutine ANTIN
              to get correct FQ/CH table info and correctly work out frequency
              of selected channel/IF/FREQID  Looks for frequency in ANtenna
              table first.  If zero then uses header reference freq.
        Moved nowhere.

 6777.  October 11, 1991  $QPGNOT programs affected by CHNDAT    Neil/Phil
        ASCAL   Changed call to UVMDIV.
        BLCAL   Changed call to CHNCOP.
                Changed call to UVMDIV.
        BPASS   Changed call to CHNDAT. Frequencies were computed by
           multiplying FQ offset by side band indicator and adding to
           the reference freq. Removed the side band indicvator from this.
           Call to BPCLER with 14th argment, GWORK(2*MAXANT), a double
           precision variable, integer expected in COUNT(MAXANT), but nothing
           is done with it, so who cares.
           Changed call to CHNCOP.
           Changed call to UVMDIV.
           Includes MRC's pointer fix for uncompressed data in routine EXTDIV
           which divides by channel 0.  A data indexing variable CMPNT4 was
           not initialized for data in uncompressed format.
       CALIB   Changed call sequence to CHNDAT.  Put ISBAND and FINC in common
         Changed call to CHNCOP, used FINC, FOFF and ISBAND in call instead
         of faceless work arrays
         Changed call to UVMDIV.
       CVEL    Removed unecessary include files from main routine.
          CVELIN: Remove calls to FNDEXT and GETFQ.
                  Close FQ table if opened with FQINI.
                  Remove call to CHNDAT.
                  Removed now unused variables associated with unecssary calls.
                  Removed IUDISK and IUCNO in favour of DISKIN and CNOIN
          CVSHFT: Move call to CHNDAT outside of loop and change call sequence.
                  The desired FREQid has been selected by UVGET so it will
                  always be FRQSEL.  Test for ILOCFQ>0 not needed as CHNDAT
                  will return whatever it can find, if no FQ table.
                  DOSHFT used before it was computed in SHIFT.  Move
                  computation of DOSHFT into CVSHFT out of SHIFT.  Removed
                  out of common into local variable of CVSHFT.
                  Removed FRQIF1.  It was unused and computed with an unset
                  variable (OBSFRQ).
                  Fix calls to CHNDAT.  COrrect output frequency offsets in
                  WRIT call to CHNDAT. They are pretty much meaningless anyway
                  after CVEL has move the spectra up and down.
           SHIFT: Removed unused variable PRDELI.  Initialize HELIO and RADIO
                  for single source files.
                  Get frequency increment from FINC (from CHNDAT) regardless
                  of whether single or multi source
           GETFRQ: REFFRQ, the frequency of the reference pixel of each IF was
                  was being filled only for IF number one in the single source
                  case.   Same for the  velocity of the reference pixel
                  In multi-source part of code, loop over NUMIF rather than
                  MAXIF
                  Removed computed but unused variable TBW from CVEL.INC.
                  Removed  now unused variable NCHAN.
                  The formula for VELINC comes from EWG's memo which has left
                  out the minus sign for the radio convention.   Added it.
            CVELHI: Added FQ table to list not to copy with ALLTAB
            VELPIX: the formula for VELINC comes from EWG's memo which has
               left out the minus sign for the radio convention; removed the
               unecessary ISIGN.
       FRING   Changed call to CHNDAT.  Put ISBAND and FINC in common.
          Changed call to CHNCOP; used FOFF, ISBAND and FINC arrays instead
          of faceless work arrays.
          Changed call to UVMDIV.
       GRIDR   Changed call to CHNDAT. Remove BANWID in favour of FINC(BIF)
       PCAL    Changed call to CHNCOP. Used (small) arrays with meaningful
          names for clarity.
       UVSUB   Changed call to UVMDIV.
       VSCAL   Changed call to UVMDIV.
        Moved nowhere.

 6778.  October 11, 1991  $APL/CONTRIBU programs affected by CHNDAT Neil
        RDCAL   Changed call to UVMDIV.
        Moved nowhere.

 6779.  October 15, 1991  $QNOT/UVTBUN.FOR           Glen/Ralph Gaume
        UVTBUN was not correctly calculating UNIFORM weighting for
        images as big as 1024x1024 or larger, because part of the
        AP grid used was not being initialized correctly.  Simple
        change to Zero grid before calculations.  (Note there was no
        problem for continuum obs or for 512x512 or smaller images)
        Moved Nowhere.

 6780.  October 16, 1991        Screen servers             Eric
        Changed $YSS version of YWINDO to issue an Interogate parameters
        call to the server when there is a window size error and then
        reset the ID file's parameters if the result clears up the
        problem.  Changed $YSS/YINIT to make this call automatically
        as well.  Changed $YSERV versions of XAS.SHR, XVSS.SHR, and
        SSS.SHR to support the interogate function, which was not
        previously implemented.  Also changed XAS.SHR to remove an
        error put in whereby the window resize function tested its
        location but did not then fix it --- making thereby an
        infinite loop at least on IBMs.  Also changed XAS and XVSS
        to reposition the window when the resize button is pressed
        or YWINDO is called with write, but not on repaint interrupts.
        This allows users to move the TV off the screen if they want.
        Moved nowhere.

 6781.  October 16, 1991    $APLNOT/SN2CL        Glen/Paddy
        Paddy at Jordrel experienced a problem with SN2CL when SN table
        records were duplicated.  He sent the fix and I incorperated it
        into SN2CL.  Linked CLCAL and ran VLAC successfully after
        applying the fix.
        Moved Nowhere.

 6782.  October 17, 1991   IMLIN, UVLIN          Tim/Juan
        Image and Visibility based continuum subtraction programs.
        UVLIN is roughly the same as UVBAS but fits in real and
        imaginary parts of the visibility and hence has much better
        performance. It can also find and flag narrow-band interference
        by looking at the residual of the fit. IMLIN is the image-plane
        analog of UVLIN and works as well. UVLIN and IMLIN are the
        tasks described in the preprint by Cornwell, Uson and
        Haddad, Oct. 1991 (submitted to Astron. Astrophys.)
        Moved Nowhere.

 6783.  October 21, 1991  $APGNOT/LWPLA          Glen
        Further messing with LWPLA so that I can use "pageview" to edit
        output postscript files.  Font is gone up 1 size!  Bigger font
        is always needed for publication.
        Moved Nowhere.

 6784.  October 21, 1991  $RUNSYS/MAPIT.001          Glen
        Several features including "OLAF-LIKE" interactive mode.
        Setting DOINTER=1 before executing MAPIT causes the procedure
        to ask the user to set boxes before further cleaning.
        Moved Nowhere.

 6785.  October 22, 1991     Sun Exabytes           Eric/Mark
        Added Mark's (AT) code to the system.  Changed ASSNLOCAL.SH
        and ASSNLOCAL.CSH in $SYSUNIX to set TAPEn logical to
        $MT0(n-1) for now.  Mark's solution is better but needs
        many fixes.  Changed Baboon's $SYSLOCAL versions of these ---
        other systems will need this (by hand???!!).  Mark's
        comments:
---------------------------------------------------------------------

 0000. 7 June, 1990    Exabyte Z routines          Eric/Mark Calabretta
       Changed:
       APLSUN/ZMOUN2.C    Created new routine to assign the logical
                          MT0n to a device "/dev/nrstx"
       APLSUN/ZTAP2.C     Added magic beginning of tape value and a
                          test for it to support the Exabyte.
       APLSUN/ZTPCL2.C    Added mask for errno=1 ("not owner") which
                          the exabyte driver returns erroneously.
       Moved from Oz 17-June.

 0082. 90/Sep/04            $APLSUN/ZMOUN2.C                 Mark
       Rewrote $APLSUN/ZMOUN2.C from the bottom up.  It now uses lock
       files to prevent a tape being mounted simultaneously by
       different AIPS users.  Locking is implemented via lockf() on
       files with names of the form $DA00/TAPE1.lock.  This supplements
       the $DA00/TP* lock files which give a tape task exclusive
       access, but only while it is executing.  The lock files are
       created on MOUNT, and deleted on DISMOUNT.
          $APLSUN/ZMOUN2.C now also uses environment variables TAPE1,
       TAPE2, etc. to define tape devices.  TAPEx corresponds to
       INTAPE=x, and OUTTAPE=x.  The TAPEx environment variables are
       defined in HOSTS.CSH and so can be tailored to each SUN
       workstation.  They may be left undefined for workstations which
       do not have an attached tape drive.  On mounting, the value of
       MT00 is taken from TAPE1, MT01 from TAPE2, etc.  Initially, and
       on dismounting, MT0x is defined as "UNMOUNTED".
          It may be worth making this scheme more AIPS-generic by
       modifying ZPHFIL to return an AIPS-style file name, and also by
       using ZLOCK to manage the lock.  Differing tape densities would
       need to be supported by adding a density suffix, e.g.
       TAPE1_6250.

 0109. 90/Nov/02          $APLSUN/ZMOUN2.C                     Mark
       Changed to use flock rather than lockf as above.  Should be
       changed to use ZLOCK when this mess gets sorted out.

 0170. 91/Jan/18              $LOCAPLSUN/ZMOUN2.C               Mark
       Now takes the Exabyte offline (ejects it) when it is dismounted.

 0190. 91/Feb/11              $LOCAPLSUN/ZMOUN2.C               Mark
       Modified to apply an exclusive lock rather than a shared one.

 0125. 90/Dec/05       Exabyte mtio problem under SunOS 4.1     Mark
       The mtio magtape interface in SunOS 4.1 appears to contain a
       bug.  The command 'mt -f /dev/nrst0 bsf N' (where N is a number)
       skips backward over N+2 tape marks instead of N.  Remedied this
       by modifying $LOCAPLSUN/ZTAP2.C to use the new "MTNBSF" opcode
       which backspaces to beginning of file, and does work properly.
       Also modified $LOCAPLSUN/ZBKLD2.FOR to use "nbsf" instead of
       "bsf" in the mt command.  Recompiled all tape tasks for the
       SPARCs.

 0150. 91/Jan/09           $LOCAPLSUN/ZTAPE.FOR                 Mark
       I had modified ZTAPE on Nov/08 to write just one EOF, rather than
       write 4 and backspace 3.  This was done because of the bug in the
       MBSF operation in mtio for the Exabyte which at that stage was not
       properly understood (see entry 125 above).

       However, FNDEOT relies on finding at least 2 EOFs at the logical
       end of tape, and in particular, FITTP was failing when it tried to
       append files.  Rather than revert to the original ZTAPE, for speed
       reasons I modified it to write 2 EOFs and backspace 1.  This saves
       about 25s in EOF processing per file.

 0236.  91/Apr/16          SunOS 4.1.1 Exabyte rubbish            Mark
        More Exabyte lunacy, this time occasioned by the fact that if the
        Exabyte is already at logical EOM, giving it an MTEOM causes it to
        go screaming off to the physical end of medium!

        Modified ZTAPE to recognize an EOM command, and ZBKTP1 to use it.
        Previously ZBKTP1 was attempting to 'mt -f /dev/nrst0 eom' via
        ZSHCMD while the tape was already opened by BAKLD.  This used to
        work under SunOS 4.1 (I think) but under SunOS 4.1.1 it (sensibly)
        produces a 'device busy' error.  It also doesn't allow for the
        possibility that the Exabyte is already at logical EOM.

        Modified ZBKLD2 to specify the tape drive explicitly in the MTEX
        command.

        Added an EOM operation to ZTAP2.C for ZTAPE as described above.
        The EOM first backspaces one file to ensure the tape is not
        already at EOM (there's no way of finding out from the mt status
        information!)  Completely revamped ZTAP2 so that all ioctl status
        returns are checked.  This is particularly important for the EOM
        command.  In the past ZTAP2 could fail unnoticed leaving the tape
        in the wrong place, usually BOM.  This could be disastrous if the
        intention was to append to the end of the tape.

        On the plus side, MTBSF now works properly, so removed the MTNBSF
        kludge from ZTAP2.

        Conclusion: the SUN Exabyte driver is an appalling piece of rubbish.

        (A rather bad bug in ZBKLD2 was not fixed at this time.  The
        shell command line to "delete old files if any" i.e.
           TEXT = 'rm ' // ZDA0N(1:LZDA0N) // '/???' // CCNO // '???' //
          *      CUSER // '??'
        deletes the message file and all save/get files if CCNO = CUSER!)

 0243.  91/Apr/21                 $APLSUN/ZTAP2.C                Mark
        Added an escape clause for MTBSF with the Exabyte positioned in
        file 0.  The ioctl returns errno=5 (IO error)!
---------------------------------------------------------------------

 6786.  October 23                UVHGM                          Tim
        Added X AXTYPE to allow plotting of vis*sqrt(wt) which is
        useful for evalating noise levels.
        Moved Nowhere

 6789.  October 30               UVLIN                           Tim
        Same definition of shift as UVFIX.
        Moved nowhere.

 6790.  November 6               $YPGNOT/VBPLT.FOR               Athol
        VBPLT did not plot correct closure phase models. Various
        corrections in subroutine MODSET to achieve this.
        Moved nowhere.

 6791.  November 7              $APGNOT/SETJY.FOR               Dave
        SETJY would not bomb for an invalid OPTYPE. Added an IF
        statement to test OPTYPE, and return if not valid.
        Note if more OPTYPE options are added to SETJY, this
        IF statement will need to be changed.
        Moved nowhere.

 6792.  November 7              $YPGNOT/GAL.FOR                 Glen
        Fixed printout, added warning when wrong type of image supplied
        and anotated the plot file.  Made a few improvements to GAL.HLP
        Moved nowhere.

 6793.  November 12, 1991               DSEL.INC, BPGET          Phil
        The bandpass applications routines could not deal with VLA
        data with a large number of channels (> 256). This was a
        consequence of the previous change to BPGET in that I had
        assumed that all BP data could be read in one fell swoop with
        UVDISK. This turned out not to be the case. Fixed BPGET so
        it now does read all the data in one go and stores the BP
        array in memory - the alternative is many opens of the scratch
        file, that causes me indigestion. Increased the size of the
        BP memory buffer to deal with the AT worst case.
        Moved nowhere.

 6794.  November 13, 1991               GAININ                   Bill C.
        Change several array declarations of (1) of equivalenced values
        to the actual dimensions.
        Moved nowhere.

 6795.  November 13, 1991               DATGET                   Bill C.
        Corrected the declarations of the arrays used for reading the
        index table to use the number of columns declared in PUVD.INC
        rather than the hardcoded and now incorrect value of 6.
        Moved nowhere.

 6796.  November 14, 1991               VLAL files              Dave A.
        Put VLALEXEC.001 and VLALLOAD.001 into the RUN area in TEST;
        VLAL.HLP and VLALSAVE.HLP into the HELP area. These are
        the files necessary to run the Spectral Line DDT.
        Moved nowhere.

 6797.  November 15, 1991          $YSERV/XAS.SHR               Glen
        Modified XAS to track which image and graphics planes have been
        written to.  Clears to already clear planes are much quicker.
        Speeds GRCL if GRCHAN=0 and TVPL for clear TVs.  Should also
        help IBLED.  (Changes made expecting experineced TVers may make
        further modifications/improvements/corrections...)
        Moved Nowhere.

 6798.  November 15, 1991         CSLGET                    Bill C.
        Fixed a couple of equivalenced variables dimensioned (1).
        Moved nowhere.

 6799.  November 20, 1991         $APLNOT/GAININ            Glen
        Fixed GAININ decoding of Column type and locations if the
        Column does not exist.
        Moved nowhere.

 6800.  November 20, 1991         $RUNSYS/MAPIT.001         Glen
        Incorperated suggestions of Ken Kellerman and Athol Kemball
        into MAPIT.  Major Change was use of IN2N, which is now
        the input model for the First Self-Cal.  If IN2N='POINT'
        then a point model is used, else IN2N is the name of the
        clean image to use.  Improved MAPIT.HLP.
        Moved Nowhere.

 6801.  November 20, 1991          $APLNOT/DATCAL           Phil
        When setting the logical to decide if it is necessary to
        perform delay/rate corrections. DATCAL just checks to see
        whether any corrections need to be applied to IF #1. In the
        case where IF#1 is flagged it will then fail to correct
        any of the IF's of a visibility spectrum for the residual
        delay and rate. Fixed so that this does not happen.
        Moved nowhere.

 6802.  November 20, 1991          $APLNOT/GETANT          Phil
        Fixed a longstanding annoyance. The Block 2 correlator
        writes an AN table for all antennas in an experiment,
        however if there are no fringes to a particular antennas
        its coordinates are set to 0. This caused GETANT to
        blow up, even though the antenna in question was never
        present in the data being examined. Fixed so that this will
        not happen.
        Moved nowhere.

 6803.  November 21, 1991         $APLNOT/TABFQ          Phil
        When writing FQ tables the array needed to hold each row was not
        declared to be large enough, especially for 14 IF's. I'm
        surprised this didn't catch us before, but it seems to work
        as is on a Convex, it fails on a Sun. Maybe nobody has pushed
        14 IF data through before.
        Moved nowhere.

 6804.  November 22, 1991          MK3IN.FOR, MK3IN.HLP      Phil
        Added the capability to select MkIII scans based on the Afile
        text information generated at the correlator. IN2FILE specifies
        the A-file to be used for the data selection (see entry 6764),
        if this is blank MK3IN will accept all scans, if this is
        non-blank MK3IN will only accept those scans whose root is
        valid. Also extened the maximum number of baselines from 45
        to 120. Updated help file.
        Moved nowhere.

 6805.  November 22, 1991       GREYS                    Eric
        Put in a missing "GO TO 999" which caused an error message
        with IERR = 0 to appear and worry some users.
        Moved nowhere.

 6806.  November 22, 1991       $APGNOT/LWPLA            Glen
        Found there was indeed a bug for grey scale plots for images
        wider than 256 pixels.  A new line was inadvertently added every
        256 pixels, which confused the printers.  After great labor
        found that numbers could be aligned if the "SPACE" character
        was made wider in Helvetica-Bold by 14 units.
        Moved nowhere.

 6807.  November 25, 1991            QPGNOT                Phil
        BPASS had a problem when running in autocorrelation mode
        on 1-baseline data. The 2nd antennas's data was never
        normalized because the normalization loop was over number
        of baselines, not number of antennas. This was the only
        case in which this would happen because in all other cases
        # baselines > # antennas.
        Moved nowhere.

 6808.  November 25, 1991      $SYSUNIX/ZLASCL             Glen
        Added logic to use SUN's Pageview or GNU Ghostscript for
        Post Script files, if requested.  Uses two addtional files
        ZLASCL.PAGEVIEW and ZLASCL.GHOSTSCRIPT.
        Moved nohwere.

 6809.  November 26, 1991              $APLNOT/BPGET    Phil
        I don't believe this one. A user complained to me that DOBAND
        2 did not work on her data, she showed me plots generated on the
        Convex that proved this. I fired POSSM up on a Sparc to verify
        this and it fell flat on its face with a bus error. The call
        sequence to SCLOAD inside BPGET was wrong. What worries me is
        that the Convex did not trap this, it just did the wrong thing.
        Fixed the call sequence and all is OK.
        Moved nowhere.

 6810.  November 27, 1991              $APGNOT/FILLM     Gareth
        I find these hard to believe too!  Fixed 3 bugs.
        1. MAJOR PROBLEM.  The reference frequency was changed with each
        new scan.  Thus the (u,v,w) are not, in general, referred to the
        reference frequency in the catalog header!  Frazer Owen is
        credited with finding this effect, which is now fixed.
        2. MAJOR PROBLEM.  When changing UV files, the CL table entry
        at the beginning of the next scan was not written!  This can
        lead to some significant problems with applying calibration.
        3. The total bandwidth were incorrectly determined for the
        narrowest back-end filters/recirculators.
        The first two problems are, of course, correctable using
        UVFIX and INDXR, but how many people did that?
        Moved nowhere.

 6811.  December 4, 1991       $APGNOT/LWPLA                 Glen
        Alan B. found a bug in LWPLA (in OLD, NEW and TST, ie I did
        not introduce it) which caused it to draw spurious lines
        when plotting a long slice.  Found that yet another buffer was
        overflowing when trying to write 4096 characters at once.
        Moved nowhere.

 6812.  December 5, 1991        $YPGM/ISPEC.FOR              Dave A.
        Program was not clearing the READ flag, although the
        routine was ending successfully. Removed two lines
        which were setting FRW in subroutine ISPCIN.
        Moved nowhere.

 6813.  December 5, 1991              $APGNOT/FILLM     Gareth
        During July and August 1990, the VLA IAT clock was misbehaving.
        Unfortunately, this was the first test of the on-line software
        to handle clock errors; the software also failed.  This led to
        total delays of the order of 1.0D50 nanoseconds being recorded
        on the VLA archive tape.  Processing of these large numbers
        caused FILLM to die on Convexes and to produce nonsense results
        on Suns.  Out-of-range delays now cause all data to be flagged
        bad.
        Moved nowhere.

 6814.  December 11, 1991            POSSM               Phil
        There was an error when labelling plots from multi-source files
        in velocity units. The subroutine responsible assumed that the
        reference pixel was always 1.0 - what amazes me is that nobody
        had complained about this, why do the AIPS group have to run
        tasks on their own data before uncovering these irritating
        little bugs.
        Moved nowhere.

 6815.  December 16, 1991          BPASS                       Phil
        Made several minor changes to BPASS based on comments from Neil.
        Also fixed one outstanding bug, a remnant from the day this was
        written, but which fortunately people never really needed or ran
        into, in most cases. Minor fixes:
         (1) added a parameter (MXENTR) to specify the maximum number of
             time entries, true max = MXENTR * NANT
         (2) If there is no NX table for the multi-source case, BPASS
             will tell you and die.
         (3) Modified the logic slightly in the case of SOLINT -1, there
             was a bug which caused the NX table to be opned and never
             closed, even though it wasn't needed.
         (4) Modified the handling of the reference antenna to deal with
             the case in which there are different reference antennas
             in LL and RR (or XX and YY).
        Major fix: When the reference antenna changes during the
        observation BPASS was supposed to reference the output table so
        that all entries would have the same reference antenna. This
        option never even pretended to work, it now does. Luckily this
        was only necessary for the DOBAND = 3 option (interpolation of
        bandpasses) which people never really used. Some now want to so
        this is a first step towards making that option work properly.
        Moved nowhere.

 6816.  December 18, 1991              CVEL, CVEL.HLP          Phil
        Received some changes from Neil, also made some of my own.
        (1) Added a new adverb, GAINUSE, so the user can tell the task
            which CL table to look in to determine the time/antenna
            dependent frequency offsets. Also updated the .HLP file.
        (2) CVEL now gives a warning to people who run it on single-
            source files, for the reason that they may not have the time
            dependent information in the CL table.
        (3) Tidied up the way CVEL deals with APARMS and how it writes
             them to the ALTxx words in the output catalogue header.
        (4) 2 calls to CHNDAT used the wrong LUN
        (5) Only close CL table if it was open
        (6) Rationalized the determination of the vel. at first pixel
            and shift calculations
        (7) Reinitialize ALLFLG after it has been set true by SPINTP
        Moved nowhere.

 6817.  December 18, 1991              LWPLA                   Glen
        Attempted to re-center the plot on the middle of the page.
        Moved nowhere.

 6818.  December 18, 1991            ACFIT                Athol/Phil
        Several modifications to ACFIT. Corrected mishandling of the
        first point in each solution interval. Equalise the solution
        intervals and reject intervals with too few points. Non
        self-cal SN time sampling is justified by the large solution
        intervals typically used. Include an option to allow a residual
        polynomial as part of the fit to the emplate spectrum. This
        absorbs terms due to the source spectrum and the template
        spectrum and it is not neccessary to provide off-source channel
        ranges for these spectra (BPARM and CPARM).  This method
        reduces systematic gain errors caused by baselines that change
        throughout an observing run. The new method is selected with
        APARM(9) (baseline-independent fit) and is useful for narrow-
        bandwidth observations. Also changed ACFIT.HLP.
        Moved nowhere.

 6819.  December 20, 1991        APLNOT:GRIDTC              Phil
        When GRIDTC is building up the SPFLGR mapfile it does it in
        groups of baselines, the size of the groups depending on
        the number of channels/IF's/Stokes etc. If, for any reason,
        the first group, or any group, contained no visibilities,
        then SPFLG would fail with an obscure error message. Fixed
        so that this will not happen.
        Moved nowhere.

 6820.  December 20, 1991              AFILE               Phil
        2 minor problems that caused the last 1 or 2 lines of the
        output file to be output in error. Changed a .EQ. to .GT.
        when determining if past the total number of input lines.
        If last line had no pair with which was compared the
        check on experiment number was not done.
        Moved nowhere.

 6821.  December 23, 1991              FRQTAB            Phil
        Fixed a small residual error from the NEBK CH/FQ changes.
        If there was no IF axis, FRQTAB did not call CHNDAT and
        therefore did not fill in FINC, which therefore caused the
        array FREQG (used in many places), to be all zero, except
        for the first element.
        Moved nowhere.

 6822.  December 24, 1991                BPINI          Phil
        Discovered a case (MkIII data), where the existing buffer
        size declaeration was not large enough. Doubled it.
        Moved nowhere.

 6823.  December 30, 1991               Remote tapes                 Eric
        In order to provide a more robust method to handle remote tapes, I
        have created a ``deamon'' task called TPMON and revised Z routines
        etc.~to support it.  In the non-Z areas, I have changed
        $INC/DDCH.INC        Added parameters to keep track of mounted tapes.
        $INC/DAPL.INC        Added adverbs REMHOST and REMTAPE for remote mounts.
        $HLPFIL/POPSDAT.HLP  Added adverbs REMHOST and REMTAPE for remote mounts.
        $HLPFIL/REMHOST.HLP  New adverb to specify the host name for the real tape.
        $HLPFIL/REMTAPE.HLP  New adverb help for remote host tape drive number.
        $AIPSUB/AU4          Changed to call ZMOUNT with new parms rather than
                             ZTAPE.  Changed to avoid an excess back-file for
                             FITS tapes.
        $AIPSUB/FWRITE       Changed to assume that the first logical record is
                             already available in the input buffer.
        $AIPSUB/UWRITE       Changed to back-file for non-FITS data and reset the
                             tape control parameters before reading.
        $APLSUB/TPHEAD       Changed to allow more than 1 tape record to be read.
        $AIPNOT/GRITP        Changed to use ZMOUNT rather than ZTAPE and to allow
                             remote tapes.
        $AIPNOT/GR2TEX       Changed to use ZMOUNT rather than ZTAPE and to allow
                             remote tapes.
        $AIPNOT/TPMON        New deamon to manage real tapes locally reading from a
                             network commands to perform.  TPMON1 is for FITS-disk
                             files while TPMON2 - TPMON(m+1) are for tape drives
                             1 - m.
        Moved nowhere.

 6824.  December 30, 1991        Remote tape Z routines           Eric
        Changed in $APLGEN the following:
        ZDCHIN      Initialize the mount names to blanks.
        ZMOUNT      New call sequence to include remote name and tape number.  Then
                    translates TAPEn logical and assigns AMT0n to it.  The it calls
                    ZMOUNR or ZMOUN2 as needed.  On dismount it first calls ZMOUNR
                    or ZMOUN2 and then reassigns AMT0n to UNMOUNTED.  This routine
                    will now always be used.
        ZMOUNR      Opens the socket, sends the mount/dismount command, and closes
                    the socket (for remote tapes only).
        ZCRLOG      Dummy version of this create/reassign logical subroutine.
        ZTAPE       Removed mount and dismount operations, added test and call to
                    ZTAPR, cleaned up typing.
        ZTAPR       New routine to pass ZTAPE arguments across the network.
        ZTPOPN      Changed to call ZTPOPR for remote tapes.  It detects a remote
                    FITS-disk file via a double colon in the name.  A mount will
                    have had to be done since the logical name AMT0n is now used.
        ZTPOPR      Opens socket and passes ZTPOPN arguments across the net.
        ZTPCLS      Changed to test TPNAME from common and call either ZTPCL2 or
                    ZTPCLR as needed.
        ZTPCLR      New: send ZTPCLS over the net and then closes socket.
        ZTPMIO      Changed to call ZTPMIR for remote tapes and FITS disk rather than
                    ZTPMI2 and ZTPMID.
        ZTPMIR      New: passes ZTPMIO call to network and decodes data on return.  It
                    assumes that the read buffer has been filled by the net (i.e., wait
                    mode IO).  The error code, bytes read, etc. are passed on in the
                    FTAB.
        ZTPWAT      Changed to call ZTPWAR for remore tapes and FITS disk files rather
                    than ZTPWA2 and ZTPWAD.
        ZTPWAR      New: simply returns error code from the FTAB.
        Moved nowhere.

 6825.  December 30, 1991        Special versions of Z routines       Eric
        Changed versions for:
        $APLVMS/ZMOUNT     Version of new ZMOUNT with no calls for remote tapes or
                           for assigning logical AMT0n.  It does check and use TAPEn.
        $APLSUN/ZMOUN2.C   Removed all the logical name assignments (now done in ZMOUNT) and
                           changed to AMT0n.
        $APLDEC/ZMOUN2.C   Copy of $APLSUN one --- does not succeed in dismounting the
                           tapes.
        $APLCVEX/ZMOUN2.C  Removed the deassigning of the device logical and switched to
                           AMT0n rather than MT0(n-1).
        $APLIBM/ZMOUN2.C   Version of new $APLSUN with file locking and only a rewind (no
                           offline) on dismount.  It has to do more than the SUN one,
                           adding a density modifier to the device name and reassigning on
                           mount and using a ``fork'' on dismount since ``system'' does not
                           work correctly on IBMs.
        $APLSUN/ZTAPE      Version of new ZTAPE with an EOM operation for BAKTP and BAKLD.
        $APLDEC/ZTAP2.C    $APLVMS version with mount removed and some error messages added.
        $APLCVEX/ZTAP2.C   Removed ``REMOTE_TAPES''.
        $APLSUN/ZTAP2.C    Removed ``REMOTE_TAPES''.
        $APLCVEX/ZTPOPN    New version of $APLGEN with the quirks of file movement for Convex
                           installed.
        $APLCVEX/ZTPOP2.C  Removed ``REMOTE_TAPES''.
        $APLUNIX/ZTPCL2.C  Removed ``REMOTE_TAPES'' from $APLBERK version and moved to
                           $APLUNIX.  It gives better error handling.
        $APLIBM/ZTPMIO     Changed to call ZTPMIR for remote tapes and FITS disk rather than
                           ZTPMI2 and ZTPMID.
        $APLCVEX/ZTPWA2.C  Removed ``REMOTE_TAPES''.
        Moved nowhere.

 6826.  December 30, 1991         Z routines for TP networking               Eric
        $APLGEN/ZVTPC2      Stubbed.
        $APLGEN/ZVTPC3      Stubbed.
        $APLGEN/ZVTPGC      Stubbed.
        $APLGEN/ZVTPO2      Stubbed.
        $APLGEN/ZVTPO3      Stubbed.
        $APLGEN/ZVTPX2      Stubbed.
        $APLGEN/ZVTPX3      Stubbed.
        $APLGEN/ZVTPRC      Destroy the socket from TPMON - uses ZVTPC3.
        $APLGEN/ZVTPRO      Create the socket from TPMON - uses ZVTPO3.
        $APLGEN/ZVTPRX      Do IO from TPMON to/from the client - uses ZVTPX3.  On error,
                            closes tape device (ZTPCLS) and resets the socket (ZVTPGC).
        $APLBERK/ZVTPO2.C   Opens socket from client to TPMON.
        $APLBERK/ZVTPO3.C   Create socket from TPMON.
        $APLBERK/ZVTPC2.C   Closes sockets in client to TPMON.
        $APLBERK/ZVTPC3.C   Destroy the socket in TPMON.
        $APLBERK/ZVTPX2.C   Writes data to and reads from socket for the client.
        $APLBERK/ZVTPX3.C   Reads from or writes to client for TPMON.
        $APLBERK/ZVTPGC.C   Shutdown any connection from client and accept a new one for TPMON.
        Moved nowhere.

 6827.  December 30, 1991             UVAVG                  Craig/Phil
        Fixed the longstanding 'feature' that whatever averaging
        interval was inserted by the user was changed to 0.95 * that
        interval. On Sparc's the program would enter heavy paging mode
        almost immediately and would lock up the machine until it
        ground slowly through the averaging. Changed the ACSIZE
        parameter from 5,000,000 -> 2,500,000 and it now works very
        quickly.
        Moved nowhere.

 6828.  December 31, 1991              FRING                    Phil
        In some cases there was a problem in the lsq routine inside
        FRING (FRNDR) which would case the zeroth element of the
        Hessian matrix to be filled, causing problems elsewhere.
        Fixed so that if either of the addresses for this matrix
        are zero the routine will jump to the end of the loop.
        When this is in danger of happening the lsq solution
        never converges anyway so the solutions are blanked but it
        was causing funny things to happen elsewhere in the task.
        Moved nowhere.

 6829.  January 3, 1991              FRING                    Phil
        My previous change (# 6828) was not general enough. It
        would occasionally cause solutions not to converge in the
        lsq routine. Fixed it more generally so that convergence does
        occur but that the zeroth elements of the grad and hessian
        arrays are not filled in. Also changed the print level of
        the diagnostic messages from 1 to 3. PRTMSG will not print
        priority 1 messages and I have no time to find out why.
        Moved nowhere.

 6830.  3 January, 1992             Remote tapes                        Eric
        Corrections:
        TPMON      Raised sizes of buffers - 8197 was not enough.
        TPIOHD     Changed to allow reading more than 1 record.
        IMLOD      Changed to avoid a BAKF on FITS format tapes.
                   Also corrected bug by which the same FITS disk file
                   would be loaded NCOUNT times.
        PRTTP      Changed to avoid BAKF's on each FITS format file.
        UVLOD      Changed to avoid 1 of the 2 BAKFs on FITS files.
        ZTPWAT     Changed to not report EOF from remote tapes.
        Moved from the VLA.

 6831.  3 January, 1992              XPLOT                           Eric
        As I was recompiling AIPS, I noticed incompatible common length
        warnings.  Someone had extra poarameters in 1 common declaration
        and none of the others.  This caused a parameter that is used to
        be lost.
        Moved from the VLA.

 6832.  4 January 1992           help files                  Eric
        Changed help files for FITLD, FITTP, IMLOD, INFILE, OUTFILE,
        TPHEAD, and UVLOD to explain the :: nomenclature for remote
        FITS disk files.
        Moved from the VLA.

 6833.  January 6, 1992          $APGNOT/FITTP.FOR           Glen
        Caused FITTP to print the WARNING about binary files only once
        per execution.  In a 43 file FITTP execution for athol, the
        AIPS message file contained over 10 pages of the same WARNING
        messages.
        Moved nowhere.

 6834.  January 7, 1992           ZSTAIP                    Eric
        Changed ZSTAIP to check which tapes are mounted still --- it
        now should know --- and to dismount them.  This can really
        matter for remote tapes.
        Moved from the VLA.

 6835.  January 7, 1992           $APGNOT/XTRAN.FOR         Glen
        XTRAN never worked correctly for source south of 0 dec.  Program
        made arc seconds of dec positive when degrees were negative.
        Position errors of up to 60 arc seconds were estimated.  New
        method searches for a '-' anywhere in the dec string.  If one
        is found, the dec is assumed negative.
        Moved nowhere.

 6836.  January 8, 1992           $APLPGM/CLIP.FOR          Glen
        Increased buffer size again to allow for many channel spectral
        line uvdata.  Tried to remove dependence on NRPARM for
        determining if uv-data are compressed, instead assume data are
        compressed if "CATBLK(KINAX).EQ.1".  Unfortunately, in some
        other locations where CATBLK(KINAX) is not available, if
        INCS.EQ.1 then the data are assumed to be compressed.
        Moved nowhere.

 6837.  January 9, 1992          UVFIT                   Bill C.
        Added adverbs STOKES and DOPOL to allow selection by Stokes'
        parameter and application of polarization calibration.
        Moved nowhere.

 6838.  January 13, 1992          UVFIT                   Bill C.
        Modified to give the pre and pos-fit RMS residuals in addition
        to the chi squares.
        Moved nowhere.

 6839.  January 13, 1992                  BPASET          Phil
        Temporarily disabled the DOBAND = 3 option, it needs work and
        people should not try it until it has been fixed.
        Moved nowhere.

 6840.  January 13, 1992         SNCOR                    Phil
        Added a new option to zero fringe-rates in an SN table.
        Also fixed a LL only bug which caused nothing to happen to
        LL only data. Also updated SNCOR.HLP.
        Moved nowhere.

 6841.  January 13, 1992            SNCOR                  Phil
        Needed another option, one to multiply amplitudes in the SN
        table. Program is nicely stuctured to be able to add new options
        easily. Also changed SNCOR.HLP.

 6842.  January 14, 1992             MK3IN                Phil
        Several small changes:
        (1) Increased the number of possible CL entries from 20 per
            antennas per scan to 40.
        (2) When reading AFILE information ensured that task would
            only pick those type 51 extents that correspond to the
            type 50's listed in the IN2FILE input.
        (3) Also ensured that the roots and extents corresponding to
            the correct tape number are read, if that tape number is
            available.
        (4) Fixed a LL only problem that was causing the phase-cal
            information from the tape to be lost in most cases.
        (5) Fixed up the logic dealing with accumulation periods, they
            no longer have to be integral seconds.
        Moved nowhere.

 6843.  January 14, 1992   $QPGNOT/UVSUB.FOR                 Glen
        Fixed Elie Brinks spectral line LL only problem with UVSUB.
        Further modernized UVSUB, fixed three subroutines.
        $APLNOT/GETCTL assumed INCS was 3 in a funny way.
        $QNOT/BUFGET assumed compressed only if the vis record size was
        smaller after compression.  For a single stokes, one channel,
        one IF experiment, compressed and uncompressed have the save vis
        record  size, 8 reals.  $QNOT/BUFPUT had a similar error.
        (I introduced the BUFGET/BUFPUT problem)  Note that it was
        imposible to use the CATBLK(KINAX).EQ.1 test because CATBLK was
        not passed to the subroutine which calls BUFGET and BUFPUT.
        Moved nowhere.

 6844.  January 15, 1992   $SYSSUN/STARTPMON                Pat
        Also $SYSDEC, $SYSIBM, $SYSCVEX.  Modified this script so that
        it attempts to see if the TPMON<n> daemons are already
        running.  This script could be called from a bootup procedure
        but not directly as it needs the TAPEn and other environment
        variables defined.
        Moved nowhere.

 6845.  January 15, 1992   $SYSUNIX/AIPS.BOOT               Pat
        Simple script to allow TPMON to be started at bootup instead
        of AIPS startup time.
        Moved nowhere.

 6846.  January 15, 1992   $YPGM/CNTR,GREYS $APLPGM/STARS   Doug
        NEW FEATURE: Changed STARS to read an additional column,
        the position angle of the `star`.  See STARS.HLP
        for the new file format.  STARS should be backward compatible
        with old ST data files.  The new ST files have an additional (5th)
        column with the position angle in degrees.
        Finally, updated CNTR and GREYS to read the new ST files and plot
        crosses rotated throughthe position angle in the ST table.
        Also , with STFACTOR < 0, GREYS and CNTR will add a label to
        each cross.  The label is the row number of the cross in the ST table.
        CNTR and GREYS should be backwards compatible with old ST tables.
        Note: Other tasks that plot ST files (e.g. PCNTR and KNTR) could
        update but this was not done at this time.
        Moved nowhere.

 6847.  January 15, 1992               SNPLT            Phil
        Some big changes.
        Modified SNPLT so that it can plot all IF dependent variables
        for an antenna on the same page, or the differences of the
        given variable between 2 specified IF's. Very useful for MkIII
        VLBI data. Had to add EIF to the .HLP file and also OPCODE.
        The user can if he/she wishes plot all the fringes rates for
        all IF's for all antennas in one pass of SNPLT for example.
        Moved nowhere.

 6848.  January 17, 1992              PRTAN           Bill C.
        PRTAN now prints ellipticities and orientations in degrees as
        advertized rather than in radians as they are stored in the AN
        table.
        Moved nowhere.

 6849.  January 22, 1992             UVFIX           Bill C.
        When UVFIX processed multiple subarrays it was successively
        applying the shift to the positions in each subarray.  This
        resulted in incorrect tangent points after the first subarray
        and an incorrect position in the catalog header when done.  The
        update to the position is now done only for the first subarray.
        Moved nowhere.

 6850.  January 22, 1992       GETANT                     Bill C.
        Corrected the default elipticity and orientation; the signs of
        the elipticity were reversed.  This only affects polarization
        calibration capabilities not yet in the standard release.
        Moved nowhere.

 6851.  January 23, 1992                BPASS              Phil
        Extensive modifications. BPASS was implemented in such a way
        that datasets with dual polzns or large numbers of IFs/channels
        were split up internally and the BP entries joined together
        in a special routine (BPUPDT). This routine was the cause of
        the majority of BPASS problems. Changed the size of the large
        arrays so that most problems will now pass through without being
        split up. Changed the logic inside BPUPDT so that the earlier
        joining together problems should no longer occur. Also made
        logic changes inside the main routine to tidy it up.
        Moved nowhere.

 6852.  January 24, 1992                PHSRF            Ray Norris/Phil
        Minor fix to deal with ATAN2 blow up. Also a new ability, as
        well as phase-referencing, task will now perform an amplitude
        reference as well. Also modified PHSRF.HLP
        Moved nowhere.

 6853.  January 26, 1992          Remote tapes                 Eric
        A combination of bad logic in TAPIO and the requirement to
        return the requested number of bytes (no matter how many were
        actually read from the tape) caused the first word of the 2nd
        buffer to be set to zero!  Changed:
        TPMON     To copy only those words actually read and to set
                  BUFSR accordingly in ATPMIO.
        ZVTPX2.C  $APLBERK: To get the number of data words to read from
                  the returned header and to return that in the call
                  sequence.
        ZMOUNR    To use and check a variable for number of words read.
        ZTAPR     To use and check a variable for number of words read.
        ZTPCLR    To use and check a variable for number of words read.
        ZTPOPR    To use and check a variable for number of words read.
        ZTPMIR    To set the words to write to TPMON based on
                  FITS-standard word and to read back and copy only
                  those data words actually returned.
        TAPIO     To use the local word length when forcing buffer
                  sizes.
        ZVTPX2    Changed precursor remarks of this stub.
        Moved nowhere.


 6854.  January 28, 1992   $APLPGM/STARS.FOR      Glen/Doug W.
        Stars now takes 7 columns of input:  The two new ones
        are a star type (values -1 to 19) and a 24 character label.
        Moved Nowhere.

 6855.  January 28, 1992   $YSUB/STARPL.FOR      Glen/Doug W.
        STARPL is used by CNTR,GREYS,PCNTR and KNTR to plot stars.
        STARPL will now plot 21 different types of stars.
        < 0: No Mark, only the star label is printed
          0: Cross             10: Five pointed star
          1: Ellipse           11: Star of David
          2: Box               12: Seven pointed star
          3: Triangle          13: Eight pointed star
          4: Diamond           14: Nine  pointed star
          5: Pentagon          15: Ten   pointed star
          6: Hexagon           16: 11    pointed star
          7: Septagon          17: 12    pointed star
          8: Octagon           18: 13    pointed star
          9: Nine-gon          19: 14    pointed star
        >19: Ellipse
        The Text string labels are also ploted, unless STFACTOR is
        less than 0.
        Super-ceeds Doug W.s changes.
        Moved nowhere.

 6855.  January 31, 1992            BPASS          Phil
        Fixed a minor logic error in the modified version of BPASS.
        It was not finding the correct scan if the bandpass calibrator
        was not the first scan in the database.
        Moved nowhere.

 6856.  January 31, 1992        HF tables                      Bill C.
        Two new routines, HFINI and TABHF were added to APLNOT.  There
        routines create/initialize and do I/O to HF tables.  These
        tables are written by MK3IN to contain Haystack FRNGE (hence HF)
        results.  These tables are straight dumps of the A tape 4000-4500
        records.  A description is given in the MK3IN.HLP EXPLAIN
        section.
        Moved nowhere.

 6857.  January 31,1992        MK3IN                          Bill C.
        Modified to read the type 4000-4500 records (FRNGE results) and
        dump them to an AIPS table of type HF.  A detailed explanation
        of the contents as revealed from Haystack documentation is given
        in the EXPLAIN section of MK3IN.HLP.
        Moved nowhere.

 6858.  February 3, 1992      CHNDAT                         Bill C.
        This routine was using the axis number of the frequency axis in
        the catalog header from the standard (UVPGET) common.  This may
        give incorrect results especially when used in the calibration
        package which may reorder the axes.  CHNDAT now searches for the
        "FREQ" axis.  The result is that the channel increment returned
        by CHNDAT may be VERY wrong.
        Moved nowhere

 6859.  February 4, 1992           MK3IN                   Bill C.
        The sign of the phase of the phase cals were wrong.  The sign of
        the data phases were corrected some time ago but the phase cal
        phase was not.  This correction should cause the phase cals to
        (nearly) line up the IF phases again.
        Moved nowhere.

 6860.  February 4, 1992          POPSDAT.HLP              Dave A.
        Changed the default value of SUBARRAY from 1 to 0 so
        the default will include all antennae.
        Moved nowhere.

 6861.  February 5, 1992    $APLGEN/ZTXOPN,ZTXOP2 $APLCVEX/ZTXOP2 Glen
        Added two new opcodes for Text file opens, 'QRED', and 'QWRT'
        which are quiet read open and quiet write open.  This change
        was made to reduce confusing messages when starting up AIPS
        in the Network Configuration.
        Moved Nowhere.

 6862.  February 6, 1992        CLCOR.HLP             Bill C.
        Corrected the table of vapor pressure of water; the old values
        were a factor of 10 too high.
        Moved nowhere.

 6863.  February 6, 1992           MK3IN                   Bill C.
        Changed the default number of lags to 8, the normal continuum
        mode.  Under some circumstances this was never getting set and a
        value of 0 causes MK3IN to selfdestruct in obscure ways.  Also
        MK3IN now traps some invalid values of the number of
        polarizations, frequencies or IFs and attempts to give
        meaningful messages and dies.  Also removed the dire warnings
        about using the program - there is now a reasonable expectation
        that it will work.
           In the EXPLAIN section section of the MK3IN.HLP file there is
        now a discussion of how to deal with multiband (e.g. S/X)
        observing.  Due to the use of the "frequency codes" by the
        Haystack system to denote either the polarization product or the
        frequency band only one band can be processed ata a time.
        Moved nowhere.

 6864.  February 18, 1992         SNCOR               Bill C.
        Added options 'CLPD' and  'CLPR' to flag solutions with delays
        or rates outside of a given range. Also SNCOR.HLP.
        Moved nowhere.

 6865.  February 18, 1992             PHSRF                  Phil
        Made the modification sent by Ray Norris (#6852) more general.
        Will now write the full complex reference to a BL table as well
        as correct the data with it. Changed one of the OPCODE's and
        added another in the process.
        Moved nowhere.

 6866.  February 18, 1992          CGASET                    Bill C.
        Reduced the time between interpolations of the CL/SN table
        entries from 20% to 10% of the interval between the entries.
        Moved nowhere.

 6867.  February 19, 1992       PCAL,PCAL.HLP               Bill C.
        Made serious changes/additions to the way polarization
        calibration can be done to allow the calibration of VLBI data.
        The option 'APPR' will only work properly for arrays with
        antennas which all have the same parallactic angle (OK for VLA
        but NOT VLBA). The new options will support partially resolved
        calibrators using the assumption that the Q and U images are
        scaled versions of the I image.  In general this is not very
        good but is OK for unpolarized sources. Both of the new
        solution methods require that the parallactic angle have been
        removed from the data prior to phase calibration.  This is the
        opposite of the PCAL 'APPR' solution.
           Added a solution option (RAPR) for fitting a linearized
        polarization model allowing some source resolution.  This is
        implemented in the new routine RPCALC.  This routines uses a
        model suitable for VLBI polarization data and the solution type
        in the AN table is given as 'VLBI'.
           Implemented solution option 'ORI-' to fit ellipticities and
        orientations.  This is needed to model poorly matched sets of
        feeds.  This involves solution routine IPCALC and related
        routines.  This option adds a whole load of user options.  This
        method allows a partially resolved source.  This method takes
        rather alot of computer time to run as it is a seriously
        nonlinear model.
           Also fixed a bug (feature?) in PCLAVG which in combination
        with other features caused partially flagged data to result in
        completely trashed averaged data.  Also PCAL.HLP.  ALso fixed
        logic problems when averaging in IF; only the first IF was being
        used.
            Also fixed numerous bugs which caused PCAL not to be able to
        use a provided polarization model.
            Also fixed several problems with multiple IFs, especially
        when an averaged solution was obtained.
        Moved nowhere.

 6868.  February 19, 1992       DATPOL, POLSET, VLBPOL,ORIPOL   Bill C.
        Modified the polarization calibration routines to handle
        solutions from PCAL options 'RAPR' and 'ORI'.  Added routines
        VLBPOL and ORIPOL.
        Moved nowhere.

 6869.  February 19, 1992      PARANG                        Bill C.
        The old version computed the parallactic with a one argument
        atan function.  This has quadrant ambiguities.  The correct
        method is to use a 2 argument atan function.
        Moved nowhere.

 6870.  February 19, 1992  New polarization poln. parameters  Bill C.
        The 'ORI-' solutions from PCAL require two additional parameters
        which are stored in the AN table.  These are the R-L phase
        difference ('P_DIFF') and the polarization reference antenna
        ('P_REFANT').  New routines PDRSET and PDRGET write and read
        these values from the AN table.  DSEL.INC is modified to carry
        these values.   In DSEL.INC also moved the big buffers to a
        single common to cure some alignment problems with equivalences
        to buffers.
        Moved nowhere.

 6871.  February 24, 1992             ANCAL                      Phil
        A temporary array into which KEYIN fed the CAL file was not big
        enough for some VLA cal files. Increased its size.
        Moved nowhere.

 6872.  February 25, 1992          SN2CL                     Bill C.
        Under some circumstances calibrators which were not selected
        were being used anyway.  The routine now blanks solutions for
        non selected SN table entries to insure that they are not used.
        Also beefed up the logic to keep from writting a final totally
        blanked entry at the end of the table.
        Moved nowhere.

 6873.  February 25, 1992          $AIPSUB/KWICK             Glen
        KWICK was causing a segmentation violation when the arguments
        to an AIPS procedure did not match those expected by the
        procedure.  Added an error check, but has a fixed number for
        the CORE size. (It is not parameterized in COMMON)
        Moved Nowhere.

 6874.  February 25, 1992          $SYSUNIX/OPTNOT.LIS       Glen
        List of subroutines which should not be optimized by the
        compiler.  No Changes to COMRPL have yet been made.
        Moved Nowhere.

 6875.  February 25, 1992          $SYSUNIX/WHICH            Glen
        Little script to Find aips software within an AIPS version
        ie % WHICH MX yields
        WHICH MX*.* file(s) are below /aips1/code/15APR92
        /aips1/code/15APR92/HELP/MX.HLP
        /aips1/code/15APR92/QY/PGM/NOTST/MX.FOR
        Moved Nowhere.

 6876.  February 26, 1992         $APLBERK/ZABORS.C          Chris, Pat
        Actually it was a gathering of AIPS that found this little
        problem.  It appears that a floating point exception caused
        the exception handler to kick in.  It in turn called ZMSGWR
        which must have caused another exception and so ZABORS got
        called recursively.  This may be the key to the convex (and
        other systems) lock file problem.  Chris put in code that
        prevents this race condition from developing.  This was on
        the convex.  Other areas affected are APLIBM, APLDEC, APLSUN,
        APL3090 and APLUNIX.
        Moved Nowhere.

 6877.  March 3, 1992         Aborts                 Eric
        Changed $APLGEN/ZSTAIP.FOR to test that its task name
        is AIPS, GR2TEX, or GRITP before doing tape dismounts.
        Changed ZABORS.C in $APLSUN, $APLIBM, $APLDEC, $APLBERK,
        and $APLUNIX to call ZSTAIP.
        Moved nowhere.

 6878.  March 3, 1992        POPS Memory files         Eric
        Changed the POPS memory files to have more space:
          950 ->  1450 words of temporary literal storage
        14760 -> ..... words of program storage
         4173 ->  .... words of variable storage
         4096 -> 10240 words of source (text) storage
        In addition, the text storage is now kept in core
        rather than in a scratch area in the MEmory file.
        MEmory files are also changed to have a RESTORE 0
        file in a release-dependent area and a RESTORE 1
        file in each of the machine-dependent $DA00 areas.
        Changed:
        DAPL.INC      Raise K array size and add LISTF,
                      STORE1 and STORE2.
        DCON.INC      Raise K array size and add LISTF,
                      STORE1 and STORE2..
        AIPS          Changed initialization of temporary
                      literal structure.  Init STORE1.
        AIPSB         Changed initialization of temporary
                      literal structure.  Init STORE1.
        AIPSC         Changed initialization of temporary
                      literal structure.  Init STORE1.
        FILAIP        Changed ME file size (377 -> 150)
                      and made it created 0-n rather than 1-n.
        FILAI2        Changed ME file size (377 -> 150)
                      and made it created 0-n rather than 1-n.
        POPSGN        Change to write only the basic, version-dependent,
                      but not POPS-number-dependent, ME file.
                      Drop write/read to LISTF scratch disk area.
                      Change various size parameters.
        INIT          Init STORE2 and use new values for K array
                      sizes.  Drop write LISTF to disk.
        STORES        Drop I/O to scratch area of disk for LISTF.
                      Test STORE1 to determine if any recent STORE 1
                      was done and STORE2 to see if someone else did it.
                      Changed addressing to disk as well --- correcting
                      a 1-block error from before.
        ZPHFIL        ($APLGEN) Changed to reference version-specific
                      ME files only for sequence 0.
        STORE.HLP     Changed wording.
        RESTORE.HLP   Changed wording.
        AU2A          Changed SG version number to 13.
        SGLOCA        Changed SG version number to 13.
        KWICK         Changed bad address tests to use variables from
                      common.
        Moved nowhere.

 6879.  March 5, 1992             $SYSAIPS/AREAS.DAT         Pat
        Removed the following (unused) areas: YSSS, YSVU, YVDEV, YXTV,
        YXTVUNIX, YXTVBELL, YXTVBERK, YXTVVMS.
        Moved Nowhere.

 6880.  March 5, 1992             $SYSUNIX/*             Pat, Mark
        Implemented a scheme similar to that described in AIPS memo 74
        (the AIPS setup at ATNF).  Significant directory changes
        include: creation of $ARCH (architecture) directories under
        the $AIPS_VERSION area, moving $SYSLOCAL (and the SYSIBM,
        SYSDEC, SYSSUN, etc areas) to $AIPS_VERSION/$ARCH/SYSTEM,
        adding the $PREP area, moving $LOAD and $LIBR and $MEMORY
        under $ARCH also.  New scripts include AIPSASSN.CSH and .SH,
        AIPSPATH.CSH and .SH, AIPSROOT.DEFINE, HOSTS.CSH and .SH,
        PRDEVS.SH, START_AIPS, START_SERVERS, TVALT, and TVDEVS.SH.  Also
        SYSETUP, DASETUP.  Almost all of the other $SYSUNIX scripts
        were modified, some trivially and some extensively.  The AIPS
        script is gone and is replaced by START_AIPS (run via "aips"
        and "AIPS" symbolic links, usually from /usr/local/bin or
        /local/bin).  New setup files include NETSP and HOSTS.LIST
        (plain text).  Printing scripts ZLASCL and ZLPCL2 are now
        generic and should not have to be edited at all (PRDEVS.SH is
        edited instead).  TEKSERVER has been added.  There's more, and
        it will be covered in an upcoming AIPS memo (soon, I hope.)
        Moved Nowhere.

 6881.  March 6, 1991        SPLIT           Neil Killeen/Bill C.
        In SPLTUV DOBAND was being saved in a temporary to keep UVGET
        from initializing the bandpass calibration when UVGET was only
        being called to create the output catalog header.  DOBAND was
        not being reset untill after the error check for UVGET and so if
        data for a source was not found DOBAND was not being reset to
        the original value.  Moved DOBAND = SAVBND to before the error
        check.
        Moved nowhere.

 6882.  March 6, 1992      MK3IN.HLP              Bill C.
        Added documentation describing how to deal with DAT tapes from
        the correlator containing copies of multiple archive tapes
        separated by EOI marks.  Separate runs of MK3IN are required to
        read in the separate tapes and some systems may refuse.
        Moved nowhere.

 6883.  March 8, 1992      $INSUNIX/INSTEP2       Pat
        Modified this script so that it creates the MEMORY area in the
        right place ($AIPS_VERSION/$ARCH/MEMORY).  Also modified its
        check on the ALT areas so that it keys off the ":n:" fields in
        the $SYSLOCAL/LIBR.DAT file instead of whatever AREAS.SH/CSH
        define.  It also defines LOADn if they need defined and alerts
        the installer that they were undefined.
        Moved nowhere.

 6884.  March 9, 1992      $SYSUNIX/AREAS(C)SH.SED     Pat
        These scripts were mis-defining MEMORY.  This area is now only
        dependent on the architecture since Eric split the memory file
        in two.  Hence MEMORY is $AIPS_VERSION/$ARCH/MEMORY.
        Previously it was $AIPS_VERSION/MEMORY/$HOST.  The host-
        specific part of the memory files now resides in $DA00, one
        for each POPS# as before, while the MEMORY area now only
        contains one file.
        Moved nowhere.

 6885.  March 10, 1992         UVGRTB                  Bill C.
        This routine was using the first frequency in the data rather
        that the highest frequency being gridded to reject data outside
        of the grid.  This caused problems when the data was heavily
        tapered and uv data lay outside of the uv grid.  Random errors
        and aborts could result.
        Moved nowhere.

 6886.  March 11, 1992        HORUS                   Bill C.
        Routine MAPRIN was making the output files for OPTYPE='SUM'
        images too large.  The output file was too large by the number
        of channels/IFs averaged.
        Moved nowhere.

 6887.  March 11, 1992       UVGRTB                   Bill C.
        Modified logic  to reject data within a half width of the
        convolving function kernel of the exterior edge of the grid in
        both u and v.  Formerly the logic allowed the convolving kernal
        to wrap around from one edge in u to the other.
        Moved nowhere.

 6888.  March 12, 1992                STORES                       Eric
        It was using LISTF as a scratch array which, since it now in
        COMMON, is a naughty thing to do.  Especially in this case where
        a scratch array was available and the use was in the read step
        when it was advertised to be in the write step.  Corrected that
        too.
        Moved nowhere.

 6889.  March 12, 1992           $APGNOT/HOLGR.FOR                Mark
        New task to process antenna holography data.  Uses the following
        routines which were also checked in:
           $APLNOT/FFT.FOR
           $APLNOT/FFTV2.FOR
           $INC/FFTV2.INC
           $INCVMS/FFTV2.INC
           $APLNOT/LEASQR.FOR
        Moved nowhere.

 6890.  March 12, 1992    ZIVSOP and FILINI                Pat
        Fixed ZIVSOP (Ivas open routine) so that it allows for 255
        TV's.  Also fixed FILINI so that it does Image Catalog
        initialization properly (it had not been setting the TV#
        in a loop over all TV's).
        Moved nowhere.

 6891.  March 13, 1992       HORUS.FOR                   Bill C.
        No longer modifies frequency alternate axis reference pixel.
        This is now done in IMCREA.  Also added more calibration
        information to the history file.
        Moved nowhere.

 6892.  March 13, 1992       IMCREA.FOR                  Bill C.
        The reference pixel was being incorrectly set when channels were
        being averaged.  Now if channels are being averaged the
        reference pixel is set to 1.0 and the correct frequency is
        assumed to be in the common variable FREQ.  If there is no
        averaging the old values are kept.
        Moved nowhere.

 6893.  March 13, 1992       PRTUV.FOR                  Bill C.
        Modified to give a message about the printed u,v and w being in
        wavelengths at the reference frequency.
        Moved nowhere.

 6894.  March 13, 1992          SHOUV.FOR               Bill C.
        An uninitialized variable was causing a zero divide in SPECUV.
        Moved nowhere.

 6895.  March 14, 1992         UVCOP               Bill C. / Neil
        If data were selected by FQ ID then the u,v and w were not
        scaled to the new frequency unless selection by frequency or IF.
           Also, UVCOP was mucking up the FQ table adjustment when the
        FREQID selected was greater than zero.  This bug was inserted in
        the recent CHNDAT change.

 6896.  March 16, 1992         FRING                       Bill C.
        In the least squares routines data from antennas flagged in the
        FFT search was not being ignored.  The mannar in which the data
        was being used depended on recent successful fits.  The most
        common symptom was the entire solution failing.  The problem was
        most serious for low signal-to-noise cases.

 6897.  March 18, 1992         MX-$APLSUB/METSCA.FOR       Glen
        MX was getting a segmentation violation in METSCA when large
        values were passed to METSCA.  Added array bounds checks.
        Now NaNs are printed.
        Moved Nowhere.

 6898.  March 18, 1992         UVSUB-$APLNOT/BUFXPN,BUFPAK  Glen
        Eli found problem for 2 stokes data.  Since compressed UV data
        are expanded in place, moving the random parameters can over
        write the random parameter in the same visibility for a small
        number of correlators.  Modifed pair of routines to copy
        random parameters to a buffer before expansion/packing.
        Moved nowhere.

 6899.  March 18, 1992         $APGNOT/PRTUV.FOR            Glen
        PRTUV would not print bad times because of time selection
        defaults.  Modified PRTUV to print bad times if no time
        selection is specified.
        Moved nowhere.

 6900.  March 19, 1992         $APGNOT/FILLM.FOR           Gareth
        Three trivial mods:
        1) If the recorded integration time was zero (as was the case
        on some ancient archive tapes), assume 10 sec.
        2) Weighting is now more precisely done:
                10 sec. ==> 1.00000 (was 0.99840)
        3) The pseudo-(u,v,w) values stored in Holography mode are now
        as advertized.  Whether this is what we want, however, ...
        Moved nowhere.

 6901.  March 20, 1992         AFILE                   Phil/Neil
        Neil found a lot of the comment lines describing the A-file
        format were > 72 chars, corrected.
        Moved nowhere.

 6902.  March 20, 1992        VLBIN                     Phil
        After much pain Tony Beasley found that the sideband recorded
        on MkII correlator tapes is not necessarily the sideband
        observed by the VLBA. Added an option (VLBINPRM(16) - this is
        ridiculous) to enable the user to set the true sideband of
        the data. Most of the time setting this to zero will do the
        right thing.
        Moved nowhere.

 6903.  March 20, 1992             SNPLT               Phil
        Added two new features: (1) When plotting tables if a  value
        is blanked it will now be plotted at value zero with a different
        symbol from all other values. (2) Enabled SNPLT to also plot the
        SNR (or weight) column. Also modified SNPLT.HLP.
        Moved nowhere.

 6904.  March 20, 1992       $SYSSUN/COMLNK             Pat
        This only affects the NRAOCV site.  Changed the logic that was
        putting the records in the transaction files for the midnight
        job.  Previously it tried to add anything (a) without checking
        if the file was in the $AIPS_VERSION directory tree, and (b)
        before SEARCH looked for the file.  The result was a lot of
        bad records in the .UPD transaction files.  Now it checks
        these two things before updating the transaction file.  So
        there should be no more false entries in the COMLNK.UPD file
        (I hope).
        Moved nowhere.

 6905.  March 20, 1992     $APLSUB/GALPOL.FOR           Glen
        Created a new subroutine which will return the ra and dec
        of the North Galactic Pole as a function of Epoch.  Currently
        only 1950 and 2000 (the default) have values.   This subroutine
        is used by $AIPSUB/AU7.FOR and $AIPSUB/COORDT.FOR to translate
        from RA and Dec to Galactic Coords.  Must be updated for 2050.
        Moved Nowhere.

 6906.  March 20, 1992               GETHUT, FITTP        Phil
        There was an assumption inside GETHUT and FITTP that there could
        be no tables with > 50 columns, this violates FITS standards as
        well as screwing up when encountering the new HF tables which
        have 77 columns. Fixed the array declerations in both these
        routines.
        Moved nowhere.

 6907.  March 23, 1992               TVFLG, SPFLG                  Eric
        Changed GRIDTB to use a single subarray when specified.  It was
        trying to use SUBARRAY through max-subarray in building the grid
        file.  Also changed SPFOAD and TVFOAD to have a friendlier error
        message when the integration is too short in computing RMS.
        Also changed the handling of errors in the main function
        routines of SPFLG and TVFLG.  Error conditions were getting
        masked with no output message.
        Moved nowhere.

 6908.  March 24, 1992        DATPOL.FOR                 Bill C.
        This routine was not properly addressing visibillity data if the
        Stokes axis was other that the second regular axis.
        Moved nowhere.

 6909.  March 24, 1992         FRING                Bill C.
        In the FFT search the "AP" memory was not being cleared before
        use.  This caused hystersis effects for MkIII data when there
        were variable number of time samples in a SI (usually the case).
        The effects were usually spurious false detections on weak
        fringes.  If there is insufficient memory for at least a factor
        of 2 over sampling in the FFT search then an informative message
        is printed and the task quits.
           Also made some cosmetic changes with involving the print of
        the results.
        Moved nowhere.

 6910.  March 25, 1992         $APGNOT/FILLM.FOR           Gareth
        I believe I have (at last!) found the bug which caused the date
        to be incorrect for the first visibilites of a FILLM run when
        appending to an old file.
        I have also changed the way that the VLAOBS parameter works when
        set to blank.  Previously, FILLM filled all data matching only
        the VLA observing program of the first data record matching the
        other selection criteria.  Now, FILLM will fill ALL data matching
        the other criteria, i.e., blank means select ALL data.
        Moved nowhere.

 6911.  March 25, 1992            CVEL                     Phil
        Major rewrite. CVEL is one of the few (the only?) task that can
        read a multi-source file and has to write a multi-source file
        changing things on the way. The way this was done was via UVGET,
        this had unpleasent consequences for the CATBLK of the o/p file,
        and required much futzing around with the header. Rewrote the
        task to use UVINIT, UVDISK - this simplifies the logic
        enormously and should make program maintanence much easier.
        One nuisance involved in this is thet CVEL now has to deal
        with the NX table itself and also to do its own BP correction,
        subroutines were added to do this. Also modified the messages
        the user receives along the way.
        Moved nowhere.

 6912.  March 25, 1992                   DBCON             Phil/Bill
        In the case of a single source file DBCON was not setting the
        source number correctly. It was accessing an incorrect value
        inside the random parameters array and passing IROUND a NaN.
        Moved nowhere.

 6913.  March 25, 1992                   FITTP           Phil
        The translation of the FQ -> CH tables has caused much
        confusion over the past couple of years, and also sometimes
        has a problem in that the translated CH table does not get
        written to tape. We feel that enough time has now passed since
        the FQ tables were invented (glorious day!) that they should now
        be the default. If a user really wants to take a CH table away
        (assuming that is possible i.e. only 1 FREQID) then they have to
        set DONEWTAB to 3. This will write all tables as FITS binaries
        but will do the translation from FQ -> CH. Also updated
        FITTP.HLP.
        Moved nowhere.

 6914.  March 26, 1992         MK3IN           Neil/Bill C.
        Removed tabs from FORTRAN file.  MK3IN now makes an AN table
        with all antennas specified by the user including any 'ANY'
        antennas.
           Changed parameter MAXM3X to 50 to handle FRNGE output for up
        to 50 baselines.
           Modified MK3IN to read a flag in the experiment (INFILE) file
        which tells if multiple polarizations are to be read.  If not,
        multiple frequency codes can be read (e.g. S/X) into a single
        AIPS data file which then must be seperated using UVCOP.  The
        default polarization is now LL (the standard MkIII astronomical
        setup). Also modified the description in MK3IN.HLP.
        Moved nowhere.

 6915.  March 26, 1992       SNCOR                 Bill C.
        Added option 'REFP' to reference all the phases to a single IF.
        This makes it simpler to look for IF-IF phase differences.  Also
        SNCOR.HLP.
        Moved nowhere.

 6916.  March 26, 1992          FRING                    Bill C.
        Fixed error in previous fix to FFT fring search.
        Moved nowhere.

 6917.  March 27, 1992         $RUNSYS/VLACLOAD.001      Glen
        Small bug in VLACLOAD was not allowing the test disk (TDISK)
        to be on a different disk than MDISK for test 32. (The SPLIT
        test). Modified OUTZAP to delete all files matching the
        output name on all disks, ie INDISK=0, not INDISK=TDISK.
        Moved nowhere.

 6918.  March 27, 1992         $APGNOT/CLCOR.FOR         Glen
        Changed the meaning off the opcode 'PHAS' and added opcode
        'RATE' which does what 'PHAS' used to do.  'PHAS' now adds
        a constant term to the orientation angle for 1 or more IFs.
        With 'PHAS', there is no time varying term and there is
        no modification of the AN table.  The opcode 'RATE' modifies
        all IFs specified with BIF and EIF in the same way.
        Also added Bill C's modification to CLCOR.HLP.
        Moved nowhere.

 6919.  March 29, 1992           AOC AIPS installation           Mark
        Fixed bugs in the following startup scripts - the main problem
        was with hard-wired TVs and starting the TPMON servers

           AIPSEXEC
           AIPSPATH.[C]SH
           START_AIPS
           START_TPSERVERS
           START_TVSERVERS
           STARTPMON
           TVDEVS.SH

        Removed START_SERVERS, its function is now split between
        START_TPSERVERS and START_TVSERVERS.  Also, two new utility
        scripts

           ALLRSH
           DATOUCH

        Fixed the include path for SUNs in $SYSLOCAL/INCS.SH so that it
        searches $INCSUN, and added a SUN-specific version of DAPC.INC
        in this directory (all Q-routines and programs for SUN4 should
        be recompiled).

 6920.  March 30, 1992           APLNOT/DATCAL          Phil
        Minor modification to ensure that the (computationally)
        expensive delay and delay-rate corrections are not made to
        the data unless they have to be.
        Moved nowhere.

 6921.  March 31, 1992        $QYPGNOT/MX                   Glen
        'Minor' modifications to allow larger section of the Beam to be
        used in the minor cycle and also fewer residuals.  Currently
        the maximum number of residuals loaded into the AP is 3000.
        This improves cleaning of badly calibrated data by allowing
        fewer side-lobes to be selected as source components.
        Moved nowhere.

 6922.  March 31, 1992                IVAS                    Eric
        Changed $YIVAS versions of
        YCUCOR   Fixed major errors!  It was using a scroll on input
                 that was not set and should not have been used.  Then
                 it used the wrong variable name in computing the output
                 locations leading to error of several pixels.
        YSCROL   Changed to use separate FIVASVPZOOMSCROLL calls for
                 grey and graphics, and for CV only at present, to do
                 a minor correction (0,1,2 pixels) in the graphics.
        YZOOMC   Changed as for YSCROL.
        YLUT     Changed to do gamma correction when the IVAS is in the
                 3-channel mode (where LUT is OFM).
        YOFM     Changed it to avoid negative OFMs which arose on read.
        YCHRW    Changed it to be similar to the generic routine for
                 lettering in the grey planes.  It did not handle
                 non-standard sizes well.
        Moved nowhere.

 6923.  March 31, 1992              TVs                      Eric
        In messing with the IVAS, made some other changes:
        GRBOXS   Changed to do simple rounding rather than down at BLC
                 and up at TRC.
        IMANOT   Changed call sequence to add the desired graphics
                 channel of the lettering.
        IAXIS1   Changed for call sequence of IMANOT.
        ITICS    Changed for call sequence of IMANOT.
        AU5B     Changed for call sequence of IMANOT.
        AU5E     Changed to have graphics controls in lower-level code.
        OFMCON   Changed to use IMANOT to make lettering more legible
                 (against a black background).
        OFMGAM   Changed to use IMANOT to make lettering more legible
                 (against a black background).
        OFMMOD   Changed to use IMANOT to make lettering more legible
                 (against a black background).
        IMCCLR   Adjusted brightness of levels 1, 2, and 5 of basic
                 color contour set.
        Moved nowhere.

 6924.  March 31, 1992           TVANOT                  Eric
        Changed logic of how it chooses the Graphics or Grey plane to
        letter.  This will atke advantage of the improved TVANOT and be
        more flexible.  Changed AU5B.FOR and TVANOT.HLP.
        Moved nowhere.

 6925.  April 1, 1992             FILINI                  Eric
        The loop that initialized TVs had several errors: it told the
        current TV number with an uninitialized variable, it skipped
        an introductory message, and it used uninitialized common
        variables NGRAPH and NGRAY.  Reordered the initialize call to
        YTVCIN, added MSGWRT call and a second message, and added the
        ability to skip out of the loop entirely.
        Moved nowhere.

 6926.  April 2, 1991             FRING                 Bill C.
        Fixed indexing problems in the least squares routines that
        caused a bad display of the fitting results.  The fits
        themselves were unaffected, only the optional display of the
        results.
          Also modified the least squares routines to include the sum of
        the weights in the penalty terms for the delay and rate window.
        Moved nowhere.

 6927.  April 2, 1992               New task: SBCOR       Phil
        A new task. SBCOR will correct VLBI data that contain mixed
        MKIII/VLBA baselines for the 130 degree phase offset that
        occurs between upper and lower sidebands. Hopefully this
        task will be short-lived and we insert this correction into
        MK3IN. Also a helpfile.
        Moved nowhere.

 6928.  April 2, 1992               POLSET                Bill C.
        In the call to PDRSET the value of NUMIF in common was assumed
        to be set.  Under some circumstances it was not.  EIF replaced
        the call to PDRSET as this should always work.
        Moved nowhere.

 6929.  April 3, 1992             ORIPOL                  Bill C.
        Modified the Stokes transformation matrix to rotate RL and LR
        data by the R-L phase differences given in the antenna table.
        This appears to allow CLCOR to rotate the polarization angle.
        The interaction of this use of the R-L phase difference and that
        in PCAL is uncertain.  This affects the orientation-ellipticity
        model ('ORI-' in PCAL) only.
        Moved nowhere.

 6930.  April 3, 1992       CLCOR                      Bill C.
        Modified 'POLR' option to deal with ORI-ELI poln models by
        modifying the R-L phase differences in the AN table rather than
        changing the polarization parameters.
        Moved nowhere.

 6931.  April 3, 1992               LISTR                   Phil
        Several small changes. The most significant being that the
        problem with the phase averages after matrix listings being
        incorrect when the points lay near 180 degrees is now fixed.
        When listing gain entries from tables with > 1 IF, the
        frequency labels for the IF's were wrong, they were always
        the label for the first IF.
        A cosmetic change suggested by Glen for deciding when to
        start a new page.
        The qualifiers are now modulo 10000 before being printed in
        order to deal with large numbered qualifiers. A change
        suggested by Gareth.
        Moved nowhere. Its somebody else's baby now.

 6932.  April 6, 1992           PRTAN                       Bill C.
        Modified to print the Right-Left phase differences and the
        polarization calibration reference antenna for the
        ellipticity-orientation polarization feed model.
        Moved nowhere.

 6933.  April 6, 1992        $QYPGNOT/MX  MX.HLP               Glen
        Backed out of some of the Minor Cycle changes put in on March
        31, 1992 inorder to return MX to its former speed.  Have
        removed the MINPATCH upper limit, so that MINPATCH up to 179
        is allowed (Beam width of 359 pixels max).  This helps when
        doing snap-shot imaging.  Initial clean step use more of the
        beam, but as clean reaches noise limit, MX returns to its
        former method.  Updated MX.HLP.
        Moved nowhere.

 6934.  April
