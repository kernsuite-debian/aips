;-----------------------------------------------------------------------
;  Copyright (C) 2008-2010
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in SOCORRO.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


***********************************************************************
***********************************************************************

                 Changes while 31DEC09 is TST

***********************************************************************
***********************************************************************

12753.  December 7, 2008        version                  Eric
        Changed 31DEC08 to 31DEC09 in:
        GETRLS.FOR    INSTEP1     install.pl     update.pl
        ZXHLP2.PL     UPDCONTROL (comment)       AIPSPATH.*
        Changed 16384 to 32768 for MAXCHA and MAXCIF, did
        corresponding change in ZPBUFSZ plus doubled to extra buffer
        size as well (BP tables need that).
        Moved nowhere.

12754.  December 7, 2008         misc                    Eric
        Fixed $SYSLINUX/LDOPTS.SH to set STRIP=FALSE (now not a known
        option).
        Moved to 31DEC08 this date.

12755.  December 8, 2008           ACCOR                 Eric
        Added code to trap the no data found case and set errors.
        Moved to 31DEC08 this date.

12756.  December 8, 2008           DFTPL                  Eric
        Due to a typo, DFTPL plotted data only from spectral channel 1
        including averaging channel 1 from BCHAN to ECHAN times.
        Moved to 31DEC08 this date.

12757.  December 10, 2008     VLBAUTIL/VLBAPCOR            Amy
        If INVERS was set in VLBAPCOR it was used when CLCAL was
        run as part the procedure.  This was a bug and INVERS is
        now set to 0 for CLCAL.
        Moved to 31DEC08 this date.

12756.  December 10, 2008          3C147_X              Amy/Eric
        Installed the last standard image: 3C147 at X band reduced and
        imaged all by Amy.
        Moved nowhere (all versions get it automatically).

12759.  December 10, 2008           PCCOR               Amy/Eric
        Changed OPTIMIZE.LIS to have PCCOR not optimized.  The Intel
        compiler gets 1 antenna wrong when optimized.
        Moved to 31DEC08 this date.

12760.  December 10, 2008        TIMDEST, RENUMBER           Eric
        Changed AU3A to inhibit TIMDEST (although I kept the messy
        code since it also does ALLDEST) and RENUMB to allow expansion
        of the CA file so that SLOT numbers greater than the current
        maximum are acceptable (no more than 25000 greater than the
        current max however).
        Moved nowhere - these do not go to new.

12761.  December 11, 2008        AIPSASSN.*SH                Eric
        Add site ALVOARN to special codes for VLA.
        Moved nowhere.

12762.  December 11, 2008      ACCOR, CLCAL                  Eric
        Changed ACCOR to delete the new SN table when there is an
        error, such as no data found.
        Changed SNAPP to return error -1 on empty SN table or empty
        output SN table.
        Changed CLCAL to trap this error return and to quit promptly
        when no SN data were found.
        Moved to 31DEC08 this date.

12763.  December 11, 2008          JTRIM                 Eric
        The decision to leave TAB characters in strings made 1/94 was
        wrong.  Changed JTRIM to look more mdern and to convert TAB
        characters to blanks.  Thus a TAB does not terminate a string
        like the other non-printing characters, but it no longer
        remains in the string.  GMRT is sending source names with TABs
        and possibly other garbage characters and POPS cannot help the
        user with this.  Linked FITLD, UVLOD, IMLOD - it  will
        propogate further with time.
        Moved nowhere.

12764.  December 11, 2008           POLRXY                Eric
        A decision is made: the pole position will be in arc seconds
        not meters.  The former is what is tabulated by the people who
        measure such things.  The actual units may be told apart: if
           sqrt (POLRX^2 + POLRY^2) <= 0.6
        then they are in arc seconds.  Changed:
        SETAN   help and fortran comments about units
        ANTINI  changed comments and changed code to convert
                parameters in meters into arc seconds (divide by 30.8)
        Moved nowhere.

12765.  December 12, 2008         UVFIX, HAFIX            Leonia
        Investigation of the polar motion from 1979 till 2008 shows:
        1. ROMAX/ROMIN<30.8; RO=SQRT (POLRX^2 + POLRY^2);
        2. RO < 0.6 arcsec;
        30.8 is coefficient of recalculation meters to arcsec.
        This fact allows to determine the units of POLRXY based on
        the value of POLRXY.
        The following codes are added to UVFIX and HAFIX

        IF (RO .GT. 0.6) THEN
           UNITS of POLRXY are meters;
           recalculate POLRXY to arcsec
        ELSE
	   UNITS are arcses
           END IF
        Moved to 31DEC08 this date (where it is more useful).

12766.  December 12, 2008           BPASS                 Eric
        One pair of arrays were dimensioned MCHAN=2048!  Phil code!
        When dimensions MAXCHA they work better with Widar.
        Moved to 31DEC08 this date.

12767.  December 12, 2008           FILLM                 Eric
        Changed:
        1. For revisions >29 (post ModComp) the shadowing will be
           handled by FILLM rather than by using the erroneous on-line
           flag bit.
        2. The array configuration will now be computed as best as
           possible by FILLM.  The on-line data set depends on
           operator intervention and so is sometimes incorrect.
           This only appears in the FILLM history cards.
        Moved to 31DEC08 this date.

12768.  December 12, 2008           TVCPS                Eric
        Something got changed in the software that prints PostScript
        at the AOC - it claims to care more about following some sort
        of standards.  Added some junk and took out the %%BeginProlog
        comment and now it seems to work.
        Magical thinking moved to 31DEC08 this date.

12769.  December 14, 2008               UVDEC                 Eric
        Alternate ref pixel not adjusted.
        Moved to 31DEC08 this date.

12770.  December 15, 2008            ZMIO                    Eric
        Changed max I/O request to 16 megawords.  VBGLU was now
        asking for 1.5 megawords per half buffer.  Fixed error message
        format too.
        Moved nowhere.

12771.  December 18, 2008           TABSRT                    Eric
        The new BTBSRT can call ICSORT with a serious number of
        records.  Changed the untested internal limit of 1024 to a
        tested limit of 20480 in ICSORT.
        Moved to 31DEC08 this date.

12772.  December 18, 2008           TVCPS                    Eric
8        More commands were found to be out of order in a formal
        PostScript sense.  The EndComments and EndProlog must come
        after the BeginSetup .. EndSetup that specifies fonts used.
        Moved to 31DEC08 this date.

12773.  December 19, 2008          CALIB                  Eric
        Data were included in the average if the time <= the begin
        time + solint - they should not be on = so changed that to
        time <= begin time + solint - 0.001s.
        Moved to 31DEC08 this date.

12774.  December 24, 2008            UVCOP                Eric
        When ANTEN = 2,0; BASELIN=8,0, it copied baseline 2-8 as
        expected but also copied 2-2 if DOACOR.  Droped the code that
        allowed this.  If you want that result, set BASELINE=2,8.
        Moved nowhere.

12775.  December 24, 2008            UVDIF                Eric
        The CLIP only subroutine had an erroneous subscript KK rather
        than K which caused it not to find bad amplitudes although it
        reported them in the max difference over max flux value.
        Moved to 31DEC08 this date.

12776.  December 24, 2008        imaging problem          Eric
        The change that allowed subimages to be padded out and used
        for modeling has caused nasty problems with non-3D imaging
        (i.e. de Sade's principle).  Changed:
        GRDAT      to call IMGSIZ to set FLDSZ only on DO3D true
        SETGDS     to defer the setting of FLDSZ until the full set of
                   images are examinined and the DO3D value
                   determined.  Saves the IMGSIZ outputs and the image
                   size values in a temp array for this.
        Must move to 31DEC08 but this should delay a final freeze!

12777.  December 26, 2008           VBGLU                 Eric
        The task had 3 main problems:
        1. When disk I/O had to be restarted because the required UV
        record preceded the ones in RAM, the task checked a few of the
        upcoming records to find the minimum needed input record
        number.  Thus the first record number in the new buffer could
        be one that preceded the currently required one.
        Unfortunately, the pointer was set to the first in the new
        buffer always.  This led to wrong baseline data being included
        in the output record.  Raised the search region and made sure
        it did not search over empty records and made the pointer aim
        at the desired record.
        2. On AT tables, the task asks for a SOURCE column that is not
        present in the table and so quit on AT tables.  Added a
        special error test for this, allowing it to procede normally
        since the copy can handle a missing selection column.
        3. The handling of character-data columns was incorrect.  So
        far as I can tell, the error only damaged CQ tables.
        Corrected all the length handling for character-valued columns
        of 1 or more dimensions (includes AT, CT, and SU tables).
        Moved to 31DEC08 this date.

12778.  December 26, 2008         ACFIT                 Eric
        Was setting CLVER not CLUSE from adverb GAINUSE and so always
        applied the highest CL table.
        Moved to 31DEC08 this date.

12779.  December 29, 2008         AIPSLetter                Eric
        Put back the TeX, ps, and pdf forms of the 31Dec AIPSLetter.
        Moved to all versions automatically.

12780.  December 30, 2008          FILLM                    Eric
        Changed the shadowing again: if < 0, no shadow flags;
        if = 0, use system bit for versions 20-29, and >=34 or use 25m
        for versions <20 and 30-33; if > 0, use specified value with
        shadowing computed in FILLM.
        Added an extra test on VLAOBS to help online FILLM stop
        when requested and the observation code has changed to one
        that is not desired.
        Moved nowhere.

12781.  January 1, 2009         VLA.ant.2008                Eric
        Install the 2008 baselines file under its new name in
        $AIPSTARS and fix the 2007 file to have the copyleft.
        Moved to all versions automatically.

12782.  January 1, 2009         CALIB                       Eric
        The business of dividing a scan up somehow into intervals when
        the actual integration time and the user's SOLINT may be an
        exact match or not is simply a mess.  The existing code where
        I add a -DEPS could cause an infinite loop if the scan
        integration time is zero which is legal although not usually
        correct.  It could also cause it to do an extra solution on
        the last sample of a scan.  Changed it to fix the integration
        end to be > scan end when it was computed to be exactly the
        scan end to avoid both problems.  Deleted a bunch of old code
        that has been commented out for a while.
        Moved to 31DEC08 this date.

12783.  January 2, 2009         VLBAUTIL (VLBACPOL)          Amy
        Several minmatchs still existed in VLBACPOL.  Replaced.
        Moved to 31DEC08 this date.

12784.  January 5, 2009    UVW scaling, IMAGR               Eric
        The calibration routines do not correct UVW for a change in
        the header frequency even though they do issue a new header
        frequency.  Checked over all the code for errors and was
        relieved to discover that UVCOP, SPLIT, and SPLAT among others
        did this right.  IMAGR attempted to do it right too but a
        recent (2008) change to GRDMEM made some error:
        BASAVG    $APLNOT subroutine that appears not to be used -
                  changed it to scale output UVW
        GRDMEM    $QNOT: the UVW scaling for the first channel was
                  used before it was computed - so first call to
                  GRDMEM would make an error but later calls would
                  have it okay.  Affects IMAGR, SCMAP, SCIMG.
        DECOR     Already did scaling
        UVLIN     The TRUEF used for phase shifting should have used
                  UVFREQ since it is based on the input FOFFs rather
                  than FREQ which is the BIF/FQID selected new
                  frequency.  Add UVW scaling but after function call
                  since that deals with input UVW correctly.
        UVLSF     As UVLIN
        UVLSD     As UVLIN
        UVMOD     As UVLIN
        Simple addition of UVW scaling:
        AVSPC    DIFRL   FUDGE   PHSRF   TI2HA   TYAPL   UVAVG   UVBAS
        Moved to 31DEC08 this date.

12785.  January 5, 2009             FLOPM                   Eric
        Added OPTYPE = 'IFTO' to flop the IFs as well as the
        channels.  In this case, many IF-dependent tables are not
        copied but some are: SU, CL, FG.
        Moved nowhere.

12786.  January 5, 2009        PCCOR                       Leonia
        Add the print out, if the number of tones per IF/POLZN
        less than 2, including the case of 2*NIF*NPOLZN .GT. 16
        (number of required PC detectors exceeds the number of
        available ones (16)).
        Moved nowhere

12787.  January 6, 2009            CALIB                  Eric
        This business at the end of scans is still getting us.
        Changed the latest changed code so that is the current
        interval is within 60% of SOLINT of the end of the scan, the
        end time of the interval is made significantly larger than the
        end of the scan.  (Note that making it 3 milliseconds larger
        than a scan in day 3 was for some reason not enough.)
        Moved to 31DEC08 this date.

12788.  January 8, 2009           CALIB                  Eric
        Yet again!  The NX table contains center times and intervals
        which are in single precision floating point.  It is thus able
        to indicate an end time that is actually less than the real
        end time by more than a few milliseconds.  Added an error
        margin of 0.2 seconds which will still be inadequate if the
        times get into several days or more.
        The handling of NX records with subarray and freqid that do
        not match the current ones was incorrect.  An NX table can
        contain overlapping scans with different subarrays and/or
        freqids.  Changed the NX reading code to accept only matching
        scans and dropped the tests on data matching NX record
        subarrays/freqids since that would cause pre-mature reading of
        a new NX record in the case of overlaps.  The data from UVGET
        will always be only the desired subarray and freqid and
        therefore does not need examination.
        Added a long section to the help for SOLINT.
        Moved to 31DEC08 this date.

12789.  January 8, 2009            FRING                   Eric
        FRING does much the same as CALIB in trying to break up
        intervals in scans.  I fixed the handling of freqids and
        subarrays in it but left the old form of time management
        in which the intervals start at regular times without regard
        for when the data occur and times are expanded outwards a good
        bit.  This is more likely to be desirable in FRING then in
        CALIB's self-cal modes.
        Moved nowhere.

12790.  January 9, 2009            CALIB                   Eric
        The subarray got lost so the SN table did not have a subarray
        value and so the next subarray deleted the previous one.
        Moved to 31DEC08 this date.

12791.  January 14, 2009          RUN  help                Eric
        The help file for RUN was not sufficiently clear.  For VERSION
        blank, the file $RUNFIL/name.usr is sought followed by
        $RUNSYS/name.001.  For version = 'xxx', the files $xxx/name.usr
        and then $xxx/name.001 are sought.
        Moved nowhere.

12792.  January 14, 2009        SPLIT, SPLAT             Eric
        Fixed to close NX tables when there is a problem with a source
        so that they can be written for the next source.  Did not deal
        with a bad output file (e.g. no data found) when there are
        also good output files.  If there are no good output files,
        then the problem is handled.
        Moved nowhere.

12793.  January 16, 2009           SNPLT                 Eric
        Added DOBLANK option to plot location of blanked solutions.
        It will use a different line type on GRCHAN=0, DO3COL<=0
        and so be a different color on the TV.
        Moved nowhere.

12794.  January 19, 2009            VBGLU                 Eric
        Added code to control the sort order in the output header.  It
        will almost certainly end up 'T' although 'TB' is possible for
        2 fully sorted data sets with all matching visibilities.
        Moved nowhere.

12795.  January 26, 2009         ISPEC, BLSUM              Eric
        Add the concept of a slice of an area in XY over the Z pixel.
        ISPEC    add code to save spectrum as a SLice file optionally
                 SL file format changed to tell is FLUX or brightness
                 Add adverb to help.
        BLSUM    add code to save spectrum as a SLice file optionally
                 SL file format changed to tell is FLUX or brightness
                 Add adverb to help.
        SLBINI   add whole 2nd type to handle slice on axis 3
        SL2PL    pass on BLC/TRC(3) to image catalog (misc words)
                 also trap FLUX units from slice file
        PFPL2    force TRC(3-7) = BLC(3-7)
        TKSLIN   save BLC/TRC(3) in image header, flux units
        TVSLIN   save BLC/TRC(3) in image header, flux units
        SLOCIN   pick up BLC/TRC(3) from image header for SLBINI
        LABINI   If 3rd axis involved in slice coordinates add it to
                 centered on string
        AU6E     pick up BLC/TRC(3) from image header for SLBINI
        AU9A     change TKPOS and TKXY to return correct values for
                 the spectral coordinate and central values for XY in
                 the case of the new type slices
        SLFIT    add code to handle spectral case on input and output.
                 Add output adverbs (a la IMFIT) to return the
                 answers.  Control flux units.  Save the physical
                 units answers and units strings in the SL file.
                 Changed help to adverb returned adverbs.
        SLICE    Don't write all the inputs into the SL file record 2
                 and set OPTYPE there to AVER.
        AU8A     Tell about fit models using newly saved parameters
                 and the rms for SLices.
        MV2C06SL Revise format description
        Moved nowhere.

12796.  January 27, 2009            CALIB                Eric
        The fix for solution interval getting set to zero was not made
        for the first record in the NX table only for all later ones -
        so of course that bit us.
        Moved to patch this date.

12797.  January 28, 2009           64-bit Linux           Eric
        Create a new architecture - Linux compiled for 64-bit machines
        using the latest Intel compiler on rishi.
        AREAS.CSH      Add APLLNX64, INXLNX64, SYSLNX64
        AREAS.SH       Add APLLNX64, INXLNX64, SYSLNX64
        AIPSPATH.CSH   Add LNX64 case for setting library path
        AIPSPATH.SH    Add LNX64 case for setting library path
        LIBR           Add LNX64 $ARCH for standard ar methods
        START_AIPS     Add LNX64 in group using "host" 2 places
        TVALT          Add LNX64 case in search for X server
        ZLPCL2         Add LNX64 to group using "lpr"
        ZLASCL         Add LNX64 to group using "lpr"
        STARTPMON      Add LNX64 to group that is not system V
        LINK           Add LNX64 with LINUX to options reversed group
        AIPSWC         Add APLLNX64, SYSLNX64 in word counts
        MAKE.MNJ       Add LNX64 to list of $ARCH
        MAKE.BMNJ      Add LNX64 to list of $ARCH
        UPDUPDATE      Make cases to fix SYS${ARCH} for AXLINUX, LINUXPPC
        UPDCONFIG      Add RISHI for AOC site
        UPDREMOVE      Add LNX64 case for TSTFLG
        UPDERROR       Add LNX64 to group with -s grammar for "mail"
        UPDCONTROL     Add LNX64 to group with -s grammar for "mail"
        AIPSUPD        Add kluge to copy LIBR areas to 2nd set
        install.pl     Add LNX64 case in places, detect linux 64.
        Moved contents of $SYSLINUX and $APLLINUX to $SYSLNX64 and
        $APLLNX64 and then changed:
        ZDCHI2         UNIX, Linux 64-bit in strings
        FDEFAULT       Fix COMPILER and ifort options
        LDOPTS         Fix COMPILER and ifort options
        CCOPTS         Fix COMPILER and icc options
        LIBR.DAT       Change: Z routines go to $LIBR/APLSUB, link
                       edit lists contain only $LIBR/APLSUB once
                       rather than 2 each of APLSUB and APLLNX64
        COMRPL.ADD     APLLNX64
        INCS           INCLNX64
        Moved nowhere.

12798.  January 29, 2009          LNX64                  Eric
        Further changes:
        INSTEP2     was fooled by $LIBR/APLSUB/SUBLIB existing before
                    APLGEN was to compile.  Removed test on SUBLIB
                    existing and do only check on are all files
                    compiled in list.
        AIPSUPD     remove kluge copying LIBR files - solved by having
                    Z and APLSUB in same library
        AIPS        updated copyleft
        XAS.SHR     Update Makefile for LNX64
        Moved nowhere.

12799.  January 29-30, 2009          TABSRT, LNX64           Eric
        OPTIMIZE.LIS    Put ZSTRTA in level 0 for LNX64 - it worked on
                        primate and hamal, infinite loop on pilabo!
        ICSORT          Length 20480 was not enough for some FITLD
                        cases - used to use 1024 untested!  Now
                        204800!
        Moved nowhere.

12800.  January 31, 2009          EDITA                   Eric
        The FLAG ABOVE and BELOW commands behaved oddly - when the
        flag all polarizations was turned on they found high/low
        points in both polarizations even when only one was displayed.
        Changed them to behave as FLAG AREA which controls the finding
        outside of EDFLAG.
        Moved nowhere.

12801.  January 31, 2009             ZDCHIN                 Eric
        Changed the default max ap to 1 Gbyte for 64-bit machines.
        It is too dangerous to let the default get way large.
        Moved nowhere.

12802.  February 2, 2009            TYAPL                Eric
        Help file initial description was for TYSMO.
        Moved nowhere.

12803.  February 4, 2009           TYAPL                 Eric
        It applied the FG table since the SELINI default is FGVER=0.
        Moved to patch this date.

12804.  February 23, 2009          QINIT                   Eric
        Fixed the error message after ZMEMRY failure to report Kilo
        words with an adequate format.
        Moved nowhere.

12805.  February 23, 2009            DELAY                  Eric
        New verb to delay DETIME seconds.
        Moved nowhere.

12806.  February 24, 2009           DIFUV                Eric
        Added OPTYPE = 'DIV' option to make gains rather than a
        difference of 2 UV data sets.
        Moved nowhere.

12807.  February 25, 2009        USERID adverb            Eric
        The USERID adverb is now obsolete for most applications since
        it is not required to separate multiple users inside a single
        catalog file.  That old construct was forbidden a couple of
        years ago in install.pl, FILAIP etc. since not all tasks and
        verbs supported it even though they should have.  Did the
        verbs first fixing Fortran:
        AU2A   AU3    AU5    AU5A   AU5D   AU6D   AU6E   AU7    AU7A
        AU7B   AU8    AU8A   AU9    AU9B   AUT
        and help files:
        ACTNOISE   ADDBEAM    ALTDEF     ALTSWTCH   ANTNUM     AXDEFINE
        CATALOG    CELGAL     CHKNAME    CLRNAME    CLRSTAT    COODEFIN
        COPIXEL    COTVLOD    COWINDOW   EGETHEAD   EGETNAME   EPOSWTCH
        EXTLIST    GET2NAME   GET3NAME   GET4NAME   GETHEAD    GETNAME
        GETONAME   GETTHEAD   HINOTE     HITEXT     IMDIST     IMHEADER
        IMSTAT     IMVAL      MAXFIT     MAXTAB     MCAT       PCAT
        PLGET      PRTHI      PUTHEAD    PUTTHEAD   PUTVALUE   QHEADER
        QIMVAL     RENAME     RESCALE    SCANTIME   STALIN     T1VERB
        TABGET     TABPUT     TKAGUESS   TKAMODEL   TKARESID   TKASLICE
        TKGUESS    TKMODEL    TKRESID    TKSLICE    TVAGUESS   TVALL
        TVAMODEL   TVARESID   TVASLICE   TVCUBE     TVDIST     TVFLUX
        TVGUESS    TVLOD      TVMAXFIT   TVMODEL    TVMOVIE    TVNAME
        TVRESID    TVROAM     TVSLICE    UCAT       ZAP
        Moved nowhere.

12808.  February 25, 2009            EDITR                Eric
        Changed the limit on number of sources from 100 to 10000 in
        QEDIUTIL.  It was making bad source numbers in the output FG
        table and not showing the source name(s) when it should.
        Moved nowhere.

12809.  February 25, 2009         USERID in tasks         Eric
        USERID is needed in DISKU, PRTAC, and MOVE.  Dropped it from
        $APLPGM tasks:
        COMB    CORFQ   MCUBE   MF2ST   PBCOR   PRTAB   PRTCC   PRTIM
        PRTPL   QMSPL   SAD     SLFIT   SQASH   STFND   SUBIM   SUMIM
        TAFLG   TKPL    TRANS   UVDIF
        Moved nowhere.

12810.  February 26, 2009           USERID                Eric
        Plot files have a problem with dropping an adverb, especially
        at the beginning with both EXTLIST and PLGET.  So retain
        USERID adverb but mark it unused in the help files and set it
        to NLUSER in the code.  Tasks done this way:
        CCNTR   CNTR    IMEAN   ISPEC   PCNTR   PROFL   SL2PL   TAPLT
        ANBPL   BPLOT   CLPLT   DFTPL   FRMAP   FRPLT   GAL     IRING
        LOCIT   PFPL1   PFPL2   PFPL3   PLCUB   PLOTR   PLROW   POSSM
        UVHGM   UVPLT   VPLOT   CONPL
        Y area tasks that can simply drop USERID (several did not use
        it anyway!) are
        LWPLA   TVHUI   TVPL    TVRGB   IBLED   IMLHS   SPFLG   TVFLG
        TVHLD   WIPER
        Q tasks had USERID dropped:
        BPASS   CPASS
        Moved nowhere.

12811.  February 27, 2009        CALIB, SNPLT             Eric
        Changed CLBPA to count up the occurrences of unblanked data
        for each antenna/IF/polarization.  Blanked data are then not
        counted as failed solutions either when the full solution
        fails or when it is just the individual antenna that "failed".
        Changed SNPLT to plot, when DOBLANK > 0, fully failed SN/CL
        table records.  Previously this option plotted the failures
        only when some solutions in the record were good.
        Moved nowhere.

12812.  February 27, 2009        Drop USERID              Eric
        Dropped USERID from $APGOOP tasks
        CCEDT   CCGAU   CCSEL   CL2HF   HF2SV   HFPRT   MBDLY
        POLSN   TBDIF   TBSUB   TBTSK
        Moved nowhere.

12813.  March 2, 2009            Drop USERID              Eric
        Dropped USERID from $APGNOT tasks - note that quite a few of
        these did not actually use the adverb that they pretended to
        support.
        ACFIT   BDEPO   BLWUP   BPSMO   CANPL   CCFND   CCMRG   DCONV
        GSTAR   IMFIT   JMFIT   LGEOM   LISTR   MATHS   MEDI    MFPRT
        MOMFT   MOMNT   OBEDT   PADIM   PGEOM   POLCO   PRTAN   PRTSD
        PRTUV   REGRD   RGBMP   RLDIF   RM      SHOUV   SKYVE   SLCOL
        SLICE   SMOTH   STARS   STFUN   STRAN   SUMSQ   TAMRG   TASRT
        TBIN    TBOUT   TXPL    UVFND   UVHIM   UVHOL   UVIMG   UVPRM
        UVPRT   UVSEN   WARP    XTRAN
        Moved nowhere.

12814.  March 2, 2009             CL2HF                  Eric
        The GNU compiler aborts optimizing this task.  Changed
        OPTIMIZE.LIS to add LNX64 to LINUX OS in downgrading this
        task.
        Moved nowhere.

12815.  March 3, 2009             UVMOD                  Eric
        Changed it to offer the option to read components from a text
        file, up to 9999 of them.  This will allow for more general
        models including all types and spectral index.
        Moved nowhere.

12816.  March 3, 2009            USERID                  Eric
        USERID remained erroneously in CCSEL and WIPER help files.
        Moved nowhere.

12817.  March 3, 2009            AVSPC                  Eric
        Plugged a hole in which a user could ask for AVOPTION 'SUBS'
        with CHANNEL > number of input channels.  This set the number
        of output channels to zero and proceeded along merrily.
        Fixed to go to mode ' ' with 1 output channel and a message.
        Moved nowhere.

12818.  March 4, 2009              IMAGR                 Eric
        Add IMAGRPRM(18) to limit the number of facets that will be
        imaged together when trying to find the next facet to Clean.
        The defaults which depend on work-file size, image size, max
        AP size (as estimate of RAM) may not be optimal and may cost
        rather than save time.
        Moved nowhere.

12819.  March 4, 2009             AN Table              Eric
        The AT table format is specified to have pol cal values
        dimensioned (Npcal, Nif).  Corrected DATV.INC and FITLD which
        reversed these subscripts.
        The AN table is specified to have pol cal also dimensioned
        (Npcal, Nif) where Npcal is always 2 (or 0).  Numerous tasks
        got this wrong and ANTINI requires the creating task to
        provide these values.  Fortunately, PCAL and friends fixed
        this bad dimensioning but it would be good to get it right.
        Changed call seq to OANINI in TABLEUTIL so that the pol cal
        will have the right dimension.
        FXPOL   fix to find max IF number out and force that into new
                AN table
        INDXR, LDGPS, OBTAB, DTSUM - use dummy variable for numif
        UVSIM   Change Npcal from 3 to 2, there is 1 IF
        UVFIL   Change Npcal from 3 to 2, there is 1 IF
        UVCON   Change Npcal from 3 to 2, there is 1 IF
        BSMOD   Change Npcal from 3 to 2, there is 1 IF
        SETAN   Pick up Nif from header, change Npcal from 4 to 2,
                change dimension from 3 to 2*Nif
        OTFBS   Change Npcal from 3 to 2, there is 1 IF
        OTFUV   Change Npcal from 3 to 2, there is 1 IF
        SDTUV   Change Npcal from 1 to 2, pick up NUMIF to set correct
                pcal column dimensions
        IM2UV   Fix col dimension from 3 to 2, Npcal already 2
        UVLOD   In DUMPAN and ANTREC, simply set Npcal 2, Nif 2 for AN
                file (VLA-only formats), in ANTAB and UVFEXT do better
                with picking up NIF and setting Npcal to 2 etc
        FITLD   Pick up NIF and use it in setting up ANTINI calls.
        VLBIN   Pick up NIF and use it in setting up ANTINI call.
        SPLIT   Zero the polcal values in the output antenna, using
                the correct column dimension, not 2
        SPLAT   as SPLIT.
        Moved nowhere.

12820.  March 11, 2009               DFTPL                Eric
        Changed the time averaging to include up to but not
        T1 + BPARM(2).  Added some hints to the help file.
        Moved nowhere.

12821.  March 11, 2009              LWPLA                 Eric
        Two places did a draw of a full image background - on an init
        line when a background is requested and on an init color
        grey-scale when no background is requested.  Both used the
        coordinates of the bounding box, but only the first one came
        ahead of the scaling command.  Fixed the second to scale the
        bounding box so that it would make a full area box.
        Moved nowhere.

12822.  March 12, 2009             XBASL                  Eric
        The task had no defaults for BOX and so never found any valid
        pixels to allow for a fit.  It also did not set a subscript
        when not writing images of the fit parameters, causing an
        address to get trashed and an abort.  Fixed these and made the
        setting of fitting windows friendlier.  Added some EXPLAIN to
        the help file and clarifications about NBOXES and BOX.
        Moved nowhere.

12823.  March 19, 2009             UVCON                  Leonia
        The sign of W term contribution to the phase has been changed
        to match with the UVMOD and IMAGR.
        Moved nowhere.

12824.  March 26, 2009             VLANT                  Eric
        Persistent reports of aborts on MACINT laptops running the
        latest operating system have been received.  We have been
        unable to replicate this on any of our Macs including a laptop
        run from home.  But changed OPTIMIZE.LIS to compile VLANT with
        no optimization on MACINTs to see if that helps.
        Moved nowhere.

12825.  March 27, 2009          UVLOD, FITLD              Eric
        Changed DFUV and VFUV includes to add SORTORD as a synonym for
        SORTORDR and adjusted the code in UVLOD and the UVLOD section
        of FITLD for the option.
        Moved nowhere.

12826.  April 1-2, 2009             OFMs                   Eric
        The files in $AIPSOFM having various OFM coloring schemes
        needed to be updated for the new depth of a plane (0-2045)
        from the old depth (0-255).  Did this with AIPS itself on some
        and with a stand alone program for others.  Fixed those with
        abrupt changes by hand also.  Put them back as *.000 to allow
        31DEC07 to read the old ones.  Changed OFMDIR and OFMGET to
        handle the new names and possible format revisions for the
        larger intensity numbers which can go to 16*2046-1.
        New OFMs are CIRCLE and CIRCLE2 and GREY100W.
        Reworked OFMS are:
        BLACK     BPHLAME   BPPHLAME  COLOUR16  COLOUR8   COLWED16
        COLWED8   COMB2152  DEMO3     EYEBW     FOTOBW    GCPHLAME
        GREY01W   GREY02W   GREY04A   GREY04B   GREY04C   GREY04D
        GREY04W   GREY08A   GREY08B   GREY08C   GREY08W   GREY128W
        GREY16A   GREY16B   GREY16W   GREY256   GREY32A   GREY32W
        GREY64W   GREYLOGA  GREYLOGB  GREYLOGC  GREYLOGD  GYPHLAME
        RAINBOW   ROB1      ROB2      ROB3      ROB4      RPPHLAME
        RYPHLAME  STEP10    STEP64    STEP8     STEPS8    WHITE
        ZERO
        Moved to patch this date.

12827.  April 6, 2009              UVCOP                  Eric
        Doubled the max number of flags applying to one time to
        120000.
        Moved nowhere.

12828.  April 8, 2009           SPFLG, TVFLG             Eric
        Subtle errors can arise when making the master grid which
        cause time-averaged displays to omit data.  The source number
        may not appear in the master grid if the planes gridded in
        that pass through the data had no valid samples at the time of
        the row even though other passes did have valid samples.  This
        is rather more likely in SPFLG than TVFLG.  Changed SPFLG and
        TVFLG to pass the array of source numbers which are known to
        the grid subroutines GRIDTB and GRIDTC (latter in SPFLG) which
        then pass them to GTBWRT.  Changed UVIMG to provide an array
        for source numbers and call GRIDTB with the new call sequence
        although in that case they get filled with -1 as before.
        Changed limits from 16384 times to 32768 times.
        Moved nowhere.

12829.  April 10, 2009            LISTR                   Eric
        Made displays subtly nicer:
        1. Help file to document phase self-scale better (DPARM(7)),
           add DPARM(8) to LIST each baseline twice, document new
           usage of ANTENNAS/BASELINE where non-existent telescopes
           are not included.
        2. Fortran: add subroutine GETANS replacing GETNAN to get list
           of those antennas used in the SUBARRAY (incl subarray 0 for
           GAIN) and max antenna number.  GETANS includes only antenna
           numbers that occur in the antenna file(s) and only if their
           names are not blank and do not include the string OUT.
           Only antenna numbers returned by GETANS are displayed even
           if others occur in adverbs ANTENNAS or BASELINE.
        3. Changed format of column titles to I2.2 for antenna numbers
           and made titles align with right hand edge of columns.
        4. Added decimal places to header scaling display which could
           say 1000 = 0.000 Jy with a wide enough format.
        5. Fixed column listing to admit that a baseline could occur
           twice on the same page.  This was allowed rather generally
           in LIST previously and now is controlled by DPARM(8).
        6. Fixed gain header display to account for self-scaling in
           phase.
        7. Dropped odd difference in spacing for DOCRT true in gain
           displays that forced interactive gain displays to use > 1
           pass.
        Moved nowhere.

12830.  April 10, 2009            FITLD                    Eric
        A pointer that was not reinitialized caused the image header
        to be copied from a saved header when creating a UV file from
        a FITAB-written tape on the 2nd and later data sets being
        loaded in a single execution of FITLD.  Init the pointer in
        the right place.  I think the only really bad result of this
        was the loss of the prior name and sort order information.
        Moved nowhere.

12831.  April 11, 2009            CMODEL                  Eric
        Changed handling of CMODEL, adding it to a number of tasks.
        SETGDS   Changed to suppress CC error messages if input
                 MODEL=0 and return no error code in that case while
                 setting MODEL=2 for image.
        FACSET   Remove messages about type of image except when
                 normal Clean or dirty.
        CALIB    Change messages before first FACSET call and made
                 default MODEL = 0.
        LPCAL    Add CMETHOD and CMODEL with now normal defaults.
                 Modified help re CPARM(2).
        PCAL     Add CMETHOD and CMODEL with now normal defaults.
        UVCON    Changed default to 0 for MODEL, added messages.
        UVSUB    Changed default to 0 for MODEL, added messages.
        Following tasks: added adverb CMODEL with default 0 to allow
        either type (CC preferred).  Add messages about model type
        ahead of first FACSET call.
        BLCAL   BPASS   CPASS   FRING   KRING
        The plot tasks CLPLT, IBLED, and VPLOT use CCs only and UVADC
        is also geared solely for CC models.
        Moved nowhere.

12832.  April 21-22, 2009              IMAGR                  Eric
        Found error in QCLEAN with FORCE A FIELD option that caused
        all images to be remade rather than just the requested one.
        Found error that caused scratch disk files to be way too large
        for gridded subtraction with DO3D false.  Added FFTIM to
        GRDSET to set size directly from image for FFTIM false and to
        use IMSIZ which uses the reference pixel too for images.
        Changed GRDSUB for this call seq change.
        Moved to patch April 22.

12833.  April 25, 2009             Imaging                 Eric
        Leonia figured out a different mathematical approach to
        multiple facets that allow the facets to be computed all on
        the tangent plane at the UV phase stoping point.  This is
        about like our old DO3DIM false, except that the samples are
        gridded at corrected values of u and v, with the correction
        depending on w and the direction cosines to the center of the
        facet.  I have installed this as an improved DO3D false.  This
        means that u,v depend on facet which makes the assumptions in
        UVGRID and UVGRTB incorrect.  Removed from the system: MX and
        HORUS (leaving both help files to point at IMAGR and to
        continue to provide their EXPLAIN information).  Aldo dropped
        subroutines  OLDMAP, UVGRID, UVGRTB, GRIDUV, UBTBGD, and
        ALGSUB all of which had trouble with the 3D concepts which are
        now in DO3D false as well.  Other changes made:
        IMAGR      Dropped forcing DO3D when multi-scale and/or > 64
                   facets.  Number of beams always same as number
                   facets.  Changed to compute max U and V via matrix
                   for both values of DO3D with false calling P2DMAT.
                   Added adverb ONEBEAM to select a single beam for
                   multiple facets (per resolution).
        IMAGR      Help: added ONEBEAM, changed discussion of
                   OVERLAP, mention more accurate DO3DIM false.
        P2DMAT     New subroutine, computes L and M of facet center
                   and makes appropriate UMAT to get shifted U,V,W
                   from input U,V,W.  PMAT return = identity matrix
                   Added rotation to both.
        PRJMAT     Fixed RFILL call to DFILL.
        CLEAN      Get NUMRES and ONEBEAM so as to make only necessary
                   beams
        QCLEAN     Add object IMAGE(1) keyword ONEBEAM - make one
                   facet at a time vs all facets at once depend on it
                   and the choice of which beam in the beam histogram
                   and beam to AP load routines.
                   (note need to do beams 1, 1+nfield, 1+2*nfield, etc
                   for multiple resolutions).
        QUVUTIL    Add object IMAGE(1) keyword ONEBEAM and set number
                   of beams and pointer to beam number accordingly
                   (note need to do beams 1, 1+nfield, 1+2*nfield, etc
                   for multiple resolutions).
        SETGDS     Call P2DMAT if DO3D false - loop to redo UMATS
                   computation if DO3DIM ends up not the same as on
                   the first time through and UMATS needed.
                   Use subimage sizing code only on input model 3.
                   Subimage code never chosen even when CCs missing.
        SETDO3     As SETGDS.
        UVPROT     Do proj multiply in all cases, drop DO3DIM from
                   call sequence
        DGDS.INC   Put parameter ONEBEM in also - use in MAKMAP
        MAKMAP     Drop call to GRIDUV, use only GR3DUV
        GRDMEM     add call to P2DMAT to make non-3D UMAT instead of
                   simple identity matrix, use PMAT to rotate x,y,z
        GR3DUV     add call to P2DMAT on non 3D and use UMAT on all 3D
                   to adjust u,v, use PMAT to rotate x,y,z
        GRDSUB     Changed call seq adding MODEL, dropped ALGSUB
                   possibility, changed call seq to GRDSET and FFTIM
        GRDSET     Change call seq again, passing MODEL and using
                   model 3 to call IMGSIZ
        ALGMEM     Do matrix multiply on uvw always, with P2DMAT for
                   non-3D
        ALGSTB     Change UVPROT call seq, do matrix always using
                   P2DMAT for non-3D, save u,v,w in local array and
                   restore from that rather than from re-rotating
                   which introduces numerical issues.
        FACSET     Allow model 3 == model 2
        UVMSUB     New call seq GRDSUB
        FFTIM      Add MODEL to call, model 3 calls SUBGET, else
                   PLNGET.
        VISDFT     Do matrix multiply on uvw always, with P2DMAT for
                   non-3D
        VSCDFT     As VISDFT
        VSFDFT     As VISDFT
        UVCON      Fix local VISDFT as general one.
        SCIMG      Add ONEBEAM adverb, replace the DO3DIM use with
                   ONEBEM.
        MX         Inputs/Help file cleaned out with explanatory text,
                   but EXPLAIN left.
        HORUS      Inputs/Help file cleaned out with explanatory text,
                   but EXPLAIN left.
        UVSUB      Incl help, changed CMODEL code: 'SUBI' => model 3
        POPSDAT    New adverb ONEBEAM
        NEWPARMS   New adverb ONEBEAM
        ONEBEAM    New help file
        DO3DIMAG   Change help file
        Moved nowhere.

12834.  April 26, 2009         Additional imaging             Eric
        Changed:
        CLEAN    Fix handling of NUMRES which is an optional keyword.
        IMAGR    Beam size when one beam should start at MAXNX/NY
        SCIMG    Be more careful about user's IMSIZE.  Pass CLEANO
                 down to local SCUV2S to get shifts from CLEANO and
                 then use them as IMAGR does to find max u,v (omits
                 points that fall of the grid for any facet).
        Tasks that use CMODEL: BLCAL, BPASS, CALIB, CPASS, FRING,
        KRING, LPCAL, PCAL, and UVSUB.
        Moved nowhere.

12835.  April 27, 2009             DBCON                  Eric
        Changed KEYCOP call to KEYPCP to block MAXBLINE and MAXABSU
        keywords from being copied into the output data set.
        Moved to patch this date.

12836.  April 29, 2009           CALIB.HLP                Amy
        Added section on how to get and use flux calibrator models.
        Moved to patch this date.

12837.  April 30, 2009               MCUBE                Eric
        Put images on output if the expected plane matches the
        computed plane but issue a message unless they are within 0.02
        pixel of an integer - was 0.2 which is way too far off.
        Moved nowhere.

12838.  May 2, 2009           TV roam                   Eric
        The TVROAM function leads to problems with the TV display.
        Some functions can handled a roamed screen (split and
        scrolled) and many cannot.  Added protection against the bad
        things that the latter encounter/cause while adding a verb
        that will allow the "final" roamed image to be captured as a
        simple TV image instead.  Corrected the others to handle
        scrolled images and where possible roamed ones.  Changed:
        POPSDAT.HLP   Add ROAMOFF verb, delete OFFROAM procedure
        NEWPARMS.001  Add ROAMOFF verb
        GRPOLY        Work in presence of scroll (graphics to scroll
                      like grey scale and allow scroll correction,
                      plus special tricking of YCUCOR)
        GRBOXS        Work in presence of scroll
        GRBOXD        Work in presence of scroll
        GRSLIC        Work in presence of scroll
        TVFIND        Test for different images on in different
                      quadrants and return error.  Suggest ROAMOFF if
                      it appears to be roam mode.  This will block all
                      the verbs/tasks that do not work correctly on a
                      roam-state TV.
        AU5A          Wrote new verb ROAMOFF.  Corrected TVROAM
                      handling of 1xN and Nx1 roams - used bad
                      windows - and changed it to zero the image
                      planes before writing.  Block TVLOD on
                      roamed-state TV.
        YSCROL        $YSS: Commented out desirable code and put in
                      code that recognizes that XAS has only 1
                      scroll.
        XAS.SHR       Changed screen.c to use upleft_x,y[0] for the
                      window corners (zoom/scroll) commenting out the
                      attempt which cannot work of allowing separate
                      scrolls for separate channels (now no longer
                      used except in TVSCROL.
        TVROAM.HLP    Adjusted description of what works, mention
                      ROAMOFF
        REROAM.HLP    Altered
        TVSCROL.HLP   Add info about XAS does all together
        ROAMOFF.HLP   New modest help file.
        OERROR        Added TV ROAM MODE error number 77.
        AU6E          Test TVLIMG and quit with 77 all opcodes.
        AU6D          Test TVLIMG and quit with 77 on TVSTAT
        AU6C          Test TVLIMG and quit with 77 on TVFIDDLE
        AU6A          Test TVLIMG and quit with 77 on all but TVTRA,
                      OFFTR, GRBLINK
        AU6           Test TVLIMG and quit with 77 on all but TVPS,
                      TVPHLAME
        AU5E          Test TVLIMG and scroll and quit with 77 on those
                      that use the graphics
        AU5           Block TVON, TV3COLOR with error 77, code to find
                      TVNAME when roamed
        OFMGAM        Shift lettering by TVSCRX/Y for scroll.
        IENHNS        Shift lettering for scroll - watch edge trouble
        TVALUE        Shift lettering for scroll - watch edge
                      trouble.  Dealt also with odd problem that had
                      XAS thinking graphics channel 2 went off when it
                      should not have done so - happened only in
                      roamed images.
        Moved nowhere.

12839.  May 5, 2009         CLCOR, RLDIF                  Eric
        Changed
        CLCOR      Fortran to allow OPCODE='POLR' when no valid PCAL
                   solution is found in the AN file.
        CLCOR      Help to describe the POLR and PHAS opcodes more
                   correctly - both can do a range of 20 IFs.
        RLDIF      Changed to average spectral channels before
                   averaging into the main arrays.  Adjust sigma of
                   vector average of matrix halves by square root of
                   the number of baselines contributing to the
                   average.
        RLDIF      Help changed to drop adverbs not used from the help
                   and to mention RLCOR along with CLCOR.
        PCAL       Added CPARM(2) > 0 to have the source models in the
                   SU table updated.  This was done always by PCAL and
                   never by LPCAL.
        RLCOR      NEW TASK: applies the POLR correction directly to a
                   uv data set (either single- or multi-source)
        Moved nowhere.

12840.  May 5, 2009            DO3D false              Eric
        A Taylor expansion of the terms in Leonia's math used for DO3D
        false has given a correction to the fomulae already
        implemented - a division by sqrt (1-L^2-M^2).  Changed P2DMAT
        and relinked everything.
        Moved nowhere.

12841.  May 6, 2009             image models             Eric
        Both SETGDS and SETDO3 try to force UVPROT to do its thing at
        least once - but both assumed that MAXABSU in the header was
        always positive.  Bad things happened when it was not.  Fixed
        to put -abs(maxabsu) back in header to do this forcing.
        Moved nowhere.

12842.  May 7, 2009               FRING                   Eric
        Changed the FRNSRC error message which used to correctly say
        that there was not enough memory.  Now the limitation is in
        how large an FFT we are willing to do (currently 32768).
        Changed the limit to use MAXIMG parameter which reflects the
        FFT limit and fixed a work buffer to also use MAXIMG for
        sizing and in the error tests.
        Moved nowhere.

12843.  May 8, 2009              FITLD                   Eric
        The attempt to allow DOCONCAT > 0 for normal UV binary tables
        from FITAB was doomed to failure.  At the point where the
        concatenation must be determined, nothing is now known about
        the structure of the UV data (e.g. number polarizations,
        spectral channels, IFs, random parameters, etc).  This the
        concatenation cannot be accepted.  Fixed the help file to say
        that DOCONCAT applies only to FITS-IDI binary tables from the
        VLBA correlator and fixed the code that attempted to allow
        binary tables to concatenate.  Note that this used to work
        when FITAB filled the main header with info about the uv data.
        Now that that was deemed inadvisable for moderately good
        reasons, it no longer works.
        Moved nowhere.

12844.  May 14, 2009            PRTAN                     Eric
        PRTAN confused the maximum row number in the AN table with the
        maximum antenna number and on occasion the row number with the
        antenna number.  Also fixed it to handle flagged rows in an AN
        table.
        Moved nowhere.

12845.  May 14, 2009                 BPASET               Eric
        Correct missing +1 in a test for valid sums - invalid ones
        would always be caught anyway - so this correction is just a
        nicety.
        Moved nowhere.

12846.  May 15, 2009              IMAGR                  Eric
        The restoration of CCs from one image to other overlapped ones
        uses the pseudo AP memory directly.  A test for whether it fit
        check against the size in kilowords ratther than words - a
        mere 87000 overlapped components would cause it to do bad
        things when in fact it should have been 87 million CCs.
        Fixed QCLEAN
        Moved to patch May 18.

12847.  May 18, 2009               SABOX                  Eric
        NEW TASK: finds Clean boxes from a collection of facet
        images.  It uses SAD's island discovery routines and then
        outputs rectangular and/or circular boxes encompassing them.
        A single flux cutoff = APARM(1) * rms(i) is used in each facet
        i; the rms is found from the header or from a robust
        computation using the image values.
        Moved nowhere.

12848.  May 20, 2009              VPLOT                   Leonia
        VPLOT has had an option to report the max/min value inside
        of the time averaging interval (SOLINT). This option provides
        the vertical lines near the average point with bottom/top
        edge corresonded to min/max of averaged points.
        This option may be very useful as a diagnostic of possible
        errors.  Unfortunately this option has not worked for a long
        time (or never).  So I returned this option to the life.
        Moved nowhere.

12849.  May 22, 2009             VPLOT                    Leonia
        1. The option plotting min/max (see the previos change) does not
           work at the case of the self scaling if the phase is plotted.
           Fixed!
        2. The symbol used to plot the data is forced to '+' if min/max
           is plotted.
        Moved nowhere.

12850.  May 22, 2009        AIPS Memo 113                 Eric
        Put back the new memo on Faceted imaging in AIPS by Leonia and
        myself and noted it on the web pages.
        Moved nowhere.

12851.  May 22, 2009           OOP TV device               Eric
        1. Discovered that the OOP TV device routines made allowance
           for only 8 TV channels.  Changed dimension to 16 in
           TVDEVICE, TVUTIL, QCLEAN, QEDIUTIL, SCIMG, SCMAP, PLAYR.
        2. PLAYR: dimensioned the Clean boxes wrongly, causing an
           abort.  They need to be 4*nfield, maxboxes.
        3. SABOX:  reordered adverbs a little, added APARM(7) to limit
           the size of boxes to stop 1-pixel ones normally unless very
           strong.
        4. TVDEVICE: new routines TVDCAT to read/write image catalog,
           TVDROM to do roaming on already loaded images.  Changed
           order of routines to alphabetical, TVDFUN to apply CHANS
           for FIDD with default those that are on (as done already
           for TRAN).
        5. TVUTIL: New routines OTVROM to do a load and roam, OTVRRM
           to do a re-roam on already loaded, OTVROF to do a roam-off
           screen capture.  Changed OTVFID to set CHANS properly,
           OTVBOX to pick up print level for GRBOXS.
        6. GRBOXS, GRBOXD, DRBOXS, LMBOXS: Change to have an X and Y
           radius for circular boxes.  This allows TXINC and TYINC to
           be different while ending up with circles in actual image
           pixels.
        Moved nowhere.

12852.  May 22, 2009              FILIT                    Eric
        New task: allows FILEBOX and DFILEBOX (effectively) on a
        collection of facet images including allowing for images that
        are larger than the TV screen.  The user roams in each and
        then a roam-off operation captures the current display for
        rebox and delbox.  A re-roam allows the rest of the image to
        be processed as well.  A TV menu allows selection of previous
        or next facet and the usual zoo of enhancement and curvalue
        functions.
        Moved nowhere.

12853.  May 27, 2009            FLATN                   Eric
        Changed INTWIN in INTERPLATE.FOR to return the blc/trc of the
        input image as well as the location in the output image.
        Then changed FLATN to impose a weight of 0.0001 outside the
        inscribed ellipse in the input image.  Fixed the WEIGHTIT
        option to work from the center of the image not the reference
        pixel (which could be way outside if DO3D false).  Changed how
        EDGSKP is used to inhibit the inscribed circle if desired.
        Moved nowhere.

12854.  May 27, 2009           NMAPS help files         Eric
        Added comments about modeling with multi-scale images to the
        help files of BLCAL, BLING, BPASS, CALIB, CLPLT, CPASS, FRING,
        IBLED, KRING, LPCAL, OOSUB, PCAL, UVADC, UVSUB, VPLOT.
        UVCON should have these too but it is checked out now.
        Moved nowhere.

12855.  May 27, 2009           UVCON                    Leonia
        UVCON has supported simulation of even distributed frequencies.
        Now I have added simulation of group (IFs) frequencies
        located not necessary even. CPARM deliveres number of groups(IFs)
        and set of begin frequencies of the groups.
        APARM(8,9) delivers increment inside of the group and number of
        frequencies inside of the groups.
        Moved nowhere.

12856.  June 4, 2009           UVCON                    Leonia
        The limit of number of antennas has been increased up to 5000.
        Moved nowhere.

12857.  June 7, 2009           CLCOR                    Leonia
        Add the new OPCODE='IONO' to correct the delay at inosphere.
        This opcode is similar to 'ATMO' (correction for atmosphere),
        but has 2 differences:
        1. opposite sign of the phase-delay correction;
        2. different mapping function, because the ionosphere
           is located at the 'narrow' ring at the high height.
        The new opcode was ordered by Mark Read.
        Moved nowhere.

12858.  June 9, 2009          CLCOR                     Leonia
        The change of the phase sign was forgotten (for STOK=1)
        at last modification of CLCOR.
        Moved nowhere.

12859.  June 9, 2009          CLCOR                     Leonia
        The logic of calculation of DPDLAT for IONO has been wrong.
        Moved nowhere.

12860.  June 14, 2009           IMAGR                     Eric
        Created a new option to generate Clean boxes automagically.
        Changed:
        POPSDAT   To make new array IM2PARM(40)
        NEWPARMS  Ditto
        GRBOXS    To take ellipses as BLC(1,2) < 0 = radii in x,y
        TVUTIL    To pass the inscribed circle as an ellipse to TVDBOX
                  when the image size is not equal on x and y.
        WRIBOX    To write out facets with no boxes as # 0 0 0 0.
        IMAGR     HELP: add IM2PARM and describe the use of parms 1
                  through 6 for the autoboxing.  Fixed GRCHAN info and
                  upgraded the multi-scale explain with paper
                  reference and discussion of IMAGRPRM(11).
        IMAGR     FOR: add IM2PARM, set the defaults for parms(1-6)
                  and pass on as AUTOBOX.  Fix GRCHAN = 1, 2, or 3 to
                  5 for outlining the inscribed ellipse (1, 2, and 3
                  are erased by the other graphics - menu, label, and
                  Clean boxes, resp.).
        QCLEAN    Pick up AUTOBOX incl with TELL, find max in the
                  inscribed ellipse in each facet when autoboxing and
                  use it when the max in Clean boxes is small or
                  zero.  These ellipse maxima are set to zero when the
                  overall rms in the ellipses gets small enough that
                  the autobox is unlikely to add boxes - otherwise it
                  would keep trying for a facet that would never get a
                  box incompasssing its current non-boxed maximum.
                  Call CLABOX everywhere that CLNTV is called with the
                  same choice of fields.  In OVERLAP 2, change to all
                  fields every 30 major cycles - otherwise facets
                  would never get boxes even though they had sources
                  unless those sources were really strong.  Add
                  subroutines CLABOX, CLABXW, ISLAND, ADDPK, MERGPK to
                  do the island finding and fitting much like SABOX.
                  Corrected error: the CLRMAX routine used VERY
                  STRANGE windows to find the max/min that were way
                  outside the Clean boxes they were supposed to be
                  checking.
        Moved nowhere.

12861.  June 15, 2009              IMAGR                  Eric
        QCLEAN:  A TVSTAT array needed to be (16) now - FORCE SDI
                 CLEAN caused it to be filled and overwrite the
                 TVNAME.
        IMAGRPRM: Help file needed updating.
        IM2PARM:  Help file needed creating.
        Moved nowhere.

12862.  June 16, 2009             SNFLG                   Eric
        One array was not big enough to include a double word - this
        caused the number of keywords to be overwritten on the 64-bit
        Linux Intel load modules and led to an abort.  Made the array
        bigger.
        Moved nowhere.

12863.  June 16, 2009             IMAGR                   Eric
        IMAGR    Fortran: changed the default number of Clean boxes
                 (FLDSIZE) to 0 if auto-boxing is selected.
        QUVUTIL  Raise the needed memory returned by GRDFIT by 10
                 kwords - previously it truncated that needed value so
                 that the QINIT call did not get enough and a sort was
                 almost always "needed".
        QCLEAN   Raise the return requested size from GRDFIT by 5 %
                 and try a second time to avoid a sort.  Add another
                 round of trial as well before resorting to sorting.
                 Made necessary by the fact that the AP is used for
                 data too and so with long records may need more if
                 the AP is bigger.  Also fixed the auto-boxing so that
                 if the number of islands found is close to the limit
                 it raises the island selection level and tries again
                 up to 4 times.  Otherwise it was finding islands only
                 in the lower portion of the image and that did not
                 meet the island peak versus peak residual criterion.
        TVROAM   Help file: comment at start still said 4 planes - it
                 is now up to 16
        IMAGR    Help file: limit on autoboxes now 50.  Default Clean
                 box now a null box when auto-boxing is selected.
        IM2PARM  Help file: limit on autoboxes now 50 per cycle.
        Moved nowhere.

12864.  June 17, 2009              FRING                 Eric
        The routine that figured out the frequency increment and
        checked for regularity was very confused.  It asserted that
        all frequenciies are greater tha FREQS(1) but that other
        frequencies FREQS(M)-FREQS(n) with M > N might have either
        sign!  That would be a problem I suspect and the first
        statement is not true.  Fixed the routine to get the abs value
        of the frequency increment and then fix the sign at the end.
        Later places in the code assume that FREQS(M)-FREQS(N) has the
        same sign as DF.  Fixed the default delay search which used
        the frequency increment to use the abs value of the increment.
        Delay search range < 0 => no delay search.
        Moved nowhere.

12865.  June 20, 2009              PRTAN                Eric
        Added code to find casa's EVLA array station names and convert
        to the ones AIPS is used to.  This allows printing of the
        Y-shaped map of antennas.
        Moved nowhere.

12866.  June 20, 2009               SABOX               Eric
        Raised maximum number islands to 50000.
        Moved nowhere.

12867.  June 20, 2009          FLAGR, FINDR             Eric
        Changed max number of sources to 5000 from 100.
        Moved nowhere.

12868.  June 23, 2009              IMERG                Eric
        Fixed a typo in the history routine that caused it to report
        the name of the low res image as that of the high-res image.
        Class, seq, etc were correct in the report.  The code and the
        history file were okay.
        Moved nowhere.

12869.  June 23, 2009              SPCAL                 Eric
        Messed up the creation of a scratch AN table to update and so
        in the end deleted the highest AN table which in many cases
        would be the only AN table.
        Moved nowhere.

12870.  June 23, 2009               IMAGR                Eric
        QCLEAN did not realize that the low level ISLAND finder could
        return an island as at (0,0,0,0) meaning it was deleted from
        the list.  As a consequence it accessed IMAGR(0,0) which is an
        addressing exception with dynamic memory.  Added test to skip
        such islands.
        Moved nowhere.

12871.  June 24, 2009             SABOX                 Eric
        The ISLAND subroutine occasionally returns nulled out windows
        since they merged with another window.  Fixed the code
        following ISLAND to test for and skip such windows.
        Moved nowhere.

12872.  June 24, 2009             IMAGR                 Eric
        Fixed QCLEAN to do AUTOBX defaults correctly in TELL.  Changed
        IMAGR to allow shrinking of windows by no more than 1 pixel.
        Fixed IMAGR and IM2PARM help files to show the shrinking
        (expansion by -1 and if < -1 -> +1 for IM2PARM(5)).
        Also fixed a gotcha in the autoboxing in which a tiny island
        would not be erased from the list of possible boxes and so no
        weaker but larger islands would be included.
        Moved nowhere.

12873.  June 25, 2009        AIPS MEMO 114                Eric
        Put back aips memo 114 on FITS-IDI.  Put both color and black
        and white versions of the PDF and PS files.
        Moved nowhere.

12874.  June 25, 2009          FILIT                     Eric
        Add IM2PARM adverb, AUTOBOX, AUTOBOX PARMS, and RESET BOXES
        operations.  The auto-box is similar to that in IMAGR except
        that the "residual" image is the full image with pixels
        outside the inscribed circle and all current boxes blanked
        out.  So the "peak residual" equivalent is the peak value not
        currently in a box.  Added to HLPFILIT as well as HELP and
        Fortran.  Re-ordered the menu to separate EXIT from the more
        commonly used menu items.  Changed limits to allow up to 200
        boxes per execution of autobox and to allow IM2PARM(6)=-1 to
        mean no inscribed ellipse.
        TVUTIL was changed to make a "draw boxes and return" option
        not tied to drawing the inscribed circle.  The BOXONLY keyword
        controls this and is used by FILIT when boxes are updated by
        the RESET BOXES or the AUTOBOX function.
        TVMENU was changed to deal with blank menu items properly.
        Moved nowhere.

12875.  June 25, 2009            IMAGR                     Eric
        Changed the filtering option so that the Clean is restarted
        after the "final" filtering only if IMAGRPRM(9) < 0.  The
        absolute value of IMAGRPRM(9) is used as the radius.
        Changed IMAGR.HLP, IMAGRPRM.HLP, IMAGR.FOR, QCLEAN.FOR.
        The CLNTEL, CLNUV1, and CLNUV2 routines needed the new
        option.  In OVERLAP < 2 but ONEBEAM false, the forced Clean
        resumption could cause a complete meltdow in the residual
        images had no pixels strong enough to Clean.  Changed CLRHIS
        to set FINISH and CLNUV1 to trap returns of -1 and -2 as
        normal exit requests.
        Moved nowhere.

12876.  June 26, 2009            WIPER                   Eric
        Changed menu shape to put ABORT and EXIT above all others
        items with a blank in between.  This should reduce inadvertent
        ABORTs and EXITs.  Fixed the scaling of the numbers shown
        (CURVALUE equivalent) during flagging.  Wrote
        $APLSUB/REMETS.FOR to convert metric scaling prefixes into
        scaling multipliers to enable this.
        Moved nowhere.

12877.  June 26, 2009          ISLAND.FOR                Eric
        Pulled the routines ISLAND, ADDPK, MERGPK from QCLEAN, SABOX,
        and FILIT to a new file $APLSUB/ISLAND.FOR.  The versions of
        these in SAD itself are rather different.
        Moved nowhere.

12878.  June 26, 2009           QEDIUTIL                 Eric
        Added a blank in each menu between ABORT and EXIT and the rest
        of the menu.  The top of column 1 is also often used so moving
        them to the top would not help with the accidental selection
        issue.  Affects EDITR, EDITA, SNEDT, SCMAP, SCIMG.
        Moved nowhere.

12879.  June 27, 2009          BPASS, BPLOT              Eric
        BPASS did not change the BP output table sort order even
        though it knows it to be 1,5 for a new table and knows that it
        is indeterminate on adding to an old table.  Fixed it to set
        both correct orders for output.
        BPLOT handled the default for EIF incorrectly.  When it was
        equal to BIF it was changed to the max.  That should have
        been, when it is less than BIF.  Added 0.5 character to
        separate the left hand axis text from the numbers.
        Moved nowhere.

12880.  June 29, 2009        AIPS Memo 115         Eric
        Put in memo on auto-boxing.
        Moved to web site this date.

12881.  June 29, 2009        AIPSLetter Jun30           Eric
        Put in AIPSLetter for June 30.
        Moved to web site this date.

12882.  June 29, 2009              UVFND                 Eric
        Added option to CLIP on phase using APARM(5-8).
        Moved nowhere.

12883.  June 30, 2009           EDITR                   Eric
        When requesting ONE ANTENNA to be flagged with FLAG BELOW and
        FLAG ABOVE, the flag commands were correctly interpreted by
        the displays, but not when the FC table was translated into
        the main FG table.  For those two OPs, the baseline involved
        was the only baseline flagged.  The change of 31-January to
        QEDIUTIL meant that the translation at this level had to
        change as well.
        Moved nowhere.

12884.  June 30, 2009              IMAGR                 Eric
        My fix of the forced filtering neglected to clear the error
        code and so led to a failure when all was in fact well.  Fixed
        QCLEAN.
        Moved nowhere.

12885.  July 1, 2009               IMAGR                  Eric
        Changed IMAGR.FOR and QUVUTIL.FOR to determine the rms time in
        a data set as well as the average.  The zenith and parallactic
        angle are written to the output images only if that rms < 15
        minutes or so.
        Moved nowhere.

12886.  July 1, 2009               CLPLT                  Eric
        Corrected the setup for PNTPLT which confused where the
        corners were for X and Y and so drew a diagonal line.  Added
        FACTOR to control the size of the plotted symbol.
        Moved nowhere.

12887.  July 3, 2009           CLPLT, VPLOT                Eric
        Changed subroutine $APLNOT BASLIN.FOR to take the antenna
        locations as an array and the number of such locations as an
        argument.  Changed VPLOT for this - it needs only 2 antennas
        and so dropped the subscripts on U, V, W to 2 (for 2 alternate
        descriptions) and all subscripts on other parameters.  Fixed
        the orbit routine in VPLOT to not loop from 1 to 1 and not
        have subscripts on U,V,W.  Fixed the sign of BY for non-vlbi
        modeling in CLPLT.  Changed CLPLT for BASLIN call seq.
        Changed CLPLT to plot models at the sampled U,V,W if NMAPS>0
        and at computed U,V,W if NMAPS<0.  Wrote Subroutine DEFRMT to
        remove all blanks from a string, replacing some special
        character with blanks if desired.  Changed VPLOT, CLPLT to use
        DEFRMT for the station name and number displays.
        Moved nowhere.

12888.  July 3, 2009             CAPLT                     Eric
        NEW TASK: plots closure amplitude with models like CLPLT but
        with 4 baselines: [(1-2) * (3-4)] / [(1-3) * (2-4)].
        Moved nowhere.

12889.  July 7, 2009            CLPLT, CAPLT              Eric
        Added the option (SOLINT < 0) to average the closure phases or
        amplitudes in time rather than the visibility data.  Removed
        the scalar averaging code that was never invoked and cleaned
        up CAPLT's help file - "phase" was mentioned several places
        rather than amplitude.
        Moved nowhere.

12890.  July 9, 2009           MCUBE, FQUBE                Eric
        FQUBE is a NEW TASK to build frquency cubes with an FQID axis.
        It can take a mix of planes and cubes or even hyper-cubes with
        FREQ or FQID axes.
        Changed MCUBE to write only the rows of the FQ table that are
        meaningful.  Changed MCUBE help to mention FQUBE.
        Moved nowhere.

12891.  July 10, 2009             UVMOD                  Eric
        The V polarization was put in backwards due to the sign
        swapping being done on polarization 1 rather than 2.
        Added option for INLIST to give polarizations for all
        components.  This means that it reads the INLIST file if it is
        not blank and NGAUSS>1.
        Moved nowhere.

12892.  July 10, 2009             IMAGR                  Eric
        IMAGR with auto-boxing turned on defaults to no Clean boxes at
        all.  There is then some trouble catching things gracefully if
        the auto-boxing doesn't make some boxes.  Changed.
        IMAGR   Tests on ONEBEAM did not take into account the case
                where NFIELD=1, causing the beam not to be made.
                Set ONEBEAM true when only 1 field.
        CLEAN   Tests on ONEBEAM did not take into account the case
                where NFIELD=1, causing the beam not to be made.
        QCLEAN  Added test and messages for OVERLAP=1 w ONEBEAM false
                to detect that no field was Cleaned and exit
                gracefully.  It checks if the reason is a lack of
                Clean boxes.  OVERLAP 2 closed down well but silently,
                so I added messages there too.  OVERLAP < 2 with
                ONEBEAM true closed gracefully anyway.
        Moved nowhere.

12893.  July 13, 2009             calibration           Eric
        DATCAL had a lazy bit of code that decided whether to do delay
        and rate cal based on the sum of the 4 delays and rates
        involved.  If they summed to zero, nothing was done although
        the individual values were non zero.  Changed to do delay-rate
        if any are non zero.
        Moved nowhere.

12894.  July 13, 2009               IMAGR               Eric
        QCLEAN had a gotcha waiting for the change where I forced
        ONEBEAM true when imaging 1 facet.  CLBSHV got called with
        facet 0 and did not make the beam # be 1.
        Added option: IM2PARM(7) to control whether channel N+1 begins
        with the boxes of channel N or only with the initial boxes set
        up via BOXFILE, CLBOX, etc.  The default is to pass them along
        when not auto-boxing (as before) but to reset them when
        auto-boxing.  You may choose either mode explicitly.
        Moved nowhere.

12895.  July 14, 2009            EVLA                    Eric
        The EVLA through the Widar correlator uses the Earth's center
        as the array center, the hour angles are measured from
        Greenwich, and the sign of the BY antenna location is
        reversed.  Changed:
        BPASET   Detect that EVLA array name is not the VLA and so the
                 BY sign is not changed
        PBUTIL   Make EVLA be a known array name for PBCAL call
                 ONLY APPROXIMATE AND SHOULD BE FIXED.
        PBCAL    Make EVLA equivalent to VLA for the moment - THIS IS
        ACCOR    Comment on BY sign that EVLA included with VLBI -
                 this seems not to be actually used.
        CLCOR    Test for EVLA array name and control CLCORPRM(4) and
                 (7) accordingly.
        CLCOR    help - update meaning of these parms
        DFCOR    Test for EVLA array name and control CLCORPRM(4) and
                 (7) accordingly - tests made better like in CLCOR.
        DFCOR    help - update with EVLA added
        HAFIX    Add EVLA as a VLBI like array and fix message usage.
        HAFIX    help - clarify array type
        PCCOR    Comment on BY sign that EVLA included with VLBI -
                 this seems not to be actually used.
        TI2HA    help - add warning about hour angles for EVLA being
                 wrt Greenwich rather than VLA site as before
        UVCRS    Comment on BY sign that EVLA included with VLBI -
                 the Y terms are used in this task.
        UVFIX    Add EVLA as a VLBI like array and fix message usage.
        UVFIX    help - clarify array type
        VLANT    Added test on ANAME with error quit if not VLA or
                 EVLA.  Change all data file names if EVLA from VLA to
                 EVLA.  Swap sign of BY corrections for phase and then
                 back for fixing the AN file.
        VLANT    help - emphasize for VLA and untested and unprepared
                 for EVLA.
        CVEL     Added EVLA test which makes VLA logical false.  The
                 BY phase change done only on VLA true.
        CVEL     Help - add comment EVLA is APARM(7) 0.
        VPLOT    Changed handling of DOARRAY - the user's value was
                 completely overridden.  Now it is zero if the array
                 center is at the center of the Earth except VLA and
                 ATCA where it is 1.  The user of merlin or other
                 arrays may set the correct value for his telescope.
                 This only matters for NMAPS < 0.
        VPLOT    Help - correct the DOARRAY explanation
        CAPLT    Help - correct BPARM(10) explanation (as VPLOT)
        CLPLT    Help - correct BPARM(10) explanation (as VPLOT)
        Moved nowhere.

12896.  July 15, 2009           MNJ                      Eric
        Increased the timeouts in the UPDRSYNC procedure to 8 minutes
        for SYSTEM and LIBR and 16 minutes for LOAD.
        Moved nowhere.

12897.  July 17, 2009              IMAGR                 Eric
        Changed QCLEAN in the relatively new process of finding the
        max pixel within the inscribed ellipse.  It was finding single
        pixels above a limit that were inadequate to produce an
        auto-box but enough to send the Clean to the facet in a near
        infinite loop.  Changed it to find the max of 2 consecutive
        pixels looking only within rows.  This parameter was zeroed
        when the max in any facet was < 1.5 * rms * IM@PARM(3).  The
        1.5 is not needed for protection against bright single pixels
        so was reduced to 1.05.  In CLNUV2, reset this max in the
        ellipse for the facet just Cleaned to 0 - it was re-imaging
        the just Cleaned facet and then finding that it did not want
        it almost always.  Now it re-images only for good reasons.
        Moved nowhere.

12898.  July 20, 2009                FILIT                  Eric
        Changed output routine to put a no-boxes box for facets
        that end up with no boxes.
        Moved nowhere.

12899.  July 20, 2009                AIPSC                  Eric
        The parameter checker on GO printed only the first 2
        characters of the offending adverb.  Corrected 5A2 to A in the
        format statement.
        Moved nowhere.

12900.  July 20, 2009              UVFLG                   Eric
        Added the option to flag antennas for shadowing and baselines
        for being too short.  It uses the existing BASLIN subroutine
        which is thought to be inaccurate but appears adequate for
        this purpose.
        Moved nowhere.

12901.  July 24, 2009            IMAGR                   Eric
        The formatting of box and facet numbers in the history file
        was I2!  Worked fine for small numbers of facets and boxes but
        not for larger numbers.  Fixed it to be adaptive to the size
        needed.
        Moved nowhere.

12902.  July 24, 2009             MODVF                  Eric
        Code did not allow for comments in INFILE, did not allow for
        fewer than 4 numbers in INFILE lines (zeroing the remainder),
        and did not initialize ERRNUM which for some reason was not
        zero in some Mac computers.  These oversights have been
        corrected.
        Moved nowhere.

12903.  July 24, 2009           GAL, others             Eric
        Changed GAL to initialize ERRNUM in parsing the input text
        file.  Changed OFMCON, TVPSUD, CONVL, PRTAC, DRCHK to drop the
        DERR.INC include that was never used.
        Moved nowhere.

12904.  July 24, 2009           ATLOD             Chris Phillips/Eric
        Chris has sent us the latest revision of ATLOD to load ATNF
        data into aips - called 5.3k.  I have put it in as a single
        Fortran routine plus Z routines ZATIO and ZATCVT.  I have put
        versions of those in $APLUNIX (really Linux byte swapped),
        $APLSOL (Solaris), and $APLMACPPP (solaris with tape removed).
        All needed some work to correct the worst non-standard
        problems including mis-aligned commons, function statements
        not recognized as such by the PP preprocessor, "type *"
        statements and the like.  The Fortran does not look like AIPS
        Fortran but we have to trust that it works.
        Moved nowhere.

12905.  July 25, 2009           FARS                    Leonia
        The new task FARS to serve the Faraday rotation synthesis.
        FARS read the two input image cubes.
        The first cube should correspond to the Q-linear polarization
        component.
        The second cube should correspond to the U-linear polarization
        component.
        The main purpose of the current release of the task is to get
        the Faraday rotation free (lambda=0) brightness and the Faraday
        depth of the media on the way from the source to the observer.
        The multi frequency observations  are required to get this purpose.
        The main ideas of the algorithm are  described by M.A.Brentjens
        and A.G.de Bruyn at:
        Astronomy&Astrophysics, 441, 1217-1228(2005).
        FARS carries out the Fourier transform along the frequency
        (lambda square) axis for each pixel at the image plane.
        This Fourier transform converts the observed complex brightness
        as a function of the lambda^2 to the output complex function of
        the Faraday depth. The real part of this output is recorded into
        the first output file and the imaginary part of this output is
        recorded in the second output file.
        The amplitude of this output or Rotation Measure Transfer Function
        (RMTF) can be recorded instead under control of input parameters.
        The eight parameters of the found maximum athe Fourier transform
        can be recorded at the output instead of the full Fourier transform.
        This option serves to the most typical case: one source and one
        rotating media.
        Moved nowhere.

12906.  July 26, 2009          install.pl                 Eric
        Changed SCREEN_1 - when it did not find a tarball it did not
        hop to SCREEN_1_RETRY which it should have done.  Rearranged a
        few } to have it do that.
        Moved to patch this date.

12907.  July 26, 2009          CAPLT                      Eric
        The code to manage a specified TRIANGLE was all messed up.
        Fixed it to test a labeling complaint.  Also fixed an
        incorrect INCLUDE in CLPLT.
        Moved nowhere.

12908.  July 27, 2009            ATLOD                    Eric
        Changed direct call to gmtime - a standard C function - issued
        from Fortran to a use of ZXDATE.  Dropped cvs lines from ATLOD
        and ZATIO and ZATCVT since they were causing out MNJ prep to
        update the files daily.
        Moved nowhere.

12909.  July 27, 2009           CLPLT, CAPLT              Eric
        Changed to trim the list of possible closure
        triangles/quadrangles to a list of actual ones.  Then the plot
        routines will know when the last plot is about to be done and
        enable the X-axis labeling.  Checks number plots per page and
        will do one less if that uses the same number of pages.
        Moved nowhere.

12910.  July 28, 2009              ATLOD                  Eric
        Appended the ZATIO and ZATCVT routines to ATLOD.FOR and
        removed them from $APLUNIX, A$APLSOL, and $APLMACPP.  Changed
        the ZATCVT individual routines to do the right thing depending
        on the BYTFLP parameter known inside aips.  Changed the I/O
        routines to drop the direct access Fortram I/O which breaks
        the Intel compilers and replace it with TAPIO which is
        portable.  However, TAPIO and $APLUNIX/ZTPMID had to be
        changed to allow 2560-byte records as well as 2880-byte
        records.
        Moved nowhere.

12911.  July 29, 2009             TVFLG                  Eric
        Fixed the declaration of the big buffer.  The IO buffers got
        bigger and so the buffer had to grow and the two ways it is
        used changed relative size.  Added an extra IO buffer for
        safety.  It was failing when more than 6 spectral channels
        were gridded.
        Moved nowhere.

12912.  July 30, 2009              CLINV                  Eric
        The call to KEYCOP used the wrong catalog number for the
        output file.
        Moved nowhere.

12913.  August 2, 2009             CALIB                  Eric
        Fixed SETGDS - it can loop a second time through the model
        catalog and did not fix the class name 3rd character back from
        1 when loop over 1000.  Fixed DMOD.INC which limited models to
        1000 rather than 4096 (should be mAXFLD).
        Moved nowhere.

12914.  August 3, 2009             BPASS                  Eric
        BPASS keeps a table of all entries in the BP table which is
        used to manage the writing and re-writing of the BP records.
        That table was limited to 2000.  Changed to 5000 which allows
        10 second averages for 12 hours.
        Moved nowhere.

12915.  August 4, 2009             CHKFC                  Eric
        The number of adverbs to GTPARM was wrong - led to abort on
        Solaris.
        Moved nowhere.

12916.  August 5, 2009            UVMOD                   Eric
        Fixed formats in history writing for spectral index.  The I4.3
        format for the component number was missing.
        Moved nowhere.

12917.  August 7, 2009        SPLIT, SPLAT                Eric
        Clean up on failure - clear status and delete empty UV file.
        Moved nowhere.

12918.  August 10, 2009           FARS                    Leonia
        The new version of FARS includes a simple version of CLEAN
        of the complex image to find a solution for multi complex
        components at the Faraday rotation spectrum. The relevant
        change of the help file is added.
        Moved nowhere.

12919.  August 10, 2009      SAD, IMFIT, JMFIT           Eric
        SAD applied the rotation to the position angle with the wrong
        sign in a number of places that end up in the MF table and
        in a display location also.  The latter arose only when the
        minor axis of the deconvolution was 0.0 (i.e. failed).  IMFIT
        and JMFIT had a similar issue but only for when the
        deconvolution failed fully.
        Moved nowhere.

12920.  August 11, 2009           UVMOD                  Eric
        Fixed the HI recording of widths to correct units and added
        FWHM to comments.
        Moved nowhere.

12921.  August 13, 2009         DISP, DDISP units          Eric
        Changed the units description of DISP and DDISP in CALINI,
        CMINI, IMINI, IMINIT, MCINI, CMTAB, IMTAB, MCTAB, TABCAL, and
        TABIM.  They are sec per meter squared and sec/sec per meter
        squared, rather than declaring them at some "fiducial"
        wavelength.
        Moved nowhere.

12922.  August 13, 2009            UVMOD                    Eric
        The HI file had the subscripts of ZEROSP in the old order and
        so displayed the peak values wrongly.
        Moved nowhere.

12923.  August 19, 2009            STUFFR                 Eric
        Changed procedure file to (1) force outname=inname still
        for the UBAVG step and (2) convert all variables to fully
        spelled out rather than min-match.  The former caused a
        failure in the last UVSRT when INNAME not equal OUTNAME.
        The latter was a time bomb waiting to go off when the
        current min-matches fail due to AIPS changes or to the users'
        own local procedures.
        Moved nowhere.

12924.  August 20, 2009         FREESPACE                Eric
        Charlottesville has purchased a disk so large that its size in
        kbytes overflows a 32-bit integer.  Changed ZFREE and 11
        versions of ZFRE2 (incl UNIX, SOL, MACPPC, MACINT) to use
        Mbytes instead and to round off the internal computations
        rather than truncate.
        Moved nowhere.

12925.  August 20, 2009           ZCREAT                 Eric
        Added call to ZFRE2 in ZCREAT to test the requested disk space
        before the time-consuming actual creation.  This should help
        with the very large files which are coming.
        Moved nowhere.

12926.  August 21, 2009        Autoboxing                Eric
        Changed the decision about whether a box should be a circle or
        a rectangle by adding the requirement that circles be fairly
        small.  Minimum diameters must be <= 8 pixels to become
        circles - large areas lose to much in the corners which may
        well contain needed emission.  Changed QCLEAN (IMAGR), SABOX,
        and FILIT.
        moved nowhere.

12927.  August 24, 2009         CONVL.HLP                Leonia
        Add 'IMAC' into the list of OPCODEs on the inputs page.
        moved nowhere.

12928.  August ??, 2009  Box overlapping: IMAGR, FILIT        Eric
        In OVERLAP<2 mode, IMAGR will over-Clean when two facets have
        a box on the same source.  Wrote two subroutines: BOXCHK to
        make a list of overlapping boxes and BOXFIX which will delete
        the smaller of the two overlapping boxes if > 1 fiducial point
        overlaps.  Fiducial points are the center and corners of
        rectangles and the center and points every 45 degrees around
        the circumference of circles.  Changed QCLEAN to call this
        routine when OVERLAP<2 and added it as an option to the TV
        menu to appear only for multi-facet images.  Changed also
        IMAGR and HLPCLEAN help files.  Placed BOXFIX in QCLEAN and
        BOXCHK in IMAGEUTIL.  Added menu option to FILIT to CHECK
        BOXES.  Adjusted also FILIT and HLPFILIT help files.  BOXFIX
        needed recoding for FILIT since boxes are ordered differently
        there - made a local version.
        Moved nowhere.

12929.  August 25, 2009             IMAGR                Eric
        Changed QCLEAN to restore components to all resolutions
        in multi-scale Clean.  Previously, the components were
        only restored to the images with the highest resolution.
        Small-diameter components are convolved with the Clean beam of
        the image to which they are being restored.  Extended
        components are added to images at finer resolutions with their
        actual size (the Clean beam size of the images at that
        resolution).  Found the auto-boxing did not work well for
        multi-scale: it needed finding the peak value and rms in each
        resolution separately and then applying the appropriate peak
        to the auto-boxing process.
        Restoring the images at all resolutions will allow FILIT and
        SABOX to be applied to NFIELD * NGAUSS facets fully.
        Changed IMAGR help file to mention the full restoration - it
        was silent on the subject previously.  Checked for spelling
        and changed some in the MX explain section.
        Moved nowhere.

12930.  August 25, 2009          IMAGR, FILIT             Eric
        Changed QCLEAN and FILIT routines that delete overlapped
        boxes.  The which box is larger test requires that one be
        larger by more than 10% or they are viewed as equal.  The
        selection between equal sizes tests which one's center is
        further away from the center of its facet.  Significantly
        larger boxes are kept and among equals, ones closer to facet
        centers are kept.  If all inequalities fail, the box in the
        lower numbered facet is kept.
        Moved nowhere.

12931.  August 26, 2009       more with boxes             Eric
        Changed:
        QCLEAN    Added an additional call to BOXCHK after the box
                  compression and only at that point report any
                  apparent overlaps remaining including 1-point
                  Changed to tell everything about overlaps only
                  when invoked by the TV option or when SETDEBUG
                  is > 0.
        IMAGEUTIL Changed BOXCHK to be silent on one-point overlaps
                  for any value of MSGSUP.
        FILIT     As QCLEAN
        SABOX     Help: added NGAUSS adverb and APARM(8) to suppress
                  the checking of overlapped boxes between facets
        SABOX     Added new adverb.  Reordered the code to build up a
                  full list of boxes for all facets, then optionally
                  do a boxfix including the extra pass to report any
                  remaining overlaps including 1-point ones, then
                  write out the boxes to the OBOXFILE.
        Moved nowhere.

12932.  August 26, 2009        FILEZAP                   Eric
        NEW VERB to zap external files from inside AIPS.  Changed
        AU3, POPSDAT, NEWPARMS, and made new help file.
        Moved nowhere.

12933.  August 27, 2009            IMAGR                 Eric
        Created new adverb OVRSWTCH which will allow switching between
        OVERLAP >= 2 mode and OVERLAP=1 mode.  Wrote help file for it
        and for ONEBEAM which got overlooked before.  Changed POPSDAT
        and NEWPARMS.  Changed IMAGR and its help to include
        OVRSWTCH.  Changed QCLEAN to compute the maximum in the
        inscribed ellipse always rather than only when autoboxing.
        In QCLEAN, changed CLNUV to call CLNUV1 after CLNUV2 if
        appropriate and changed CLNUV2 to pick up OVRSWTCH and watch
        for the level getting low enough and then switching OVERLAP
        and possibly also ONEBEAM, re-making all images and then
        exiting for CLNUV1 to take over.  OVERLAP=2 is faster in my
        tests by quite a bit but many of my facets are pretty empty.
        Moved nowhere.

12934.  August 28, 2009           IMAGR                 Eric
        IMAGR was Cleaning each facet below the flux level and then
        re-making the residual images.  At that point, some facets
        would pop slightly above the flux cutoff causing a whole major
        cycle to be done (or maybe even several) for a small number of
        weak components until all the bumps were - almost accidentally
        - reduced below the magic FLUX cutoff.  Changed the tests
        in QCLEAN where all facets have just been imaged - in the
        CLNUV upper routine at the beginning (i.e. on restarts) and in
        CLNUV1 after each major imaging - to look at 1.05*FLUX.  The
        Clean of each facet still quits at 1.0*FLUX.  OVERLAP 2 mode
        has another way to turn facets off when they drop below and
        essentially never knows the correct residual for all facets so
        no changes were made in it.
        Re-worded a bit in help file.
        Moved nowhere.

12935.  August 30, 2009           IMAGR                 Eric
        Finding and keeping the max in the inscribed ellipse (but not
        in boxes necessarily) is not a good idea for non-autoboxing
        cases.  Changed QCLEAN to find these since we need the overall
        maximum. but then zero the by-field list.  It was picking up
        fields to Clean that had high fluxes outside boxes and then
        having trouble with Clean.
        Moved nowhere.

12936.  September 20, 2009           IMAGR              Eric
        There was an error recovery section that talked about an
        infinite loop and said switching to OVERLAP=1.  But it did not
        really do that - at least after the OVERLAP 1 and >= 2 parts
        were made into separate subroutines.  Fixed that recovery to
        make the switch like that triggered by OVRSWTCH.   Of course,
        it should never need such a recovery.
        Moved nowhere.

12937.  September 20, 2009     AN files subroutines            Eric
        Changed ANTINI to force the antenna locations to be in a right
        hand system, avoiding all the if-then-else guess work.  Took
        advantage of this change to add 3 keywords and two columns.
        The keywords define the handedness (XYZHAND - signature of
        this change), TFRAME (terrestrial frame for antennas) and
        NO_IF (number IFs defines size of 3 columns).  The new columns
        are antenna diameter in meters and the FWHM of the single-dish
        beam for each IF but scaled to 1 GHz.  These may be - when
        filled in - of assistance in imaging.  Changed:
        PUVD.INC   MAXANC parameter 12 -> 14 for 2 new columns.
        DANT.INC   Added XYZHAN, TFRAME, ANTNIF for ANTINI call,
                   added DIAMAN, FWHMAN for TABAN call
        DANS.INC   Added ANDIAM, ANFWHM for full antenna common
        ANINI      Revised version of ANTINI to handle 3 more call
                   arguments for 3 more keywords and 2 more columns.
                   The argument of number of values is no longer used
                   on input.
        TABAN      Revised to include two more columns which may or
                   may not be there.
        ANREFM     New routine to reformat AN table - check and change
                   sign By and/or add the 2 columns.
        RMEXT      Standardized and moved from $APLNOT to $APLSUB to
                   allow all this AN stuff to stay at $APLSUB level.
        ANFIND     New routine to recognize handedness by the By sign
                   and array and station names.
        ANTINI     Changed call sequence - now just calls ANREFM and
                   then ANINI.  THIS IS STILL THE ROUTINE TO USE.
        ANSAME     Added 2 copies of new parameters, changed call
                   sequences, checked that new parameters match
        ANTDAT     Dropped the return argument VLB which was not used
                   by DBCON (the only task to use this).  Simplifies
                   the code a lot.  Fixed call sequences.
        TABCT      Drop erroneous ANTINI from comment
        COPTAB     Change AN file reference to call ANSEL in a loop.
        ANSEL      New subroutine to copy AN files correct header
                   frequency and number of IFs.
        GETANT     Change 2 call sequences, pick up new parameters in
                   DANS commons. Change handling of ant coordinates:
                   do array center correcion for VLA and GMRT
                   correctly and stop flipping BY for VLBI.
        GETTIM     Drop VLA argument - was only for error messages
                   (used by CVEL and SDVEL)
        TABLEUTIL  Changed call seq to OANINI and OTABAN and their
                   calls to ANTINI and TABAn, RESP.
        BASLIN     Changed call sequence to drop array type
        BPASET     Changed antenna location computation to rotate
                   local relative station locations by the array
                   longitude (as GETANT)
        Simply change 2 call sequences:
        AU3B     ANMAXA   GETNAN   PDRGET   PDRSET
        Moved nowhere.

12938.  September 20, 2009      AN files - tasks            Eric
        Tasks affected by the above changes:
        ACCOR      Remove much of ANTDAT (no need for antenna
                   locations which were done wrongly), fix NANT to be
                   max antenna number not rows in antenna table.
        AVSPC      Change COPTAB to do IF selection etc like COPTAB
                   library subroutine.
        CLCOR      Changed call sequences, changed ANTMOD to use the
                   normal arguments for TABINI/TABIO rather than
                   pseudonyms.  Dropped the open for READ and close -
                   ANTINI sets all the keywords for existing files
                   even on WRIT.  Dropped CLCORP(4,7) for ANTP, ANTC,
                   SSLO
        CLCOR      Help - dropped CLCORP parameters
        DBCON      Changed all ANTINI/TABAN call sequences, added the
                   new variables as dimensioned local variables for
                   the two input files.
        DFCOR      As CLCOR including help
        HAFIX      As UVFIX
        HAFIX      Help: as UVFIX
        OBEDT      Replaced local declarations with DANT.INC, changed
                   call sequences.
        PRTAN      Extend testing to see if antenna diameter and beams
                   are same and are not zero.  Change display
                   accordingly.  Fixed call sequences of course.
        SETAN      Change call seq, allow new header values in KEYIN
                   section including XYZHAN and TFRAME, drop excess
                   re-write of the AN file header keywords.
        SETAN      Help: Add header keywords
        SPLAT      Change to copy AN tables via new ANSEL updating the
                   ref freq in subarray 1 only then use new call seq
                   to zero the pol cals if needed.  Change to use
                   standard variable names and to fix all AN tables
                   not just that for subarray 1.
        SPLIT      As SPLAT
        UJOIN      Change to use ANSEL rather than direct copy.
        UVCOP      Change to call ANSEL (must have separate inver,
                   outver arguments to support UVCOP
        UVCRS      Change call sequences, get ant coordinates simply
                   as copy of station coordinates but pass ARRLON to
                   the modeling and add it in to the ATAN2 (BY, BX),
                   change back to LH in crossing subroutine.
        UVFIX      Drop much of APARM(1) and ISVLB.  Need to keep
                   special VLA and GMRT things.  Set BY = -BY for all
                   antennas, change call seq ANTINI and TABAN.
        UVFIX      Help: changed APARM(1) which is only now needed to
                   force use of the array center adverbs.
        VBGLU      Add AN tables as special table type to be
                   translated.  Fix finding of row parameters for
                   non-time tables including AN.  Force translation of
                   N tables near the start (with GETNAN).
        VLANT      Fix call sequences and change to use standard
                   variable names.
        CVEL       Changed call to GETTIM, drop most VLA business,
                   always change BY for low-level doppler routines.
                   Correct handling of VLA/GMRT - the X/Y is wrt the
                   array center not Greenwich for them so simple
                   addition does not work (as in GETANT).
        CVEL       Help file: APARM(7) not used now
        SDVEL      As CVEL.
        UVCON      Changed call seq, dropped NUMV, setup variables
                   better and dropped the BY reversal for VLBA.
        CAPLT      Fixed ANTINI, TABAN, and BASLIN call seq; dropped
                   BPARM(10).  Make XB, YB, ZB be simple copies of the
                   station coordinates - no need to rotate anywhere
                   since that is covered in BASLIN and modeling.
                   Changed help also
        CLPLT      As CAPLT.
        FRMAP      Drop the DOVLA stuff, force into left-handed,
                   compute ARRLON (in LH) and pass along.  Fix call
                   sequences.
        LOCIT      Fix call sequences; drop the if-then-else on array
                   name, compute ARRLON correctly, fixing signs
                   (hopefully)
        VPLOT      Dropped DOARRAY from help and Fortran, changed
                   ANTINI, TABAN, BASLIN call seq, XB etc now simple
                   STNXYZ.  Changed help.
        Simple call sequence changes plus stop setting column sizes
        for ANTINI (called NUMV normally), init variables better:
        ATLOD   BSMOD   DTSIM   FILLM   FILLR   FITLD   M3TAR   MK3IN
        OTFBS   OTFUV   SDTUV   SPCAL   UVFIL   UVLOD   UVSIM   VLBIN
        IM2UV   LPCAL   PCAL
        Simple call sequence changes:
        AVER    BLAVG   BOXES   CLCAL   FACES   LISTR   MATCH   PCCOR
        RLCOR   SETFC   UVAVG   UVDI1   VBMRG   ANBPL   FGPLT   FRPLT
        IBLED   POSSM   TVFLG   DTSUM   FXPOL   INDXR   OBTAB
        (DTSUM, FXPOL, INDXR needed dimensions of POLCA/B corrected)
        Moved nowhere.

12939.  September 20, 2009             FILLM                   Eric
        Changed to add half an integration time to the specified stop
        time test so that the ultimate test is on the center of the
        integration rather than the end.
        Moved nowhere.

12940.  September 20, 2009             FITLD                   Eric
        The AN file was being writen with the frequency in the AG
        table, even if the frequency order was swapped inside FITLD
        (for IDI data).  Changed to replace this with the ADJRFQ
        which is used for the header (at least when there is one
        subarray).
        Moved nowhere.

12941.  September 20, 2009          FO tables                Eric
        The frequency offset may be pulled out of the CL table for
        receipt from other packages or submission to them.  It should
        be of use to CVEL and UVFIX as well (perhaps when no CL table
        is available) and to INDXR to make a full CL table.
        Therefore, created FOINI and TABFO to initialize and
        read/write them.  Created CL2FO to copy a CL table directly to
        an FO table selecting on source and only if there are non-zero
        Doppler offsets for that source.  Changed SPLIT and SPLAT to
        call CL2FO when run on multi-source input files making
        single-source output files.  Changed FRQUPD to test on
        subarray and freqid and to use FO tables if present rather
        than CL tables.  This involves a changed call sequence.
        Improved its handling of IO to store all antennas for the
        current time as they are encountered - it was rereading the CL
        file many times until the antennas were found.
        Moved nowhere.

12942.  September 20, 2009          CVEL                      Eric
        Changed it to use the correct SUBARRAY in DSHIFT.  It was
        using subarray 1 for antenna positions.  Correct call sequence
        to FRQUPD.  Add test on subarray so that only the correct
        subarray is passed into DSHIFT.
        Moved nowhere.

12943.  September 20, 2009          UVFIX                     Eric
        UVFIX uses the AN file frequencies since for subarrays > 1
        the actual frequency might be different from that of the
        initial data set (DBCON allows this for non-line data).
        Changed it to use the header frequency for subarray 1 since
        that is almost certain to be correct.  Added FRQUPD to find
        Doppler tracked frequency offsets when there is one FQID, data
        are in TB order, and there is a CL or FO table.  The fully
        correct frequency can then be used for the phase shifting.
        Moved nowhere.

12944.  September 21, 2009              CVEL                Eric
        Version put back lacked some Fortran changes that were
        required to make it work at all.
        moved nowhere.

12945.  September 22, 2009       antini changes         Eric
        BPASET had a bad call sequence for ANTINI.
        Moved nowhere.

12946.  September 22, 2009          DATCAL               Eric
        Added code to fix amplitudes whenever there is a delay to be
        fixed.
        Moved nowhere.

12947.  September 22, 2009             CVEL                 Eric
        1. Found where LUN 49 already closed in FTAB cam from and
        dropped the TABIO close.
        2. Added code to create an NX table on the fly, dropping the
        NX table copy and deletion in the existing code.
        Moved nowhere.

12948.  September 23, 2009            CVEL                   Eric
        Changed CVEL to read the frequency offsets correctly from the
        CL or FO table and to update them on output.  This means that
        CVEL run on the output of CVEL should do nothing unless told
        to do a further change in velocity.  Corrected FRQUPD in
        $APLNOT since it did not select on antenna as it should.
        Moved nowhere.

12949.  September 23, 2009              TABAN               Eric
        TABAN only copied 12 of the 14 pointers and so messed up the
        polarization terms and possibly the Bx one as well.
        Moved nowhere.

12950.  September 24, 2009         TVFLG, SPFLG            Eric
        Added the option to set the transfer function in displaying
        amplitude like things.  LINear, LOG, SQRT, LOG2 are offerred
        in a cycle.  Changed the HLP files TVFLG, HLPTVFLG, SPFLG,
        and HLPSPFLG to reflect the new option.
        Moved nowhere.

12951.  September 25, 2009             CLCOR                 Eric
        The ANTP and ANTC phase corrections are made by computing the
        delay based on the antenna location ignoring the array center.
        For the VLA this was fine - each antenna was at a
        comparatively small distance.  But for the EVLA each antenna
        is at a distance of about the Earth's radius making many
        vastly large phase corrections in an antenna basis.  These
        corrections are not stored accurately enough to later compute
        the much smaller phase differences with any accuracy at all.
        Changed CLCOR to find and use a reference antenna location to
        keep the relative antenna lengths much smaller.
        Moved nowhere.

12952.  September 29, 2009         TACOP                   Eric
        Drpped call to TABCOP and added a new TBLCOP that uses the
        TABINI/TABIO routines.  This allows for deleting flagged rows.
        Changed also TACOP.HLP adding adverb DOFLAG to control this
        option.
        Moved nowhere.

12953.  September 29, 2009            SNFLG                 Eric
        Added OPTYPE = 'AMP' to the task.  It looks at the robust mean
        and rms of the SN amplitudes as a function of source, antenna,
        IF, and polarization and writes flags to a flag table to flag
        the UV data at bad times.
        Moved nowhere.

12954.  October 1, 2009            IMAGR                  Eric
        Added yet another option: IM2PARM(11) and (12) allow for
        baseline-length averaging of the data on the fly as they are
        copied from the input data set to the work file.  This does
        have an impact on data weighting and will reduce the emphasis
        on short spacing data in VLA data sets.  But it also reduces
        the size of the work file which will speed the whole process.
        The speed up should be linear in work-file size except for a
        great jump in speed if the work file is reduced to a size that
        fits in ram.
        Moved nowhere.

12955.  October 2, 2009            UVFLG                 Eric
        Reworded the inputs section on elevation flagging and added a
        sentence ("normal values would be..") to the help.
        Moved nowhere.

12956.  October 2, 2009            POSSM                 Eric
        Found one place where the NPLOTS > 0 code was not changed when
        I added the log amplitude plotting.  As a consequence it tried
        to plot non-existent upper plots in some cases.  Changed it to
        plot log amplitude even for auto-correlations.  Fixed the
        plotting of plus signs and lines with FACTOR in the NPLOTS > 0
        code to match that described in the help and implemented in
        the NPLOTS = 0 code.
        Moved nowhere.

12957.  October 5, 2009              SPLAT               Eric
        Fixed writing of NX table - the source numbers were being set
        all 0 when a multi-source output file was written with time
        averaging.  The random parameters must be in the buffer before
        the call to RNXUPD.  The special version of RNXUPD which
        handles the special case of one source being written to a
        multi-source file is still needed.
        Moved nowhere.

12958.  October 6, 2009           PRTUV                 Eric
        The old code here will no longer do.  Changed it to used fixed
        scale by default; set DPARM(1) < 0 to get self scaling.  Added
        routine to use the start time and the NX table to get the
        correct offset into the file.  Now it will be sufficiently
        fast for the Widar era - or at least the eraly part of that
        era.  Minor corrections in SNFLG.
        Moved nowhere.

12959.  October 9, 2009          IMAGR, PRTUV            Eric
        IMAGR: Forgot to increase the pointer in the
               baseline-dependent averaging when writing intermediate
               results.  Worked fine with 1 channel, not with > 1.
        PRTUV: Added test for BPRINT > NVIS.
        Moved nowhere.

12960.  October 11, 2009           GETJY                 Eric
        Changed the methods of averaging to robust forms and added
        reporting of numbers of samples possible, used, and
        excessively bad.  The flux error bar is still the formal error
        (divided by the square root of number of antennas times number
        of polarizations actaully used in the average) but is rported
        both over the sample used in the robust average and the full
        sample.  Added a bunch of explanation of this to the help
        file.   Also fixed IM2PARM help file to mention baseline based
        averaging.
        Moved nowhere.

12961.  October 12, 2009            GETANT                Eric
        This widely used subroutine was not careful when asking the AN
        file for the POLTYPE keyword.  It supressed error messages
        when the keyword is not present but filled the string even
        when there was an error.  Added error test and set the string
        to non blank only when the keyword is read properly.
        Moved nowhere, many relinks required.
        Moved nowhere.

12962.  October 12, 2009          ANREFM                Eric
        The reformat routine lost the "non-standard" keyword POLTYPE
        when reformting AN tables.  The PCAL created word is needed
        for later pol cal.
        Moved nowhere.

12963.  October 12, 2009            UVDEC               Eric
        Had a silly error - when setting the alternate reference pixel
        it did KRARP+JLOCF but there is only one KRARP no +JLOCF.
        This put a "shift" in the Y direction.
        Moved nowhere.

12964.  October 12, 2009             SNPLT               Eric
        Changed the minimum allowed plot range to allow more detailed
        plots.  Delay and rate things get 2 more orders of magnitude
        whilst most others get 1 more order of magnitude.
        Moved nowhere.

12965.  October 12, 2009             GETJY                 Eric
        Numerous errors:
        (1) Left small buffer used for debug rather than the dynamic
            memory that was supposed to be there.
        (2) The robust averaging must allow for an rms of 0.0 (1
            sample) and so test on LE not LT.  It was finding no valid
            data when there was 1 sample.
        (3) The overall rms should be wrt the robust average not its
            own average.  Corrected computation.
        Moved several times to force early MNJ preps.

12966.  October 13, 2009          FLGIT                 Eric
        Work on the messages some more to try to be clearer about what
        they mean.  Added prominent message that no flags were
        written or no new data flagging occurred and drop the lengthy
        report in those cases.
        Moved nowhere.

12967.  October 13, 2009          LOCIT                 Eric
        Changed to avoid trying to open an over-the-top table once
        that open or an OTT I/O has failed.  Otherwise, the error
        messages came with every antenna.
        Moved nowhere.

12968.  October 14, 2009            TABSOU                Eric
        Change CALCOD = 'NONE' to blank on input and output.
        Moved nowhere.

12969.  October 14, 2009      IMSTAT, IMEAN               Eric
        Modified AU6D and IMEAN a little to not count pure zero pixels
        in the rms/mean and to report how many of them there were.
        Played a little with declarations - there is weak evidence of
        compiler problems perhaps linked to double precision variables
        (which are needed and used here).  The simple mean/rms of
        IMEAN should produce the same answer as IMSTAT always.
        Moved nowhere.

12970.  October 15, 2009             FILIT               Eric
        Changed FILIT and the help and real-time help to
        1. Add option ENTER FACET to type in a fect number to look at
        next.
        2. Add option DEL ALL BOXES to set the number of boxes in the
        current facet to zero.
        3. To fix the logic about BOXFILEs - it did not read the
        BOXFILE if the OBOXFILE was the same (and so did not know any
        initial boxes) and I suspect messed up the output as well.
        Changed it to refuse to allow OBOXFILE to be the same as
        BOXFILE and will add an O (not zero) to the end if OBOXFILE if
        needed to force a new name.  Fixed the logic about starting
        with an INCLASS other than ICL001.  It now sets up all facets
        independent of ICLnnn but starts with a display of nnn.
        Before, if one started with nnn then the boxes for facets 1 -
        (nnn-1) were lost.
        Moved nowhere.

12971.  October 21, 2009         AIPSMEM110             Amy
        Revised DELZN memo, some of the recomended APARMs were incorrect.
        Also updated the part about editing CL tables.
        Moved nowhere.

12972.  October 21, 2009          FRING                 Eric
        The output data set is - by default - averaged over all
        spectral channels, IF by IF.  The output FQ table and header
        did not reflect the resultant change in frequency increment
        and reference pixel.
        Moved nowhere.

12973.  October 21, 2009          UVUTIL                Eric
        Had an error in UVFRQS when the BCHAN, ECHAN, and number of
        channels were inconsistent.  This should never happen but
        Fraser provoked the similar IF test.  The fix up for frequency
        used the number of IFs rather than frequencies.
        Moved nowhere.

12974.  October 22, 2009       WIPER, UVPLT             Eric
        Added adverb NCHAV to go with CHINC to control what is
        plotted.  Averaging channels gets better S/N.
        Moved nowhere.

12975.  October 22, 2009           FRPLT                Eric
        1. Added option DOACOR.  This means that DOXCOR becomes false
           when adding up all included baselines in one plot
           (NPLOTS=0) when DOACOR is true.
        2. Added option APARM(10) to convert the vis by either
           normalizing the amplitude or making the phase zero while
           retaing the amplitude.  This option does not apply to
           autocorrelation data.
        3. Corrected local FILANT to have both DOACOR and DOXCOR -
           before it used only an uninitialized variable for DOACOR
           and made DOXCOR = .NOT.DOACOR which is NOT what is desired.
        4. Fixed it to reset NPLOTS > 9 to 9 rather than quit.
        5. Changed setup to UNDISK to ask for the 2 desired antennas
           only on each pass - should speed things a lot.
        Moved nowhere.

12976.  October 23, 2009           FRPLT                 Eric
        The task did not take the plot as fixed scale when the limits
        for an unused data type were not set.  Otherwise the scaling
        does seem to work and the fixed scale test was corrected.
        Moved nowhere.

12977.  October 23, 2009           CALIB                 Eric
        Fixed formating of file names for seqence numbers > 999.
        This is pretty widespread in AIPS.
        Moved nowhere.

12978.  October 26, 2009            IMAGR               Eric
        Changed IMAGR.FOR to fill in the name parameters for the work
        file when IN2SEQ is specified and then check if the work file
        already exists.  If so, it deletes it unless ALLOKAY >= 2.  We
        do this since changes in parameters such as BIF, EIF, NCHAV,
        CHINC, etc will change the shape of the work file and this
        serious change escaped the notice of the task until bad things
        happened.  Changed the help file to mention this and to add
        more warning about beam size when OUTSEQ is set.  A change
        from NITER=0 to NITER > 0 changes the size of the beam.
        Moved nowhere.

12979.  October 26, 2009           INDXR                 Eric
        Add comments to the help file about making a new CL table with
        no initial calibration if that cal has already been applied.
        Moved nowhere.

12980.  October 26, 2009           SPLAT                 Eric
        Changed COPTAB to make a CL table 1 with (1,0) for gain and 0
        for delay and rate and fix it to do CL tables only on
        multi-source output.  A special version of CLSEL called CLNULL
        is appended to do this.
        Moved nowhere.

12981.  October 26, 2009           CLIP                 Eric
        Added APARM(7) option to flag n channels on each side of a bad
        channel.
        Moved nowhere.

12982.  October 27, 2009          UVAVG                   Eric
        The dynamic memory buffer must be 512 words or more since it
        is used in ANTINI as well as for the data.  In BT order the
        buffer was sometimes too small, causing ZEXPND or other
        problems.
        Moved nowhere.

12983.  October 27, 2009             FRING                Eric
        Changed it to make 2 duplicate samples for the fitter when
        only 1 time is found.  The fitter is happy with that.
        Moved nowhere.

12984.  October 29, 2009           FRING                 Eric
        Added DPARM(9) to the help and cleaned out some Ketan "jokes".
        Changed the Fortran to trap DPARM(9) > 0 to mean that one
        wants to suppress the fitting of rate entirely rather than
        simply zeroing the fit rate after the fact.  What happens is
        the data are accumulated in a number of times as always.  But
        when it comes time to call the fitting subroutines, the data
        are averaged together fully and then duplicated.  The times
        are set to +- a small amount and the fitting routines which
        demand a rate fit are given data that absolutely have 0 rate.
        The data buffering is still managed in such a way as to allow
        the subinterval processing (SOLSUB and SOLMIN controlled
        functions).
        Moved nowhere.

12985.  October 29, 2009               FRING              Eric
        Added tests for data falling betwen scans.  Raised the time
        correction to 10 milliseconds and put in a way to skip data
        that falls outside the apparent scan boundaries.
        Moved nowhere.

12986.  October 30, 2009             CCRES                 Eric
        Found an array that was not dimensioned.  This caused the
        task to fail under the Intel 64-bit compilation.  Every where
        else seems to work so no need to patch.
        Moved nowhere.

12987.  November 2, 2009           VPLOT                Eric
        Correct and amplify the SYMBOL information in the inputs and
        help.  0 => a cross or no symbol depending on FACTOR.
        Moved nowhere.

12988.  November 2, 2009           APCAL                Eric
        Corrected silly repetitions in the code stumbled upon by
        Craig.
        Moved nowhere.

12989.  November 2, 2009            UVWAIT               Eric
        The request for pseudo-ap space could get truncated and then
        it would tell you to do XY sorting when that should not be
        required.  Fixed the truncation by rounding well up.
        Moved nowhere.

12990.  November 2, 2009            VBCAL                   Eric
        Old code limited number of antennas to 28.  Fixed it to use
        MAXANT and look a bit more modern.
        Moved nowhere.

12991.  November 3, 2009          VBCAL                  Eric
        Corrected the mistakes I put in yesterday in the do all
        baselines mode and added a DOWEIGHT option to scale weights
        too.
        Moved nowhere.

12992.  November 4, 2009           SPLAT                    Eric
        The code used random parameter pointers freely not realizing
        that the input and output random parameters may be different.
        Changed to trap the (SPLAT-intended) output ones in separate
        variables since UVGET ('INIT'...) will over-write the output
        ones with ones that UVGET thinks should be used.  This
        appeared in a casa-delivered file where FREQSEL preceded
        SOURCE.  FREQSEL is dropped and so the offset numbers changed.
        The code itself had all sorts of potential for trouble that
        would rarely occur in practise.
        Dropped message about new CL table.
        Moved nowhere.

12993.  November 5, 2009            CALIB                Eric
        Changed inputs and task to use ICHANSEL rather than BCHAN to
        ECHAN.  Set BCHAN and ECHAN to the maximum range in ICHANSEL
        so as to limit the work file I/O.  Fixed HI writing to include
        ICHANSEL (it ignored BCHAN and ECHAN!).
        Moved nowhere.

12994.  November 6, 2009           POLTYPE                Eric
        This keyword is a pain.  SPLIT and SPLAT attempted to copy the
        AN file and then fix this to blank - but the copy did not
        include the keyword.  SPLIT and SPLAT took this seriously and
        quit.  Changed ANSEL to copy the keyword when present
        (supressing any errors).  Changed call sequence to ANSEL to
        include DOPOL and then clear the POLTYPE keyword and cal
        parameters when DOPOL is applied.  Changed call sequence to
        ANSEL in UVCOP, UJOIN, and COPTAB.  Changed also in SPLIT and
        SPLAT and dropped all the AN table fix up now done in ANSEL.
        Found FITLD was prepared to copy this keyword from the AT file
        and left out the call to write it in - which I have now added.
        Moved nowhere.

12995.  November 7, 2009            SNCOP                  Eric
        NEW TASK: averages selected IFs in each record of an SN table
        and writes those averages in all IFs in a matching output SN
        table.  This could be used to propagate good IFs to those
        damaged by RFI or to take e.g. a 1 IF file's SN table and
        propagate it to a 4 IF data set.
        Moved nowhere.

12996.  November 10, 2009         ZFRE2                   Eric
        Corrected a very long-standing C error in most versions
        of ZFRE2.C.  A new gnu compiler on ubuntu seems suddenly to
        take exception to the error which did not bother numerous
        previous compilers.  It will take a while for this error to be
        corrected in existing load modules.
        moved nowhere.

12997.  November 11, 2009         BPASS, CPASS            Eric
        BPASS, CPASS, and PHSRF all picekd up the ICHANSEL adverb
        badly, leading to IFs > 1 averaging all channels!  The other
        ICHANSEL tasks did this correctly.
        Moved to patch this date.

12998.  November 12, 2009         Image extensions         Eric
        IMAGE extensions are a standard FITS construct that is used
        occasionally.  Until now AIPS has ignored them.  Changed:
        PRTTP    Changed the reading code to recognize IMAGE
                 extensions, to allow them BITPIX=-32, and to display
                 the contents sensibly.
        PRTTP    Help - added mention of IMAGE extensions.
        IMLOD    Changed internal call sequences to pass additional
                 information internally (to allow > 1 output image).
                 Corrected too small buffer error when creating dummy
                 image and changed to delete dummy image if it
                 contains no useful information and real images had
                 been written from IMAGE extensions.  In extension
                 reading routine, added case for IMAGE extensions and
                 wrote a new routine to read the header and data and
                 make additional output images.
        IMLOD    Help - change opening remarks to mention IMAGE
                 extensions.
        FITLD    As IMLOD more or less to change the IMLOD section
                 to handle IMAGE extensions.  Note that IMAGE
                 extensions will only work from IMAGE main data or
                 empty main data with BITPIX not 8 or NAXIS not 0.
        FITLD    Help - small note re IMAGE extensions
        Moved nowhere.

12999.  November 12, 2009          FITLD                   Eric
        Changes in FITS IDI cause:
        1. Change FITLD to pick up and use EQUINOX and WEIGHTYP from
           the UV data table if present.  WEIGHTYP controls what the
           data weights mean.  Correct VIS_SCAL usage for weights of
           normal type.
        2. Changed DAGV.INC, AGINI, AGTAB to add a DIAMETER column.
           No error if missing.  Changed FITLD to use the diameter
           returned by AGTAB (0 if absent).
        3. Changed DATV.INC, ATINI, ATTAB to add a BEAMFWHM column.
           No error if missing.  Changed FITLD to use the fwhm
           returned by ATTAB (0 if absent).
        4. Changed  FITLD local include DWRV.INC, local subroutines
           WRINI and WRTAB to allow a preciptation column.  AIPS
           will ignore this for now.
        Moved nowhere.

13000.  November 12, 2009          FILLM                  Eric
        The AN file creation forgot to init the FRAME keyword.
        Decided that 'VLA' best describes the not very well defined
        frame used by the VLA (as opposed to EVLA).
        Moved nowhere.

13001.  November 12, 2009           DIFUV                 Eric
        The weight computation could get bad results when weights were
        0.0 - leading to NaNs on some machines and aborts on others.
        Cleaned up the logic.
        Moved nowhere.

13002.  November 12, 2009            SUFIX                Eric
        NEW TASK: accepts a list of time ranges and changes the source
        number in those ranges to a new number and then adds the new
        source to the source table.  (A FUDGE clone.)  This may be
        needed when the on-line systems or off-line software lose a
        source break, running one source's data into another.
        Moved nowhere.

13003.  November 13, 2009           BLCAL                Eric
        Add ICHANSEL to control averaging over spectral channel.
        Moved nowhere.

13004.  November 13, 2009          ISPEC                 Eric
        When the axis was reversed, the SL file did not convey the
        fact.  CHanged SLBINI and ISPEC to use TRC(3) < BLC(3) as well
        as TRC(3) > BLC(3).
        Moved nowhere.

13005.  November 17, 2009        GETANT, TABAN           Eric
        GETANT did not set up the polarization calibration parameters
        correctly.  The loop counter was changed to NIF and the
        counter used for the Pol cal values stayed 0.  As a result the
        ellipticity was set 0 and the ori parameter set to the
        ellipticity of IF 1 for all IFs!  This error appeared with
        the September 20 changes.
        TABAN used the size of column 9 to tell it the number of IFs.
        After the format change this is a bad idea since 0 is normal.
        Changed it to use the new header parameter.
        Moved nowhere - lots of link edits.

13006.  November 17, 2009            AVSPC                 Eric
        The local copy of COPTAB was overlooked when changing the
        ANSEL call sequence.  Led to an abort when copying the
        tables.
        Moved nowhere.

13007.  November 19, 2009         BL cal                Eric
        The table for BL cal was large enough for the VLA up to 8 or
        so IFs.  Had to change PUVD.INC to make a larger buffer and
        so recompile a lot and link even more.
        Moved nowhere.

13008.  November 20, 2009         TACOP                 Eric
        The portion of the task that copies the keywords, selection
        strings etc copied up to and including the first data record.
        If there is no data record, this could cause a bad failure.
        The error message reporting that failure also used the wrong
        format number and so caused a second failure.
        Moved nowhere.

13009.  November 20, 2009            INDXR               Eric
        Tone down the warning about making NX table for single-source
        file and note that no CL table will be made.
        Moved nowhere.

13010.  November 20, 2009         CALIB                  Eric
        Make NX table for output file.
        Moved nowhere.

13011.  November 20, 2009         VBGLU                  Eric
        (1) Dropped requirement that all data sets have NX tables.
        The requirement for them disappeared in 1995.
        (2) Make NX table for output file.
        (3) Moved the test for there being no extension files of the
        given type.  Otherwise it tried to do CT tables with error
        messages when there were none.
        (4) Fixed call to UVTIME which required the DUVH include parms
        to be set up for each file - they pointed to the output which
        was completely wrong.
        Moved nowhere.

13012.  November 23, 2009           CLCOR               Eric
        The POLR opcode adjusts the pol angles in the AN file.  It got
        the number of IFs from a risky approach using a column
        dimension and the column number was changed Sept 20.  Fixed to
        use the number of IFs which is now kept in the table.
        Moved nowhere.

13013.  November 23, 2009            POLCO              Eric
        The KEYCOP routine did not have the call arguments prepared
        yet.  Moved it a few lines where disk numbers will be known.
        Moved nowhere.

13014.  November 23, 2009           MODFIT              Eric
        The subroutine MODFIT that makes a list of models which will
        fit in doing a subtraction stopped listing at the first facet
        with no CCs.  This caused tasks to do more passes through the
        data than necessary when some of the facets have no CCs but
        other higher numbered ones do have CCs.
        Moved nowhere.

13015.  November 24, 2009        BLCAL spectral         Eric
        Write NEW TASK BLCHN to solve the BLCAL problem as a function
        of channel and write out a corrected data base.  Required new
        table type and BDINI and TABBD subroutines to support it.
        Changed POSSM and BPLOT to offer options to plot the BD
        table.
        Moved nowhere.

13016.  November 24, 2009       info files              Eric
        Updated the TAB completion file $HLPFIL/HLPIT.LIS.
        Updated the apropos file $HLPFIL/LSAPROPO.HLP
        Updated the ABOUT files:
        ZZADVERB.HLP     ZZANALYSIS.HLP   ZZAP.HLP
        ZZCALIBRAT.HLP   ZZFITS.HLP       ZZGENERAL.HLP
        ZZIMAGING.HLP    ZZINTERACT.HLP   ZZOBSOLETE.HLP
        ZZOOP.HLP        ZZPARAFORM.HLP   ZZPLOT.HLP
        ZZPOLARIZA.HLP   ZZPOPS.HLP       ZZPROCEDUR.HLP
        ZZSPECTRAL.HLP   ZZTABLE.HLP      ZZTAPE.HLP
        ZZTASK.HLP       ZZTV-APPL.HLP    ZZTV.HLP
        ZZUV.HLP         ZZVERB.HLP       ZZVLBI.HLP
        Moved nowhere.

13017.  November 24, 2009          SETSP                 Eric
        Changed limit - it allowed a change of speed only to 100
        although it claimed to allow 500.  Now it does.
        Moved nowhere.

13018.  November 25, 2009         FITLD                 Eric
        FITLD had a second place where the antenna Y coordinate was
        forced negative.  This is on antennas that did not occur in
        the first IDI files being read but did occur on later ones.
        Moved nowhere.

13019.  November 26, 2009            MAPIT              Eric
        Deleted RUN file and 4 help files (actually moved to
        $APLCONTR) that depended on MX for imaging.
        Moved nowhere.

13020.  November 27, 2009         TVTRANSF              Eric
        Fixed AU6A to use all roam channels when the screen is in roam
        mode.  Mentioned this in the help files for TVTRANSF, TVROAM,
        and REROAM.
        Moved nowhere.

13021.  November 30, 2009          ANCHECK               Eric
        Created a RUN file to check antenna By positions in the
        antenna file.  The recent bug found in FITLD means that a few
        antennas in the archive will have erroneous By values.  This
        proc is to check on them.  A different proc ANFIX8 is put in
        31DEC08 to allow VLBA archive people to change back to the
        31DEC08 version.
        Moved to 31DEC08 as described above.

13022.  December 1, 2009     VLOG.HLP, ANTAB.HLP         Amy
        Mentioned in help files that ANTAB cannot handle mixed modes.
        Instructed people with mixed modes to seperate *cal.vlba file
        into single mode files before running VLOG and/or ANTAB.
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC09 is NEW

***********************************************************************
***********************************************************************


13025.  December 3, 2009            CookBook                 Eric
         1 : Updated numbers, aips++ remarks, misc wordings
         2 : Drop TIMDEST reference, misc minor wordings
         3 : RECAT, AN file format, drop HORUS, MX, TIMDEST, WHATSNEW,
             add FILEZAP, correct VLA archive web address
         4 : 3C147 model, RLCOR, ATLOD now AIPS, SNFLG flags data,
             GETJY robust average
         5 : IMAGR (DO3D false, autobox, IM2P(7), restart after
             filter, OVRSWTCH, baseline-length dependent averaging)
             MX/HORUS, SABOX, FILIT, UVFND phase, FQUBE
         6 : ISPEC/BLSUM make SL files, REROAM amd ROAMOFF, FILIT,
             CAPLT, UVPLT NCHAVG option
         7 : ISPEC, BLSUM slices; UVMOD text file, FQUBE, FARS
         8 : ISPEC, BLSUM slices; MX, HORUS gone; IMAGR autobox/carry
             boxes over between channels; FQUBE
         9 : SNPLT DOBLANK, RLCOR, FITLD read pre-processed archive
             data but without DOCONCAT, VPLOT max/min, CLCOR 'IONO',
             CAPLT, FRING DPARM(9) no rates, SNCOP for copying SN
             tables, BLCAL ICHANSEL and BLCHN
        11 : Drop TIMDEST several places
        12 : Only private CA, FILEZAP, FQUBE, DELAY, several misc.
        13 : Updated all changed ABOUT files
        A  : Drop MX, HORUS, WFCLN, MAPIT proc; reword VLACALIB.
        B  : Wording corrections
        I  : update
        J  : update
        Recipe: rearranged only
        LaCook.PL revised to correct version(s).
        Moved PS to shared TEXT, $DOCTXT/LaCook* to 31DEC09 and 31DEC10.

13026.  December 3, 2009          ANCHECK               Eric
        Effelsberg is EB not EF - corrected ANFIND.FOR and ANCHECK.001
        in NEW and TST and ANFIX8 in the patch page for 31DEC08
        (OLD).  Both EF and EB are now recognized per Craig.
        Moved as described above.

13028.  December 7, 2009         SPLIT, SPLAT             Eric
        SPLIT and SPLAT assumed that the header value of the alternate
        reference pixel was correct even for multi-source files.  This
        is not necessarily the case and should always be the frequency
        reference pixel.  Changed usage.
        Moved from 31DEC10 this date.

13029.  December 8, 2009             ATLOD                Eric
        Messed up one of the 2 calls to TABAN.
        Moved to 31DEC09 this date.

13030.  December 10, 2009          TIMDEST               Eric
        Removed messages that mentioned TIMDEST - it no longer is
        available to users in PRTMSG, AIPSC (added block), and
        ZDCHIN.
        Moved to 31DEC09.

13031.  Dcember 10, 2009           COMB                  Eric
        Added code to copy tables to the output except for CC tables.
        Moved to 31DEC09.

13032.  December 11, 2009            install.pl           Eric
        Added code to trap the current list of hosts that are found in
        a pre-existing HOSTS.LIST file and the to reread that file to
        make sure that those hosts have the current $ARCH and $SITE
        that install.pl assumes.  This should stop mysterious errors
        which arise from a mis-match of the old and new values of
        these critcal strings.
        Moved to 31DEC09 December 29.

13037.  December 15, 2009        Memo 114                 Eric
        Put back a revision of the memo - numerous minor errors plus
        BITPIX, 3 types of weights, more care with EQUINOX and EPOCH,
        antenna diameter and full-width at half-maximum, units
        corrected for dispersion, etc.  Corrected web pages.
        Moved nowhere (all versions get it).

13039.  December 18, 2009          SMOOTH                 Eric
        SMOSP made an erroneous reference to CATBLK (output header)
        rather than CATUV (input header).  In IBLED it got a very
        wrong set of increments through the data - so IBLED messed up
        badly if SMOOTH was set.  Most tasks have not messed up the
        CATBLK enough to matter after the INIT call to UVGET but
        before the READ calls.  Discovered that spectral smoothing was
        occuring before delay calibration application in the before
        bandpass smooths.  This is a very bad idea but not important
        for small delays.
        Moved to 31DEC09 this date - these have been with us a long
        time.

13041.  December 23, 2009            BLCAL               Eric
        The help file referred to writing an output file.  BLCAL does
        not do this.  Dropped the remark and cleaned up the Explain
        typing.  Fixed history file writing in the Fortran since it
        left out many of the calibration parameters and was coded
        oddly.
        Moved to 31DEC08 this date.

13042.  December 23, 2009            BLCHN                Eric
        Dropped remark in help file - output is written whether or not
        there is a division by the source model.
        Changed Fortran to compute spectral rms and honor the print
        option.  Changed help and Fortran to offer a post-solution
        spectral smoothing identical to the usual smooth.  Changed
        Fortran to write all calibration parameters to the history
        file and also cleaned up the rest of the HI writing.
        Moved to 31DEC08 this date.

13044.  December 25, 2009            TVFLG              Eric
        Tried to read the number of records in an antenna file equal
        to the highest antenna number in that file.  That is wrong.
        Changed the length finding routine to issue a warning if some
        possible antennas have no position info and so have length 0.
        Moved to 31DEC09 this date.

13045.  December 25, 2009           SETJY              Eric
        It issued a message about available models for each IF and had
        messages about some of the bands saying models may be
        available.  Changed to issue only one message per source and
        make all certain that models are available.
        Moved to 31DEC09 this date.

13046.  December 25, 2009            ISPEC             Eric
        1. Fixed return quickly to return quickly on DOCRT 0.
        2. Fixed setting of status so it will clear at end of making
        plot file.
        Moved to 31DEC09 this date.

13047.  December 25, 2009            IMEAN               Eric
        Counted histograms as real*4 - limit of accuracy is 2 or 4
        million after which count ceases.  Changed to double
        precision.
        Moved to 31DEC09 this date.

13048.  December 25, 2009           MCUBE                  Eric
        Found some code that limited the axis on which we are building
        to 2048.  Fixed.
        Moved to 31DEC09 this date.

13049.  December 29, 2009        CALIB, FRING             Eric
        The handling of the index table, dividing the scan into equal
        increments ignored the start and stop times.  Fixed to change
        the scan length and start and stop times to honor the overall
        start and stop times (from TIMERANG).
        Moved to 31DEC09 this date.

13057.  January 5, 2010        IMSTAT, IMEAN           Eric
        Images exceeding 2^31 - 1 pixels (e.g. 400x400x16112 in my
        case) will be upon us soon.  Changed counters in AU6D and
        IMEAN to double precision float and modified formats.
        Moved to patch January 18.

13070.  January 18, 2009           DOBAND               Eric
        Corrected BPASET, restoring ISVLA variable.  DATBND uses it to
        decide between all channels and the central 3/4 and we do not
        want to use the outer channels except for crazy VLBIers who
        insist on it.
        Moved to patch this date.

13076.  January 25, 2009           FITLD                Eric
        Olaf Wucknitz (Bonn Uni) reported another typo causing the
        polarization type stored in the AN table to contain garbage.
        Moved to patch this date.

13084.  February 5, 2009       IMEAN, IMSTAT             Eric
        The format printing the number of pixels has to be corrected
        for a previous format that shifted the decimal place.  The number
        printed was a factor of 10 off.
        Moved to patch this date.

13085.  February 10, 2010        Delay correction        Eric
        Amplitude should not be corrected for a delay error unless we
        know how much averaging was done after the initial
        correlation.  Commenting out the current correction.
        Moved to patch this date.

13086.  February 11, 2010           APCAL                Eric
        The read routine used the loop counter as a row number
        argument to TABWX.  But that routine increments the row
        counter so only every other row was read and occasionally it
        would try to read off the end.
        Moved to patch this date.

13092.  March 1, 2010            CVEL                   Eric
        My recent code contained the ability to go into an infinite
        loop when minor roundoff errors with times arose.  Added a
        slight extra bit to the time and added other checks to avoid
        the infinite loop.
        BUT - in the course of testing, I found that with
        single-source files, the source name was null which prevented
        the message showing the shift or lack thereof from being
        completed properly.  With single-source files having an index
        (NX) table, the task only shifted the first scan!  This fact
        was obscured by the error in the source name.  Corrected.
        Moved to patch this date.  The lack of shift is old and maybe
        needs to be in the NRAO newsletter.

13098.  March 4, 2010               UVFLG                Amy
        Flagging on shadowing was not working because UVFLG was not
        calculating the baseline length correctly.  This was traced to
        the fact that ARRTYP had not been taken out of the call sequence
        for the subroutine BASLIN.  Eric said he took that variable out
        of the  BASLIN last Sept., so shadowing in UVFLG has been broken
        since then.
        Moved to patch March 5.

13100.  March 5, 2010             FITLD                  Eric
        RDATE is not a required keyword.  Fixed tests on it to check
        only non-blank values.
        Moved to 31DEC09 since it alarms EVN users.

13111.  March 16, 2010       self defense in modeling       Eric
        Changed UVPROT to drop an odd line that set the max in U to
        the max rotated U.  Added line to set the max rotated U to the
        max input U if the rotation appears to make a short maximum
        (less than 0.9 max input u).
        This alone will solve UVCON.
        Moved UVPROT to patch March 17.

13114.  March 17, 2010         SPLAT, SPLIT again       Eric
        The alternate reference pixel was computed ignoring the fact
        that the reference pixel was corrected for BCHAN by UVGET.
        Moved to patch this date.

13124.  April 5, 2010             CVEL                   Eric
        The logical variable ISVLBA got lost last September 20 and so
        VLBA shifts were based on an antenna position rather than the
        center of the Earth.  The VLBA correlators rotate everything
        to 0,0,0 to make life easy on CVEL among other things.  For
        other correlators we have to guess to which antenna the
        velocity was shifted inside the correlator.  That guess is
        antenna 1 except for EVN for which it is antenna 2.  NOte that
        any renumbering of antennas makes a mess of this.
        Moved to 31DEC09 this date.

13129.  April 8, 2010             INDXR                  Eric
        Discovered that the AGAINS array in memory allowed only 8
        bands whilst the lower read routines returned band numbers
        1-10.  This led to troubles for P band (using Q values) and Q
        band for antennas that did not have any values of their own.
        Also discovered that the band ID routine would never return
        KA band but used Q instead so KA had the same troubles as Q
        and used Q band values.
        Moved to 31DEC09 this date.

13140.  April 21, 2010             BPASS                  Eric
        The call sequence to FRQUPD was not corrected last year in
        this task.  Has no VLB person run BPASS?
        Moved to 31DEC09 this date.

13142.  April 21, 2010           UVFLG                    Amy
        Fixed flagging for shadowing.  The hour angle was being
        misscalulated because the station longetude was being used
        instead of the array longitude.  Also added a 10 second
        the end time used for the shadowing.
        Moved to 31DEC09 23 June, 2010.

13206.  July 8, 2010         ANREFM troubles               Eric
        DBCON with DOARRAY = 1 could mess up the input headers when
        the AN file needed reformating.  Changed:
        RMEXT    Use LUN=118 not LUN=28.
        ANFIND   Add 'MWA' as a known array
        ANREFM   Do not use the provided CATBLK since it may have been
                 revised on us.  Get a safe one from CATIO for
                 creating corrected AN files.
        Moved to 31DEC09 July 9.

13207.  July 8, 2010        copy BP tables                Eric
        Changed BPFSEL and local copy of it in UVDEC.  They were
        deleting partly flagged (one polarization, not other) BP table
        records.  In fact one must keep even fully flagged solutions
        or the application routines will behave differently after a
        copy.
        Moved to 31DEC09 July 9.

