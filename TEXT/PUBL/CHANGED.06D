`;-----------------------------------------------------------------------
;  Copyright (C) 2005-2007
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in SOCORRO.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.

***********************************************************************
***********************************************************************

                 Changes while 31DEC06 is TST

***********************************************************************
***********************************************************************

11990.  December 4, 2005        Version update                 Eric
        Changed GETRLS, SETPAR, INSTEP1, install.pl, update.pl,
        ZXHLP2.PL, UPDCONTROL, AIPSPATH.*SH to put 31DEC06 in place of
        31DEC05.
        Moved nowhere.

11991.  December 4, 2005        TVFLG, SPFLG                 Eric
        The gridding routine needed a +0.001 to avoid numeric errors
        with computing the row to grid.
        Moved to 31DEC05 this date.

11992.  December 6, 2005             APCAL                   Eric
        Bad call seq to PLCLOS caused Intel load modules to abort.
        Moved to 31DEC05 this date, nowhere else.

11993.  December 6, 2005           IMAGR                    Eric
        MINPCH was allowed to change to match window sizes etc.
        Fixed to use a local value based on the user's MINPATCH
        without changing the user's value in routine CDECID in QCLEAN.
        Moved to 31EC05 this date, nowhere else.

11994.  December 8, 2005            install.pl             Eric
        Made grammar changes suggested by Chris Phillips (ATNF) and
        also added a read after an information display (of available
        OS flavors) so that the user has time to read the display.
        Moved changes to 31DEC05 this date.

11995.  December 9, 2005           DSORC                   Eric
        Olaf Wucknitz (Jive) pointed out an error in the routine that
        calls the source changing so that the changing was done on the
        input not the output.
        Moved to 31DEC05 this date.

11996.  December 9, 2005           CCRES                   Eric
        NEW TASK - like RSTOR except that it uses brute force methods.
        Thus it can subtract and/or add Celan components from/to any
        image without requiring the components to be on cells or the
        images to be powers of 2 in size.  A model file of varying
        Gaussian widths may be subtracted or added also.
        Moved to 31DEC05 this date.

11997.  December 12, 2005          TVCPS                   Eric
        Corrected it to read more than one image from disk when more
        than one is visible.  Note that this works only when the
        images are on different image planes and are the same in
        general image size and coordinates.
        Moved nowhere.

11998.  December 16, 2005          CPASS                 Eric
        Changed it to accept error code 3 from the solver as normal,
        error code 2 is reported but the answer accepted anyway (no
        converge), and so it dies only on error code -1 - input
        parameter error.  Fixed help file to tell defaults and suggest
        that many iterations and larger tolerance is needed.
        Moved to 31DEC05 this date.

11999.  December 16, 2005       Linux FDEFAULT.SH          Eric
        Changed $SYSLINUX references to *g77 and *gcc into *g77* and
        *gcc* so that versions named e.g. g77-3.4 will be recognized
        in FDEFAULT.SH, LDOPTS.SH and CCOPTS.SH.
        Moved nowhere.

12000.  December 27, 2005        UVCON                     Leonia
        The primary beam of an array can be variable at time if the
        array element is array itself (antenna station).
        It happens because the projection of the antenna station
        changes when the elevation of the source changes.
        LWA antenna station and VLA (when used at the phased array
        for VLBI experiments) are the typical examples. The new
        version of UVCON considers the primary beam as the circular
        two dimensional Gaussian with the given BMAJ=BMIN.
        Elevation (EL) and azimuth (AZ) are calculated for each
        visibility. BMAJ is recalculated as BMAJ=BMIN/sin(EL).
        BPA of the primary beam is calculated as BPA=AZ.
        This new option works (under control of BPARM(6)) only if
        the source model is given as a set of CC components
        (CMETHOD ='DFT', CMODEL ='COMP').
        Moved nowhere.

12001.  December 29, 2005         *GEOM helps             Eric
        The explain files for LGEOM, HGEOM, and PGEOM used the APARM
        nomenclature for the order of interpolation in part and then
        used the actual order number in the rest of the explanation.
        Changed it to use the APARM(n) nomenclature solely.  The order
        is APARM(n)/2 where n=1 for HGEOM and n=6 for the other two.
        Moved to 31DEC05 this date.

12002.  December 29, 2005           TABHDR                 Eric
        Changed it to complain but not quit when a recognized keyword
        has unrecognizable value, e.g.
            CRVAL1 = 'Right ascension reference value'
        as found on an HST tape!
        Moved nowhere.

12003.  January 4, 2006 VLBAUTIL, VLBALOAD, VLBAEOPS, VLBATECR Amy
        Fixed VLBALOAD, the final INDXR did not work if people
        used the new load data from disk option.
        Fixed VLBAEOPS and VLBATECR to set SYS2COM and SYSOUT to ''
        at beginning
        Moved nowhere.

12004.  January 5, 2006           XASERVERS, UNIXSERVERS     Eric
        There are too many sites for which the quote marks do not work
        in the xterm -e 'message-server ; sleep 3 ' commands and only
        one site that I am sure requires them.  Of course the sleep 3
        lets the sites that cannot use the quotes to read the message.
        I have dropped the quotes so some sites will now have an xterm
        flash by with no way to see what is wrong.
        Moved to a re-opened 31DEC05 this date.

12005.  January 6, 2006        FILLM, PRTAN               Eric
        Changed FILLM to detect EVLA antennas and name them as such
        ('EVLA:aNN') and changed the form of the VLA names to match
        ('VLA: aNN').  Changed PRTAN to recognize either as VLA along
        with the old form of VLA name ('VLA:aNN ').
        Moved nowhere.

12006.  January 6, 2006            TVUTIL                 Eric
        Missed one variable that needs to be LONGINT - caused DOTV in
        IMAGR to abort on AMD 64s.
        Moved to 31DEC05 this date.

12007.  January 9, 2006           VBGLU                    Amy
        The original VBGLU assumed a strict time order for the tables
        it was merging.  This was a problem for the TY table which is
        in antenna-time order.  Fixed that and added a feature where if
        less than 95% of the 2nd table is merged with the first a loud
        warning message is given and the output table is deleted.  This
        seems to be a problem if the times of the 2 tables are not lined
        up.
        Moved nowhere.

12008.  January 12, 2006          VBGLU                      Amy
        Wouldn't compile under Macs because of a couple superfluous
        commas in WRITE statements.  Fixed.
        Moved nowhere.

12009.  January 16, 2006          UVPLT                 Eric
        Changed labeling for antennas to take into account
        de-selection and to show 0 as * even on deselection.
        Moved nowhere.

12010.  January 17, 2006         install.pl             Eric
        Two places fixed where words ran together in messages to user.
        Moved nowhere.

12011.  January 17, 2006         DBCON                 Eric
        Fixed code to handle FQ entries that do not have the same
        channel width (in magnitude or sign) as the header.  This
        matters when the reference channel is changed to 1.
        Moved nowhere - moved to 31DEC05 patch 21 Feb.

12012.  January 18, 2006       FQ increments                Eric
        Changed to allow for channel increments that differ between
        IFs in the FQ table (due to sideband or real differences)
        DGHEAD   To set the increment of BIF into the CATBLK.  This
                 will force a major relink of tasks.
        SPLAT    To adjust the output FQ table entries to account for
                 averaging mode 3 with differing increments in BIF
                 and higher IF numbers.
        SPLIT    Similar change required.
        Changed SPLIT and SPLAT help files to clarify the differences
        and which tables are copied.
        Moved nowhere.

12013.  January 18, 2006          tapes                     Eric
        $APLGEN versions of ZTAPR and ZMOUNR did not use the right
        format for the new LUNs.
        Moved nowhere.

12014.  January 19, 2006          DSMEAR                  Eric
        This VLBI de-smearing routine did not handle FQIDs correctly.
        It should test for a match or for either the CQ table or the
        calling routine FQ <= 0.  It only tested for a match so when
        there is only 1 FQ and hence no FQID parameter, the routine
        failed.  Made fixes to BPASET, BPGET, CSLGET to require > 0
        for both FREQ IDs or a match.
        Moved nowhere - moved to 31DEC05 patch 21 Feb.

12015.  January 20, 2006            tapes                  Eric
        Changed $APLUNIX/ZABOR2.C to ignore SIGPIPE so that AIPS and
        TPMON et al will not abort on certain tape errors.
        Let's hope this helps more than hurts.
        Moved nowhere.

12016.  January 23, 2006             SAD                 Eric
        Fixed the routine that computes a string of the RA/Dec in
        sexagesimal.  The round-off terms were not reduced when the
        accuracy was increased - the resulting display was 0.0005
        seconds of time and 0.005 seconds of arc too large.
        Moved nowhere - moved to 31DEC05 patch 21 Feb.

12017.  January 24, 2006          CPASS                 Eric
        Lynn Matthews pointed out a bug in handling the HI cards so
        that all HI entries after ANTWT were omitted.
        Moved nowhere.

12018.  January 25, 2006         ELINT                   Leonia
        Rick Perley erroniously put inputs for CALSOUR='' and got
        a wrong answer of ELINT. Actually ELINT requires explicit
        list of the CALSOUR. So ELINT is changed to terminate its
        job if CALSOUR='' with the relevant message. Help file is
        updated.
        Moved nowhere.

12019.  January 27, 2006            CPASS                 Eric
        Added option to write out fit result as a normal BP table
        rather than the results of the fit.  This allows time
        smoothing of real and imaginary rather than of Chebyshev
        polynomial parameters.  Made this option the default.
        Moved nowhere.

12020.  January 30, 2006          VBGLU                 Eric
        Fixed the memory allocation for pointers to four times the
        absolute minimum (stll << 1000000) and changed to use dynamic
        memory generously for the comparison buffer.  Changed the
        logic that decided when and how to compress that buffer by
        putting the UVDISK call ahead so that the correct amounts
        would be known.  Added test for overflow as well.
        Moved nowhere.

12021.  January 30, 2006             WIPER               Eric
        Corrected source number initialization to -1 since 0 is what
        one gets for single-source files and elevation etc require a
        source parameter lookup.  Added a call to IAXIS1 to display
        axis labels whenever the full image is visible.
        Moved source numebr to 31DEC05 via patch 21 Feb 2006.

12022.  January 30, 2006            CPYRT                   Eric
        Cleaned up typing of help file and changed the copyright
        statement for non-NVSS images.
        Moved nowhere.

12023.  January 31, 2006            VBGLU                 Eric
        Found more addressing problems triggered by data present in
        data set 2 but missing in data set 1.  These should be counted
        if possible but I just did a fix to keep it from screwing up
        royally.
        Moved nowhere.

12024.  February 1, 2006           VLBAARCH               Lorant
        Fixed some code to properly deal with bandcodes - a feature
        for unusual experiments that apparently was never used so far.
        Moved nowhere.

12025.  February 1, 2006             LOCIT                Eric
        Adjusted the VLA-specific parts of the station ID code to
        match the new (and old) formats of FILLM.
        Moved nowhere.

12026.  February 7, 2006                    CLCOR         Leonia
        CLCOR has interpreted  the leap second using MOD for the
        IAT-UT1 values read from the USNO file. It is wrong in some
        cases for example at 2006 when the leap second jumped from 32
        to 33 second. Now the leap second added to the USNO data
        before interpolation. The leap second is picked up from the CT
        table (the first value). The problem can happen at the rare
        case of changing the leap second during the interpolation
        interval.
        Moved nowhere.

12027.  February 8, 2006          UVCON                  Leonia
        The history file has not included the name of the model file.
        I added it.
        Moved nowhere.

12028.  February 10, 2006        CLCOR                   Leonia
        Recent fix of the leap second problem (#12025) does not care
        the case of the leap second jump during the interpolation
        interval. The J. Benson's interpolating subroutine UT1COR
        has been modified adding the leap second input as an array
        picked up from the CT table. So the UT1-UTC is converted to the
        smooth function UT1-TAI before interpolation. The leap second
        of the observation day added to interpolated UT1-TAI to return
        back to UT1-UTC.
        Moved nowhere.

12029.  February 10, 2006        UVCON                   Leonia
        UVCON has failued when APARM(7)= integration/separation time=0.
        It happens because the number of time intervals is calculated as
        (Hmax-Hmin)/APARM(7) + 1. Inspite of the fact that it is rather
        natural to give an explit value for APARM(7), some users still
        leave APARM(7)=0. So I added the default for APARM(7):
        0 => 1.E6. Such a big value provides the number of time intervals
        equaled 1. Therefore now APARM(7)=0 means simulate snapshot
        observation near hour angle Hmin. The default is added to the
        APARM(10)-blockage as well.
        0 => 1. Maximum fractional area blockage of one antenna by any
        other is equal 1 (the total blockage).
        Therefore the default (1) allows any blockage.
        Moved nowhere.

12030.  February 10, 2006       LOCIT                    Amy
        The order of statements caused the pad name to be truncated.
        Using a second variable, repaired the problem.
        Moved nowhere.

12031.  February 17, 2006           SNEDT                  Eric
        Changed SNEDT and QEDIUTIL to allow for editing of TY values.
        A number of problems, esp with crowded displays, were found in
        the existing routines.  A SET VALUES function was added as was
        the re-writing of the TY table with the changed values.
        Moved nowhere.

12032.  February 17, 2006          LISTR                 Eric
        In the gain averaging subroutine, the conversion of times from
        double precision to single caused enough loss of accuracy
        (when the times were 2.5 days or more) that each record
        appeared to be at a later time.  This caused the task to print
        each gain on a separate line.  A change to double precision
        was enough to avoid this problem.
        Moved nowhere.

12033.  January 17, 2006            SPLIT                 Eric
        The first UVGET ('INIT' call for each source did not set
        UVOPEN until after branching on error.  Therefore it did not
        close it.  Therefore it could not open things for the next
        source.  Moved the UVOPEN statement.
        Moved nowhere.

12034.  February 19, 2006            SPLAT                 Eric
        Changed it to force the creation of a multi-sourrce file even
        when only one source is selected if the assemble option
        (APARM(7) = 0) is selected.
        Moved nowhere.

12035.  February 20, 2006           SETFC                Eric
        Found an error in setting the boxes around NVSS sources.  The
        X position was computed by dividing the RA difference by the
        cos of declination.  That should be a multiplication when
        converting to pixels.
        Moved to 31DEC05 via patch 21 Feb 2006.

12036.  February 20, 2006            VBMRG                Eric
        Correct VBMRG to (1) allow records longer than 2000 words, (2)
        to read/write compressed data, and (3) to be a bit more modern
        in typing/coding style.  Changed VBMRG help file to warn that
        results are changed by compression.
        Moved nowhere.

12037.  February 21, 2006         FLATN                    Eric
        Changed INTERPLATE.FOR - several intermediate variables needed
        to be LONGINT.
        Moved to 31DEC05 via patch 21 Feb 2006.

12038.  February 22, 2006          IBLED                   Eric
        Changed:
        1. UVGET  had a bad error message which had mismatched
                  variable list and format
        2. IBLED  did not set error returns in the init routine and
                  did not check for them in main
        3. IBLED  did not provide a sensible default for NMAPS and
                  used numerical values for call arguments that are
                  in/out
        4. IBLED  perhaps due to changes in FACGRD failed to detect
                  missing model images (it looks for I, R, and L) and
                  quit instead if all 3 were not present.
        Moved nowhere - went to patch 31DEC05 23 Aug 2006.

12039.  February 24, 2006            IMAGR                  Eric
        Changed IMAGR.FOR and .HLP to allow beamss of 4086x4096 when
        IMAGRPRM(10) is 1.  Changed QCLEAN to do the beam histogram
        over 2060 rather than 1030 values and allow the maximum patch
        to be 2048.  If that does not fit in the AP, adjusted the
        upper limit to be a bit less than before since the previous
        adjustment still led to an overflow.  Fixed an error message
        that said F7.0 on an integer variable.
        Moved nowhere.

12040.  February 24, 2006            VLOG                    Eric
        Changed status to WRIT on first CATIO and added another CATIO
        at the end of the history routine to reset the status.
        Moved nowhere.

12041.  February 27, 2006        CLCAL, SN2CL                Amy
        There is a feature of CLCAL where if a SOURCE does not
        exist in the input CL table that the SN table then the SN
        entries for CALSOUR are appended to the SN table.  This caused
        a problem for a user who already had entries for that CALSOUR.
        I changed SN2CL so that it makes a table of sources, subarrays,
        frequencies and time ranges that exist in the input CL table
        and if the SN entry that it wants to append is inside this time
        range for the specific source (subarray and freq) it does not
        append that entry.
        BLAPP also used SN2CL was also recompiled.
        Moved nowhere.

12042.  February 28, 2006             FILLM                  Eric
        Added a test for telescopes on the master pad (MPD) so that
        they will not be called "OUT".
        Moved to on-line FILLM today, nowhere else.

12043.  March 1, 2006              install.pl                Eric
        Added code early in the script to detect use as root and to
        forbid that, exiting cleanly but abruptly.
        Moved nowhere.

12044.  March 2, 2006              CLCOR                     Leonia
        Correction of multi band delay is added at the case of the
        OPTYPE='ANTP'. Looking at the CLCOR's codes I found that
        multi band delay correction is implemented only for
        OPTYPE added recentely 'atmo', 'eops', 'suns' and 'antp' now.
        The multi band delay correction and clock correction have been
        implemented only for the first stokes, although formally
        CL table includes them for both stokes. So the multi band
        delay correction and clock correction for the second stokes
        are added.
        Moved nowhere.

12045.  March 3, 2006          CLCAL, SN2CL                 Amy
        Added warning message associated with change of Feb 27.  It
        will not tell the user it could not find the selected SOURCE,
        TIMERANGE, SUBARRAY or FREQID in the input CL table and
        therefore was going to attempt to append SN table.
        Moved nowhere.

12046.  March 6, 2006             VBGLU                    Eric
        Rewrote the task to glue together all times from all files,
        discarding no data.  The older algorithm was more complicated
        and difficult and lost any data found in files 2-4 but not in
        file 1.
        Moved nowhere.

12047.  March 6, 2006              TABF3D                  Eric
        Fixed TABF3D subroutine so that the default column count is 1.
        It was returning zero.  Linked FITLD, UVLOD, IMLOD, etc.
        Moved nowhere, went to patch 31DEC05 23 Aug 2006.

12048.  March 7, 2006           VLARUN+HLP                 Lorant
        New VLARUN has many upgrades such as autoflagging, full primary
        beam, check on Fast-switching names and some imaging parameters.
        Determines theoretical rms, integration time and has an option
        for self-cal (which is still a bit fragile). More to follow.
        Moved nowhere.

12048.  March 11, 2006           FILLM                      Eric
        PT was listed as EVLA since it is connected by fiber.  Fixed
        this special case.
        Moved nowhere.

12049.  March 11, 2006          LIBR.DAT                   Eric
        The $SYSLINUX LIBR.DAT had the QYPGNOT list rather wrong.
        curious that it seems to work.  Other versions are fine.
        Moved nowhere.

12050.  March 12, 2006           xxINI routines             Eric
        The xxINI routines need to close the file after the first
        round of initialization, reopen it, find the diesired columns,
        and check for (but survive) missing or empty ones.  This
        allows for tables that have all the desired columns but in a
        different order than "standard" and provides for warnings.
        Routines used only in FITLD that did the search for columns,
        but assumed that all were in order:
           AGINI   ATINI   BCINI   CAINI   CMINI   FRINI   SOINI
           BTINI
        Routine in FITLD that assumed all was in order with no search
        for columns:
           GAINI
        Routines with elaborate Chris Flatters code needing to be
        toned down and to allow missing columns to be reported but not
        kill things:
           FLINI   GNINI   PHINI   TSINI
        More general routines, needing messages on number values and
        missing columns and more use of TABERR
           ANTINI  CTINI   FQINI   POINI   WXINI   BLINI   BPINI
           BSINI   CALINI  CQINI   GCINI   HFINI   IMINI   MCINI
           OBINI   SNINI   SOUINI  TYINI
        General routines needing to test for columns
           FCINI   MFINI   CCMINI  CSINI   FLGINI  GPINI   IMINIT
           NDXINI  OFINI   OTTINI  PCINI
        Generically - made all message levels 6 or 7 so they can be
        suppressed.
        Changed TABERR - it suppressed the message suppression.
        Changed it to honor suppression.  Corrected the variable
        declarations - incoming strings should not have a length
        declared.  It claimed 6 for the subroutine name which is
        usually 5 and so printed an extra character (or a null
        stopping the rest of the message).
        ANTINI will not warn on empty columns of ORBPARM, POLCALA,
        POLCALB.
        Moved nowhere.

12051.  March 13, 2006             WIPER                     Eric
        Added a history writing subroutine with an elaborate attempt
        to list all sources included.
        Moved nowhere.

12052.  March 14, 2006      CALIB, FRING, KRING              Amy
        The loop that set ANTWT only went from 1-20 (i.e., only the
        first 20 were set to the input ANTWTs).  The loop was changed
        to 1-30.
        Moved nowhere.

12053.  March 15, 2006            INI routines               Eric
        Changed AGINI to skip complaints about the ORBPARM column.
        Changed CTINI to omit complaints about the TIME INT column
        when the table has fewer than 12 columns.  Changed SOINI to
        treat EPOCH and EQUINOX as equivalent column labels.
        Moved nowhere.

12054.  March 17, 2006         Intel compiler               Eric
        The Intel compiler is up to its trick of changing doubles to
        singles prematurely.  Changed:
        POPSRD    New routine to do the conversion between POPS
                  2-reals representation of doubles and true doubles
        OPTIMIZE.LIS   Added POPSRD with no optimization
        AU7       Verbs ALTDEF and AXDEFINE  adverbs RESTFREQ and
                  AXVAL to use POPSRD
        AU7A      Adverb KEYVALUE in verbs EGETHEAD, GETHEAD,
                  GETTHEAD, PUTHEAD, PUTTHEAD, TABGET, TABPUT to use
                  POPSRD
        PUTKEY    Used by AU7A to put keyword values
        CATKEY    Several statements checking the range of allowed
                  types were incorrectly typed and so checked that the
                  type was >= 1 twice rather than >= 1 and <= 5.
        TBHEAD    Use POPSRD
        TBDATA    Use POPSRD
        TABED     Corrected to use POPSRD for double and KEYV(1) for
                  single precision; it used the sum of KEYV(1) and
                  KEYV(2) set back into the single and did not test
                  for the two halves being equal (which we assume the
                  user does not mean).  Changed help file to be clear
                  on this point.
        VLBIN     Changed to use POPSRD for rest frequency
        SETJY     Changed to use POPSRD for rest frequency
        Moved nowhere.

12055.  March 19, 2006            IMMOD                    Eric
        Removed arbitrary -180 to 180 limit on FWIDTH in help file.
        Moved nowhere.

12056.  March 21, 2006          More INI routines            Eric
        Suppressed messages for polarization 2 when there is only one
        polarization in IMINI, MCINI, GCINI, TYINI.  Corrected nasty
        typo in CATKEY created March 17.  It caused catalog keywords
        to have only one word of data stored, messing up double
        precisions and characters.  This has a bad affect on FITLD.
        Moved nowhere.

12057.  March 21, 2006           ANBPL                       Eric
        new task to print and plot uv-data converted to antenna-based
        quantities.  Weights, amplitudes, phases, reals and
        imaginaries computed in a couple of ways can be plotted
        against time, elevation, hour angle, azimuth, and parallactic
        angle.  The plots are similar to ones from VPLOT and the
        prints are the LIST form of LISTR more or less with user
        control of the number of digits.
        Moved nowhere.

12058.  March 22, 2006          Mac Intel                  Eric
        Added Mac Intel port to system by changing
        AIPSPATH.CSH Added cases for $ARCH MACINT with library
                     INTELCMP
        AIPSPATH.SH  Added cases for $ARCH MACINT with library
                     INTELCMP
        AREAS.CSH    Added $APLMACINT, $INCMACINT, $SYSMACINT;
                     changed old MAC ones to $APLMACPPC, $INCMACPPC,
                     $SYSMACPPC
        AREAS.SH     Added $APLMACINT, $INCMACINT, $SYSMACINT;
                     changed old MAC ones to $APLMACPPC, $INCMACPPC,
                     $SYSMACPPC
        LIBR         $ARCH case to MACPPC or MACINT and $ARCH test for
                     MACPPC to MAC*
        START_AIPS   $ARCH tests for MACPPC to MAC*
        TVALT        Added case for $ARCH = MACINT
        ZLASCL       $ARCH tests for MACPPC to MAC*
        ZLPCL2       $ARCH tests for MACPPC to MAC*
        UPDUPDATE    special code for macs no longer needed.
        MAKE.MNJ     Add MACINT to list
        MAKE.BMNJ    Add MACINT to list
        UPDCONTROL   Change to MAC*
        UPDERROR     Change to MAC*
        install.pl   Use $mach = i[34567]86 to recognize MACINT and
                     add that to comments
        XAS.SHR      Add MACINT to Makefile options
        In $SYSMACPPC:
        COMRPL.ADD   Change to MACPPC and drop APLLINUX
        LIBR.DAT     Change $APLMAC to $APLMACPPC
        INCS.SH      Change $INCMAC to $INCMACPPC
        In new $SYSMACINT coped from $SYSMACPPC:
        CDVER.SH     no real change
        COMLNK.ADD   no change
        COMRPL.ADD   Change to MACINT and drop APLLINUX
        INCS.SH      change to $INCMACINT
        LIBR.DAT     Change $APLMAC to $APLMACINT and change APLMAC
                     directory name to APLMACINT (PPC will keep APLMAC
                     since it is already in use)
        CCOPTS.SH    Add Intel compiler options
        LDOPTS.SH    Add Intel compiler options
        FDEFAULT.SH  Add Intel compiler options
        In new $APLMACINT copied $APLMACPPC and changed:
        ZDCHI2.FOR   Changed byte order code to 3, SYSTYP and SYSVER
        Copyright and version info updated in ZCPU.C, ZERRO2.C,
        ZFRE2.C, ZTACT2.C, ZTKILL.C, ZTXMA2.C and the FORTRAN stubs
        ZMOUN2, ZTAP2, and ZTPWA2.
        Moved nowhere.

12059.  March 24, 2006             system areas               Eric
        One of the update C routines requires directory logicals to be
        8 or fewer characters.  Changed $SYSAIPS/AREAS.DAT which I
        forgot and which is the most important and $SYSUNIX/AREAS.*SH
        to have the shorter names (APLMACPP and APLMACIN etc).  Edited
        the old PUTBCK.UPD file to fix this.
        Moved nowhere - forced a MNJ.

12060.  March 24, 2006           ANBPL                    Eric
        The solver routines are too fussy for this task.  Changed
        ASOLVE    Add FFLAST argument, change levels to be fussier
                  until the last which can be set from outside -
                  default 3.0 sigma.  Change to put a floor on RMS so
                  that it cannot reach too small so that math error
                  looks like 10 sihma.
        VSOLVE    Add FFLAST argument to set last cutoff level -
                  default 2.5 sigma.  Added an RMSMIN also.
        FINDR     Changed all calls to ASOLVE and VSOLVE to add the
                  control argument at its default value.
        FLAGR     Changed all calls to ASOLVE and VSOLVE to add the
                  control argument at its default value.
        ANBPL     Changed calls to ASOLVE to cut at 4 sigma and to
                  VSOLVE to cut at 3.5 sigma.  Corrected to understand
                  that <= 0 from ASOLVE means no good and (real,imag)
                  = (0,0) means bad from VSOLVE.
        Changed ANBPL also to do multiple polarizations and to plot
        the IFs and polarizations together or separately under control
        of OPCODE.  They are printed separately.
        Moved nowhere.

12061.  March 26, 2006         Mac stuff              Eric
        INCS.SH    INCMACPPC -> INCMACPP  also COMRPL.ADD
        INCS.SH    INCMACINT -> INCMACIN  also COMRPL.ADD
        UPDUPDATE  Special code put back for $SYS$ARCH for Macs
        Moved nowhere.

12062.  March 28, 2006       UVFIX                     Leonia
        Add 'VLBI' to the list of vlbi arrays: 'VLBA' and 'EVN'.
        The help file updated.
        Moved nowhere.

12063.  March 28, 2006            DDBGR                    Eric
        NEW: Service program - dumps disk contents to debug the
        writing of disk files.
        Moved nowhere.

12064.  March 28, 2006             BPLOT                   Eric
        Added PDIF operation to difference the BP phase with the
        average BP phase - the vector difference can get big
        differences.  Fixed end handling so that it will view doing
        some plots and then hitting the end of data as normal.
        Moved nowhere.

12065.  March 29, 2006          3C138_X               Amy/Eric
        Put back Amy's new model of 3C138 at X band.  It incorporates
        interfering sources from some distance away.  Sorted CC file
        and ran IMEAN and wrote a sub-image with CALWR.
        Moved nowhere.

12066.  March 31, 2006          BPLOT                   Eric
        Corrected tendency to label everything when that causes the Y
        axis labels to overlap.  Added DO3COL option 2 to use color
        for intensity rather than time or baseline - allows closely
        spaced lines.  Added TIMERANGE backwards to plot only
        TIMERANGE but average all times.
        Moved nowhere.

12067.  April 1, 2006             KNTR                   Eric
        Fixed top axis labeling - needed more LOCNUM messing around to
        make labeling strings be properly determined.  It labeled each
        image line with the same labels previously.
        Moved nowhere.

12068.  April 1, 2006            PBCOR                   Eric
        Copy keywords to output image.  Required new FILKCP subroutine
        for WaWa IO system.
        Moved nowhere.

12069.  April 9, 2006             IMAGR                  Eric
        Major new option - to use a spectral index image to alter how
        bandwidth sysnthesis component subtraction is done.  Changed:
        IMAGR    Add FQTOL and IN3NAME and IN4NAME et al adverbs,
                 create SPIX AND SPIXC object and check their
                 existence, add to HI file info.
        IMAGR    HELP file: Change description of IMAGRPRM(1) to
                 mention standard antenna beam models for VLA and
                 ATCA.  Add IMAGRPRM(17) as indicator for spectral
                 index correction and radius of an averaging circle
                 when reading the spix image.  Add IN3NAME, IN3CLASS,
                 IN3SEQ, and IN3DISK to specify a spectral index
                 image and IN4NAME, IN4CLASS, IN4SEQ, and IN4DISK to
                 specify a spectral index curvature image.  Add FQTOL
                 to control how many spectral channels are done at one
                 time when doing the primary beam and spectral index
                 corrections.
        QUVUTIL  Pick up SPIX object and call PBFSUB if there is a
                 SPIX object and/or primary beam correction requested
        POSITION If another POSTION routine was called then PSNANG
                 thought all was well when in fact the pointing
                 position was not set.  Changed all routines that call
                 SETLOC for LOCNUM=1 to zero the pointing position and
                 PSNANG to re-initialize if that position is zero or
                 the class name is different.
        PBUTIL   Changed PBFSUB and PBFDIV to pick up SPIX and FQTOL.
                 The DO loop over channels was replaced with code to
                 do as many channels together as FQTOL would suggest.
                 If the array is VLA or ATCA, PBCALC is called to get
                 the beam parameter numbers.  PBFCCT and PBFSCI have
                 new call sequences to receive the new parameters
                 (PBFINC, PBPARM, SPIX) and to call SPVALU if SPIX is
                 not blank.  PBFACT has a new call sequence to receive
                 the PBFINC, SINDEX, PBPARM parameters.  It sums over
                 the PBFINC channels, uses the PBCALC code if
                 PBPARM(1) is positive, and applies the spectral
                 index including curvature.   The correction for
                 spectral index is limited to the range 0.001 to 1000
                 to avoid gross overflows.  The average value of the
                 PBFINC channels is used compared to the average over
                 all channels to set the scaling for the current set
                 of channels.  SPVALU is new to read the spectral
                 index image(s) and get the value by interpolation or
                 averaging over a circular aperture.
        SPIXR    HELP file - removed some XMOM things, gave necessary
                 help for OPCODE, and math formula for fitting.
        Moved nowhere.

12070.  April 9, 2006              CPYRT                 Eric
        Added call to KEYCOP.
        Moved nowhere.

12071.  April 10, 2006             IM2UV                   Eric
        Added alternative scaling options and made the default divide
        by the clean beam area if present in the image header.  Fixed
        the handling of RA and DEC axes dropping the --SIN business
        which confuses UV routines.
        Moved nowhere.

12072.  April 13-14, 2006            UVHGM                   Eric
        Added calibration and all data/calibration selection adverbs
        to the task.  Changed allowed Stokes and made the maximum
        number of boxes larger.  Added optional Gaussian fitting.
        Moved nowhere.

12073.  April 14, 2006             UVHIM                    Eric
        New task: a variant on UVHGM to make an image of a
        2-dimensional histogram.  Axes may be vis real, imaginary,
        amplitude, phase, or weight or time or baseline u, v, w,
        length, or position angle.  A choice of smoothing function is
        available for counting each sample on the grid.
        Moved nowhere.

12074.  April 15, 2006              EXTLIST                 Eric
        Changed UVHGM to pass info re multiple subarrays and FQIDs.
        When a plot file was created on disk the header was destroyed
        (it used the output header from the cal routines not the real
        header of the data).
        Changed ANBPL to use a unique plot type number (32) and the
        correct number of adverbs (293 was 329)
        Changed AU8A to recognize new UVHGM format and do useful
        things with the new adverbs and find the old ones.
        Changed AU8A to recognize ANBPL and do something useful.
        Moved nowhere.

12075.  April 16, 2006            DOCALIB                   Eric
        Changed all tasks to calibrate weights if DOCAL is > 0 and
        <= 99.  One can still avoid calibrating weights but only by a
        deliberate setting of DOCAL to an odd value (100, 101 -
        actually 99.00001 to 101.0 - are allowed).
        Changed
        $APGNOT: ACFIT  BLAVG  CLIPM  DECOR  FLGIT  LISTR  RLDIF  SHOUV
                 SPCAL  SPLAT  SPLIT  UV2TB  UVFIT  UVFND  UVHIM  UVHOL
                 UVIMG  UVMLN  UVPRM  UVPRT
        $APGOOP: FINDR  FLAGR  MAPBM  RFI
        $QPGNOT: BLCAL  BPASS  CALIB  CPASS  DEFLG  FRING  HORUS  KRING
                 LPCAL  PCAL
        $QPGOOP: BLING  EDITR  IMAGR  OMFIT  SCIMG  SCMAP
        $YPGNOT: ANBPL  CLPLT  FRMAP  FRPLT  IBLED  POSSM  SPFLG  TVFLG
                 UVHGM  UVPLT  VPLOT  WIPER
        Fixed copyright in AIPS.FOR to include 2006.
        Dropped all precursor remarks in JTRIM inside $AIPNOT/DDBGR
        Moved nowhere.

12076.  April 18, 2006           STUFFR                    Eric
        New procedure and run file to stuff multiple-day observations
        into a compressed data set.  Each data set is converted to
        hour angles rather than times, sorted into BT order, and
        concatenated with DBCON.  Then UBAVG is run on the result.
        TI2HA needed to be fixed to drop the subarray code from the
        baseline ID when it drops it from the times.
        Moved nowhere.

12077.  April 18, 2006           APCAL                    Amy
        Various changes:
           1) Used to identify all single stokes as RR, fixed.
           2) Added error recognition to opacity fits.  If the
              receiver temp or tau0 was < 0 or greater than
              certain maximum values then croak and tell user
              to edit Tsys.
           3) Added robustness to two of the fitting algorithms,
              GRID and OPAC, adding GRDR and OPCR.
        Moved nowhere.

12078.  April 18, 2006            BPLOT                   Eric
        The X axis labeling when doing more than 1 IF confused LWPLA.
        Changed it to do all labels for 1 IF and then all for the
        next.  Added a digit to the pixrange display at the bottom.
        Moved nowhere.

12079.  April 20, 2006       VLBAUTIL, VLBATECR           Amy
        There were some "background" adverbs in VLBATECR because
        I didn't default the verbs GETHEAD and GETTHEAD.  Fixed.
        Minor changes:
        Added a TGET VLBACALA at the end of VLBACALA.  Added some
        words about BCHAN and ECHAN to VLBAMPCL.HLP.
        Moved nowhere.

12080.  April 23, 2006        Color contours               Eric
        Added the ability to color each contour level separately:
        Changed:
        G3VCOL  To write a plot command only if the color has actually
                changed.
        CONDRW  New call sequence adds RGBLEV and changes DOCOLR to
                integer (0 no color, 1 use color already set, 2 use
                RGBLEV and BLKLEV).  Corrected - dashed lines were not
                drawn in color previously when they should have been.
                Also changed to not draw black lines when the contours
                are colored.
        PCNTR   Add adverbs and code to see if RGBLEV is ever
                non-zero.  Changed call sequence to CONDRW. Corrected
                to force 3-color with B&W images if any of the other
                true color options are used.  DODARK inhibited for
                contours if color contours are being drawn.
        KNTR    As PCNTR.
        GREYS   Change call sequence to CONDRW, dummy the color
                contour arguments.
        CNTR    Change call sequence to CONDRW, dummy the color
                contour arguments.
        POPSDAT Add RGBLEVS and more scratch adverbs (II, JJ, KK, RR,
                BB, TT, XX, YY).
        NEWPARMS  add RGBLEVS.
        RGBLEVS   New help file
        SETRGBL   New system RUN file: defines procs to set RGBLEVS by
                  various prescriptions.
        CIRCLEVS  New help file for new proc
        RAINLEVS  New help file for new proc
        FLAMLEVS  New help file for new proc
        STEPLEVS  New help file for new proc
        Moved nowhere.

12081.  April 24, 2006             PEELR                       Eric
        New RUN file and procedure to remove all image facets from a
        uv file.  Then it loops over a list of facets - restoring the
        one facet (all resolutions), self-cal'ing, removing the model
        from the self-cal output, and undoing the self-cal SN table
        from the residual data.  When the list is complete, it
        restores all facets to the output UV data.  This should clean
        up the garbage around outlier, "interfering" sources.  We may
        add options to image and repeatedly self-cal but that may not
        be necessary and will be complicated.
        Moved nowhere.

12082.  April 26, 2006          STARPL                  Eric
        Skip call to PNTPLT on symbol types <= 0 - it plotted a type 1
        in that case rather than nothing which we promised in the
        STARS help file
        Moved nowhere.

12083.  April 26, 2006             PEELR                Eric
        Add BCHAN and ECHAN for CALIB only.
        Moved nowhere.

12084.  April 28, 2006             PEELR                Eric
        A bad piece of logic made the looping over multiple fields not
        work.  New logic should fly.
        Moved nowhere.

12085.  April 29, 2006           UPDUPDATE                Eric
        The make on XAS should not be done for binary jobs since the
        compilation is done at the AOC and may not work at the remote
        site.
        Moved nowhere.

12086.  May 1, 2006             EDITA, EDITR             Eric
        Changed QEDIUTIL to offer the choice of flagging the current
        source or all sources.  Fixed it to avoid asking the flag
        number range on UNDO FLAGS when there are 0 or 1 flags
        currently.  Got rid of extraneous message when listing 0
        flags.  Corrected nasty error that caused it sometimes not to
        find the nearest point when the user pointed exactly at the
        point.
        Moved nowhere.

12087.  May 2, 2006               PEELR                    Eric
        Changed dimension of PPARM to 100 to allow more facets to be
        processed at once.  The start and stop sections require all N
        facets to be UVSUBed while the inner loop deals with only 1
        facet at a time and so is very much faster in many cases.
        Changed PEELR.001 and PEELR.HLP
        Moved nowhere.

12088.  May 3, 2006            install.pl                  Eric
        Changed the method of finding Solaris memory size per a
        suggestion of Vincent McIntyre of CSIRO.  Fixed the old code
        to test for the file's existence before opening it.  It will
        not exist on non-Solaris machines.
        Also - the display of options does not update properly after
        the user enters compiler options - moved the SCREEN_10A point
        to force the update.
        Moved nowhere.

12089.  May 3, 2006              IMEAN                    Eric
        Added a plot of the fit histogram on the requested histogram.
        Simplified the fitting code for this simple case.
        Reworded the DOHIST part of the help file.
        Moved nowhere.

12090.  May 4, 2006             CCNTR                       Eric
        Forgot to change CCNTR for CONDRW call sequence.
        Moved nowhere.

12091.  May 4, 2006           KNTR, PCNTR, EXTLIST          Eric
        Corrected the number of parameters in these two tasks which
        have been 1 short for some time (and PCNTR added 180 while
        needing only 90 new ones).  Changed AU8A to have EXTLIST know
        the number (corrected) of adverbs now and say something about
        color contours if they are used.
        Moved nowhere.

12092.  May 4, 2006                PLGET                    Eric
        New verb to get the adverbs of a plot task from the plot file.
        Works with EXTLIST - list the PL files then plot them with
        TVPL and then get the KNTR (or whatever) adverbs that
        generated a plot file you like.
        Moved nowhere.

12093.  May 5, 2006        stars                          Eric
        There is confusion on star type 0.  Changed:
        STARPL   Will plot a symbol for star type 0 if it does not
                 plot a label string.  Plots symbols for all positive
                 star types and plots no symbol for all negative star
                 types.
        STARS    Changed to set star type 0 to -1 if there is a label
                 string or +1 if there is not (also help file)
        GSTAR    Changed to limit FACTOR to 1 - 24, fixed help file to
                 list the current types.
        MF2ST    Changed to limit types to 1-24 and do the scaling in
                 the range.  Updated help file.
        STFND    Changed to limit star type to range 1-24 and changed
                 the CPARM(10) parameter to make the user really
                 request pixel coordinates (non-standard for ST files)
                 Updated the help file for these.
        Moved nowhere.

12094.  May 7, 2006              CALIB                 Eric
        Changed the reporting of individual closure errors at level 2
        to also examine the expected error (1/sqrt(weight)) and only
        report those > 2.5 sigma.
        CLBPA   Changed to recompute weights as needed after calls to
                GCALC et al.  Changed the PRTLV passed to GCALC by 1.
        CLBSNR  Changed to compute the average closure error with and
                without weighting.  Changed to compute the expected
                closure error and report individually only those > 2.5
                sigma (at level 2) or all > cutoff levels in
                PRTLV>=4.
        CALIB   Changed help file to show the new print level
                meanings.
        UVUTIL  recompute weights, set prtlev, handle error returns
                from GCALC as in CLBPA.
        Moved nowhere.

12095.  May 8, 2006              CALIB                   Eric
        The print-level change of yesterday still does not allow
        proper flexibility.  Changed CALIB to have CPARM(7) set the
        limit in sigmas for the display (0 -> 2.5).  Changed CLBPA to
        receive and pass on the parameter handling the default.
        Changed CLBSNR to use the new RMSLIM cutoff.  Changed UVUTIL
        to pass through 2.5 although the individual closure errors
        will not be reported in any case in the SCIMG/SCMAP self-cal.
        Changed the print level meanings back to what they were.
        Moved nowhere.

12096.  May 9, 2006                SPLAT                Eric
        Added adverb CHINC to be used with CHANNEL to select the
        channels averaged and output when APARM(1)=3.  This allows
        keeping a multi-source file while keeping only, e.g. every
        other channel after Hanning smoothing.
        Moved nowhere.

12097.  May 10, 2006              BLANK                 Eric
        Added opcode RADI to blank outside a radius in arc sec from
        the reference pixel.
        Moved nowhere.

12098.  May 10, 2006             TVFLG                   Eric
        Added options LOAD NEXT CHAN and LOAD PREV CHAN to load the
        next or previous spectral channel using all of the other
        parameters now in use or set for the next LOAD.
        Moved nowhere.

12099.  May 12, 2006          3C138_C model          Amy/Eric
        Amy has completed another model.
        Moved nowhere.

12100.  May 12, 2006          STUFFR                 Eric
        Changed STUFFR to sort the output data set back into TB
        order.
        Moved nowhere.

12101.  May 14, 2006    delete boxes: verbs, IMAGR              Eric
        Added two new verbs DELBOX and DFILEBOX in new subroutine AU5F
        with service routine GRBOXD.  These allow interactive deletion
        of boxes from CLBOX and a boxfile, respectively.  Added DELBOX
        as an option in IMAGR et al changing QCLEAN to offer the
        option (sets NBOXES(field) negative to call OTVBOX.  Changed
        TVUTIL (comments only in OTVBOX) and TVDEVICE to handle a
        negative NBOXES as a call to GRBOXD.  Changed AIPS.FOR to call
        AU5F and wrote new help files for DELBOX and DFILEBOX.
        Changed POPSDAT and NEWPARMS for new verbs.
        Moved nowhere.

12102.  May 14, 2006              GETPOPSN                     Eric
        New verb - returns POPS number on stack.  Chaned NEWPARMS,
        POPSDAT, AU8 and made new help file.  Useful in procs.
        Moved nowhere.

12103,  May 14, 2006             IMAGR                      Eric
        IMAGR and HLPCLEAN help files changed for DELBOX.
        Moved nowhere.

12104.  May 15, 2006         PEELR, STUFFR                 Eric
        Added code to test for the intermediate and final file names
        and to quit if they already exist.  Added info about those
        names to the help files.  Fix the proc to get the proc's
        inputs back before exiting.
        Moved nowhere.

12105.  May 16, 2006              MBDLY                  Eric
        A call sequence got messed up with an extra argument.  Caused
        it to have bad antenna number, time, rate, source ID and
        source name.
        Moved nowhere, went to patch 31DEC05 23 Aug 2006.

12106.  May 16, 2006        STUFFR, PEELR           Eric
        Change VNUM to 33-GETPOPSN to keep the pops numbers from
        colliding.
        Moved nowhere.

12107.  May 18, 2006          UVFLG, FLAGUP             Amy
        UVFLG would ignore all other inputs but REASON when OPCODE
        was set to "REAS".  So if a user wanted to unflag a certain
        reason, but only for one antenna, UVFLG would unflag that
        reason for all the antennas.  I changed the subroutine FLAGUP so
        now it pays attention to other selections as well as the REASON.
        Moved nowhere.

12108.  May 19, 2006            UVFLG                    Eric
        Upgraded FLAGUP a bit more following Amy's lead.
        Moved nowhere.

12109.  May 20, 2006             MWFLT                   Eric
        Added OPCODEs MAX and MIN with a reference to Larry Rudnick's
        paper making interesting use of these functions.  Fixed the
        history writing to record the window and weight parameters.
        Dropped the ill-considered option to change the header
        coordinates in arbitrary fashions.  There are verbs to do that
        if the user insists.  Also supplied defaults and checked that
        windows have odd number pixels.
        Moved nowhere.

12110.  May 24,2006            $AIPSTARS/VLBA_UVCON      Leonia
        The VLBA configuration file $AIPSTARS/VLBA_UVCON has had zero
        at the nineth column of each line. This column should be '1'
        because the antenna coordinates are given relatively the Earth
        center (see UVCON help). Otherwise the antenna elevations
        calculate wrong.
        Moved nowhere.

12111.  May 24, 2006               APCAL                  Amy
        There was a bug that if the user set the initial TRec then
        TRec_max was never set.  This then caused the program to die
        because of the new opacity solution reality checks added in
        April.  Fixed.
        Moved nowhere.

12112.  May 24, 2006               IMAGR                  Eric
        Added adverbs ANTENNAS and BASELINE to the task.  They are
        applied in copying the data to the work file and are added to
        the history file.
        Moved nowhere.

12113.  May 26, 2006            MWFLT                  Eric
        Larry Rudnick suggested an addition to the explain file on the
        MIN and MAX functions.
        Moved nowhere.

12114.  May 26, 2006            CALIB                  Eric
        Changed help and code so that the output weights are not
        calibrated when APARM(10) > 99.  Previously, they were
        calibrated except when DOCAL > 99.
        Moved nowhere.

12115.  May 27, 2006             FLAGR                  Eric
        Changed it to allow any Stokes to be used for the flagging.
        DOSTOKES changes its meaning also.
        Moved nowhere.

12116.  May 28, 2006          ANBPL, VPLOT              Eric
        Changed both to set the axis scaling on the first plot of the
        page and retain that throughout the page.  This removes the
        uncertainty of whether they are all Milli or Kilo or ??.
        Moved nowhere.

12117.  May 28, 2006         SETSP, SETPAR              Eric
        Dropped the UN-REGISTERED!!!! business and all the encoding
        and subterfuge.
        Moved nowhere.

12118.  May 29, 2006               WIPER                Eric
        Changed IAXIS1 to allow more axis types (9) like CLAB and to
        honor incoming LABTYPs when they are not recognized by lABINI.
        Changed ITICS to treat the new types 7-9 as time axes.
        Changed WIPER to allow STOKES='HALF' which forces all sorts of
        things to loop over polarization where only one polarization
        was allowed previously.  Changed axis labeling leaving IAXIS1
        to handle the metric scaling and making time in hours (type
        11) be properly supported.
        Changed AU5B and TVDEVICE to set LABTYP=0 to get previous
        behavior with IAXIS1.
        Moved nowhere.

12119.  May 29, 2006               MBDLY                Ed/Eric
        Ed Fomalont made some suggestions for the help and explain
        file.
        Moved nowhere.

12120.  May 29, 2006               CLCAL                  Eric
        Changed SN2CL to use the the WWTn weights (limited to -0.5 to
        1.5) rather than the (time-time1)/(time2-time1) which can be
        very large.  The 2PT method used the weights but several of
        the methods used the times for phases while using the limited
        weights for amplitudes.  The CUBE method cannot be limited in
        this way.  Added warnings about that to the CLCAL help file.
        Moved nowhere.

12121.  May 30, 2006            VLOG                   Eric
        JIVE asked us to enlarge the L-band range to encompass
        red-shifted HI.  Changed 1.35 to 1.20 GHz in the table in
        subroutine VLCAL.
        Moved nowhere.

12122.  May 30, 2006            FITLD                  Eric
        Changed SOINI - the VLBA correlator had another column name
        spelled wrong (2 in one table!).  The source number columns is
        supposed to be 'SOURCE_ID' not the VLBA's 'ID_NO.'  Added a
        second synonym to the routine (along with EPOCH for EQUINOX).
        Moved nowhere.

12123.  May 30, 2006        IMPOS, IMVAL, MAXFIT            Eric
        Change AU5 and AU9 to return all parts of COORDINA as negative
        when the value is negative.  This meets the definition used
        when COORDINA is used and avoids the problem of -00 degrees or
        minutes.
        Moved nowhere.

12124.  May 30, 2006              IMAGR                     Eric
        Changed PBUTIL to read the frequency from the spectral index
        image header and use it as the base frequency.  Images of pure
        spix do not care but when curvature is applied then the
        frequency reference is critical.  Improved inputs section of
        IMAGR.HLP re IMAGRP(17).
        Moved nowhere.

12125.  May 31, 2006         semi-annual update            Eric
        Updated LSAPROPO since it no longer contains many of the task
        etc. name listings.  Fixed HLPB.FOR so this should not
        re-occur.  Updated the about help files:
        ZZANALYSIS  ZZAP  ZZCALIBRAT  ZZEDITING  ZZIMAGE  ZZIMAGING
        ZZINTERACT  ZZOOP  ZZPLOT  ZZPOPS  ZZPROCEDUR  ZZTABLE
        ZZTASK  ZZTV-APPL  ZZTV  ZZUV  ZZVERB  ZZVLBI
        Updated the tab completion file HLPIT.LIS.
        Moved nowhere.

12126.  June 1, 2006          plotting                     Eric
        CONDRW did not do negative color contours correctly.  The
        INPUTS files for STEPLEVS, RAINLEVS, FLAMLEVS, CIRCLEVS
        were not typed correctly.
        Movwed nowhere.

12127.  June 4, 2006          Plotting                  Eric
        New functions:
        GCOMNT     Places a type 18 comment command in a plot file
        GCHDRW     Draws A-Z, 0-9, plus some special characters using
                   line-drawing commands (GPOS, GVEC, G3VEC)
        TXRGBL     Specialized routine for drawing a LEVS= line in a
                   plot file using GCHDRW.
        Changed
        STARPL     To call GCOMNT ahead of the stars plots
        KNTR       To use TXRGBL when appropriate, leaving out the
                   usual LEVS= lines.  Also to use GCOMNT.
        PCNTR      To use TXRGBL when appropriate, leaving out the
                   usual LEVS= lines.  Also to use GCOMNT.
        TVPL       To step over comment function data.
        TKPL       To step over comment function data.
        TXPL       To step over comment function data.
        LWPLA      To put the comment function information as a
                   comment in the output PostScript file.
        CNTR       Calls to GCOMNT
        CCNTR      Calls to GCOMNT
        GREYS      Calls to GCOMNT
        IMEAN      Calls to GCOMNT
        SL2PL      Calls to GCOMNT
        ANBPL      Calls to GCOMNT.  Corrected scaling of phase when
                   both phase and amp are plotted.  Fixed failure to
                   handle all 0.0 phases.
        VPLOT      Calls to GCOMNT.  Corrected scaling of phase when
                   both phase and amp are plotted.
        Moved nowhere.

12128.  June 5, 2006           EDITR, EDITA              Eric
        QEDIUTIL had a typo.
        Help files were not updated on May 1 (#12086):
        EDITR, EDITA, SNEDT, HLPEDITS, HLPEDITY, HLPEDIUV, HLPEDICL,
        HLPEDISN.
        Moved nowhere.

12129.  June 7, 2006            UVFLG                   Eric
        The OPCODE 'REAS' has no use and is hereby removed from the
        help.
        Moved nowhere.

12130.  June 8, 2006           CookBook                   Eric
        Changed:
        3     Add a sentence re PLGET next to the TGET stuff.
        4     Added note on WIPER/FLAGR, rewording UFLG in UVFLG,
              add new options to TVFLG (but not figure), fix DOCALIB
              wording (it said DOCALIB=TRUE several places which ddid
              not cal the weights!), CALIB suppression of closure
              errors when not significant, EDITA new figure, models
              have added words and a new figure, paragraph on ANBPL,
              reword VLARUN.
        5     STUFFR paragraph, PEELR section, IMAGR beam size,
              IMAGR and verb DELBOX, verb DFILEBOX, section on
              spectral index option in IMAGR, update EDITR options,
              CALIB display options, mention CCRES.
        6     Add two new color plot pages (KNTR with RGBLEVS and
              SNPLT).  TVCPS multiple images, SNEDT does TY, add ANBPL
              sentences, Add sentences for BPLOT, upgrade UVHGM and
              add UVHIM, update IMEAN including new figure, PLGET,
              DELBOX, DFILEBOX.
        7     Add CCRES section and info re new BLANK and MWFTT
              operations
        9     Emphasize parallactic angle correction for phase
              referencing, reword VBGLU, add VBMRG, reword SNEDT (some
              words are now true that were wrong before), reword UVFLG
              UFLG op (also wrong before), enhance APCAL description
        12    Add mention of GETPOPSN.
        13    Update for changed ABOUT files (12125).
        C     Refer to HSA, upgrade parallactic angle correction
        D     DOCALIB meaning shifted
        0     As needed
        I, J  As needed
        Recipe  Consequent changes
        Moved nowhere.

12131.  June 13, 2006          DEFAULT                 Eric
        Fixed AU2A for using the wrong loop limit when looking for
        special adverb names.  On AMDs with the Intel compiler, some
        adverbs would be found this way and would take bad values.
        Moved nowhere.

12132.  June 14, 2006        system stuff              Eric
        Fixed the $SYSLINUX, $SYSMAXIN, $SYSMACPP versions of LIBR.DAT
        - they all referred to the system library too many time in
        places.  Changed the CCOPTS.SH too for SYSMACIN to be ordered
        more normally.  Some of the others retain COMP in a funny
        place.
        Moved nowhere.

12133.  June 14, 2006           KNTR, PCNTR             Eric
        Fixed them to plot the color RGBLEVS only if contours are
        being drawn.
        Moved nowhere.

12134.  June 19, 2006          AIPSLetter               Eric
        Put LET06A into $AIPSPUBL in TEX, PDF, and pS forms.
        Moved to ftpp site this date.

12135.  June 24, 2006        ELINT                      Leonia
        ELINT has been died at the case when the last plot data are
        flagged. Actually I found that ELINT has a problem even when
        the bad data do not correspond to the last plot (at Solaris)
        although Rick has not seen this problem at his Linux box.
        Anyway the problem is fixed.
        Moved nowhere.

12136.  June 27, 2006        DELZN                      Leonia
        The following modifications/corrections have been done.
        1. RMS of the residuals actually was printed as the variance.
           SQRT of the variance is added to calculate RMS correctely
           The units of the RMS have been added
        2. The having existed limit 10000 of the output file rows
           increased to 100000.
        3. The plots of residuals have been added under control of
           APARM(9)
        4. The option of the solution of clock only has been added
           (APARM(2)=0)
        Moved nowhere.

12137.  June 27, 2006        ELINT                      Leonia
        ELINT failed with the new RICK's data because the OT table
        size exceeds the size of the relevant arrays in the ELINT.
        Increase the array sizes from 1000 to 10000
        Moved nowhere.

12138.  June 27, 2006          POPSDAT                  Eric
        Fixed error id TVCH=0 on input.
        Moved nowhere.

12139.  June 29, 2006        DELZN                      Leonia
        I've found logical errors in connection of create/not create
        CL table <=> use CL time or even time <=+ create/not create
        the output file.
        The errors have been fixed.
        Moved nowhere.

12140.  July 3, 2006         VLARUN                     Lorant
        Had an omission in running checkids in VLARUN (to correct for
        fast-switching source names automatically using DSORC).
        Moved nowhere.

12141.  July 6, 2006         ELINT                       Leonia
        Rick Perley requested to add prints of the polynomial fitted
        to the data into plots.
        It is done.
        Moved nowhere.

12142.  July 13, 2006           WTMOD                     Eric
        Added NOISE to scale each weight by NOISE(ant1) * NOISE(ant2).
        Moved nowhere.

12143.  July 13, 2006        AIPSASSN                     Eric
        changed CV to have $DA01/FITS for the fits area.  Adde PUBFITS
        to point at the older area.
        Moved to CV this date.

12144.  July 13, 2006              UVPLT                  Eric
        Added option to plot one or bath axes in opposite order.
        Enter the code with a minus sign (BPARM(1) and BPARM(2)) and
        the plot order will reverse.
        Moved nowhere.

12145.  July 14, 2006          VLAPROCS                   Amy
        Added to VLAPROCS:
        VLATECR - similar to VLBATECR, calculates day number and
          automatically downloads IONEX files and runs TECOR.
        VLALIST - runs LISTR a'la VLACALIB
        Calibrator models - to VLACALIB, if the flux calibrator is
          the only CALSOUR and UVRA and ANTE are 0 then VLACALIB now
          attempts to automatically download the flux calibrator models
          and uses them.
        VLAPROCS.HLP - created.  Was disturbed to see that this didn't
          exist.  I am sure there are users who if they hear of VLAPROCS
          try a HELP VLAPROCS.  This now tells them about what VLAPROCS
          contains and how to load it.
        Moved nowhere.

12146.  July 14, 2006            CALRD.HLP                Amy
        Removed list of models, as it was outdated and added a reference
        to CALDIR.
        Moved nowhere.

12147.  July 14, 2006          EXTLIST                  Eric
        Fixed several errors in the ISPEC section of AU8A.
        moved nowhere.

12148.  July 18, 2006             VLAPROCS                Amy
        Fixed bug I introduced in which there were two VLADUMMY procs
        to declare variables.
        Moved nowhere.

12149.  July 19, 2006        UVPLT, WIPER               Eric
        Made u axis be +u at left/bottom unless -6 type requested.
        Added the axis reversal code from UVPLT to WIPER.
        Moved nowhere.

12150.  August 1, 2006          IMCENTER                Eric
        New verb: finds centroid in a sub-image.  Changed POPSDAT.HLP,
        AU9.FOR, WHATSNEW.001, and wrote a new IMCENTER.HLP.
        Moved nowhere.

12151.  August 4, 2006             HELP                  Eric
        HELP a specific type (i.e. a list of VERBS or PROCS or ..)
        did not close the printer in AU1A.  This then left LUN 3 open
        in AIPS for all later actions.
        Moved nowhere.

12152.  August 7, 2006            VBGLU                 Eric
        The routine that figured out the order of the UV data times
        between the 2-4 data sets was very slow in some circumstances.
        Added tricks to speed it up.  The table glueing routine did
        not take into account the different numbers of columns when
        there is 1 Stokes or more.  Also the pointer used for the
        desired record number was the wrong variable.  It is hard to
        see how this ever worked.  I suppose fixed buffers were used
        in almost all the debugging to get around limitations in the
        debugger.
        Moved nowhere.

12153.  August 9, 2006       More AT file follies        Eric
        Changed ATINI, ATTAB to correctly handle NOPCAL = 0 which is
        one of its 2 valid values.  The code assumed 2 but did 0 when
        allocating space.  Changed VBGLU to use 0 for the length of
        columns rather than forcing 1.
        Moved nowhere.

12154.  August 10, 2006        TV load functions            Eric
        The LG, NG function used was very extreme (LOG (1 + 6500*X))
        with X between 0 and 1.  A value of 9 is very pleasing and 99
        is extreme enough.  Changed
        ISCALE    To use 9 with LG, NG or 99 with L2, N2 codes
        GSCALE    To use 9 with LG, NG or 99 with L2, N2 codes
        TVALUE    To use 9 with LG/NG, 99 with L2/N2 codes
        PCNTR     Added L2 and N2 to allowed function types.
        KNTR      Added L2 and N2 to allowed function types.
        TVRGB     Added menu items to switch from linear, to square
                  root, to the new LG to L2 to linear in each color.
                  Changed output routine to honor the functions as
                  well.
        TVHUI     Modified LOG/SQ transfer menu item to change order
                  and add stronger log function.  Changed the log
                  functions from 65000 (!!) to 9 and 99.
        RGBMP     Added L2 function and changed LG to 9 instead of
                  6500.
        Help files:
        TVRGB     mention new options
        HLPTVRGB  run-time help for each
        TVHUI     change the description of transfer functions
        HLPTVHUI  run-time help reworded and new option added
        RGBMP     changed mathematical descriptions, added L2
        FUNCTYPE  added math and new L2 N2 codes
        TVLOD     added L2/N2 - also helps for COTVLOD, TVALL, TVCUBE,
                  TVMOVIE, and TVROAM.
        Moved nowhere.

12155.  August 10, 2006        S/X split in procedures      Lorant
        Changed VLBAARCH and VLBAUTIL (ie VLBAFQS and VLBAFIX) to check
        full tunable range of frequencies instead of nominal frequencies
        so projects observing outside the default band get recognized
        and split in separate S and X as usual. (90/50 was set fine).
        Moved nowhere.

12156.  August 10, 2006        more help                  Eric
        Changed FUNCTYPE in GREYS, KNTR, PCNTR, PLAYR helps too.
        Moved nowhere.

12157.  August 11, 2006           SDCLN                   Eric
        The SDI section was limited to images 4096 on a side.  Changed
        arrays to MAXIMG.
        moved nowhere.

12158.  August 14, 2006     QUACK, AN10RS =>UVFLG,UVCOP     Leonia
        Add BASELINE to the QUACK inputs. The subroutine AN10RS is used
        to have ANTENNAS, BASELINES as inputs.
        A small error has been found in AN10RS when both ANTENNAS and
        BASELINES .GT.0. It fixed and UVCOP, UVFLG compiled with the
        corrected AN10RS.
        Moved nowhere.

12159.  August 15, 2006           plotting                Eric
        Changed:
        WINDOW   Changed error message to have more digits (2 lines)
        GCOMNT   The computation of needed space was wrong which could
                 damage things badly.
        GREYS    Changed the image alignment code.  It did WINDOW on
                 all before recomputing the windows anyway and so
                 could fail when the recomputed ones would be fine.
                 Made a work buffer MAPBFS rarther than 2048 in size.
        KNTR     Same sub-image trouble as GREYS.  PCNTR was fine
                 however.  Needed extra work to handle plotting a cube
                 on top of a plane.
        Moved nowhere.

12160.  August 16, 2006     AN10RS=>QUACK, UVFLG, UVCOP     Leonia
        A mistake is found in yesterday AN10RS correction.
        The QUACK, UVFLG, and UVCOP COMLNKed with the corrected
        AN10RS.
        Moved nowhere.

12161.  August 16, 2006        more plot                Eric
        All the routines that used GCOMNT used MSGTXT as the call
        argument.  That is in COMMON and is set = ' ' by ZFIO so it
        cannot be used in plot tasks that might call ZFIO when the
        buffer is full.  Changed STARPL, ANBPL, VPLOT, CCNTR, CNTR,
        GREYS, IMEAN, KNTR, PCNTR, and SL2PL.
        Moved nowhere.

12162.  August 19, 2006        POSSM yet again           Eric
        The axis labeling in velocity when asking for a reversal of
        the axis was off by 1 channel.  The printed numbers were fine
        in the output text file but not on the plot.
        Added option FACTOR to scale the plus signs used for phase and
        added plus signs to the connected lines for other types.
        FACTOR < 0 turns off the plus signs in those cases.  Added
        option XYRATIO to control the XY ratio which did not look as I
        wanted in one of my plots.
        Changed AU8A to recognize new nparms of possm.
        Moved nowhere.

12163.  August 21, 2006         VBMRG.HLP                 Amy
        Added basic recipe for use (from Jon Romney) to end.  I got
        a phone call asking about merging multiple passes and it would
        have been useful to just point the person to EXPLAIN VBMRG.
        Most of the information was present in the HELP file but the
        recipe just makes it clearer.
        Moved nowhere.

12164.  August 22, 2006        KNTR, RGBLEVS               Eric
        KNTR: Fixed positioning of RGBLEVS line when there is a step
              wedge at the top.  Added comments at each contour level
              so that the user can find each level at the places
              (plural usually but not too many) where it occurs.
        KNTR: Added comment about contour level comments to the help
              file.
        RGBLEVS: created a help file.
        Moved nowhere.

12165.  August 23, 2006            CCEDT                     Eric
        Changed the automatic boxing code a bit more - removing an
        infinite loop situation occasioned by the old code combined
        with the newer code which reduced the amount that DX and DY
        are adjusted in each cycle.  Dropped error messages for things
        that are really not errors.  Note however that CCEDT
        automatic code gets different answers than it used to.
        Moved nowhere, went to patch 31DEC05 23 Aug 2006.

12166.  August 23, 2006             IBLED                    Eric
        Found an error in which the window limits were computed as if
        IYP(1) < IYP(2) immediately following a computation  that had
        them opposite!  This caused error bars on phase plots to
        produce TV errors killing the task.
        Moved nowhere, went to patch 31DEC05 23 Aug 2006.

12167.  August 25, 2006      VLBATECR & VLATECR             Amy
        Added additional file in case jplg version does not exist.
        Moved nowhere.

12168.  September 1, 2006            FILLM                   Eric
        History for CPARM(2) was not specific.  Added code that should
        be more explicit.
        Moved nowhere.

12169.  September 25, 2006    VLACALIB, CLIPM.HLP            Amy
         VLACAL - Changed the FLAGVER so that 0 means highest flag
                  table version.
         CLIPM - Fixed typo on help file.
        Moved nowhere.

12170.  September 26, 2006          QUACK.FOR .HLP          Leonia
        Change default of FLGVER from 1 to the highest existed FG.
        Moved nowhere.

12171.  September 27, 2006           CVEL                  Eric
        Called CALINI with 4 arguments being the same variable.  this
        caused the first of them (# polarizations) to be set to other
        values than the correct one, leading to error messages from
        CALINI that should not occur.
        Moved nowhere.

12172.  September 29, 2006          UVCON                   Leonia
        UVCON has never simulated correction for the primary beam,
        if the model is given by SMODEL or clean components are not
        point. Taking into account, that such a simulation does not
        have a big sense or happens very rare and requires a
        very serious modification of UVCON, I came to the decision
        to add couple of warnings only.
        Moved nowhere.

12173.  September 29, 2006          APCAL                   Amy
        APCAL didn't handle the situation where there was only one
        LL stokes correctly.  Fixed.
        Moved nowhere.

12174.  October 2, 2006         SETFC                 Lorant
        Changed it to leave BPARM(1) < 0 rather than resetting it to
        zero.  This leaves an inner region to be ignored for NVSS
        sources and the like.
        Moved nowhere.

12175.  October 2, 2006           FILLM                Bryan
        Add flag to include tipping scans in the data written to
        disk.
        Moved nowhere.

12176.  October 2, 2006            GAL                     Eric
        Cleaned up the typing of GAL.HLP and changed code and help to
        use logicals in standard ways (> 0 -> true).
        Added SYMBOL adverb, changed DPARM(9) to CPARM(7) to simply
        plot rather than fit.  Made DPARM(9) the min velocity to plot.
        Moved nowhere.

12177.  October 3, 2006        INSEQ limits               Amy
        Changed INSEQ limits to 0-9999.0 (as in most other programs)
        in PUTVALUE, IMVAL, QIMVAL, TABGET and TABPUT.
        Moved nowhere.

12178.  October 5. 2006          UVPLT                    Leonia
        Antenna parameters have not picked up if Azimuth vs Time
        is desired to plot. As a result UVPLT has crashed at this
        case. Fixed. Additionally, the plot header is changed.
        The antenna=refant is printed out at the plot header, if
        the plot type (14,15,16,18) is related to antenna
        (not base line)
        Moved nowhere.

12179.  October 5, 2006          SPIXR                 Eric
        Bad error branch 2 places brached to a different loop.  (Code
        was copied and not corrected.)
        Moved nowhere, should go to patch.

12180.  October 6, 2006          SNSMO                 Eric
        Confused RA2KOL > 0 with NUMPOL > 1 so thatrates would smooth
        and clip with invalid data from wromg locations.  The change
        to SNINI in TST caused this to happen at IF 2 rather than
        starting with IF 3.
        Moved nowhere, should go to patch.

12181.  October 7, 2006           INTERPOL                Eric
        Adverb help file was out of date.
        Moved nowhere.

12182.  October 7, 2006            POSSM                   Eric
        Pickup of station ID for VLA out of date (used 5:7 not 6:8).
        Moved nowhere.

12183.  October 9, 2006    FLAGUP, UVFLG                 Amy
        UVFLG (in external subroutine FLAGUP) did not check on
        TIMERANGE or BIF/EIF while unflagging.  Fixed.
        Moved nowhere.

12184.  October 12, 2006    VLBAUTIL, VLBAFIX            Amy
        Added calibration table merging to VLBAFIX.  VLBAFIX now
        tests to see if merging is necessary and then runs
        VLBAMCAL if necessary.  Added comments about this change
        to the VLBAFIX and VLBAMCAL help files.  Also simplified
        how VLBALOAD did table merging.
        Moved nowhere.

12185.  October 12, 2006    ZZPROCEDUR.HLP, ZZVLBI.HLP    Amy
        Fixed the entries describing what VLBAUTIL procedures
        did.
        Moved nowhere.

12186.  October 23, 2006              SPFLG                Eric
        The SPFLGR file sequence number was set to 1+previous max if
        the requested one did not exist.  The user's requested value
        will now be used to create the work file.  Fix length of
        list of antennas being gridded.
        Moved nowhere.

12187.  October 23, 2006         UVGET, SETFC              Eric
        Changed UVGET to complain about FRQSEL=-1 with a real FQ
        random parameter only if the is more than one FQ.  Otherwise
        set it to 1.  SETFC had a branch to stop without the resume
        aips call.
        Moved nowhere.

12188.  October 23, 2006          IMAGR                    Eric
        Added optional display of an inscribed circle using adverb
        GRCHAN.  Changed IMAGR Fortran and help, QCLEAN, and TVUTIL.
        Moved nowhere.

12189.  October 23, 2006          VPLOT                  Eric
        Changed it to allow 2 separate polarizations in the same
        plot with or without separate coloring.
        Moved nowhere.

12190.  October 24, 2006           VPLOT                Eric
        Above change was missing a call sequence argument for doing
        time averaged data.
        Moved nowhere.

12191.  October 24, 2006             IMAGR              Eric
        The details in IMAGR.FOR and TVUTIL.FOR did not actually make
        it to the official areas somehow.  Corrected that oversight.
        Moved nowhere.

12192.  October 24, 2006             LOCIT               Eric
        Changed code that locates columns in the SN table to allow for
        only one polarization.  The later code did that okay, but not
        the startup code.
        Moved nowhere.

12193.  October 29, 2006            MCAT                 Eric
        Changed CATLST to alphabetize up to 5120 catalog entries per
        pass.  The old limit was 1536 - too small for those cases
        really needing the option.
        Moved nowhere.

12194.  October 30, 2006            UVAVG                Leonia
        The new OPCODE='SUBT' has been added. This is a special option
        requested by Frazer Owen (August 2006) to remove a coherent output
        happening as a result of mutual coupling between an array
        antennas (GMRT at the Frazer's case) or of other unknown effects.
        If OPCODE='SUBT', then the task works with two passes.
        At the first pass the averaging through the time of the whole
        experiment for each baseline, IF, Stokes, channel is carried out.
        At the second pass the task subtracts the found average values and
        then the standard averaging of the difference for the average time
        given at the input parameter YINC is carried out.
        Moved nowhere.

12195.  November 3, 2006          UPDCONFIG               Eric
        Removed the CFA site so that they can control their own
        destiny.
        Moved nowhere.

12196.  November 4, 2006            WTMOD                 Eric
        If the SUBARRAY being modified did not occur in the first
        record of the UV data set, then the parameters did not get
        initialized and the reulting weights became 0.
        Moved nowhere.

12197.  November 6, 2006         IMAGR                   Eric
        Changed IMAGR.FOR to survive (and blank) missing channels.
        Moved nowhere.

12198.  November 6, 2006            IMEAN                Eric
        Changed help file in an attempt to clear up confusion between
        the plotted histogram and that one used to find the noise.
        Moved nowhere.

12199.  November 6, 2006           BPASS                 Eric
        The dynamic memory allocation and the usage of buffers was
        different when only some IFs were processed.  This led to
        errors in normalization and an abort at some point due to
        dynamic memory being compromised.  Also changed it to start
        with a (1,0) guess every time the channel number is 1.
        Otherwise it carried over the solution for the last channel,
        IF, polarization to start the next spectrum.
        Moved nowhere.

12200.  November 7, 2006           IMAGR                  Eric
        Added a close that was forgotten when there are no points in a
        channel.  OOP bypassed the open LUN but a table routine when
        merging the next channel's CCs did not.
        Moved nowhere.

12201.  November 7, 2006           LTESS                   Eric
        Changed
        APLPBI   To do straight copy (no beam) when BMSIZE < 0 or
                 BEAMTP <= 0 also.  It is only called by VTESS etc
                 in the mode where BMSIZE and BEAMTP > 0 so this
                 should not matter to it.
        LTESS    To use APLPBI in all cases.  this will mean that
                 magic blanks in the input image will be honored and
                 will not count in the sum of weights images.
                 Previously every pixel counted in the sum of weights
                 and blanked pixels used that magic numeric value as
                 real on non-interferometric images.
        Moved nowhere.

12202.  November 7, 2006         BPASS                     Eric
        Messed up the logic for when channel 1 is flagged.  Should
        reset INIT to TRUE if channel is 1 but do not set it FALSE
        except in GCALC if it gets an answer.
        Moved nowhere.

12203.  November 11, 2006          PCAL                   Eric
        PCAL set INSEQ of 0 to 1, contrary to the help file.  It is
        now left at 0 which TABINI will set to the max.  The routine
        that called FACSET was not told the IF and so always set the
        factor for IF 1.  Added that to the call sequence and the call
        to FACSET.  For some reason the source-table fluxes were set
        to zero when using a model although no place later summed the
        model back into VFLUX.  The resulting VFLUX was put into the
        source table, reoving the Ipol flux that was there.  Commented
        out the setting to zero.
        Moved nowhere.

12204.  November 11, 2006             FACSET                Eric
        Changed final message to be abs value of factor.  The sign has
        to do with subtract vs add and is confusing to the user.
        Moved nowhere.

12205.  November 13, 2006            FLATN                 Eric
        Changed it to allow the users to specify no primary beam
        correction in the PBPARMs.  Added keywords to specify the
        coordinate type, increment, and reference pixel of the output
        image.  Sensible defaults which should be used most of the
        time unless one knows well what one is doing.
        Changed POPSDAT and NEWPARMS to define new adverb COOTYPE
        and did a help file for it.
        Moved nowhere.

12206.  November 21, 2006       help files                 Eric
        Updated the tab completion file HLPIT.LIS and the ABOUT
        files for  ADVERB,  ANALYSIS,  CALIBRATION,  PLOT,
        PROCEDURE,  RUN,  UTILITY,  VERB,  VLA,  VLBI.
        Moved nowhere.

12207.  November 22, 2006            VBGLU                  Amy
        Added merging of GC and IM tables.  Changed the handling of the
        CT table so that it does not get copied if the CT tables on the
        files to be merged are not identical.  Added paragraph to the help
        file about this.
        Moved nowhere.

12208.  November 27, 2006            FLATN                  Eric
        Changed INTWIN in INTERPLATE.FOR to check to see if any of the
        test points are in the output image and return -1 if not.  It
        now returns -2 if there are no good pixel coordinates.
        Changed FLATN to warn if the 3D option is selected and to tell
        about the inclusion of each image in the output.  The output
        window is given when included and the reason (outside or
        geometry) when not included.
        Moved nowhere.

12209.  November 27, 2006         VLBATECR                  Amy
        The DAYNUM subroutine was not calculating the correct day
        number for experiments that took place in August.  Fixed.
        Moved nowhere.

12210.  November 28, 2006      plots                      Eric
        Changed GVEC, GDVEC, G3VEC to do a roundoff when truncating
        vectors at the boundaries of the TV and to fill the buffer
        further checking the edges.  LWPLA needed this one place too.
        Changed PCNTR and KNTR to do the correct Jy per arc sec
        display - it was a factor 2 too large for per pixel displays
        which KNTR would do on LTYPE not 3.  Dropped the test on
        axis type since the polarization lines cannot be drawn with
        the wrong type.  And the type is affected by LTYPE in just
        this spot in KNTR.  Corrected FACTOR description in the 2 help
        files.
        Moved nowhere.

12211.  November 28, 2006           FLATN                   Eric
        Found a naming problem for facets > 999 and an overwriting of
        memory for NMAPS > 64.
        Moved nowhere.

12212.  November 29, 2006         FLATN                  Eric
        Add ROTATE adverb to set the image rotation rather than depend
        on the rotation in the first image.  Note that this has no
        default; zero is meaningful.
        Moved nowhere.

12213.  November 30, 2006          UVHGM                 Eric
        LUN 16 is now used by the calibration routines and so is a
        poor choice for the main data set.  Changed it to something
        better.
        Moved nowhere.

12214.  November 30, 2006           TVRGB                Eric
        Messed up the enhancement functions when I added the 3
        transfer function operations.  It was depending on array
        indices which changed when the new ops were added.
        Moved nowhere.

12215.  November 30, 2006      gridded subtraction        Eric
        Changed QMTYP, GRDSET, and GRDAT to interpolate grids that are
        up to 4096.  Previously the limit was 2048.
        Changed FORCED to recommend DFT for larger images and issue a
        message (once) in so doing.
        Moved nowhere.

12216.  November 30, 2006     VLBAUTIL help files        Amy
        Fixed the description and keyword lines in the help files for
        VLBACPOL, VLBACRPL, VLBAEOPS, VLBAFIX, VLBAFPOL, VLBAFQS,
        VLBAFRGP, VLBAFRNG, VLBAKRGP, VLBAKRNG, VLBALOAD, VLBAMCAL,
        VLBAMPCL, VLBAPANG, VLBAPCOR, VLBASNPL, VLBASRT, VLBASUBS,
        VLBASUMM and VLBATECR
        Moved nowhere.

12217.  November 30, 2006           PEELR                Eric
        Changed run file to default APARM(7) to 2 and APARM(9) to 1.
        If they are zero when read, they are set to these values.
        Otherwise they keep the values set by the user.  Changed the
        help file to point out this difference from the usual CALIB
        behavior and to add the adverb WEIGHTIT.  All of these changes
        are to aid in getting solutions without deleting serious
        quantities of the UV data.
        Moved nowhere.

12218.  November 30, 2006         ABOUT files           Eric
        Ran SHOPH for about files for Amy's changes.  Updated
        ADVERB        AP        CALIBRAT        CATALOG
        FITS          PLOT      POLARIZA        PROCEDUR
        TABLE         TASK      UTILITY         VLBI
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC06 is NEW

***********************************************************************
***********************************************************************

12224.  December 5, 2006           IMAGR                    Eric
        Changed formats in PBUTIL - it was using I2 for field number.
        This stopped the frequency-dependent model subtraction if
        there were more than 99 fields.
        Moved from TST this date.

12225.  December 8, 2006        3C138_L.MODEL            Amy/Eric
        Put back Amy's latest calibrator source model.
        Moves from TST etc automatically.

12226.  December 13, 2006      VLATECR                     Amy
        Fixed the bug in DAYNUM subroutine that VLATECR uses, same
        ask the fix to VLBATECR makde on Nov. 27, 2006.
        Moved from 31DEC07.

12227.  December 13, 2006        install.pl               Eric
        Added rsync of the $HIST area which was overlooked.
        Moved correction from 31DEC07.

12228.  December 14-15, 2006     Flagged CCs           Eric
        Changed GRDCRM to ignore flagged CC lines rather than die on
        them and changed FACSET to ignore them rather than use them.
        Moved correction from 31DEC07.

12230.  December 16, 2006         SPLIT                   Eric
        Changed default of CHINC to NCHAVG.
        Moved from 31DEC07 this date.

12231.  December 18, 2006           CLCAL                Eric
        The phases of IFs 2-N were being changed for smoothing done on
        delays of those IFs as Delta(phase) = -2pi * (F(ifn)-F(if1))
        * Delta (delay of ifn).  This code was commented out as well
        as a non-trivial amount of supporting code.
        Moved from 31DEC07 this date.

12232.  December 19, 2006         FILLM                   Eric
        FILLM was changed to parse the IF control bits word to see if
        the data have been scaled by the nominal sensitivity or not.
        All data for format numbers 24 and less are assumed to have
        been scaled and all recent data should be scaled.  However,
        new data from the E/VLA starting in 2007 will not be scaled
        and so will need scaling by FILLM.  FILLM checks the bit and
        makes sure that it is the same for all IFs and antennas and
        scales any data that have not been scaled.
        Moved to 31DEC06 to support 2007 VLA data.

12233.  December 21, 2006        FLAGR                  Eric
        Fix it to flag singletons when it is supposed to do so.
        Moved from 31DEC07 this date.

12234.  December 21, 2006          AVSPC               Eric
        Correct alternate reference pixel location for frequency
        averaging.
        Moved from 31DEC07 this date.

12235.  December 21, 2006         UVGLU                Eric
        The test on correctness of frequencies was
             (F1-F2) / (DeltaF) > 0.1
        This has to be absolute value > 0.1.
        Moved from 31DEC07 this date.

=========================================================================
            PATCHES
=========================================================================

12241.  January 2, 2007           CALIB                  Eric
        Discovered an error in which the NX table times were extended
        by nearly 5 seconds in each direction to compute the
        integration start and stop times.  This does not matter when
        doing scan averages, but does when a true SOLINT is set.  An
        extension of 0.1 sec if probably okay.
        Moved to 31DEC06 patch this date.

12245.  January 10, 2007          UPDCONTROL               Eric
        Amazingly, this proc still used the old sort syntax.  We
        finally hit a machine that refused it visibly.  Since SUN4 is
        no longer a current OS, simply commented out the old syntax
        and replace the lines with the new.  I think the operation
        that it was to do is not significant.
        Moved to 31DEC06 patch this date.

12265.  February 9, 2007       LPSEC, UVFIX              Leonia
        The leap second subroutine LPSEC is updated until the last
        correction at Jan 2006, and the task UVFIX (only one using
        LPSEC) is comlnked.
        Moved nowhere, to patch 2/27.

12268.  February 20, 2007          CLCOR                  Leonia
        OPCODE='SUND' has not worked probably since the time when
        OPCODE='EOP' had been installed. The GO TO 999 was missed
        Moved nowhere, to patch 2/27.

12272.  February 26, 2007           VBGLU                  Amy
        Fixed merging of the STATE count column of in the PC table.
        It used to not expand to the correct number of rows because
        it had twice the number of row as all the other 2D columns.
        Moved nowhere, to patch 2/27.

12274.  February 27, 2007           CVEL                Eric
        The final call to DSHIFT had the wrong number of arguments
        causing the task to abort (with the GNU compiler anyway) at
        the close down stage (before extension file copies).
        Moved nowhere, moved to patch this datep.

12283.  March 14, 2007             SNSMO                 Amy
        There was an error introduced last year in the call sequence
        to the subroutine SMORAT.  This caused odd smoothing of the
        rates for the first IF, including flagging solutions.  Fixed.
        Moved nowhere, went to patch April 26.

12289.  March 21, 2007       UVFIX                         Leonia
        UVFIX has not calculated REFCHN for uncompressed data.
        It has provided mistake at the frequency calculation when
        source shift was involved.
        Moved nowhere, went to patch April 26.

12291.  March 21, 2007             CLCOR                   Eric
        The source position correction updates the SU table first so
        that the source positions taken as the "input" positions were
        really the "output" positions.  This makes a second-order
        error in the correction.  the SOUMOD routine had a 3rd order
        error in that it used the output apparent declination to scale
        the DX term when it should be the input apparent declination.
        Moved nowhere, went to patch April 26.

12321.  April 26, 2007       BLCAL, UVFND              Eric
        The cal system has an integration time parameter DXTIME which
        is the integration time in DAYS.  If it is not set, then the
        random parameter is consulted or 1 sec taken.  It controls the
        gain correction made for averaging when there is a delay and
        rate.  A 1 day integration makes for a large correction!  Two
        tasks, BLCAL and UVFND, set this parameter to 1.0. Changed to
        set it 0.0.
        Moved DXTIME correction to patch this date.

12331.  May 4, 2007            Man pages                  Eric
        The man pages for aips got lost.  The Mac systems did not
        allow us to have both aips.l and AIPS.l in the same directory,
        so I deleted AIPS.l.  Unfortunately AIPS.l had all the text
        and aips.l was just a link to AIPS.L.  Fortunately, we have an
        antique version of aips still on disk and I was able to
        recover to file, now stored as aips.l.  man AIPS will not work
        but man aips does.
        Moved to patch this date.

12342.  May 24, 2007                FILLM                 Eric
        There was an extra call to MRECO (read routine) when an EOF
        occurred that caused it to skip the first data record in the
        next file.  This led to real problems when the next file was
        incompatible with the previous, but also caused it to lose a
        record when the two were compatible.
        Moved this fix (not other FILLM changes) to patch this date.

12349.  May 30, 2007               SNPLT                    Eric
        The Hour angle computation had a mysterious -PI/2 causing all
        hour angles plotted to be too low by 6 hours.
        Moved to patch June 14, nowhere else.

12357.  June 10, 2007      SPLIT, SPLAT                   Eric
        Errors occurred when TIMERANG limited the times and SOURCES
        included more sources than were in the TIMERANGe.  Changed:
        SPLIT     If UVGET ('INIT' returned an error code, DOCAL et al
                  were left in the temporary (false) state for
                  fetching the new source.
        Moved SPLIT fix simply to patch, nowhere else.

12364.  June 14, 2007             SNPLT                  Eric
        The inner plotting routine changed the phas code for PC tables
        to a special value and then did not test that special value
        when checking for phase wraps.  So lots of points potentially
        did not get plotted.
        Moved to patch this date.

12365.  June 16, 2007                VLA station names       Eric
        There has been a protest over the use of a blank in the VLA
        station names so I have changed it to an _.  Let us hope that
        this does not mess up labeling in AIPS where _ is changed to
        an unshrinkable blank on occasion in string handling for
        display.  Changed FILLM to do the _ and changed PRTAN, VLANT,
        LOCIT, FRPLT, and POSSM to support all possible VLA station
        naming conventions.  FRPLT especially but also POSSM did not
        handle the previous conventions entirely correctly.  FILLM did
        not test the possibilities of names properly a couple of other
        places.
        Moved to patch (except VLANT) this date.

12373.  June 22, 2007          POSSM, FRPLT               Eric
        There were typos in the display string handling due to the VLA
        station name change.  The string length was too short to
        handle non VLA names as well.
        Moved the display fix to patch.

12436.  September 4, 2007           BLAVG                   Amy
        In weighted average the visabilities were being multiplied by
        the weight twice, so when the weights were calibrated and became
        very small the average vis became nearly zero.  Fixed.
        Moved to patch Sept 5.

12445.  September 21, 2007          FILLM                 Eric
        Changed response to nominal sensitivites of 0.0.  Previously,
        0.333 was used for weights but 1.0 was used for data scaling.
        That should have been sqrt (0.333) to be consistent and so
        leads to weights wrong by factors of 2 for baselines having
        one such antenna and 4 for baselines with both antennas
        affected.  The ModComps would not have allowed nominal
        sensitivities of 0.0, so this is a recent problem.
        Moved to patch Sept 28.

12467.  October 15, 2007         SPLIT, SPLAT                 Eric
        The computation of the IF frequency of averaged channels was
        incorrect because it used FINC(BIF) and FINC(BIF) was already
        scaled by the degree of averaging.  This affects all
        arrangements of IFs, not just the mix of USB and LSB for which
        the error was initially entered into the code.  SPLIT was
        dufferent in that it scaled the FINC(IF) first and then used
        it with the scaled FINC(BIF).  For IFs with the same FINC, no
        error was produced (unlike SPLAT), but a worse error was made
        when the FINCs had different values.
        Moved to patch this date.

12474.  October 23, 2007           SPLIT                 Eric
        SPLIT still did not get things right.  There was a very
        long-standing error in the header reference pixel computation
        when averaging channels but still making a multi-channel
        output file.  SPLIT leaves the ref value alone for frequency
        and so the offset frequencies in the FQ table should not be
        changed - a more recent error.  SPLAT does things differently,
        puting the ref pixel to 1.0 and changing the ref values.
        Moved to patch this date.

12489.  November 5, 2007          SPLIT, SPLAT               Eric
        I do not believe this - both tasks had the number of
        words/correlators to copy wrong (3 times too large).  This can
        cross array boundaries messing up needed data and can
        certainly get wrong results for the scaling of compressed
        data.
        Moved to patch this date.

12491.  November 6, 2007         SPLIT, SPLAT               Eric
        I further don't believe how I messed yesterday's correction to
        copy too few for compressed data.
        Moved to patch this date.
