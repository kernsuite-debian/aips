-----------------------------------------------------------------------
;  Copyright (C) 1996-1998
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in Charlottesville.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


                    Changes to 31DEC99


***********************************************************************

  Changes while 15OCT96 was called TST were copied to CVX (31DEC99)

***********************************************************************

***********************************************************************

 8922.  December 21, 1995         ZDIE                    Eric
        Created a new Z routine to delete the /tmp/<task><npops>.<pid>
        files at the end of a task.  They get deleted other ways too,
        but occasionally one has bad luck and the pid matches some long
        running pid on the system.
        AIPSPROTO.H   to reference zdie
        ZABORS.C      UNIX, BERK, SUN to call ZDIE
        ZDIE.FOR      GEN to build task name and call ZDIE2
        ZDIE2.FOR     GEN stub
        ZDIE2.C       UNIX to do the file deletion.
        DIETSK        to call zdie
        Moved to 15JAN96 this date.

 8923.  December 21, 1995         ZWHOMI                   Eric
        ZWHOMI was depending on the SETPAR value for the number of TV
        devices.  We can't depend on that being right with the ease with
        which they are added these days.  Changed ZWHOMI to translate
        the AIPSTVS symbol used in assigning REMOTE TK numbers in the
        first place.
        Moved to 15JAN96 this date.

 8924.  December 21, 1995      Help and CookBook               Eric
        I forgot ZZANALYSIS and COMPRESS changes ZZPOPS and
        ZZPSEUDOVERB.  Also the CookBook Chapter 13 changes.  While we
        are at it I reworded the 1-liner of COMPRESS to say more.
        Corrected typographical (spacing) errors in chapters 2 and 4 of
        the CookBook and an error in a reference to extended hex in
        Chapter 3.
        Moved to 15JAN96 this date.

 8925.  December 21, 1995          SPLIT                   Eric
        Fixed two errors:
        (1) The loop over sources in SPLTUV did not alter SELQUA.  Thus,
        if there were > 1 qualifier for a source name, the cal routines
        would think they were writing a multi-source file.  Fixed by
        setting SELQUA to the current qualifier.
        (2) The routine that makes a list of desired source numbers had
        an error test for the list going from > 0 to 0 due to a check on
        the index table.  The wrong variable was used for the error code
        so the task continued rather than dying as was intended.
        Moved to 15JAN96 Dec 22.

 8926.  December 26, 1995         Guest TVs                 Eric
        There is no reason why a "remote" computer (not in the TVHOSTS
        list) cannot run XAS and receive TV signals from the server
        computer.  Even if the 2 are reversed in byte order the TV, TEK
        and MSG servers all work.  The only complication is in the IC
        and ID files - guests on a server get a guest IC and ID which
        are not the same as on their machione.   If multiple computers
        address a screen being used by a guest TV then some confusion
        about images and whioch channel is on etc. will occur.  Changed:
        AIPSEXEC   To set the remote TK at 36 higher than before, i.e.
                   to AIPSTVS + 37 through 71.
        TVDEVS.SH  To allow for unknown TVHOST = TVDISP to pass through.
        ZWHOMI     To gets AIPSTVS (# known TV hosts) and recognize the
                   guest usage.  It then determines which guest account
                   (if any - it looks for available ID files) is
                   available, creates a /tmp/GUESTVn lock file, does any
                   needed assignments of logicals for TV and TK.
        ZDIE       To call ZGUEST to kill the guest TV if needed.
        ZGUEST     New: to create / delete the /tmp/GUESTVn files.
        Moved to NEW Dec 27.

 8927.  December 26, 1995          ZACTV9                      Eric
        Called the function "creat" which does not care whether the file
        being created already exists or not.  Changed to call "open"
        with the addition of an excl flag to require that the file not
        exist.
        Moved to NEW Dec 27.

 8928.  December 29, 1995           UVAVG                  Leonia
        When a user erroneously make ZINC too small, the task died
        a horrible death without explanation of the reason. It occured
        because the size of prepared space is proportional to the
        selected ZINC and can be smaller the true file size.
        I make the task die quietly in such a case with explanation of
        the problem. The reminder about nesessary proximity ZINC and
        true pre-average time is added in HELP file.
        Moved nowhere.

 8929.  January 2, 1996            $QPGNOT/CALIB.FOR       Athol
        CALIB assumed that the antennas were numbered sequentially
        in the AN table, i.e. that the row numbers and antenna
        numbers were equal. DIFMAP, unlike most AIPS tasks, will
        delete the AN record for any antenna that is flagged
        completely. Subsequent CALIB iterations failed for
        antennas near the bottom of the AN table, as the maximum
        antenna number was computed incorrectly. Fixed this
        problem.
        Moved nowhere.

 8930.  January 3, 1996            CookBook                 Eric
        Putback a revised Chapter 12 (advanced POPS etc) including new
        capabilities for remote use, COMPRESS, etc.  Changed Cross
        references in Chapters 3 and 7 to chapter 12.  Added AHISTM
        HISEQ MF2ST, SKYVE to Chapter 7.  Redid the table of contents
        COOK0 and the index COOKI to match all this.
        Moved to 15JAN96 since there is but one area.

 8931.  January 3-4, 1996          ZSSS*2.C               Eric
        Changed the name of 4 external variables to be different from
        those used by ZVTP*2.C.  Moved the external variables
        declaration inside the code as "external" in ZSSSX2 and ZSSSC2.
        It is improper to declare the variables externally more than
        once, although it took SGI's latest linker to complain about
        them rather than doing the right thing.
        Moved to NEW this date.

 8932.  January 4, 1996            $HLPFIL/APCAL.HLP       Athol
        Revise EXPLAIN file for APCAL. Add more information regarding
        source flux densities and the format of the external weather
        file.
        Moved to NEW (15JAN96) this date.

 8933.  January 7, 1996            $APGNOT/UVAVG.FOR       Athol
        Revise #8928 to be more robust. Trap attempts to write
        beyond the EOF rather than checking the averaging time
        in the uv-data against ZINC. User impact: UVAVG failed
        without due cause in some cases.
        Moved nowhere.

 8934.  January 8, 1996            $APGNOT/UVCOP.FOR      Leonia
        For a long time (perhaps always) there apears to have been
        a typographical error in subroutine ESTSIZ. The following
        line is in error:
        OURS = ((FRQSEL.NE.0) .OR. (FREQID .EQ. FRQSEL))
        FRQSEL never equals zero, because FRQSEL>0 if a specific
        freqid is selected, and FRQSEL is set to -1 in COPYIN if
        zero freqid is specified on input. Therefore OURS is always
        true and the size of the output file does not depend on
        freqid selection. Changed line to:
        OURS = ((FRQSEL.LE.0) .OR. (FREQID .EQ. FRQSEL))
        Moved nowhere.

 8935.  January 11, 1996        $SYSUNIX/AIPSASSN.(C)SH         Dave
        Over time, the AIPSASSN.(C)SH scripts at the AOC had
        picked up slight differences from the SYSUNIX version
        and from each other. I incorporated the relevant stuff
        into a single version and took out some old things which
        haven't been used for awhile (CVEX!).
        Moved nowhere, man.

 8936.  January 11, 1996       $SYSUNIX/READLINE.SHR, etc.     Pat
        Created three new AIPSSHAR format archives to hold the three
        directories needed to build the GNU ReadLine library:
        READLINE.SHR, RLDOCS.SHR, and RLEXAMP.SHR.  The last two should
        be expanded into docs/ and examples/ subdirectories of wherever
        the READLINE.SHR file is expaneded; INSTEP1 needs to take care
        of this for source-only builds.
        Moved to NEW this date (as should a lot of the above changes...)

 8937.  January 11-13, 1996         Misc from Alpha            Eric
        The alpha compiler is good at warnings.  With the usual 0
        initialization the following are not serious:
        RANDIN  Changed Common /RANDOM/ to /RANDMM/ to avoid conflict
                with library function name
        RANDUM  /RANDOM/ -> /RANDMM/
        QMSPL   /RANDOM/ -> /RANDMM/
        CANPL   /RANDOM/ -> /RANDMM/
        STFND   KOFF was used without intialization - variable dropped.
        ACFIT   USERID set to IUSER an uninitialized local variable
        DCONV   NMAX declared before and after the PARAMETER statement.
        LTESS   Used left over adverbs not present in task to set Common
                parameters which were not used
        MK3IN   In AT10XX, IBASE referenced in debug section without
                initialization.  GUESSED that an equivalence was needed
                to TMPBUF(2) as in other routines.
        SELSD   Removed left over error test, no longer meaningful.
        SNSMO   Record offset in RFFXFG routine not initialized - 0
                seems what was desired.
        STESS   Used left over adverbs not present in task to set Common
                parameters which were not used
        UFVFIL  Alpha complained wrongly about 2 out variables not
                initialized; added inits to fool it and to be defensive
        UVIMG   Removed line using F which was not DATAed.  DOSMTH set
                correctly a few lines later.
        IM2UV   Changed a double comma to a single comma in a FORMAT.
        FRMAP   OLDSRC = SRCDUN where SRCDUN never set and OLDSRC never
                tested or used; dropped both variables.
        TVFLG   Droped a test against TEMP (=0) since always true.
        VBPLT   Dropped a bunch of unused code that gave warnings a
                counted junk.
        VPLOT   Dropped a bunch of unused code that gave warnings a
                counted junk.
        ITICS   Dropped an unused error message section.
        **** But the following may have caused an error:
        GSCAT   OUTIND not initialized - meant buffers addressed from 0
        IMFIT   A bad number of good samples was passed to the first
                call to LMSTR1.  It may not have mattered since FCN does
                not use that parameter.
        VLBIN   Corrected an error in calculating the earth rotation
                rate and removed unused and erroneous code purporting to
                set up history info
        ISPEC   Used an otherwise unused variable (SCALX) to set an
                offset to the plot.  Using SCALY as intended will change
                the offset a lot, but may not affect the plots.
        IBLED   Used a bad subscript into the ERRORB array when plotting
                error bars for the upper (full vis) plot.  Used uninit I
                rather than IX.
        PFPL3   Did not have a good value for magic blanking.
        SPFLG   Droped a test against TEMP (=0) since always true and
                fixed tests in the history writing that left things out
                when the 1st antenna stayed the same but the 2nd
                changed.
        Moved to NEW.

 8938.  January 14, 1996           BPASET                   Eric
        This piece of shit was setting ARRAY(TELNO(I)) without regard
        for the value of TELNO(I) for i = 1 through 90!.  Caused DEC
        machines to blow up   I am tempted to cancel the release when I
        look at this code.  Between BPASET, BPFSEL, BPREFM, and POLVIS
        (alone) there are 26 arrays dimensioned (MAXCHA,MAXIF) rather
        than (MAXCIF).  The former is 114800, the latter 8192 which may
        be a little small.  Thus these 4 subroutines alone make many
        tasks (almost all with shared libraries) use about 10 Mbytes
        more swap than they need.  There are many more such misuses of
        the worst case scenario - in DSEL.INC, DUVV.INC, DBAV.INC etc.
        BP and Pol cal must be rewritten - but it's not my job anymore.
        Moved the simple fix to NEW this date.

 8939.  January 14, 1996       Undefined floats            Eric
        POPS puts V(SP) = C(j1) in a value stack even when this is not
        appropriate (i.e. j1 = 2) and the C is an integer of the
        equivalence K.  This cannot be changed since the legal/illegal
        j1's cannot be fully determined.  Changed AU2, AU5, AU5C, AU8,
        AU9C, AUC, and SUBS to check  for an array/string name on the
        stack rather than a scalar.  This should reduce the problem.
        DEC OSF/1 is unforgiving about math with bad values.
        Moved to NEW this date.

 8940.  January 15, 1996    Buffers used by ANTAB/GC tables  Athol
        MK3 data require more substantial buffers due to the larger
        number of IF channels. Increase all gain curve (GC) table
        I/O buffers from 8192 to 16384. Make this change in
        $APLNOT/GCINI.FOR, $APLNOT/TABGC.FOR and $APLNOT/GCKEY.FOR.
        Increase general buffers BUFF1 and BUFF2 in $APGNOT/ANTAB.FOR
        accordingly. Also increase the ANTAB work buffer in
        subroutine TYCONS, used when consolidating the system
        temperature entries in the TY table. This limit breached
        by a combined VLBA dataset stretching over four days.
        Moved to 15JAN96 this date.

 8941.  January 15, 1996      $APGNOT/UVFIX.FOR           Gustaaf
        Added the recent leap second information of January 1 to the
        UVFIX code.
        Moved nowhere

 8942.  January 15, 1996       IMFIT, JMFIT                 Eric
        Changed integral flux units from JY/BEAM to JANSKYS when
        possible.
        Moved to 15JAN96.

 8943.  January 16, 1996            IMMOD                   Eric
        Changed scaling of brightnesses to account for the beam in the
        input image.
        Moved to 15JAN96.

 8944.  January 16, 1996            TVCPS                   Eric
        Added OPCODE = 'COLB' which makes blanked and edge pixels
        'FFFFFF' rather than '000000'.  The latter is black, the former
        transparent on transparency paper.  Option ignored when DOINV
        TRUE.
        Moved to 15JAN96.

 8945.  January 16, 1996           KNTR                     Eric
        Needed to use LOCNUM = 2 for calls to PLTBEM - LOCNUM = 1 can be
        messed up with labeling type choice but 2 is in standard
        coordinates.
        Moved to 15JAN96.

 8946.  January 17, 1996            TVRGB                   Eric
        Changed code so that, if DOOUT > 1.5, fully blanked pixels are
        converted from black to white (transparent).
        Moved nowhere, 15JAN96 is frozen fairly solid.

 8947.  January 17, 1996            $APGNOT/SPCAL.FOR & .HLP   Athol
        Upgrade of SPCAL. New features include: i) larger buffers to
        accomodate VLBA datasets; ii) more careful checks on pre-avg.
        buffer pointers; iii) new solution type 'RAPR' which assumes
        that the linearly polarized emission in each channel is a
        scaled form of total intensity (as in PCAL).
        Moved to 15JAN96 (before hard freeze).

 8948.  January 18, 1996           CookBook                  Eric
        Modified COOK13 (and help file ZZMODELING) to update all ABOUT
        files to the absolutely latest point.  Modified COOKZ to change
        the ftp instructions to send slides to CV and to mention e-mail
        with gripes.
        Moved nowhere.

 8949.  January 22, 1996          DOSMTH                    Eric
        Changed CALEDIT to init DOSMTH to true - it will be unset if
        SMOOTH is 0.  Changed CALEDIT to declare SMOOTH as an int,
        matching the DSEL.INC definition.  Changed IMAGR and BLING to
        declare SMOOTH to be integer.
        Moved from 15JAN96 as a temporary patch.

 8950.  January 22, 1996          CHINC                    Eric
        This was badly messed up too.  OUVIMG in QUVUTIL set CHINC to 1
        rather than finding out what its value really was and then
        passed that to IMGMEM which passed it to a header correction
        routine.  Changed QUVUTIL to acquire the real CHINC from the UV
        object.
        The header routine had the bizare idea that the frequency
        increment should be the averaging width if channel are averaged.
        That makes sense if they are all averaged, but not if just some
        are.  Changed IMHCOR to test the number of points on the freq
        axis too.
        Moved to 15JAN96.

 8951.  January 21, 1996             TRANS                  Eric
        The fix of the ALT ref pixel did not consider the sign applied
        to the new axis - leading to trouble when people reverse a
        frequency axis (which they should do in some cases).  Added a
        test for sign and the correct fix for reversal.
        Moved to 15JAN96.

 8952.  January 22, 1996         $APGNOT/FXVLA.FOR & .HLP     Athol
        New task to correct a UT1 interpolation error affecting VLA
        data between 30 Dec 95 and 5 Jan 96. This error was caused
        by interpolating over a leap second discontinuity. Best to
        keep this task in the system as these data may be reduced
        much later.
        Should go to NEW.

 8953.  January 23, 1996          LWPLA                      Eric
        Added 11x17 paper and user-dimension paper to the output
        options.
        Moved nowhere.

 8954.  February 1, 1996           PRTIM                     Eric
        The scaling was trying to set a blanked value around -2**31
        which caused some systems (Linux) to blow up.  There is no need
        for such extremes and I changed it completely to use normal
        numbers.  (These extremes made sense with 16-bit integers.)
        Found that a character buffer was only 70 long, despite being
        prepared to put 126 characters into it.  Correctd the handling
        of characters in the display routine in general.
        Moved to patch for Linux.

 8955.  February 6, 1996          READLINE.SHR               Pat
        Two C routines did not compile under HP-UX A.09.01, rltty.c and
        readline.c.  Both needed appropriate #ifdef or #if defined
        clauses around problem code.  Inserted same in a generic manner.
        Moved to the 15JAN96 distribution today.

 8966.  February 6, 1996      $APLUNIX/ZGUEST.C              Pat
        The HP compiler (by default non-ansi) does not like aggregrate
        initialisation of automatic arrays (e.g. char foo[4] = "bar";),
        so I made the one such statement herein static.  That makes the
        compiler happy.
        Moved to the 15JAN96 distribution today.

 8967.  February 6, 1996       $APGNOT/IMFIT.FOR, JMFIT.FOR   Pat
        Inserted necessary commas in a format statement.  HP-UX is very
        fussy about having these (e.g. 1X,'FOO 'I3 has to be
        1X,'FOO',I3) and will refuse to compile Fortran unless they're
        in the right places.
        Moved to the 15JAN96 distribution today.

 8968.  February 6, 1995      $APLSGI/ZGRLTC.C               Pat
        Because the use of Posix was mandated in the compile switches,
        this routine when compiled cannot get the Berkeley extension
        prototype for strdup() and thinks it's an int.  Quick solution
        is to cast it to a (char *) in the three places it's used.
        Longer term solution is not to use strdup (as Jeff indicated to
        me earlier today).
        Moved to the 15JAN96 distribution today.

 8969.  February 7, 1996      $APGNOT/DTSIM.FOR & DTSIM.HLP    Athol
        Data simulator used by VLBA DDT. Placed in system to facilitate
        easier testing. This is an alpha release only.
        Moved nowhere.

 8970.  February 7, 1996      $SYSLINUX/f77                    Jeff
        Now keeps some interim (f2ctmp_*) files around if called with -g
        (e.g. when COMLNK is called with DEBUG option).  Needed for
        decent behavior of gdb on tasks.
        Moved nowehere.

 8971.  February 8, 1996      $APGNOT/FXVLA.FOR               Athol
        Leap second was not corrected at midnight 31 Dec as originally
        believed; rather some hours later during the shutdown. Adjusted
        table of time offsets accordingly.
        Moved nowhere.

 8972.  February 9, 1996           VPLOT                     Eric
        Numerous ATAN2's in the task did not check for both arguments
        being zero.  This occurs and crashes things.  Added a bunch of
        tests.  Why are som any Vis's exactly 0 with positive weights?
        Moved nowhere.

 8973.  February 12, 1996          LTESS                     Gustaaf
        LTESS had the cutoff for the primary beam hardcoded at 7%. On
        Rick Perley's request I modified LTESS and APLPBI to allow the
        user to specify the cutoff. It still defaults to 7%.
        Moved nowhere.

 8974.  February 13, 1996          VLBA DDT                  Athol
        Add new features to $APGNOT/DTSIM.FOR including BP response
        and amplitude errors. Task is still being evaluated but needs
        to be in TST. Also added new task $APGNOT/DTCHK.FOR to
        determine test compliance after simulated data have been
        processed. Modified/added $HLPFIL/DTSIM.HLP and DTCHK.HLP.
        Moved nowhere.

 8975.  February 14, 1996     PCCOR                          Leonia
        This is a new version of PCCOR which implements the algorithm
        proposed by Craig Walker. This algorithm resolves TWOPI*n
        ambiguity better in the case of non-contiguous IFs.
        Moved nowhere.

 8976.  February 14, 1996     $YPGNOT/APCAL.FOR              Athol
        Increase gain (GC) table buffers to 16384 to accomodate MK3
        datasets with 28 IF channels. Strip any null characters from
        antenna names to increase the robustness of the calls to the
        KEYIN routines. Improve handling of source selection of the
        type "-SOURCE".
        Moved nowhere.

 8977.  February 15, 1996     $APGNOT/SETJY.FOR & SETJY.HLP  Athol
        Add new polynomial coefficients for flux density calculations
        using OPTYPE 'CALC'. These values derived by Perley & Taylor
        from VLA flux density monitoring in 1995. Also corrected
        rounding errors introduced in SETJY for the Perley 1990
        coefficients. This error, which for 3C286 ranges from 0.5%
        to 1.9% from P-band to Q-band, was recently uncovered. The
        rounding error for the other sources is less significant.
        Updated the HLP file to reflect these changes.
        Will move to patch area.

 8978.  February 15, 1996      $APGNOT/FITLD    $INC/DUVV.INC     Phil
        Several changes:
        (1) Added the default option of deleting the VLBA Tape
            Statistsics table. This is a large table that is only needed
            for diagnostics. Users have to specifically request it via
            OPCODE to keep it. Also changed FITLD.HLP
        (2) Added the first round of code to deal with source and
            frequency subarrays. FITLD does not attempt to label such
            subarrays on the fly - much too complex an operation, but it
            will recognize them and tell the user. It will also delete
            the NX and CL tables and, depending on whether a source or
            frequency subarray was found, tells the user to run USUBA or
            UVCOP and reconstruct the NX and CL tables.
        (3) Due to a deficiency in the binary FITS design the
            polarization label is held constant for a correlator job in
            the case of single polarization observations. This was fine
            since the default for most VLBI observations is to use LCP,
            however X-band has traditionally used RCP and since the VLBA
            can switch bands quickly more people are doing this. This
            results in jobs which start at X-band having a different
            polariztion label than those that start at other
            bands. Fixed up FITLD to pass such data through with a
            warning to the user. No harm comes from this
            mis-labelling. The design of the table is being
            reconsidered.
        (4) Following Eric's observation that FITLD was one of the major
            culprits of memory gulping (via DUVV.INC), I examined what
            was needed and was able to reduce the memory required
            considerably.  Removed DUVV.INC from the system (only FITLD
            called it) and incorporated it as a local include. Also
            fixed up the section of code that was causing the
            problem. FITLD is now much more friendly in terms of memory
            useage, more will follow.
        Moved nowhere.

 8979.  February 20, 1996         VLB DDT                     Athol
        Upgraded versions of $APGNOT/DTSIM.FOR and $APGNOT/DTCHK.FOR
        placed in the system for continued testing. Also updated
        $HLPFIL/DTCHK.HLP to document new features.
        Moved nowhere.

 8980.  February 21, 1996    $APLNOT/CLBPA.FOR & $QPGNOT/CALIB.FOR Athol
        CALIB did not always deal correctly with the case of dual-polzn.
        data where one polzn. is missing throughout a solution interval.
        In the fit, polzn.-independent weights were used, which at times
        led to very high gains in the missing sense of polarization.
        This in turn biased the mean gain modulus (MGM), if computed.
        Errors in the MGM were cumulative over several iterations.
        Corrected this error by passing polzn-dependent weights to CLBPA
        to be used in the fit. Single polzn. data are unaffected. The
        incidence of this error in dual-polzn. data may be low.
        Moved nowhere.

 8981.  February 21, 1996          DOSMTH                  Eric
        This parameter is a strange one - there is no user adverb that
        sets it directly.  SETSM will set it false if SMOOTH(1) = 0, but
        it is not called by UVGET on INIT unless DOSMTH is true.
        Changed SELINI and CALEDIT to initialize DOSMTH to true, leaving
        UVGET to call SETSM to do the default thing with SMOOTH and
        DOSMTH.  This allows a programmer to block smoothing before the
        UVGET (INIT) call if he/she desires, but removes the need for
        that parameter to be set when normal behavior is desired.
        Normal behavior was unavailable to OOP code before this change.
        Moved nowhere - partly done previously to NEW and TST.

 8982.  February 21, 1996           SMOOTH                 Eric
        The SMOOTH parameter was declared integer for no good reason and
        the frequency smoothing was done with an array that was large
        and calculated as finely as 1/500'th of a channel, but only used
        at every integer channel.  Further, the limits set on the
        invocation of frequency smoothing required an even larger array
        and would have divided by zero had any user invoked extreme
        frequency smoothing.  To straighten out this mess, changed:
        PUVD.INC   Define parameter MAXSMO=256, the width of smoothing
                   support in channels.
        DSEL.INC   Removed SUPRAD and SMDIV variables, changed SMOOTH to
                   REAL and declared SMTAB(MAXSMO).
        CALEDIT    Changed back to declaring SMOOTH floating.
        BLING      Changed back to declaring SMOOTH floating.
        IMAGR      Changed back to declaring SMOOTH floating.
        SETSM      Corrected error: the range of channels was extended
                   from BCHAN and ECHAN by the smoothing width
                   (SMOOTH(2)) not the support radius.  Changed to limit
                   the support radius to MAXSMO-1 and reset SMOOTH(2) if
                   too wide a function was requested.  SMOOTH(3) ends up
                   as 2 * support-radius + 1.  Cleaned up coding some,
                   removing any subdivisions in the table.
        SMOSP      By rearranging loops, changed the TEMP array to save
                   MAXCHA floats and to speed addressing, removed all
                   the subdivision and rounding in the addressing
                   (integers are simpler and more reliable), corrected
                   it to compute BCHAN to ECHAN rather than a wider
                   range of channels, simplified the use of TEMP and the
                   computation of addresses into the VIS array.
        Many tasks set SMOOTH with IROUND, set DOSMTH to SMOOTH(1)>0,
        and put some version of SMOOTH into the HI.  Changed to copy
        floats to SMOOTH, ignore DOSMTH (now true and controlled), and
        to do a better HI line:
           ACFIT   DECOR   LISTR   SHOUV   UV2TB   UVFIT   UVIMG
           BPASS   FRING   HORUS   CPASS   IBLED   POSSM   FRPLT
           SPFLG   TVFLG   UVPLT   VBPLT   CLPLT   VPLOT   UVPRM
           UVPRT   SPCAL   SPLIT   CALIB
        Moved nowhere.

 8983.  February 21, 1996          MAXCHA                  Eric
        The maximum product of spectral channels and IFs is MAXCIF which
        is 8192.  The product of MAXCHA and MAXIF is now 28 times
        MAXCIF and must never be used.  Changed:
        PUVD.INC   Increase MAXCHA from 4100 to 8192 to support the
                   Australia Telescope.  Left MAXCIF at 8192.
        MAXCIF will be taken to be the max product of # polarizations
        times # channels times # IFs.
        Data addressing in input buffer was done with a vast array JADDR
        and SELFAC each (2,2*MAXCIF).  Changed these to be (2,4) via:
        PUVD.INC   Dropped XTTSZ.
        DSEL.INC   Changed JADDR, SELFAC dimensions and changed MVIS to
                   MVIS(8) to pass loop parameters etc.
        DGINIT     Changed to return the loop pointers in MVIS(*), use
                   small dimension for JADR and SELFAC.  Corrected
                   numerous tests on various general Stokes conversion
                   cases that were wrong or too limiting and added the
                   ability to make RL and LR from Q and U.
        DGGET      Changed to use MVIS(1-8) to loop, to understand
                   flagging when the input is dimension (2,*), to handle
                   the new RL/LR mode, to take and use new argument
                   TRANSL to imply simple copies versus translations.
        DATGET     Changed to call DGGET at all times, passing TRANSL.
                   Corrected TBUFF size to 3 * MAXCIF rather than 12 *
                   MAXCHA.
        DGETSD     Changed to call DGGET at all times, passing TRANSL.
                   Corrected TBUFF size.
        SDGET      Dropped peculiar setting of JADR and changed to call
                   DGINIT in all cases.  Added to buffer overflow tests.
        UVGET      Add to buffer overflow tests.
        MX         Changed dimensions of JADR and SFACT, added .TRUE. to
                   call to DGGET to do translation.
        ACFIT      Changed buffer from (2,MAXIF,MAXCHA) to MAXCIF and
                   fixed code to use more efficient addressing (array
                   with chan first, then if, then pol as the loops are
                   constructed).  Dropped the pretense that BIF,EIF and
                   BCHAN,ECHAN are anything besides 1,NUMBIF and
                   1,NUMFRQ (which were used a few places).  Fixed
                   dimension of VIS - 8192 should be 3*MAXCIF+say 20.
        SPLIT      Changed VIS from 12*MAXCIF to 3*MAXCIF, the new
                   limit.  changed buffers to UVBFSS from UVBFSL.
        Moved nowhere.

 8984.  February 21, 1996           LAMSQ                  Eric
        LAMSQ is a variable defined in DSEL.INC with the no-no size.
        Changed:
        DSEL.INC   To make it LAMSQ(MAXCIF), add MACIF, MACCHA
        GAININ     Cleaned up typing, changed LAMSQ addressing using new
                   pointer MACCHA (the ECHAN used in setting LAMSQ)
        DATPOL     Compute offset to address into LAMSQ
        ORIPOL     Compute offset to address into LAMSQ
        VLBPOL     Compute offset to address into LAMSQ
        PCAL       Compute offset to address into LAMSQ
        Moved nowhere.

 8985.  February 21, 1996          POLVIS                 Eric
        This subroutine (to ratio 2 polarizations) was the largest in
        all of our libraries, requiring 5.5 Mbytes (soon to be 11
        Mbytes) of non-sharable local data space.  It turned out that
        this subroutine was used only by VPLOT and VBPLT, but with
        shared libraries the 5.5 Mbytes was a millstone hung around the
        necks of all "not standard" tasks.  Upon examination, the 5,5
        Mbytes was used for a TEMP array that was not needed at all!
        Coding conservatively, the TEMP array of 5.5 Mbytes was replaced
        by 16 bytes of TEMPxx variables, 8 of which were already there
        anyway.  Further examination revealed that when the denominator
        vis was flagged, the output was not flagged (unless the
        numerator was also flagged) but was modified by the flagged vis
        with a denominator set to 1!  The subroutine also ignored the
        possibility that the Stokes axis might not be the second axis,
        although all calling routines were careful to honor the
        possibility, by now messed up, later.  Changed POSSM - it had a
        copy of POLVIS that was verbatim the same except that the
        dimension of TEMP used MAXCIF rather than MAXCHA * MAXIF.
        Moved nowhere.

 8986.  February 21, 1996        TABIO                        Eric
        Changed TABIO so that the work buffer is always 512 words, large
        data records are read/written directly to disk.  Changed
        TABINI   Dropped NBUF from call seq.
        TABIO    Restructured to add immediate read/write for large
                 records (flag word costs a 256-word scratch) and to use
                 IF/THEN/ELSE where possible.  Code is now simpler I
                 hope.
        Changed TABINI call seq in:
        BPINI   LISTR   MX      CLPLT   TABSRT   SPFLG   TVFLG   VBPLT
        VPLOT   AU8A    ANTINI  CCINI   GSCRED   STOPEN  BLINI   BSINI
        CALINI  CCMERG  CCMINI  CHNDAT  CLSORT   CQINI   CSINI   FLGINI
        FQINI   GACSIN  GAINI   GCINI   HFINI    IMREF1  NDXINI  OTTINI
        SETGDS  SNINI   SOUINI  SUMARY  TYINI    GRDCRM  VISDFT  VSCDFT
        VSFDFT  STARPL  BLFIT(in APLCONTR)       CORFQ   MF2ST   PRTAB
        PRTCC   SAD     TACOP   SNPLT   PROFL    CCNTR   APCLN   SDCLN
        RSTOR   CCFND   CCMOD   CLSMO   DBCON    FITTP   FXPOL   GSTAR
        MFPRT   SDTUV   STARS   STRAN   TABED    TAMRG   TBOUT   USUBA
        For include files in table usage (with FITLD mostly), dropped
        NBUF and moved the table title, column units, and column labels
        into the *INI.FOR from the D*V.INC include.  Made the RECORD
        variable be *TAB.FOR.  All these avoid repetitions of unused
        variables one way or the other.  Changed:
        DAGV.INC  AGINI  AGTAB
        DATV.INC  ATINI  ATTAB
        DBCV.INC  BCINI  BCTAB
        DBAV.INC  BAINI  BATAB      The above plus redefined the RECORD
                  variable from MAXCHA*MAXCIF*4+10 to XBPRSZ and the
                  bandpass parts from (MAXIF,MAXCHA) - note backwards -
                  to (MAXCIF)
        DCAV.INC  CAINI  CATAB
        DCMV.INC  CMINI  CMTAB
        DFLV.INC  FLINI  FLTAB
        DFRV.INC  FRINI  FRTAB
        DIMV.INC  IMINI  IMTAB
        DPCV.INC  PCINI  PCTAB
        DSOV.INC  SOINI  SOTAB
        DWXV.INC  WXINI  WXTAB
        Also TABINI call seq plus:
        BPREFM    Make 2 buffers (512) rather than (16384).
        UNCAL     Drop buffer size to 512 for BPIN and other table
                  routines.
        BPCOR     Drop buffers from 16384 to 512
        GAININ    Call seq TABSRT, TABINI, DSMEAR; previous NBUF wrong.
        TAFLG     Revise buffer handling to handle cells > 256, rows >
                  4096.
        TAPLT     Revise buffer handling to handle cells > 256, rows >
                  4096.
        CLCAL     BUFFER, OBUFF (2048) -> (512).
        UV2TB     BUFFER(8192) -> (512).  NBUF was wrong by *2.
        VBGLU     Changed row length from 10+4*MAXCIF to XBPRSZ (half)
                  and 2 buffer sizes from UVBFSL (> 64000) to 512.
        TBDATA    Changed max cell size from 1024 to MAXCIF, drop work
                  buffer from 4096 to 512, change max record length from
                  3000 to XBPRSZ.  Corrected DP variable in equivalence
                  which was twice too long.
        TBHEAD    Changed buffer from 4096 to 512.
        TABMRG    Changed max row length (512) to (XBPRSZ), fixing DP
                  equivalence error.  Changed call sequence dropping
                  buffer lengths now fixed at 512.
        ACTFRQ    Changed a buffer from 17000 to 512.
        PUVD.INC  Add parameter XCLRSZ = 40+13*MAXIF - max CL record
                  size (will do for SN too)
        TABCAL    Changed to use XCLRSZ and to do it correctly with DP.
        TABSN     Changed to use XCLRSZ and to do it correctly with DP.
        CALSEL    Changed DP (1024) equiv to int(1024) - changed to use
                  XCLRSZ.
        SOLCL     Changed to use XCLRSZ.
        FRQUPD    Changed to use XCLRSZ - was 22 + 60*MAXIF for int and
                  11 + 30*MAXIF for real!  Did correct sort buffer size
                  - it was too small before.
        CLREFM    Dropped 2 buffers from 1024 to 512, changed to XCLRSZ.
        CQMAKE    Drop NBUF from call seq.
        FXVLB     Change CQMAKE call seq.
        DSMEAR    Drop NBUF from call seq.
        DCVL.INC  Change XLBUFF(1024) to (512)
        TABAPP    Change call seq, dropping NBUF but adding RECORD.
                  Change TABIO loop to use RECORD.  Routine is never
                  called.
        MAKTAB    Drop NBUF from call seq
        UVLOD     Change MAKTAB call, change buffer(8192) -> (512).
        IMLOD     Change MAKTAB calls, buf(1024) -> (512)
        TBIN      Change MAKTAB call, buf(87192) -> (512)
        APCAL     Changed 2 buffers from 16384 to 512.
        FRING     Dropped EQUIVALENCE of large FLUX array to BLBUFF
                  (which is no longer large).
        CCMRG     Changed to call external subroutine CCMERG .
        FITTP     Moved 2 unsed subroutines to $APLCONTR/FITTP.JUNK.
        PCLOD     Eliminated extra simple scratch buffers and made
                  smaller.
        PRTAB     Made SCRBUF and RESULT large enough for BP tables
                  (XBPRSZ and MAXCHA resp).
        Moved nowhere.

 8987.  February 21, 1996         TABSRT                    Eric
        TABSRT does not need the buffer size since TABINI no longer
        does.  Changed:
        TABSRT   IBLED   GAININ   CLCAL   LISTR   SPFLG   TVFLG
        UVGET    CCMERG  BPASET   CLSORT  CALADJ  FRQUPD  GACSIN
        SDGET    BLFIT   APCAL    TABLE   BPASS   CVEL    CLSMO
        MFPRT    TAMRG   ANCAL    INDXR   PCLOD   SNSMO   SOLCL
        TASRT    CALIB
        TABMRG call seq changed too:
        CCMERG   TABLE   TAMRG
        Moved nowhere.

 8988.  February 21, 1996       OOP tables                 Eric
        Moved the table control block from 1/2 of the I/O buffer to the
        last 512 words of the I/O buffer.  Changed TABLE and TABLEUTIL.
        The rest of the record will be long enough for BP tables now
        (not before).
        Moved nowhere.

 8989.  February 21, 1996        BLFIT                   Eric
        This one may be worth resurecting from $APLCONTR.  Fixed the
        references to the CL table to the new format.  The algorithm may
        just work now.
        MOved nowhere.

 8990.  February 21, 1996        UBUFSZ                   Eric
        This is UVBFSL * 2 not 8192 * 2.  Changed:
        LISTR   SPFLG   TVFLG   FRING
        CVEL used this variable for its own buffer but gave only 1/2 its
        size to TABSRT.
        Moved nowhere.

 8991.  February 21, 1996       ZPBUFSZ                   Eric
        Changed UVBFSS to 3*8192 + overhead to handle MAXCIF, changed
        UVBFSL to 9*8192 + overhead.
        Moved nowhere.

 8992.  February 21, 1996          Bandpasses                    Eric
        Found all sorts of excess stuff.
        Following GREPs on MAXCIF and TABBP I changed:
        DSEL.INC Changed BPBUFF to (512), dropped XBPIOB.
        PUVD.INC Added XBPRSZ - the max table record size needed
        DATBND   Changed bandpass buffers from 6*MAXCIF to 3*MAXCIF to
                 include polarization in the MAXCIF limit.
        BPASET   Changed buffer overflow test to include #pol.  Changed
                 3-D buffers into 2 of reasonable size, dropped the
                 buffer used only for sorts (reusing the Large IO
                 buffer).  Corrected the buffer size given to UVINIT -
                 the code was claiming that it was twice too large.
        TABBP    Changed DP variable twice as large as the equivalenced
                 variables to the size of its mates.  Changed buffer
                 overflow test to include NUMPOL and added other tests.
                 Changed maximal array declaration to a 1-D array and
                 made optimizable code to fill/empty it.
        BPREFM   Changed the in and out buffers to XBPIOB from 16384
                 (which is now too small!) and changed REAL and IMAG
                 from (2,MAXCHA,MAXIF) to MAXCIF.
        BPFSEL   Changed dimension of REAL and IMAG and addressing of
                 them.  Added comment re required buffer sizes.
        TABLEUTIL  Changed dimensions of call argument to (unused)
                 OTABBP from 2,MAXCHA.MAXIF to MAXCIF.
        BPASS    Changed RECORD size by half and made it a common
                 include rather than 2 separate local buffers.  Changed
                 MAXCIF test to include polarizations.  This would
                 benefit from dynamic memory!
        CVEL     Halved BPARR1 and BPARR2 since MAXCIF includes
                 polarizations now.  Fixed test on MAXCIF.  Changed
                 handling of arrays to TABBP making them neater and
                 probably optimized better as 1-D much smaller arrays.
        BLING    Changed one array which was 4*MAXCIF to 3*MAXCIF which
                 was all that was needed.
        AVSPC    Changed in/out buffers from 12*MAXCIF to 3*MAXCIF.
        SWPOL    Changed in and out buffers to 3*MAXCIF rather than 12
                 and fixed up the buffer size check.  Corrected
                 assumption that there is an IF axis always.
        FIXWT    Changed VIS from 12*MAXCIF to 3*MAXCIF.
        IBLED    Changed vis buf from 12*MAXCIF to 3*MAXCIF and improved
                 the test on buffer size.
        TVFLG    Changed vis buf from 12*MAXCIF to 3*MAXCIF.
        SPFLG    Changed vis buf from 12*MAXCIF to 3*MAXCIF one place
                 and from 12 * MAXCHA to 3 * MAXCIF another.
        POSSM    Changed a bunch of maximal size 2-D arrays to 1-D of
                 size MAXCIF.  Dropped the reversal arrays, changing
                 code to do it more economically.
        BPCOR    Changed buffers (2,maxcha,maxif) to MAXCIF and changed
                 the addressing into them.
        UNCAL    Changed BUFF1 from 2048 to 256.  Changed the local
                 buffers to do BPs to 512.
        CPASS    Changed maximal buffers to address in new scheme.
        Following GREP on MAXCHA I also changed:
        FRQTAB   Was testing on MAXCHA when should have used MAXCIF.
                 Changed test to include polarization too
        SDGRD    Buffer was MAXCHA, should have been MAXCIF.
        R3DTAB   Changed to use XBPRSZ for max record size, 512 for
                 BUFFER.
        UVMTH    Used MAXCHA for max product pol*channel*IF, changed it
                 to MAXCIF.
        Moved nowhere.

 8993.  February 21, 1996        BPGET                      Eric
        This is more of a mess than I had hoped.  There are 0, 1, or 2
        more SC files created and opened on every initial call that are
        not closed or deleted or reused.  Changed:
        DSEL.INC  Changed BPNAME and BPCNO to (3), dropped BPVOL since
                  it is redundant and BPDSK since it is always 0.
        SELINI    Changed to set BPNAME = ' ' for all 3.
        UVGET     Add subscript to BPNAME.
        BPASET    Add subscripts to BPCNO, BPNAME; change BPVOL to
                  SCRVOL(BPCNO(1)), drop BPDSK silliness.
        HORUS     Add subscript to BPNAME.
        CVEL      Cleaned up its (separate) handling of these, removed
                  excess copyright statements AND put one where it
                  belongs.
        BPGET     Retyped so that its logic would be apparent.  Dropped
                  several sections of repeated code that needed to be
                  there only once.  Changed to keep track of open files
                  and close them on exit.  Added subscripts to variables
                  as needed.
        SCLOAD    Changed to reuse SC files and record them in the
                  common, cleaned up messages.
        SCINTP    Changed to reuse SC files and record them in the
                  common, cleaned up messages.
        Moved nowhere.

 8994.  February 21, 1996         ZCREAT call seq               Eric
        Dropped unused scratch buffer from ZCREAT call seq.  Changed
        $AIPPGM/FILAI2   FILAIP   FILINI   AIPSC
        $AIPSUB/AU2      CATCR    SGLAST   SGLOCA   STORES
        $APLGEN/ZCREAT
        $APLPGM/TAFLG    MOVE
        $APLNOT/CALCOP   OTBSRT
        $APLSUB/CATDIR   CATOPN   EXTINI   FILCR    HICREA   IOSET
                MAPSIZ   MCREAT   RESCAL   SCREAT   TABCOP   TABINI
                UVCREA
        $APLCONTR/WSLOD
        $YSUB/GINIT
        ZCREAT in $APLCRI and $APLGEN
        Moved nowhere.

 8995.  February 21, 1996          ZEXIST call seq              Eric
        Dropped unused scratch buffer from call seq.  Changed
        $AIPPGM/FILAI2   FILAIP   FILINI   AJAX     RECAT
        $AIPSUB/AU3A     AU8      CATCR
        $APLGEN/ZEXIST   ZEXPND   ZWHOMI
        $APGNOT/FILLM    MK3IN    OTFUV    FITLD
        $APLPGM/DISKU    TAFLG    MOVE
        $APLNOT/BPASET   CALCOP
        $APLOOP/UVDATA   UTILITY
        ZEXIST in $APLCRI and $APLGEN
        Moved nowhere.

 8996.  February 21, 1996         ZCMPRS call seq      Eric
        Dropped unused scratch buffer from call seq.  Changed:
        $AIPSUB/PRTMSG
        $APLGEN/ZCMPRS
        $APGNOT/FILLM
        $APLPGM/PRTAC
        $APLNOT/BPASET   CALCOP
        $APLSUB/TABIO    UCMPRS
        $QPGMNOT/CVEL
        $YSUB/GFINIS
        ZCMPRS in $APLCRI and $APLGEN
        Moved nowhere.

 8997.  February 21, 1996       UCMPRS call seq        Eric
        Changed UCMPRS call seq to drop unused buffer.  Changed
        $APLPGM: CLIP    CORER   DIFRL   FUDGE   SDMOD   TBAVG   UVBAS
                 UVLSD   UVLSF   UVMTH   UVPOL
        $APGNOT: ACFIT   ASCOR   AVER    AVSPC   BASRM   BLAVG   BLOAT
                 DAYFX   DECOR   DESCM   FILLR   FXVLA   MK3IN   MULTI
                 OTFUV   PHSRF   SBCOR   SDCAL   SDTUV   SELSD   UVAVG
                 UVCOP   UVDGP   UVFIL   UVFIX   UVGLU   UVLIN   UVLOD
                 UVMOD   UVNOU   UVSIM   VBCAL   VBGLU   VBMRG   VLBIN
                 WTMOD   SPLIT   FITLD
        $APLOOP: UVDATA
        $QPGNOT: BPASS   CPASS   FRING   IM2UV   LPCAL   PCAL    CALIB
        $YPGNOT: IBLED
        Moved nowhere.

 8998.  February 21, 1996          SMOTYP, et al                 Eric
        The parameters of DSEL.INC called SMOTYP, INTFN and INTPRM were
        intended for time smoothing gains before application.  This
        function has been moved to specific tasks.
        Removed reference to them from
        DSEL.INC        SELINI  PRTSD   SPCAL   BLCAL   BPASS   CPASS
        LISTR   SDCAL   SELSD   SHOUV   UVFIT   UVIMG   UVPRM   UVPRT
        FRING   PCAL    SDGRD   LPCAL   IBLED   SPFLG   TVFLG   UVPLT
        HORUS   UVGET   GAININ  SPLIT   CALIB
        Also:
        CLCAL   Moved subroutine SNSMO into this task - it conflicts for
                name with task SNSMO.
        SNSMO   Removed this $APLNOT subroutine to CLCAL.
        SELSMG  Removed to $APLCONTR since unused and deprecated.
        SDCAL   Removed a strange set of resetting/setting of smooth
                function types, not really used.
        Moved nowhere.

 8999.  February 21, 1996       ZMEMRY                Eric
        Added $APLGEN/ZMEMRY, $APLGEN/ZMEMR2, and $APLUNIX/ZMEMR2.C.
        They manage a memory allocation scheme whereby dynamic memory
        may be obtained as needed with some limits designed mostly to
        help find memory leaks.
        Moved nowhere.

 9000.  February 21, 1996         ZDCHIN              Eric
        Changed ZDCHIN to initialize ZMEMRY, to use a new include for
        its local buffer, and to drop the unused buffer from its call
        sequence.  The buffers are in DBBF.INC.
        $APLGEN, $APLCRI, $APL3090 / ZDCHIN
        Changed calls to ZDCHIN in
        INPUT    SETUP    AIPINI   IOSET    AIPS     AIPSB    AIPSC
        BATER    BSTRT1   GRIPR    QMNGR    TPMON    UVFAIP   TVMON
        AJAX     BLFIT    WSLOD    CLIP     CORER    DIFRL    DISKU
        FUDGE    MOVE     PRTAC    SDMOD    TAFLG    TBAVG    UVBAS
        UVLSD    UVLSF    UVMTH    UVPOL    BASRM    BLAVG    BLOAT
        BPCOR    CLCAL    DAYFX    DECOR    DESCM    FILLR    FXVLA
        LISTR    MK3IN    MULTI    OTFUV    PHSRF    PRTSD    SBCOR
        SDCAL    SDTUV    SELSD    SHOUV    SPCAL    SWPOL    UNCAL
        UV2TB    UVAVG    UVCOP    UVDGP    UVFIL    UVFIT    UVFIX
        UVGLU    UVIMG    UVLIN    UVLOD    UVMOD    UVNOU    UVPRM
        UVPRT    UVSIM    VBCAL    VBGLU    VBMRG    VLBIN    WTMOD
        FILLM    BPASS    CPASS    CVEL     FRING    IM2UV    LPCAL
        PCAL     SDGRD    MX       CLPLT    FRPLT    IBLED    POSSM
        SPFLG    TVFLG    VBPLT    VPLOT    ANCAL    APCAL    APCLN
        ASCOR    AVER     AVSPC    BLCAL    CCFND    CCMOD    CCNTR
        CLSMO    CORFQ    DBCON    FITTP    FXPOL    FXVLB    GSTAR
        IMLOD    INDXR    MF2ST    MFPRT    PCLOD    PROFL    PRTAB
        PRTCC    RSTOR    SDCLN    SNSMO    SOLCL    STARS    STRAN
        TABED    TBIN     TBOUT    TAPLT    USUBA    UVPLT    SPLIT
        FITLD
        In doing this found UVPRM and UVPRT to have buffers of 4096 and
        8192 resp.  Changed to UVBFSS.  FRPLT had a 8192 buffer used
        solely for 256-word scratch.  AVER had the antique call seq to
        ZDCHIN (with 4 args).
        Moved nowhere.

 9001.  February 21, 1996         ACOUNT              Eric
        Changed call seq of ACOUNT to drop the buffer and use the DBBF
        ones instead.  Changed ZSTAIP to drop the buffer from its call
        seq (it was not used), which lets us drop the buffers from the
        abort handlers.  Changed calls to these in:
        $APLUNIX, $APLSUN, $APLBERK / ZABORS.C
        DIETSK   GTPARM   AIPINI   AIPS     AIPSB    BATER    BSTRT1
        GRIPR    POPSGN   QMNGR    SETSP    SETTVP   DELSG    FIXCAT
        FIXUSR   GR2TEX   GRITP    RDFITS   SETPAR   TPMON    AIPLAS
        UVFAIP   TVMON    ICON     AJAX     FILAI2   FILAIP   FILINI
        RECAT
        $SYSCRI/AIPS.FOR and ACOUNT.FOR (!?!)
        Moved nowhere.

 9002.  February 21, 1996          UVLSF                 Eric
        Made corrections provided by Neil Killeen: the BCHAN and ECHAN
        were applied to the input when phase shifting and fitting the
        baseline.  They only apply to output and the full loop should be
        done on input.  A couple of minor improvements were also made.
        The suggested large buffers are not needed due to the increase
        in UVBFSS.
        Moved nowhere.

 9003.  February 23, 1996   GETCOL, PUTCOL                Eric
        Immediate I/O made these two work slowly and not at all, resp.
        Changed:
        GETCOL   Add LRNO argument and make ROWbuffer an in/out argument
                 to have the calling routine buffer the row instead of
                 TABIO as it used to do.
        PRTAB    Changed the 1 call to GETCOL.
        STARPL   Changed the 6 calls to GETCOL.
        GSCRED   Changed the 5 calls to GETCOL.
        CLREFM   Changed the 8 calls to GETCOL.
        CCFND    Changed the 1 call to GETCOL.
        MFPRT    Changed the 1 call to GETCOL, changed the MAXKEY and
                 MAXCOL definitions to be something like MF files.  This
                 routine needs a lot of work to clear away the trash.
        STRAN    Changed the 2 calls to GETCOL.
        TBOUT    Changed the 1 call to GETCOL.
        PRTCC    Changed the 2 calls to GETCOL.
        TAFLG    Changed to read the row with TABIO and then know this
                 on the call to GETCOL.
        PROFL    Changed the 4 calls to GETCOL.
        TAPLT    Put LROW in common, init to 0, pass to GETCOL.
        PUTCOL   Changed call sequence adding current row number and
                 regarding ROWbuffer as an in/out argument.  Changed to
                 write with TABIO if IRNO not eq LRNO and LRNO > 0 which
                 dumps to disk on IRNO 0 at end and whenever row number
                 changes.  Improved read logic to TABIO to do when LRNO
                 and IRNO not equal, reading when not past the EOF and
                 zeroing when beyond the EOF.  (The zeroing should have
                 been done before but was not.)
        TBDATA   Put LROW (init 0) in 2 calls to GETCOL and one call to
                 PUTCOL. Add PUTCOL (row 0..) to force write to disk.
        TBIN     Added LROW to 1 GETCOL and 1 PUTCOL calls, dropped a
                 GETCOL designed to get the full data row and set LROW 0
                 on flagging, and add a PUTCOL to flush the buffers at
                 the end.
        Moved nowhere

 9004.  February 24, 1996     $INCGNU/TABS.H  ZGRLTC.C     Jeff
        Replaced calls to (SVID/BSD) function strdup(3) in ZGRLTC.C with
        calls to the home-brew zgrltc_dup().  Changed TAB-completion
        list to be totally dynamic, with no arbitrary max. size, and
        thus obviously allocated on the fly.
        Removed MAXCOMPLISTSIZE from TABS.H; it's no longer needed since
        the completion list is dynamically-sized.
        Moved nowhere.

 9005.  February 26, 1996         POSSM                      Eric
        This thing was looking at data buffers from 1,NUMIF even though
        the adverbs set BIF = EIF = 6 and NUMIF becomes 7 thanks to the
        cal package.  I don't know how it worked before - the new
        addressing schemes were blown away by this.
        Moved nowhere.

 9006.  February 27, 1996          Misc AIPSUB               Eric
        Moved large buffers in CATLST, AU5E, TBDATA into COMMON
        /AIPSCR/.  They overlap that way.
        Moved nowhere.

 9007.  February 27-28, 1996         FITLD               Eric
        Created some COMMONs to be shared for local table IO buffers and
        control blocks and the like.  Changed calls to TABINI, UCMPRS,
        MAKTAB and made all table control blocks (512).  Re-instated BA
        files with a new call seq for BATAB and DBAV.INC having no
        record in common and the data buffers in the call in normal
        order (pol, chan, if) to go directly to BP tables.
        Found lots of unused or under-used buffers.
        Added ATCA UU, VV, WW strings in FITLD and UVLOD.
        Moved nowhere.

 9008.  February 29, 1996            FILLM               Gustaaf
        FILLM allows for a certain difference in velocity before it
        assigns different FQID's. For some extreme cases (sources at
        opposite ends of the sky) the old limit was not sufficient.
        Increased the limit, and put it into a DATA statement for
        easier modification in the future.
        Moved nowhere.

 9009.  March 2, 1996                F2TEXT               Pat
        This utility never split pages correctly when the number of
        lines per page was specified on the command line (e.g. F2TEXT
        -61).  The qualifier was read via "sscanf", including the dash
        which was interpreted as a sign, then the program rounded the
        -61 up to the minimum of 10.  This resulted in much wasted
        paper.  Fixed by negating the read quantity.
        Moved to the AOC this date.

 9010.  March 4, 1996                PRTTP                Pat
        Corrected a minor formatting error that was multiplying the
        reference pixel number by 10.
        Moved nowhere.

 9011.  March 7, 1996     UPDCONTROL, AIPSUPD, WHOUSES    Pat
        Fixed (finally, I hope!) the code that detects if TPMON has been
        relinked, and issues a warning message (and remakes the hard
        links TPMON1, etc).  Also cleaned up WHOUSES, and added a new
        qualifier.
        Moved nowhere.

 9012.  March 8, 1996      START_AIPS in SYSUNIX          Chris
        Added code to add $AIPS_ROOT/bitmaps and $AIPS_ROOT/app-defaults
        to X11 search paths in preparation for the public release of
        SLIME.
        Moved nowhere.

 9013.  March 13, 1996          TABSRT                     Eric
        I considered changing TABSRT to use dynamic memory, but in the
        end decided it was not needed.  In so doing, of course, I found
        things that did need changing:
        APCAL   Changed to make BUFF3 only 512, which is what is needed
                most places and made a separate buffer for TABSRT.
        ANCAL   Corrected the buffer size provided in 1 of the 3 calls,
                the other two were okay.
        AVSPC   Changed to use a larger sort buffer.
        BPASS   Changed to use one of the work buffers, saving an
                otherwise unused 50000-word buffer.  Changed call to
                CLSORT and FRQUPD.
        CALIB   Correct buffer size to TABSRT call, it is 2* UVBFSL not
                8192.  Also changed it to use a local rather than common
                variable; it was messing up the cal I/O.
        CPASS   Changed call to CLSORT.
        CLSORT  Changed to take the sort buffer and size as call
                arguments.
        CVEL    Was filled with things of random size (usually 8192) and
                position wrt PBUFF; changed all to UVBFSS.  Changed call
                to FRQUPD.
        FRQUPD  Changed call seq to include a sort buffer with size.
        MFPRT   Changed to make a bigger sort buffer.
        TAMRG   Changed to make a bigger sort buffer.
        TASRT   Changed to make a bigger sort buffer.
        Moved nowhere.

 9014.  March 13, 1996           FRING                   Eric
        FRING was beautifully set up to use dynamic memory.  Subroutine
        FRNSOL declares almost all of the larg arrays and then passes
        them down to FRNFIT.  I moved the only 2 large arrays in FRNFIT
        up to FRNSOL as well.  I changed the definitions of all to 2 and
        set up dynamic memory allocation of all to match the sizes
        expected by FRNFIT.  This means we do not waste memory in some
        ways (the data arrays had MAXANT * MAXIF and now have the actual
        number of antennas and IFs, the WTT and TIME arrays have MAXTIM
        rather than XASIZE/2 which was usually much larger, etc) and
        thus have more to use to allow longer SOLINTs.  Changed the
        computation of MAXTIM from one controlled by the array size to
        one set solely by SOLINT / TINTG.  There should be no memory
        limits in this task henceforth, other than those imposed by the
        computer and its current load.
        Corrected:
        (1) One array was not zeroed that should have been zeroed on
        each solution.  This will have added noise to solutions.
        (2) The FFTs were limited to 2048 for no currently valid reason.
        This stopped solutions asserting that the AP was too small.
        (3) If APARM(8) was > 0, the antenna files were ignored.
        Changed it to use APARM(8) only when there is an error reading
        the antenna files.
        (4) Changed the default SOLINT from 2.4 hours to 10 minutes for
        multi-source data.  SOLINT really should be set.
        (5) Cleaned up the help file a little.
        Moved nowhere.

 9015.  March 19, 1996       UPDCONFIG                  Pat
        At his request, removed Eric's name from the list of people who
        get the midnight job reports for SunOS 5, AIX, OSF1, and Linux
        midnight jobs.  This is not a good day for Classic AIPS.
        Added Athol's name to the OSF1 and Linux jobs, as these
        architectures catch many problems the Sun/IBM compilers miss.
        Moved nowhere.

 9016.  March 22, 1996       $APLNOT/DGINIT.FOR         Athol
        Fix bug introduced in #8983. Validity check for conversion to
        Stokes Q was in error. Would try to form Q even if cross-pol.
        data were missing.
        Moved nowhere.

 9017.  March 22, 1996       $APGNOT/SPLIT.FOR          Athol
        See #8983. Test on new buffer size did not include the
        size of the Stokes axis, as required by the new convention
        for MAXCIF.
        Moved nowhere.

 9018.  March 22, 1996       $APGNOT/SPCAL.FOR          Athol
        Re-instate DOSMTH = F (#8981/2). This task has no SMOOTH
        adverb.
        Moved nowhere.

 9019.  March 23, 1996       $APLNOT/GAININ.FOR         Athol
        Indexing of lambda squared array LAMSQ (now dimensioned
        MAXCIF) was incorrect - did not run over freq. channel
        (new indexing introduced in #8984 above).
        Moved nowhere.

 9020.  March 26, 1996         BLING                    Chris
        Changed SETUV to defer setting the source selection criteria
        until after the test for the SOURCE random parameter since
        the OOP system will excise that random parameter if CALSOU
        has only one entry.
        Corrected a label in a GO TO statement in SETWIN to avoid
        infinite loops with some input files and fixed an error-
        handling block.

 9021.  March 27, 1996       $APGNOT/TABED.FOR          Athol
        TABED was broken by #8986; the reduction in size of a table
        I/O buffer was not consistently propagated throughout the
        code.
        Moved nowhere.

 9022.  March 27, 1996        ZSCHAR in APLGEN          Chris
        Added a new Z routine, ZSCHAR, to get various special
        characters (such as non-printing characters and the
        backslash character, the latter of which is treated
        badly by some Unix FORTRAN compilers) without making
        explicit references to their collation sequence numbers.
        System-specific versions will have to be written for any
        machines that don't use ASCII encoding or a closely related
        encoding.
        Changed KEYIN and CITSKP to use ZSCHAR to look-up the tab
        character: KEYIN assumed that tab was CHAR(9) while CITSKP
        used a space character in a check for tabs in the input
        (this caused KEYIN to enter an infinite loop if it
        encountered a tab in mode 3 or 4).
        Moved nowhere.

***********************************************************************

              Changes to 31DEC99 called CVX

***********************************************************************

          All of 15OCT96 copied on 29 March (or so).
            * in column 1 => changes in CVX only.

***********************************************************************

 9023.  March 29, 1996       $APLNOT/IMINI.FOR         Athol
        NKEY was not set before TABINI call (typo. in #8986).
        Moved CVX by Eric 4/15/96..

 9024.  April 1, 1996        $APGNOT/MK3IN             Leonia
        Having had LO offset in the data MK3IN terminated the job.
        At the same time a small LO offset does not affect the result.
        The new parameter APARM(8) gives an opportunity to user to
        accept data with LO offset (APARM(8) >0) or terminate the job
        (APARM(8) = 0).
        Moved CVX by Eric 4/15/96..

*9025.  April 4, 1996               CVX version          Eric
*       Add CVX to lists:
*       ACOUNT   version list, number tests
*       BATQ     version list, setting VERNAM
*       VERMAT   version list, list size in loop
*       AU2      version list, tests on VERTYP from VERMAT
*       AU2A     version lists
*       AUA      version list, tests on VERTYP from VERMAT
*       AUB      version list, number range tests
*       AIPSC    version list, tests on VERTYP from VERMAT
*       POPSGN   version set
*       BATER    version list, number range tests
*       GETRLS   changed to 15OCT99
*       ZACTV8   $APLUNIX: add CVX to special versions
*       ZDIR     $APLUNIX: add CVX to special versions
*       ZMYVER   $APLGEN: add CVX translation to tests
*       ZTXMAT   $APLGEN: add CVX to special versions
*       ZVERSN   $APLGEN: add CVX translation to set MSGVER
*       PRTAC    raise all dimensions for *4* to *5* and allow CVX
*       ZGMAI2   Made Pat and me the mail recipients
*       Moved nowhere.

 9026.  April 8, 1996       ZABOR2 in APLSOL          Chris
        Gave Solaris 2.x its own version of ZABOR2 which enables
        floating-point traps for invalid operands, overflow and
        divide-by-zero.  AIPS had been running in the default
        IEEE-754 mode under Solaris 2 which does not interrupt
        computations on floating-point exceptions.  Consequently
        a number of problems constructs were not being spotted
        on SPARCs (eg. the next entry): in most cases the IEEE rules
        guarantee that the correct answers are obtained but we still
        support machines that don't conform to IEEE-754 (eg. Convex)
        and don't force the default IEEE-754 environment on machines
        that support it.
        Moved CVX by Eric 4/15/96..

 9027.  April 8, 1996          BLAPP                 Chris
        Added missing tests for bad BLING solutions in the input
        BS table.  Without these tests divide-by-zero errors were
        almost guaranteed since the acceleration error is set to zero
        when acceleration is not solved for.  This was not spotted
        under Solaris since divide-by-zero exceptions were not trapped
        and IEEE-754 guaranteed correct operation in the absence of
        traps.
        Moved CVX by Eric 4/15/96..

 9028.  April 12, 1996          VPLOT              Leonia
        The task has not worked with different subarrays. Subarray=1
        was forced in many places of the task codes. For example, if
        SUBARRAY = 0 the task plotted data of the first subarray.
        Now the task plots data of the specified subarray. If
        SUBARRAY = 0 the task plots data of all subarrays. Relevant
        change of HELP file has been provided.
        Moved CVX by Eric 4/15/96..

 9029.  April 15, 1996               $APGNOT/FITLD            Phil
        Added IF selection to FITLD. It has some restrictions. Since the
        data selection is performed as the bits are read from tape prior
        to frequency ordering the user has to know the frequency order
        of the data on tape. They usually do. FITLD will print a warning
        about this limitation when IF selection is requested.
        Moved CVX 28 April by Eric - to work on for TABBP.

 9030.  April 15, 1996               $APLSOL/ZTPOP2        Pat/Martin S.
        Thanks to Martin Shepherd at Caltech, found the problem that was
        preventing SunOS 5.5 systems from using magtapes (of any kind:
        exabyte, dat, or 9-track).  If the tape unit is opened with the
        non-blocking I/O bit set, the SCSI driver refuses to write EOF
        marks.  Everything *seems* to work if the open() statements are
        done without the O_NONBLOCK attribute (though DATs under 5.4
        have not been tested; exabytes seem fine with this fix under 5.4
        or 5.5, as do DAT's and 9-tracks under 5.5).
        NOTE: there is another open() that uses the O_NONBLOCK bit for
        tapes; perhaps in ZMOUN2.  I really should find out why this was
        being used, and if it is still relevant.
        Moved CVX by Eric on 28 April.

 9031.  April 15, 1996  $APGNOT/SNCOR.FOR  $HLPFIL/SNCOR.HLP  Athol
        Add new features to SNCOR: i) OPCODE='PCOP' allows solutions
        to be copied from one polarization to another with the copy
        direction controlled by SNCORPRM(1); ii) OPCODE='PNEG' will
        flip the sign of the gain phase for all selected solutions.
        Both features sometimes required in line polarization
        calibration. Also allow SNCOR to work on single source
        files.
        Moved CVX 28 April by Eric.

 9032.  April 16, 1996 $APGNOT/PCCOR.FOR  $HLPFIL/PCCOR.HLP  Leonia
        The task provided wrong records in history file. It has been
        fixed. The concept of multi subarrays has been added. Now
        SUBARRAY = 0 means all subarrays. The relevant change in
        PCCOR.HLP is added.
        Moved CVX 28 April by Eric.

 9033.  April 16, 1996     $APGNOT/ACCOR.FOR                 Leonia
        The task provided wrong records in history file. It has been
        fixed.
        Moved CVX 28 April by Eric.

 9034.  April 16, 1996    $APGNOT/USUBA.FOR & $HLPFIL/USUBA.HLP  Athol
        First release of a major re-write of USUBA, primarily to
        accomodate the new subarray features allowed by the VLBA
        correlator. The task now works in three possible modes: i)
        automatic subarray identification; in this case an algorithm is
        used which minimizes the total number of subarrays and maximizes
        subarray continuity; ii) multiple subarray definition in an
        external text file; and iii) selection of an individual subarray
        through the input adverbs.
        Moved CVX 28 April by Eric.

 9035.  April 19, 1996    $HLPFIL/UVSIM.HLP                 Gustaaf
        Added information about coordinate system used for antenna
        positions.
        Moved CVX 28 April by Eric.

 9036.  April 23, 1996    $APLSUB/TABIO.FOR                 Athol
        New TABIO of #8986 did not read long table records correctly
        if the table was opened R/W and immmediate I/O was triggered.
        Would overwrite parts of the table depending on the record
        no. used in the TABIO read call. Fixed to check opcode before
        writing. Caused a fatal BPASS error previously.
        Moved CVX 28 April by Eric.

 9037.  April 23, 1996    $QPGNOT/BPASS.FOR                 Athol
        Fixed several BPASS errors: i) subroutine BPADJ failed with
        a ZMIO error if the BP table record length was too small. The
        increased TABSRT buffer size (#8992) led to ZMIO calls from
        UVINIT exceeding the 128k limit. Fixed this by scaling down
        the BPADJ buffer (will change in UVINIT later as a more general
        solution). ii) fatal format error in BPHIS introduced in
        changing the SMOOTH history record (#8982). iii) also fixed
        a BPADJ error pre-dating the table upgrade; ANTKOL was not
        set correctly for Stokes L and LCP bandpasses were not
        re-referenced.
        Moved CVX 28 April by Eric.

 9038.  April 25, 1996     $SYSUNIX/STARTPMON               Pat
        This script was hiding a Berkeley-specific instance of "whoami"
        where it tried to figure out who was running the TPMON before it
        tried killing the process (unless you're root you can't in
        general kill a process being run from another account).  I have
        no idea how this managed to survive given the prevalence of
        SunOS 5 systems we now have at NRAO, but... replaced it with the
        value of the LOGNAME environment variable.  Also expanded some
        of the error messages and tried to clarify others.
        Will move to patch area today.  Sent to Jeff Mangum/Tucson also.

 9039.  April 26, 1996     $QPGNOT/FRING.FOR                Athol
        FRING has been failing since (#9014) for reasonable SOLINT
        values due to an error in setting MAXTIM. This can be larger
        than SOLINT / (integration_time) if there is an NX table,
        as FRING will try to divide up an index scan in some reasonable
        manner. Corrected the MAXTIM calculation accordingly.
        Added a check on the WORK buffer size in FRNSR2; dynamic memory
        no longer automatically contrains this as in the fixed array
        case. Corrected typo. in setting IS1 in FRNSRC.
        Moved CVX 28 April by Eric.

 9040.  April 26, 1996     $APGNOT/AFILE.FOR               Athol
        Increase line count limit in AFILE to 20,000.
        Moved CVX 28 April by Eric.

** AOC copy complete to 28 April save FITLD and UNCAL which were moved
** to my work area for TABBP work

*9041.  April 29, 1996          Bandpass application code       Eric
*       Changed:
*       PUVD.INC   Change BP record size, adding 2*MAXIF for weights
*                  Then, studying BPINI, I realized that the shift
*                  column is really MAXIF double precisions which
*                  appeared in no counts of record size before my
*                  "ill-fated" code fix.  The correct size is
*                  10+4*MAXCIF+4*MAXIF.
*       DSEL.INC   Moved bandpass parameters to DBPC.INC.
*       DBPC.INC   New - BP parts from DSEL.INC, with BPGOT, ANTPNT
*                  changed to (2,3), ANTNX to (3,MAXANT), PBUFF and
*                  VLBUFF dropped entirely for 3 dynamic buffers (BPBUF,
*                  VLBUF, BPIBUF)
*       IOBSRC     Dropped DSEL in favor of DBPC.  Changed to handle up
*                  to 3 occurences of each antenna.
*       SELINI     Added DBPC.INC, dropped BPNAME., zero pointers.
*       UVGET      Added DBPC.INC, fixed handling of MSGSUP, changed
*                  test on BPNAME to one on PBPBUF, add code to free
*                  dynamic memory and close the BP file.
*       SCINTP     Deleted.
*       SCLOAD     Deleted.
*       DATBND     Rearranged to make polarization the inner loop, then
*                  freq and finally IF.  Dropped 200 kbytes of excess
*                  bandpass corr buffer.  Added DBPC.INC.  Left the rest
*                  more or less alone - it would be nice to move the
*                  conversion of polynomials to be done less often when
*                  possible
*       BPINI      Changed to create weight 1 and 2 columns and to
*                  handle tables in which they and the FQID are missing.
*       TABBP      Changed call seq to return BNDPAS(chn,if,pol) as a
*                  complex array and weight(if,pol).
*       BPASET     Changed call seq to TABBP; this allows VBUFF to be
*                  given directly to TABBP without more copying.
*                  Corrected error in antenna number checking.  The
*                  omission of antennas will fail in previous code.
*                  Added DBPC.INC.  Changed to create BPBUF, VLBUF, and
*                  BPIBUF (for nearest neighbor or interpolation) from
*                  memory allocation to be as big as needed.  Dropped
*                  creation of SC files, moving averaging for DOBAND = 1
*                  into BPBUF (which replaces PBUFF) and doing no I/O.
*                  Changed to build BPIBUF (and initial BPBUF and VLBUF)
*                  for DOBAND > 1 and to build index entries for BPGET.
*       BPGET      Replaced DSEL.INC with DBPC.INC.  Changed to fill
*                  BPIBUF from the BP table when time advances enough
*                  to need new entries and to fill or interpolate to
*                  BPBUF (and VLBUF) for DOBAND > 1.  Changed to return
*                  pointers to data (already set) in DOBAND = 1.
*       BPREFM     Changed dimensions/names of weight and bandpass args
*                  to TABBP.
*       BPFSEL     Changed call seq to TABBP and changed loops to put
*                  polarization as the outer loop which matches the new
*                  BNDPAS structure and which should be safer than
*                  before.
*       TABLEUTIL  Changed call seq OTABBP and pass through to TABBP.
*       BATAB      Changed call sequence and data sequence to match that
*                  of TABBP.  Changed data shuffling.  BA table may not
*                  have weight columns?
*       POSSM      Changed call seq to TABBP, addressing of arrays.
*                  Use weights when averaging bandpass (as done by
*                  BPASET).  Changed to avoid error messages when it is
*                  looping and one iteration has no data.
*       BPCOR      Changed to use new TABBP call seq and data ordering,
*                  changed addressing as a result.
*       UNCAL      Changed to new TABBP call sequence, changed AT BP
*                  routines to be more like new BPINI, TABBP.  Corrected
*                  error from my last overhaul in TABBU (loop 90).
*       FITLD      Changed to use new call seq of BATAB and BPINI.
*                  Corrected failure to init the number of IFs in
*                  calling TABBP.  (Did this in Phil's new IF selection
*                  version.)
*       CVEL       Changed to use new versions of all the bandpass
*                  subroutines.  Found errors affecting antenna
*                  selection.
*       CPASS      Changed call to TABBP and pointer computation.  Added
*                  dummy WEIGHT setting for now.
*       Moved nowhere.

*9042.  April 30, 1996          SNPLT                        Eric
*       Added FACTOR adverb to control plot symbol sizes.
*       Corrected code so that error bars can be plotted; previously it
*       reste DY after computing the error bar!
*       Moved nowhere.

*9043.  April 30, 1996        Clean up this BP stuff          Eric
*       Changed
*       BPASS    to have more columns and to set some weights and to
*                have DBPC.INC a bunch of places
*       BLCAL    to use UVBFSL not XBPBUF to dimension a buffer
*       HORUS    removed reference to BPNAME(1)
*       SPCAL    removed reference to BPNAME(1)
*       CPASS    add DBPC.INC one place
*       CVEL     *** remains to do
*       Moved nowhere.

*9044.  May 3, 1996            BPASS                          Eric
*       Work on the handling of weights: changed it to compute correct
*       weights for the result of dividing by channel 0.  Changed it to
*       use dynamic memory to sum the weights for each baseline by IF
*       and polarization and to use these weights in finding the
*       solution.  Corrected it to accept CHANSEL(2,*) = CHANSEL(1,*) as
*       a use of CHANSEL.  Clarified things a bit in the help file.
*       Moved nowhere.

*9045.  May 3, 1996               PRTAB                     Eric
*       Added options to select which columns are printed and to print
*       only elements 1-n1 and n2-n3 from arrays.
*       Moved nowhere.

*9046.  May 5, 1996            Increase # fields            Eric
*       Changed:
*       AU2A     Changed SG version # to 15 due to increased size of
*                adverbs.
*       SGLOCA   Changed SG version # to 15 due to increased size of
*                adverbs.
*       POPSDAT  Changed FLDSIZE, RASHIFT, DECSHIFT, BCOMP, NCOMP from
*                16 to 64
*       PUVD.INC Changed MAXFLD from 16 to 64
*       PCLN.INC Changed MXNBOX from 500 to 256 - max # Clean boxes in
*                use.
*       ASCAL    Correct # parameters to use MAXFLD (the declaration
*                already did).
*       AU5C     Changed FILEBOX verb to use MAXFLD.
*       MX       Changed an equivalence that claimed to limit things to
*                16 fields, although the real limit was about 49.5.
*       QCLEAN   Changed an equivalence to allow up to 64 fileds, left
*                test in on MAXFLD to check on this.
*       WFCLN    Changed messages on window NBOXes read to loop up to
*                NFIELD rather than do a hard coded 16.
*       IMAGR    Changed to use BOXFILE for both field parameters and
*                Clean boxes.  It reads the file twice.
*       Changed the following help files to limit things to 64 rather
*       than 16 in the inputs and to say 64 as well:
*       ASCAL   BLCAL   BPASS    CALIB   CPASS   FRING    PCAL   UVADC
*       UVSUB   VSCAL   NFIELD   FLDSIZE RASHIFT DECSHIFT BCOMP  NCOMP
*       FILEBOX WFCLN   MAPIT_MX MX      COMAP_MX
*       Help files changed for IMAGR change:
*       FILEBOX   BOXFILE  IMAGR
*       Unfortunately, all 64 CC files must be open at once:
*       DDCH.INC   Raised FTAB and DEVTAB dimensions, the latter from 50
*                  -> 120.
*       ZDCHIN     Changed to zero all 120 DEVTABs and to allow up to 80
*                  type 2 files to be open.  Added call to ZULIM.
*       ZULIM      New to reset system limits on the number of open
*                  files.  $APLGEN is a stub.
*       ZOPEN      Changed test on LUN from an upper limit of 50 to one
*                  of 120.
*       QCLEAN     Compute LUNC = field+50
*       MX         Compute LUNC = field+50
*       Moved nowhere.

 9047.  April 29, 1996     $YPGNOT/ELINT.FOR                Leonia
        The wide used task CLCAL provides the interpolation of antennas
        gain measured on calibrators to the target sources. CLCAL
        interpolates at time axis. If the time difference of observation
        of the target source and the calibrator is large and if there is
        an obvious dependence the antennas gain on elevation, the
        interpolation provided by CLCAL does not give the correct
        result. The task ELINT interpolates at elevation axis and can be
        useful if the calibrator (or calibrators) is observed at a wide
        range of elevations. The task fits a given type of fitting
        function to the data. The fitting is provided separately for
        each selected antenna, IF, stoke. The result of fitting is
        displayed on TV or recorded in a plot file. In the case of
        several calibrators, the task fits data to both the fitting
        elevation function and factors determining corrected fluxes of
        the calibrators. The found correction of the antennas gain via
        elevation is recordered in an output SN table for all selected
        target sources.
        Moved CVX 6 May by Eric.

 9048.  May 1, 1996        $SYSPERL/check_version.pl       Jeff
        Added Perl verison 5.002 to the "OK" list; it's running fine
        with that version at NRAO-TUC.  Removed some stray tabs that had
        crept into this file, probably due to the recent meteor showers.
        Moved CVX 6 May by Eric.

 9049.  May 6, 1996        $SYSUNIX/DADEVS.PL               Pat
        If a DADEVS.LIST or .dadevs file contained blank or comment
        lines following a valid (included) entry, the previous disk was
        included multiple times, once additionally for each
        blank/comment line.  Some variables needed to be reset when a
        blank or comment line is encountered; this is now done.
        Moved CVX 7 May by Eric

 9050.  May 6, 1996        $SYSSOL/LIBR.DAT, .SHARED        Pat
        At the suggestion of a colleague, revised this to have the
        correct order of libraries for certain areas.  Also added GNU
        copyleft and a dire warning about use of the LIBR.DAT.SHARED
        version.
        Moved CVX 7 May by Eric

 9051.  May 7, 1996          COMRPL in SYSUNIX              Chris
        Changed the evaluation of EV to filter out the string `ENV'.
        There appears to be a subtle bug in some Linux systems that
        causes a superfluous `ENV' to appear when COMRPL is called
        from INSTEP2: if it is not filtered out INSTEP2 fails.  This
        has been observed on both Red Hat and Caldera installations.
        Moved CVX 7 May by Eric - this change only

** AOC copy complete to 7 May 2:30 p.m.

*9052.  May 6, 1996           TS and TD files                 Eric
*       The new number of fields made IMAGR have 782 words of inputs!
*       This blows the 768 limit in the TS and TD files.  Changed the
*       names of the TS and TD files to TSD004pops (batch), TSDuser004
*       (interactive), and TDD000004.  Changed the TD file to carry the
*       number of blocks/task as word 256 and the TS files to carry it
*       as word 5.  Changed AU2, AU2A, AUA, AIPSB, AIPSC, BATER, GTPARM,
*       FILINI, FILAIP, FILAI2.
*       Moved nowhere.

*9053.  May 7, 1996           More on lun range               Eric
*       Changed LUN tests in $APLGEN ZFIO, ZMIO, ZCLOSE, LSERCH from 50
*       to 120.
*       Moved nowhere.

 9054.  May 8, 1996          $SYSUNIX/MAKEAT                Pat
        The "logic" in this script was failing if a colon was anywhere
        in a comment.  Forced it to ignore any lines beginning with "#"
        when it figures out the load numbers (zero anymore).
        Moved to CVX by Eric 8 May.

*9055.  May 9, 1996           More of TD file                Eric
*       Forgot to change TD file name in $APLSUB/RELPOP abd
*       $AIPSUB/TASKWT.  This will force another INSTEP4 (sigh).
*       Moved nowhere.

*9056.  May 9 & 13, 1996             QCLEAN, MX                   Eric
*       Changed dimension of TV choics list and changed it to rearrange
*       the columns if there a large number of fields.  It will do 3
*       columns if NFIELD > 32.
*       Corrected QCLEAN and MX to put the beam after all filed
*       parameters - they had a hard-coded location of 258 in many cases
*       which is too small.
*       Moved nowhere.

*9057.  May 14, 1996               POSSM                       Eric
*       If the first scan in the data matching the source name and time
*       range did not match in either subarray for freqid, the task
*       would go into an infinite (seemingly) loop.  Changed it to limit
*       the list to scans matching the subarray and the fqid.  There was
*       a patch to avoid the subarray one, but that only worked after
*       the first scan.
*       Moved nowhere.

*9058.  May 14, 1996               CVEL                        Eric
*       Changed all the BP routines to match those in more general use.
*       This includes dynamic memory, DOBAND 2 and 3, direct use of
*       TABBP with no SC files, etc.  Corrected it to copy only those
*       data with the selected FQID.  Previously, it was copying all
*       data but copying only the FQID entry in the FQ table, deleting
*       the BP table, ... (probably applying FQID 2 bandpass to FQID 1
*       data ??).  Dropped an excess TABIO ('CLOS').
*       Moved nowhere.

*9059.  May 14, 1996                  COMLNK                      Eric
*       Changed it to do the .UPD files on SOLaris systems and to purge
*       the $PREP/$FILE.(f,c,) files on PURGE.  This should save 40
*       Mbytes / architecture eventually.
*       Moved nowhere, but I told Pat about it.

*9060.  May 16, 1996                 NEWPOS                       Bill
*       NEWPOS refused to deal with positions more than a radian from
*       the reference point in Global Sinusiodal projections.
*       Moved from NVSSAIPS this date.

*9061.  May 16, 1996                BPSMO                        Eric
*       New task to make regularly gridded BP tables using various
*       smoothing functions.  So far does two-point and simple linera,
*       Gaussian, boxcar, and sin(x)/x interpolation functions only.
*       Moved nowhere.

*9062.  May 17, 1996           SPFLG, TVFLG                  Eric
*       Changed the buffer size from 16384 to UVFBSS since some of the
*       buffers are used to read uv data as well as images.  The BIGBOY
*       buffer is increased by only a little by this.
*       Moved nowhere.

*9063.  May 17, 1996           BPASS                         Eric
*       Changed the program and help file to encourage the use of DOCAL
*       TRUE.  The data weights now depend on the amplitude and it is
*       best to have them on the same scale.
*       Moved nowhere.

 9064.  May 15, 1996         $SYSUNIX/COMLNK                Pat/Eric
        Made the PURGE option work correctly (copying a scheme now
        implemented elsewhere).  Also tried to get the transaction
        logging for the midnight job files to be *.FOR or *.C instead of
        *.o...
        Moved Pat's transaction file stuff into CVX COMLNK 5/21/96.

 9065.  May 15, 1996         $SYSUNIX/XASERVERS             Jeff
        Linux's 'ps' command no longer honors the "g" option (it
        dies--screaming--when it sees it) as of procps distribution
        version 0.99; this option is now considered superfluous.
        Version 0.99 (recently released; I'm in the development group,
        though for a different portion of procps) is not yet bundled
        with any mainstream Linux distributions (that I know of), but we
        don't need to use it here anyway.
        Moved CVX 5/21/96 by Eric.

 9066.  May 17, 1996        $APLLINUX/ZTAP2.C               Jeff
        Updated ZTAP2 to work under newer Linux kernels.  (Only tested
        so far under 1.99.2, a 2.0 pre-release snapshot, and *only* on a
        DAT.)  There were problems with BAKF at BOT and with AEOI.  The
        BAKF problem at BOT appears to be fixed.  The AEOI problem is
        fixed, functionally, though some research into why the "brute
        force" fallback method was failing is called for.  There will be
        another update to this, hopefully soon, and it will be released
        as a patch to 15JAN96 once Exabyte behavior is determined.  Many
        thanks to the stealth AIPS hacker for his pointers on tapes....
        Moved to AOC AIPS as well.

 9067.  May 17, 1996        TABLE.FOR in APLOOP           Chris
        Fixed TABEXI to release its temporary LUN.
        Moved CVX 5/21/96 by Eric.

 9068.  May 19, 1996        $APLSUB/GAUSPS.FOR             Leonia
        There were complains that the tasks JMFIT and IMFIT fitting
        gaussian components to an image, fit succesfully the gaussians
        at pixel domain but fail at the stage of converting the gausians
        in the pixels to gausian on the sky. This failure takes a place
        only at TST version of AIPS. The problem appears at the case of
        small size of the gaussian VLBI data) and it does not exist at
        the case of bigger size of the gaussian (VLA data). The new
        written subroutine GAUSPS is used in TST version of AIPS for
        converting the gaussian in the pixel to gausian on the sky.
        GAUSPS calculates the angle size of major/minor axis of the
        ellipse as an ACOS of the COS of this angle. COS of this angle
        is calculated as a scalar product of relevant unit vectors. In
        the case of the small angle, cosine is very close to one. The
        deviation is in order of square of the angle. For VLBI data the
        angle can be as small as 10-4 arcsec ~ 10-9 radians. So the
        deviation of the cosine from unit is as small as 10-18. Such a
        small deviation is not seen  even by double precision
        representation of the number. As a result GAUSPS returns zero
        for major and minor axis of the ellipse on the sky. I have
        modified GAUSPS forcing it to calculate the small angles using
        special formulas which are valid only for small angles.
        Moved CVX 5/21/96 by Eric.

 9069.  May 20, 1996    $YPGNOT/ELINT    Leonia/Brian Butler/Rick Perley
        The main type of fitting function in ELINT was a polynom of the
        third degree in elevation axis. Brian Butler and Rick Perley
        added the polynom in zenith as a fitting function. Different
        levels of print were added also. The help file has been
        completely rewritten.
        Moved CVX 5/21/96 by Eric.

 9070.  May 21, 1996         $AIPPGM/SETSP.FOR               Pat
        There was a rather subtle bug in the parsing of the HOSTS.LIST
        file that only reared its ugly head if the hostname had the
        architecture name embedded in it, e.g. a Solaris machine called
        SOL123 would trigger it.  Such machines were ignored by SETPAR
        whether or not they belonged in the current SITE.  Fixed now;
        thanks to Andrzej Marecki (Torun, Poland) for reporting this
        one.  Also improved its input technique marginally; one can now
        enter -1 for *any* parameter in "CHANGE" mode (where you're
        changing every single host with a potentially different value
        each time) and it will then leave the value(s) for that host
        unchanged.  This will be a real boon to aips managers at
        registration time.
*       In addition, the registration *should* support arbitrary dates
*       in the version field, i.e. 01-31 and JAN-DEC.  This feature has
*       not been tested (it's in both CVX and AOC versions, just not
*       documented in the latter).
        Moved from AOC AIPS today.

*9071.  May 22, 1996            ZGMAI2                 Eric
*       Discovered an obsolete version of ZGMAI2.C in $APLDEC.  It has
*       the wrong call sequence.  Removed it and rebuilt the regular.
*       Moved nowhere.

*9072.  May 23, 1996           GTBWRT                 Eric
*       GTBWRT assumed that a buffer was (16384,*).  Change call seq to
*       pass this first dimension through since it is now UVBFSS in
*       TVFLG and SPFLG.
*       Changed GTBWRT, GRIDTB, SPFLG.
*       Moved nowhere.

 9073.  May 23, 1996         misc                        Eric
        Moved from AOC AIPS (they had no CHANGE.DOC entries for these)
        STRAN   - one liner improved to help apropos
        UVFIX   - some variables correctly defined - effect ??
        STARTPMON - correct a bad ps call (had a g in it)
        UPDLSTDAT.c - Martin Sphepard's long line fix
        Moved from AOC AIPS this date.

*9074.  May 26, 1996              TIMDAT                   Eric
*       Changed declaration of character strings from *8 and *12 to
*       *(*).  This is needed to keep it from filling out too far if the
*       string is not that long (and only 9 are needed for date
*       sometimes) and to let it fill out more blanks when appropriate.
*       Moved nowhere.

*9075.  May 26, 1996              EDITA                   Eric
*       New task to do interactive editing on Tsys table data or SN/CL
*       table data to prepare flag commands for a UV data set.
*       Changed:
*       FCINI       Create/open Flag Command tables used in EDITA and
*                   other edit class tasks.
*       TABFC       Read/write FC tables
*       TABLEUTIL   Added OOP access to FCINI and TABFC
*       QEDIUTIL    Added TY subclass, modified the SN subclass to allow
*                   for UV editing, created the methods on FC tables
*                   needed to create a table, add a record, remove a
*                   record, and apply FC to an FG.
*       EDITA       New task to implement UV edit with TY and SN tables
*       EDITA.HLP   Help file for it
*       HLPEDITY    New: Real-time help file for TY subclass.
*       HLPEDISN    Real-time help file for SN subclass upgraded to
*                   include uv editing.
*       SNEDT       Added SUBARRAY adverb, set UVFLAG false
*       SNEDT.HLP   Added SUBARRAY adverb.
*       Moved nowhere.

 9076.  May 24, 1995          $APGNOT/STRAN.FOR               Pat
        The value of the INPRMS variable sent to GTPARM was too large
        (50, should have been 40), with the usual catastrophic effects
        on SunOS 5 systems (the next common got overwritten, etc).
        Moved to CVX by Eric on 26 May.

*9077.  May 29, 1996             APIO                         Eric
*       This old chestnut tested the FTAB index, demanding that it be <
*       2048.  That is now very wrong - 3200 is the current upper limit
*       and all map files but the first are above this limit.
*       Why did things mostly work?
*       Moved nowhere.

*9078.  May 30, 1996              FITTP                      Eric
*       Changed to forbid integer formats for uv data; they cause too
*       much grief.  It will still do integer for images even when doing
*       both kinds with doall true.
*       Moved nowhere.

*9079.  May 30, 1996            HISTORY                     Eric
*       Changed comments on OHWRIT and how it does the string handling.
*       If ENTRY starts with task name, ENTRY is used directly.  If it
*       starts otherwise, the task name is prepended.  Previous comments
*       about 72 characters being used were not right.
*       Moved nowhere.

*9080.  June 3, 1996              EDITR                     Eric
*       New task to do graphics editing of uv data with up to 10
*       baselines to 1 antenna visible and also a seconmdary uv data set
*       (e.g., residuals).  Added help file and HLPEDIUV to $HLPFIL,
*       added various subroutines (EDITUV, EDGTUV, EDIFUV) to QEDIUTIL,
*       and modified SNEDT and EDITA to avoid collisions.
*       Moved nowhere.

 9081.  May 28, 1996          $APLNOT/ORBIT.FOR              Leonia
        ORBIT.FOR is a new subroutine calculaing cartesian coordinates
        of an orbital antenna. The subroutine does not take into account
        an influence of the Moon and other planets but does take into
        account the elliptical shape of the Earth. Accuracy is better
        than 10 cm.
        Moved to CVX by Eric on 3 June.

 9082.  May 29, 1996      $SYSUNIX/FDEFAULT.SH, OPTIMIZE.LIS   Pat
        Put in a workaround for the "GP Overflow" (General Purpose
        Register area overflow) encountered with some of the larger OOP
        modules under Silicon Graphics Irix 6.1 (at NCSA).  This
        involves hijacking OPT9 in the SGI-specific section of
        FDEFAULT.SH to add the "-xgot" qualifier to it; this is done
        only for Irix 6.x right now via a check of uname -r.  Then, in
        OPTIMIZE.LIS, the following routines are flagged with a "9" in
        the optimization column: QCLEAN and QUVUTIL (from $QOOP), and
        UVUTIL, ARRAY and UVDATA in $APLOOP.
        Moved to CVX by Eric on 3 June.

 9083.  May 30, 1996      $APLUNIX/ZTTOP2, ZTKOP2             Pat
        If you start AIPS in a directory containing an ordinary file or
        directory with the *same* name as your computer, the code that
        opens the tek or message servers was assuming said file or
        directory was a unix socket.  Modified both these calls to check
        and only attempt to open the file if it's a socket, fifo, or
        device (char or block).
        Moved to CVX by Eric on 3 June.

 9084.  May 30, 1996      $APGNOT/?TESS.FOR, $QYPGNOT/?TESS.FOR, Gustaaf
                          $INC/DTESS.INC, $APLNOT/APLPBI.FOR
        Martin Shephard pointed out that in change #8973 I had neglected
        to modify the calling sequence for APLPBI in MAKCVM.FOR, which
        affected both VTESS and UTESS. Changed back the calling sequence
        to what it used to be, and instead added the cutoff parameter to
        DTESS.INC.
        Moved to CVX by Eric on 3 June.

 9085.  June 3, 1996        $APLSUB/MADDEX.FOR                    Pat
        Modified the error handling code slightly.  The previous error
        message "EXTENSION FILE CATALOG SPACE FULL" was ambiguous as it
        could mean either the max number of extension file TYPES was
        reached (20 currently), or the max number of INSTANCES of
        extension files (46655 currently) was reached.  The former is
        now far more likely to occur.  There are now two separate error
        messages (with the actual limits shown).
        Moved to CVX by Eric on 3 June.

*9086.  June 4, 1996              SCMAP                    Eric
*       Added the edit class to SCMAP.  Changes:
*       QEDIUTIL  (1) To stop deleting classes created outside the edit
*                     utility; it was doing this on APPL and ABOR
*                     opcodes for all 3 sub-classes.
*                 (2) To turn off the graphics planes it turns on.
*                 (3) To give progress messages on uv data reads.
*                 (4) To try twices to find times that match for the 2nd
*                     data set.  Round off seems to be causing a
*                     problem.  The second try is 5% wider
*                 (5) To handle missing source files better..
*       SNEDT     To do its own class deletion
*       EDITR     To do its own class deletion
*       EDITA     To do its own class deletion
*       SCMAP.HLP To add APARM(9) to set the averaging time in editing.
*       SCMAP     (1) To an interactive task since the editor requires
*                     the terminal.
*                 (2) To pass SOLINT and APARM(9) along with the
*                     objects to use when editing.
*                 (3) To invoke the editor on the EDIT DATA menu item
*                     rather than to apologize (none are now needed) and
*                     to redo the display after.
*       Moved nowhere.

 9087.  June 3, 1996              MFPRT                      Chris
        Corrected the sign of the velocity.
        Moved from AOC AIPS 6 June by Eric.

 9088.  June 4, 1996          $APLNOT/BACOOR.FOR             Leonia
        The new subroutine calculates a baseline coordinates in
        equatorial coordinate system fixed at the sky for both ground
        based antennas and orbital ones. It can be used instead od
        BASLIN for orbital VLBI when one or several antennas are in an
        orbit of the earth satallite.
        Moved from AOC AIPS 6 June by Eric.

 9089.  June 5, 1996          $YPGNOT/CLPLT.FOR              Leonia
        The new version of the task can plot a model for orbital VLBI
        when one or several antennas of VLBI net work in an orbit of
        Earth satellite. The following changes were provided:
        1.Subroutine ANTIN has been modified to discriminate orbital
          and ground based antennas. An antenna is considered as an
          orbital one if MNTSTA = 2 in AN table. Six parameters of the
          orbit are read out from the AN table in this case.
        2.A new subroutine ORBIT has been written and put at $APLNOT.
          ORBIT calculates coordinates of an orbital antenna in
          equatorial coordinate system fixed at the sky.
        3.A new subroutine BACOOR has been written and put at $APLNOT.
          BACOOR calculates a baseline coordinates  in equatorial
          coordinate system fixed at the sky for both ground based
          antennas and orbital ones.
        A small bug unrelated with orbital issue has been discovered
        and fixed:
        OPCODE was defined as INDE if OPCODE = INDE and as CLOS if
        OPCODE = '   '. But OPCODE was not defined if erroniously it
        was declared not INDE and not BLANK. Now OPCODE is equal
        CLOS at al cases except it is declared as INDE.
        Moved from AOC AIPS 6 June by Eric.

 9090.  June 5, 1996          $YPGNOT/VPLOT.FOR              Leonia
        The new version of the task can plot a model for orbital VLBI
        when one or several antennas of VLBI net work in an orbit of
        Earth satellite. The following changes were provided:
        1.Subroutine ANTIN has been modified to discriminate orbital
          and ground based antennas. An antenna is considered as an
          orbital one if MNTSTA = 2 in AN table. Six parameters of the
          orbit are read out from the AN table in this case.
        2.A new subroutine ORBIT has been written and put at $APLNOT.
          ORBIT calculates coordinates of an orbital antenna in
          equatorial coordinate system fixed at the sky.
        3.A new subroutine BACOOR has been written and put at $APLNOT.
          BACOOR calculates a baseline coordinates  in equatorial
          coordinate system fixed at the sky for both ground based
          antennas and orbital ones.
        Moved from AOC AIPS 6 June by Eric.

 9091.  June 5, 1996              SAD                     Chris
        Changed SAD to use GAUSPS to avoid precision problems in
        converting VLBI-scale component sizes to angular sizes and
        to consolidate code with IMFIT/JMFIT.  SAD was suffering from
        the same problems that were fixed in IMFIT/JMFIT in mid-May:
        mas-scale components tended to be set to zero width.
        Moved from AOC AIPS 6 June by Eric.

 9092.  June 5, 1996              POSSM                   Ketan
        When NCOUNT=0, and the user requested multiple IFs to be
        plotted together [aparm(9)=1], only the first generated plot
        had the proper range of IFs plotted.  Subsequently, only IF1
        was plotted.  The fix was simple, POSSM simply needed to
        remember the proper range of IFs after the first plot was
        generated.
        Moved **CHANGE ONLY** from AOC AIPS 6 June by Eric.

 9093.  June 5, 1996              UVFIX                   Ketan
        There was a typo in a call to PRECES inside UVFIX.  An
        undeclared variable F was present in the calling sequence.  It
        should have been FL.  This should have had minimal to no effect
        on the calculations.
        Moved from AOC AIPS 6 June by Eric.

*9094.  June 6, 1996             IMAGR                     Eric
*       Changed:
*       UVDATA     Suppress a file exists message on UVCREA call.
*       IMAGR      Help file: changed limit on IN2SEQ to allow the work
*                  file to be re-used.  Cahnegd comments about this and
*                  about having to set OUTVER to get a restart.
*       HLPCLEAN   Added fields 17-64.
*       Moved nowhere.

*9095.  June 6, 1996              EDIT class               Eric
*       Changed
*       HLPSCMAP   EDIT DATA now for real.
*       SCMAP      Help file:
*       Moved nowhere.

*9096.  June 7, 1996            BPASS                      Eric
*       Changed to add an option to do weighting in a channel-based
*       fashion.  The weights are accumulated channel-by-channel (as
*       well as baseline, polarization, and IF) and then scaled by the
*       amplitude squared of the data being fit.  Otherwise low
*       amplitudes were getting equal weight.
*       Moved nowhere.

 9097.  June 6, 1996             MFPRT                    Chris
        Added 3 columns to the output containing the deconvolved
        component sizes.
        Moved from AOC AIPS 7 June by Eric.

 9098.  June 11, 1996            $YPGNOT/SPFLG.FOR        Ketan
        When examining VLBA data, it maybe useful to be able to load
        only total-power spectra for a first pass at data flagging.
        The interpretation of DPARM(2) has been changed as follows:
        DPARM(2)=0 gives only cross-power spectra, as before.
        DPARM(2)=1 gives cross- and total- power spectra, as before.
        DPARM(2)=2 gives ONLY total-power spectra - this is new.
        Also help file.
        June 14, 1996            $YPGNOT/SPFLG.FOR        Ketan
        Added ability to customize the reasons that SPFLG attaches
        to flagging commands entered into the FG table.  To each
        flagging command stored in the FC table is attached an
        optionally customized string that will be used as the
        reason for that flagging command.
        Also help file and HLPSPFLG.HLP.
*       [ERIC NOTE: merged these changes with those for buffer size and
*       GTBWRT call sequence made by me earlier.  Corrected Ketan's bad
*       typing standards.]
        Moved from AOC AIPS 21 June

*9099.  June 21, 1996              TVFLG                Eric/(Ketan)
*       Moved the reason-setting option into TVFLG too.  Changed
*       TVFLG.FOR, TVFLG.HLP, and HLPTVFLG.HLP.
*       Moved nowhere.

 9100.  June 21, 1996     GAUSPS (JMFIT, IMFIT)            Leonia
        A misprint has been found at the recent modification of
        subroutine GAUSPS.  This misprint caused an identical major and
        minor axises of found gausian components at the VLA case. It's
        been fixed and the routines JMFIT and IMFIT using GAUSPS have
        been recompiled.
        Moved from AOC AIPS 21 June.

 9101.  June 21, 1996     $APLPGM/SAD.FOR                  Leonia
        A small mistake has been found at the recent implementation
        GAUSPS into SAD. The calculation of absolute coordinates of
        found gausian components (RA, DEC) was erroniously deleted from
        a cycle.  As a result the reference feature's RA and DEC was
        printed for all found gausians. Fixed.
        Moved from AOC AIPS 21 June.

 9102.  June 20, 1996         OOP Package                 Chris
        Modified the OOP package to write compressed UV data.  If a UV
        file is created by calling OUCREA then that file will be
        compressed if ISCOMP is true in the corresponding UVDESC object
        (OUCREA is usually called indirectly through OUVOPN).  OUVOPN
        now detects when a file to be written is compressed and records
        the location of the WEIGHT and SCALE parameters (in UVWSPT) for
        use by UVWRIT.  OUVCLO will also check on this information an
        make sure that the header is correct for compressed or
        uncompressed data to protect against destructive changed to the
        UVDESC object.
            OUVCLN now checks for a virtual DOUVCOMP keyword attached to
        the input UVDATA object and compresses the output file if this
        exists and has the value .TRUE.. OUVSCR (in UVDATA.FOR), UV2SCR
        (UVUTIL.FOR) and CP2SCR (UVUTIL.FOR) now take an extra argument
        that indicates whether scratch data should be compressed.  Calls
        to the scratch file routines have been updated in QUVUTIL.FOR
        and tasks MAPBM, FRCAL and SCMAP.
            UVDSCP (in UVDESC.FOR) now regards random parameter names as
        size related and refuses to copy them.  Note, however, that
        UVDCOP copies the input files compression state to the output
        file.
            A new UVDATA routine, OUVPAK, is responsible for adjusting
        the descriptive information for uv data to reflect compression
        (ie. changing NAXIS(1) and adding or removing the WEIGHT and
        SCALE parameters).  This is principally used internally by
        UVDATA but may be called by client programs (an obvious use is
        to patch up descriptive information for a compressed file to
        reflect uncompressed data: see UV2MS for an example).
            Task FIXWT will now write compressed scratch files if
        DOUVCOMP is true and task UV2MS will now append data to
        compressed multi-source files and will create new multi-source
        files in compressed format is DOUVCOMP is true.  Tasks MULIF and
        SPECR will now write compressed data if their input data was
        compressed: strictly speaking, this is incorrect behaviour since
        it is not conditioned on DOUVCOMP but has not been fixed yet
        since there are no adverse effects from this.
*       [ERIC NOTE: folded call to OUVSCR change into my SCMAP, folded
*       error message suppression in UVDATA in Chris's/]
        Moved from AOC AIPS 21 June by Eric..

*9103.  June 23, 1996                IENHNS                    Eric
*       Found problem turning off graphics plane after a TVTRANS.  The
*       test for WASON assumed graphics channel 1 and was not changed
*       when we switched to channel 7.  Changed to always turn off.
*       Moved nowhere.

*9104.  June 25, 1996             BPSMO                     Eric
*       Added help on ECHAN omitted from help file.
*       Moved nowhere.

*9105.  June 25, 1996            BPLOT                     Eric
*       New task to plot bandpass functions as a set of profiles (like
*       PLROW).  Either multiple times for one antenna or multiple
*       antennas for one time appear in each plot and multiple plots may
*       be produced.
*       Moved nowhere.

*9106.  June 28, 1996         SDGET, DGGET                     Eric
*       In the major code upgrade, SDGET was changed to reflect changes
*       in the uv-data address parameters.  This seemed to force a call
*       to DGINIT.  Unfortunately, unlike the rest of things, DGINIT
*       does not accept a blank STOKES.  Added a call to FNDPOL to SDGET
*       to match the method used by UVGET to deal with this.
*       DGGET was setting output weight = wt1 + wt2 where wt1, wt2 are
*       the two Stokes components being converted into the output.
*       There was no test to see if it is only 1 in fact.  Changed to
*       halve the weight if the two input ones are the same.
*       Moved nowhere - should go to NEW.

*9107.  June 30, 1996              OTFUV                   Eric
*       Created new adverb DOWAIT (changing POPSDAT.HLP, NEWPARMS.001,
*       and the new help file) to tell OTFUV to time average the offs
*       and gains.  Changed OTFUV to do this.
*       Moved nowhere.

*9108.  June 30, 1996             OTFIN                   Eric
*       New task to index contents of 12m OTF data files to aid in
*       preparing inputs to OTFUV.
*       Moved nowhere.

*9109.  July 2, 1996              NOADVERB                    Eric
*       Changed message in AU1A and AU2 to recommend a COMPRESS rather
*       than a RESTORE 0.  Added to NOADVERB.HLP.  Fixed typo in PRTAB
*       help file.
*       Moved nowhere.

*9110.  July 2, 1996          TVFLG, SPFLG                    Eric
*       Changed a typo that prevented the REASON string from getting the
*       data and time substituted.
*       Moved to 15OCT96 by stealth.

*9111.  July 2, 1996            Reason in Editing             Eric
*       Added setting reason string to the edit class.  Changed
*       FCINI       To create a 15th column to hold the reason
*       TABFC       To read/write the reason (added to call seq)
*       TABLEUTIL   To read/write the reason (added to call seq)
*       QEDIUTIL    Change call to OTABFC adding FLGREA, make REASON be
*                   in common, init it to ' ', add SET REASON to menus
*                   other than the one for editing the SN table itself,
*                   add code to prompt for and set REASON.  Also fixed
*                   typo in opening AP object for SN editing.
*       HLPEDIUV    Add to on-line help file.
*       HLPEDISN    Add to on-line help file.
*       HLPEDITY    Add to on-line help file.
*       EDITA       Add to explain section of help file
*       EDITR       Add to explain section of help file
*       SCMAP       Add to explain section of help file
*       Moved nowhere.

*9112.  July 5, 1996            QEDIUTIL                  Eric
*       There were round-off problems in locating data samples from the
*       plot.  Changed handling of TV coordinate and the computation of
*       where we were (in some places).  SN uv-data editing did not call
*       the application routine with the right object.  Fixed it to
*       reset the FG table sort order also.
*       Moved nowhere.

*9113.  July 5, 1996           TABBP                       Eric
*       Found a bug by which the last half of the second polarization
*       was not written!  BPASS did not suffer from this since it uses
*       TABIO directly and hence something got written.
*       Moved nowhere.

*9114.  July 7, 1996             UJOIN                     Eric
*       New task to average or difference overlapped parts of multiple
*       IFs, producing a new uv data set with one IF and, usually, more
*       spectral channels.
*       Moved nowhere.

*9115.  July 8, 1996            IBM AP                  Eric
*       Changed PAPC.INC in $INCIBM to declare a 5 Megaword AP.
*       Rebuilt ZDCHIN, $QPSAP, and all Q program areas.
*       Moved nowhere.

*9116.  July 11, 1996           PRTAB, GETCOL           Eric
*       The fact that a row was flagged was being lost if GETCOL was
*       called with LRNO = IRNO.  This happened when PRTAB looped for
*       the 2nd value in an array since it did not branch far enough
*       out.  Fixed GETCOL to return LRNO < 0 on flagged rows, and fix
*       branching in PRTAB as well.
*       Moved nowhere.

*9117.  July 12, 1996            Data flagging           Eric
*       Changed DATFLG to handle FQ numbers more sensibly.  Previously,
*       if the FQ of the flag was > 0 and did not match FRQSEL, then
*       the flag command was ignored.  For single-source files, FRQSEL =
*       -1 and all flags with an FQ value > 0 were ignored.  Changed
*       this to test the flag FQ only if there are FQs in the data and
*       then to test the FQ of the sample, not FRQSEL.  Flags generated
*       from Tsys and SN tables tend to have FQ numbers since the tables
*       have them.
*       Moved nowhere.

*9118.  July 13, 1996              TVMENU                Eric
*       Changed it to turn off the menu if the menu read times out.
*       Moved nowhere.

*9119.  July 13, 1996              IMAGR                 Eric
*       Having wondered what took so long after the last image was
*       finished, I checked and found that the task was re-reading all
*       of the data to find the average time.  Added code to find the
*       average time on the first channel copied in IMACPY and then to
*       skip the IMTAV routine.  This should be faster.
*       Moved nowhere.

 9120.  June 26, 1996      VLB DDT                   Athol/Ketan
        Upgrade DTSIM and DTCHK to add new features, including (u,v,w)
        computation, additive noise, source models and more support for
        OVLBI data. Stripped out subroutines common to DTCHK and DTSIM
        and placed these in the std. libraries. These include:
          $INC/DTPM.INC - common blocks containing simulation
                          parameters.
          $APLNOT/DTPARM.FOR - routine to read sim. parameters.
          $APLNOT/IKEY.FOR - KEYIN utility.
          $APLNOT/DTINDX.FOR - find index in DTPM.INC
          $APLNOT/DTCALS.FOR - compute simulation cal. errors.
          $APLNOT/DTBAND.FOR - compute simulated bandpasses.
        Also, upgrade the help files $HLPFIL/DTSIM.HLP and
        $HLPFIL/DTCHK.HLP to document the changes.

        July 2, 1996      $APGNOT/DTSIM.FOR           Athol
        Upgrade DTSIM to allow polynomial bandpasses; also improve AN
        table creation and initialization.
          $APLNOT/DTCALS.FOR - default Tsys = 0.
          $APLNOT/DTBAND.FOR - polynomial bandpasses.

        July 3, 1996      $APGNOT/DTCHK.FOR          Athol
        Modify DTCHK to skip flagged data correctly.

        July 5, 1996      VLB DDT data file          Athol
        Create new VLB DDT parameter files DTSIM.BP_{1..7} in $RUNSYS.
        This in preparation for putting the VLB DDT runfile into the
        system. $RUNSYS was felt to be the best existing directory to
        house the parameter files.

        July 12, 1996    $APGNOT/DTSIM.FOR           Ketan
        Fixed three bugs that resulted in incorrect UVW coordinates in
        DTSIM.  Also improved readability of time calculations.  Now,
        DTSIM's calculation of UVW coordinates mimics that currently
        found in UVFIX.  DTSIM generated data must be treated as VLBI
        data since it calculates station positions in the AN table as
        VLBI-type coordinates, in that they correspond to a left handed
        coordinate system.

        July 14, 1996         $APGNOT/DTSIM.FOR     Athol
        Fix minor error affecting VLBA fringe-rotation shift.
*       Moved from AOC AIPS 14 July by Eric.

 9121.  June 27, 1996      FILLM                     Gustaaf
        Some visibilities ended up with the wrong FREQID since its value
        was not updated frequently enough.
*       Moved from AOC AIPS 14 July by Eric.

 9122.  July 12, 1996       BLAPP                   Chris
        Fixed the subroutine call for OSN2CL.  This must have been
        broken for a long time.
*       Moved from AOC AIPS 14 July by Eric.

 9123.  July 12, 1996          BLING                Chris
        BLING can now divide a model into the data before searching
        fringes and can use the Schwab-Cotton FFT algorithm to add in
        data from indirect baselines for greater sensitivity.
        Off-centre window handling has been changed allowing greater
        padding to be used in the FFTs: this has removed the need to
        refine fringe positions using non-linear least-squares.  This
        has also greatly decreased the chances of obtaining wild
        solutions.
*       Moved from AOC AIPS 14 July by Eric.

 9124.  July 14, 1996      $APLOOP/UVUTIL.FOR         Ketan/Eric
        The OOP routine UVCALT previously copied all tables attached to
        an input UV object to an output UV object.  Now, the input UV
        object is queried for the keyword DROPTABS [TYPE = OOACAR ;
        DIM(1) = 2 ; DIM(2) = 20 ] which contains a list of tables NOT
        to copy.  If DROPTABS is not found, all tables are copied as
        before.
*       Bug corrected before installation by Eric.
*       Moved from AOC AIPS 14 July by Eric.

 9125.  July 14, 1996          GPHAS                   Ketan
        New task to produce one effective baseline by averaging selected
        baselines.  This is useful for fringe-fitting VLBI data when one
        specific antenna's parameters are not well known - as is
        expected for Space VLBI.
*       Moved from AOC AIPS 14 July by Eric; CHANGE.DOC entry created.

****************************************************************
* CVX up to date except for Athol's version of bandpass and CVEL
        routines.
****************************************************************

*9126.  July 15, 1996                UJOIN                       Eric
*       Add DOWEIGHT option to control how flagged data are handled.
*       Moved nowhere.

*9127.  July 17, 1996              TVMOVIE                       Eric
*       Changed AU5D to allow Button D to terminate the movie
*       prematurely (for those of us who start one with the wrong
*       parameters).
*       Moved nowhere.

*9128.  July 18, 1996            XAS, FILINI                     Eric
*       Changed FILINI to expand or contract previously existing files
*       when CREA is specified.  Changed XAS to have a new CVX icon and
*       to use 4 grey planes rather than 2.
*       Moved to IBM and Siamang today.

 9129.  July 15, 1996         $APGOOP/COHER.FOR       Leonia
        Coherence time is determined by comparing vector and scalar
        averaged amplitudes for a source over increasing the averaging
        time intervals. When the vector/scalar ratio becomes less than
        APARM(3) the coherence time is considered exceeded. A new
        coherence time is determined for the following time interval
        starting with the end of previosly found coherence
        interval. This process is terminated when the time reaches the
        source end or APARM(1). The coherence time for the selected
        source is determined as an average of the all coherence time
        found ising different time intervals. The final coherence time
        for the given baseline is determined as an average over the
        selected sources. Complex amplitude for each time interval is
        determined averaging the selected frequency channels after
        removing a possible residual delay.  The output of the task is
        represented as two tables showing found coherence times for
        selected baselines ans antennas.
        Moved from AOC AIPS 19 July by Eric.

 9130.  July 18, 1996         $APGNOT/FILLM.FOR       Gustaaf
        Change #9080 had some bad side effects. Undid that change, and
        solved the FREQID problem by a better treatment of submode
        changes and pointing mode instead.
        Moved from AOC AIPS 19 July by Eric.

 9131.  July 18, 1996         $YPGNOT/FRMAP.FOR       Leonia
        FRMAP used the reference frequency instead of actual frequency
        for a specified freqid and IF. As a rersult scaling of obtained
        maps correct only for the first FQID. I have added the FQ table
        reading to determine the frequency for selected FQID and IF and
        fixed the problem. The task can work only with one selected IF.
        So BIF had to equal EIF.  To clarify the statement I've excluded
        EIF from the list of input parameters and forced BIF=EIF inside
        of the programm. The relevant change of the help file was
        provided.
        Moved from AOC AIPS 19 July by Eric.

*9132.  July 19, 1996            SD data OOP                     Eric
*       Changed UV routines in OOP code to be aware of the uv data type
*       --- UV, SD, and SC, SG, SE (projected SDs).  Changed:
*       OBJMNGR    Added computation of TYPEUVD string as derived
*                  keyword.
*       UVDESC     Added TYPEUVD as a UV_DESC member and added it as one
*                  not copied.
*       UVPHAS     Put test for UV with rapid exit on SD.
*       QUVUTIL    Put test for UV with rapid exit in all routines but
*                  OUVSRT.  Will change OUVIMG probably to handle SD.
*       UVUTIL     Put test for type lots of places, making some the
*                  error and quit and others to handle baseline numbers,
*                  u, v differently.
*       UVDATA     Make a SINGLE(buffno) in common, set it on open, test
*                  on reads to choose SDGET or UVGET.
*       IMAGR      Add test and quit for SD data.  It can't be done
*                  until OUVOPN is called so garbage is left.
*       Moved nowhere.

*9133.  July 25, 1996            PROG                          Eric
*       Changed this proc to look for arg*.FOR rather than require exact
*       match.
*       Moved nowhere.

*9134.  July 25, 1996                BPLOT                      Eric
*       Added option to plot the difference of the amplitude and the
*       average amplitude rather than the amplitude of the complex
*       difference.  Changed help too.
*       Moved nowhere.

*9135.  August 1, 1996            SDLSF                      Eric
*       New task, like UVLSF except for single-dish data.  It fits a
*       linear baseline to the average of all spectra at a given time
*       and then subtracts that baseline from each of the spectra at
*       that time.  This seems to remove the need for UVLIN in many
*       cases and can do flagging on excess residual and excess rms
*       residual in the baseline channels.  Has a more extensive report
*       function than UVLSF.
*       Moved from Tucson.

*9136.  August 1, 1996             OTFUV                      Eric
*       Added the ability to read in more than one "IF" at a time,
*       including leaving out those OFs within BIF-EIF that do not match
*       BIF for center frequency and frequency increment.  This keeps
*       the data in time order avoiding sorts and avoids lots of
*       overhead, especially for 8-feed experiments.  It does not seem
*       to save any cpu time, however.
*       Moved from Tucson.

*9137.  August 1, 1996         SDIMG, SDGRD                    Eric
*       Renamed SDGRD to SDIMG.  Pulled out the "small" gridding
*       subroutine SDGRSG, renaming it SDGRID.  Added to SDGRID the
*       ability to use scratch files and/or cataloged files as input and
*       output, to read cataloged input files with SDGET, to do the
*       coordinate projection.  Created DSDG.INC to hold needed
*       parameters for SDGRID and rearranged SDIMG's local include to
*       use DSDG.INC.  Also changed:
*       UVUTIL    Changed MXVS parameter to use PUVD's MAXCIF.  This was
*                 previously overlooked and would limit the AT.  Changed
*                 Changed U2IDES to support SD data with alternate
*                 projections and setting of the center coordinate.
*       QUVUTIL   Added subroutine OSDIMG
*       SDGRD     Wrote a new task by the old name to use the OOP
*                 version of single-dish gridding.  This has the
*                 advantage that a large scratch file is not required,
*                 but has to do the coordinate computation, potentially,
*                 more than once.  Thus it uses more cpu, but usually
*                 less real time.
*       Moved from Tucson.

*9138.  August 1, 1996              OTF..                      Eric
*       Created include file DSDD.INC to hold pointers into the SDD
*       header format and created subroutine SDDPTS.FOR to translate the
*       "class" offsets from the header and add the parameter offsets
*       within the class to produce the pointers actually used.  Assumes
*       that they stay constant for the whole data set.  Changed OTFUV
*       and OTFIN to use the include and to call SDDPTS on the first
*       usable header.
*       Moved from Tucson.

 9139.  August 1, 1996        $APGNOT/SOLCL            Pat/Stephen White
        There was a typo in a WRITE statement (MSGTXT accidentally
        omitted).  Received a gripe pointing to the exact line.
        Moved from AOC AIPS by Eric on above date.

 9140.  August 1, 1996        $QPGOOP/GPHAS            Ketan
        Changed the scheme for averaging visibilities such that now, a
        weighted average of the visibilities is performed, this is
        consistent with the behaviour of UVAVG.
        Moved from AOC AIPS by Eric on above date.

 9141.  August 1, 1996            SUB                     Pat
        Also added $SYSUNIX/SUB which helps find subroutines.
        Moved from AOC AIPS by Eric on above date.

 9142.  August 1, 1996    $APLSUB/TABAN.FOR         Pat / Henrietta May
        Corrected two assignment statements; the integer version of an
        array was used instead of the real version.
        Moved from AOC AIPS by Eric on above date.

 9143.  August 1, 1996            FIXWT                     Chris
        Documented the requirement that the input data be in TB order
        and removed a paragraph from the explain file that claimed
        that the output data set could not be compressed (untrue since
        June).
        FIXWT now checks the sort order in the UV file header (I thought
        it already did this but may have been assuming that this was
        checked lower down in the system) and verifies that the data
        really is in TB order during the merge phase.  The last check
        is necessary because I have found cases of data which marked
        as being in TB order but were not.  Some cases of this appear
        to arise from an occasional glitch in FITTP when reading VLBA
        data.  FILLM is a prime suspect in other cases.
        Moved from AOC AIPS by Eric on above date.

*9144.  August 1, 1996              POSSM                Leonia/Eric
*       Leonia found a bug affecting autocorrelation plotting: the
*       BASELINE adverb was not ignored although the help file (and
*       logic) say that it should be ignored.  Leonia put the fix for
*       this is a strange place, I have put it in the setting of the
*       local IXBASL array where it really belongs.
*       Leonia added an option to the AOC AIPS saying "some users would
*       desire to have a plot for phase as well to analize cross
*       polarisation property of an antenna."  He added code that forces
*       POSSM to select only auto-correlation data but then allows it to
*       plot the phase or imaginary part or whatever the user requests.
*       Since the phase of autocorrelaions is identically zero this
*       makes no sense.  Further, it messes things up for single-dish
*       data in which the imaginary part is used to store the applied
*       calibration offset since it known that only the real part is
*       data.  Leonia's application of his option is inconsistent in a
*       number of ways and has no apparent value so far as I can tell.
*       Moved the correction idea from AOC AIPS this date, rejected the
*       rest.

*9145.  August 6, 1996              COMB                       Eric
*       Changed handling of release name in history output.  The list of
*       variables to the WRITE should have included the taskname.
*       Moved nowhere.

*9146.  August 6, 1996             ZEXPND                     Eric
*       A "gotcha" was present - if the LUN referred to 1 file and the
*       file name to another, then the first would expand while the
*       latter was found not to have grown.  A message but no error code
*       was generated.  Changed it to return -1 when all of the
*       requested space is not given and to return +4 when no space is
*       given.
*       Moved nowhere.

*9147.  August 7, 1996          More OTF                     Eric
*       Changed DSDD.INC and SDDPTS to add the coordinate frame type and
*       the plus and minus beam throws.  The former will be 'EPHEM' to
*       indicate that planet coordinates have been tracked.  Changed
*       OTFUV      to test for EPHEM, check those coordinates, and then
*                  substitute the first values for the current ones.
*                  Also changed the length computation to set the data
*                  buffer.  Round off aspects made it too small
*                  sometimes.  Added explanation about magnitude of time
*                  out of order and test for going through midnight
*                  during a scan.
*       OTFUV.HLP  Default class is not UVDATA.
*       SDLSF.HLP  Added more info re clip level defaults and to try to
*                  get people to use CHANSEL correctly.
*       UVLSF.HLP  Ditto.
*       SDGRID     Added code to test for and manage the header
*                  parameter indicating blanking.
*       QUVUTIL    Added code to put the BLANK value and any input
*                  "clean beam" parameters in the disk header.
*       UVDESC     Added BMAJ, BMIN, BPA to types.
*       OBJMNGR    Added BMAJ, BMIN, BPA to UVDATA types.
*       Moved from Tucson..

*9148.  August 7, 1996              OTFBS                    Eric
*       New task to read and translate OTF continuum beam-switch data.
*       Changed DSDD.INC and SDDPTS to add parameters for coord frame,
*       plus and minus beam throw, two efficiencies, and reference
*       system temperature.  The task produces 2 uv data sets one with
*       the plus throw and one with the minus.  Spectral channels 2 and
*       3 are used for RA and Dec offsets, while the normal ra and Dec
*       positions are used for relative az and el offsets from the
*       reference ra, dec.
*       Moved from Tucson.

*9149.  August 8, 1996           more SD                     Eric
*       Changed
*       QUVUTIL   To force BSTHROW to go to output SD images
*       SDIMG     To copy all keywords from UV input to output.  Also
*                 to implement a coordinate rotation.
*       SDIMG.HLP To add ROTATE.
*       SDGRD.HLP To add ROTATE.
*       SDGRD     To add the adverb ROTATE, placed in the image object.
*       UVUTIL    To pick up the ROTATE adverb in U2IDES and add it to
*                 the coordinate rotation.
*       CATKEY    To declare the keyword CHAR*(*) rather than CHAR*8.
*                 This allows quoted strings that are short to work.
*       Moved from Tucson

*9150.  August 8, 1996           BSCOR                     Eric
*       New task to correct beam switched images.  This may get replaced
*       with one that combines SDGRD and BSCOR.
*       Moved from Tucson.

*9151.  August 13, 1996        BSCOR, BSROT                Eric
*       Changed BSCOR to have the two baseline regions be the same ---
*       otherwise bad results arose.  Created BSROT in an attempt to
*       correct for errors in the throw length or relative elevation.
*       The former seems to work well, the latter not at all.  Sigh..
*       Moved from Tucson anyway.

*9152.  August 13, 1996            SDMOD                   Eric
*       Added BPARM to control usage for beam-switched continuum.  The
*       coordinate has to be centered on zero, not the center ra, dec.
*       Throw rotation and length errors are allowed.
*       Moved from Tucson.

*9153.  August 22, 1996            STALIN                        Eric
*       Changed formats and limit tests in HI handling in AU7B to allow
*       for more than 20000 HI records.  Gustaaf had 750000!  Also
*       changed HICLOS to call ZCMPRS when appropriate.
*       Moved nowhere.

*9154.  August 22, 1996           BPGET                          Eric
*       If several things happen at once including 2 floats that are
*       equal, a floating divide by zero could occur.  Fixed the logic
*       to avoid this.
*       Moved nowhere.

*9155.  August 25, 1996           SNSMO                          Eric
*       Changed to test for single-source vs multi-source and to call
*       FNDSOU only in the latter case.  Otherwise, it would not do
*       single-source files.
*       Moved nowhere.

*9156.  August 27, 1996           SDGRID                         Eric
*       Fixed error - wrong format - on coordinate translation error.
*       Changed the handling of that error to count the failures but try
*       to go on.
*       Moved nowhere (need Tucson).

 9157.  September 2, 1996         FITLD                   Phil
        (August 5) A subtle error in the frequency selection code was
        uncovered. If the selected data do not appear in the first two
        files on the tape then the reference frequency in the header
        does not get updated. Fixed.
        (August 19) Increased the parameter MAXTAB from 256 to 1296.
        MAXTAB denotes the maximum number of extension tables that can
        be read, it had not been increased when Eric changed the data
        format to extended Hex. An oversight.
        (August 30) undocumented
*       Moved from AOC AIPS by Eric on above date.

 9158.  September 2, 1996     $QSUB/GRDFIT.FOR          Athol
        (August 22) GRDFIT and UVWAIT were incompatible in their
        assessment of space required for robust weighting. IMAGR would
        then give a message about XY sorting required. Standardise
        GRDFIT with UVWAIT to avoid this.
*       Moved from AOC AIPS by Eric on above date.

 9159.  September 2, 1996          STRTKN                    Chris
        (August 27) STRTKN is a new subroutine that splits a string into
        an array of tokens: a token is an consecutive run of non-blank
        characters separated from other tokens by one or more blanks.
        This is primarily intended to extract fields from lines
        read from non-AIPS text files that do not use fixed formats.
*       Moved from AOC AIPS by Eric on above date.

 9160.  September 2, 1996      GP table, LDGPS                Chris
        (August 27) Added a new table type (GP) to hold GPS TEC data.
        The following routines support this table type:
            GPINI (APLNOT) - open/create
            TABGP (APLNOT) - read/write/close
            OGPINI (in TABLEUTIL from APLOOP) - wrapper for GPINI
            OTABGP (in TABLEUTIL from APLOOP) - wrapper for TABGP
*       The TABLEUTIL changes were merged with the CVX version.
        LDGPS is a new task that reads GPS ionospheric data from
        a CONAN ASCII file and writes it to a GP table attached
        to a uv data file.
*       Moved from AOC AIPS by Eric on above date.

 9161.  September 2, 1996     $YPGM/PCNTR.FOR & .HLP      Athol
        (August 7) Add new adverb ROTATE to PCNTR, allowing a fixed
        rotation of of all polarization vectors drawn.
*       Moved from AOC AIPS by Eric on above date.

 9162.  September 2, 1996          $SYSUNIX/COMRPL             Pat
        (August 8) Noticed while building a system for Linux 2.0.11 that
        the reverse name lookup hack in this script didn't screen out
        the value ENV, and it can fall flat on its face.  Added another
        "grep -v" to the long string of similar commands.  This really
        needs to use REVENV.C if I can ever get the time to test it.
*       Moved CHANGE ONLY from AOC AIPS by Eric on above date.

 9163.  September 2, 1996            FILLM                    Gustaaf
        (August 15) Since May 1, 1996 the VLA online system writes
        proper system temperatures to tape. FILLM now reads them, and
        writes them to the TANT column in the TY table. CPARM(2)
        controls whether front-end or back-end tempertures are written.
        As before, the TSYS column contains the 'nominal sensitivity'.
*       Moved from AOC AIPS by Eric on above date.

 9164.  September 2, 1996            BLING                     Chris
        (August 9) Fixed a defective assignment that overwrote the
        subarray number with the current source ID in DOSOLI and changed
        the speed-up settings to restrict the amount of padding used in
        FFTs rather than limiting the maximum size of the FFTs (the
        maximum size limit was ineffective since it rarely cut in).  The
        speed-up settings are now given separately for delay and rate,
        allowing the user to favour precision in rate over precision in
        delay.
        (August 12) Rearranged the MK3 mode search to look for multiband
        delay and rate before single-band delay.  This gives BLING a
        fighting chance of finding some friges in this search mode.
*       Moved from AOC AIPS by Eric on above date.

 9165.  September 2, 1996        IMFIT, JMFIT, SAD         Leonia/Eric
        (August 16) There were many complains about wrong error analisys
        of elliptical gaussian fits in IMFIT and JMFIT. Having revised
        the relevant codes part I can conclude that IMFIT provides wrong
        errors of elliptical gaussian fits. JMFIT gives more correct
        result but still there are some misprints and mistakes.  For
        example an expression of position angle errors includes SQRT of
        a function of major and minor axis of fitted elliptical
        gaussian. But theory says that this function has to be in the
        formula without the SQRT. The expressions for the fitted
        gaussian parameters depend on ratio of a beam size and a fitted
        ellipce size. JMFIT uses the only formulas for all cases. That
        is wrong. The new version of JMFIT estimates the ratio of the
        beam size and gausian ellipse size. Based on this ratio JMFIT
        uses three different groups of formulas for the errors: 1.the
        source is a point one; 2.the source is exspanded one; 3;the
        source has an intermidiate size relatively the beam size. The
        formulas for the first two groups were taken from J. Condon
        paper: 'Errors in elliptical gaussian fits', AA, 1996. The
        formulas for the intermidiate case were derived as an
        interpolation of the first two limit cases.
        The old JMFIT printed two errors: based on rms  of residual map
        and the actual rms of the image. I excluded the first one
        because users confused which one is better. But at the same time
        I implemented (through the new adverb FLUX) rms which can be
        choosen by an user. Now the error analysis can be provided on
        the base of the actual rms of the image or the rms given in
        adverb FLUX. The relevant change of the HELP file has been made
        also.
*       Eric: In general, Leonia is right in his comments.  IMFIT was
*       identical to JMFIT so I do not understand his remarks about
*       that.  Cleaned up Leonia's code in JMFIT and installed it in
*       IMFIT.  Dropped the FLUX adverb from JMFIT - the ACTNOISE verb
*       is used to set noise numbers if the user wants.  Added remarks
*       about it in the HLP files.
*       Changed SAD to incorporate Leonia's improvements as well.
*       Moved ideas from AOC AIPS on above date.

*9166.  September 3, 1996           ISPEC                   Eric
*       Added SMOOTH adverb to smooth the plot and the print out.
*       Moved nowhere.

*9167.  September 12, 1996           FITLD                         Eric
*       Apparently my changes to the call seq of BATAB and TABBP did not
*       make it into the FITLD putbck in April.  I guess these tables do
*       not actually arise in the data anyway.
*       Moved nowhere.

*9168.  September 12, 1996     beam-switched SD data               Eric
*       Changed
*       OTFBS     to make the random coordinate parameters AZ---REL and
*                 EL---REL for beam-switched data since that is what
*                 they are.  Fixed bug that caused it to think it had
*                 data when it did not and to process non-existant
*                 scans.
*       UVPGET    to make TYPUVD = 3 for this type.
*       OBJMNGR   to make TYPEUVD = 'SB' for this type.
*       UVUTIL    (U2IDES) to pick up coordinate keywords for SB too,
*                 but to allow for 0,0 as normal in that case.  Also
*                 changed to positive x axis increment for SB.
*       QUVUTIL   (OSDIMG) to allow SB
*       SDGRD     to allow SB.
*       GRIDR     Fixed error message to handle TYPUVD 3.
*       SDIMG     to all 0,0 for the center of BS images and to have the
*                 x axis increment be positive.
*       SDMOD     to allow type 3.  Also added the optionto alter the
*                 apparent coordinates to integers * user-specified
*                 increments before or after computing the model values.
*       SDMOD     HLP to describe the above options.
*       SDGRD     HLP to describe new non-defaults for APARM in BS
*       SDIMG     HLP to describe new non-defaults for APARM in BS
*       Moved nowhere.

*9169.  September 17, 1996            SD stuff                      Eric
*       QEDIUTIL   Changed FC display to put flag command number first
*                  and the less significant row # second.
*                  Added SWITCH ALL TIME option to all 3 edit modes.
*                  Cleaned up EDITUV to detect autocorrelation only data
*                  and to set better initial baselines, disallow phase,
*                  etc.
*                  Changed handling of times to allow for small
*                  increments between samples (0.1 or 0.25 sec occur on
*                  OTF).
*                  Changed how UNDO was done.  It attempted to use
*                  values which could have changed if the differences
*                  were recomputed.
*                  Also changed REDO - the undo and redo operations
*                  reuse the detailed value-independent commands created
*                  when the opertion was run.  That is all they can do.
*                  Added REPLOT option.
*       Changed the help files SNEDIT, EDITA, EDITR, HLPEDISN,
*       HLPEDITY, and HLPEDIUV to describe the new options and to add
*       warnings about undo and redo..
*       LGEOM      Add call to KEYCOP so that the throw keyword would be
*                  copied.  This really should be in most tasks now.
*       Moved nowhere.

*9170.  September 18, 1996            BSTST                   Eric
*       New task - computes one-dimensional "spectra", observes them
*       with frequency switching, solves them with the BS restoration
*       technique (Emerson et al.), and plots the results.
*       Moved nowhere.

*9171.  September 18-19, 1996         BPASS                  Eric
*       Create adverbs MINAMPER and MINPHSER in POPSDAT.HLP and
*       NEWPARMS.001 and create help files for them.
*       Change BPASS to have more print levels for various debugging and
*       to document them in the help file.  The old levels were changed
*       from 1, 3, and 4 to 11, 14, and 13.  A level 1 display of
*       average closure errors in excess of BPASSPRM(6 and 7), a count
*       by antenna of excess closure error in excess of MINAMPER and
*       MINPHSER and print level 2 print of these individually was added
*       or modified.
*       Moved nowhere.

 9172.  September 3, 1996        XHELP pseudoverb            Chris
        Added an experimental XHELP pseudoverb to AIPS.  XHELP is
        intended to provide direct access to HTML versions of
        cookbook-level help.  XHELP FOO will look for a file named
        FOO.html in area AIPSHTML and automatically loads it into
        a browser (only Netscape is supported at the moment) which
        will be started if not already running.  If FOO.html does
        not exist then AIPS will check for FOO.HLP in HLPFIL and
        load it into the browser as plain text.  If the .HLP file
        doesn't exist then a default index page (INDEX.html from
        AIPSHTML) will be loaded.
        New routines:
            ZXHLP2 in SYSUNIX      script to load page
            ZXHELP in APLUNIX      handles XHELP pseudoverb
            ZXHELP in APLGEN       stub for non-UNIX systems
            XHELP.HLP in HLPFIL    help file
        Modified routines and files:
            AU1A.FOR
            CHUNT.FOR
            HELPS.FOR
            POPSDAT.HLP
*       Merged changes of AU1A and POPSDAT into CVX.  Did not change
*       CHUNT since Chris' changes did not do anything.  Changed AU1A to
*       prohinit the experimental help in non-interactive cases.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9173.  September 5, 1996        VLACALIB.HLP                Ketan
        Prior to 15JUL95, VLACALIB always wrote to SN#1.  Since
        15JUL95, VLACALIB always wrote a new SN table.  The SNVER
        adverb has been added so that the user can choose which
        method should be used.
        September 5, 1996        VLAPROCS.001                Ketan
        The cookbook reflects the pre-JUL95 behaviour of VLACALIB.
        VLACALIB now allows the user to set SNVER and, if a new SN
        table is to be generated, a warning message is printed.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9174.  September 9, 1996      $RUNSYS/CRSFRING.001 & .HLP   Athol
        Add new run-file written by Kari Leppanen to determine
        cross-polarized delay and phase offsets. This procedure uses
        task BLAVG and is thus distinct from CROSSPOL, although their
        overall purpose is the same.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9175.  September 9, 1996        FILLM.FOR                   Gustaaf
        Undid part of the changes in 9093 (9130 in CVX), since it had
        bad side effects.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9176.  September 9, 1996     $AIPSPUBL/COOK9.TEX & COOK9.PS  Athol
        Add a short section to the Cookbook (ch. 9) to provide an
        overview of VLBI polarization calibration within AIPS.
        This outline will be supplemented by an updated AIPS
        memo.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9177.  September 10, 1996   $APGNOT/SNSMO.FOR              Leonia
        The phases are averaged in IF before smoothing if SMOTYPE=
        'VLMB'.The average phase is the phase of vector average of
        the compex amplitudes. The option 'VLMB' uses usually with
        SN table having amplitudes equaled identically to unit. But
        as a result of the vector average the average amplitude is
        becoming different of one. To prevent this undesirable
        difference, the average amplitude is evaluated now as the
        scalar average of the IFs amplitudes. Help file has been
        updated.
*       Merged in my test for single-source files to avoid requiring
*       them to have source tables.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9178.  September 11, 1996     GP table, GPSDL            Chris
        Corrected the column definitions and units for the GP
        table.  Changed GPINI.FOR and LDGPS.FOR; revised
        documentation in TABGP.FOR, TABLEUTIL.FOR and LDGPS.HLP.
*       Merged correction to drop SAVEs on COMMONs and to declare
*       those COMMONs in the main program.  Merged documentation
*       change in TABLEUTIL.
        Added new task GPSDL that fits a simple, local model of the
        ionosphere to GPS data loaded by LDGPS and uses this model
        to correct phases for the excess path in the ionosphere
        and to calculate ionospheric Faraday rotation.  Requires
        a compact array with a nearby GPS receiver.
*       Merged correction to drop SAVEs on COMMONs and to declare
*       those COMMONs in the main program.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9179.  September 11-12, 1996     MAGDIP, FARAD           Chris
        Took MAGDIP from FARAD and placed it in $APLNOT.
        Fixed FARAD's faulty geometry used to calculate the relative
        position of the SIP.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9180.  September 12, 1996          FDEFAULT.SH          Pat
        Added a few extra qualifiers for the Irix 6.2/f77-7.0 OS and
        compiler on SGI systems.  The default for these new compilers
        differs from older versions in that -mips4 is not the default.
        Moved from NCSA today.

 9181.  September 12, 1996    $APGNOT/DTSIM              Athol
        Upgrade DTSIM to deal with delay errors in ns; also allow
        a polynomial delay offset. This required some changes to
        $APLNOT/DTCALS.FOR. Update $HLPFIL/DTSIM.HLP also.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9182.  September 16, 1996   $QPGOOP/GPHAS               Ketan
        GPHAS copied over the FQ table without adjusting it to reflect
        any data selection that may have been requested. GPHAS now
        copies over a modified form of the FQ table that reflects the
        output data file format and not the input data file format.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9183.  September 16, 1996   $APGNOT/DTSIM               Ketan
        DTSIM contained a stub routine for position calculations for
        an orbiting antenna.  That stub routine has now been replaced
        with a call to the subroutine ORBIT in ORBIT.FOR in $APLNOT.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9184.  September 17, 1996   BSINI in APLNOT             Chris
        Used an 8-character buffer for the MODE keyword to avoid junk
        being appended to it in the table header.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9185.  September 18, 1996   $APGNOT/ACCOR.FOR, HLP      Leonia
        ACCOR had an adverb SNVER which allowd to write the result
        to the given SN table. If SNVER .GT. total number of the SN
        table or SNVER=0 then a new SN table used. But if SNVER
        corresponded to an existing SN table then this table supposed
        to modify. This modification had a confusion because of
        the problem of time sinchronisatio in the solution interval
        of data average and time in the existing SN table.
        I've excluded the SNVER adverb from ACCOR to forget this
        confusion. Now the result is recorded in a new SN table ever.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9186.  September 18, 1996   $YPGNOT/VPLOT.FOR, HLP      Leonia
        VPLOT could plot a model based on only one field (one image).
        Now VPLOT can plot a model based on many fields (up to 16),
        which can appear as a result of multy field CLEAN at MX or
        IMAGR.  The new adverbs NMAPS and NCOMP have been implemented.
        NMAPS is number of the fields; NCOMP is an array of number of
        components at the each field. The subroutine REEDIN has been
        changed dramaticaly. The cycle of celected maps was added. The
        calculation of ZTERM was excluded from REEDIN. XTERM was
        calculated as a constant for the whole field. Such an
        aproximation could porovide a mistake in the case of wide field
        image. Now ZTERM is calculated for each individual point in
        MODSET and MODORB as a function of it X, Y position. This change
        improved accuracy of the model and at the same time simplified
        the program. The relevant change of the help file has been done.

        September 19, 1996    $YPGNOT/CLPLT.FOR, HLP     Leonia
        The multy field model has been implemented.  A small bug has
        been discovered and fix independentely. The task had not
        worked if TRIANGLE=0 and number of antennas > 21. I have
        increased parameter MAXTRP to 400 to lift up the antenna
        number threshold up to 29.
*       Changed the help and Fortran files to limit to 64 rather than
*       16 fields.  The Fortran uses the MAXFLD parameter as it
*       should.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

 9187.  September 19, 1996           BLAPP                Chris
        Modified BLAPP to deal with the misaligned timestamps for
        different baselines that will arise if different solution
        intervals are used on different baselines.  BLAPP now uses the
        input CL table as a template that determines the times at
        which solutions are to be obtained and writes a scratch BS
        table with solutions locally extrapolated to these times
        within the original solution intervals;  the scratch table
        is then used as the input table for the computational
        phase of BLING.  The acceleration term is used in the local
        interpolation so fringe-acceleration corrections should
        be taken care of automatically provided that the original
        CL table entries were sufficiently closely spaced in time.

        Fixed the upper bounds for the loops that extract antenna
        solutions after the least-squares fits to use the maximum
        antenna number rather than the number of antenna terms in
        the least-squares equations.  This mistake was causing the
        solutions for the N highest number antennae to be lost
        where N >= 1.
*       Moved from AOC AIPS 20 Sept 1996 by Eric.

*9188.  September 22, 1996            BPASS                       ERic
*       Changed tests on amplitude closure error to use logarithms
*       internally.  Then 0.5 and 2.0 are both 100% errors as they
*       should be.  Otherwise, the average error was under-reported.
*       Moved nowhere.

*9189.  September 23-24, 1996       Misc SD in uv tasks            Eric
*       Changed:
*       SDGET      to allow SC as well as UV files and to test for only
*                  those 2
*       UVGET      to test the found file type, limiting to UV and SC
*       UVUTIL     to suppress messages about DROPTABS
*       FIXWT      to allow sort order T? rather than TB, to get correct
*                  amplitude for autocorrelations, to forbid compressed
*                  output on beam-switched data.  Also added counters
*                  and reports since visibilities get skipped when they
*                  do not match the table and others get 0 weight even
*                  though they are not counted when the weights are
*                  calculated.  With some XINC values about half my VLBA
*                  data were flagged in this mysterious way, with other
*                  values no data were so flagged.  The resulting
*                  weights are mostly too high to display also.
*       COHER      to forbid single dish data.  Also corrected the vis
*                  array declaration from 2048 to MAXCIF.
*       Moved nowhere.

*9190.  September 25, 1996        ISTAB                    Eric
*       For some reason, this routine returned error 2 when the file did
*       not exist.  A simple non-existance should be no error especially
*       since that error code can mean other things and can percolate
*       well up a chain of routines.  But SOUFIL and FITLD tested for
*       not exist AND error=2 - fixed to test error zero.  Found that
*       UVCOP assumed that error=0 on simple non-existence for FQ tables
*       which will now be true.
*       Moved nowhere.

*9191.  September 25, 1996          DTSUM                  Eric
*       Changed the program to handle missing source, index, and antenna
*       tables usefully.  Changed it to allow single-dish data.
*       Moved nowhere.

*9192.  September 25, 1996         ISPEC                   Eric
*       Improved the format for printing coordinates and values and
*       added a test for magic blanks.
*       Moved nowhere.

*9193.  September 25, 1996           UJOIN                 Eric
*       Fix the alternate ref pixel number computation to match the freq
*       ref pixel computation.
*       Moved nowhere.

*9194.  September 26, 1996           RFI              Eric
*       Added BIF, EIF, BCHAN, ECHAN so that users may limit the number
*       of input correlators to 8 as required.  Changed the max antenna
*       etc. to standard parameters, fixed the baseline counting to
*       allow for autocorrelations, added tests for SD data to get the
*       BEAM rather than BASELINE random parameter, fixed up time
*       display formatting .
*       Moved nowhere.

*9195.  September 28, 1996         SPECR               Eric
*       Changed it to allow single-dish data.  Examined the FFT codes
*       and decided that they were excessively messy and replaced them
*       with one simpler subroutine instead of 6 or so (of which 2 were
*       not actuallt called).  The resulting answers did not agree with
*       the old version on normal vla data - but the fault was found to
*       lie with the old version.  At least when expanding the number of
*       channels, it got the right answer only for the first baseline,
*       first polarization, first IF.  After that it folded bits of
*       previous spectra into the present one and got wrong results -
*       reasonable values just seriously wrong!  Also it could not
*       handle compressed output although the underlying routines were
*       changed to have compressed output appear automatically.  In that
*       case anyway, the last channel appeared in channel 1 and the rest
*       were 0.  Users should notice that.
*       Moved nowhere.

*9196.  September 28, 1996        ISPEC                 Eric
*       Changed it to offer the option of plotting flux rather than
*       average brightness.  In blanked images these are not
*       proportional.
*       Moved nowhere.

*9197.  September 28, 1996        DTSUM                 Eric
*       This task also failed when there were flagged points within a
*       scan.  Changed it to handle end-of-file anyway.  If printing
*       stuff on each scan it can still get into trouble.
*       Moved nowhere.

*9198.  September 28, 1996         FIXWT                  Eric
*       It was throwing away the last XINC samples in the sorted data
*       set due to mishandling the end of file.  Fixed that and added a
*       DETIME parameter to allow the user to control the time interval
*       test for scan breaks.  A lot of deleted data were arising from
*       not computing across scan breaks.  Also fixed it to be willing
*       to compute in smaller than 2*XINC+1 sets if necessary.  This
*       will allow larger XINC to be preferable for noise computations
*       without deleting all the data.
*       Moved nowhere.

*9199.  September 30, 1996      Response to 0-byte table         Eric
*       Changed:
*       TABINI    Changed it so that ISTAB errors are treated as if the
*                 table had been "forgotten" rather than does not exist.
*                 This will allow 0-byte left overs to be deleted
*                 automatically.
*       ISTAB     Returned TABLE = true even for 0-byte files,
*                 non-existant files, etc.  They are not TABLES.
*       ZFI2.C    APLUNIX: Two tests on byte count versus file size were
*                 off by 1 since the former are 0-relative and the
*                 latter is a count.  Led it to allow reads beyond EOF a
*                 little, and to request 1 byte too many in such cases.
*                 0-byte files did not get trapped properly as a result
*                 but single-dish files (n*512 rather than n*1024 byte
*                 files) survived somehow.
*       Moved nowhere.

*9200.  October 2-4, 1996           SD checks                   Eric
*       Changed
*       UVPRT     Fixed to set "phase" to zero for autocorrelations.
*       UVPLT     Removed unused and not properly initialized Stkes
*                 conversion code.  Changed to set imaginary part of
*                 autocorrelation data to 0.
*       POSSM     Fixed so that it will not plot cross-correlations when
*                 asked to plot auto correlations.  Under some
*                 circumstances (i.e. multiple plots) it would be nice
*                 to do that, but the AUTO "logic" is too deeply buried.
*       CLIP      Fixed to leave out imaginary part of autocorrelator
*                 data and to test from negative to positive (also help
*                 file on this point)
*       UVFLG     Fixed to leave out imaginary part of autocorrelator
*                 data and to test from negative to positive (also help
*                 file on this point)
*       GRIDTB    Changed to enforce 0 for imaginary part of
*                 autocorrelations.
*       SPFLG     Changed to enforce 0 for imaginary part of
*                 autocorrelations in GRIDTC.
*       Moved nowhere.

*9201.  October 4, 1996          ABOUT helps               Eric
*       Ran SHOPH to check which ABOUT files needed updating.  Quite a
*       number so updated ZZ*.HLP for * =
*       ADVERB    ANALYSIS  AP        CALIBRAT   EDITING   GENERAL
*       HARDCOPY  IMAGE     IMAGING   INTERACT   MODELING  OOP
*       OPTICAL   PARAFORM  PLOT      POPS       PROCEDUR  SINGLEDI
*       SPECTRAL  TABLE     TASK      TV-APPL    UTILITY   UV
*       VERB      VLA       VLBI
*       Moved nowhere.

*9202.  October 7, 1996         $APLIBM/ZTP*               Eric
*       Kerry (I think) decided that pseudo-tape disk files should be
*       implemented in C for the IBM.  There is no reason to do that and
*       this prevented the FITS logical from being taken as a default.
*       Removed $APLIBM ZTPWAD.C ZTPCLD.C ZTPMIO.FOR ZTPMID.C ZTPOPD.C
*       Removed $APLSOL $APLLINUX $APL3090 $APLSUN versions of
*       ZTPWAD.FOR and made a $APLUNIX version since they all have -1
*       for an EOF error.
*       I stuck the old IBM things in APLCONTR.
*       Moved nowhere.

*9203.  October 7, 1996          BLSUM                     Eric
*       Changed help file and code to make plot come out on PRTLEV 1 and
*       details of X range only on PRTLEV 2.  Fixed units, axis labels,
*       Clean-beam conversion, ... to use INNAME's header rather than
*       the clip image's header.  Changed to allow 'Q   ' for quit too.
*       Moved nowhere.

 9204.  September 27, 1996     VLB Cookbook            Athol
        Updated COOK9.PS, COOK9.0.PS and COOK9.NDX to include
        recent polarization update.
        Moved from AOC AIPS 17 Oct by Eric.

 9205.  September 30, 1996        BSPRT                  Chris
        A new task to print BS tables in a more readable form.
        Moved from AOC AIPS 17 Oct by Eric.

 9206.  September 30/October 1, 1996    Lots             Pat
        Corrected the value of NPARMS or its equivalent in 24 separate
        tasks where the check_nparms.pl script found it to be incorrect
        (actually, that script merely reports the value; a manual
        inspection of the code is necessary to determine what the real
        value is, as there are several disparate methods for getting the
        parameters, GTPARM being the most common).  These were:
             ANCAL   ELINT   LISTR   PCCOR   SHOUV   UVFLG
             ASCAL   FILLR   LPCAL   PFPL1   SKYVE   UVGLU
             CLCOR   HORUS   MULTI   PRTAC   SLCOL   UVNOU
             CSCOR   IMLHS   PCAL    SHADW   SLFIT   XMOM
        A few of these were manually checked to make sure the correct
        value was determined, including WTMOD (where the overly large
        previous value managed not to fail under SOL only because there
        was a bunch of unrelated stuff in the INPARM common; hopefully
        they were in turn overwritten later as they were used), and
        PCCOR (old: 28, new: 140) where the CALSOUR adverb was used
        (declared as (4,1) in the code, but (4,30) or equivalent in
        POPSDAT). There may be more errors like this lurking in the
        system; about 3/4 of the tasks need to be rechecked -- by hand.
        Also, a handful need to have their help files modified to
        correct for incompletely specified adverbs (e.g. INVER instead
        of the correct INVERS).
*       Did not change ANCAL, PRTAC, ASCAL - they were right before.
*       Used CVX version of UVFLG, HORUS.
*       Corrected number of parameters to 229 + MAXFLD in LPCAL.
        Moved from AOC AIPS 17 Oct by Eric.

 9207.  October 3, 1996            FITLD.FOR            Phil
        The VLBA correlator software is being upgraded with several
        changes for SVLBI. The most important from FITLD's point of view
        is that the way the data are scaled is changed. Changes to FITLD
        to accomodate this are:
        (1) recognize when the correlator writes multiple dump rates
        (2) if multiple dump rates don't check for time order, set the
        output sort order to '**', declare a subarray condition.
        (3) read the correlator code version number. If > 4.16 then
        change the amplitude scaling. Prior to version 4.17 data were
        normalized by a global scaling factor, now they are normalized
        by the scaling factor multiplied by the data integration time.
        (4) If a subarray condition occurs write a keyword-value pair in
        the catalogue header. When concatanating to such a file set the
        'found subarray' logical automatically.
        (5) Trimmed the number of messages at FITLD start-up.
*       Re-inserted the changed BA/BP call sequences of CVX.
        Moved from AOC AIPS 17 Oct by Eric.

 9208.  October 7, 1996           LDGPS                  Chris
        Added the capability for handling files in the newer Los
        Alamos text format.
        Moved nowhere

 9209.  October 8, 1996            HOLGR                Mark
        Many changes, principally the development of a reliable phase
        unwrapping algorithm.  Also added some other enhancements
        triggered via XPARMS.
        Moved from AOC AIPS 17 Oct by Eric.

 9210.  October 10, 1996          FTPGET                Pat
        Modified the "ping" section so that if it seems to fail, the
        command is shown to the user, repeated, and the user given the
        option to continue (with caveats).  Improved the feedback
        messages somewhat, and implemented a scheme where the binaries
        on the ftp site are assumed to be GNU-zipped.  This will require
        either the user to have gunzip, or to use a version that I will
        provide for each architecture on baboon (aka aips.nrao.edu).
        Moved from AOC AIPS 17 Oct by Eric.

 9211.  June 14, 1996         $QPGNOT/CVEL.FOR         Athol
        CVEL has developed failure modes since recent buffer and
        BP changes (#8993). In particular, corrected an exception
        generated by incorrect use of BUFFC to expand compressed
        data. CVEL writes multi-source output and uses a non-standard
        form of UVGET, along with customized BP calibration routines.
        As a result, changes in BP calibration need to be propagated
        separately to CVEL. Overhauled CVEL so that this is no longer
        the case: i) consolidate CVEL.INC; delete BPDO.INC and
        FGDO.INC, using DSEL.INC instead; ii) replace calls to CVBPST
        and CVBAND by BPASET and DATBND respectively; and iii) fill
        in missing DSEL.INC variables.
*       CVLDOP was changed to use the center of the earth for VLB and
*       the antenna locations for other arrays.  (Changed by Athol but
*       not documented.)

     .  October 10, 1996        CVEL, $APLNOT/GETTIM        Phil
        The ATCA uses the same handedness of antenna coordinates as the
        VLA but when users used APARM(7) to specify this CVEL only
        recognized the VLA and so refused to run. Modified GETTIM to
        allow the ATCA and LBA as allowed arrays with a right-handed
        coordinate system. Also modified CVEL slightly so that when
        it is run on single-source files it doesn't print an error
        message about trying to find a CL table. Also updated the
        CVEL.HLP file to explicitly mention the ATCA and LBA.

        October 14, 1996     $QPGNOT/CVEL.FOR               Athol
        Take steps to preserve CATBLK if the BP table is sorted
        in BPASET. This could cause problems before with the
        signature that CVEL would fail on the first run but would
        work correctly on any subsequent attempt. The reported
        error in this case was that CHNDAT could not locate the
        frequency axis.
*       Restored some minor corrections to message levels, dropped
*       unused variables, restored the application of FQ selection.
        Moved from AOC AIPS 17 Oct by Eric.

 9212.  October 13, 1996        $APGNOT/USUBA.FOR           Athol
        Revise the automatic subarray identification algorithm to
        deal with inhomogeneous integration times, rounding errors
        in the accumulation time calculations and to provide an
        improved weighting function for separation in time when
        matching subarray entries. Also increase the subarray
        table size and improve the output format for OPCODE='SCAN'.
*       Removed 1600 or so TAB characters from the file.  All comments
*       had been retyped from correct to containing TABS!
        Moved from AOC AIPS 17 Oct by Eric.

 9213.  October 14, 1996        $APGNOT/ACFIT.FOR           Athol
        ACFIT has failed since the revisions made in #8983 above.
        Corrected: i) variable NUMTFQ was not set but needed in
        subroutine GETTPL; ii) only the first half of array TPLATE
        was initialised before the template spectrum averaging;
        iii) the template spectrum weight array LINWT was no longer
        initialised before averaging; iv) the template spectrum
        averaged in array TPLATE was shifted by one frequency
        channel, leading to incorrect gain solutions; v) re-instated
        check for bogus zero gain solutions in subroutine AUTOFT.
        On a unrelated point, set the parameter count to 279 before
        calling GTPARM. This latter problem found in automated
        checking of NPARMS values as documented in #9151 above.
        Moved from AOC AIPS 17 Oct by Eric.

 9214.  October 14, 1996   $QPGNOT/LPCAL.FOR & LPCAL.HLP  Athol/Kari
        New revision of LPCAL contributed by Kari Leppanen. This
        version allows feed calibration using linearly unpolarized
        calibrators. In this case a Stokes I model need not be
        provided via IN2NAME. The output format for the results
        and residuals has been modified accordingly.
*       Corrected number of parameters.
        Moved from AOC AIPS 17 Oct by Eric.

 9215.  October 15, 1996     $YPGNOT/POSSM.FOR              Ketan
        POSSM allows spectra that it plots to also be written to
        an OUTFILE.  Unfortunately, this OUTFILE always contained
        header info that described exactly what spectra are being
        written.  BPARM(10) is now a toggle that allows that
        header to be omitted.  This allows multi-IF,multi-FQID
        spectra to be written to the same OUTFILE without
        annoying header information to permeate the OUTFILE.
        Not writing out the header information could be dangerous
        if the USER forgets how the spectra were produced but the
        benefit of being able to easily plot together a long
        spectrum out of separate pieces is worth the risk.
*       Moved change into CVX version 17 Oct by Eric.

 9216.  October 15, 1996      Utility routines             Ketan
        Created LFILL to fill an array of logicals with a logical
        constant, CXFILL to fill an array of complex with a complex
        constant, and LCOPY to copy a portion of one array of logicals
        into another array of logicals.
        Moved from AOC AIPS 17 Oct by Eric.

 9217.  October 15, 1996      OMFIT.FOR             Ketan
        OMFIT has been rewritten almost from the ground up.  It
        is now an OOP routine so moved it from $APGNOT to $QPGOOP.  The
        syntax has been considerably cleaned up - but still needs work.
        Dynamic memory allocation will be added soon.  The
        multiple-field self-calibration option is now functional and has
        been rudimentarily tested.  The principle advantages to the
        average user are that OMFIT allows multiple component models
        where each component is of a different model type, and that
        OMFIT does not apply artificial restrictions upon the number of
        visibilities to which it will fit to.  The principle
        disadvantage of OMFIT is is its speed.  It could still use some
        tuning in that regard.  This update was as concerned with adding
        functionality as with testing previous functionality and
        conforming to AIPS coding standards.   I apologise in advance
        for the many places where it still does not conform to AIPS
        coding spec. - Ill get to it...
        Moved from AOC AIPS 17 Oct by Eric.

*9218.  October 18, 1996        EDITA                  Eric
*       Added EDFGAP to QEDIUTIL to apply a pre-existing FG table to the
*       table data that have been read into memory.  It flags them all
*       the way gone (weight 0) so that they cannot be unflagged by
*       anything.   Changed QEDIUTIL to decide whether the TANT column
*       of a TY table is valid and, if so, to use it.  Added comments
*       about these two changes to EDITA.HLP.
*       Moved nowhere.

*9219.  October 22, 1996            FILLM                Eric
*       Added code to use the new TANT to set data weights = 1/sigma**2
*       in 1/Jy**2.  Include an option to suppress this.  Mention option
*       in help file.
*       Moved nowhere.

*9220.  October 22, 1996          WHATSNEW                Eric
*       Update this help  file.
*       Moved nowhere.

*9221.  October 24, 1996          system                   Eric
*       Changed AIPSPATH in $AIPS_ROOT to define 15OCT96 as OLD and
*       15APR97 as NEW andd TST.  Changed $SYSUNIX/STARTPMON to use the
*       CVX  version of TPMON rather than the TST version (they are
*       still the same one hopes).
*       Moved nowhere.

*9222.  October 25, 1996         uv printing               Eric
*       Changed PRTUV, UVPRT, PRTSD to go through the data twice, using
*       the first time to determine maxima for u-v-w, amplitude, and
*       weight.  The formats for the data and the format for the weights
*       are then varied and, if needed, the weights are scaled by
*       integer powers of 10.  FACTOR was removed from UVPRT and both
*       help files had some comments added to remind people to use
*       NCOUNT.
*       Also changed UVDIF and UVFND to examine a few 100's of vis
*       initially to estimate these ranges and set the weight scaling.
*       The maxima continue to be taken and the format may shift to
*       handle large u-v-w and flux values as the data are processed,
*       but the weight scaling  will hold fixed.
*       UVFND required correction to work properly, especially for
*       single-dish data.
*       Moved nowhere.

*9223.  October 27, 1996      closure errors               Eric
*       Tried to improve the wording of BPASS.HLP to describe how to get
*       desirable closure error displays.
*       Changed CALIB to use MINAMPER, MINPHSER as it used to use
*       CPARM(3) and (4) and to use APARM(6) as a print control on the
*       printing of the individual errors or just summaries.  CPARM(3)
*       and (4) now apply to the average closure error for a solution
*       interval with no other print control (0 means do not do).
*       Changed VLACALIB.HLP and VLAPROCS.001 to set the cparms and use
*       minamper and minphser (CPARM(3) = MINAMPER/10...)  Removed
*       $RUNSYS/MYVLA.001 and $RUNSYS/TESTVLA.001 which were antique
*       versions of VLAPROCS.
*       Changed call sequence of CLBPA and CLBSNR to pass through all 4
*       closure error parameters in one array.  Changed UVUTIL to this
*       new call sequence (the error reporting is inhibited).  Changed
*       CLBSNR to handle all these new reporting chores.
*       Moved nowhere.

*9224.  October 30, 1996        UVDATA                Ketan/Eric
*       The subroutine OUVSLT was supposed to alter the uv data header
*       to match selection criteria in the input uv data.  But the
*       system does that opening the input, so a copy of the input
*       header to the output (UVDCOP) is all that's needed.  The call to
*       OUVSLT in OUVSCR is thereby commented out and deprecatory
*       remarks placed in the OUVSLT.
*       Ketan will move to AOC AIPS.

*9225.  November 1, 1996       I/O to XAS              Eric
*       The I/O to XAS is complicated by the assumption that the
*       low-level Z routines should handle the packing and unpacking of
*       the data.  Changed this to have the Y routines do the
*       appropriate packing/unpacking as "agreed" with XAS, allowing
*       each sub-unit to do its own thing.  This in preparation for
*       adding sub-units to handle TV parameters and image catalogs.
*       Changed:
*       DTVC.INC  INC: ISYNCH changed to integer (1 => hold, 0 no hold)
*                 Reorder words s.t. those forced by XAS come first.
*       SSS.TXT   DOCTXT: Updated and moved to DOCTXT from SYSSUN.
*                 In particular, documented all opcodes actually used.
*       YCRCTL    YSS: Added ZI16IL call
*       YGRAFX    YSS: Added ZI8IL call and cleaned up code
*       YGRAPH    YSS: Changed outdated precursor comments.
*       YHOLD     YSS: ISYNCH to integer
*       YIMGIO    YSS: Added calls to ZILI8, ZILI16, ZI8IL
*       YINIT     YSS: Changed order and number of parameters, added
*                      call to ZI16IL
*       YLUT      YSS: Added calls to ZILI8 and ZI8IL.
*       YOFM      YSS: Added calls to ZILI8 and ZI8IL.
*       YSCROL    YSS: not much
*       YSPLIT    YSS: added ZILI16 call although split points ignored
*       YTVCIN    YSS: changed dummy fills, tvgama and ngray values,
*                      added TVIMGC
*       YTVCL2    YSS: not much
*       YTVMC     YSS: not much
*       YTVOP2    YSS: not much
*       YWINDO    YSS: Changed order and number of parameters, added
*                      calls to ZI16IL
*       YZERO     YSS: not much
*       YZOOMC    YSS: not much
*       ZSSSX2    APLUNIX: dropped I16 -> I8 conversion of data, renames
*                 things bytes, changed read back length since now is
*                 bytes in msbyte, dropped list of operations since no
*                 special actions are now required.
*       ZSSSXF    APLGEN: dropped ZILI16 and ZI16IL calls, renamed
*                 variables to bytes.
*       ZILI8     APLGEN: create new conversion routine
*       XAS       YSERV: Changed the out structure to have a union of
*                 I*2 and char buffers and to fill one or the other
*                 depending on the command.  The former have to have
*                 htons applied.  Changed interogate function to return
*                 rearranged answers and more of them.
*       Changed YTVOPN, AU5D, BLTFIL, IAXIS1, IMANOT, TVLOAD, IWEDGE to
*       handle ISYNCH as integer.
*       Moved nowhere.

*9226.  November 4, 1996         More XAS                  Eric
*       Changed XAS to do more work for us: added operations to do
*       full initialization, area fill, vector generation, and character
*       generation.  Changed it to hold TVDC.INC common.  Changed it
*       also to allow the user to set the initial gamma correction.
*       Also changed:
*       YINIT    $YSS: Dropped all the calls to various Y routines
*                except YCINIT, added call to XAS to init,
*                added call to YDTVC.
*       YDTVC    $YGEN: NEW reads/writes dtvc.inc common from disk.
*       YDTVC    $YSS: NEW reads/writes dtvc.inc common from xas.
*       YFILL    $YSS: (new for YSS) changed from generic multiple calls
*                to YIMGIO to one call to XAS
*       YCINIT   $YSS: (new for YSS) corrected logic to have a 0 init
*                all of the disk and added code to call XAS to do this
*                based on TVIMGC.
*       YCHRW    $YSS: (new for YSS) have XAS do character string.
*       YCNECT   $YSS: (new for YSS) have XAS do vector.
*       YZERO    $YSS: changed opcode number to 24.
*       IWEDGE   $YSUB: Changed to call YFILL to zero things.
*       YTVOPN   $YGEN: dropped read of disk file for parameters and
*                added call to YDTVC and drop call to YWINDO.
*       YTVCLS   $YGEN: dropped write of disk file for parameters and
*                added call to YDTVC ('WRIT'.
*       OFMGAM   $YSUB: changed to allow changing gamma without
*                password.
*       GAMMASET $HLPFIL: changed description of ending with buttons C
*                and D.
*       XAS      $HLPFIL: added option to set initial gamma correction.
*       Moved nowhere.

*9227.  November 7, 1996        Image Catalog                 Eric
*       Move the image catalog to XAS as well.  Changed:
*       ZR32RL   This had bad errors - it flipped bytes in the input
*                buffer in the offset place, then swapped words in the
*                beginning of the input buffer.  It also neglected to
*                swap words for VAX F format.
*       ZR64RL   This had bad errors - it flipped bytes in the input
*                buffer in the offset place, then swapped words in the
*                beginning of the input buffer.  It also neglected to
*                swap words for VAX G format.
*       CATN2L   New routine to convert a catalog header of the image
*                catalog sort into FITS-standard word format and back
*                again.  A test task showed the errors in the Z
*                routines.
*       YCREAD   New to $YSS: Add option on TVIMGC value to do I/O with
*                XAS instead of disk.
*       YCWRIT   New to $YSS: Add option on TVIMGC value to do I/O with
*                XAS instead of disk.
*       YCOVER   New to $YSS: Add option on TVIMGC value to do I/O with
*                XAS instead of disk.
*       YFIND    New to $YSS: Add option on TVIMGC value to do I/O with
*                XAS instead of disk.
*       XAS.SHR  Add a catalog.c with an image catalog in xas.h to do
*                the init, read, write, overlay and find functions.
*       Moved nowhere.

*9228.  November 7, 1996        LIBR.DAT                 Eric
*       Fixed numerous LIBR.DATs to do APLSUB, APLsys, APLSUB, APLsys.
*       The 2nd APLsys (i.e. APLSOL) was missing sometimes and the
*       changes to code made YPGM at least fail.  Changed SYSUNIX,
*       SYSSOL, SYSALPHA (also removed excess APLNOTs which followed
*       only standard codes and added the GNU license)
*       The SYSIBM one refers to libraries only once.
*       Other system areas are not in CVX - so this may have to go in
*       more should these changes ever appear in AOC aips.
*       Moved nowhere.

*9229.  November 7, 1996     bad calls                   Eric
*       TVPL    Call to YCWRIT with a single 0 for the window.
*               Moved TVCLOS to after YCWRIT.
*       GFINIS  Call to YCWRIT with a single 0 for the window.
*       IAXIS1  Call to YCWRIT with a single 0 for the window.
*       Moved nowhere.

*9230.  November 9, 1996     TVCPS                      Eric
*       Changed TVCPS to use the zoom and scroll to decide which TV data
*       to read in what order.  Now it is much closer the "what you see
*       is what you get".  Also added code to test the data file header
*       against the image catalog header when the user asks to read the
*       data from the MA file.  With multiple computers able to write
*       the TV and its catalog, the disk number stored in the image
*       catalog may have little to do with the current AIPS session.
*       If the headers do not match exactly in the first 112 words,
*       TVCPS reverts to copying the screen (with a message).  Also
*       changed $YSUB/TVALUE (verb CURVALUE) and $AIPSUB/AU5B (verb
*       TVSTAR) to do the same data versus image catalog header check.
*       Upgraded the help files for CURVALUE, TVSTAR, TVCPS.
*       Moved nowhere.

*9231.  November 9, 1996     Guest accounts                      Eric
*       Changed ZWHOMI and TVDEVS.SH to refer to guest TV lock files
*       rather than guest image catalogs.
*       Moved nowhere.

*9232.  November 11, 1996      SSSIN, AIPSMTn                   Eric
*       Using service names in upper case letters exposes bugs in
*       operating systems.  Changed $APLUNIX routines ZSSSO2.C,
*       ZVTPO2.C, and ZVTPO3.C, $YSERV routines XAS.SHR and SSS.SHR,
*       $APLGEN routines ZMOUNT.FOR, ZTPOPR.FOR ZVTPRO.FOR and
*       ZVTPO2.FOR, and $SYSUNIX (and /primate_cvx/CVX) routine
*       TVDEVS.SH to name these services in lower case.
*       Also changed TPMON.
*       Moved to AOC AIPS by Pat later today.

*9233.  November 11, 1996         BPSMO                     Eric
*       Flagged data can lead to entries for a polarization or IF that
*       are blanked or at least have 0 weight.  With DOBAND 2 or 3,
*       these blanked sections of the full bandpass cause the
*       correspnding sections of the data to be marked bad.  This may be
*       correct - the cal is not known - but it may not be desirable.
*       Added an option (APARM(4) < 0) to "repair" the data, copying the
*       input to the output but replacing any 0 weight IF or
*       polarization with the results of the smoothing functions
*       specified in the rest of the APARM.
*       Moved nowhere.

 9234.  October 23, 1996         GPSDL                     Chris
        Added a test to protect against the cosine of azimuth going
        out of range near culmination due to rounding errors. Also
        fixed a formatting error in the .HLP file.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9235.  October 23, 1996         LDGPS                     Chris
        Now requires the user to enter the time offset of the
        GPS receiver (which is variable) rather than using a look-up
        table.  Also corrected the scaling of TEC data and modified
        the Los Alamos table reader to deal with variable amounts of
        spacing between columns.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9236.  October 23, 1996         CLCAL                     Pat
        Replaced old SORT routine with HSORT, a fast, public-domain heap
        sort.  Thanks to Fred Schwab for donating it.
        November 1, 1996       $APGNOT/CLCAL.FOR           Ketan
        Replaced matrix inversion code inside CLCAL with LAPACK
        equivalent code.  Also, cleaned up the subroutine FITSC
        quite a bit to make it more efficient.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9237.  October 24, 1996        CLCOR                      Leonia
        Some times ago I unified the concept of left (right) hand
        coordinate system for VLBA and VLA (OPCODE='ANTP').
        The relevant change was done at the help file. But comments
        at fortran codes of the subroutine ANTPOS stayed old and
        wrong. I brought to conformity the comments with the actual
        reality.
        November 2, 1996          $APGNOT/CLCOR.FOR       Athol
        Correct the amplitude factor used for the opacity
        correction for OPTYPE = 'OPAC'. The amplitude factor
        was the square of what it should have been.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9238.  October 24, 1996       $YPGNOT/ELINT.FOR           Leonia
        When there is only one antenna observing the given source,
        there is no opportunity to fit a polinom in the data and
        to determine a correction of the source flux. The task
        has died without an explanation meeting such data. I have
        fixed the problem excluding the flux correction for the case
        of the only antenna observing the given source.
        October 28, 1996       $YPGNOT/ELINT.FOR           Leonia
        The task excluded undefined points in the input SN table
        during fitting but not during plotting of the data. It
        happened because the data were multiplied by the gain
        factors before plotting  and as a result the points were
        no longer equal to FBLANK. Corrected this by not scaling
        FBLANK values.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9239.  October 25, 1996       $APLPGM/PRTTP.FOR           Gustaaf
        At some time during the eighties, VLBI data sets had a total
        of 0 antennas in their headers. PRTTP checks for the type of
        tape; part of the test for an archive tape is whether the
        number of antennas is between 1 and 27. Finding 0, PRTTP
        assumed it to be NOT an archive tape, and the listing would go
        horribly wrong. I now modified PRTTP to allow a total of 0
        antennas as well.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9240.  October 28, 1996       FILLM.HLP                   Gustaaf
        Added some detailed explanation on the conventions of time
        stamps in FILLM and AIPS uv data in general.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9241.  October 29, 1996       $APGNOT/BLOAT.FOR           Athol
        Copy multi-Stokes data, as requested by NRAL. Leave the
        infrastructure for now, which makes some assumptions and
        needs work.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9242.  October 30, 1996          OMFIT                 Ketan
        Added dynamic memory allocation to improve execution times.
        Also, finally, added capability of processing polarization
        data as well as fitting multi-channel components.  Still
        lots to do - but not today!
        Much revised help file - thanks to Michael Rupen's efforts.
        Documented new model components.  Made some features
        simpler to understand.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9243.  October 30, 1996       $APGNOT/MK3IN.FOR & .HLP    Athol
        Implement new fractional bit shift correction as derived and
        coded by Kari Leppanen (JIVE) in the course of high dynamic
        range imaging tests using the EVN.  The FBS correction now
        includes amplitude corrections if desired. In addition the band
        centre for the existing phase correction was found to be in
        error by one half of a channel, and has been corrected.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9244.  October 30, 1996          $APGNOT/FITLD         Phil
        Made a minor but vital fix needed for the new correlator code.
        The amplitude scaling change I added on Oct 3 did not work if
        files were skipped on tape since a crucial parameter was reset.
        Also added a much more minor change in correcting the reference
        pixels when IF and channel selection were used.
        November 11, 1996          $APGNOT/FITLD          Phil
        I finally added weight-based flagging due to pleading by some
        VLBA users. The implementation method is not totally general in
        that I do not write an FG table (is complicated if wish to do so
        efficiently). The data are permanently flagged since they are
        not copied from tape to disc if the visibility weight in any IF
        drops below the specified threshold. This was deemed adequate by
        several VLBA users.
        Also updated FITLD.HLP.
*       Re-inserted the changed BA/BP call sequences of CVX.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9245.  October 30, 1996        VLB DDT                 Athol
        Minor change to DTCHK to compare angles in the correct quadrant.
        Also add new file $RUNSYS/DTSIM.FR_1 for the VLB DDT.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9246.  November 1, 1996        $DOCTXT/USERNO.LIS      Ketan
        Wrote PERL script to make updating the AIPS user numbers list
        easier.  In the process, reformatted the file and made it a bit
        easier on the eye.  Now, to add new user numbers, only the first
        two columns need be filled in. The script automatically figures
        out what belongs in all the rest of the columns.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9247.  November 1, 1996          BLING                   Chris
        Added protection against overflow problems in the SNR
        calculation.  Also removed a lurking PRINT statement left over
        from debugging.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9248.  November 3, 1996     $SYSPERL/check_version.pl    Jeff
        Added Perl version 5.003 to "known-good" list of Perl versions,
        eliminating the pesky warning at the AOC.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9249.  November 4, 1996      PCCOR.FOR, PCCOR.HLP         Leonia
        The new adverb CUTOFF have been added. The adverb allows
        to swich off the cable delay. It is useful for geodesy
        people. Additionnally the task has been simplified
        excluding the referencing to the reference antenna at the
        stage of ambiguaty resolving of the target sources data.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9250.  November 5, 1996      $INSUNIX/INSTEP1             Pat
        Fixed some typos (missing quotes) and changed several things.
        Added a new logging facility (what happens now goes in
        INSTEP1.LOG for the most part), always build PRINTENV from the C
        program, use gmake for XAS if we can, remove problematic
        LD_LIBRARY_PATH and LD_RUN_PATH setting, replace with warnings
        if these variables are set for SOL, use UNSHR to unpack XAS
        always, modified the tape device (TPDEVS.LIST) part and added a
        section to take care of setting up the TPHOSTS file.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9251.  November 11, 1996          BLAPP                       Chris
        Inserted code to ensure that the BS table is sorted in time
        order before entering the gridding loop (which assumes that
        times are non-descreasing).
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

 9252.  November 12, 1996     $SYSPERL/hlpitgen.pl         Jeff/Pat
        This was in the aipssrc area which is not distributed with AIPS,
        and anyone adding tasks to AIPS will need to generate the
        HLPIT.LIS file in $HLPFIL after adding the new help file.
        Currently needs perl 5 though this can be changed with a little
        work.
*       Moved from AOC AIPS (15APR97) to CVX by Eric 12 November.

*9253.  November 12, 1996                  Help files           Eric
*       Changed ZZ help files for ABOUT on the subjects:
*       ANALYSIS   CALIBRAT   EDITING     EXT-APPL   HARDCOPY
*       MODELING   OOP        TABLE       TASK       UV
*       VLA        VLBI
*       Also HLPIT.LIS using the perl5 tool.
*       Moved nowhere.

*9254.  November 14, 1996        AOC oops                 Eric
*       Fixed:
*       ZLASCL   $SYSUNIX - used 'DEC" when "ALPHA" was supposed to be
*                used
*       CLCAL    $APGNOT - had a line that was too long so did sqrt
*                (real + imag*imag) rather than real**2 => f.p.e.
*       Moved to AOC aips this date by Pat.

*9255.  November 15, 1996          PRTAC                  Eric
*       Changed it to regard real times of 0.0 with cpu times <= 1 as
*       "good" rather than aborts (by setting real = 1.1*cpu).  The
*       really fast things these days get reals of 0 a lot due to the
*       integer seconds of ZTIME.
*       Moved nowhere.

*9256.  November 15, 1996          VLAC                  Eric
*       Fixed up VLACLOAD.001 to use iMAGR rather than HORUS and to
*       support FITS disk files.  Changed comments and line lengths in
*       VLACEXEC.001, VLAC.HLP, and VLACSAVE.HLP.  Also put new closure
*       reporting into CALIB portion.
*       Moved nowhere.

*9257.  November 18, 1996          Print uv tasks           Eric
*       In testing VLAL, the print tasks all blew up since I did not
*       test for the max (abs (weight)) over all data being 0.0.  Fixed
*       PRTUV, PRTSD, UVPRT, UVDIF, and UVFND. Corrected UVDIF handling
*       of compressed data - the scaling subroutine caused the
*       increments INCS etc to be multiplied twice by 3.  Changed UVDIF,
*       UVFND, PRTSD to set the min weight only for weights not 0.0 and
*       changed UVDIF, UVFND to examine 15000 rather than 1000 vis's for
*       scaling.
*       Moved nowhere.

*9258.  November 19, 1996          VLAL                    Eric
*       Fixed up VLALLOAD.001 to use IMAGR rather than HORUS and to
*       support FITS disk files.  It erroneously thought there were 2
*       IFs in the data - fixed that.  Cleaned up VLALEXEC.001 and the
*       help files VLAL and VLALSAVE.
*       Moved nowhere.

 9259.  November 13, 1996     $YPGNOT/IRING                    Ketan
        IRING only plotted the incremental intensity distribution if
        requested.  I added the option to plot the cumulative intensity
        distribution as well - by user request.  Also, added an old
        modification to IRING that I had lying around.  This
        modification allows the user to select a range of azimuthal
        angles over which to compute the intensity distributions.
*       Moved from AOC aips by Eric 19 November.

*9260.  November 21, 1996              QCLEAN                  Eric
*       Corrected a bug that caused component restoration to fail when
*       there were too many components to fit in the AP.
*       Moved nowhere.

*9261.  November 27, 1996          single dish                 Eric
*       PRTSD   Dropped an uninitialized counter that was not needed and
*               blocked proper printing now that there are 2 reads
*               through the data.
*       BSCOR   It ignored the sign of the axis increment and hence
*               produced negative images with the new + increment.
*               Fixed to use the sign correctly.
*       Moved nowhere.

*9262.  December 2, 1996           XBASL                 Eric
*       Corrected handling of blanks, buffer length for string, logic
*       controlling what is called (it made tons of ZTKCLS error
*       messages), etc.  It should be friendlier now.
*       Made similar fixes to XPLOT and XGAUS.
*       Moved nowhere.

 9263.  November 21, 1996          MAKE.MNJ                 Pat/Shoshana
        This script was not doing anything with the UPDCONFIG file, and
        it should at least make sure it's in $SYSLOCAL and copy it if
        not.  It should not put it in $TST/$ARCH/UPDATE/ as it was
        doing.
*       Moved from aoc aips by Eric 2 December.

 9264.  November 25, 1996        $YPGNOT/FRMAP            Leonia
        The maximum number of baselines (100) was not enough to use the
        task for the VLA data when all 27 antennas provide the data. The
        relevant parameter was increased to 400. The format of print a
        baseline number was changed from I2 to I3 to print baseline
        numbers more than 99.
*       Moved from aoc aips by Eric 2 December.

 9265.  November 26, 1996       $INSUNIX/INSTEP1            Pat
        Allow zero disks per host to be legitimate; some sites use the
        .dadevs mechanism exclusively so zero is the right answer for
        these hosts.  Also comment out the host/IP verification code as
        it was not working (regexps in case statements are extremely
        lobotomized).
        Moved nowhere yet, maybe to the patch area if I get complaints..

 9266.  November 28, 1996       VLB DDT data files          Athol
        Add several new VLB DDT data files to $RUNSYS, namely
        DTSIM.BPASS_1, DTSIM.BPASS_2, DTSIM.CALIB_1 and DTSIM.CALIB_2.
*       Moved from aoc aips by Eric 2 December.

*9267.  December 5, 1996             Speed parameter             Eric
*       In order to scale time delays etc by the speed of the local
*       computer, one must have a parameter to tell the software that
*       speed.  Therefore:
*       DDCH.INC   Add AIPSMK and reduce DCHDUM by 1.
*       ZDCHIN     Set and pick up AIPSMK from disk (238).
*       SETPAR     Add question 35 to set the parameter.
*       SETSP      Add question 35 to set the AIPSMK.
*       AIPSB      Delay at start = 10/aipsmk.
*       QMNGR      Delays scaled by AIPSMK more or less.
*       BATER      TASKWT delay scaled by AIPSMK.
*       AU2        TASKWT delay scaled by AIPSMK, waittask verb scaled
*                  by sqrt (aipsmk).
*       AU5        Waits for clearing graphics and TV memories deleted.
*       AUA        SUBMIT wait scaled by AIPSMK.
*       DLINTR     TV cursor read delay increased a bit and then scaled.
*       YCURSE     $YGEN: Read loop for button scaled.
*       Moved nowhere.

*9268.  December 6, 1996           QMNGR                          Eric
*       Batch has not worked - QMNGR did not get the upgrade for record
*       numbers and TD file name that the other task initiators all got.
*       Sigh..
*       Moved from Tucson this date.

*9269.  December 6, 1996          SD                             Eric
*       Changed IAMOK to allow lower case letters in file names and
*       OTFIN to avoid truncation the last character of the OTF file
*       name in a display line.
*       Moved nowhere.

*9270.  December 10, 1996             QEDIUTIL                   Eric
*       Found that EDITR did not treat autocorrelations properly - it
*       needs to take the real part rather than the sqrt (re*re + im*im)
*       even if the imaginary is carefully kept 0.  The sign must be
*       kept.  Corrected 3 places - 2 input uv data sets and the running
*       difference computation.
*       Moved from Tucson this date.

*9271.  December 10, 1996              OTF                       Eric
*       OTFUV and OTFBS could get in trouble if no data were found of
*       the correct type.  Added a test, message, and error return in
*       the first data-reading routine.
*       Moved from Tucson this date.

*9272.  December 10, 1996             SDLSF                     Eric
*       Corrected bug.  Default value of flux test was 1.e20, which,
*       when squared, overflowed.  Changed it to 1.e10.
*       Moved from Tucson this date.

*9273.  December 13, 1996          TV Editing                   Eric
*       Changed QEDIUTIL to correct an addressing bug in handling the
*       2nd uv data set which I introduced 3 days ago.  Also corrected a
*       bug on ABORT exits from uv editing with 2 data sets - the FG
*       table was updated as if the EXIT exit had been taken.  Improved
*       QEDIUTIL to use a new option in the TVDEVICE.FOR to hold TV
*       updates and then release them all at once.  This speeds things
*       up a lot although it does make things more jerky.
*       Moved from Tucson this date.

*9274.  December 13, 1996            BSTST                      Eric
*       Added options to have the two throws have different lengths,
*       heights, and widths.  Also the help file of course.
*       Moved from Tucson this date.

*9275.  December 13, 1996          typos in helps               Eric
*       Fixed typos in helps: EDITR, EPOSWTCH, OTFUV, OTFBS.
*       Moved nowhere.

*9276.  December 13, 1996            ZMEMR2.C                 Eric
*       Kitt Peak's locura (Sun OS 4.1.4) requires the addition of
*       stddef.h to define NULL.  Why did baboon not require it?
*       Moved from Kitt Peak this date.

*9277.  December 17, 1996           TVDEVS.SH                Eric
*       Added TVALTS="" for everybody.  Otherwise it was not being
*       defined properly for sites other than CV and the AOC.
*       Moved from Tucson this date.

*9278.  December 17, 1996         UPD mailing                Eric
*       Changed UPDCONTROL, UPDERROR, UPDREPORT in $UPDUNIX to include
*       SUN4 in the list with LINUX and IBM of mailers that use the -s
*       grammar for the subject.
*       Moved from Kitt Peak this date.

*9279.  December 18, 1996        HELP EXPLAIN                Eric
*       Changed these two verbs to use TASK if there is no immediate
*       argument and to default to HELP only when TASK is blank.
*       Updated AU1A.FOR and the two help files.
*       Moved nowhere.

*9280.  December 18, 1996          PRTSD                     Eric
*       Cleaned up the coordinate printing to avoid 60 arc sec and the
*       like.
*       Moved nowhere.

*9281.  December 19, 1996        SD imaging                    Eric
*       Discovered a significant error in gridding single-dish data with
*       circular functions.  Effectively, the convolution function in
*       QGRD6 and QGRD7 was addressed half a pixel off in boith X and Y.
*       This caused sources to move left and up by 0.5 pixel.  The
*       convolving function would then not be exactly as expected
*       either, but it would have been symetric about the new center.
*       Moved from Tucson this date, should go to aoc aips and patch
*       area.

*9282.  December 19, 1996         keywords                    Eric
*       Changed XBASL to copy header keywords.  Needed by beam switched
*       continuum imaging.
*       Moved nowhere.

*9283.  December 19, 1996           SDMOD                     Eric
*       Changed it to subtract from, rather than add to, the data or
*       replace the data with the model.  Added the ability to read an
*       image with interpolation as the model.
*       Moved nowhere,

*9284.  December 20, 1996         Remote systems               Eric
*       Changed START_AIPS and TVDEVS.SH so that they send remote shell
*       commands with $AIPS_ROOT not yet translated.  In that way, the
*       aips root can be completely different on the remote machine and,
*       so long as non-interactive logins know this variable, TV and TP
*       devices can still be started.  There will be some hickups if the
*       two systems know the remote machine by different names, e.g.
*       dietcoke thinks of itself as "dietcoke" while CV machines used
*       to think of it as "dietcoke.tuc.nrao.edu".  These hickups will
*       mean that a couple of extra messages appear and that XAS will
*       not use shared memory.  The latter is significant enough that
*       local system name tranlation tables should include all commonly
*       used remote machines.
*       Moved nowhere.

*9285.  December 23, 1996             OTFBS                   Eric
*       Corrected a bug - the last buffer that was flushed was the same
*       for both output files.  The - output should have had its own
*       data!
*       Moved from Tucson this date.

*9286.  December 23, 1996            BSDIF                   Eric
*       For editing the beam-switched data, the best data set to use
*       would be the differenced data.  Wrote a FUDGE clone to
*       difference two data sets rather blindly to produce such a data
*       set.
*       Moved from Tucson this date.

*9287.  December 23, 1996         QEDIUTIL                  Eric
*       Added message "Plotting:" to plot routines.  With the wait to
*       show the plot only when it is done, some indication of what is
*       happening is needed.
*       Moved nowhere.

*9288.  December 23, 1996           WTSUM                  Eric
*       Changed it to allow looping from INSEQ:IN2SEQ and IN3SEQ to
*       IN3SEQ+IN2SEQ-INSEQ.  Then many get added in one go.
*       Moved nowhere.

*9289.  December 27, 1996       INTERP, OHGEO              Eric
*       Changed $QOOP/QINTER to $APLOOP/INTERP by changing from using
*       the AP to using dynamic memory.  Now, all image sizes can be
*       done if your computer has enough swap space and the large AP
*       memory is not used for small images.  Corrected IMGHGE to not
*       take an image SCALE of 1.0 to mean that the full W-corrections
*       et al. are needed.  Changed all to allow 8192 output rows and to
*       provide for a parameter called 'RELIABLE' to control what
*       fraction of the kernel must have valid values before the output
*       is regarded as valid.  The default is 0.333, the previous
*       hard-coded value.  Changed OHGEO to reassign the APARMs (down by
*       1) and use REWEIGHT to specify the kernel size and this new
*       fraction.
*       Moved from Tucson this date.

*9290.  December 27, 1996            OGEOM                 Eric
*       New task: Does LGEOM using the OOP interpolation routines.
*       Changed HGEOM, GEOM and LGEOM help files to suggest that users
*       use OHGEO and OGEOM (resp.) since they handle edges and blanks
*       properly.  LGEOM and HGEOM propogate blanks and edges onto good
*       areas by the width of the interpolation function, while the OOP
*       tasks can even fill in small blanked regions and extrapolate a
*       little.
*       Moved from Tucson this date.

*9291.  December 27, 1996          LIBR.DAT                    Eric
*       Changed $SYSUNIX, $SYSSOL, $SYSSUN, $SYSIBM, $SYSLINUX,
*       $SYSALPHA LIBR.DATs to not use directory logical names in
*       comments (the OOP tasks did).  Also $SYSSOL and $SYSSUN versions
*       of LIBR.DAT.SHARED.  The Linux one needed other fixes, done
*       earlier to the others, for poor logic in the order and for
*       addition SYSLINUX.
*       Moved to SYSLOCAL in advance for Tucson and Kitt Peak.

*9292.  January 7, 1997            BSCOR                      Eric
*       Pulled the BSCONV subroutine from the old BSCOR to make it a
*       library routine.  Corrected BSTST to drop its version of BSCONV
*       and to do the throws with the right sign.  (A negative throw
*       in cells produces a peak to the right of the object not the
*       left.)  Also corrected an off-by-1 plotting error.
*       Added subroutine IMGBSC to IMAGE.FOR, ARRBSC to ARRAY.FOR to
*       handle beam-switched imaging.  Added routines RVBBLS, RVBLS,
*       RVBBSC, RVBSC for baseline subtraction and convolution to
*       VECTOR.FOR.
*       Changed BSCOR to an OOP task to invoke IMGBSC.
*       Moved nowhere.

*9293.  January 13, 1997         SD stuff                     Eric
*       Changed:
*       OGEOM    Fixed sign of rotation handling.
*       QUVUTIL  Change OSDIMG to reset status at end of imaging.
*       Moved nowhere.

*9294.  January 16, 1997         system fixes                 Eric
*       Changed $SYSSOL/CCOPTS.SH, $SYSUNIX/FDEFAULT.SH, $YSERV/XAS.SHR.
*       They had non-standard references for compilers which were no
*       longer needed in the first two (and were explicitly CV) and
*       which was wrong for XAS outside of CV.
*       Moved to AOC aips yesterday.

*9295.  January 17, 1997          SDLSF                     Eric
*       Corrected time test to use absolute value.  Data out of time
*       order cause the program to overwrite itself otherwise.
*       Moved nowhere.

*9296.  January 29, 1997         AIPS                       Eric
*       The adverbs IN4DISK, TDISK, MDISK, DDISK were left out of the
*       system adverb lists in AU1A and AU2.
*       Moved nowhere.

*9297.  February 1, 1997            SCMAP                    Eric
*       Changed SCMAP.FOR:
*       1. To do the statistics before the self-cal TV interaction,
*          thereby giving further data to use during it.  Also keep
*          track of the last 5 rms's telling the user.
*       2. To pick up MAXPIXEL on TELLs.  It was ignored.
*       3. To smooth (and fill in blanked) solutions using a boxcar of
*          width APARM(10)
*       4. Added options to ABORT TASK, switch to A&P, and SET
*          PARAMETERS (question-and-answer for all TELL parameters plus
*          some).
*       To do the smoothing:
*       1. Changed UVUTIL giving it a SLFSMO.
*       2. Wrote SNSMOO, SMBOX, SMGAUS, SMMWF to do the smoothing, where
*          the latter do 1-D weighted smoothing by a boxcar, Gaussian,
*          and alpha-clipped boxcar (pure boxcar to pure MWF).
*       Changed QCLEAN to add an ABORT TASK option.
*       Changed HLPCLEAN, HLPSCMAP, IMAGR, and SCMAP help files to
*       describe all this.
*       Moved nowhere.

*9298.  February 1, 1997            XAS...                  Eric
*       Changed XAS:
*       1. To increase the character size if the TV display is > 2000
*          pixels in X.
*       2. To call a local version of zssslk when the socket disappears
*          abruptly (and of course that local version which just does an
*          unlock).
*       Changed other:
*       1. YGEN/YDTVC - added op = OPEN and CLOS to do the disk open and
*          closes .
*       2. YGEN/YTVOPN - changed to call YDTVC to open rather than doing
*          the disk lock file at this level
*       3. YGEN/YTVCLS - changed to call YDTVC to close rather than a
*          simple ZCLOSE at this level.
*       4. YSS/YDTVC - added ops OPEN and CLOS to call ZSSSLK.
*       5. YSS/YTVCL2 - send normal close to XAS (we were allowing the
*          broken socket to do it even on normal termination).
*       6. APLUNIX/ZSSSX2.C - mask error when OP=12; when close is done
*          there is no return from XAS.
*       7. APLGEN/ZSSSLK - (new) opens aips device, calls zsssl2, close
*          aips device.
*       8. APLUNIX/ZSSSL2.C - (new) opens a socket to "ssslock", sends
*          an unlock or lock command, reads the response, closes socket.
*       9. AIPNOT/TVSERV - new program to run ZTVSRV.
*       10. APLUNIX/ZTVSRV.C - message-server like to keep track of
*           locking on up to 35 TVs.
*       11. SYSUNIX/TVDEVS.SH - change Unix socket comment to say they
*           are not supported, change guest TV message.
*       12. SYSUNIX/XASERVERS - add code to start TVSERV.
*       13. APLGEN/ZTVSRV and APLGEN/ZSSSL2 - fortran dummy routines
*       14. APLGEN/ZWHOMI - no longer checks ID files for assigning a
*           guest account
*       15. APLGEN/ZDIE - no longer checks for and calls ZGUEST.
*       Moved nowhere.

 9299.  December 3, 1996        DOPOL                       Athol
        Implement new polarization correction modes DOPOL=2 and
        DOPOL=3, to allow second order polarization corrections when
        using the linear D-term approximation within AIPS. The mode
        DOPOL=3 applies more rigorous flagging, removing visibility
        points with any missing polarization correlation pairs. The
        mode DOPOL=2 applies the same second-order correction but
        makes several approximations for any missing polarization
        correlation pairs when computing the correction matrix. The
        mode DOPOL=1 makes the same first-order correction as before.
        The new modes are currently implemented only for 'VLBI'
        polarization calibration within AIPS, and have no effect on
        other solution types (eg. VLA or orientation-ellipticity).
        The second-order corrections have recently been shown to
        be important when correcting EVN data which may have
        individual D-term amplitudes as high as ~20% in isolated
        cases (as reported by K. Leppanen/JIVE, who submitted
        private code used to correct this effect). Note that 2nd
        order corrections have always been applied for the
        orientation-ellipticity VLBI polarization model in AIPS.
        Made the following changes:
          $INC/DSEL.INC - changed DOPOL from logical to integer.
        Change DOPOL handling from logical to integer in:
          $APLNOT: DATGET, DGHEAD, FNDPOL, SELINI and UVGET.
          $APLOOP: CALEDIT.
        Further changes in $APLNOT:
          DATPOL - add check for missing cross-hand correlations;
                   use approximations where necessary; If DOPOL=3
                   flag all data with any missing polzn. pairs;
                   polzn. correction matrix was only computed
                   every 0.1 min or when the parallactic angle
                   changed by more than 2 deg - this led to
                   a 2 deg phase sawtooth in the RL,LR data at
                   times; change to update the matrices for
                   any change in time or parallactic angle -
                   the computational overhead seems reasonable.
          VLBPOL - implement the new 2nd order elements of the
                   polzn. correction matrix for DOPOL > 1. Do
                   not assume low linear source polarization.
        Change DOPOL handling from logical to integer in:
          $APGNOT: DECOR, LISTR, SHOUV, SPLIT, UV2TB, UVFIT, UVPRM,
                   UVPRT and SPCAL.
          $APGOOP: MAPBM.
          $QPGNOT: BPASS, HORUS and CPASS.
          $QPGOOP: IMAGR and OMFIT.
          $YPGNOT: POSSM, FRPLT, UVPLT, VBPLT, CLPLT, FRMAP and
                   VPLOT.
        Recompiled/linked all affected tasks/libraries.
*       Made the DOPOL changes in the CVX versions of (.FOR):
*          UVPRT  BPASS  CPASS  IMAGR  POSSM  UVPLT  SELINI  UVGET
*       Also made the DOPOL change to CVX version DSEL.INC
        Update .HLP files affected by #9199. These include:
          DOPOL, DECOR, LISTR, SHOUV, SPLIT, UV2TB, UVFIT,
          UVPRM, UVPRT, SPCAL, MAPBM, BPASS, HORUS, CPASS,
          IMAGR, OMFIT, POSSM, FRPLT, UVPLT, VBPLT, CLPLT,
          FRMAP and VPLOT.
*       Made the DOPOL changes in the CVX versions of (.HLP):
*          BPASS  CLPLT  CPASS  IMAGR  POSSM  UVPRT  VPLOT
*       Other CVX changes:
*          Fixed up the wording of DOPOL.HLP.
*          Noting that DOPOL = 0.eps - 0.5 will be false with the AOC
*             code, added tests for this to make DOPOL=1 in non-OOP code
*             and added warnings to the help files for OOP (IMAGR,
*             OMFIT, MAPBM)
*          Tried to make the typing of FNDPOL a bit more standard.
*          Dropped obsolete BPNAME from HORUS and SPCAL.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9300.  December 5, 1996     $YPGNOT/VPLOT.FOR, CLPLT.FOR  Leonia
        Only four symbols have been allowed to use in IN2CLASS,
        because the other two are reserved for the images number.
        It has not arisen any problem in standard cases, because
        the CLASS of the output images of a CLEAN procedure uses
        usially only four of six symbols (ICLN, RCLN ...).
        But sometimes people desire to rename the CLASS of the image,
        using all six symbols. In this case the last two symbols
        are substituted by an image number and as a result the
        image can not be found by subroutine MAPOPN and plot of
        the model is not being plotted. To overcome the problem
        the tasks provide now the substitution of the last two symbols
        only if more than one image is used for the model.
*       Made CVX fix to NPARMS (using MAXFLD parameter).
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9301.  December 9, 1996     VLB DDT                      Athol
        Revise $APGNOT/DTSIM.FOR and $APGNOT/DTCHK.FOR to support
        several new features: i) instrumental polarization errors;
        ii) multiplicative gain errors; iii) rest frequencies and
        LSR velocities in the SU table and catalog header; and
        iv) baseline-dependent integration times. Also updated
        $HLPFIL/DTSIM.HLP and added new DDT data files DTSIM.DOPOL_1
        and DTSIM.DOPOL_2 to $RUNSYS. Changes to $APLNOT/DTPARM.FOR,
        $APLNOT/DTCALS.FOR and $INC/DTPM.INC as part of this update.
        December 10, 1996    $RUNSYS/VLBDDT.001          Athol
        Preliminary script to check some VLB tasks using simulated data.
        Also added .HLP file.
        December 18, 1996      $APLNOT/DTPARM.FOR        Ketan
        DTPARM did not properly initialize the arrays containing
        the source model information.  This resulted in faulty data
        set generation when using multiple source components in DTSIM.
        December 18, 1996      $APGNOT/DTSIM.FOR         Ketan
        The noise calculation in DTSIM was faulty.  The 'uniform
        Gaussian deviate' generated in the DTSIM subroutine ADNOIZ was
        being generated with unit amplitude.  Thus only phase noise was
        being generated, no amplitude noise at all.
        December 24, 1996     $APGNOT/DTCHK.FOR            Athol
        Clean up an erroneous ATAN2(0,0) that was caught by the Dec
        Alpha.
        January 17, 1997      OVLBI simulator          Leonia/Athol
        Add support for new perturbed orbit delay and phase errors.
        New routines written to compute the orbit perturbations are
        $APLNOT/TAUORB.FOR and $APLNOT/ORBERR.FOR. New utility
        routine $APLNOT/DTMATC.FOR used by DTCHK and DTSIM was added
        to match indices in the simulated data common blocks. The
        calling sequence of $APLNOT/DTCALS.FOR was changed with
        supporting modifications in $APGNOT/DTSIM.FOR and
        $APGNOT/DTCALS.FOR.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9302.  December 10, 1996    $APLOOP/UVUTIL               Ketan
        Fixed IF/channel selection in UV2SCR.  UV2SCR invokes UVGET and
        later, OUVSCR which then invokes OUVSLT.  Both UVGET and OUVSLT
        attempt to check channel/IF selection.  Before calling OUVSCR,
        the channel/IF selection parameters are reinitialized in the
        input UV object - they are restored after return from OUVSCR.
        This seems to fix the problem of channel/IF selection being
        applied twice.
*       Applied this fix only to the CVX version of UVUTIL.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9303.  December 10, 1996    $QPGOOP/GPHAS                Ketan
        Added new options for REFANT selection, fixed model division.
        Previously the REFANT was created as a new VIRTUAL antenna.
        Now, the REFANT can be specified explicitly, or taken to be the
        most commonly occuring REFANT in the CL table.  Model division
        would fail if a source name was not specified, even if only one
        source existed in the file.  Now, a source name is required for
        CC model division unless the data file is a single source data
        file.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9304.  December 10, 1996    $APGNOT/FRING                Ketan
        FRING now implements the ORIGIN keyword for single source data
        files.  When CALIB and BPASS run on single source files, they
        add the ORIGIN keyword to the output SN table.  Fring has now
        been modified to do this as well.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9305.  December 12, 1996    $APLNOT/GETDEL.FOR          Athol
        Change GETDEL to deal with IM table access that may not be in
        time sequence. Will backspace IM table records in this case.
        Also, do not compare subarray numbers when searching for IM
        table entries; match source id., freq. id., antenna no. and
        time only.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9306.  December 12, 1996    $APGNOT/INDXR.FOR           Athol
        Subroutine WRITCL was not calculating the number of CL
        entries correctly. An extra entry was written, which for
        short scans, may have fallen outside the scan boundary.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9307.  December 17, 1996     $QPGNOT/CVEL.FOR           Phil
        Before all the buffer changes were made earlier in the year the
        call to TABSRT for the CL table used KBUFSZ to set the size of
        the scratch buffer. During the changes this was modified to call
        UVBFSZ but no check was made that UVBFSZ was set under all
        circumstances. If there is no FG table (and hence no FG sorting)
        then the call to set UVBFSZ was not made and so the CL sorting
        failed. Fixed so that UVBFSZ is always set, whether an FG table
        is present or not.
*       Applied this fix only to the CVX version of UVUTIL.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9308.  December 18, 1996      $APGNOT/UVCOP.FOR         Ketan
        UVCOP was reporting that it had 'written' the Nth visibility
        when in fact it had 'read' the Nth visibility.  1-liner.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9309.  December 18, 1996      $YPGNOT/UVPLT.FOR         Ketan
        UVPLT can now be told to generate UVW coverage plots with
        uniform limits in the U,V,W directions.  If BPARM = x,y,2,0 is
        selected, where x and y are chosen from 6,7,8 [U,V,W
        respectively], then the plot is generated with identical limits
        along the X and Y axes.
*       This change (only) was made to the CVX version of UVPLT.
        Changed help file.  Also, the axis codes for UVPLT are now
        shown when HELP UVPLT is invoked [A minor inconvenience.]
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9310.  December 19, 1996   $YPGNOT/ELINT.FOR, $HLPFIL/ELINT.HLP Leonia
        Several modification have been made:
         We have implemented an OPTYPE command to additionally fit for
        the opacity (following a law of the form exp(-tau/cos z)) as
        well as the gain polynomial.  This option can be useful in
        situations of high optical depth (such as at the upper end of
        Q-band, or a soaking wet day at K-band. This option is
        experimental and we plan to continue testing it.
         OPCODE = 'SECZ' has been discontinued. The task can also now
        deal with elevation ranges exceeding 90 degrees, when antennas
        observe "over-the-top".
         The fitted polynomial can now take two forms:
        i) three coefficients of the polynomial;
        ii) three coefficients which determine position and value of
         minimum correction (maximum gain).
         The print output format has been improved and the help file
        has been revised.
        January 10, 1997       $YPGNOT/ELINT.FOR           Leonia
        Several minor changes have been made by request of Rick Perley:
        some formats were changed to allow print of the output at the
        larger range;
        the headers of the plots are changed; and so on.
        The codes connected with OPCODE='PWRN' have been simplified.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9311.  December 19, 1996     $APLNOT/BPCOEF.FOR           Athol
        Allow autocorrelation data to be corrected by cross-power
        bandpasses for polynomial bandpass solutions. Would
        previously trap this case and halt with an appropriate
        error message.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9312.  December 20, 1996     $YPGNOT/FRMAP.FOR            Leonia
        For some reason threshold, detecting the fringe rate maxima,
        was an integer variable. It has provided some inconvinience
        when the threshold is required to be fractional. So the type of
        the variable THRES is changed from INTEGER to REAL.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9313.  December 30, 1996     $APLNOT/GETANT.FOR           Athol
        GETANT reasonably assumes that the station numbers in the
        AN records are positive. If the station number is zero
        the array subscripting errors can overwrite file control
        information in some cases, and result in misleading
        error messages concerning unrelated system files. For
        this reason, modify GETANT to check for valid station
        numbers. The ultimate cause of the problem (likely DBCON)
        is being pursued.
*       Improved the test to check for the antenna number being greater
*       than MAXANT which will also have bad results.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9314.  January 5, 1997       $APLNOT/TABOTT.FOR          Gustaaf
        The over-the-top routine TABOTT was based on TABNDX. A relic
        from TABNDX, testing for an older version of NX tables, was
        removed. It created problems in TABOTT.
        January 21, 1997    $APGNOT/FILLM.FOR                 Gustaaf
        The over-the-top (OT) table that FILLM wrote on request did
        not contain sufficient information for Leonia's task ELINT.
        I have redesigned the OT table format. This is not as serious
        as it seems, since - apart from ELINT - until now only the
        local task BASFT (which does the occasional baseline fitting)
        used this table.
*       These changes (only) were put in the CVX version of FILLM.
*       Corrected dimension of OTBUFF back to 512, added comments about
*       the undocumented anti-solar feature which had wrong comments and
*       which had to be "moved" a bit in CVX.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9315.  January 6, 1997       $APGNOT/LWPLA.FOR           Gustaaf
        LWPLA's default behavior for the font size was not well
        documented. As before, fontsizes =<0 default to 13 point.
        Font sizes exceeding the maximum (17pt) will now default
        to the maximum font, and the user will be informed of this.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9316.  January 7, 1997          GPSDL                      Chris
        Fixed a transcription error in GETSIP where the sine of the
        antenna latitude was used in place of its cosine in the
        formula for the azimuth of the source at the ionosphere
        (which lead to errors in the magnetic field projection).
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9317.  January 17, 1997      $APGNOT/PCLOD.FOR & . HLP      Athol
        Revise calculation of reference frequency to correctly
        take into account the frequency reference pixel. Task would
        fail without being able to match the pulse-cal frequency
        set to the IF frequencies in the uv-file. Add new adverb
        FQTOL to set the tolerance used in the frequency match.
        January 30, 1997           PCLOD                   Chris
        Made PCLOD friendlier for multifrequency observations.  PCLOD
        no longer aborts if it encounters a frequency group that does
        not match an FQ-ID in the uv file but prints a warning message
        and skips pulse-cal groups until it finds a frequency group
        that does correspond to an FQ-ID in the data file.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9318.  January 20, 1997           BLING                      Chris
        Reset IRET after calling TABEXI to test for the existence of
        an index table.  The real problem is that ISTAB (which is
        wrapped by TABEXI) sets IRET to an non-zero value if the
        table does not exist although this is a condition that we
        call ISTAB to check; ie. ISTAB doesn't distinguish between
        a table not exising and some error condition preventing us
        from finding out whether a given table exists.  This should
        really be fixed in ISTAB but I'm not sure that sorting this
        out wouldn't have adverse consequences for other tasks that
        use ISTAB.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9319.  January 20, 1997    $APGNOT/VLOG.FOR & .HLP           Athol
        New task to segment and re-format the external calibration
        file produced by TSM for each VLBA project. The resulting
        output files can be used directly by ANTAB, APCAL, UVFLG
        and PCLOD and should help to automate a priori calibration
        for a broad range of VLBA projects. This task is VLBA-specific
        and makes some narrow-minded assumptions about the format of
        the input TSM and gain curve files. Nonetheless should be
        useful in a significant number of cases. Trial version
        placed in the system to allow broader testing.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9320.  January 23, 1997     $APGNOT/JMFIT.FOR               Athol
        JMFIT used a fixed format to print fitted baseline
        parameters. This yielded zero output for sufficiently
        small parameter values and led to some confusion. Corrected
        the appropriate format statements.
*       Moved this fix into IMFIT as well.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9321.  January 29, 1997    $SYSUNIX/READLINE.SHR            Pat
        There were some (4) lines in the Makefile.in that state
        "comment-me-out-in-distribution"; these were not commented out
        and were causing problems with Linux builds under Red Hat 4.x
        distributions.  Field reports indicate that commenting them out
        fixes the problem.  Duly commented out.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9322.  January 29, 1997   $AIPSPUBL/AIPSMEMO94.TEX & .PS    Athol/Chris
        New AIPS memo. containing results of the recent SGI benchmark
        tests.
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

 9323.  January 31, 1997          OPTIMIZE.LIS             Jeff
        Turned off optimization for FILL.FOR under Linux.  (Who keeps
        turning this back on?!?)
*       Moved to CVX from AOC aips by Eric 3-Feb-1997.

*9324.  February 3, 1997        Copyrights                  Eric
*       In general, new files coming from Socorro show copyrights dated
*       to 1995.  NRAO could lose the copyright on everything if it is
*       established that it falsely claims copyrights for dates on which
*       things did not exist.  Tried to fix up the new things from aoc
*       aips.
*       Moved nowhere.

*9325.  February 7, 1997         SD imaging                 Eric
*       Changed:
*       DSDG.INC  INC: Dropped the large buffers so that all of OOP will
*                 not have to carry yet another set.
*       SDGRID    QNOT: Made the buffers into call arguments with their
*                 sizes and simplified the output buffer to 1 dimension.
*       QUVUTIL   QOOP: Changed it to create and open some dummy classes
*                 to get 4 buffers for use in calling SDGRID.  Then
*                 close and delete them.  Removed GRDFIX to make it a
*                 separate routine.
*       SDIMG     QPGNOT: Changed it to declare the buffers locally and
*                 to pass them on to SDGRID.
*       GRDFIX    APLSUB: "new" routine to allow the arc-sec scaling
*                 options for grid functions (used in SD).
*       Moved nowhere.

*9326.  February 9, 1997     OOP & imaging                Eric
*       More troubles:
*       QUVUTIL   QOOP: Moved the IMCDES call for the image after the
*                 close rather than before.  Header info was being
*                 discarded in OSDIMG.
*       UVDATA    APLOOP: The UV data opening was not testing the BIF,
*                 EIF, BCHAN, ECHAN for reasonable values.  It was just
*                 replacing <= 0 for EIF and ECHAN (not even BIF and
*                 BCHAN)!  Put a full test and PUT back of all 4.
*       UVUTIL    APLOOP: Changed U2IDES to apply these defaults too in
*                 case the UV object did not get OUVATT yet.
*       IMAGR     QPGOOP: Changed to put the results of defaulting
*                 channels, channel increments, IFs into UVDATA as well.
*                 The increment part is not handled elsewhere.
*       Moved nowhere.

 9327.  February 3, 1997      $APLLINUX/ZMOUN2.C           Jeff
        Now checks the block size on SCSI tape drives (Exabytes and
        DAT's) when they are mounted.  If the block size != 0 then I
        explicitly set it to zero, and then restore the old block size
        upon dismounting the tape.  As I recall, we've had similar
        problems on other systems (e.g. AIX) with tapes when the block
        size is non-zero.  Also, ZMOUN2 now reports a bit more about the
        type of tape that is mounted; in addition to reporting it as an
        "ANSI SCSI 1" or "ANSI SCSI 2" device, it will report it as one
        of the following: "DDS", "EXB-8200", "EXB-8500", "DDS-2",
        "EXB-8505 compressed", or "EXB-8205 compressed".
        February 3, 1997      $INC/AIPSPROTO.H             Jeff
        Added #define of MAXEHEX (value: 36).  Currently only used by
        Linux ZMOUN2 for tracking "original" block sizes on multiple
        tape drives.
        February 3, 1997      $APLLINUX/ZMOUN2.C           Jeff
        Corrected an oversight (thanks for the question Pat!): I need to
        keep the original block sizes in a static array since multiple
        tapes can be mounted and unmounted, in arbitrary order, and thus
        each needs to know its original block size separately.  Also, if
        MT_Debug is #define'd as non-zero (i.e. debugging is in
        progress) then the tape will only rewind (*not* rewind + eject)
        at dismount.  This eliminates a really time-consuming annoyance.
        Moved to 15OCT96 patch area this date.
*       Moved to CVX from AOC aips 9-Feb-97 by Eric.

 9328.  February 5, 1997      PRTAB, $APLNOT/TABOTT.FOR    Gustaaf
        Modified PRTAB to accept OT tables as suitable for the DOHMS=1
        option.  Also fixed a type mismatch in TABOTT.
*       Moved to CVX from AOC aips 9-Feb-97 by Eric.
        Moved nowhere.

 9329.  February 5, 1997      $APLNOT/CHEBYD.FOR           Athol
        New subroutine to calculate the first and second derivatives
        of the Chebyshev polynomials. Used in VSOP fringe-fit tests.
        (see $APLNOT/CHEBY.FOR).
        February 5, 1997      $APGNOT/DTCALS.FOR           Athol
        Revise this subroutine to calculate rate and acceleration
        calibration errors using CHEBYD.
        February 5, 1997      $APGNOT/DTSIM.FOR            Athol
        Revise to use new calling sequence for DTCALS; also
        compute true inverse variance weights if noise specified.
        Moved nowhere.
        February 9, 1997       $APGNOT/DTSIM.FOR          Athol
        Fix bug introduced in [above] which caused an error in the
        polarization solutions copied to the AN table.
        February 5, 1997      $APGNOT/DTCHK.FOR            Athol
        Use new DTCALS calling sequence. Also modify to check BS
        tables produced by BLING, and for rate and acceleration
        errors where possible in BS and SN tables.
*       Moved to CVX from AOC aips 9-Feb-97 by Eric.

 9330.  February 5, 1997      $QPGNOT/BPASS.FOR           Athol
        Subroutine BPSEL passed a real array to CHNCOP where a
        double precision array was required. This causes
        alignment problems if double load/store is enabled
        (eg. default under IRIX). Declared local DP array to
        avoid this.
*       Moved to CVX from AOC aips 9-Feb-97 by Eric.

 9331.  February 5, 1997       SEARCH                     Athol
        Add new adverb SEARCH(10) used by FRING to specify
        alternate rerference antennas in initial FFT search.
        Modified POPSDAT.HLP and NEWPARMS.001 accordingly.
*       Moved to CVX from AOC aips 9-Feb-97 by Eric.

 9332.  February 6, 1997       $APLOOP/UVUTIL.FOR         Ketan
        Added the capability to form scratch files using UV2SCR
        in the OOP system with baseline selection.  This should
        help make scratch files smaller for some tasks.  Although
        some AIPS tasks allow baseline selection through BASELINE
        and ANTENNAS, the underlying AIPS code only allows all
        selection in the sense of all baselines to a list of specified
        antennas. Now, via ABSELECT, ASELECT, and BSELECT, an OOP
        call to UV2SCR can form a scratch data file with only those
        baselines the user desires.  This frees the calling task from
        having to discard unwanted baselines that made it into the
        scratch file.
*       Made this change to CVX version including correct message level
*       and suppression and improved typing.
        February 6, 1997       $QPGOOP/GPHAS.FOR          Ketan
        Added flexibility regarding the choosing of the reference
        antenna.  APARM(1)=1 works as before creating a new fictitous
        new antenna.  APARM(1)=0 chooses the most commonly occuring
        reference antenna in the chosen CL table as the new reference
        antenna. APARM(1)=2 lets the user choose via APARM(2) the
        reference antenna number.  APARM(3) also allows the user the
        option to normalize the visibilities before stacking them
        together. [This may be the only right thing to do.]
*       Moved to CVX from AOC aips 9-Feb-97 by Eric.

*9333.  February 11, 1997      GETNUM                    Eric
*       GETNUM did not test properly for bad values.  Changed it to test
*       not only the exponent value but the net value.  Setting the
*       double value = a single can cause overflow if x > about 2e38.
*       It was limiting the xponent to 18!  Now limit the total value to
*       1.e35.  Many places did not test for bad values back from GETNUM
*       which can arise from excessively large values or simply missing
*       values.   Corrected:
*       APLGEN    ZDCHIN
*       AIPSUB    AU5C
*       APLSUB    EXTREQ   GETNUM   PUTCRD
*       APLNOT    GETKEY   TABAXI   TABHDK   TABREQ   TABHDR
*       APLPGM    PRTAC    PRTTP
*       AIPPGM    BATER    GRIPR
*       APGNOT    FILLR    IMLOD    SETAN    TBIN     UVLOD
*                 UVSIM    FITLD    UVLIN    GSCAT    STARS    SKYVE
*       Moved nowhere.

*9334.  February 12, 1997       System name              Eric
*       The use of a system name = "UNREGISTERED!!!" for things like
*       printout identifications, job conclusion messages, and - most
*       importantly - scratch file identification is onerous and prone
*       to cause errors.  The SYSNAM parameter is still neede3d I
*       suppose to provide extra ID info and to encourage registration.
*       Therefore, I have added a new variable HSTNAM to DDCH.INC.
*       ZDCHIN will set this by translating the logical name HOST and
*       will call the new routine CHUTOL to put it all in lower case.
*       Changed to use this parameter instead of SYSNAM:
*       PRTAC    ZTQSPY   DESCR    OERROR   PREAD    PRTALN   STORES
*       SCREAT   ACOUNT   PRTLIN
*       Changed to use this parameter in addition to SYSNAM:
*       AUC      GRIPR    ZBKTP2   FITTP
*       Changed ZROPEN and ZROPN2 in $APLGEN to use a new variable name
*       rather than HSTNAM.
*       Fixed GRIPR not to write To and Subject lines in the file (to be
*       like AUC).
*       Moved nowhere.

*9335.  February 12, 1997      Misc                     Eric
*       Changed:
*       ACOUNT   Closing format made better (more of name, real time in
*                integer with another digit).
*       ZGMAIL   $APLUNIX: goes to egreisen not aipsmail
*       ZGMAI2   $APLUNIX: fprintf error now that there are not 4
*                addresses, changed to 3 adding Juan
*       Moved nowhere.

*9336.  February 13, 1997         typos                  Eric
*       Changed MINPHERR to MINPHSER in VLAPROCS.001 and VLACALIB.HLP.
*       The spelling did not get fully corrected when the change to
*       CALIB's error reporting was made.
*       Moved nowhere.

 9337.  February 12, 1997      BLING et al           Chris
        $APLNOT/SVANDT.FOR : New subroutine to solve the transposed
        Vandermonde system of equations used in polynomial interpolation
        (I'm surprised that we didn't have this in a subroutine
        already).
        $QNOT/FRSRCI.FOR ; New subroutine to perform a gridded fringe
        search with interpolation.  This is similar to the QSEARC
        routine but extracts the delay and rate indices from the
        combined 1-D index and estimates the fringe position to a
        fraction of a cell by performing simple, quadratic interpolation
        around the peak in each dimension.
        (3/13) Fixed faulty logic used to interpolate over the
        discontinuity between cells -1 and 0.
        $QPGOOP/BLING.FOR : Now interpolates using quadratic
        interpolation in delay, rate and acceleration.  This has allowed
        the default padding to be greatly reduced so that BLING should
        be much faster than before.  The user still has the option of
        adding extra padding using negative values of APARM(5) and
        APARM(6) but preliminary tests indicate that this gives little
        improvement in precision at a large cost in run-time.  Errors
        quoted in the BS table are now wildly pessimistic (by a factor
        of 10 to 100) in most cases.  Also fixed a sign error in writing
        out the acceleration term.
*       Moved from AOC aips to CVX by Eric 14-Feb..

*9338.  February 14, 1997     OOP imaging                Eric
*       More development:
*       QIMAGE    QOOP:  added routines to get the parms, make the
*                 headers, and invoke AEGRID.
*       AEGRID    QNOT: new routine to do gridding based on images of RA
*                 and Dec.
*       INTERP    APLOOP: fix comments about AP.
*       BSCOR     APGOOP: Copy beam parameters from in to out.
*       BSGEO     QPGOOP: New task to regrid BSCOR output to ra-dec.
*       BSGRD     QPGOOP: New task to do full gridding task - SDGRD,
*                 OGEOM, BSCOR, BSGEO all in one task.
*       WHATSNEW  Update this general help file with new developments
*                 and reword to explain better what things are.
*       Moved nowhere.

*9339.  February 19, 1997        OOP headers               Eric
*       It is very hard to get parameters into data headers on disk.
*       The file must be opened for WRITE or DEST and not closed before
*       the parms are set.  Things that look like they might work, such
*       as reading/writing the header only go to core and that core does
*       not go back to disk for files that are now open for read.  And
*       closes are buried away.  Also "open"ing a class - causing the
*       object to get real instantiation on disk - does not open an I/O
*       buffer.  That takes a separate opening.  This means some buffers
*       I thought I had to use did not exist (no error code, just
*       bufno=-1 returned when asked what buffer) and the code was using
*       random core for i/o.  Seemed to work most of the time!
*       Changed:
*       IMAGE     In IMGCLN, the OUTSEQ was not properly moved to the
*                 output object due to a typo (a GET rather than a PUT).
*                 In IMCLNX, the existence test did not see if the
*                 output SEQ is zero.  In that case it cannot exist, but
*                 one of some seq number can exist.  Thus, keywords were
*                 copied if none existed and not copied if 1 or more
*                 existed among other possible differences.
*       QUVUTIL   In OSDIMG, open the IMAGE object so that it really has
*                 a buffer.  Also added code to determine the paralactic
*                 angle and zenith angle and put that in the output
*                 headers for BS images.
*       QIMAGE    In IMGRGR, open the OUT object so that it really has a
*                 buffer.
*       INTERP    Drooped the IMGCLO calls in IMGINT, IMGHGE, IMGIAE.
*       OGEOM     Using change in INTERP, added BEMCOP (IN to OUT).
*       OHGEO     Using change in INTERP, added BEMCOP (IN to OUT).
*       BSGRD     HLPFIL: Added DOCAT option to help and inputs to have
*                 the intermediate files kept.
*       BSGRD     QPGOOP: Added DOCAT option to preserve the
*                 intermediate files.  Change code to force beam
*                 parameters into intermediate files.
*       BSCOR     Added code to declare total throw a keyword and put it
*                 in output header.
*       OTFIN     Changed to display LST rather than date in a column
*                 and to display the date only when it changes.
*       REMKEY    APLSUB: new routine to remove keywords from a header.
*       CATKEY    Fixed to test on values used as subscripts.  Caused
*                 aborts on bad keywords otherwise.
*       IMAGR     Remove IMTAV, IMPARG since they are now in QUVUTIL.
*       Moved nowhere.

*9340.  February 19, 1997        Gridding defaults            Eric
*       Changed the defaulting for negative (in cell size) grid
*       functions.  Instead of assuming the cellsize = 1/3 * beam size,
*       actually scale for this.  Changed call seq to GRDFIX to include
*       beam size and code in GRDFIX to apply defaults (a lot had to
*       come from GRDFLT).  Changed SDIMG to drop local copy of GRDFIX
*       and to go to the new call seq.  Changed call seq in QIMAGE and
*       QUVUTIL.  Fixed up help files for SDGRD, SDIMG, BSGRD, and
*       UV1TYPE through UV6TYPE.
*       Moved nowhere.

*9341.  March 3, 1997         BSFIX                  Eric
*       New task to fix the recorded RA and Dec offsets using the time
*       and the recorded Az/El offsets.  It does a simple linear
*       rotation using the parallactic angle.
*       Moved nowhere.

*9342.  March 3, 1997         FXTIM                    Eric
*       New task to fix recorded times in uv data when some are < 0.
*       Moved nowhere.

 9343.  February 18, 1997     $APGNOT/VLOG.FOR          Athol
        Corrected a bug affecting INDEX record generation for
        uv-datasets with multiple FQ_ID's. Also added a full history
        section, which was neglected as an oversight in the first
        release.
*       Moved to CVX by Eric on 4-Mar.

 9344.  February 18, 1997      Orbit tables              Athol
        Introduce table access routines for the new spacecraft orbit
        (OB) tables required for OVLB data:
         $INC/POBV.INC - OB table parameters
         $APLNOT/OBINI.FOR - initialize/create an OB table
         $APLNOT/TABOB.FOR - read/write records in an OB table
         $APLNOT/OBREFM.FOR - re-format OB table
*       Moved to CVX by Eric on 4-Mar.

 9345.  February 19, 1997        BLING                 Chris
        Revised the logic for calculating the time spacing in a
        solution interval to reject information from baselines
        that do not contribute to the current solution.  This
        should reduce the chances of the rate window being set
        too wide and including aliased fringes.
*       Moved to CVX by Eric on 4-Mar.

 9346.  February 19, 1997        $QPGNOT/FRING         Ketan
        Added two new features, exhaustive fringe searching and
        subset solve, to FRING.  The FFT stage in FRING
        used to give up too easily when searching for fringes.  Now,
        by setting APARM(9)>0, FRING will exhaustively search all
        baselines, beginning with those baselines to the reference
        antenna specified by REFANT.  Optionally a new control
        adverb called SEARCH can be filled in to specify the order
        in which to use the remaining antennas to search for fringes
        to antennas when REFANT was inadequate.  See the help file.
        The Least Squares Stage now allows you to specify a subset
        of antennas to solve for. I.e. you could specify
        ANTENNAS =1,2,3,4 to include data on all baselines between
        antennas 1-4 but also use DOFIT=1,2 to specify that solutions
        only be computed for antennas 1 and 2 [effectively, baselines
        1-2, 1-3, 1-4, 2-3, 2-4 are used to find solutions for
        antennas 1 and 2].  DOFIT=0 specifies that all antennas are
        solved for, as before.
        $APLNOT/GCALC2: New routine to be invoked by CALIB instead of
        GCALC when subset solve feature is requested.
        $APLNOT/CLBPA: Added to the call sequence so that GCALC2 is
        called instead
        $QPGNOT/CALIB: Added the subset solve feature to CALIB.  The
        adverb DOFIT can be used to specify a subset of antennas to
        solve for.  DOFIT=0 specifies that all antennas are to be solved
        for, as before.
        $RUNSYS/*.001: Updated the run files in $RUNSYS to also
        initialize DOFIT=0 for CALIB and FRING and SEARCH=0 for FRING.
        The affected files are
        COMAP.001, CROSSPOL.001, CRSFRING.001, DDTHLOAD.001, DDTLOAD.001
        HYB.001, MAPIT.001, VLALLOAD.001, VLACLOAD.001, VLAPROCS.001,
        VLBA.001. N.B.VLBDDT.001 is also affected but is currently
        check'ed out.
        February 28, 1997           FRING                  Ketan
        Change #9258 to FRING left behind two typos in the subroutine
        FRNMSP.  These typos affected only mode APARM(5)=2.  In this
        mode, after finding multi-band delays, the typos made FRING
        less likely to be able to find valid refinements to the
        single-band delays.  Modes using APARM(5)<2 were not affected
        by these typos.
*       The CVX versions of CALIB, CLBPA, CALIB.HLP, VLAPROCS.001,
*       VLACLOAD.001, VLALLOAD.001 were used and 64 fields was
*       substituted in FRING.HLP.
*       Moved to CVX by Eric on 4-Mar.

 9347.  February 19, 1997        $APGNOT/FILLM         Gustaaf
        PRTAB aborted on encountering NaN values in the TSYS table as
        written by FILLM.  In previous AIPS versions PRTAB would print
        these values anyway, but now PRTAB chokes on them.  There was
        already a check for NaNs in FILLM for solar data only; this
        was now extended to all data.
        Moved changes to CVX version of FILLM by Eric on 4-Mar.

 9348.  February 20, 1997        $APLNOT/ORBIT.FOR      Leonia
        The subroutine had a PI error calculating the angle between
        vector of satalite position and its velocity. The error had
        a place only for low half of elliptical trajectory. The error
        did not caused a mistake in the position but caused the mistake
        of velocity for low half of elliptical trajectory.
*       Moved to CVX by Eric on 4-Mar.

 9349.  February 20, 1997          XTRAN                 Chris
        In 1992 the solution code from XTRAN was moved into an APLSUB
        subroutine (XTRFIT) without making any provision to pass back
        the solution vector for the non-linear case.  This resulted
        in XTRAN failing with NPOINTS=6.  Changed XTRFIT to pass back
        the solution vectors as output arguments.  XTRAN could probably
        be made a lot simpler than it is.
*       Moved to CVX by Eric on 4-Mar.

 9350.  February 25, 1997     Argument counts in APLGEN      Chris
        Fixed the number of subroutine arguments for ZV20MC, ZVTPGC
        and ZVTPO3 in APLGEN.  The argument lists for ZVTPGC and
        ZTVPO3 now agree with the UNIX versions of these routines
        and ZV20MC has a dummy FTAB argument to agree with the
        single call made to it (in ZV20XF).
*       Moved to CVX by Eric on 4-Mar.

 9351.  February 26, 1997          BLING                    Chris
        Fixed faulty stacking logic in DOSOLI that caused the
        intermediate baseline buffer (IBBUFF) not to be cleared when
        baseline stacking was turned off; this lead to phantom
        results for scans without data.
*       Moved to CVX by Eric on 4-Mar.

 9352.  February 27, 1997          COMLNK                   Eric/Pat
        It makes no sense to COMLNK in debug mode only to have the
        sources disappear on you due to PURGE=TRUE being the default.
        Added NOPURGE to the options when DEBUG is found on the command
        line.
*       Moved to CVX this date.

 9353.  March 3, 1997              BLAPP                   Chris
        Added checks for COLMAP(I) = 0 (indicating no solution expected)
        in code sections that extract results from the least-squares
        solution routines.  This eliminates the phantom solutions that
        were being written to the SN table for missing antennae.
*       Moved to CVX by Eric on 4-Mar.

*9354.  March 7, 1997          GETNUM follies           Eric
*       Apparently I did not put all the needed tests into routines that
*       call GETNUM.  Changed:
*       FPARSE   Add test for DBLANK (drop old test on history only) and
*                also added test on integer range.
*       INQINT   Add test on integer range.
*       Moved nowhere.

*9355.  March 12, 1997         BS weighted sums          Eric
*       To average BS images one needs to FFT them, weight them by a
*       sinc function along the parallactic angle, divide by the sum of
*       the weights and FFT back.  Thus:
*       ARRAY    Changed ARRPAD to inquire about blank pixels and about
*                PADVALUE (default 0.0).  It pads with PADVALUE and now
*                also substitutes PADVALUE for blanks.
*       RCOPYS   New subroutine: RCOPY with substitution of all values =
*                BV with SV.
*       QARRAY   Corrected typo on OUTTYPE (REAL not READ).
*       QIMAGE   In IMGFFT, changed order of image opens to do output
*                first.  This allows IN and OUT to be the same file.
*       Finally, wrote new task BSAVG to do the weighted sums.
*       Moved nowhere.

*9356.  March 12, 1997        SUBIM                      Eric
*       Added the ability to copy an SC image file to an MA output file.
*       This will allow us to save SC files on occasion.
*       Moved nowhere.


 9357.  March 5, 1997             $APLNOT/TFILTR.FOR    Leonia/Athol
        New subroutine to calculate rate smearing corrections for
        different types of filtering during time averaging. Includes
        the OVLBI filters implemented in the VLBA correlator.
*       Moved from AOC aips 13 March by Eric.

 9358.  March 5, 1997             $APLNOT/TABHDR.FOR       Athol
        Modify to recognize the SPACECRAFT_ORBIT table (OB) now
        produced by the VLBA correlator, and containing the
        orbital ephemeris as calculated by SPICE.
*       Changed CVX version of TABHDR.
*       Moved from AOC aips 13 March by Eric.

 9359.  March 6, 1997          Correlation id.             Athol
        The VLBA correlator can change correlation modes with
        great flexibility, leading to time-variable rate and
        delay decorrelation corrections which depend on the
        type of frequency and time filtering performed in the
        correlator. The most general solution to this problem is
        to implement a new correlation_id random parameter for
        VLBA datasets which points to the recorded correlation modes
        stored in the existing CQ table. This change required for
        full VSOP support.
        Changed:
         $INC/DUVH.INC: add variable ILOCID.
         $APLSUB/UVPGET.FOR: add support for random param. CORR-ID.
*       Made change to CVX version of UVPGET.
*       Moved from AOC aips 13 March by Eric.

 9360.  March 6, 1997          CQ table update             Athol
        Add a TABREV keyword to the CQ table and include a check
        for a mismatch between the AIPS version and the table
        version. This does not constitute a format revision.
        Changed:
         $INC/PCQV.INC: add revision level and new keyw. parameters
         $APLNOT/CQINI.FOR: add support as indicated above.
*       Moved from AOC aips 13 March by Eric.

 9361.  March 6, 1997          Decorrelation corrections   Athol
        Implement new form of decorrelation corrections, using the
        new correlation_id random parameter if it exists. This
        change is backwards compatible with older AIPS versions
        and existing CQ tables. New system allows time variable
        correlation mode changes in general, although only time
        variable OVLB filtering is activated at present. This
        is required for full VSOP support.
        Changed:
         $INC/DSEL.INC: add new decorrelation arrays ITFVBA,
           TVGVBA and ICQVBA. Change the decorrelation array
           indexing from (subarray,IF) to (corr_id,IF).
         $INC/PUVD.INC: add new global parameter MAXCID, equal
           to the maximum expected number of correlation_id.'s
           within a given file.
         $APLNOT/DATGET.FOR: extract the corr_id if it exists
           and pass it to DATCAL.
         $APLNOT/DATCAL.FOR: use new (corr_id,IF) indexing in
           the decorrelation parameter arrays; call new subr.
           TFILTR for rate smearing correction which supports
           the new OVLB filters.
         $APLNOT/SELINI.FOR: initialize ICQVBA; use new DSEL.INC.
         $APLNOT/DSMEAR.FOR: load CQ table using new decorrelation
           parameter arrays.
         $APLNOT/GAININ.FOR: change DSMEAR call to reflect new
           input parameters.
*       Changed CVX version of PUVD.INC, DSEL.INC, SELINI,
*       Removed blank lines from DUVH.INC
*       Moved from AOC aips 13 March by Eric.

 9362.  March 6, 1997        $APGNOT/FITLD.FOR        Athol
        New FITLD revision 9.0 to transfer the new spacecraft
        orbit (OB) tables and write output data with the new
        VLBA correlation_id random parameter. The correlation
        id.'s are built up as the data are read, starting from
        an existing CQ table if concatenation is enabled. The
        orbit table is reformatted to comply with AIPS
        requirements through subroutines OBREFM and TABREF.
        FITLD will not concatenate to earlier output files
        lacking a correlation_id random parameter. Also,
        the multiple integration time flag will be set if the
        use of an OVLB filter is detected, and data will be
        accepted out of time order, generalizing the existing
        condition.
        March 11, 1997       $APGNOT/FITLD.FOR            Athol
        Fix bug introduced in #9280. FITLD produced unintelligible data
        for an older revision of the correlator output format. Now
        corrected.
*       Inserted CVX changes (BP table, test GETNUM).
*       Moved from AOC aips 13 March by Eric.

 9363.  March 6, 1997        $APGNOT/DTCHK.FOR & .HLP   Athol
        Add adverb TIMERANG to allow time selection in deriving
        the test compliance statistics.
*       Moved from AOC aips 13 March by Eric.

 9364.  March 6, 1997        $APGNOT/DTSIM.FOR          Athol
        Fix a bug in subroutine DTANTB which prevented the
        orbital elements from being properly written to the
        AN table.
*       Moved from AOC aips 13 March by Eric.

 9365.  March 7, 1997        $YPGM/TAPLT.FOR            Athol
        TAPLT has not worked since #9003 due to an insufficient
        buffer size for TABUF. Increased from 256 to 512. Also
        add new feature to exclude blanked table values.
*       Moved from AOC aips 13 March by Eric.

 9366.  March 7, 1997        $APGNOT/OBTAB.FOR(HLP)     Leonia
        A correlator creates the orbiting table at the case of
        an orbiting antenna at an orbit (in particular VSOP).
        This table includes three coordinates of the orbiting
        antenna and its velocity. The new task fills out the table
        by additional important information such as angle distance
        between the Sun and observing source, condition of the
        Sun eclipse of the antenna by the Earth and position
        angle of the antenna feed. The task reads the line of the
        specified input OB table, calculates the new data and
        records the modified line at the specified output OB table.
        The task provides (optionaly) the estimation of the six orbit
        parameters having used the information about the position and
        velocity of the satalite at the orbit. The found six orbit
        parameters are used to fill out the relevant column at the AN
        table.
*       Moved from AOC aips 13 March by Eric.

 9367.  March 7, 1997        $APGNOT/MSORT              Ketan
        Introduced new task which reproduces the functionality of
        UVSRT.  MSORT does an in-memory sort of a UV-data file.
        It reproduces all the functionality of UVSRT. At
        best, MSORT should be about 3 times faster than UVSRT [ in
        case when the data is only weakly mis-sorted - as is the
        case for normal VLA and VLBA data].  At worst MSORT should
        take no more than 50% longer.  In either case, MSORT requires
        no ancillary disk space - making this the preferred sorting
        method for large data files.  MSORT does not currently meet
        AIPS coding standards - this will be remedied in the next
        few days.
        March 10, 1997       $APGNOT/MSORT              Ketan
        Cleaned up the coding of MSORT.  Removed the BADDISK and ROTATE
        adverbs.  BADDISK is not relevant as MSORT does not use scratch
        files.  ROTATE [see UVSRT.HLP] is no longer supported.  MSORT
        is primiarily needed for VSOP support and proper ROTATE
        implementation may take more time than is currently available.
        [One day _real soon_ ROTATE support will be re-introduced].
*       Moved from AOC aips 13 March by Eric.

 9368.  March 10, 1997       $APGNOT/OBTAB              Leonia
        A mistake has been discovered at the case of several orbiting
        antennas. It has been fixed.
*       Moved from AOC aips 13 March by Eric.

 9369.  March 11, 1997       $YPGM/BLANK.FOR             Leonia
        Michael Bietenholz noticed that the task blanks with 0.0 when
        opcode 'TVCU' is used; even though it claims to blank with
        DPARM(6) if DPARM(5) >0. Originally there was no parameter
        DPARM(6) at all.  So the task blanked with 0.0 if DPARM(5)
        >0. Having introduced DPARM(6) the relevant changes were made in
        subroutine DO1BLK, leaving subroutine DO1TVB without change. So
        DPARM(6) has been used in all opcodes except opcode = 'TVCU'. I
        have fixed it correcting several comments as well.
*       Moved from AOC aips 13 March by Eric.

 9370.  March 12, 1997       $YPGNOT/VPLOT.FOR            Leonia
        The selection criteria UVRANGE was introduced for SOLINT > 0.
        It was erroniously missed early.
*       Moved from AOC aips 13 March by Eric.

*9371.  March 13, 1997      Year 2000 considerations        Eric
*       A lot of AIPS will run fine with dates > 1/1/2000, but some
*       strings may be unpleasant to look at and a few will interpret
*       year "00" as 1900.  Changed the internal format of dates in the
*       header from DD/MM/YY to YYYYMMDD, the same number of characters,
*       distinguishable by the 3rd char not = /, and finally sortable.
*       Routines affected:
*       DATEST   NEW: decodes two forms of string to ID(3) (in same
*                order as ZDATE).
*       DATFST   NEW: decodes FITS forms ('DD/MM/YY', 'YYYY-MM-DD..')
*                to local 'YYYYMMDD' form and reverse
*       AU7      Changed 2000 to 2050 in testing date range, changed
*                READ of date string to call to JULDAY.
*       ZTQSPY   Changed date display to 4-char year
*       GETTIM   Changed to use DATEST.
*       PRTAC    Changed to wider time format in individual listings.
*       CATIME   Changed test on ZDATE output (subtracting 1900) and
*                changed output to give the full year (adding 1900 back)
*       DAT2JD   Changed tests on small year numbers: < 40 => 2000 then
*                <200 => 1900
*       DATDAT   Changed to call DATEST.
*       FPARSE   Added call to DATFST for keywords starting with DATE.
*       GREG     Changed to call JD2DAT for the messy computation.
*       JD2DAT   Added century variable and included century properly in
*                output year.
*       JULDAY   Changed to call DATEST and to account for centuries
*                properly rather than assuming the 19th(!).
*       MCREAT   Changed date format in header(KHDMP).
*       SCREAT   Changed date format in header(KHDMP).
*       TIMDAT   Changed tests on small years as DAT2JD.
*       UVCREA   Changed date format in header(KHDMP).
*       ANTAB    Changed to use DATEST.
*       CLCOR    Changed to support both time string formats.
*       FARAD    Changed to use DATEST and subtract 1900 from the
*                answer.  Added some detection of years < 1970 => 2000+.
*       LTESS    Changed HI start time card to standard form.
*       STESS    Changed HI start time card to standard form.
*       UTESS    Changed HI start time card to standard form.
*       VTESS    Changed HI start time card to standard form.
*       OTFBS    Changed format of header observe time (KHDOB).
*       OTFUV    Changed format of header observe time (KHDOB).
*       PCLOD    Changed read of KHDOB to DATEST call.
*       PRTAN    Changed read of AN RDATE to DATEST call.
*       SDTUV    Changed KHDOB output format doing the DAT2JD tests on
*                small year numbers.
*       SETAN    Changed initial RDATE, added code to reformat old-style
*                inputs from KEYIN.
*       SETAN    HLP: changed RDATE formats shown.
*       UVFIL    Changed comment about date format.
*       UVFLG    Changed read of KHDOB to call to DATEST.
*       UVSIM    Changed format of fake OBSDAT which goes into KHDOB.
*       VLOG     Changed read of KHDOB to call to DATEST.
*       BLING    Replaced read of DATE-OBS with call to DATEST.
*       UV2MS    Added code to reformat old form REFDATEs
*       UV2MS    HLP: changed comments on REFDATE including adding a
*                mention of FXTIM.
*       MK3IN    Changed lots of comments, added call to GREG to
*                reformat REFDATE if needed.
*       MK3IN    HLP: changed remarks about REFDATE incl FXTIM.
*       REFDATE  HLP: changed remarks about format incl FXTIM.
*       FILLM    Changed handling of user's REFDATE which would
*                sometimes fail now while still being correct.
*       FILLM    HLP: changed remarks about format incl FXTIM.
*       UVLOD    Added code to call DATFST in PARSCD for 'DATE....'
*       IMLOD    Added code to call DATFST in IMPARS for 'DATE....'
*       GSCAT    Added code to call DATFST in IMPARS for 'DATE....'
*       FITLD    Added code to call DATFST in IMPARS, PARSCD, BFTHIS for
*                'DATE....'
*       FITTP    Added comments and fixed format at point where the tape
*                writing DATE is written.  Added code to interpret new
*                and old dates to current FITS form.  Look for YEAR 2000
*                to find these places to fix when FITS gets its act
*                together.
*       Moved nowhere.

*9372.. March 17, 1997           Extensions                   Eric
*       Anticipating some change in the way extensions are handled:
*       Change the zeroing of the header extension parts to CATCLR (NEW)
*       and replaced that zeroing in
*       IMFIT   IMLOD   JMFIT   MULTI   XTRAN   DGHEAD  SAD     BAKLDS
*       CATINI  FILCR   MCREAT  SCREAT  UVCREA
*       Change more extensive initialization to CATINI call:
*       PRTTP   GSCAT   FITLD
*       Change finding extensions locally with call to FNDEXT in
*       SWPOL   AU8     CANPL   CLCAL   CLSMO   DBCON   GETJY   LWPLA
*       SDCAL   SDTUV   SLCOL   SNSMO   SPCAL   SPLIT   TABED   TXPL
*       CALADJ  GETNAN  MULSDB  SN2CL   TABLE   PRTPL   QMSPL   TACOP
*       TKPL    ANTDAT  EXTCOP  FILOPN  FNDEXT  HICREA  OPEXT   RESCSL
*       BLCAL   BPASS   CALIB   FRING   LPCAL   PCAL    MX      GREYS
*       TVPL
*       Other:
*       LPCAL had a bad branch to the end of a DO loop when no model
*       file name was given.  The loop may then have been executed.
*       SWPOL used a hard-coded "20" for KIEXTN.
*       Moved nowhere.

*9373.  March 17, 1997           More extensions               Eric
*       Further anticipating the change in number of extensions, I have
*       removed the G&C wcs parameters from the header by dropping the 4
*       parameters (KRPCM, KRCOK, KDLON, KDPRJ) from DHDR.INC and
*       commenting out references to them in CATINI, VHDRIN, and CATN2L.
*       The last required a change in a number as well.
*       Moved nowhere.

*9374.  March 18, 1997     FXHDEX, 50 Extensions              Eric
*       Wrote new subroutine FXHDEX to check a CATBLK for "old" format
*       with 20 extension file types and to change it to KIEXTN types
*       where KIEXTN >= 20.  Added call(s) to FXHDEX in:
*       ALLTAB  CATN2L  DELEXT  EXTINI  FILCR   FILDES  FNDEXT
*       LSTHDR  MADDEX  MDESTR  TABCOP  TABINI  AU3A    KWIKHD
*       RENUMB  OTBSRT  RMEXT   IMAGE   UVDATA  DISKU   MOVE
*       UPDAT   FITTP   INDXR   TAMRG   USUBA
*       Added comments to show FXHDEX already called in:
*       TABMRG  CCMERG  MF2ST   STFND   TAFLG   GSTAR   STARS
*       Other changes:
*       KWIKHD   Changed limit of 10 types reported to 50.
*       TABMRG   Reused a variable (JP) and then thought it still
*                pointed at the extensions when trying to recover from
*                error.  Added a new variable.
*       UPDAT    Commented out the lines setting up the G&C wcs
*       FITTP    Replaced search of CATBLK for HI with FNDEXT.
*       VHDRIN   Changed KIEXTN to 50.
*       Moved nowhere.

 9375.  March 13, 1997       $RUNSYS/VLBDDT.001           Athol
        Add support for new adverbs recently introduced for FRING,
        CALIB and DTCHK.
*       Moved to CVX version 18-March by Eric.

 9376.  March 14, 1997       $APGOOP/DTSUM.FOR       Pat/Martin Shepherd
        DTSUM prints a table of visibility counts versus baseline.  When
        this table becomes too wide to show on the printer in one go,
        the table is split into two parts.  The bug caused the second
        part of the table to show repeat values of the first part of the
        table and to label antenna number columns as all zero.  This was
        actually due to two bugs.  The first was that variable II was
        being used for two exclusive purposes within the same loop, and
        the second was that an antenna index was getting reset to zero
        on the second pass instead of taking on the value for the first
        antenna of that pass.
        Moved from Caltech today (finally!  Sorry for the delay - Pat)
*       Moved change to CVX version 18-March by Eric.

 9377.  March 14, 1997       $APGNOT/SPLIT.FOR            Leonia
        SPLIT has sent zeros for RESTFQ and LSRVEL to catalog in the
        case of single source file. It was happenning because these
        values were taken from SU table which is absent for the single
        source file data. At the same time any single source file is a
        result of SPLIT aplication to an original multi source file. At
        this stage the RESTFQ's and LSRVEL's values are recorded at the
        catalog.  At the single source file zeros were recorded to the
        catalog.  So I left this recording only for multi source data
        saving the original values for single source files.
*       Moved change to CVX version 18-March by Eric.

 9378.  March 14, 1997         FRSRCI in QNOT             Chris
        Added simple phase interpolation to this fringe search routine
        (used by BLING).
*       Moved change to CVX 18-March by Eric.

 9379.  March 14, 1997             BLING                  Chris
        Stopped BLING from writing garbage to the BS table for scans
        where data is missing.
*       Moved CVX date change into aoc version -> CVX 18-March by Eric.

 9380.  March 17, 1997             $APGNOT/DBCON.FOR      Athol
        Update DBCON to mirror the new common block structure in
        $INC/DUVH.INC resulting from the introduction of the CORR-ID
        random parameter in #9277 above. Modify /CATHDR/, which
        expects to be a copy of /UVHDR/; also update the number
        of words copied in FRMAT used to enforce the equivalence.
*       Moved change to CVX version 18-March by Eric.

*9381.  March 19, 1997          Alpha found changes             Eric
*       Changed
*       XAS.SHR   Changed listen call to queue 5 requests.  0 was okay
*                 on all systems until the latest ALPHA system update.
*       YTVOPN    Changed error handling after YDTVC call.  It did not
*                 quit on errors other than already locked.
*       Moved nowhere.

*9382.  March 20, 1997            ABOUT files                   Eric
*       Checked LSAPROPO which was okay (!) and found that the following
*       ABOUT files needed updating:
*       ZZANALYSIS  ZZAP        ZZCALIBRAT  ZZCOORDINA  ZZGENERAL
*       ZZIMAGE-UT  ZZIMAGING   ZZOOP       ZZRUN       ZZSINGLEDI
*       ZZSPECTRAL  ZZTABLE     ZZTASK      ZZUV        ZZVLBI
*       Also updated $HLPFIL/HLPIT.LIS used by readline.
*       Moved nowhere.

*9383.  March 24, 1997          Boo Boos                       Eric
*       The extension file change was not so easy as it seemed.  There
*       are hard-coded 20's lurking in the shrubbery:
*       PHDR.INC   New include parameterizes the (new) 50.
*       VHDRIN     Changed to use PHDR.INC, fixed error in which I
*                  failed to set KIRES and then had KIRESN = 257.
*       ALLTAB     Changed hard-coded 20's to NIEXTN
*       KWIKHD     Changed hard-coded 20's to NIEXTN
*       IMAGE      Changed hard-coded 20's to NIEXTN
*       UVDATA     Changed hard-coded 20's to NIEXTN
*       CATN2L     Changed location for residual info - not now 170.
*       Moved nowhere.

*9384.  March 27, 1997            DATFST                   Eric
*       Corrected it to do things right on input and to do current (old)
*       date form on output.  Changed FITTP to use DATFST to output
*       dates, measuring the length of the output from DATFST to know
*       where to put the close quotes and which format it is.
*       Moved nowhere.

*9385.  March 27, 1997            BPERR                    Eric
*       New task to average closure failure reports from BPASS and
*       generate plots and averaged/summed reports.
*       Moved nowhere.

 9386.  March 19, 1997             $APGNOT/RESEQ          Ketan
        SVLBI will require the ability to alias stations together
        at some points in the data reduction stream.  This is the first
        step for that requirement.  RESEQ is a new task which will,
        via the ANTENNAS input, renumber antennas in a UV file.
        RESEQ will renumber all antennas specified in the ANTENNAS
        adverb to ANTENNAS(1).  also placed RESEQ.HLP in $APGNOT.
        March 27, 1997             $APGNOT/RESEQ          Ketan
        RESEQ only allowed remapping of multiple antennas to one
        specific antenna.  Now, via an optional INFILE, RESEQ can
        remap antennas numbers to some desired order.  Also fixed
        up the access routines to UVDISK and UVINIT.
        Also updated RESEQ.HLP to reflect the new options.
*       Moved from AOC aips April 8 by Eric

*9387.  April 8, 1997         $APGNOT/TBOUT.FOR      Eric
*       TBOUT failed with a floating point exception on DEC Alpha
*       systems due to an invalid floating point comparison in
*       subroutine PUTPAS according to Athol.  His repair continued the
*       error of addressing doubles wrongly and of looking for INDE in
*       integers and logicals.  Repaired correctly.
*       Moved nowhere.

 9388.  March 20, 1997             $APGNOT/VBGLU.FOR      Athol
        VBGLU was failing on DEC Alpha systems for certain direct
        Hollerith comparisons in VBGLIN, where the comparison was
        made as floating point values. Replace with CHCOMP calls to
        avoid FP exceptions at times.
*       Moved to CVX from AOC aips April 8 by Eric

 9389.  March 27, 1997             $APGNOT/MSORT          Ketan
        The computation of buffer size for disk access via UVINIT
        and UVDISK was screwed up so that for very large record length
        data files, this task died just after startup.  Fixed up
        the routines accessing UVINIT and UVDISK.
*       Moved to CVX from AOC aips April 8 by Eric

 9390.  March 29, 1997             $APGNOT/DTSIM          Ketan
        A typo in the subroutine DTFILL caused file access problems
        via ZEXPND when DTSIM is used to generate _very_ small files.
*       Moved to CVX from AOC aips April 8 by Eric

 9391.  March 30, 1997             $APLNOT/AVERT.FOR     Leonia/Athol
        New subroutine to find the integration times in a uv dataset
        if the random parameter ILOCIT is defined.
*       Moved to CVX from AOC aips April 9 by Eric

 9392.  March 30, 1997             $QPGNOT/FRING.FOR     Leonia/Athol
        First pass at supporting baseline stacking for multiple
        integration times, as required by VSOP. Sparse baselines
        are padded with duplicate values before the initial FFT
        step. Weights and the SNR calculation are adjusted accordingly.
        Will search the data using AVERT if DPARM(4)=0. Will be
        refined in the coming weeks. Updated .HLP accordingly.
        DPARM(4) description has been changed in accordance of last
        change in FRING.HLP.
        April 6, 1997              $QPGNOT/FRING.FOR      Ketan
        There was a variable in FRNSRC [IS1] that long ago had been
        discovered to be mis-declared.  Unfortunately, the subroutine
        FRNALL, which implements the new SEARCH mode, was based upon
        an older version of FRNSRC.  Unfortunately, FRNALL still had
        the old value of 2048 - this has now been updated.
*       Moved to CVX from AOC aips April 9 by Eric

 9393.  March 30, 1997             $APLSUB/DSORT.FOR    Athol
        New DP sort routine, cloned from RSORT.
*       Moved to CVX from AOC aips April 9 by Eric

 9394.  March 30, 1997             $APGNOT/DTCHK.FOR    Athol
        Add antenna selection; also non-parametric pseuodo-variance
        estimation to be less vulnerable to single outliers than
        using only RMS. Needed for VSOP fringe-fit tests. Modify
        DTCHK.HLP accordingly.
*       Moved to CVX from AOC aips April 9 by Eric

 9395.  April 2, 1997              $APLNOT/BACOOR.FOR  Leonia
        The misprint at the sign of one formula describing rotation
        of coordinates has been discovered. This misprint affected
        model plot of orbiting VLBI plotted at the VPLOT. It fixed.
*       Moved to CVX from AOC aips April 9 by Eric

 9396.  April 7, 1997              $YPGNOT/VPLOT.FOR     Leonia
        I have added new information at the header of plots, following
        requests of people. VPLOT has provided information about the CC
        table version of the image ising in the modeling and has not
        informed the image file name itself. I have added the image file
        name at the third line of the header. I have added also
        information about CL table number (if. DOCALIB) and FG table
        number at the second line of the header. The information about
        CL and FG tables is not given at the case AMP. and PHASE plot
        (BPARM(2) < 0) because lack of room at the line at this case.
*       Moved to CVX from AOC aips April 9 by Eric

*9397.  April 9, 1997      Calibration routines, PCAL          Eric
*       CALIB failed on data taken with a 84-element Heliograph. This
*       was caused by a too low maximum baseline table size XBTBSZ as
*       defined in PUVD.INC.  XBTBSZ was increased to 16384 in the
*       AOC version, but this is a dumb fix.  Changed instead:
*       PCAL and LPCAL to use MXBASE rather than XBTBSZ since that is
*       what they need.  XBTBSZ should actually be MXBAS * 4 * MAXIF
*       which is 448,560 words, not a mere 16K.  This cries out for
*       dynamic memory but I am being lazy.  Changed:
*       GAININ to complain only on DOBL true.
*       BLSET  to init BLFAC only on DOBL true.
*       DATCAL to use BLFAC only on DOBL true.
*       The Japanese data will not now use BLFAC (unless they use a BL
*       table!!!) and so will not care what size it is.
*       Moved nowhere.

*9398.  April 9, 1997             PRTAB                      Ketan/Eric
*       Added some decimal places to the display of floating keyword
*       values, but not as many as the absurd values in the AOC
*       version.
*       Move nowhere.

*9399.  April 16, 1997            PRINTER                    Pat
*       Added the ability to change your AIPS printer on the fly from
*       the POPS command line.  This was achieved via a new verb PRINTER
*       and some revision of the shell scripts.  New files added :
*           $AIPSUB/PRINTR.FOR: show current printer, show a list, or
*                               change to a different printer.
*           $HLPFIL/PRINTER.HLP: describe how to use it:
*              PRINTER 0 or PRINTER to show current printer;
*              PRINTER n (n <= max printer) to change printer; and
*              PRINTER n (n > max, e.g. 999) to list available printers.
*       Changed were:
*           $AIPSUB/AU1.FOR: code for new verb added.
*           $SYSUNIX/START_AIPS: new method for defining printer
*                                environment variables, plus faster loop
*                                (in awk) to display the menu; this
*                                significantly speeds up the startup.
*                                NOTE: $AIPS_ROOT version of this needs
*                                to be merged with these changes.
*           $SYSUNIX/ZLASCL: use new variables, remove obsolete code
*           $SYSUNIX/ZLPCL2: same thing.
*       With this new way of addressing printers, the PRDEVS.SH file is
*       no longer needed.  INSTEP1 needs to be modified to not bother
*       with it, and perhaps $SYSUNIX/PRDEVS.SH itself needs to be
*       deleted from the system.
*       Note: It may be necessary to remove the older versions of ZLPCL2
*       and ZLASCL and replace with symlinks to the newer versions for
*       sites that maintain more than one version of AIPS.
*       Moved nowhere yet.  Will move to AOC version sometime...

*9400.  April 28, 1997           3D imaging                     Eric
*       Clean ups:
*       UVPGET    Fixed format 1030 - someone made ILOC bigger but did
*                 not fix the error format.
*       MX        Made BMMAX, BMMIN local include parameters
*       DMPR.INC  Dropped BMMAX, BMMIN used only in MX
*       The changes for 3D imaging - making the multiple fields all have
*       their tangent points at their centers appears to be
*       straightforward.  The main difficulty will be the need to have a
*       separate beam for each subfield.
*       Changes:
*       DMPR.INC  Changed NXBEM, NYBEM, BOBEM, BEMMAX to be dimensioned
*                 by MAXFLD.
*       DGDS.INC  Changed CNOBEM, BEMVOL to be dimensioned by MAXFLD.
*                 Added DO3DIM, UVROT, MAPROT.
*       GRDAT     Changed handling of IFIELD to allow multiple beams,
*                 added subscripts, added warning since should never be
*                 called with a beam anyway.  Set MAPROT, UVROT in
*                 common.  Changed setting of shift parameters for call
*                 to SHIFTP using SHFTXY.  Dropped FXSHFT hoping that
*                 all the old buggy images are gone.
*       IMHCOR    Changed handling of IFIELD to allow multiple beams,
*                 added DO3DIM to set CRV, CRP differently, moved
*                 coordinate computation to XYSHFT.  Set common MAPROT,
*                 UVROT.
*       XYSHFT    (NEW) Routine to compute shifted RA, DEC from the X,Y
*                 shifts.
*       GRCMEM    Changed handling of IFIELD to allow multiple beams.
*       GRDCOR    Changed handling of IFIELD to allow multiple beams.
*       GRDMEM    Changed handling of IFIELD to allow multiple beams.
*                 This actually changes the scaling of u,v for the beams
*                 depending on the relative sizes of beam to image.
*                 Added code to rotate phase shifts and uvw's to the
*                 ones for each field on DO3DIM.
*       GRIDUV    Changed handling of IFIELD to allow multiple beams.
*                 Note beam u,v scaling now goes with field.
*                 Added code to rotate phase shifts and uvw's to the
*                 ones for each field on DO3DIM.
*       GR3DUV    (NEW) Routine to do gridding a la GRIDUV but to allow
*                 data to be slightly mis-sorted due to re-projecting
*                 uvw.
*       IMCREA    Changed handling of IFIELD to allow multiple beams,
*                 added DO3DIM to set CRV, CRP differently, moved
*                 coordinate computation to XYSHFT, changed Classes to
*                 IMAPnn, IBEMnn with leading zeros.  This probably does
*                 not create images in fact since it had MAXFLD=16 in
*                 effect hard coded.  Set MAPROT, UVROT in common.
*       IMGMEM    Changed handling of IFIELD to allow multiple beams.
*                 Note beam u,v scaling now goes with field.  Set UVROT,
*                 MAPROT in common.
*       MAKMAP    Changed handling of IFIELD to allow multiple beams.
*                 Note beam u,v scaling now goes with field.  Changed
*                 comments on DOBEAM because it does not make a proper
*                 beam image (no FFT, no gridcor).  Set UVROT, MAPROT in
*                 common.  Call GR3DUV on 3D rather than GRIDUV.
*       OLDMAP    As MAKMAP.
*       UVGRID    Changed handling of IFIELD to allow multiple beams.
*                 Note beam u,v scaling now goes with field.
*                 Added code to rotate phase shifts and uvw's to the
*                 ones for each field on DO3DIM with warning (should not
*                 actually be used).  Call UVPROT on 3D.
*       UVGRTB    As UVGRID.
*       UVTBGD    As UVGRID.
*       QUVUTIL   Changed call seq to OUVIMG to specify whether 1 of
*                 NFIELD fields are done and to require NFIELD > 0
*                 (DOBEAM alone says beam or image).  Changed internally
*                 to do 1 or more images and 1 or more beams, to sum
*                 weights for each beam if DO3DIM, added subscripts as
*                 needed, changed calls to IMGMEM etc for beams.
*                 Changed call to VSCDFT, VSFDFT (to do all fields).
*                 Added calls to SETDO3 lots of places.
*       SETGRD    Changed to examine all beam sizes in setting scratch
*                 file size.
*       GRDFIT    Removed references to NXBEM, NYBEM - NXMAX must
*                 include NXBEMs.
*       UVWAIT    Removed references to NXBEM, NYBEM - NXMAX must
*                 include NXBEMs.
*       CLEAN     Changed local var DBNAME to MAXFLD and loop over beam
*                 creation based on 2nd dim of DIRTBEAM.
*       QCLEAN    Changed local vars DBNAME, NXBEM, NYBEM, BEMMAX to
*                 MAXFLD.  Changed local MAPROT to MROTAT.
*                 CLNINI  Loop over beams, actually set NXBEM before
*                         use, new call seq OUVIMG
*                 CLNIM   To use (1)
*                 CLNUV   Add loop over fields when DO3D, handle <0 errs
*                         from CLNCYC, move CLRMAX call to after TV
*                         (which changes windows)
*                 CLNCYC  Add field arg, return -1 on field arg <= 1,
*                         return -2 when no comps this field, loop on
*                         spec fields only, fix CDECID/CLMPAC calls
*                         save RESMAXs suitably and ignore FINISH in
*                         loop
*                 CLBHIS  To use (1) only.
*                 CLRHIS  Add field argument
*                 CDECID  Add 2 args: field in, doit out
*                 CLBSHV  Add field argument
*                 CLMPAC  Add field argument, control loops
*                 CLSCRS  To use (1) only.
*                 CLGFIT  To use (1) only to fit a beam!
*                 CLACLN  Add field argument
*                 CLRMAX  Add field argument, change to return max in
*                         full images and max in windows
*       POPSDAT   Add DO3DIMAG
*       NEWPARMS  Add DO3DIMAG
*       SHFTXY    (NEW) - get RASHIFT and DECSHIFT given the map
*                 rotation and the two pairs of (Ra,Dec)
*       XYSHFT    (NEW) - Get new RA,Dec given input ra/Dec, rotation,
*                  and shifts.
*       PRJMAT    (NEW) - get re-projection matrices for uvw's and for
*                 xyz's including independent input uv rot and output
*                 image rotations.
*       PRJMUL    (NEW) - multiply (u,v,w) or (x,y,z) matrices times
*                 outputs of PRJMAT.
*       UVMSUB    Add field number argument change call to VISDFT,
*                 GRDSUB, UVMTYP.
*       UVMTYP    Add field number argument.
*       UVMDIV    Change call to UVMTYP, UVMSUB, VISDFT
*       UVPDIV    Change call to UVMSUB
*       PBUTIL    Changed call sequence to PBFSUB and 2 internal
*                 routines.
*       VISDFT    Add code to do 3d - in this case to rotate the CC
*                 component phases to the uvw system of the input uv
*                 data.  Add argument to limit to 1 field.
*       VSCDFT    Add code to do 3d - in this case to rotate the CC
*                 component phases to the uvw system of the input uv
*                 data.  Add argument to limit to 1 field.
*       VSFDFT    Add code to do 3d - in this case to rotate the CC
*                 component phases to the uvw system of the input uv
*                 data.  Add argument to limit to 1 field.
*       SETGDS    Added code to test headers to see if we can figure out
*                 whether the images were DO3D or not.  3D images are
*                 all centered, non 3D images are all same RA, Dec
*       SETDO3    (NEW) to determine just DO3DIM when we have all rest
*                 of cccno, ccdisk, mfield.
*       GRDSUB    Add argument to limit to 1 field, clean up typing,
*                 call ALGSTB not ALGSUB if DO3DIM
*       ALGSUB    Add error test on DO3DIM, minor typing fixes.
*       ALGSTB    re-project uvw to field and back; use UVPROT on DOROT
*                 or DO3DIM
*       UVPROT    NEW - Find max abs(u) after rotation or re-projection
*                 even if already in header
*       Minor typing  fixes only to:
*       FRQTAB   FFTIM    GETCTL   GRDSET   UVUNIF   UVTBUW   UVTBUN
*       UVDOUT   CCSGRD   GRDCRM   SHIFTP   UVPREP
*       Image making tasks had to be changed except for SCMAP and WFCLN.
*       The default DO3DIMAG parameter is false in QCLEAN and QUVUTIL
*       and hence does not need to be set in SCMAP and WFCLN.  I should
*       change SCMAP someday, when mutiple fields are added to the task.
*       Others:
*       IMAGR     Added new DO3DIMAG adverb, changed dimensions of beam
*                 names and parameters and handling, changed FIELDF to
*                 read RA and Dec as well as shifts (call SHFTXY)
*       MX        Added subscript (1) to NXBEM, NYBEM, BOBEM, BEMMAX,
*                 CNOBEM; added DO3DIM false; changed output naming
*                 conventions.  Dropped local MAPROT.
*                 Change calls to VISDFT, UVMTYP, GRDSUB
*       HORUS     Added DO3DIM false, subscript (1) to several
*                 parameters, changed IBEAM to IBEM.
*       Tasks that call SETGDS need only set DO3DIM false if they do not
*       call it.  Changed ASCAL, BLCAL, BPASS, CALIB, CPASS, FRING,
*       and VSCAL.  Somewhat more complicated were
*       PCAL      Change call to UVMSUB, added DO3DIM false
*       LPCAL     Change call to UVMSUB, added DO3DIM false
*       UVADC     Change call to VSCDFT, added DO3DIM false
*       UVSUB     Change call to UVMSUB, added DO3DIM false
*       SPCAL     Removed unused DGDS.INC.
*       UVMOD     Change to do W term in phases!
*       Help files changed:
*       IMAGR.HLP Document DO3DIMAG, new Coordinates cards.
*       UVMOD.HLP Change to admit the W term.
*       Changed ASCAL, BLCAL, BPASS, CALIB, CPASS, FRING, VSCAL, PCAL,
*       LPCAL, UVADC, UVSUB help files to state that DO3DIMAG models are
*       supported and HORUS, MX, SCMAP, WFCLN help files to say that
*       they are not.  Changed COMAP and MAPIT help files to recommend
*       SCMAP instead of the old procs.
*       Moved nowhere.

*9401.  April 29, 1997          SDLSF                   Eric
*       Added options DOALL and NCOUNT to control whether all records at
*       a given time are averaged to fit a single baseline to apply to
*       all (or are done individually) and to control the order of the
*       fit baseline (previously NCOUNT=1 was hard-coded into the task).
*       Moved to brador (Tucson) this day, nowhere else.

*9402.  April 30/May 1, 1997          OTFUV                    Eric
*       Fixed bug in which the offsets for some channels were not forced
*       to zero if the user's selected BCHAN > 1.  Also BCHAN and ECHAN
*       did not appear in the history file.
*       The alternate reference pixel was not adjusted for BCHAN and
*       the reference coordinates were not put in the image header other
*       than abs observed ra/dec.
*       Moved to brador (Tucson) this day, nowhere else.

*9403.  May 2, 1997          PRTSD, UVPRT                     Eric
*       Changed these tasks to use the cal package INITVS option.  This
*       makes both run very much faster when BCOUNT is non-zero.  Also
*       pulled TFDHMS.FOR from PRTSD to use elsewhere in formatting
*       times.  TODHMS uses integer seconds, TFDHMS allows floating
*       seconds with a specified number of digits.
*       Moved nowhere.

*9404.  May 5, 1997         UPDCONTROL                   Eric
*       Moved the build of COMRPL.UNQ and COMLNK.UNQ ahead of the
*       special problems section and then changed tests on COMLNK.AT
*       (which referred to the previous midnight job not the current) to
*       tests on the just created COMLNK.UNQ.  Also changed the form of
*       the grep on TPMON which was designed for after COMLNK was done.
*       Needs to move by hand to avoid midnight job problems.

*9405.  May 5, 1997              PRTAC                     Eric
*       Several formats needed to be 5xx rather than 4xx with the CVX
*       version now being included in the list of versions.
*       Moved to Tucson today.

*9406.  May 5, 1997              FITTP                     Eric
*       Added code to write beam parameters to header on uv data as
*       well.  They are used for single-dish beam size.
*       Moved nowhere.

*9407.  May 5, 1997              HITIME                   Eric
*       Put leading 0's into floating parts of output format to make it
*       look nicer.
*       Moved nowhere.

*9408.  May 5, 1997                SDVEL                    Eric
*       New task to shift single-dish spectra so that the reference
*       channel velocity is correct for the actual pointing position.
*       It has various control and data editing options.
*       Moved nowhere.

*9409.  May 7, 1997                  DIFUV                       Eric
*       Renamed BSDIF to this more general name.  It can be used to
*       difference an input and residual uv data set to produce a uv
*       data set of the model.  So it is not just for beam-switched
*       continuum single-dish data.  REMOVE did not update LSAPROPO.HLP,
*       so did it by hand.
*       Moved nowhere.

*9410.  May 7, 1997                KNTR                          Eric
*       Add the option to have the step wedges in the full range of
*       image intensities rather than just PIXRANGE.
*       Moved from Tucson this date.

*9411.  May 7, 1997        DDTLOAD et al.                       Eric
*       DDTLOAD.001, VLACLOAD.001, and VLALLOAD.001 require changes
*       since the output beam name is now IBEM not IBEAM from MX and
*       IMAGR.
*       Moved from Tucson this date.

*9412.  May 8, 1997             VTEST                          Eric
*       New task to compute maximum velocity deviations across image
*       fields.
*       Moved nowhere.

*9413.  May 9, 1997                 AU8                     Eric
*       The test on extension numbers made a complaint when the max and
*       the specified were equal.
*       Moved nowhere.

*9414.  May 13, 1997               OTFUV                    Eric
*       Corrected subtle bug that caused the averaging to fail because
*       the scans were given relative times based on one JD0 which was
*       reset later, possibly to another value.  Added correction code
*       when this resetting takes place.
*       Moved nowhere.

*9415.  May 13, 1997               GR3DUV                    Eric
*       The 3D multi-pass gridding routine had a bug in testing whether
*       the current sample fell in the current swath.  It should have
*       recorded those below but simply ignored thos above.  Instead it
*       recorded both and got very confused, overwriting a lot of
*       memory.
*       Moved nowhere.

*9416.  May 13, 1997              ARRAY                     Eric
*       ARRBSC did not actually apply the FACTOR parameter.
*       Moved to Kitt Peak, nowhere else.

*9417.  May 14, 1997          HISTORY, BSGRD              Eric
*       Fixed format of HILIST output to drop extra blanks before
*       keywords.  Corrected bug in OHWRIT that affected only tasks with
*       6 character names.  BSGRD forgot to pass FACTOR on to the
*       correction routines and forgot FACTOR and ROTATE in history.
*       Moved nowhere.

*9418.  May 20, 1997              MCUBE                   Eric
*       MCUBE's handling of BLC and TRC was disasterous.  Removed these
*       adverbs from the task.  This may work better.
*       Moved nowhere.

*9419.  May 20, 1997              UVGET                   Eric
*       Bug - if there is an NX table, its values of max vis are used,
*       even if they are much larger than those present now.  In
*       particular, this hits TASAV files but could get others.  Changed
*       to test LSTVIS and FSTVIS against CATUV(KIGCN).
*       Moved nowhere.

*9420.  May 20, 1997            QEDIUTIL                  Eric
*       The units were confusing - changed to keep track of units and
*       scaling and to allow user input of delays and rates in more
*       usual units.  Fixed bug that stopped self-scaling of rates.
*       Moved bug fix to AOC aips via Leonia.

*9421.  May 22, 1997               QCLEAN                   Eric
*       The 3D was getting into trouble in some of its error tests.  The
*       minCC level was being set by the 1st field and then used to
*       judge the progress of the next field.  This produced erroneous
*       judgements that required abandoning Clean.  The program lost
*       some of its ability to judge when it was done as well.  Added
*       code in CLNUV to check the max in all windows and the min flux
*       and to check the totall CC count against NITER to set finish
*       before the TV code is called (and to tell you about it).  Also
*       changed it to sort the fields by peak in window and Clean in
*       that order.  The 1st field sets the min alogorithm flux used for
*       all fields.  Previously that slowly changed as field number
*       increased.
*       Moved to lemur for testing.

 9422.  April 15, 1997             $APGNOT/CLCAL.FOR      Ketan
                                   $APLNOT/SN2CL.FOR
        CLCAL now allows pass-through calibration, as well as 'proper'
        FQID and SOURCEID selection.  By choosing 'CALP', CLCAL can
        now be made to pass CL table records for which no SN table
        record is found.  This is dangerous but necessary if SN tables
        are constructed piecemeal as may be necessary for VSOP data.
        SN tables generated by single source data files and by OOP
        tasks may contain FQID=-1 and/or SOURCEID=0.  Such entries
        should match ALL CL table records.  This is perfectly obvious
        for FQIDs but a bit ambiguous for SOURCEIDs.
*       Removed unused variables from CLCAL and put FNDEXT upgrade into
*       SN2CL.
*       Moved to CVX 26 May by Eric.

 9423.  April 15, 1997             $QPGNOT/FRING.FOR      Ketan
        The format statements in FRING have been revised.  This was
        instigated by the need for more digits to be printed during
        HALCA fringe searches.
*       Made similar but not the same changes to CVX version.
*       Moved to CVX 26 May by Eric.

 9424.  April 17, 1997             $APLNOT/ORBIT.FOR     Leonia
        The subroutine returns back the input parameters of the orbit.
        Because the input parameters are changed inside the subroutine
        it could not be used in cycles. I renamed the input parameters
        inside the subroutine.
*       Moved to CVX 26 May by Eric.

 9425.  April 18, 1997            dbgwrap utility                Chris
        Added the source for a small program that allows an AIPS user
        to switch debuggers on the fly to SYSUNIX.  If dbgwrap is
        specified as a debugger the user will be prompted for a
        debugger to use every time he types GO with debugging enabled.
        This was motivated by a need to run AIPS tasks under the SGI
        performance monitoring tools which require a number of command-
        line arguments that can not be supplied using the standard
        AIPS debugging interface.
            New files are
                DBGWRAP.C in SYSUNIX     (program source)
                DBGWRAP.DOC in SYSUNIX   (documentation)
            Note that DBGWRAP.C is C++ not C (the Standard Template
        Library reduces the amount of code needed for this utility
        by a significant amount).
            This utility is, of course, not necessary for running AIPS.
*       Put the documentation in $DOCTXT where it belongs.
*       Moved to CVX 26 May by Eric.

 9426.  April 20, 1997            $QPGOOP/CL2HF.FOR         Ketan
                                  $QPGOOP/HF2SV.FOR
        Dave Gordon of USNO has made extensive[?] modifications to
        CL2HF and HF2SV which was originally written by Ed Fomalont.
        Ed has blessed the upgrade of these two tasks by Dave Gordon's
        replacements.  I have pushed Dave's modifications through the
        SOL compiler and have removed most non-standard FORTRAN stuff.
        Compilation still gives some warnings about I*2 which Ed says
        is necessary to use.  CL2HF.HLP and HF2SV.HLP will be modified
        in the _near_ future to recommend the user to Dave Gordon's
        guide for Geodesy/Astrometry data reduction in AIPS.
*       Added ASTROMETRY category to CL2HF.HLP.
*       Moved to CVX 26 May by Eric.

 9427.  April 20, 1997            $APGNOT/JMFIT.FOR         Ketan
        Although JMFIT is properly driven by using small regions around
        the image features being fitted, sometimes these regions can
        have lots of pixels across them.  I have encapsulated the
        declarations of the max. number of pixels that JMFIT can deal
        with and increased it from 2025 to 10000.
*       Added change to IMFIT as well; FLUX not used in CVX's JMFIT.
*       Moved to CVX 26 May by Eric.

 9428.  April 21, 1997                BLING                 Chris
        Inserted a test on AEXIST(A) to the baseline stacking loop
        in DOSOLI so that BLING does not examine baselines for
        which they can be no data.  Not only did the lack of this
        test introduce unneccessary computations into this loop
        but the memory hits on unused areas of the intermediate data
        buffer, IBDATA, lead to cache-line contention on the Origin
        200 (and probably other machines) making baseline stacking
        a severe performance bottleneck.  Run-time has improved from
        107 sec to 17 sec on the Origin for the VLBDDT test case:
        the L2 data cache hit rate has gone from 29.8% to 98.3%.
        May 20, 1997              BLING                      Chris
        Added summary reports giving delay, rate and acceleration
        for each solution interval and polarization for which fringes
        were found.
*       Inserted CVX date upgrade in aoc version.
*       Moved to CVX 26 May by Eric.

 9429.  April 24 1997       Printers under UNIX             Chris
        The PRINTER change introduced an environment variable named
        LPTYPE into the AIPS environment: this variable is also
        interpreted by the SVR4 print service resulting in a complete
        failure of AIPS printer support under Solaris 2.x.
        Changed LPTYPE to PRTYPE in START_AIPS, ZLPCL2, ZLASCL (all
        in SYSUNIX), and PRINTR.FOR (in AIPSUB).
*       Moved to CVX 26 May by Eric.

 9430.  April 30 1997      $APGNOT/OBEDT.FOR                Leonia
        The orbiting VLBI provides some additional requirements which do
        not have a place at the case of the classic ground based VLBI
        network. For example the Sun can be eclipsed for the orbiting
        antenna and as a result the battery will not be charged properly
        and the whole orbiting hardware will not work properly. So the
        user can want to flag such data in advance. He can want to flag
        data using another parameter (distance, speed ..) as a
        criterium.  The new task OBEDT allow to flag the orbiting
        antennas data under control of OPTYPE (five options) and the
        lower and upper limit of the selected parameter. The data are
        flagged if the selected parameter is between these lower and
        upper limits. In principle the value of the selected parameter
        could be taken from the OB table. But possible big gaps in time
        at the OB table could provide errors at the estimation of the
        edge times. To circumwent this problem the task uses the AN
        table reading the six parameters of the orbits. If the AN table
        is not filled out by the orbits parameters, the task
        reconstructs the orbits using OB table data. If OB table does
        not exist, an user can use the orbit determined by selected six
        parameters. In the all three cases the value of the selected (by
        OPTYPE) parameter is calculated with the selected time step.
*       Moved to CVX 26 May by Eric.

 9431.  April 30 1997   ZMOUN2, ZTAP2 in APLSGI          Chris
        ZMOUN2.C and ZTAP2.C in APLSGI have been revised for IRIX 6.x.
        Non-rewind, variable-blocksize devices should be used (eg. an
        Exabyte 8500 as device 5 on SCSI adaptor 1 should be listed in
        TPDEVS.LIST as /dev/rmt/tps1d5nrv.8500) and mediad should be
        configured to ignore any tape devices used by AIPS (mediad
        makes it impossible to use variable blocksizes).  Exabytes,
        DATs and 9-track tapes are nominally supported.  Exabyte
        compression modes are not supported at this time, however.
        I have verified that FITS files can be exchanged between
        IRIX and Solaris systems on Exabytes at both high and low
        density: other file formats and device types have not yet been
        tested.
        The old ZMOUN2.C and ZTAP2.C, which do not compile under IRIX 6
        have been renamed ZMOUN2.CI5 and ZTAP2.CI5.
*       Moved to CVX 26 May by Eric.

 9432.  April 30, 1997              TABINI                 Chris
        Modified TABINI to use manifest logical constants rather than
        variables initialized to .TRUE. and .FALSE..  On the SGI
        F was being initialized to 00000000 hex if TABINI was not in
        a library and ffffff hex (interpreted as true) if it was in
        a library (at least when called from FITTP).  This is
        clearly an IRIX bug but the code clean-up is probably
        desirable anyway.  Similar problems may be lurking elsewhere.
*       Inserted change in CVX version of TABINI.
*       Moved to CVX 26 May by Eric.

 9433.  May 2, 1997              VBGLU                    Chris
        Added some missing terms to the tests that determine which
        file a given IF comes from in the 3-file and 4-file cases.
        The output FQ table should new be correct for 3 and 4 file.
*       Moved to CVX 26 May by Eric.

 9434.  May 5, 1997              $QPGNOT/CPASS.FOR        Athol
        Correct a word alignment error in BPSEL, which passed a
        real array to CHNCOP where a double precision array
        was required (see #9245 above). This failed on the SGI
        system which has double load/store as a default, but had
        no effect on other architectures. Also added check in
        XPSCAL to avoid divide by zero for null spectra, and
        changed erroneous reference to CPASSPRM to the correct
        BPASSPRM.
*       Insertted change in CVX version.
*       Moved to CVX 26 May by Eric.

 9435.  May 6, 1997               $YPGNOT/OBPLT.FOR      Ketan
                                  $HLPFIL/OBPLT.HLP
        OBPLT is a new task which allows various columns of the
        OB table to be plotted against each other.  By design, the
        inputs are minimal.
        May 7, 1997               $YPGNOT/OBPLT.FOR      Ketan
        I tried to pull one over on the compilers, the LINUX
        compiler found me out and complained about calling sequences
        not being aligned.
        May 6, 1997               $YNOT/PLINIT.FOR        Ketan
        $YNOT/PLAXES.FOR, $YNOT/PLPNT.FOR, $YNOT/PLPGO.FOR
        $YNOT/PLLINE.FOR, $YNOT/PLDRW.FOR, $YNOT/PLCLOS.FOR
        $INC/DPLD.INC
        Athol has implemented a _small_ subset of 'PGPLOT-like'
        routines within APCAL.  These routines have now been used
        within OBPLT as well.  Therefore, these routines have been
        extracted from within APCAL.FOR and are now going into $YNOT
        and $INC
        May 8th, 1997             $YPGNOT/APCAL.FOR      Ketan
        The plotting routines above were based upon routines
        in APCAL and in this revised version of APCAL, those
        routines no longer appear internally.
*       Cleaned up typing some in plot subroutines and placed them in
*       $YNOT since they are not general and clean enough for $YSUB.
*       Moved to CVX 26 May by Eric.

 9436.  May 8, 1997            ALIAS                  Ketan
        $HLPFIL/POPSDAT.HLP, $APLSUB/ALIASA.FOR, $APLSUB/ALIAS.FOR
        $YPGNOT/VPLOT.FOR, $HLPFIL/VPLOT.HLP, $RUNSYS/NEWPARMS.001
        A new adverb called ALIAS has been introduced for use in
        SVLBI applications.  Together with this adverb, two
        subroutines were added.  The subroutine ALIASA should be
        used to rearrange the ALIAS adverb list into a more
        suitable form.  The subroutine ALIAS should be used to
        determine if any antenna is supposed to be aliased into
        another antenna.  The ALIAS keyword has been implemented
        in VPLOT.  Search VPLOT for instance of ALIAS for an
        example of the implementation of the ALIAS keyword.
*       Cleaned up ALIAS Fortrans to allow them in $APLSUB, inserted
*       change in CVX VPLOT.HLP, wrote ALIAS.HLP ignored by Ketan,
*       put change in CVX's POPSDAT and NEWPARMS.
*       Moved to CVX 26 May by Eric.

 9437.  May 13, 1997              FILLM                  Gustaaf
        Decided to put back the version of FILLM with the Van Vleck
        correction as a - hidden - option.  I am pretty sure it
        works, but so far we have been unable to find data that
        would benefit and I could test it on.  Main reason is a
        saturation effect in the online system that clips high
        correlations - which are the ones that benefit from Van
        Vleck correction in the first place.  We need to wait for
        D-array to properly test this; until then the option will
        remain hidden, but the code is all there.
        May 16, 1997         FILLM                           Gustaaf
        The data format on the Modcomp tape involves a scale factor
        and its exponent.  Due to saturation of very strong sources
        the VLA online code was recently modified to allow this
        exponent to be of the opposite sign. This caused a logical AND
        in the FILLM code to fail.  This AND (which was there for very
        old formats only and until now worked fine on new format data
        too) has now been removed for data formats after 1988.
*       Inserted changes in CVX version.
*       Moved to CVX 26 May by Eric.

 9438.  May 13 1997            GPSDL                  Chris
        Added a fiddle-factor to adjust the predicted Faraday
        rotation to agree with that measured in the April
        test run.  Added an option to provide diagnostic
        printout.  Changed the TECMOD subroutine to use the
        LAPACK routine SGELSS and to buffer GP table data.
*       Moved to CVX 26 May by Eric.

 9439.  May 15, 1997             FITLD               Phil
        Several minor problems had accumulated. Saved the fixes
        until now:
        (1) Users were complaining that FITLD was finding subarrays
            in their data when there weren't any. In fact there are,
            since when changing sources rapidly the log based nature
            of the correlator results in fuzzy scan boundaries since
            some telescopes get to the new source more quickly than
            others. The VLBA on-line group are looking at this problem
            but in order to demonstrate that subarrays exist I print
            the offending information with the subarray message.
        (2) Some old data have the occasional source number of 0 in the
            distribution FITS files. Fixed FITLD to skip such entries.
        (3) The correlator now writes CALCODES. The FITLD code to check
            whether a source in an incoming file matches an existing
            source in the file on disk was changed to compare only the
            first character of the CALCODE string. Previously the
            comparsion was failing and the SU table was bloated with the
            result that SPLIT would run several times on the same
            source.
        (4) Ensured that the IM table is correctly sorted after each
            file is loaded. This was causing problems for rapid source
            switching observations.
        (5) Ensured that the CATBLK is updated after the CQ table is
            created.
        Update FITLD's welcoming message.
*       Inserted changes in CVX version.
*       Moved to CVX 26 May by Eric.

 9440.  May 21, 1997       PCLOD                            Leonia
        The default value for FQTOL has confused people. It was exact
        match.  For some reason exact match does not have a place in
        many cases.  At the same times in major cases there is no
        requirements to the frequency match. That's why I changed the
        default for FQTOL from exact match to ignore match. It was done
        adding additional condition in subroutine MATFID.
*       Inserted changes in CVX version.
*       Moved to CVX 26 May by Eric.

 9441.  May 23, 1997        POSSM                          Phil
        Trivial change to tidy up a format statement.
*       Inserted changes in CVX version - and did it right.  The wrong
*       character position was referenced in one of two cases.  The 4
*       formats did not need changing.
*       Moved to CVX 26 May by Eric.

 9442.  May 23 1997           PARALLEL verb                Chris
        Added a PARALLEL verb to AIPS which controls the number of
        processors that will be used for AIPS tasks that have been
        compiled with multiprocessor support.
           Changed AU2.FOR in AIPNOT and POPSDAT.HLP in HLPFIL.
           Added ZPARAL.FOR in APLGEN, APLSOL and APLSGI and
        PARALLEL.HLP in HELPFIL.
*       Added PARALLEL to CVX NEWPARMS as well, made change to CVX
*       versions of AU2 and POPSDAT.
*       Moved to CVX 26 May by Eric.

 9443.  May 23, 1997       $APLNOT/APLPBI                 Pat/Martin S.
        Implemented a bug fix at Martin Shepherd's request: APLPBI was
        failing to apply the primary beam cutoff to non-VLA
        (i.e. gaussian) primary beam corrections.
*       Moved to CVX 26 May by Eric.

*9444.  May 27, 1997            ABOUT files                 Eric
*       Ran SHOPH and followed instructions to change:
*       ZZADVERB.HLP   ZZASTROMET.HLP ZZCALIBRAT.HLP
*       ZZCOORDINA.HLP ZZEDITING.HLP  ZZHARDCOPY.HLP
*       ZZMODELING.HLP ZZPLOT.HLP     ZZPOPS.HLP
*       ZZSINGLEDI.HLP ZZSPECTRAL.HLP ZZTABLE.HLP
*       ZZTASK.HLP     ZZUV.HLP       ZZVERB.HLP
*       ZZVLA.HLP      ZZVLBI.HLP
*       Moved nowhere.

*9445.  May 27, 1997            CVX CookBook                 Eric
*       CVX has progressed too far to leave the CookBook in the hands of
*       the others.  Changed:
*       COOK82   .MAC - changed it to make .NDX rather than .ndx files.
*       COOK0    Changed T of C for Chapters 9, 10, 13.
*       COOK9    Insert/change references to SCMAP, SNEDT, EDITR for
*                VLB.  Correct type setting to allow additional large
*                figure.  Correct and enhance indexing.
*       COOK10   Update the single-dish chapter to include upgrades of
*                old programs plus the beam-switched continuum, SDLSF.
*       COOK13   Complete update all sections.
*       COOKI    Rebuilt with chapters 9, 10, 13.
*       RECIPE   Rearranged as recipes got rearranged in files.
*       Also .NDX files for chapters 9, 10, 13.
*       COOKNX   Added line to skip comments (from the gnu copyleft) in
*                the input file.
*       Moved nowhere.

 9446.  June 5, 1997           $SYSUNIX/CAD               Pat
        Created a perl script to Check an AIPS Data area (CAD).  This
        will, given a usernumber and a directory name, check for minimal
        consistency in the files that represent the user's catalog on
        disk.  All slots represented by the existing files are checked
        to make sure they have a CB file, and either a MA, UV, or SC
        file as well.  Zero-length files and missing files cause it to
        scream.  For each catalog slot in which something is wrong, it
        lists exactly what it found.  When programs get killed
        unexpectedly (e.g. power outage), this can be invaluable in
        seeing if one has to clean up a user's catalog with RUN RECAT.
*       Moved to CVX this date (change #9357).

*9447.  June 4, 1997       g77 implied              Eric/Jeff
*       Changed:
*       KWICK    $AIPSUB: length of STRING could not handle max strings
*                now allowed in aips.
*       GETFLD   $AIPSUB: wrongly passed length 132 for 80-char string.
*       GETSTR   $APLSUB: set full out string blank w/o length
*                parameter, use LMAX = min (NMAX, len (outstr)) instead
*                of NMAX.
*       Moved to aoc aips by Jeff.

*9448.  June 5, 1997           OTFUV, OTFBS               Eric
*       The tests for concatenation of a second data set checked the
*       center RA and Dec which used to be never actually set.  I fixed
*       that so now the tests fail to allow users to concatenate
*       multiple pointings.  Fixed to ignore axes 4 and 5 coordinates.
*       Moved to Kitt Peak and Tucson this date.

*9449.  June 6, 1997              FILLM                   Eric
*       Split the TY table writing from the CL and OT so that it can be
*       on a different interval.  Fixed the testing of times for writing
*       CL and TY tables - it was subtracting a millisecond and then
*       requiring greater than.  Since a millisecond is < the least bit
*       in a R*4 day this failed and the tables were written with longer
*       (and somewhat erratic) intervals.  Corrected the formats of time
*       displays and to use TFDHMS.  Added NCOUNT adverb for number of
*       files to read, changing CPARM(9) to TY time increment.
*       Moved nowhere.

*9450.  June 6, 1997               PRTAB                  Eric/Chris
*       Fixed the printing formats for times using TFDHMS.
        Added Chris's fixes on list of tables with times and spelling of
        ascii.
*       Moved nowhere.

*9451.  June 6, 1997            CVX CookBook                 Eric
*       CVX has progressed too far to leave the CookBook in the hands of
*       others.  Changed:
*       COOK1    New numbers for code size (with footnotes), aips++
*                footnote, new www address for CVX, CVX edition
*       COOK2    New startup message, cvx version
*       COOK3    Undo references to the version date of Chapter 13 which
*                are never right.  HELP \CR now does HELP TASK.   WWW
*                address, CVX incompatible.
*       Moved nowhere.

*9452.  June 7-8, 1997         CookBook found               Eric
*       IMAGR.HLP   Stll contained the remark that IN2SEQ has to be 0 -
*                   which is not true.
*       CLBPA       Had a bad print level in the GCALC2 call; it was
*                   correct in all the others.
*       EDITR.HLP   Inputs section had bad wording on BCHAN...EIF.
*       Moved nowhere.

*9453.  June 9, 1997            CVX CookBook                 Eric
*       CVX has progressed too far to leave the CookBook in the hands of
*       others.  Changed:
*       COOK0       Updated for chapter 4 and 5
*       COOK4       Add section on EDITA, change FILLM for Tant etc,
*                   more stuff about BPASS, BPSMO, BPLOT, ...
*       EDITA.PLT   New picture for Chapter 4.
*       COOK4.NDX   Revised index.
*       COOK5       Fix reference to Clark article (page number wrong).
*                   Added remarks about BOXFILE and DO3DIMAG in IMAGR
*                   sections and replaced IBLED with EDITR.
*       COOK5.NDX   Revised index.
*       COOKI       Updated for chapter 4 and 5
*       RECIPE      Added new recipes and moved things around to match
*                   current files.
*       Moved nowhere.

*9454.  June 12, 1997          Big Files               Eric
*       To be able to handle files > 2 Gbytes, AIPS must stop using
*       "bytes" (either AIPS or real) in non-Z routines.  Instead we
*       will use AIPS blocks (256 integers = 512 AIPS bytes = 1024 real
*       bytes).
*       1. Changed call sequence to ZCREAT and consequently changed:
*       AU2      CATCR    SGLAST   SGLOCA   STORES   CATDIR
*       CATOPN   EXTINI   FILCR    HICREA   TABCOP   TABINI
*       GINIT    OTBSRT   AIPSC    FILAI2   FILAIP   FILINI
*       MOVE     TAFLG
*       2. Changed call sequence to ZCMPRS and consequently changed:
*       PRTMSG   HICLOS   TABIO    GFINIS   PRTAC    FILLM
*       3. Changed call sequence to ZEXIST and consequently changed:
*       UVDATA   FILINI   DISKU    MOVE     FILLM    FITLD
*       OTFBS    OTFUV
*       4. Changed call sequence to SCREAT and consequently changed:
*       APROLL   PRTPL    TRANS    CONVL    APGS     APVS
*       STEER
*       5. Created UVSIZE, a little routine to compute uv file size
*       without overflow.  To use this instead of local computations
*       changed:
*       UCMPRS   UVCREA   CALCOP   ITBSRT   UVDPAD   VISDFT
*       VSCDFT   UVSORT   VSFDFT   UVSRT    GRIDR    PCAL
*       LPCAL    BPASS    CPASS    SDIMG    UVMAP
*       6. Also changed:
*       HICLOS   Stored a capacity 1 physical record too few when
*                compressing.
*       MAPSIZ   Divided NBPS by 512 in size computation.  NB: this
*                forces NBPS to integer * 512 (it is usually 512).
*       MCREAT   Just renamed BYTE variable to SIZE.
*       CALCOP   Changed to call UCMPRS rather than ZCMPRS.
*       CVEL     Changed to call UCMPRS rather than ZCMPRS.
*       SDVEL    Changed to call UCMPRS rather than ZCMPRS.
*       Moved nowhere.

*9455.  June 12, 1997         AIPS I/O                   Eric
*       Make changes to basic I/O to handle larger files:
*       ZDCHIN   $APLGEN: Changed values of FCBSP1 - 4 and comments.
*                Also CR and 3090 versions.
*       ZCMPRS   $APLGEN: Droped divides multiplies by 512; ZCMPR2
*                already gets argument in blocks.  Also APLCRI.
*       ZCREAT   $APLGEN: Changed to call ZCREA2 with blocks as
*                arguments.  Also APLCRI.
*       ZEXIST   $APLGEN: Effectively just change comments, ZEXIS2 must
*                now do blocks.
*       ZEXPND:  $APLGEN: Dropped a divide by 512 to make all units
*                records.
*       ZCMPR2   $APLGEN: modify comment
*       ZCMPR2   $APLUNIX: change nbytes to off_t type and handle it
*                more carefully.  Add code to measure file size and set
*                that into FTAB and fix last byte position to -100.
*                Also APLCRI (which is not different).
*       ZEXIS2   $APLGEN: modify comments.
*       ZEXIS2   $APLUNIX: change size returned by dividing by 512.
*       ZEXPN2   $APLGEN: modify comment.
*       ZEXPN2   $APLUNIX: change size to off_t, test and memcpy sizes
*                between off_t's and fcb array.  Also reset last i/o to
*                -100 to force next i/o to lseek.
*       ZFI2     $APLGEN: modify comment.
*       ZMI2     $APLGEN: modify comment.
*       ZDAOPN   $APLGEN: modify comment.
*       ZMIO     $APLUNIX: new version ignores buffer number since I/O
*                is synchronous anyway.
*       ZWAIT    $APLUNIX: new version ignores buffer number since I/O
*                is synchronous anyway.
*       ZFI2     $APLUNIX: use memcpy to pick up file size and pick up
*                and store the lastbyte (previously) read/written in the
*                integer fcb.  Do the lseek only if needed - should be
*                faster.
*       ZFI2     $APLUNIX: use memcpy to pick up file size and pick up
*                and store the lastbyte (previously) read/written in the
*                integer fcb.  Do the lseek only if needed - should be
*                faster.  This is what forces using only one of the
*                fcb's.
*       ZDAOPN   $APLUNIX: Init the fcb parameters with memcpy from
*                off_t  i/o position (= -100) and fstat size.
*       ZCREA2   $APLGEN: change comments.
*       ZCREA2   $APLUNIX: change comments and units on size in/out
*                parameters, carry bytes as off_t.  Added code to test
*                for file exists and return its size early in code.
*       ZCREA2   $APLDEC: change comments and units on size in/out
*                parameters, carry bytes as off_t.  Also APLSGI, APLIBM,
*                APLBERK, APL3090, VMS (MAR routine), APLULTRX.
*       ZMSGEX   $APLUNIX: change units of calls to ZEXIST. also APLCRI.
*       Moved nowhere.

*9456.  July 1, 1997           Dates                   Eric
*       Changed DATFST to do new FITS dates after 1 Jan 1998.
*       Moved nowhere.

*9457.  July 3, 1997           IMAGR                    Eric
*       Fixed BPASET to make sure that the negative IERR's returned
*       (possibly) by TABBP did not get outside the area where they were
*       understood.  Other routines using TABBP already covered this,
*       but if the last record used in the BP table was fully flagged in
*       1 or more IFs, then the cal routines would die after the call to
*       BPASET.
*       Fixed IMAGR to handle the Field lines in BOXFILE properly.  If
*       The C type were used, the values were not saved away due to a
*       counter handling error and on both F and C types, fields 1 and
*       NFIELD could not be set.
*       Moved to siamang this day.

 9458.  May 27 1997        Astrometry Tasks     Chris for David Gordon
        Updated CL2HF, HF2SV and their corresponding help file.  Added
        a HELP ASTROMETRY file giving an overview of astrometry/geodesy
        processing in AIPS.
*       Moved from AOC aips 4 July by Eric.

 9459.  June 5, 1997           $SYSUNIX/CAD               Pat
        Created a perl script to Check an AIPS Data area (CAD).  This
        will, given a usernumber and a directory name, check for minimal
        consistency in the files that represent the user's catalog on
        disk.  All slots represented by the existing files are checked
        to make sure they have a CB file, and either a MA, UV, or SC
        file as well.  Zero-length files and missing files cause it to
        scream.  For each catalog slot in which something is wrong, it
        lists exactly what it found.  When programs get killed
        unexpectedly (e.g. power outage), this can be invaluable in
        seeing if one has to clean up a user's catalog with RUN RECAT.
        Moved initial change to CVX
        June 6, 1997                                      Pat
        Make it independent of Perl version
*       Moved from AOC aips 4 July by Eric.

 9460.  June 10, 1997      $YPGNOT/IBLED and .HLP           Athol
        Modify IBLED to allow an overlay plot of model amplitude
        as derived from an external CLEAN component table. This
        plot can be selected or de-selected using a new
        "PLOT MODEL" option of the left-hand menu. The model
        plotting supports multi-field data, and is useful for
        editing gravitational lens datasets in particular.
*       Removed a ton of TAB characters and a dozen blank lines at the
*       end of the file.
*       Moved from AOC aips 4 July by Eric.

 9461.  June 12, 1997      $APGNOT/SNSMO.FOR and .HLP      Athol
        Miscellaneous fixes and changes accumulated in local
        versions: i) allow smoothing of tables attached to single
        source files; ii) add new smoothing option 'DELA' for
        smoothing of delays only; iii) add feature to control
        whether existing flagged solution entries are interpolated;
        activated using BPARM(6); iv) make messages more informative;
        no message regarding clipping unless selected; message
        regarding re-referencing now includes percentage of entries
        re-referenced; v) replace SNVER adverb with INVERS and
        OUTVERS to avoid preliminary TACOP step; vi) fix what
        appears to be a bug in SNREF; phase always re-referenced but
        delay and rate were only re-referenced for VLBI and VLMB
        smoothing modes. This allows the possibility of partial
        re-referencing; corrected this.
*       Removed a ton of TAB characters and a blank lines at the
*       ends of the files.
*       Moved from AOC aips 4 July by Eric.

 9462.  June 17, 1997     $APGNOT/SNCOR.FOR                Leonia
        When SNCORRPRM(1) > EIF, the parameter SNCORRPRM(1) has been
        forced to one for several opcode where IF's were involved.  In
        particular if OPCODE = 'cpsn', the task has coppied the first IF
        to the all determined range of IFs, if SNCORRPRM(1) > EIF.  If
        EIF=0 then the condition looks reasonable because EIF is
        recalculated to the maximum available IF at the data. But if EIF
        is fixed and EIF is less than maximum available IF at the data
        the condition provides a mistake copping the first IF instead of
        desiring one which is more than EIF. To fix this bug I have
        change the condition (in subroutine SNCCOR)
        SNCORRPRM(1) > EIF on
        SNCORRPRM(1) > maximum available IF at the data.
*       Changed the CVX version to include this correction, but done
*       properly testing on legal JLOCIF and the like.
*       Moved from AOC aips 4 July by Eric.

 9463.  June 17, 1997     POLINO     ACFIT              Leonia
        The new routine POLINO.FOR fits a polinom up to 19 degree
        by least square method.
        Lincoln Greenhill comlained that algorithm of fitting polinoms
        to find a baseline of spectra (in ACFIT) gives erronios result
        on his data. The algorithm used by ACFIT is very cloudly.
        I decided to write a separate general purpose routine for
        fiting a polinom to data (see #9362) and in particular to use
        it at ACFIT.
*       Copyleft date was corrected in POLINO.FOR.
*       Moved from AOC aips 4 July by Eric.

 9464.  June 20, 1997      $APGNOT/FITLD                   Phil
        Some changes for SVLBI and two bug fixes.
        1) The VLBA correlator group would like to ensure that FITS
        tables are no longer than 200 Mbytes and so they split a uv
        output table into several inside a single FITS file. FITLD could
        not handle this due to shortcuts taken in the file handling when
        it was first written. Corrected this.
        2) Ensured that the CQ table is not generated for data from
        correlators other than the VLBA.
        3) Penticton is writing the data weights as a spectrum - a legal
        thing to do. When the code was added for correlation-ids the
        handling of the weights was disrupted slightly. Fixed.
        4) A bug in the concatanation of files with source selection was
        fixed. The symptom was that source selection was ignored. I'm
        surprised this one hadn't bitten before, the circumstances in
        which it was seen were not bizarre.
        5) Ensured that the antennas are renumbered from file to file
        when necessary in the MC table. This is done for all other
        tables but was missed in this case.
        June 26, 1997        $APLNOT/IMSORT                 Phil
        Extracted a subroutine from FITLD that sorts IM tables into
        time-antenna order. This is now needed in INDXR also.
*       Changes made in CVX version of FITLD.  Copyleft date fixed in
*       IMSORT.FOR.
*       Moved from AOC aips 4 July by Eric.

 9465.  June 23, 1997      $YPGNOT/VPLOT                    Leonia
        Long time actually since the beginning VPLOT has printed at
        the header CC table version even if the model is not going
        to be plotted. It is annoyed people. Now CC table version
        together with the related image file name is printed only if
        the model is supposed to plot.
*       Moved from AOC aips 4 July by Eric.

 9466.  June 23, 1997      $APGNOT/CLCAL.FOR & .HLP         Athol
        Merge some CLCAL changes accumulated in local versions
        into TST. These include: i) add new adverb, CUTOFF, to specify
        a maximum time interval over which interpolation is to
        be performed; ii) do not pass blanked CL entries to the output
        CL table. Modified:
         $APLNOT/SN2CL.FOR - implement (i) and (ii).
         $APGOOP/BLAPP.FOR - modified call sequence to SN2CL.
        Several files in $RUNSYS to include new CLCAL adverb:
         MYVLA.001       TESTVLA.001      VLACLOAD.001
         VLALLOAD.001    CROSSPOL.001     VLBA.001
         VLAPROCS.001
*       MYVLA and TESTVLA are junk and were dropped from CVX.
*       Moved from AOC aips 4 July by Eric.

 9467.  June 25, 1997         ZPRMPT.C                      Jeff
        The ongoing g77 port turned up a null-termination related bug in
        GNU readline based prompting; ZPRMPT.C versions fixed under:
        $APLLINUX, $APLHP, $APLSOL, $APLSGI, $APLSUN, $APLDEC, $APLIBM.
*       Moved from AOC aips 4 July by Eric.

 9468.  June 26, 1997        $APLNOT/GETDEL        Tony Beasley/Phil
        Tony rewrote GETDEL to take advantage of the fact that IM tables
        will now be sorted before entering GETDEL. In addition he
        improved its extrapolation behaviour to avoid the GETDEL error
        messages we see on occasion due to a small number of VLBA
        records being > 2 minutes from an IM entry at the end of
        correlator jobs.
*       Typing and time formatting were corrected.
*       Moved from AOC aips 4 July by Eric.

 9469.  June 26, 1997        $APGNOT/INDXR                  Phil
        Now calls IMSORT before calling GETDEL.
*       FXHDEX call was inserted in aoc version.
*       Moved from AOC aips 4 July by Eric.

*9470.  July 5, 1997           BPASS                      Eric
*       Changed the help file and code to warn about the use of
*       DOCAL when combined with the IN3NAME option.
*       Moved nowhere.

*9471.  July 11, 1997           IMAGR                     Eric
*       Added handling for overlapped fields:
*       POPSDAT   New adverb OVERLAP.
*       NEWPARMS  New adverb OVERLAP
*       BOXFILE   Help: update for C/c card.
*       DO3DIMAG  New help file.
*       OVERLAP   New help file for new adverb
*       IMAGR     Help: add new adverb
*       IMAGR     For: add new adverb
*       QCLEAN:   CLNTV - add argument of field # so that Clean TV is
*                         restricted to one field
*                 CLNINI - pick up new adverb into Clean object common.
*                 CLNUV - use OVRLAP to decide Cleaning pattern and call
*                         to new CLOVER
*                         New pattern is subtract a field before imaging
*                         the next field which should be stable against
*                         overlaps.
*                 CLOVER - restore Components from all other fields that
*                         overlap the present field.
*       GRIDUV    Bug addressing AP when there is a gap in the U values
*                 in the data at the point where the routine switches to
*                 a new swath.  The AP got overwritten, potentially
*                 badly to cause addressing faults, but it could also
*                 fail at a level to cause bad beams/images only.
*       GR3DUV    The GRIDUV bug had propogated.
*       Chapter 5 of the CookBook was updated as well.
*       Moved GRIDUV fix to AOC by Pat this date.

*9472.  July 14, 1997                BLING                  Eric
*       Fixed BLING.FOR to make correct names for fields 2-N and to
*       declare dimensions with MAXFLD not some local parameter or
*       hard-coded 16.
*       Fixed BLING.HLP to admit to 64 fields rather than 16 and that 3D
*       images are supported.
*       Moved nowhere.

*9473.  July 15, 1997              METSCA                   Eric
*       Added some more extreme metric scaling names (and coorected an
*       error) based on George & Angelini OGIP Units paper.
*       Moved nowhere.

*9474.  July 16, 1997             BPASS                     Eric
*       The call to BPCLER was missing its last argument.  The question
*       is why did it seem to work - even today in the debugger when
*       debug libraries were used.  It started to die when BPASS was
*       the only thing compiled in debug.
*       Moved nowhere.

*9475.  July 22, 1997        VPLOT                      Eric
*       Changed Fortran and help to support the DO3DIMAG methods of CVX
*       IMAGR.  The help file needs only a comment.  The Fortran
*       required the addition of a Z position array, the addition of
*       which turned up an error in the previous model computation.  The
*       W baseline term enters not as sqrt(1-x*x-y*y) - 1 for the x,y of
*       each component in non-3D imaging, but only at x0,y0 for each
*       field.  This made a noticeable (small) difference with a field
*       only a few hundred pixels away from the center.  The x,y,z
*       arrays are now prepared by the same code as used by VISDFT.
*       The number of parameters given to GTPARM was not parameterized
*       by MAXFLD, causing some adverbs to be ignored in CVX.
*       The model computed is in error if the coordinates are not
*       precessed appropriately, the u,v rotated to epoch, the times
*       corrected, etc.  Added the preferred option to compute the model
*       at the data samples as they are read in.  This allows for
*       correct u,v,w (as used in the imaging anyway) and avoids the
*       double valued issues in finding say u for a range of v.
*       Changed SETGDS error codes and message re 3D.
*       Moved nowhere.

*9476.  July 22, 1997            IBLED                  Eric
*       Added the code to handle 3D as well as regular models and made
*       the same z-term correction as for VPLOT.  Added PLOT MODEL to
*       HLPIBLED.HLP which defines the real-time help information.
*       IBLED computes the model at each sample so does not have the
*       errors in u,v,w that VPLOT and CLPLT had.
*       Moved nowhere.

*9477.  July 24, 1997           CLPLT                  Eric
*       Changed Fortran and help to do correct modeling with and without
*       3D imaging as in VPLOT.  Did not add the option here to do the
*       model at each data point - it is less needed and less obvious in
*       a way to do it.
*       Corrected the scaling of the plots.  Edge spacing was improved.
*       Cleaned up logic in handling XANT; perverse values could really
*       blow the program's cookies.
*       Fixed the data handling which was fundamentally flawed.  If one
*       triangle was requested, then only one sample could be plotted
*       since the first sample of the next integration time was always
*       discarded.
*       Added option PHSLIMIT to plot only those panels exceeding plus
*       or minus PHSLIMIT degrees.  Changed POPSDAT.HLP and NEWPARMS.001
*       and created PHSLIMIT.HLP.
*       Moved nowhere.

*9478.  July 28, 1997                DATFST                   Eric
*       Fixed typo that could cause a / to appear in the new form output
*       Moved nowhere.

*9479.  July 28, 1997              SUL os                     Eric
*       Create new "architecture" to support Solaris Ultrix:
*       Changed files to recognize SUL as an architecture like SOL:
*       $INSUNIX: INSTEP1, FTPGET, REGISTER
*       $UPDUNIX: UPDREMOVE, UPDCONTROL
*       $SYSUNIX: STARTPMON, COMLNK, COMRPL, LINK, ZLASCL, ZLPCL2, LIBR,
*                 XASERVERS, TVALT, START_TVSERVERS, FDEFAULT.SH,
*                 AREAS.CSH, AREAS.SH, OPTIMIZE.LIS
*       $SYSSUL:  copied from $SYSSOL, then changed: CDVER.CSH,
*                 CDVER.SH, COMRPL.ADD, INCS.SH, LIBR.DAT
*       Of course had to create areas for $APLSUL, $QSUL, $INCSUL, and
*       $SYSSUL.  Then run INSTEP2 and INSTEP4.
*       Moved nowhere.

*9480.  July 29, 1997         FDEFAULT, CCOPTS.SH, LDOPTS.SH     Eric
*       Cleaned up a bit to follow Chris's suggestions re optimisation
*       and to eliminate special cases and use of the 4.0 f77 in CV.
*       Moved nowhere.

*9481.  July 31, 1997      support X terminals                  Eric
*       We can support X terminals if we can run multiple copies of XAS,
*       MSGSRV, et al. on a single host.  This can be done with UNIX
*       sockets rather than more Inet sockets.  Therefore, changed:
*       ZSSSO2   APLUNIX: restored the Unix socket code.
*       XAS.SHR  YSERV: Changed tv lock code to translate TVLOK on Unix
*                domain and use that.  Chnaged main open routine to test
*                first 5 chars of double translation of TVDEV and assume
*                Inet if they are sssin.
*       ZSSSL2   APLUNIX: add code to handle Unix sockets, incl double
*                translation of of TVLOK.  Uses TVDEVnn = sssin to imply
*                Inet and does the double translation only if not sssin.
*       ZTVSRV   APLUNIX: add a bunch of code to handle unix sockets
*                Uses TVDEVnn = sssin to imply Inet and does the double
*                translation TVLOK only if not sssin.  Added abort
*                handler to delete unix socket files.
*       ZTTOP2   APLUNIX:  add code to handle Unix sockets, incl double
*                translation of of TTDEV.  Uses TVDEVnn = sssin to imply
*                Inet and does the double translation only if not sssin.
*       ZMSSRV   APLUNIX: add a bunch of code to handle unix sockets
*                Uses TVDEVnn = sssin to imply Inet and does the double
*                translation TTDEV only if not sssin.  Added abort
*                handler to delete unix socket files.
*       ZTKOP2   APLUNIX:  add code to handle Unix sockets, incl double
*                translation of of TKDEV.  Uses TVDEVnn = sssin to imply
*                Inet and does the double translation only if not sssin.
*       ZTKSRV   APLUNIX: add a bunch of code to handle unix sockets
*                Uses TVDEVnn = sssin to imply Inet and does the double
*                translation TKDEV only if not sssin.  Added abort
*                handler to delete unix socket files.
*       Moved nowhere.

*9482.  August 4, 1997             DELEXT                   Eric
*       An error message failed to list TYPE in the argument list and
*       hence did not say what it was complaining about.
*       TABLE     Fixed TABZAP not to care if DELEXT returns error 3
*                 (file not in header).
*       UTILITY   Fixed OBFEXS which returned on an error code on ZEXIST
*                 error 1 (file not found).
*       Moved nowhere.

*9483.  August 6, 1997          SERCH                   Juan/Eric
*       Implemented Juan Uson's line-signal search program in CVX.
*       It takes a transposed cube, determines the actual (noise) rms in
*       each channel, convolves each spectrum with a Gaussian of
*       specified width, and reports those points exceeding ICUT in
*       signal-to-noise.  It makes and plots a histogram of the computed
*       S/N ratios as well and can loop over a range of widths in the
*       Gaussian smoothing function.
*       Moved nowhere.

 9484.  July 9, 1997         $YPGM/PCNTR                  Phil
        I got fed up never knowing what p.a. rotation had been applied
        to a particular image so I added the ROTATE value used to the
        information in the plot file.
*       Changed this fix to apply only when ROTATE not zero.
*       Moved to CVX 8-Aug-97 by Eric.

 9485.  July 9, 1997         $YPGNOT/KNTR                 Phil
        While in the mood I decided to remove the irritating message
        concerning the block being plotted in KNTR. This is not really
        necessary.
*       Made this fix to CVX version.
*       Moved to CVX 8-Aug-97 by Eric.

 9486.  July 9 1997             INDXR                     Chris
        Increased the size of the buffer used to sort the IM table
        and shuffled LUN assignments to avoid clashes with TABSRT.
*       Inserted change in CVX version.
*       Moved to CVX 8-Aug-97 by Eric.

 9487.  July 9 1997             GPSDL                     Chris
        Disabled delay corrections (which are not reliable), leaving
        only the Faraday rotation correction, and made some changes
        to the diagnostic output.
*       Moved to CVX 8-Aug-97 by Eric.

 9488.  July 9 1997             $APGNOT/UVMOD             Ketan
        UVMOD now will process compressed data.
        July 30, 1997        $APGNOT/UVMOD                  Ketan
        A typo in the test of the positivity of a weight used the wrong
        index.
*       Inserted changes in CVX version.
*       Moved to CVX 8-Aug-97 by Eric.

 9489.  July 10 1997          LPSEC, UVMOD             Chris
        Split LPSEC from UVFIX to make it easier to find out where
        leap seconds should be inserted.  Also made it more compact
        added the leap second for July 1 1997.
*       Moved to CVX 8-Aug-97 by Eric.

 9490.  July 10 1997          $APLNOT/BACOOR.FOR          Leonia
        Recently I implemented the subroutine BACOOR which evaluates
        coordinates of the both ground based and orbiting antennas
        at the equatorial coordinate system. This subroutine is used
        at VPLOT and CLPLT for calculating U, V in model for the
        orbiting VLBI. Having started working on adopting FRMAP for
        orbiting VLBI I found that speeds of change  of the equatorial
        coordinates need to know at this case. That is why I have
        modified BACOOR to have the projections of the velocity at
        the output as well.
        VPLOT: Change call sequence of BACOOR.  At the same time the
               small bug found by Athol has been fix: In the subroutine
               SCALVB the points with negative weights were skipped.
               That is correct if there is no averaging in frequencies.
               But if there is averaging in frequencies then the data
               for all selected frequencies were skipped if the weight
               of the first selected frequency is negative.  It has been
               fixed. Now if the first selected frequency has the
               negative weight it is skipped only if there is no
               averaging in frequencies (the first selected frequency
               equals the last one). The individual frequencies which
               have a negative weight are skipped inside of the routine
               providing averaging in frequencies (AVGCIF).
        CLPLT: Changed call sequence to BACOOR.
        FRMAP: Calculation of the speed change of U, V was correct only
               for ground based antennas in the system of the
               coordinates fixed at the Earth. The sky equatorial
               coordinate system is more preferable if orbiting antennas
               participate at the VLBI set.  The new modified subroutine
               BACOOR has been used as a part of the routine UUUV to
               provide operation for both ground based and otbiting
               antennas.  A small bug was found additionally in the case
               SUBARRAY>1. It is fixed. A relevant change in HELP file
               has been done.
        July 22,  1997          $HLPFIL/FRMAP.HLP            Leonia
        Change the range of BASELINE to allow negative values.
*       Left old FRMAP.HLP description of Stokes since it is correct.
*       There is no limit of Stokes to RR and LL in the code.
*       Made BACOOR call seq change to CVX version of CLPLT, VPLOT.
*       Replaced TAB characters and blank lines in FRMAP.
*       Moved to CVX 8-Aug-97 by Eric.

 9491.  July 16, 1997         $QPGOOP/IMAGR                  Ketan
        When operating on a multi-source file, if a single source
        name was not specified, IMAGR can do baddd things.
        Now they warn that they will do baddd things.
*       Change made to CVX version and cahnge to CALIB ignored.
*       Moved to CVX 8-Aug-97 by Eric.

 9492.  July 16, 1997         $APLNOT/CALREF                 Ketan
        CALREF accepted the FREQOF parameter as a REAL when it is
        actually sent in as a DOUBLE PRECISION.  This effectively
        rendered some parts of the code in CALREF non-functional.
        The declaration of FREQOF was changed, and the relevant
        code was commented out.
*       The above thing is a wrong thing to do.  Changed CALREF to use
*       both frequencies in double precsion as well as double precision
*       variables, PIs, etc.   Phase can be 1000's of 2*PI's plus just a
*       little and it is only the just a little that matters.  All
*       frequencies used to compute phase must be doubles and a delay
*       change makes a phase change.  One cannot throw it away because
*       we were making it wrongly (not zero just smaller) before.
*       Changed CALIB, FRING, and CALADJ to use doubles for both
*       frequencies in the call to CALREF.
*       Moved to CVX 8-Aug-97 by Eric.

 9493.  July 18 1997            CL2HF       Chris for David Gordon
        Merged in changes allowing CL2HF to read items from the
        interferometer model (IM) table for VLBA data.
*       Moved to CVX 8-Aug-97 by Eric.

 9494.  July 23,   1997         $YPGNOT/APCAL.FOR       Athol/Leonia
        The  task has not provided output for orbiting antenna in some
        cases. If elevation calculated for orbiting antenna is negative,
        such an antenna was rejected. Because there is no sence in
        elevation for an orbiting antenna we excluded the elevation
        calculation for the orbiting antennas, forcing it to be equal
        90 degrees.
*       Moved to CVX 8-Aug-97 by Eric.

 9495.  July 25 1997            POSSM                    Chris
        Corrected a manifest real constant in a call to BPCOEFF where
        a double-precision value was expected.
*       Made fix to CVX version of code.
*       Moved to CVX 8-Aug-97 by Eric.

 9496.  July 25, 1997           $APGNOT/SNSMO.FOR & .HLP    Athol
        Corrected a re-referencing bug affecting multi-IF calibration
        tables for the second secondary reference antenna and above.
        Subroutine REFFAZ was modifying the table column pointers
        directly (RF1KOL etc) thus causing problems when REFFAZ was
        called for secondary reference antennas other than the very
        first one encountered. Use local variables in REFFAZ to
        avoid this. Also corrected a typo. in the ref. antenna
        selection in REFRAT, and the update condition in RFFXFG.
        Added new subroutine RFFIX to clean up after re-referencing,
        but this should not be required in normal processing.
         All the above are long-standing problems. Only the REFFAZ
        error is likely to have been significant, causing outliers
        in the smoothed output table. The effect of the other bugs
        is limited. Also changed BPARM(6), introduced recently to
        DOBLANK.
*       Made changes in CVX versiuon to avoid having to fix all those
*       TABs again.  Removed blank lines at end of help.
*       Moved to CVX 8-Aug-97 by Eric.

 9497.  July 25 1997             UVSUB                Chris
        Rearranged a common block to avoid data alignment problems.
*       Made change in CVX version.
*       Moved to CVX 8-Aug-97 by Eric.

 9498.  July 28, 1997        $APGNOT/UVNOU                  Ketan
        At user request, allowed UVNOU to select a rectangle of
        U and V baselines to flag, instead of just a rectangle of
        infinite length in V as previously coded.
*       Moved to CVX 8-Aug-97 by Eric.

 9499.  July 28, 1997        $APGNOT/DBCON                  Ketan
        If the user requested a position shift, and the positions
        agree to better than 3 microarcseconds in RA _and_ in DEC,
        DBCON silently turned off the position shift - the user is
        now notified in this event.  Also, in the case when
        position shifts were requested and the input files were
        compressed, DBCON would refuse to run saying, "CANT SHIFT
        COMPRESSED DATA" even though it would later turn off the
        position shift - DBCON now only refuses to run under these
        conditions _if_ the position shift passes the 3 micro-
        arcsecond threshold.
*       Added this change (cleaned up) to CVX version.
*       Moved to CVX 8-Aug-97 by Eric.

 9500.  July 28, 1997        $APLPGM/UVLSF                  Ketan
        CHANSEL in UVLSF incorrectly ignored the user settings if
        it was sent CHANSEL = 0 470 1 670 1000 1 because one of
        the beginning or ending channel were not greater than
        zero.  This has been changed so that selecting either one
        results in the other defaulting to 1 or NFREQ when not set.
        Eg in a 2049 channel data set,
        setting 0 470 1 670 1000 1 results in 1 470 1 670 1000 1
        and     1 470 1 670 0 1    results in 1 470 1 670 2049 1
        while   0 0 ...            results in CHANSEL being
        ignored - as before.
*       Long lines, an error in logic having to do with the 2nd
*       channel=0, etc were corrected.  Change also moved to SDLSF.
*       Explanations added to both help files.
*       Moved to CVX 8-Aug-97 by Eric.

 9501.  July 28, 1997          $QPGNOT/BPASS                  Ketan
        When division by channel 0 is selected using an internally
        computed channel 0, BPASS says that it wants to disable
        BCHAN and ECHAN selection - this has been fixed. Previously,
        BPASS only disabled channel selection if both BCHAN.NE.1
        AND ECHAN.NE.NFREQ .  Also in this case BPASS incorrectly
        updated NUMFRQ, potentially screwing up calculation of
        the 'inner 75% of the band'.
*       Moved this change into CVX version.
*       Moved to CVX 8-Aug-97 by Eric.

 9502.  July 29, 1997        $APGNOT/MSORT                  Ketan
        Also, the default sort order is now TB [instead
        The routine used to accumulate the sort keys mis-counted
        the number of visibilities in the data file.  Fortunately,
        this bug was only triggered in the case when the last call
        to UVDISK requested exactly one visibility.
*       Other changes were made and then undone.
*       Moved to CVX 8-Aug-97 by Eric.

 9503.  July 29, 1997        $APLNOT/FLINI,FLTAB,FLIO        Phil
        As a first step in calibration transfer the VLBA correlator
        distribution system is now capable of writing flagging and
        weather tables. The flag tables generated are a little more
        general than those used with AIPS and require a minor
        translation. The VLBA FL table format was slightly modified from
        the 1992 design and so it's handling routines and it's
        definition routine required updating.
*       FLIO was not actually changed but DFLV.INC was.
*       Moved to CVX 8-Aug-97 by Eric.

 9504.  July 29, 1997       New task: $APGNOT/SNDUP          Phil
        SNDUP is a new task that will take an SN table from a single
        polarization uv file and copy it to a multiple polarization
        file. In doing so it copies the single-pol entries into both R
        and L columns in the output file. This step is necessary when
        doing polzn calibration on sources in which Stokes V is not
        negligible.
*       Corrected copyright t0 1997 only.
*       Moved to CVX 8-Aug-97 by Eric.

 9505.  July 29, 1997      New task: CLFIX      Chris for David Gordon
        Added CLFIX to the APLCONTR (contributed) area and updated
        ASTROMET.HLP to refer to it.  CLFIX adds geometric and
        atmospheric delay information and clock offsets from IM and
        MC tables to CL table 1.  This is only needed as a stop-gap
        until INDXR is able to read information from VLBA MC tables.
        Moved to 15APR97 on this date.

 9506.  July 30, 1997               FITLD                 Phil
        At last, calibration transfer is coming. Since the structure of
        the FL tables changed slightly FITLD needed minor modifications
        to handle the translation to FG tables. Hopefully TY and GC
        tables should come through with few or no changes once they
        are ready.
*       Inserted changes in CVX version.
*       Moved to CVX 8-Aug-97 by Eric.

 9507.  August 4, 1997       New FFT routines              Chris
        Added a new set of Fourier transform routines to the system.
        The new routines are mixed-radix transforms and are not
        restricted to lengths that are a power of two.  The first
        dimension of the transform is  unrestricted while the second
        and subsequent dimensions are limited to FFTSIZ defined in
        INCS:PFFT.INC due to the possibility that a scratch array
        is required to gather and scatter values for these dimensions.
        All of these routines are for complex-to-complex FFTs.
        The new routines are
            QCFT1I     - initialize 1D FFT
            QCFT1D     - 1D FFT
            QCFT2I     - initialize 2D FFT
            QCFT2D     - 2D FFT
            QCFT3I     - initialize 3D FFT
            QCFT3D     - 3D FFT
        Only generic versions (in QPSAP) are currently available.
        The generic versions use the FFTPACK routines
            CFFTI      - initialize FFT
            CFFTB      - inverse FFT
            CFFTF      - forward FFT
        (all in APLNOT) and are approximately twice as fast as
        QXFOUR.  Adding machine-specific versions that exploit
        performance libraries supplied by compiler vendors will
        provide even better performance (eg. the SunSoft perflib
        FFT routines are 3.5 times faster than QXFOUR for an
        8192-point FFT).
*       Moved to CVX 8-Aug-97 by Eric.

 9508.  August 4, 1997          BLING                     Chris
        BLING has been reworked to use dynamically allocated memory
        rather than the AP.  This allows it to search extremely
        large delay-rate spaces as may be required during the
        HALCA in-orbit checkout.  It should be noted, however,
        that large searches cause excessive page-thrashing and
        should be avoided unless absolutely necessary (even the
        Origin 200 can be brought to a crawl for several hours
        by a full-range HALCA search).  The data structures used
        to accumulate the data will have to be thoroughly
        reworked in order to address this problem.  FRSRCI has
        been temporarily reintegrated with BLING in anticipation
        of interface changes being necessary as part of this
        reworking.
            Also made the default fringe-detection thresholds
        less stringent and changed the default behaviour to
        be NOT to stack data from different baselines (which is
        dangerous where there are different integration times
        on different baselines).
*       CVX changes moved into help file (64 fields, DO3D).
*       Fixed BLING.FOR to make correct names for fields 2-N and to
*       declare dimensions with MAXFLD not some local parameter or
*       hard-coded 16.
*       Moved to CVX 8-Aug-97 by Eric.

*9509.  August 11, 1997           LWPLA                   Eric
*       Increased the X character size by 13%.  Corrected the handling
*       of rotated strings which were not properly placed in the
*       horizontal direction.
*       Moved nowhere.

*9510.  August 11, 1997       PRTAC, CPUTIME              Eric
*       Changed PRTAC to have an opcode to look for and report the last
*       standard DDT job only.  Changed POPSDAT, NEWPARMS.001, and AU7B
*       to have a verb CPUTIME to report the current cpu and real time.
*       Changed DDTLOAD and DDTEXEC to invoke these.
*       Moved nowhere.

*9511.  August 12, 1997           FITLD                   Eric
*       FITLD had an undocumented feature that it set OPTYPE='UV' if
*       OPTYPE(1:1) = 'D'.  Then it tried to advance file on my disk
*       tape.  Cleaned up the undocumented feature - requiring the 2nd
*       character to match for debugging and cleaned up the handling of
*       the error conditions (non-FITS, non-match) in the main.
*       Moved nowhere.

*9512.  August 14, 1997           IMAGR                    Eric
*       Changed:
*       VISDFT   Reference CC file for field 1 rather than for field
*                LFIELD.  The one for 1 might not exist.
*       VSCDFT   Reference CC file for field 1 rather than for field
*                LFIELD.  The one for 1 might not exist.
*       VSFDFT   Reference CC file for field 1 rather than for field
*                LFIELD.  The one for 1 might not exist.
*       QUVUTIL  OUMSUM, OUCDFT - changed GETNCC to get all the CC
*                files, not just LFIELD.
*       QCLEAN   Changed CLCSUM to create CC files for all fields if
*                they are not present.
*       IMAGR    When a field had not even been accessed by Clean, it
*                failed to have certain keywords set.  This caused the
*                history writing to die.  Changed the HI routine to
*                understand that missing is okay and means 0.
*       Moved nowhere.

*9513.  August 20, 1997              SERCH                     Eric
*       Added DOOUTPUT option to write a hypercube of the S/N's with 0
*       used if -ICUT < S/N < ICUT and with the line width as an
*       additional axis of the hypercube.  Also the help file.
*       Moved nowhere.

*9514.  August 21, 1997          EDITA, EDITR                 Eric
*       Changed:
*       QEDIUTIL  To do the Tsys difference as a per cent of the running
*                 mean so that all antennas will be on the same scale.
*       EDITA     Help file changed to point out units change.
*                 Description of FLAGVER corrected - it described some
*                 other program not EDITA.
*       EDITR     Fortran: added ANTENNAS adverb to inputs and 2 UV data
*                 classes.  Fixed DOPOL to integer.
*       EDITR     Help: adde ANTENNAS adverb to inputs and help.
*       MAPBM     Corrected DOPOL here too.
*       Moved nowhere.

*9515.  August 21, 1997         misc                        Eric
*       Looking at previously unsupported or overlooked directories:
*       ZTKSRV    APLSGI: copy unix version minus the set tty stuff.
*       ZTKSRV    APLDEC: copy unix version minus the set tty stuff.
*       LINK      SYSHP: add strip
*       TVFLG.DIFFS  SYSLINUX: remove (also SPFLG.DIFFS)
*       ZTKOP2    HP version updated for Unix sockets.
*       Moved nowhere.

*9516.  August 25, 1997              ZDCHIN and tapes         Eric
*       Changed ZDCHIN to examine the logical NAIPST to get the number
*       of tape devices (which I thought it already did).  Relinked just
*       the tape tasks so that they will not depend on the SP file
*       contents.
*       Moved nowhere.

*9517.  August 25, 1997             LISTR                     Eric
*       LISTR would die if INEXT=TY and DPARM(1) was not 10 or vice
*       versa, no matter what OPTYPE was selected.  Changed this to be
*       friendly and set the adverbs for the user on GAIN and nopt care
*       otherwise.
*       Moved nowhere.

*9518.  August 25, 1997           plotting                   Eric
*       BPERR was able to blow up when looping for more plots after all
*       real data were done.  BPERR, PFPL1, PFPL2, PFPL3 all plotted the
*       1st coordinate in the header twice rather than doing both.
*       BPERR plotted the date header even when LTYPE < 0.
*       Moved nowhere.

*9519.  August 29, 1997            UVHGM                     Eric
*       Imaginary parts were plotted from 0 to ampmax, not -ampmax to
*       ampmax.
*       Moved nowhere.

*9520.  August 29, 1997            SERCH                     Eric
*       Changed normalization of "signal" and "noise" adding another
*       factor of the value of the Gaussian function (so Gaus**2 rather
*       than Gaus).
*       Moved nowhere.

*9521.  August 29, 1997             IMRMS                  Eric
*       New task to plot IMEAN fit rms values versus channel using
*       OUTPRINT file from PRTMSG.
*       Moved nowhere.

*9522.  August 29, 1997             UVMLN                  Eric
*       Juan Uson task to do UVLIN on a multi-source data set to add
*       flags to a flag table.
*       Moved nowhere.

*9523.  September 1, 1997          UVSUB                  Eric
*       We need to be able to compute the model at the data points, not
*       just the data minus (or divided by) the model.  Therefore:
*       DGDS.INC   Made FACGRD dimension 2 with 2nd for the uv data.
*       QXXPTS     QPSAP: if apcore(s+3) = 0, output = fac*model, else
*                  output = data - fac*model
*       QGASUB     ditto
*       QSPSUB     ditto
*       QUVIN      QPSAP: apcore(16) 0 -> just model, else data +-
*                  model.
*       ALGSUB     Set AP loc 15 (0 rel) to 0 or 1 based on FACGRD(2)
*                  for use by QUVIN
*       ALGSTB     Set AP loc 15 (0 rel) to 0 or 1 based on FACGRD(2)
*                  for use by QUVIN
*       GRDSUB     Fix up comments
*       UVMSUB     Fix up comments
*       UVMDIV     Fix comments, add subscript to FACGRD(1) sign changes
*       VISDFT     Add subscript to FACGRD(1), send in FACT2(3) for
*                  data inclusion/exclusion.
*       VSCDFT     Add subscripts to FACGRD(1).
*       VSFDFT     Add subscripts to FACGRD(1).
*       UVPDIV     Add subscripts to FACGRD(1).
*       QUVUTIL    QOOP: change MODFACT to (2) with def = 1,1
*       ASCAL      Added subscripts, set both to 1.
*       BLCAL      Added subscripts, set both to 1.
*       CALIB      Added subscripts, set 2nd to 1.
*       FRING      Added subscripts, set both to 1.
*       PCAL       Added subscripts, set to -1,1.
*       LPCAL      Added subscripts, set to -1,1.
*       UVADC      Added subscripts, set to FACTOR,1.
*       MX         Added subscripts, set both to 1.
*       UVSUB      Added subscripts, added OPCODE = 'MODL' where 2nd is
*                  0, else 2nd is 1.
*       UVSUB      HLPFIL: mention OPCODE 'MODL'
*       Moved nowhere.

*9524.  September 2, 1997           UVMLN                      Eric
*       Changed it to use FLAGVER on input as well as writing it.
*       Also help file to explain this.
*       Moved nowhere.

*9525.  September 2, 1997          ABOUT help files            Eric
*       Ran SHOPH and the updated:
*       ZZADVERB.HLP        ZZANALYSIS.HLP        ZZASTROMET.HLP
*       ZZCALIBRAT.HLP      ZZEDITING.HLP         ZZGENERAL.HLP
*       ZZIMAGE.HLP         ZZIMAGING.HLP         ZZINFORMAT.HLP
*       ZZMODELING.HLP      ZZPLOT.HLP            ZZSPECTRAL.HLP
*       ZZTASK.HLP          ZZUTILITY.HLP         ZZUV.HLP
*       ZZVERB.HLP          ZZVLBI.HLP
*       Moved nowhere

 9526.  August 6, 1997            $QPGOOP/OMFIT        Ketan
        OMFIT has been rewritten in many ways.  Many new models
        have been included and subjected to user testing.  The
        error-analysis has been considerably improved.  This is
        still development code and problems should be pointed
        directly to me.
        August 8, 1997            $QPGOOP/OMFIT          Ketan
        Fixed a typo spotted by the DEC Alpha and by the IBM compilers.
        Moved nowhere.


 9527.  August 8 1997            FILLM                 Chris
        Fixed a bad test condition that would turn off solar mode.
        August 15, 1997          FILLM                    Gustaaf
        Recently Ken Sowinski changed the scaling definition of data
        written to tape to allow more dynamic range, and earlier this
        year I modified FILLM to make proper use of this.  Where I
        should have modified the scaling only for revisions 23 and up
        I did it for revisions 20 and up (i.e. for all data in the new
        - post 1988 - format).  This caused problems in the autocorrel-
        ations which were undefined until revision 23.
*       Changes made to CVX version of FILLM.
*       Moved to CVX 2 September by Eric.


 9528.  August 8, 1997            $SYSUNIX/OPTIMIZE.LIS  Ketan
        The IBM compiler cant handle the number of subroutines in
        OMFIT.  Therefore, the optimization level in OMFIT has been
        turned way down [off, in fact] for the IBMs.
*       Added SUL lines to parallel to SOL entries.
*       Moved to CVX 2 September by Eric.

 9529.  August 12, 1997           $YPGNOT/POSSM.FOR      Leonia
        POSSM has not worked if POLPLOT .NE. '' when both requred
        polarisations do not exist for some antennas. The subroutine
        POLVIS provides modification of input visibilities to the
        relevant polarisation ratios (RR/LL, LL/RR....). If one of the
        required input polarisations absent (flagged), POLVIS has not
        regected such a visibility as UVGET does at the case of
        POLPLOT.EQ.''.  As a result the logic does not work at MULTPL
        and POSSM dies with abort. I have added several codes lines
        after POLVIS to reject the visibility which does not have both
        required polarisations.
*       Change made to CVX version.
*       Moved to CVX 2 September by Eric.

 9530.  August 14, 1997          $APGNOT/JMFIT.FOR, .HLP  Leonia
        Several bugs and problems which have been discovered recentely
        are fixed.
        1. Sometimes solution for position of the gaussian was given as
           integer. It happenned because the algotithm stoped itteration
           process after a few itteration probably founding a too small
           gradient in comparison with given eps=E-14. The problem was
           by changing type of the solution from real to double
           precision and changing eps to E-15.
        2. Having provided a deep test of the errors offered by Miller
           a mistake at the error of position for the case DOWIDTH=-1
           have been discovered. It fixed and a good aggreement of
           predicted by JMFIT errors and measured rms was acchieved.
        3. Miller asked to give more digits at the position. It's done.
        4. The frequency channel number is printed now in the case of
           multy frequency data (cube).
        5. Explanation of TRC, BLC in the HELP file was not clear
           for the multy frequency data. It is improved.
*       Made the format change to $APLSUB/AXSTRN rather than
*       inserting it copyleft and all in JMFIT.  Left most handling of G
*       in double precision, using GG only to call subroutines.
*       Made fix 2 to IMFIT and fixed up the total flux error
*       computation in SAD.  Added correct remarks about BLC(3) to the
*       CVX version of JMFIT.HLP.
*       Moved to CVX 2 September by Eric.

 9531.  August 17, 1997          $QPGNOT/FRING            Ketan
        A DFILL call should have had a double precision zero but didnt.
*       Made change in CVX version.
*       Moved to CVX 2 September by Eric.

 9532.  August 17, 1997          $QPGNOT/CALIB            Ketan
        The CALIB implementation of DOFIT didnt satisfactorily treat
        the case when the REFANT was also included on the DOFIT list.
        Now, the REFANT, if it appears on the DOFIT is removed since it
        is understood by the user there should be no gain corrections
        for the REFANT.
*       Made change to CVX version of help and Fortran.
*       Moved to CVX 2 September by Eric.

 9533.  August 18, 1997    FITS readers and writers       Chris
        The FITS readers and writers were applying an optimization
        that reduced the number of data transfer operations by
        fusing adjacent columns of the same type (performed in
        FITTP and R3DTAB).  This optimization was performed
        incorrectly for character data leading to data being lost
        under some circumstances (eg. the frequency group code in
        the HF table).  The column-fusion optimization has been
        removed to avoid this problem; in practice, it only led
        to a small saving in time (a few seconds on slower machines).
*       Put FITTP correction (actually done only after I pointed out
*       that the 8/18 one had gone astray) in the CVX version.
        Moved nowhere.

 9534.  August 25, 1997    FARAD and GPSDL               Chris
        Added code to fix up the azimuth at the intersection of
        the line of sight with the ionosphere when the source
        is in the southern sky.  Also fixed a transcription error
        (SIN for COS) in FARAD.
*       Inserted changes in CVX version of FARAD.
*       Moved to CVX 2 September by Eric.

 9535.  August 28, 1997    ZMOUN2.C for Alpha            Pat
        Changed the density logic so that it conforms with the OSF/1 4.x
        definitions of Exabyte tape drives.  The medium density device
        (/dev/nrmt#m where # is 0, 1, 2, ...) is what should be used for
        8500 mode on Exabytes and the low density device (/dev/nrmt#l)
        for 8200 mode.  The other modes may be compressed, and such
        compression may be non-portable (definitely if user doesn't have
        a compression-enabled tape at their home institution).
*       Moved to CVX 2 September by Eric.

 9536.  September 2, 1997       INSTEP1, FTPGET              Eric
        Moved Pat's fixes into CVX versions.
*       Moved to CVX 2 September by Eric.

*9537.  September 3, 1997        UVMLN                       Eric
*       Corrected bugs: (1) The header to create FG tables was the
*       "output" header not the "input" so no pre-existing tables were
*       known.  (2) A "local" variable called DOFLAG conflicted with the
*       cal variable of the same name and caused flagging of the input
*       to be turned off.  Also (3) improved the formatting of the
*       displays of weights and baselines flagged etc.
*       Moved nowhere.

*9538.  September 8, 1997           IMAGR                 Eric
*       A bug in restoring components from one field into others was
*       found.  QCLEAN used abs(coord incr) instead of the incr with
*       sign.  So the X coordinates were reversed.
*       Moved nowhere.

*9539.  September 8, 1997         FLATN                  Eric
*       New task to make ojne image by regridding the set of fields
*       produced by IMAGR.  Renamed INTERP INTERPLATE in QOOP since
*       there is an APLNOT/INTERP also.
*       Moved nowhere.

*9540.  October 6, 1997         HP found               Eric
*       Working in Bonn on an HP, changed:
*       CLBSNR     missing comma in format
*       ASCOR      badly organized common
*       PRTAC      added a decimal place on total real
*       INSTEP3    added RTIME and TVSERV
*       LINK       the $LDOPTS and $STRIP have to come earlier
*                  before the link list or they are passed to
*                  some ld program rather than f77
*       FDEFAULT   for advanced HP's we need to drop +A which slows
*                  things by a factor 2, add +E4 to get leading 0's,
*                  and add  +Odataprefetch +Oaggressive.
*       OPTIMISE.LIS  For HP2 - do not opt AIPS.FOR, RLOCAT, ZUVPAK,
*                  ZUVXPN.  For HP (okay on HP2) DECBIT.
*       LIBR.DAT   HP version lacked a final HP lib in YPGM and YPGDEV
*       Moved from mpifr-bonn

*9541.  October 6, 1997        HP2                     Eric
*       Like Ultras and older Solaris bixes, there is a difference
*       between the new HPs (called 2.0) and older ones (called 1.1).
*       So add ARCH = HP2 to $SYSUNIX files FDEFAULT, LIBR, LINK,
*       OPTIMIZE.LIST, START_AIPS, STARTPMON, TVALT, TVDEVS.SH, ZLASCL,
*       ZLPCL2.
*       Moved from mpifr-bonn

*9540.  October 7, 1997         LINK, MNJ                 Eric
*       Newly understood from HP:
*       LINK     Drop $SYSHP version, change $SYSUNIX version to put
*                LDOPTS and STRIP back after the library list but to
*                remove the export LDOPTS which was the source of the
*                trouble on HPs.
*       UPDCONTROL  Changed handling of Clients - probably never tested.
*                Dropped requirement that UPDCOPYSUB be in SYSLOCAL,
*                Changed path to LASTGOOD.DAT and the *.UPD files from
*                $UPDUNIX (on master) to MasterArch/UPDATE.
*       UPDCONFIG   Added MasterArch as NONE for most, HP2 for our HP
*                clients.
*       Moved from mpifr-bonn.

 9541.  September 2, 1997   $QPGNOT/FRING.FOR           Ketan
        Jim Ulvestad pointed out that the exhaustive fringe-search
        mode silently discards solutions when the chosen REFANT does
        not appear in the solutions; this did not happen in the
        Moved nowhere.
        September 9, 1997      $QPGNOT/FRING               Ketan
        Fixed a typo from the above and also introduced a new feature.
        DPARM(8) can now be used to zero rates, single-band delays,
        or phases _after_ FRING computes its solutions.  This obviates
        a step in the data reduction involving running SNCOR and is
        useful for the GEODOSY/ASTROMETRY folks.
        September 15, 1997    $QPGNOT/FRING                Ketan
        When using the exhaustive search mode of FRING (APARM(9)>0),
        the SNR of the first solution found in the FFT stage was
        improperly down-weighted by a factor of 4.  This was caused by
        a typo, I divided by 2 instead of multiplying by 2.  This had
        no effect if APARM(9)=0 [the usual case].
        September 24, 1997        $QPGNOT/FRING              Ketan
        The subroutine WANSRC in FRING did not properly implement
        source matching when the user was trying to deselect source
        using a '-' symbol in the CALSOUR list.  This caused problems
        when trying to determine scan boundaries in the presence of an
        NX table.
*       Moved to CVX version by Eric 8 Oct.

 9542.  September 16, 1997    $QPGOOP/IMAGR                 Leonia
        IMAGR has not worked if number of averaging points exceeded 28.
        It occured because array PBFREQ was declared with dimension
        MAXIF=28. It must be declared with dimension MAXCIF=8192.
        The two subroutines PBFSUB and PBFDIF are located at the module
        $QOOP/PBUTIL.FOR. I fixed the error at the module.
*       in 3 places.
*       Moved to CVX version by Eric 8 Oct.

 9543.  September 2, 1997   $RUNSYS/NEWPARMS.001        Ketan
                            $HLPFIL/POPSDAT.HLP
                            $HLPFIL/SPARM.HLP
        Introduced a new adverb SPARM(10) which is an array of STRING*8.
        September 2, 1997   $APGNOT/ANTAB.FOR           Ketan
                            $HLPFIL/ANTAB.HLP
        ANTAB crashes if it encounters information in the Tsys file
        for an antenna that does not appear in the AN table.  The new
        adverb SPARM allows the user to specify antennas for which
        there may be entries in the Tsys file but which may not appear
        in the AN table.  Tsys information for such antennas will be
        ignored.  This was introduced for SVLBI data reduction.
*       Moved from AOC version 19 October 1997 by Eric.

 9544.  September 5, 1997   $APGNOT/OBTAB.FOR           Leonia
        The task OBTAB having been tested with simulated orbiting VLBI
        data has not worked with actual orbiting VLBI data at the mode
        of updating antenna table. The reason of this is because the
        correlator has not labeled orbiting antennas at the AN table
        (MNTSTA=2), has not numerated antennas in OB table and has not
        provided the space for 6 orbiting parameters at AN table.  While
        the correlator has these problem, I modifyed OBTAB to circumwent
        the problem for the case of the only orbiting antenna - the
        actual case for a while. The new parameter APARM(8) determines
        the number of the only orbiting antenna.  The task put MNTSTA=2
        for this antenna at AN table, put this number at OB table
        together with main modification of the tables.
*       Moved from AOC version 19 October 1997 by Eric.

 9545.  September 8, 1997     TABCS in APGNOT           Chris
        Corrected the calculation of the number of IFs to use column
        6 (gain factor) rather than column 5 (subarray) which is not
        dimensioned according to the number of IFs.
*       Moved from AOC version 19 October 1997 by Eric.

 9546.  September 8, 1997     MC Table Routines        Chris
        Added MCINI to initialize a VLBA model components (MC) table
        and GETMC to locate atmospheric group-delay and clock offsets
        in an MC table; both APLNOT routines.
*       Moved from AOC version 19 October 1997 by Eric.

 9547.  September 8, 1997     TABLEUTIL in APLOOP     Chris
        Added new routines.
         OIMINI is an object-wrapper for IMINI.
         OGTDEL is an object-wrapper for GETDEL.
         OMCINI is an object-wrapper for MCINI.
         OGETMC is an object-wrapper for GETMC.
*       Moved from AOC version 19 October 1997 by Eric.

 9548.  September 8, 1997             INDXR               Chris
        Added the capacity for merging atmospheric delay and clock
        offset information from VLBA model-components (MC) tables into
        newly created CL tables when MC tables are present. This
        required a thorough rewrite to bring the table handling logic to
        a higher level to allow coordination of LUN usage when sorting
        tables.  INDXR is now an AIPS OOP program (although this turns
        out not to have helped as much as I expected). The logic
        governing CS table generation has also be slightly modified to
        ensure that CS table records are generated whenever new beams
        are encountered during a scan.
*       Moved from AOC version 19 October 1997 by Eric.

 9549.  September 8, 1997       $APGNOT/UVFIX.FOR,  HLP      Leonia
        The task UVFIX has been modifyed to allow handling orbiting
        VLBI. The calculation of X,Y,Z at the RH sky coordinate system
        (RA=0 at X) is provided separetely for each antenna: ground
        based and orbiting. The baseline formed as the coordinate
        difference is recalculated to the U, V, W of the given
        source. X,Y,Z of the orbiting antenna is calculated by fitting
        polynoms of 4-th degree to the X,Y,Z having taken from OB
        table. The OB table data are devided for intervals of 100 sec
        each. It is supposed the time interval at the OB table is
        10sec. Different polynoms are fitted at the different
        intervals. The coefficients of the polynoms as well as the
        begins and ends of the intervals are stored for following
        calculation X,Y,Z of the satalite at the arbitrary time.  Two
        new parameters are added: UVFIXPRM(15)-the OB table number;
        UVFIXPRM(16)-orbiting antenna number. The relevant change of the
        .HLP file is carried out also. The old .HLP file erroniously
        informed that UVFIXPRM(2)=0 corresponds to subarray=1. Indeed
        it corresponds to all subarrays. It's fixed as well.
*       Moved from AOC version 19 October 1997 by Eric.

 9550.  September 9, 1997            UTESS                 Chris
        Added code to protect the CATBLK for the output image file
        when opening the default image.  This prevents confusion
        over the existance of history files during file creation.
*       Moved from AOC version 19 October 1997 by Eric.

 9551.  September 10, 1997    CLBOX help file              Chris
        Rewrote help file for CLBOX adverb to cover the use of
        circular boxes in IMAGR, SCMAP and WFCLN.
*       Moved from AOC version 19 October 1997 by Eric.

 9552.  September 15, 1997    $APGOOP/VCOPY               Ketan
        VCOPY did not respect the compression state of the input file.
        This was due to my not properly understanding Chris'
        implementation in OOP.
*       Moved from AOC version 19 October 1997 by Eric.

 9553.  September 16, 1997        BLING                     Chris
        Fixed a stupid error that caused the FFT array not be cleared
        between acceleration steps and therefore causing the
        acceleration search to fail.
*       Moved from AOC version 19 October 1997 by Eric.

 9554.  September 16, 1997         FILLM                    Chris
        Increased the number of FQ entries allowed to 250.
*       Moved from AOC version 19 October 1997 by Eric.

 9555.  September 16, 1997      SGI Printing                Chris
        Removed vestigial APLSGI versions of ZLASC2 and ZLPCL2 that
        were leading to a glut of undeleted files in /tmp.
*       Moved from AOC version 19 October 1997 by Eric.

 9556.  September 18, 1997        REGISTER                  Pat/Ernie
        Added auto-version-detecting logic instead of a fixed VERS=
        string; also added a new keyword about the aipsletter in the
        code to help auto-generate the AIPSletter mailing list (paper).
*       Moved from AOC version 19 October 1997 by Eric.

 9557.  September 18, 1997    $SYSUNIX/OPTIMIZE.LIS            Pat
        Bumped FITTP down to OPT0 for ALPHA systems.  On some datasets
        it was generating spurious "floating invalid" errors that
        vanished when the task was recompiled and relinked with no
        optimization (instead of the default OPT2 for that
        architecture).  This change will only affect people with DEC
        Alpha systems.
*       Moved from AOC version 19 October 1997 by Eric.

 9558.  September 19, 1997    $APGNOT/UVFIT                    Pat
        A report from Michael Bietenholz at York University showed a bug
        in UVFIT in 'SPHE' mode: "It doesn't zero the counter used to
        calculate the rms/point in routine UVRMS2, so you get the right
        answer at the start but the wrong one at the end".  Fixed.
        Thanks to Michael for providing the fixed code.
*       Moved from AOC version 19 October 1997 by Eric.

 9559.  September 22, 1997    $YPGNOT/POSSM                    Ketan
        POSSM did not respect timerange selection/solint specification.
        If the specified SOLINT was longer than the chosen timerange,
        POSSM effectively extended the timerange to cover the SOLINT.
        Now, if the selected timerange is too short, SOLINT is shrunk to
        fit.
*       Installed fix in CVX version.
*       Moved from AOC version 19 October 1997 by Eric.

 9560.  September 22, 1997           FITLD                     Chris
        Added code to transfer atmospheric delays and clock offsets
        from the VLBA MC table to the initial CL table.  Also
        reordered table translation so that frequency tables are
        processed before antenna table so that the output AN table
        reference frequency is consistent with the data.
*       made changes to CVX version, improved typing some in
*       pre-existing areas.
*       Moved from AOC version 19 October 1997 by Eric.

 9561.  September 22, 1997    Low-Level Networking             Chris
        Added a set of Z-routines for low-level networking in
        anticipation of splitting SLIME into a GUI portion and a data
        server.  These routines are thin bindings to the core UNIX
        socket routines (which are also part of the win32 API).  The new
        routines are
           ZSACPT - wait for a connection from a client (accept)
           ZSBIND - bind a socket to a network address (bind)
           ZSCLOS - close a network connection (close)
           ZSCONN - establish a connection to a server (connect)
           ZSCREA - create a socket (socket)
           ZSLISN - put socket into "listen" mode (listen)
           ZSREAD - read data from network (read)
           ZSWRIT - write data to network (write)
        Versions are in APLUNIX and APLGEN (the latter stubbed).  These
        routines are more general than those previously available in
        AIPS in that they will allow AIPS tasks to function as network
        servers where previous routines always assumed that AIPS tasks
        would be clients of some external server.
*       Minor typing corrections.
*       Moved from AOC version 19 October 1997 by Eric.

 9562.  September 22, 1997        $APGNOT/PCCOR              Ketan
        The maximum number of frequency channels processed in subroutine
        PCCAL in PCCOR was hard-coded to 256.  This has been changed to
        MAXCHA.
*       Moved from AOC version 19 October 1997 by Eric.

 9566.  September 24, 1997      DATGET and DGETSD            Chris
        Modified DATGET and DGETSD not to ignore fully flagged data
        records when flagging is turned off using FGVER = -1.  Data
        could still be flagged using negative weights in the data
        and this was causing problems when records needed to be
        counted (eg. in INDXR).
*       Added branch back if DATFLG says DROP is true.
*       Moved from AOC version 19 October 1997 by Eric.

 9567.  September 29, 1997       $SYSLINUX/UPDCONFIG          Pat
        Fixed it so that it can be used both on power.aoc and
        orangutan.cv.  Any other Linux midnight job sites need to let me
        know so I can include them too.
*       Moved to AOC this date, tested, works.

 9568.  October 3, 1997         $QPGOOP/GPHAS                  Ketan
        GPHAS is finally getting a work-out on real SVLBI data.  The
        first problems were: a sign error on the phase of the stacked
        baseline, user complaints about the help file, and complaints
        about the implemented method of refant and special antenna
        selection.
*       Moved from AOC version 19 October 1997 by Eric.

 9569.  October 7, 1997         $APLDEC/ZFRE2.C                Pat
        Jeff and Rob actually uncovered this bug while porting to the
        Linux Alpha system.  The size parameter in the statfs call was
        never initialised, causing abrupt terminations (and probably
        lots more other nasties as well).  Modified the routine to
        remove the calloc call, just use a local buffer for the contents
        of the statfs call, and get the size parameter right.
*       Moved from AOC version 19 October 1997 by Eric.

 9570.  October 14, 1997       Mk3 VLBI Utilities      Chris/Walter Alef
        Merged format updates into MK3IN.  Also added the new tasks
        M3TAR, which reads Mk3 data in UNIX tar archives, and TFILE,
        which sorts and edits Mk3 AFILEs for M3TAR.
*       In M3TAR, changed AOC version ZEXIST calls to my large file size
*       methods.  Changed AOC version to reduce the number of long
*       comment lines even further (Chris had already corrected some and
*       some bad Fortran doing unformatted read on string).  Inserted
*       Walter's changes in CVX version of MK3IN and removed TABs.
*       Moved from AOC version 19 October 1997 by Eric.

*9571.  October 19, 1997          PUVD.INC                 Eric
*       Changed MAXFLG from 1000 to 5000 to allow for more flags to
*       apply to one time.  The flag schems in TVFLG etc can do this to
*       us.  Changed TVFLG, SPFLG, and IBLED which can apply flags to
*       check this limit - they did not do this before!
*       Moved nowhere.

*9572.  October 20, 1997          OBTAB                Eric
*       Fixed format that ran one character too long for line (loosing
*       the comma).
*       Moved to mpifr-bonn.

*9573.  October 21, 1997         UVUTIL               Eric
*       Fixed computation of freq reference pixel in U2IDES which was
*       wrong when CHINC and/or BCHAN were not one.
*       Moved to 15OCT97 this date.

*9574.  October 21, 1997        UVPRT                 Eric
*       Fixed references to antenna lists in scaling things.  No data
*       were selected so no scaling was found.  This bug was turned up
*       finding that much of the DSEL.INC comrpl list was not executed
*       yesterday!  Rebuilding that now.
*       Moved nowhere.

 9575.  October 21, 1997     $APGNOT/PCCOR.FOR                 Leonia
        PCCOR.FOR has been modifyed to handle both USB and LSB. The
        phase of PC tones of PC table are minused for the IFs with LSB.
        The tones itself were rearanged in encreasing order of
        frequencies for the IFs with LSB. The task is improved to handle
        the cases when some antennas are not presented at the PC table
        or at the calibrator's scan for the selected time range. The
        relevant add to the help file has been made.
*       Moved from aoc aips 22 Oct by Eric.


***********************************************************************
***********************************************************************

                 Changes while 15APR98 is called TST

***********************************************************************
***********************************************************************

 9576.  October 23, 1997        CookBook                      Eric
        Changed chapters 0, 1, 2, 3, 4, 5, 9, 10, 13, and I to refer to
        15APR98 rather than CVX, reset www address, etc.
        Moved nowhere.

 9577.  October 23, 1997        system junk                  Eric
        Dropped all system areas for ALLN, CRI, CVEX, DEC, and SUN3.
        Droped UVPGET.TMP, several DOTWOLIBs from chkout system.
        Moved nowhere.

 9678.  October 23, 1997       misc                          Eric
        WHATSNEW  reworded CVX->15APR98, etc
        COMRPL    changed primate to kochab on freeze location
        COMLNK    changed primate to kochab on freeze location
        START_AIPS  Support HP2 as well as HP.
        INSTEP1   add code to detect HP2 from Pat
        REGISTER  add code to detect HP2 from Pat
        FTPGET    add code to detect HP2 from Pat
        CCOPTS.SH  $SYSHP: Add if statements to do HP and HP2 in one
                  CCOPTS.SH file.
        Moved nowhere.

 9579.  October 24, 1997         FILAIP                      Eric
        Dropped all IC/ID files stuff from FILAIP, FILAI2 other than
        that used for the TEK.  It is obsolete and should not be there.
        Moved nowhere.

 9680.  October 25, 1997            XAS                        Eric
        changed icon to be more PC.
        Moved nowhere.

 9681.  October 26, 1997            CONVL                      Eric
        In an attempt to manage scaling and apply FACTOR only once, the
        variable FACTOR was reset to 1.0 after it was applied (on the
        first plane).  Therefore, it was always 1.0 in the history file.
        Added variable WASFCT to keep the factor used to save in the
        history.
        Moved nowhere.

 9582.  October 27, 1997           BPASET                    Chris
        Added space for 2 random parameters (time and antenna number)
        per entry to the dynamic allocation for BPBUF in BPASET to
        prevent writing beyond the end of the buffer and subsequent
        corruption of the heap.  Also removed code to round BPBUF
        and BPIBUF allocations up to multiples of 1024 words.  In
        general, it is not a good idea to round dynamic memory
        allocations to an integer multiple of some block size: not
        only does it waste memory but it reduces the chances of
        detecting faulty allocation size calculations during testing
        since the rounding-up can compensate for faulty size
        calculations for some, but not all, combinations of size
        parameters.
        Moved nowhere.

 9683.  October 28, 1997            PCCOR                      Eric
        Corrected missing comma in format 1090.
        Moved to 15OCT97 this date.

 9584.  October 28, 1997             BLING                     Chris
        Changed dimension of NCOMP adverb from 16 to 64.
        Moved nowhere.

 9585.  October 29, 1997           DTSIM                       Chris
        Revised DTBPTB subroutine to generate a BP table that conforms
        to the 15APR98 BP style.
        Moved nowhere.

 9586.  October 29, 1997          POLCO                    Eric
        Changed it to use Wardle and Konberg approximation for low (<2)
        values of Pobs/sigma.  These are relatively smootly connected to
        the values already used for > 2 and will produce negatives st
        noise will be correctly estimated (rather than x2 too low).
        Moved nowhere.

 9587.  October 29, 1997           PBCOR                    Eric
        Added the DOINVERS option so that images may be made to have a
        specified SD beam rather than corrected for having one.
        Moved nowhere.

 9588.  October 31, 1997          XAS.SHR                  Eric
        Updated the .iconedit version of the icon to match the "98"
        icon, added HP2 architecture, moved a link option to stdlibs.
        Moved nowhere - rebuilds are NOT needed.

 9589.  November 3, 1997         CLCOR                     Leonia
        On the request Mark Clausen the format 2071 has been changed
        from F8.3 to F12.3.
        Moved nowhere.

 9590.  November 3, 1997    Compile/Link Scripts          Chris
        Modified COMLNK, COMRPL, FC and LINK so that DEBUG and
        OPTn are not mutually exclusive (most modern environments
        allow debugging of optimized code with some loss of information
        and it is sometime useful to do this).  Also added an option
        to strip symbol tables from executables under user control
        (option STRIP or NOSTRIP) in LINK and COMLNK.  If DEBUG is
        specified then NOSTRIP will be set automatically.  The default
        STRIP value is now set in LDOPTS.SH (updated to set this to
        false in SYSALPHA, SYSDEC, SYSHP, SYSIBM, SYSLINUX, SYSSGI,
        SYSSOL, SYSSUL, SYSSUN, SYSSUN3 and SYSUNIX).  Also removed
        outdated link options for PILABO in SYSSOL and changed
        -xarch=v8plus to -xarch=v8plusa in FDEFAULT.SH: v8plusa
        generates code as good as or better than v8plus for Sun
        SPARC v9 chips (it may enable some vector optimizations)
        but will carry a heavy perfomance version for other
        manufacturer's chips (eg. Fujitsu).
        WARNING: The effects of specifying both OPTn (n >= 1) and
        DEBUG are now system-dependent (eg. Solaris will generate
        optimized code with debugging info but IRIX will disable
        optimization) --- check your local man pages and review
        your options files.
        Moved nowhere.

 9591.  November 3, 1997          QCLEAN                   Eric
        Found bug in CLNINI having to do with Y beam size which got set
        to the X beam size.  Okay - but only for square beams...
        Moved nowhere.

 9592.  November 4, 1997          Save/Gets                Eric
        Changed:
        SGLAST   Change call seq to SGLOCA but unable to use FIXIT
        SGLOCA   Add FIXIT output parameter - means SG version old but
                 fixable with compress.  Changed to make larger
                 directory file and to test the actual file length to
                 determine the limit on number of SG files allowed.
        STORES   Added FIXIT, test on FIXIT and automatic COMPRESS (with
                 a message) for GET.
        This lets 15OCT97 Save/Get files to be converted.  LASTEXIT will
        not be converted as one starts up, but can be converted with a
        GET LASTEXIT.
        Moved nowhere.

 9593.  November 4, 1997           IMAGR                   Eric
        Found a minor gotcha in discarding data outside the allowed u
        range.  Data were tested after reprojection, but the weighting
        is done on the original u,v,w.  Changed the tests to include no
        reprojection always.
        Moved nowhere.

 9594.  November 4, 1997     SGI Compile Options          Chris
        Added an extra pass through APLSGI for YPGM and YPGVDEV.
        Removed $DEBUG and -lbsd from default options in LDOPTS.SH.
        Added flags to schedule code for the R10k (-r10000), turn
        off the warning about lines shorter than 72 characters
        (-woff 2034) and to increase the limit on the number of basic
        blocks that will be optimized to allow optimization of AU8A
        (-OPT:Olimit=2500).
        Moved nowhere.

 9595.  November 5, 1997           BPASET                Chris
        Fixed the allocation size for the other buffer in BPASET.
        Moved nowhere.

 9596.  November 5, 1997          UVPRT                    Eric
        The weight scaling was not set for HOLG mode, causing the data
        to appear to be all flagged.
        Moved nowhere.

 9597.  November 6, 1997           IMERG                 Eric
        Added options AVOPTION and DOWEIGHT.  The former controls
        whether the averaging of the 2 data sets is abruptly 50-50 or
        goes smoothly from 100-0 to 0-100 over the UVRANGE annulus.  The
        latter controls whether the beams are deconvolved/reconvolved or
        not.  Corrected task to not only deconvolve the low-res image
        from its beam but also convolve it with the hi-res image'ss
        beam.  If the 2 beams are not all that different this can be a
        big effect.  If the 2 images do not match well this task does
        make for rings around strong sources even with smooth weighting.
        Moved nowhere.

 9598.  November 6, 1997             PCCOR                Leonia
        The task failued to calculate ATAN2(X,Y) in some mashine if both
        X and Y are zero. To treat such a case a function ATANG2(X,Y) is
        added to calculate ATAN. The function calculates ATAN2 and
        forces the output to zero if both X and Y are equal zero.  The
        task has not treated correct the case of abcense of PC tones for
        some IFs, polarisation. The new version of PCCOR records "inde"
        for real and imag part if PC tones are abcent for the given IF,
        polarisation.
        Moved nowhere.

 9599.  November 6, 1997         LINK              Eric
        LINK    SYSUNIX - removed the export LDOPTS a variable used by
                some systems for their own nefarious purposes.
        Moved to MPI to make their MNJ work.

 9600.  November 7, 1997            ZMSSRV               Pat
        Parameterised the sleep delay when something goes wrong, and
        increased it from 5 to 15 seconds so that the error message can
        be read with somewhat more ease.
        Moved nowhere.

 9601.  November 7, 1997           AREAS etc.            Pat
        Modified AREASSH.SED to produce less baroque AREAS.SH when the
        AREAS script is run.  Also modified UPDAREAS for the midnight
        jobs, and the putbck script in the checkout system to make the
        business of regenerating AREAS.SH and .CSH from the master
        AREAS.DAT file more rational.  When you putback the AREAS.DAT
        file henceforth, it will automatically check out the AREAS.CSH
        and .SH files from SYSUNIX, discard the clear text copies,
        regenerate them from the freshly put back $SYSAIPS/AREAS.DAT,
        check these back into the RCS system and put entries in the
        transaction file for them.  When UPDAREAS in a midnight job
        kicks in and sees the change in a job where UpdDoCopy is set to
        YES (i.e. not accessing files via NFS), it checks that AREAS.SH
        and .CSH were put back also.  If not, it tries to regenerate the
        files locally via AREAS (and issues dire warnings).
        Moved to 15OCT97 this date.

 9602.  November 7, 1997         Sundry                 Pat
        I've been a bit lax about reporting what I've done lately.
        These items have been addressed in the past couple of weeks.
            $SYSSUL/INCS.SH   -  use INCSOL and INC, nothing more.
            $UPDUNIX/MAKE.MNJ -  change to use UPDUNIX/UPDCONFIG as the
                                 master config file for all MNJ's.
            $UPDUNIX/AIPSUPD   - ditto, use UPDUNIX/UPDCOPYSUB too.
            $UPDUNIX/UPDSRTUNQ - use older sort flags for SUN4.
            $UPDUNIX/UPDCONFIG - add all known MNJ sites.
            $SYSUNIX/ALLRSH    - allow ssh in place of rsh.
            $SYSUNIX/COMRPL,LNK- RCS changes to use kochab, not baboon.
            $SYS*/CDVER.*SH    - fix CVX references.
        Moved to 15OCT97 on various dates.

 9603.  November 7, 1997         FILLM                  Gustaaf
        The formula I had been given applied the inverse(!) of the Van
        Vleck correction.  Now FILLM does it correctly, but the status
        is still experimental, and I added a warning to that effect to
        the HLP file.  I relaxed the shadowing logic after Rick Perley
        pointed out that in some cases the user may want to keep data
        that are not too heavily shadowed.

 9604.  November 7, 1997         FITLD                  Chris
        Prevented FITLD from incrementing day numbers in the OB table
        (which uses an MJD instead of a relative day number) when
        midnight boundaries are crossed.  Any time greater than an
        arbitrary limit of 1000 days is now assumed to be an MJD and
        is left alone.
        Moved to 15OCT97 on this date.

 9605.  November 9, 1997         UVUTIL                   Eric
        One of the most error prone areas of OOP code is the handling of
        user defaults.  In the present error, I attempted to cover the
        defaults in IF and Channel numbers in U2IDES after the uv data
        set was open.  At that point, OUVATT has been called and the
        defaults fully handled (after a 9 Feb fix made that is not in
        15OCT97).  Worse, the number of points on the axes of the uv
        has been adjusted for the data selection and therefore cannot be
        used for default handling.  Removed the default handling save
        for missing parameters and added checks for NAXISU having the
        expected values (ECHAN-BCHAN+1, etc).  Bug affected primarily
        IMAGR since 9 Feb in CVX.
        Moved nowhere.

 9606.  November 10, 1997         PCCOR                   Leonia
        PCCOR has used two sequent tones of each IF. In the case of VLBA
        correlator these two tones will be the most left and the most
        right ones if the number of used tones is two. For other
        correlator it is not true. If the number of detected tones is
        more than two PCCOR does not take the most edge tones for any
        correlator.  The modifyed version used the most edge tones in
        any case.  This especially important for non VLBA correlators.
        Moved nowhere.

 9607.  November 11, 1997           COMB                    Eric
        (1) The RM algorithm used APARM(2) in the biasing and then added
        it back, causing its value to have no effect in many cases.
        Changed the code to add it back twice so that the output is as
        advertized.
        (2) Rewrote the task some to:
            a. Have the option of noise images 3 and 4 matching images 1
               and 2.  The BPARM(1) and (2) = constant noise level
               option is retained.  Set them = -1 to use the image.
            b. Added APARM(3) to PANG as a clip level on total
               polarization.
            c. Added APARM(3,4) to SPIX and APARM(5,6) to OPTD as clip
               levels on the input intensities.
            d. Moved Jim Condon's polarization bias correction routine
               in for POLC.  POLCO will retain the recently modified
               versions due to Killeen et al and Wardle et al.
            e. Removed all prohibitions against doing things except that
               POLC requires noise numbers of some sort.
            f. Changed clip on output Noise to default to no clipping
               (BPARM(6) parameter).
            g. Dropped defaults for BPARM(1,2, and 5) as well.
        Changed help file of COMB accordingly and added a comment to the
        help file for POLCO.
        Moved nowhere.

 9608.  November 13, 1997         $SYSHP2/*, $INCHP2, $INCSUL   Pat
        Created these three areas (absent from LIBR.DAT) and populated
        the SYSHP2 area with copies of what's in SYSHP.  Modified the
        INCS.SH file in SYSHP2 so that it includes INCHP2 in the search
        path.  Did not have time to mess with the out-of-date copy of
        LINK that we may not even need anymore.
        Midnight Job sites: watch to make sure UPDAREAS does its work!
        Moved nowhere (yet).

 9609.  November 14, 1997          $APLDEC/ZMOUN2               Pat
        Modified to recognise the DLT drive currently on hominid (a
        ZZYZX-packaged Quantum DLT 7000, 35 Gbytes/tape uncompressed in
        high density, 20 in low density mode) and to select the
        appropriate device for the chosen density.  WARNING: how the
        density/compression modes are mapped to device names may depend
        on how the installer of the drive configures things.  This needs
        to be emphasized in the notes for the next release.
        Moved nowhere (yet).

 9610.  November 17, 1997             XMOM                    Eric
        Added code to detect probable loss of accuracy when trying to do
        first moment (e.g. central value > 1000 * range of value).
        Added offset to first moment incl message and HI entry.
        Moved nowhere.

 9611.  November 17, 1997           FILLM                     Eric
        Changed the default weighting to ignore Tsys rather than use it
        (CPARM(2)).
        Moved nowhere.

 9612.  November 17, 1997           UVPLT                    Eric
        Added option to plot log (ampl).
        Moved nowhere.

 9613.  November 18, 1997           SPLIT                       Eric
        Corrected to use the user's QUAL adverb in deciding whether to
        do an entry in the SU table.  Added a magic value QUAL=-32000
        which, when OUTSEQ > 0, will cause all qual's to go to one
        output file and the error messages from recreating that file to
        be suppressed.
        Moved nowhere.

 9614.  November 18, 1997            ISPEC                      Eric
        Added two more decimal places to each of the parameters being
        written to the output text file.
        Moved nowhere.

 9615.  November 18, 1997           ISTAB                       Eric
        ISTAB is supposed to return TABLE TRUE when EXIST is false.
        This got changed a while back and caused FIXWT to fail - TABOPN
        in OOP actually.  Changed it back.
        Moved nowhere.

 9616.  November 18, 1997         IMMOD, UVMOD                 Eric
        Added two new models - SPHE (uniform, optically thin sphere) and
        EXPD (exponential disk) to IMMOD and added SPHE to UVMOD.  I do
        not have an FFT for an EXPD so that will have to wait.
        Corrected the BMAJ and BMIN to be full widths, they were radii
        in IMMOD but not in UVMOD.
        Moved nowhere.

 9617.  November 18, 1997           BLING                      Chris
        Removed a superfluous test on the dump interval that was causing
        time differences between data points on different baselines to
        be interpreted as unusually short dump intervals on a single
        baseline under rare circumstances.  Also added a check for
        dump intervals less than APARM(1); this condition was not caught
        before and would lead to memory access errors.
        Moved to 15OCT97 on this date.

 9618.  November 19, 1997        TVFLG, SPFLG                  Eric
        Found a bug that caused the rolling buffer average to average
        across source names.  This affected the AMP V DIFF and similar
        modes, causing excess values at the ends of scans.  Sigh...
        Moved nowhere.

 9619.  November 19, 1997           Nits                    Eric
        The PC at UVa pointed out variable names = common name TVDEV.
        Changed $APLGEN ZARGCL, ZARGOP, ZDEACL, ZDEAOP, ZM70CL, ZM70OP,
        ZSSSCL, ZV20CL, ZV20OP, ZVTVCL, ZVTVRC and
        $QPGOOP SNEDT, EDITA, EDITR
        Moved nowhere.

 9620.  November 20, 1997          SELINI                  Eric
        UBUFSZ was not set until UVGET.  Added setting of UBUFSZ in
        SELINI so that tasks like CVEL which call SELINI but not UVGET
        will have this set.
        Moved to mpifr-bonn this date.

 9621.  November 20, 1997          UPDCONFIG               Pat
        Modified so that Arizona (tuc, kp) midnight jobs use the FQDN
        (fully qualified domain name) for mnj.
        Moved nowhere.

 9622.  November 20, 1997           M3TAR                  Chris
        Modified M3TAR to handle null-terminated strings in from tar
        headers (reported by Michael Wunderlich with a different
        solution).
        Moved to 15OCT97 this date.

 9623.  November 20, 1997   $APLNOT/GCALC2, $QPGNOT/CALIB  Ketan
        When using the DOFIT option, if the REFANT did not appear in
        the DOFIT list, some other antenna on the DOFIT list was used
        as the REFANT.  This has now been fixed.
        Moved nowhere.

 9624.  November 20, 1997        $APGNOT/MSORT             Ketan
        In the case of an in-place sort [sometimes necessary] on an
        already sorted file with a missing sort code, MSORT would
        complain and die instead of just reaffirming the presence of
        the proper sort code.  This has now been fixed.
        Moved nowhere.

 9625.  November 20, 1997        $YPGNOT/IRING             Ketan
        The various buffers used inside IRING did not have consistent
        lengths and were restrictively small so that IRING failed on
        large [>2048x2048] images.  This has now been fixed.
        Moved nowhere.

 9626.  November 20, 1997        $QPGOOP/OMFIT             Ketan
        Lots of changes.  The LAPACK code usage has been
        streamlined a bit reducing the sheer size of the code.  This
        version may even now be optimizable on the IBMs.  The matrix
        inversions now use double precision since that didnt seem to
        limit the speed at all.  The disk models are now in working
        order.  For all models, ancillary constants are precomputed
        before running through the data to improve speed.  Ive made
        a better attempt to add reasonable convergence criteria.
        Although this is still development code, there are enough users
        at MNJ sites that I wanted to make this version available more
        easily.
        Moved nowhere.

 9627.  November 21, 1997          *PCAL                      Eric
        The two tasks did not increase the version number of the AN file
        to one bigger than the current max when trying to update the AN
        file for the application of calibration.  Should be better now.
        Moved nowhere.

 9628.  November 24, 1997           PRTAB                    Eric
        Added a line showing subscript ranges printed when applicable.
        Moved nowhere.

 9629.  November 25, 1997          FILLM                      Gustaaf
        The Van Vleck correction was further improved to a point where
        in Rick Perley's data (with high correlation coefficients) the
        artifacts disappeared completely.  Rick is planning more sens-
        itive observations which will put this software to a further,
        even stricter test.  The current implementation works for cont-
        inuum data only; to extend this to spectral line data requires
        much more work since one needs to get back to the lag spectrum
        before one can apply the correction.
        Moved to 15OCT97

 9630.  November 26, 1997          DGGET                  Ketan/Eric
        DGGET was already halving each weight so it was not a good idea
        to halve the sum as well when the 2 polarizations were the same.
        I wonder where weights were doubling when they shouldn't that
        caused me to do this...I guess we'll find out some year.
        Moved nowhere.

 9631.  November 26, 1997         POSSM                    Eric
        POSSM refused to procede with NCOUNT > 9, but had no limits set
        in the help file.  Fixed the help.
        Moved nowhere.

 9632.  November 26, 1997       checking sizes             Eric
        16384 is not usually a good size for non-image buffers:
        UVCRS    16384 -> UVBFSS
        ANTAB    16384 -> 512 for tables
        DTSIM    16384 -> 512 for tables
        GCKEY    16384 -> * (input buff actually 512)
        TABGC    16384 -> * (input buff actually 512)
        FRMAP    JBUFSZ unused, BUFF1 -> 512.
        ITBSRT   16384 -> ZBPRSZ+2 (sorts were failing)
        Moved nowhere.

 9633.  November 26, 1997        MAXCIF                    eric
        Raised MAXCIF to 16384 for the AT in PUVD.INC and raised UVBFSS
        and UVBFSL to account for it in ZPBUFSZ.INC.
        Moved nowhere.

 9634.  November 26, 1997           BPASS                    Eric
        Changed it to use dynamic memory to create needed buffers to do
        full solution in one go no matter how many channels, IFs,
        antennas, etc.  Previously, tests on buffer size were not always
        right and attempts to do solutions piecemeal seemed not to work.
        Dropped BCHAN and ECHAN options since channel selection is not a
        good idea and produced errors in the output bandpass table.
        Added display by channel of excess closure error counts.
        Fixed writing of weights for LL-only data sets.
        Fixed to write a single-polarization as pol 1 even if it is L.
        This inadverrtantly corrected an error: amplitude normalization
        was not aapplied previously to L only data.
        Also fixed CPASS to do write a single polarization as pol #1
        even if it is L.
        Moved nowhere.

 9635.  November 26, 1997             UVMOD                   Eric
        Added EXPD model - an easy thing that I overlooked in Bracewell.
        Thanks to Fred Schwab for putting me straight.
        Moved nowhere.

 9636.  November 26, 1997            BPGET, DOBAND            Eric
        Added unweighted modes 4 and 5 for time interpolations to BPGET
        and updated DOBAND help file.
        Changed help files for
        ACFIT   CALIBRAT   CVEL   DECOR   FRING   HORUS   IBLED   LISTR
        POSSM   SHOUV   SPFLG   SPLIT   TVFLG   UV2TB   UVFIT   UVIMG
        UVPLT   UVPRM   FRPLT   UVPRT   FRMAP   CLPLT   VPLOT   IMAGR
        CALIB   EDITR   GPHAS   BLING   UVMLN
        Moved nowhere.

 9637.  November 26, 1997            PCLOD                  Leonia
        Default of FQTOL has not worked. Now the task has FQTOL equal
        0.1*WBAND if the given FQTOL is .LE. zero. It should work
        in majority cases. The help file is modified also.
        Moved nowhere.

 9638.  December 1, 1997             BPASS                  Eric
        The BNDREF subroutine to adjust the reference antenna had a
        built in divide by zero when there was only 1 time in the
        bandpass table.  Fixed the logic to avoid divide by zeros.
        I then discovered that it still did not re-reference the test
        data set.  It turns out that weights were ignored, channel 1 was
        tested and if it was blanked the record was ignored.  (There
        were several times in the data so the 1st bug above should not
        have been triggered!)  It turns out that channel 1 is often a
        failed solution in the present data so nothing was done - or
        worse yet, the record was rewritten with a changed refernce
        antenna but unaltered phases!  THIS MAY ACTUALLY BE A SERIOUS
        ERROR FOR THOSE PEOPLE WITH FAILED SOLUTIONS IN CHANNEL 1.
        Moved nowhere.

 9639.  December 2, 1997           INDXR                   Chris
        INDXR now allows the user to supply a text file that specifies
        times at which scan boundaries must occur.  This is mainly
        intended to force scans to be broken when clock setting events
        occur at Haruka ground stations.
        Moved to 15OCT97 on this date.

 9640.  December 2, 1997              ZMIO                  Eric
        Changed APLUNIX version of ZMIO.FOR to limit the IO transfer to
        1 Megaword, 8 times more than the previous "rational" upper
        limit.
        Moved nowhere.

 9641.  December 3, 1997           POSSM                  Leonia
        The new option ploting the phase as well as amplitude has
        been added for auto. This option works if APARM(8)=5 and
        has a sense if STOKES= RL or LR. This option allows to
        investigate cross polaristion property of antennas.
        Help file has been modified also.
        Moved nowhere.

 9642.  December 4, 1997         Coordinate verbs          Eric
        Changed:
        POPSDAT   $HLPFIL: add verbs COSTAR, COWINDOW, adverb COORDINA,
                  and proc COTVLOD.
        NEWPARMS  $RUNFIL: add verbs COSTAR, COWINDOW, adverb COORDINA.
        COSTAR    $HLPFIL: new verb to plot symbol at coordinate on TV.
        COWINDOW  $HLPFIL: new verb to set BLC and TRC from a
                  coordinate, IMSIZE, and image selection.
        COORDINA  $HLPFIL: new array adverb.
        COTVLOD   $HLPFIL: new proc to TVLOD after COWINDOW, protecting
                  BLC and TRC from change on output.
        AU5B      $AIPSUB: add code to plot symbol, calling new PNTPLT.
        PNTPLT    $YSUB: symbol plotting code stolen from STARPL.
        STARPL    $YSUB: remove symbol plotting code and call PNTPLT.
        AU7       $AIPSUB: add verb COWINDOW.
        Moved nowhere.

 9643.  December 4, 1997            IMAGR                  Eric
        Changed IMAGR to write the max(ABS(U)) evaluated over all
        rotations and re-projections as a header keyword in the IMAGR
        work file not only as MAXBLINE but also as MAXABSU.  Changed
        UVPROT to check for the latter and to use it rather than
        recomputing it (reading all the uv data) every time a field has
        components subtracted in 3d imaging mode.  This cannot be made
        more general since it is not possible to guarantee the MAXBLINE
        keyword always to be correct for all of the current set of
        projections.  Fortunately, most tasks go through it only once or
        once per field, while IMAGR did it many many times.
        Moved nowhere.

 9644.  December 4, 1997           VLBDDT                Chris
        Set INFILE to blank before calling INDXR.  Uses DTSIM from
        specified VERSION rather than TST.
        Moved to 15OCT97 on this date.

 9645.  December 4, 1997           COHER                Leonia
        The new version of COHER in contrast to the old one can
        determine coherence time in the case of non zero fringe
        rate. That allows to use it to predetermine the solution
        interval for FRING.  Coherence time is determined by comparing
        vector and scalar averaged amplitudes. Vector averaging is
        provided by fitting a complex exponent by non lenear least
        square method. The first approach for the least square is given
        by FFT. The output as tables of found coherence times of
        different baselines and antennas for different time intervals
        and sources, can be displayed at the terminal or printed at
        printer or sent to the file under control of DOCRT and OUTPRINT.
        Moved to 15OCT97 on this date.

 9646.  December 5, 1997           PCLOD                Leonia
        The new parameter OUTVER for output PC table has been added.
        The old version has allowed to put the data only if a PC table
        had not existed. Now it is possible to send the data at any
        given  output PC table. If the given PC table had
        already existed the output added to that table.
        Moved nowhere.

 9647.  December 5, 1997               ZFRE2                    Eric
        Apparently the new Solaris can return 0 blocks for disk
        contents.  This provoked a 0 divide in ZFRE2.C in $APLSOL and
        would do do in $APLSGI, $APLDEC, $APLUNIX which I also fixed.
        Moved from cochiti this date.

 9648.  December 6, 1997             BPASS                      Eric
        A residue of Phil code caused the sort routine to think it had
        way more memory than it did.  This left a time bomb waiting for
        a ZEXPN2 malloc for the HI file.  Fixed the call to the
        re-referencing routines to have the right size and only
        arguments that are actually used.  Changed the dynamic
        allocation so all 4 big arrays are contiguous and thus available
        to the sort and other routines.  Fixed a call sequence error
        that caused 2-polarization solutions to write only the first.
        Removed STOKES adverb since that can mess things up royally.
        Setting it to I gets a bad I with no cal, but fails to say IPOL
        in the BP table; columns are now wrong and were and are too few,
        etc etc  Changed help to reflect.
        Moved nowhere.

 9649.  December 6, 1997          CALIB                         Eric
        Clarified wording of CALIB help file.  The print level must be >
        0 to get any print even if MINAMP and MINPHS are set.  This
        differs from BPASS which will print some summaries even on level
        0 when MINAMP and MINPHS are set.
        Moved nowhere.

 9650.  December 7, 1997              POSSM                     Eric
        Cleaned up messages a little.  Found two places where it was not
        understood that SOLINT = -1 is repetitive just like SOLINT > 0.
        One of these caused it not to wait at the end of a plot page
        when going on to the next time interval.
        Moved nowhere.

 9651.  December 7, 1997           TVFLG, SPFLG                  Eric
        The gridding subroutine $APLNOT/GRIDTB had an error causing it
        to misgrid data one time row too high under some circumstances
        when doing averaging.  In particular, 5-second samples with a
        10-second averaging would encounter this problem.  Then, the
        times appearing in the flag table would not necessarily apply to
        the bad data.  This error only arose when averaging on input,
        not when averaging for loading to the TV.  Fixed a GT test to GE
        to correspond to a later test on row number.  Also fixed the
        handling of times - they were rounded to integer intervals of
        1/11 of the averaging time.  This caused some times in the above
        case to appear to be in the next row (exactly at the bottom)
        when their times actually placed them in the previous row.
        Dropped all the interval business.
        SPFLG had the GE bit right, but did make the error of
        integerizing the data times.
        Moved nowhere.

 9652.  December 8, 1997           $APLSOL/ZMOUN2               Pat
        Added support for DLT 7000 drives.  CAUTION: make sure you have
        the device set up with densities as described in the comments of
        $APLSOL/ZMOUN2.C; there are three different possible densities,
        added to which compression gives six possible configurations,
        with only four of these accessible at one time via different
        device names.
        Moved to 15OCT97 this date.

 9653.  December 8, 1997             INDXR                   Chris
        Added a trap for data out of time order; INDXR will now request
        that the user sorts the data and quit.  Previously this
        condition would be silently ignored.
        Moved nowhere.

 9654.  December 8, 1997            GETHEAD                  Eric
        Changed AU7A to handle extension types and versions properly.
        Instead of fixed general pointers, made these two keywords
        special and did general parsing of the last 2 chars to get the
        offset.  This handles any number KIEXTN.  Added FXHEXT call.
        Moved nowhere.

 9655.  December 9, 1997          $APGOOP/COHER             Leonia
        The task titled the ouput table by the following source name
        because a small error in the logic. It's been fixed.
        Moved nowhere.

 9656.  December 9, 1997           IBLED                      Eric
        1. Fixed handling of narrow-window menus; the model selection
        was not installed for them and caused the task to die.
        2. Added a routine to write a history file.  It did not do so
        before despite the adverb advertising it.
        3. Added DPARM(4) = input averaging time to help on the time
        binning problem in doing the initial averaging/calibration.
        4. Added code to reduce the writing of duplicate lines to the FG
        table and HI file.
        Moved nowhere.

 9657.  December 9, 1997            INDXIN                  Eric
        Changed INDXIN to honor INITVS for multi-source as well as
        single-source files.  I had assumed that it did and it appears
        that the OOP code also assumed it.   Almost nothing but UVPRT,
        PRTSD, and UVDATA in OOP (as VISOFF) use it so far.
        Forgot earlier to COMRPL DGGET so that fix did not propagate.
        Moved nowhere.

 9658.  December 10, 1997          SPLIT.HLP                Eric
        Cleaned up wording about QUAL.
        Moved nowhere.

 9659.  December 10, 1997        GETNUM, TBIN, TBOUT         Eric
        Changed GETNUM to return DBLANK with ERRNUM=0 if the "number" is
        'INDE' or 'INDEFINT' (complete with quote chars).  Changed TBIN
        to accept DBLANK with ERRNUM 0 as okay for R*8 and R*4.  Changed
        TBOUT to write BINTABLE not the obsolete A3DTABLE.
        Moved nowhere.

 9660.  December 10, 1997             FILLM                   Eric
        Put a test in for time order and issue an error message and
        reset the sort order to '  ' when data out of order is found.
        Changed the tests that decide about new FQ IDs to not require
        that bandwidths and the like be binary equal, allowing
        differences up to 1 part in 10**4.  Later went through all .EQ.
        in the task and fixed all floating tests to be done properly.
        Moved nowhere.

 9661.  December 10, 1997           SNSMO                     Eric
        On an amplitude only SN table it detected a range of reference
        antennas and tried to re-reference.  Since there were no cross
        references, it failed and flagged most everything.  Added code
        to detect the presence of phase, rate and delay and to do
        re-referencing only if there is anything to do.  The final
        routine which flagged the failures now just changes the ref ant
        when all phases were 0 anyway.
        The SN table had REFANT - ant for all records from APCAL.  So I
        changed APCAL as well to pick up the first useful antenna and
        call that one the reference antenna thereafter.  This should
        keep other re-referencing tasks from bad things.
        Moved nowhere.

 9662.  December 11, 1997           SPLIT                    Eric
        Removed the special option that wrote all qualifiers into one
        output file.  That file is a multi-source file and not the
        desired result, but there is no requirement that the qualifiers
        all have the same coordinate just because they all have the same
        name.
        Moved nowhere.

 9663.  December 11, 1997          POPSDAT                  Eric
        POPSDAT.HLP is read with a fixed format Fortran read!!  The
        columns that give the dimensions of the array must be typed in
        the correct columns.  I forgot this with SPARM and it got
        dimensioned by 1.  Fixed this - everyone using ANTAB will need
        to do a COMPRESS in AIPS to get the right dimensions.
        Moved nowhere.

 9664.  December 12, 1997          BPSMO                     Eric
        Added DOWEIGHT adverb to control whether the solution weights
        are used in the interpolation or ignored and whether the output
        weights are computed by weight combinatorial methods or by the
        same interpolation as the BP values.
        DOWEIGHT...> 0 => use the solution weights in the time
        smoothing; else ignore them.  If the solution weights are very
        variable, but the solutions have real variations with time, then
        it is best to ignore the weights.  If the weights are not
        greatly different, then using them improves the noise of the
        smoothed result.  DOWEIGHT = 2 or -2 causes the output weights
        to be computed by noise combinatorial methods, otherwise the
        data weights are interpolated.  If the solutions do not vary
        rapidly with time, then an averaged solution is more reliable
        and DOWEIGHT 2 would reflect that.  If they do vary with time,
        then the nearest neighbor gets less reliable (for estimating the
        BP at the present time) the further away it is in time.
        DOWEIGHT -1 (or 1) is a partial compensation for this.
        In doing this, found errors in the noise combinatorial
        computation and in indexing for 2-point interpolation.  The
        latter prevented the method from working.
        Moved nowhere.

 9665.  December 15, 1997    VPLOT, CLPLT, UVPLT, DESCM.HLP  Leonia
        The explanation of XINC in the HELP files has been given as:
        " # visibilities to skip". It is not true. For example: nothing
        is skipped if XINC=1. So I changed XINC explanation as:
        "Plot(use) every XINC'th visibility".
        Moved nowhere.

 9666.  December 16, 1997           IMAGR                   Eric
        DATAMAX et al refer to the max image value on disk, not just in
        the current plane, but in all planes.  IMAGR was using it as if
        it applied to the current data plane.  Changed:
        MAKMAP   To ignore the max/min on disk for processing channel 1.
                 IMGMEM already did this.
        QUVUTIL  To have OUVIMG write the current plane's min and max as
                 FIELDMIN and FIELDMAX into the object.  These are in a
                 common returned by MAKMAP.
        QCLEAN   To use FIELDMIN and FIELDMAX instead of DATAMIN and
                 DATAMAX in TV loading and in setting data ranges.  Adde
                 subroutine CLMXMN to read the full output data cube and
                 put the correct max/min into the header.  Otherwise,
                 cubes might be messed up by the min/max of dirty planes
                 or other processing steps.  This is especially true if
                 a residual image was to be written.
        Moved nowhere.

 9667.  December 17, 1997          PCCOR.HLP               Leonia
        More attention is added to a possible self averaging
        calibrator's visibilities because of non zero fringe rate.
        Moved nowhere.

 9668.  December 18, 1997          AFILE                 Walter Alef
        Scott Aaron at MPI found a bug in AFILE.FOR ($APGNOT).  The
        FRNGE quality factor was read from the wrong column: was 56
        should be 57!
        Moved nowhere.

 9669.  December 23, 1997          IMAGR                    Eric
        CHANNEL was not used correctly.  Images were written starting at
        output channel 1 even though CHANNEL > BCHAN.  Corrected logic.
        Moved nowhere.

 9670.  December 23, 1997          TABINI                  Eric
        Changed it to do the requested version number even if it is
        large compared to the current number.  Forces programs to ask
        for 0 => N+1 or to get it right.  But then one can use the
        version number for something meaningful such as channel number.
        Also changed: AGINI, ATINI, BAINI, BCINI, CAINI, FLINI, IMINI,
        SOINI, WXINI, CMINI, PCINI, FXPOL to handle VER=0 on input.
        Previously, VERS = 0 would cause 2 files to be created, vers 1
        with labels and keywords but emptry vers 2 returned.  Changed
        USUBA and RESEQ to allow for missing versions wothout leaving
        the loop entirely.
        Moved nowhere.

 9671.  December 23, 1997           UVCOP                   Eric
        If UVCOP could apply FG tables to data, then it could be used to
        compress large data sets having long periods of fully flagged
        data.  So added FLAGVER to help and task.  This required:
        Changed to expand and compress the uv data.
        Noticed that the loop variable VER was being passed in to
        routines to copy with reformatting various tables.  This loop
        variable could be reset to 0, changed, or force an error if not
        all versions of the input exist.  Changed the following to use a
        local OVER (set to VER initially) for output version to avoid
        changing the loop variable; the change to TABINI avoids the
        cannot create error.  Also added messages to report the copying
        or reformatting.  Changed were BPFSEL, CLSEL, CQSEL, FGSEL,
        IMSEL, SNSEL, SUSEL, and removed from UVCOP.FOR and fixed up was
        PCSEL.  Replaced the $APLNOT version of CLSEL with a fixed up
        copy of what was in UVCOP.  (No one used the APLNOT one.)
        Moved nowhere.

 9672.  December 23, 1997         ASCAL                      Eric
        Drive a silver stake at midnight through:
            $QPGNOT/ASCAL      $QPGNOT/VSCAL
            $APGNOT/ASCOR      $APGNOT/GNMRG       $APGNOT/PRTGA
            $APLNOT/GNSMO      $APLNOT/GNFSMO
            $YPGNOT/GAPLT      $YPGNOT/GNPLT
        And corresponding help files.
        Also $APLNOT/GAINI and TABGA which pretended that GA files are
        really tables.
        Dropped EXTCOP of GA files from UVCOP, RESEQ, UVFIX, MSORT, AVER
        DESCM, UVAVG, UVDGP, UVSRT, BASRM, CLIP, CORER, UVSUB.
        Moved nowhere.

 9673.  December 24, 1997           INDXH                    Eric
        Old INDXR fixed up a little as a stop=gap measure since the new
        one has serious flaws.
        Moved nowhere.

 9674.  December 29, 1997    $SYSPERL/check_version.pl      Jeff
        Added Perl v5.004 to @tested_versions list.
        Moved nowhere.

 9675.  December 29, 1997              UVCOP                  Eric
        Added tests and ZEXPND for more data than expected.  Fixed time
        reporting.  Defended CATBLK from depredations of TABSRT which
        creates scratch files.
        Moved nowhere.

 9676.  December 29, 1997            UVMOD                  Eric
        Fixed uncompress/compress operation - it was only doing the
        first IF for compressed data.  Added test for multi-source files
        (not allowed) and fixed error handling in init routine.
        Moved nowhere.

 9677.  December 31, 1997            $QPGNOT/FRING          Ketan
        If APARM(9)>0 and DPARM(1)=0,2, or 3, FRING was supposed to
        first try stacking baselines to look for fringes and if the
        resulting SNR was too low, failed, try an unstacked search.
        Due to a typo, the unstacked search was never carried out.
        This typo had not effect if APARM(9)=0 or if DPARM(1)=1 and
        should have had minimal effect otherwise.  This has now been
        fixed.
        Moved nowhere.

 9678.  December 31, 1997           UVCOP                   Eric
        Pointers to the uv data header IF and Freq axes were not set, so
        the flagging routines did not know how to handle EIF and ECHAN.
        This escaped detection in my tests which were all on continuum
        data.  Sigh...
        Moved nowhere.

 9679.  January 4, 1998               DBCON                  Eric
        Corrected phase shifting to be faster and more correct.  The
        frequency correction was applied over and over due to an
        oversight.  Phases are now changed with correct frequencies at
        all times in either the merge or append modes of the task.
        Either or both of the data sets may be compressed and phase
        correction, etc will still take place.  Multi-source files do
        not have their phases corrected.  However, if a source/qual is
        found to have two different coordinates/epochs, then the second
        of the two is renamed.  Fixed up help file too.
        Moved nowhere.

 9680.  January 5, 1998            START_AIPS                Pat
        Put in our agreed-upon solution to the remote shell AIPS ROOT
        problem.  There is now a variable REMOTE_ROOT that will by
        default be set to /AIPS but can be overridden by the installer
        (if I remember to update INSTEP1!) or the AIPS manager after
        installation.  Also added a hook so that alternate remote shell
        commands, e.g. ssh, can be used; just set AIPSREMOTE to ssh
        before starting AIPS.  Default is still rsh/remsh.
        Moved nowhere, will move to $AIPS_ROOT tomorrow.

 9681.  January 5, 1998       PSHIFT in APLNOT              Chris
        Replaced PSHIFT, which assumed polynomials of degree 5, with
        a more general routine that will shift the origin of any
        polynomial of degree no greater than 16.  This required adding
        an extra argument for the degree of the polynomial.  GETDEL
        appears to be the only routine affected by this change.
        Moved to 15OCT97 patch area January 8 1998.

 9682.  January 5, 1998       GETDEL in APLNOT              Chris
        Rewrote GETDEL to use the time intervals from the IM table
        rather than assuming 2 minutes everywhere.  Also updated the
        call to PSHIFT.
        Moved to 15OCT97 patch area January 8 1998.

 9683.  January 5, 1998             WHATSNEW                 Eric
        Updated the help file, adding new things to a summary section at
        the top and inserting them in the main discussion area as well.
        Moved nowhere.

 9684.  January 6, 1998        $APGOOP/PASTE.FOR              Bill C.
        An error in the number of values to copy from the subimage to
        the output image was being miscalculated if part of the subimage
        was outside of the input image.  This was in PASTIT DO
        loops 100, 110, 120.  The effect was to write zeroes over part
        of the input image.
        Moved from NVSS Aips by Eric.

 9685.  January 6, 1998         SD imaging                    Eric
        Found a serious bug in the usage of circular convolving
        functions.  Both SDGRID and AEGRID allocated (CINC*M)**2
        locations for the function but used (CINC*M + 1)**2 locations.
        The high locations were part of the channel 1 image and could
        have large numbers in them or be all zero if the output image
        had some rows of zero at the bottom.  The former should have
        been obvious, the latter is essentially no error.  Affected
        SDIMG, SDGRD, BSGRD, and BSGEO.
        Moved nowhere.

 9686.  January 7, 1998       $APLNOT/TABTY                  Phil
        Finally discovered why APCAL couldn't do anything with the TY
        tables generated by VLBA calibration transfer. The TY tables
        from the VLBA have zero length columns for Tant, FITLD and all
        other routines could handle this but TABTY could not. Fixed so
        that they are recognized and dealt with.
        Moved nowhere.

 9687.  January 8, 1998        $APLNOT/TABTY                  Phil
        Error in the indexing. Fixed.
        Moved nowhere.

 9688.  January 8, 1998      Delay polynomials                Chris
        Corrected a constant in a call to DFILL to be a double rather
        than single precision to avoid bus errors. Also corrected the
        type of the GEODLY argument to OGTDEL to be double precision
        in OGTDEL.
        Moved to 15OCT97 patch area this date.

 9689.  January 8, 1998       UVDATA object                  Chris
        Added the capability to read uv data files without calibration
        or editing.  If OUVOPN is called with a status of 'RRAW' (read
        raw data) then subsequent calls to UVDATA on that file will
        return the data as stored on disk; decompression is automatic.
        Also revised UVDPNT in the UVDESC object to adjust the data
        increments to reflect the uncompressed version of any data
        since data is only seen in uncompressed form when using the
        object-priented FORTRAN routines.
        Moved to 15OCT97 patch area this date (except UVDESC).

 9690.  January 8, 1998              INDXR                   Chris
        Revised INDXR to use raw data access and removed the file
        locking tricks that are no longer necessary so INDXR now
        behaves properly for multiple FREQIDs.  Also changed INDXR
        to take the number of delay polynomial coefficients from the
        IM table when transfering delay polynomials to the CL table
        rather than assuming that there are 6 coefficients (the
        Penticton correlator writes polynomials with 8 coefficients).
        Moved to 15OCT97 patch area this date.

 9691.  January 8, 1998        FITLD related               Eric
        GETDEL   Called DFILL with 2nd argument a REAL*4 (0.0).  Died
                 for bad address in FITLD on cochiti.
        IMSORT   Changed it sort to time-ant no matter what the header
                 claimed was the sort order.  It was not reseting the
                 sort order somewhere and then not sorting.
        CLSORT   Force sort in any case.
        FRQUPD   Force sort on logical CLSORT, ignoring header sort
                 claims.
        FITLD    Similar change to s.r. MCSORT internal to FITLD.
        Phil has FITLD out, rest Moved nowhere.

 9692.  January 9, 1998        $APGNOT/PCCOR                Leonia
        Craig Walker has demonstrated the data with very extreme cases
        of PC tones behaviour. In particular some antennas (IFs) have
        the measured phase difference of the two tones close to 180
        degrees or to 360 degrees. If such an antenna was selected as
        the reference one, PCCOR provided occasionaly 1 turn error at
        the ambiguaty solve. The problem was fixed by enchancing the
        algorithm of the ambiguaty solve. In particular the delay
        between the two tones of the reference antenna for the
        calibrator's scan was stored additionnaly to delay between given
        and reference antennas' tones. So ambiguaty for the reference
        antenna was solved comparing the tones phase difference with the
        stored phase difference at the calibrators' time.
        Couple of sentences are added to the HELP file explaining the
        two tones selection in the case when more than two tones exist.
        Moved nowhere.

 9693.  January 9, 1998        $APGNOT/PCLOD                Leonia
        Algorithm of frequencies' matching has not worked, if number of
        IFs in the data does not coincide with number of IFs in PC
        table.  The old algorithm required mathching for each IF, that
        cannot occur, if number of IFs in the data does not coincide
        with number of IFs in PC table. The new algorithm consider the
        data match, if at least one IF of the data matches.  PCLOD has
        not worked with the new four digits format for the year.  The
        standard routine DATEST was added to read both old and new
        format.
        Moved nowhere.

 9694.  January 9 1998        DATFST in APLSUB            Chris
        Changed the last year for writing old-style 'DD/MM/YY' dates
        from 1997 to 1998 in line with the IAU FITS Working Group
        document approved on November 10 1997.  Note that FITS files
        written between January 1 1998 and the time this fix goes in
        cannot be read by earlier releases of AIPS.  This will give
        15APR98 a chance to diffuse into the community before we
        start writing 4-digit years again.
        Moved nowhere.

 9695.  January 10, 1998       Subarray & FQ number       Eric
        Changed to allow <= 0 for subarray number and FQ number to mean
        any and all.  Previously, flags and gains copied from a
        single-source file to a multi-source could have FQs = -1 and
        these would then not apply to anything (since they were not 0).
        DATFLG  To check on FLGSUB(i) > 0, rather than neq 0
        NXTFLG  To check on FQ number matches only if FRQSEL > and
                FLGFQD(i) > 0.
        CSLGET  To include CL data records for which FQ or SUB <= 0.
        BLGET   To include BL data records for which FQ or SUB <= 0.
        SDCGET  To include CL data records for which SUB <= 0.
        VISCNT  To include NX data records for which FQ or SUB <= 0
        SOUNDX  To include NX data records for FQ or FRQSEL <= 0.
        DATGET  To include NX data records for FQ or SUB <= 0
        DGETSD  To include NX data records for SUB <= 0
        CALSEL  To include CL records for which FQ or SUB <= 0.
        BPGET   To include BP records for FQ <= 0, handle SUBA <= 0
        BPASET  To include BP records for FQ <= 0, handle SUBA <= 0
        Moved nowhere.

 9696.  January 11, 1998       DFLV.INC, FLINI, FLTAB       Phil
        Barry pointed out that the VLBA FITS definition for times in the
        flag tables was single precision but the code assumed double
        precision. Modified the code to obey the documentation since
        single precision is what AIPS FG tables use.
        Moved nowhere.

 9697.  January 13, 1998         $APLNOT/TABHDR               Phil
        Modifed to recognize TY, GC and PC tables from the VLBA,
        Mitaka and Penticton correlators.
        Moved nowhere.

 9698.  January 13, 1998         $APGNOT/FITLD.FOR           Phil
        Modified FITLD to handle TY and GC tables. It can read them as
        written by the VLBA, Mitaka and Penticton correlators but some
        keywords are not passed on by the VLBA, FITLD will add those
        keywords and ensure that the subarray columns are filled with
        1s. If a subarray condition does occur then USUBA should replace
        the 1s with appropriate values. Also added the code to perform
        IF selection on the TY and GC tables as they are read from tape.
        Made four other minor changes: 1) fixed the bug causing the
        extraneous message regarding the lack of CQ tables when files
        are being concatenated; 2) ensured that the MC table is always
        sorted; 3) changed all GETLOG calls to GETLG; 4) changed the
        RENAME subroutine to RENAM to avoid Fortran 90 problems.
        Moved nowhere.

 9699.  January 13 1998          TABSRT in APLNOT           Chris
        TABSRT implicitly assumed that its CATBLK argument was the
        same CATBLK as in common /MAPHDR/ and could trash the /MAPHDR/
        CATBLK if this was not the case (as in CVEL).  Renamed the
        CATBLK argument to CATIN and included INC:DCAT so that the
        /MAPHDR/ CATBLK is restored after the call to MAPCLR.
        Moved nowhere.

 9700.  January 13, 1998         Sub arrays...               Eric
        Changed Fortran:
        ANCAL    To accept FQ <= 0, SUBA <= 0 in CL tables to mean any.
        AU8A     To shift SNPLT parameters for new SUBARRAY adverb in
                 EXTLIST.
        AVSPC    To accept FQ <= 0, SUBA <= 0 in FG tables to mean any.
        BASRM    To accept FQ <= 0 as any in NX tables, to correct logic
                 error in handling FREQID which misestimated file sizes.
        BPLOT    To accept FQ <= 0, SUBA <= 0 in BP tables to mean any.
        BPSMO    To accept FQ <= 0, SUBA <= 0 in BP tables to mean any.
        CLSMO    To accept FQ <= 0, SUBA <= 0 in CL tables to mean any.
        CLCOR    To accept FQ <= 0, SUBA <= 0 in CL tables to mean any.
        FARAD    To accept SUBA <= 0 in CL tables as any.
        POSSM    To accept FQ <= 0, SUBA <= 0 in BP tables to mean any.
        QUACK    To accept FQ <= 0, SUBA <= 0 in NX tables to mean any.
        SNCOR    To accept FQ <= 0, SUBA <= 0 in SN tables to mean any.
        SNPLT    To accept FQ <= 0 in CL/SN/.. tables to mean any; to
                 accept and apply new adverb SUBARRAY with SUBA in CL et
                 al. tables <= 0 => all.
        SNSMO    To accept SUBA <= 0 in SN tables to mean any.
        SOLCL    To accept FQ <= 0, SUBA <= 0 in CL tables to mean any.
        Changed Help files:
        SNPLT    To add SUBARRAY adverb, needed in some tables.
        Moved nowhere.

 9701.  January 13, 1998      Standard F90 names            Eric
        Out subroutine GETLOG conflicts with something in F90, so
        renamed it GETLG.  Changed IMLOD, UVLOD, GSCAT, TBIN, FPARSE,
        and PUTCRD.  Should have changed GETHDR and FITLD.  The last has
        RENAME internally which also must be renamed.
        Moved nowhere.

 9702.  January 13, 1998         ZMI2   (!!!!)              Eric
        Found a bug that caused the lastbyte to be put in the FTAB
        incorrectly when the IO asked for 0 bytes (which it does at each
        MINIT call, i.e. for each plane).  The lastbyte was not computed
        for 0 bytes so some previous value was stored in FTAB and then
        used to decide whether an lseek was needed on the next call for
        that file.  TRANS managed to come up with a situation in which
        it actually skipped an lseek it needed to do because of the bad
        value.  It was a mess to debug since adding print messages
        changed things, making them work.
        Moved nowhere - but the mnj's had better get busy!

 9703.  January 14, 1998     $APLUNIX/ZABORS.C              Jeff
        Added #include of <sys/types.h> to make RedHat 5.0 happy.
        Moved nowhere--yet; should probably be released as a patch.

 9704.  January 14, 1998  $APLUNIX/ZCPU.C $APLLINUX/ZCPU.C  Jeff
        Removed #ifdef clause from $APLUNIX version, separating the
        Linux-specific version into its own (new) file in $APLLINUX.
        Added #include of <time.h> to Linux version for RedHat 5.0.
        Moved nowhere--yet; $APLLINUX version should be a patch.

 9705.  January 14, 1998      $APLUNIX/ZERRO2.C             Jeff
        Added #ifdef __linux__ clause around extern definition of
        sys_errlist[] due to conflict with a system .h file under glibc;
        change has no effect on non-glibc Linux systems.  (Ran into this
        one under AIPS++ some time back.)
        Moved nowhere--yet; should probably be released as a patch.

 9706.  January 14, 1998      $APLSOL/ZULIM.C               Jeff
        After having had this checked out over 1.5 years to add some
        comments, I finally remembered to check it back in.  Admittedly,
        Eric prodded me about it recently.
        Moved nowhere.

 9707.  January 15, 1998      $SYSLINUX/CCOPTS.SH           Jeff
        Added definition of HAVE_LINUX_GLIBC on C compiler command-line
        when /lib/libc.so.6 exists; needed to sort out subtle #include
        file differences between pre- & post-glibc based Linux systems.
        NOTE: I've talked to Eric and we agree it's probably best if the
        earlier changes I made for Linux glibc are *not* released as
        patches; we'll just declare 15APR98 to be the first AIPS version
        to support Linux/glibc.
        Moved nowhere.

 9708.  January 15, 1998      $APLUNIX/ZERRO2.C             Jeff
        Changed #ifdef clause (actually, it's an #ifndef) added in entry
        #9705 to use HAVE_LINUX_GLIBC instead of __linux__.
        Moved nowhere.

 9709.  January 15, 1998      $APLUNIX/ZMSSRV.C             Jeff
        #include of <sgtty.h> or <bsd/sgtty.h> now conditional on
        definitions of !__linux__ and HAVE_LINUX_GLIBC.
        Moved nowhere.

 9710.  January 15, 1998      $INSUNIX/INSTEP1              Jeff
        Some changes to section dealing with ELF support on Linux
        systems: now properly detects ELF if system uses new glibc
        (libc.so.6), also defaults query reponse to "YES" now that ELF
        support has been included in all mainstream Linux distributions
        for *years*.
        Moved nowhere.

 9711.  January 15 1998         GPSDL                      Chris
        Reset the fiddle factor to unity.  The 35% difference between
        the model and measured values found in the first experiments
        were due to a geometry error long since fixed.
        Moved nowhere.

 9712.  January 15, 1998      $SYSLINUX/LDOPTS.SH          Jeff
        Linking to libbsd.a is no longer needed under Linux/glibc.
        Added conditional so that -lbsd is only added to $LINK on
        pre-glibc systems.
        Moved nowhere.

 9713.  January 15, 1998      $INSUNIX/INSTEP1             Jeff
        Changed hard reference to f77 (in compilation of UNSHR during
        build of GNU readline library) to use $FORT instead.
        Moved nowhere.

 9714.  January 15, 1998         Misc                       Eric
        Changed:
        CATKEY   The array that kept track of which keywords were found
                 was only 100 long and no tests were done to see if the
                 calling routine specified > 100.  Changed it to 512 and
                 added tests to avoid problems if more requested.
                 FITTP called this with too large an argument.
        AU5C     Verb FILEBOX was not translating INCLASS correctly
                 after I changed the naming conventions for fields.
        SETSP    Dropped branches to quit on SPSET errors so that it
                 will continue despite missing computers, etc.  The
                 SPSHOW errors were already ignored.
        Moved nowhere.

 9715.  January 16, 1998         LINK                       Pat
        Changed the logic used in the SAVE section where old .EXE files
        are copied to $LOAD/$FILE.EXE.OLD before the new $FILE.EXE is
        moved into place from $PREP.  Now it will silently delete the
        $FILE.EXE.OLD after moving it.  The idea is that any running
        instances of the binary will have the file open and so it won't
        actually disappear completely until all these instances go away.
        This should help prevent a buildup of .EXE.OLD files that has
        crashed several midnight jobs in recent times.
        Moved nowhere.

 9716.  January 16, 1998   $APLUNIX/{ZTVSRV,ZTKSRV}.C       Jeff
        ZTVSRV: See #9709.
        ZTKSRV: #9709 plus changed ioctl()'s to use termios method of
                setting RAW mode et al. when HAVE_LINUX_GLIBC is
                defined.
        Moved nowhere.

 9717.  January 16 1998          TABHDR in APLNOT           Chris
        Added VLBA pulsar gate tables to the list of recognized
        extensions and removed a duplicate entry for the GAIN_CURVE
        table.  The GATEMODL table is loaded as extension type GM and
        the GATEDUTY table as extension type GD.
        IMPORTANT NOTE: these table are currently used only for testing
        --- both the names and the internal structures of these tables
        may change.
        Moved nowhere.

 9718.  January 19, 1998             FITLD                    Phil
        Added the code to do IF selection on read for the GC table.
        Moved nowhere.

 9719.  January 19, 1998           CATIO                    Eric
        On some of the less disasterous error codes, CATIO still did not
        return an image header.  Perhaps it used to but when the headers
        were moved to CB files it stopped doing so.  Actually, on error
        5, the header is to be regarded as unreliable since the file is
        being written and so it makes sense NOT to return.  Since some
        tasks ignore errors > 4 this could be catastrophic to people's
        data.  Changed it to return an image header on error codes 0,
        5--9.  Error 5 should still be regarded as serious ands cause to
        quit by right-minded programs.
        Moved nowhere.

 9720.  January 19, 1998        Table INI routines          Eric
        Many but not all table init routines use the call sequence
        keywords as input only when the file is being created and fill
        them in when it already existed even on WRIT.  Unfortunately,
        this habit is not universal.  ANTINI required an open for read,
        TABIO close, then reopen for write to do this.  Cleaned up and
        changed the following to return parameters whenever the file
        pre-exists.  UVCOP, CLCOR and others made mistakes because of
        this.
        Changed: ANTINI, AGINI, ATINI, BAINI, BCINI, BLINI, BPINI,
        CAINI, CALINI, CMINI, CQINI, CSINI, FLINI, FQINI, FRINI, GAINI,
        GCINI, GPINI, HFINI, IMINI, MCINI, NDXINI, OBINI, OTTINI, PCINI,
        SNINI, SOINI, SOUINI, WXINI.
        Added units to OB table write; removed erroneous (uninitialized)
        checks on FQID in ANTINI, SOUINI.
        Moved nowhere.

 9721.  January 20, 1998          IMAGR                    Eric
        Fixed:
        QCLEAN    Added more digits to iteration number in some
                  formats.  Fix a bug: the code chose to ignore fields
                  with only one pixel loaded, but the test on number of
                  pixels loaded did not take this into account.  A
                  second test based on the field counts was added.
        Moved nowhere.

 9722.  January 20, 1998           PRTUV                  Eric
        Added the subarray number to CPARM(9) so that displays may be
        limited to a specified subarray.
        Moved nowhere.

 9723.  January 21, 1998           STARTPMON              Pat
        OSF/1 4.0 objects to the "c" option to the ps command so removed
        it and slightly altered the various grep commands to accomodate.
        Also changed so that it no longer dies if there are too many
        TPMON daemons found.
        Moved nowhere.

 9724.  January 21, 1998           PRTAB                   Eric
        Changed it to leave the status alone and not care if it is being
        read or written.  This task is used for debug and may need to
        run while FITLD (for example) is running.
        Moved nowhere.

 9725.  January 21, 1998           FITLD                   Eric
        The routine SO2SU that appends SO table entries to an SU table
        was doing exact compares of RA and Dec of epoch to see if things
        match rather than checking if they are close enough.  However,
        the routine MAPSRC was doing an exact compare of Ra/Dec of epoch
        in the SU table to Ra/Dec apparent in the SO table.  It should
        never find an agreement!  This should cause a significant
        renumbering of sources!  Fortunately, the VLBA correlator writes
        the J2000 coordinates in both APP and EPO coordinate locations
        making this error (now corrected) moot.  The correlator does
        write different CALCODEs for the otherwise identical source.
        Dropped testing on CALCODE to differentiate sources.  The 1st
        CALCODE found is used.  The rest of AIPS is not able to
        separate (or combine) the two nearly identical sources and real
        problems with calibration could occur.
        FITLD was calling STATCH with the current file status rather
        than CLWR or CLRD - a reasonable thing given the description
        that STATCH gave, but quite non functional.  So changed:
        STATCH   To make the first call argument be the status that
                 wants to be changed, not a clear command.  Also blocked
                 certain warning error codes from being returned.  If
                 the status to be cleared or to be set is not READ or
                 WRIT the clear and/or setting is not done.
        Changed PHSREF, IMREF1, OBREFM, and CLPLT for this change.
        Moved nowhere.

 9726.  January 21, 1998         All subarrays              Eric
        Changed:
        SN2CL    Added argument ALLSUB to specify that all input
                 subarrays are included as one and written as SUBA 0.
                 Changed subarray number as records read and cleaned up
                 tests on subarray number and freqid.
        BLAPP    Added ALLSUB (false) to call to SN2CL and discovered
                 that the ALLPAS argument had been omitted for a couple
                 of releases!  Added it too as false and notified Chris.
        CLCAL    Added parameter ALLSUB to specify that all input
                 subarrays are included as one and written as SUBA 0.
                 Changed subarray number as records read and cleaned up
                 tests on subarray number and freqid.  Added subroutine
                 to set ALLSUB is all antenna files are identical and
                 SUBARRAY=-32000 on input.
        CLCAL    Help file: cleaned up typing.  Added additional usage
                 on SUBARRAY adverb.
        Moved nowhere.

 9727.  January 22, 1998        TPMON and tapes                 Eric
        TPMON died when the computer writing to it died.  This is not
        desirable so changed:
        ZVTPRC   Improved error message to be diagnostic.
        ZVTPRX   Changed to try to recover from ZVTPX3 error 3 also.
                 In this case it will try to dismount the tape.
        TPMON    Rearranged logic a bit and comments.
        Testing got all hung up:  Fixed
        TAPIO    When the open failed, FDVEC(40) was left set and was
                 not tested properly later anyway.  Changed to set this
                 pointer to 0 on open failure and to test it on BAKF and
                 CLOS which got called by FITTP, IMLOD, MK3IN, GSCAT,
                 and M3TAR even on open failure!
        ZTPOPN   Was calling ZDACLS on error even for non-tape opens.
                 This closed stdin and caused file descriptor 0 to
                 become available.  The ZTT routines took this to be not
                 ok and got in a mexican standoff with the message
                 server.  Sigh...
        Moved nowhere.

 9728.  January 23, 1998       $APGOOP/COHER.FOR              Leonia
        The dimensions of some arrays have been not enough to work with
        expecting coherence time more than 10 min and preaveraging time
        less 1 sec. The dimensions are increased.
        Moved nowhere.

 9729.  January 23, 1998       $APLDEC/ZMOUN2                 Pat
        The mapping of Exabyte tape device names to functionality on the
        CV Alpha systems is not what I thought it was.  The combination
        of density and compression now maps as follows:
          /nrmt#l       low density 8200 mode (2.2 Gbytes/tape)
          /dev/nrmt#m   low density 8200 mode, compressed
          /dev/nrmt#h   high density 8500 mode (5 Gbytes/tape)
          /dev/nrmt#a   high density 8500 mode, compressed
        In addition, the method formerly used to detect a high density
        exabyte was failing, as the device status structure returned
        reflected the current writing density which was always the
        equivalent of 8200 mode.  Modified it to detect a subset of the
        string by which the device calls itself (specifically EXB-850
        which should cover both 8500 and 8505) and made the feedback of
        what density the user gets on mount more useful.  And of course,
        restricted density settings for exabytes to the low or high
        density [uncompressed] modes.  Latter can only be achieved by
        setting DENSITY to 22500; anything else gets the former.
        Moved to hominid today (i.e., rebuilt there prior to MNJ).

 9730.  January 24, 1998       $INSUNIX/INSTEP1               Jeff
        If using g77 under Linux don't do fixups while building PP.
        Moved nowhere.

 9731.  January 25, 1998       $SYSUNIX/LINK                  Jeff
        Folded some changes to argument-ordering that were done in
        $SYSLINUX/LINK back into this file so we can eliminate the
        $SYSLINUX-specific LINK script; there's been massive divergence
        between these due to $SYSUNIX's being constantly updated and
        $SYSLINUX's not, and no other $ARCH has its own LINK.
        Moved nowhere.

 9732.  January 24, 1998              FITLD                  Eric
        Changed IMREF1 - it did not test to see if the input IM table
        had more keywords than expected (which Penticton ones seem to
        have).  Fixed it to warn about unusual numbers of keywords and
        missing keywords and to set keyword values only if present.
        This caused FITLD to loose its cookies on HPs.  Fixed MSGSUP for
        TABCOP also.
        Moved from MPI this date.

 9733.  January 24, 1998          Misc                      Eric
        MSGSUP is used = 32000 to kill message level 6 and 7 and is used
        with TABCOP in the range 31990 through 31999 to kill the table
        copied message.  MSGKIL = 32000+n kills all messages <= n+1
        in level which is pretty Draconian but some routines are just
        too garulous for words and need to be suppressed.  MSGKIL 32000
        puts messages to the screen but not the MS file which is okay of
        one would never want to go back to check.
        BPINI    Used MSGKIL when should have used MSGSUP 32000 for
                 TABKEY.
        BPREFM   Used MSGKIL when MSGSUP 31999 better for TABCOP.
        BLREFM   Used MSGSUP wrongly for TABCOP; 31999 works.
        CLREFM   Used MSGSUP wrongly for TABCOP; 31999 works.
        FGREFM   Used MSGSUP wrongly for TABCOP; 31999 works.
        OBREFM   Used MSGSUP wrongly for TABCOP; 31999 works.
        SNREFM   Used MSGSUP wrongly for TABCOP; 31999 works.
        UPDAT    Used MSGKIL to keep messages from user 1 message file,
                 but this is unsafe.
        COOKNX   Used MSGKIL to keep messages from user 1 message file,
                 but this is unsafe and unimportant here.
        FITLD    Changed MSGKIL usage on CATKEY which was too severe to
                 MSGSUP 32000 and changed MSGSUP on TABCOP to work.
        FXPOL    Changed MSGKIL usage which was more or less ok to
                 MSGSUP correctly for TABCOP.
        SPCAL    Used MSGSUP wrongly for TABCOP; 31999 works.
        PCAL     Used MSGSUP wrongly for TABCOP; 31999 works.
        LPCAL    Used MSGSUP wrongly for TABCOP; 31999 works.
        TABHDR   Blocked a message when the unknown symbol was blank.
        Moved nowhere.

 9734.  January 25, 1998       $SYSLINUX/LINK                 Jeff
        Removed file.  Folded the few changes from this file that might
        still be useful back into $SYSUNIX/LINK.
        Moved nowhere (/dev/null).

 9735.  January 26, 1998       Parallel QPTDIV               Chris
        Replaced QPTDIV, which was written as a chained sequence of
        vector operations, with a version where the outer loop (over
        visibilities) will run in parallel on multiprocessor machines.
        The older version of QPTDIV was moved to QVEX as an exemplar
        of optimization for vector machines.  The new version generally
        performs better than the vector version on high-performance
        uniprocessor workstations (improvements range from a fractional
        improvement of only 10% on UltraSPARCs to a full factor of 2 on
        the MIPS R10k).
        The product of the number of visibilities, the number of
        components, and number of frequency channels being processed
        must be of the order of 50 million or more for parallel
        processing to be worth-while, making it most effective for
        model division in fringe-fitting tasks when there a large number
        of spectral channels present.
        There are several new versions differing only in the compiler
        pragmas used (note that the include-based process previously
        used for vectorization directives is not applicable to
        parallel execution directives which tend to be more complex).
        QPSAP:QPTDIV uses the proposed OpenMP directives.
        QSGI:QPTDIV uses the IRIX f77 directives (v7.0 and up).
        QSOL:QPTDIV uses the SPARCworks/iMPact directives (untested).
        Compiler directives will be treated as comments unless special
        compile-time options are used.
        Moved nowhere.

 9736.  January 26, 1998         CLCAL, TABINI             Eric
        Changed:
        TABINI   To accept NCOL and NKEY <= previous on write; before it
                 required NCOL correct or 0.
        SNAPP    Changed to call SNRESC to apply mean gain modulus if
                 not already = 1.0.  SNAPP is called by CLCAL for all
                 input SN tables (and by nobody else).
        SNRESC   New routine to rescale the SN table so that the header
                 mean gain modulus can be 1.0
        Moved nowhere.

 9737.  January 26, 1998        ABOUT, APROPOS             Eric
        Corrected AU1A to use longer names - 10 characters are allowed
        for help file names.
        Updated LSAPROPO.HLP.  The remove operation does not clear
        things from this file: GAPLT, VSCAL, GNPLT, VBPLT, PRTGA, ASCAL,
        GNMRG, HFPSV, ASCOR, and BROWZ were included in, and SLIME was
        omitted from, the old version.
        Updated the about files based on SHOPH's remarks:
        ZZADVERB.HLP    ZZANALYSIS.HLP  ZZAP.HLP       ZZCALIBRAT.HLP
        ZZCOORDINA.HLP  ZZGENERAL.HLP   ZZIMAGING.HLP  ZZMODELING.HLP
        ZZOOP.HLP       ZZOPTICAL.HLP   ZZPLOT.HLP     ZZPOLARIZA.HLP
        ZZPROCEDUR.HLP  ZZSINGLEDI.HLP  ZZTASK.HLP     ZZTV.HLP
        ZZUV.HLP        ZZVERB.HLP      ZZVLBI.HLP
        Also updated the Gnu readline file HLPIT.LIS which was badly out
        of date.
        Moved nowhere.

 9738.  January 26-27, 1998             UVFLG                   Eric
        Added DOHIST to UVFLG and fixed it to make history entries even
        when writing an FG table.  January 27 added reason to history
        and added code to avoid repeating things in the HI file.
        Moved nowhere.

 9739.  January 27, 1998             UVMLN                     Eric
        It was walking on itself some when applying flags on inpput and
        writing an output, whether that output was a new or old file.
        Fixed the walking upon.   Changed FLAGVER meaning st 0 or > max
        means make a new one, apply none on input.  FLAGVER < 0 means
        apply abs(FLAGVER) on input, write a new one.  FLAGVER > 0 means
        apply FLAGVER on input and add to FLAGVER.
        Moved nowhere.

 9740.  January 27, 1998      UVAVG.FOR                     Leonia
        Recentely a new random parameter Corr-ID has been added to
        the VLBA correlator output. So the maximum possible number
        of the random parameters became equal 11 instead of 10.
        But the size of the array RPARM and OPARM in UVAVG has not
        been changed. As a result UVAVG has not worked with VLBA data
        last time. I fixed it increasing the files dimensions since
        10 to 11.
        Moved nowhere.

 9741.  January 27, 1998      $APLUNIX/ZTTOP2.C             Jeff
        Trivial change: removed declaration of now-unused variable
        "mybuf".
        This file and ZTKOP2.C, as released with 15OCT97 (but since
        changed/fixed for 15APR98 by Eric), have a show-stopper SEGV bug
        in them that has finally been turned up by a Linux (Red Hat 5.0,
        glibc) system at Princeton.  Fixed versions for 15OCT97 should
        be released as patches (ZTTOP2 being called by virtually all
        tasks).
        Moved nowhere.

 9742.  January 28, 1998      $SYSUNIX/FDEFAULT.SH          Jeff
        Added g77 capability for LINUX.
        Moved nowhere.

 9743.  January 28, 1998      MP support for IRIX          Chris
        Added support for multiprocessing on SGIs in SYSSGI:LDOPTS.SH
        and SYSUNIX:FDEFAULT.SH.  Anyone compiling AIPS on SGI systems
        should check the settings of the flags in these files to make
        sure that they are suitable for their systems.  In particular,
        they should check the values of LINK in LDOPTS.SH and OPT4 and
        OPT5 in FDEFAULT.SH.
        On an MP machine level 4 optimization will enable directives
        and level 5 will turn on automatic parallelization.  All of
        the Q-routines will now be compiled at level 4 on SGI machines.
        Level 5 is useful as a diagnostic tool but is unlikely to be
        useful for most AIPS code.
        Some Q-routines in QSGI will use routines from the SGI
        COMPLIB, a library of optimized, numerical routines that is
        available on higher-end SGI systems.  Single processor
        machines should still benefit by modifying LDOPTS.SH to
        use the single-processor version of this routine.  If your
        machine does not have this library then remove all references
        to it from LDOPTS.SH and run $SYSSGI/DECOMPLIB.SH before
        issuing any COMRPL commands: DECOMPLIB.SH renames all of the
        Q-routines that use COMPLIB routines so that COMRPL will
        default to using the generic equivalents from QPSAP.
        Moved nowhere.

 9744.  January 28, 1998         QSEARC in QSGI            Chris
        Added an SGI-specific, parallelizable version of QSEARC.
        This gives a significant multi-processor speedup for
        FRING on moderate to large problems.  The speedup is
        approximately 1.5 for 2 processors and a little less
        than 2 for 3 processors with only a small incremental
        gain for 4 processors.
        The parallelization strategy relies on the use of MP-safe
        FFTs from COMPLIB and this version of QSEARC should be
        renamed (eg. by using SYSSGI:DECOMPLIB.SH) on systems
        that do not have COMPLIB to make it invisible to COMRPL.
        Single processor machines with COMPLIB will see a factor
        of 2 speed-up in FRING relative to versions linked with
        the generic version of QSEARC.
        Moved nowhere.

 9745.  January 28, 1998        $SYSUNIX/FDEFAULT.SH       Jeff
        Added more aggressive optimizations for g77 under Linux.  (These
        extra optimizations improved the AIPSMark another 20+% over the
        previous best Linux/g77 mark.)
        Moved nowhere.

 9746.  January 28, 1998     $APGOOP/COHER.FOR,  COHER.HLP   Leonia
        COHER could not average frequency channels using FFT with
        following least square if signal to noise ratio is too small.
        By other words COHER could not find solution for the delay
        in the case of poor signal as well as FRING can not do it.
        But if apriori delay is known close to zero, averaging of
        the frequency channels can be done by simple vector averaging.
        For such a case a new parameter APARM(6) has been added.
        This parameter allows to switch between two option:
        search for delay in the averaging frequencies or use simple
        vector averaging. Help file has been updated.
        Moved nowhere.

 9747.  January 28, 1998            SAD, *MFIT                 Eric
        All three had a zero divide built in when the solution routines
        returned major axis = minor axis when deciding the uncertainty
        for the PA.
        SADDAT's search for maxima stpped at the first 4 found even if
        much stronger ones occurred.  This was really bad with strong
        sources.  Changed it to find up to 500 maxima in an island and
        then take the 4 largest.  Bill Cotton actually found this and
        fixed it in the nvss version.
        Moved nowhere.

 9748.  January 28, 1998            FITLD                     Eric
        Had NKEY and NCOL set by chance in call to TABINI to write an
        pre-existing table.  They were too large and caused it to quit.
        Added ugly remarks about DOCONCAT to the help file - it must be
        true for most VLBA usage.  Otherwise files cannot be
        contanenated and, if OUTSEQ is specified, FITLD dies.
        Moved nowhere.

 9749.  January 29, 1998      QSEARC in QSGI               Chris
        Corrected a flip between FFT and inverse FFT introduced
        in parallelization and fixed address calculation errors
        in retrieving the second halves of the FFTs from the
        work array. Also increased the scratch space to allow 8192
        point FFTs.
        Moved nowhere.

 9750.  January 29, 1998      ZLOCK.C                      Jeff
        Found an if() statement that inadvertently assigned ENOENT to
        errno when attempting to check it after an open() failure.  Odds
        are this shouldn't happen very often--and if it does then the
        bug will only result in the wrong reason for the open() failure
        being reported.  Bug found in all three ZLOCK.C files: $APLUNIX,
        $APLBERK, $APLCRI.  Running an INSTEP4 to link the fixed version
        into all tasks.
        Moved nowhere.

 9751.  January 29, 1998     IMFIT, JMFIT, SAD              Eric/Leonia
        When calculating phase error the division by IMAJ**2 - IMIN**2
        occurs. The denominator equals zero for circle gaussian.
        To escape such a case (which happened with Frazer data) the
        minimum of the denominator was fixed as 1.0E-6.
        SAD as well as earlier version of JMFIT has not moved from
        initial guess sometimes for a poor signal. The both task use the
        same algorithm controled by parameter EPS. This parameter was
        decreased from 1.0E-10 to 1.0E-15 as it was done early for
        JMFIT.
        Moved nowhere.

 9752.  January 30, 1998           XAS.SHR                      Pat
        Updated the Linux library directive to use the more modern
        /usr/X11R6/lib area; the old default of /usr/X386/lib has not
        really been used for years.  Also removed spurious space between
        the -R qualifier for SOL/SUL and the library area.
        Moved nowhere.

 9753.  January 30, 1998 $SYSLINUX/CCOPTS.SH, $SYSUNIX/FDEFAULT.SH Jeff
        More tweaks to g77 optimizations in FDEFAULT.SH, updated
        optimizations listed in CCOPTS.SH a bit.
        Moved nowhere.

 9754.  February 1, 1998          JMFIT                      Eric
        Changed JMFIT.  It appears that it is sensitive to the fact that
        we are often solving for fluxes like 0.001 but widths and
        coordinate shifts like 1-5 (pixels).  Changed it to scale the
        image data to a peak of 5 internally for fitting.  Fixed all
        displays and output to be in normal units.
        Moved nowhere.

 9755.  February 2, 1998          UVCOP                      Eric
        Created TYSEL and GCSEL to select IFs in copying GC and TY
        tables.  Added calls to these in UVCOP.  Also changed SNSEL,
        CQSEL, CLSEL, and BPFSEL to handle subarrays etc.
        Changed logic in FGSEL; it did not handle IF and channel flags
        like 3-0 properly.  Changed PCSEL, IMSEL, and others to allow
        source number 0 to mean all sources.
        Several of the *SEL routines had call sequence changes but they
        are used only in UVCOP apparently.  Fixed up all the call
        sequences in UVCOP.
        Moved nowhere.

 9756.  February 2, 1998          FITLD                      Eric
        In help file, changed DOCONCAT description to make it clear that
        it needs to be true most of the time.
        In Fortran, changed error handling for bad source numbers and
        the like to try to save the output file rather than deleting
        it.
        Moved nowhere.

 9757.  February 2, 1998            PRTAB                   Eric
        Changed help and code so that any column beginning with TIME in
        the header and having units of DAYS can be displayed with DOHMS
        formats.
        Moved nowhere.

 9758.  February 2, 1998           TABHDR in APLNOT         Chris
        Modified TABHDR to recognize both PHASE-CAL and PHASE_CAL table
        types.  The former is the table name given in the VLBA FITS
        document and written by the VLBA while the latter is what was
        clearly intended and is written elsewhere.
        Moved nowhere.

 9759.  February 2, 1998         Apropo                  Eric
        Fixed HLPA.FOR and AU1A.FOR to support help file names up to 10
        characters in length.  Rebuilt LSAPROPOS.HLP.  Changed
        TEKSRV.HLP and TEKSERVER.HLP since they referred to the message
        server.
        Moved nowhere.

 9760.  February 3, 1998           IMLOD                    Pat
        The use of the GNU g77 compiler causes a conflict between the
        RENAME intrinsic (a f90 or later feature) and the subroutine of
        the same name in this program.  Renamed the subroutine to RNAM.
        Moved nowhere.

 9761.  February 3, 1998           TAPQL                    Pat
        Minor correction; g77 does not like a plain unadorned "I"
        without field width in a FORMAT statement.  It is not a legal
        FORTRAN statement and it is unclear what other compilers did
        with it.
        Moved nowhere.

 9762.  February 3, 1998            AIPSCC                  Pat
        This routine was (ab)using the environment variable CCOPTS,
        which is reserved on HP-UX for passing options to the C
        compiler.  This generated confusion and unwanted results in some
        installations on HP systems.  Renamed CCOPTS to AIPSCCOPTS.
        Moved nowhere.

 9763.  February 3, 1998        Name conflicts etc         Eric
        G77 compiler found a variety of things:
        1. Subroutine QINT conflicts with intrinsic so renamed QINT to
           QINTG in $QPSAP, $Q3090, $QALN, $QVEX, $QFPS16 and changed
           $QPSAP and $Q3090 versions of QUVIN to call it.
        2. Dropped declaration of MIN as INTEGER in ISCALE (it has to be
           float some of the time in this routine!)
        3. Dropped declarations of SIN and COS as REAL in QCLEAN, they
           are DOUBLEs here some of the time.
        3. Changed TRIM to CHTRIM, recoding to avoid a scratch string.
           Changed call to TRIM in:
           TPMON    AUC      KWICK    ZDCHIN   FITTP    FITLD    TBIN
           TBOUT    UVFLG    TAFLG    SDTCRD   AXSTRN   CHNTIC   GTWCRD
           IDWCRD   NAMEST   SELSTR   SKYFRM   TKLAB    TKTICS   SCMAP
           QEDIUTIL POSSM    DFTPL    IBLED    VPLOT    PFPL1    PFPL2
           PFPL3    PLCUB    PLROW    FRPLT    SNPLT    UVPLT    KNTR
           FRMAP    ELINT    BPLOT    CLPLT    IMRMS    GREYS    IMEAN
           ISPEC    PROFL    SL2PL    UVHGM    CCNTR    BSTST    BPERR
           SERCH    PLAXES   CLAB1    CLAB2    COMLAB   CTICS    IAXIS1
           ITICS    LABNO
           Changed internal TRIM to ITRIM in MRTAPE
           Dropped internal ITRIM from SHOPH, SHOPA, SHOPB
        4. Changed MERGE to AMERGE.  Changed calls/comments in
           UVSRT    ITBSRT   TABSRT   SDIMG    UVSORT
           In IMERG, MERGE became VMERGE, an internal routine.
        Moved nowhere.

 9764.  February 3, 1998           SNPLT                       Eric
        Changed CUTOFF so that it cuts off weights <= cutoff and made 0
        a meaningful value.  Changed help to match
        Moved nowhere.

 9765.  February 4, 1998            UPDREMOVE               Pat
        The mechanism used to search for an object module in a library
        was flawed; it did not anchor on the beginning of the name, so
        when a REMOVE for MERGE.o came through, the fact that there was
        an IMERGE.o in the same library triggered the logic.  Fixed so
        that this won't happen again.
        Moved nowhere.

 9766.  February 4, 1998         More g77                 Eric
        Changed:
        BDEPO     Used "\" as the start of a comment in an HI record.
                  This is a Unix escape character; the correct HI/FITS
                  character is "/".
        MX        Declared SIN and COS as REAL in MXGAUS.  These are
                  intrinsics whose type changes depending on the
                  argument and must NOT be dclared.
        FRMAP     Used RANGE, an F90 intrinsic as a local subroutine
                  name.  Changed to FRANGE.
        KNTR      Used SCAN, an F90 intrinsic as a local subroutine
                  name.  Changed to KNSCAN.
        Moved nowhere.

 9767.  February 5, 1998            GAL                   Eric
        Changed note in GAL.HLP to make it clear that the residual is
        observed minus model; the grammar of the help implied the other
        if it said at all.
        Moved nowhere.

 9768.  February 6, 1998            TAFLG                 Eric
        Corrected bad call seq to GETCOL.  I had set it up for the right
        things and failed to add the new argument.  Added info
        messages.
        oved nowhere.

 9769.  February 6, 1998          SAD, JMFIT                 Eric
        Changed SAD:
        1. To scale each fitting area to a peak of 5 as for JMFIT.
        2. To check for and avoid 0 divides in DVDMIN and FXDVD.
        3. To take the initial guess widths to be Clean beams unless the
           user insists (via DOWIDTH(1) > 1) and made it fussier about
           being willing even then.  It was making bad guesses which
           converged insanely with the new flux scale.
        4. To retry multiple-Gaussian fits with fewer Gaussians if 1 or
           more (but not all) are rejected.
        5. To retry even multiple Gaussians with N+1 Gaussians if the
           residuals are too large.
        6. To reject all components in a multi-component island if any
           are rejected and the retries don't bail us out.
        7. To reject components based on the total flux found in the
           residual image in the island using DPARM(6).
        Changed help as well for #7.
        Changed JMFIT to avoid the zero divides.
        Moved nowhere.

 9770.  February 8, 1998       SAD, JMFIT, IMFIT                 Eric
        Changed for MF files::
        1. The number of allowed sources is 4000 in SAD.  Fixed comments
           in the help file about this.
        2. Pulled PMFC.INC amd MFINI.FOR from SAD and put them back as
           separate files in $INC and $APLSUB, resp.
        3. Changed position errors in SAD - the position angle in SAD is
           from X (until it is displayed) while in JMFIT it is from Y
           even internally, causing the 2 to be different.  Also changed
           recording (and re-use) of pixel-position angle by 90.
        4. Added OUTVER to JMFIT and IMFIT help file.
        5. Changed JMFIT amd IMFIT to write an MF table (new or append
           to pre-existing) unless OUTVER = -1.
        Moved nowhere.

 9771.  February 10, 1998        INSTEP1                         Pat
        Corrected a bad regular expression in the editing of ZLPCL2 when
        the user selects A4 size paper instead of US "A" size.  Thanks
        to Vladimir Shoutenkov for pointing this out to me.
        Moved nowhere.

 9772.  February 10, 1998          BS imaging                   Eric
        Changed IMAGE.FOR to (a) compute the convolving function for BS
        gridding over a largish array and (b) to correct an error in the
        call to the array subtraction function when there were no
        blanked pixels.  Changed VECTOR.FOR to do the convolutions a bit
        faster in the blanked case and to use the right loop limits
        (which should have ignored IC, assuming that IC was large
        enough to avoid error).
        Moved nowhere.

 9773.  February 11, 1998            BSGRD                      Eric
        Changed BSGRD:
        (1) To use OUTSEQ for all images made by the program (user
            beware).
        (2) To use a weight cutoff of 0.05 for the re-grid to Ra-Dec no
            matter what the weight cutoff is for the principal
            gridding.
        (3) To add DPARM to the output HI file.
        Moved nowhere.

 9774.  February 11, 1998           STATCH                       Eric
        Forgot to rename call arg when I changed routine!!!
        Moved nowhere.

 9775.  February 12, 1998         CLPLT.HLP                     Eric
        Clarified remarks on NMAP, INNAME, INCLASS since all must be set
        to have a model plotted.
        Moved nowhere.

 9776.  February 12, 1998            LISTR                   Eric/Pat
        The flagging code was assuming ALL the columns were complex no
        matter what DPARM you set, and so it was checking nonexistent
        columns when listing, e.g. the signal/noise ratio.  Fixed
        to only refer to the second column when appropriate.  This
        program could use a more extensive cleanup...
        Moved nowhere, relinked on CV Alpha systems this date.

 9777.  February 12, 1998            DADEVS.SH,.PL           Pat/Eric
        Modified these to accumulate the information from the list file
        (DADEVS.LIST* or .dadevs*) in three categories: those matching
        the local host, those indicated as required in the list file,
        and those selected via DA= on the aips startup command line.
        Host-specific data areas are now included first, required areas
        second and optional user-requested areas last.  Also put in the
        convention that the match on hostname or DA= argument is bounded
        on the RHS by either an underscore or end of word.  This
        prevents, e.g. host HP17 from always selecting /DATA/HP177_1
        which is on host HP177.
        Moved nowhere.

 9778.  February 13, 1998         $QPGNOT/KRING.FOR          Ketan
        KRING is a rewrite of FRING.  The underlying structure of KRING
        is similar to FRING.  KRING uses less memory than FRING to
        solve identically sized problems, requires smaller scratch
        files if the data set is partitioned into scans, uses a
        different method to calculate SNR and uses a different scan
        breaking algorithm to determine solution intervals.  The SNR
        cutoffs in particular should be carefully chosen as their
        meaning differs from that in FRING.  There are other changes,
        too numerous to be mentioned in detail here.  The key point is
        that KRING cleans up much of the calculations in FRING.  This
        should ease the maintenance burden.  There are at least three
        negative aspects to KRING.  1) For some as yet unknown reason,
        the FFTs in KRING run slower than they should - this is most
        likely due to some stupid mistake I have made in the FFT search
        code. 2) I do not use the QSEARC routine so that KRING does not
        benefit from recent improvements to the QSEARC code.  3) I have
        very likely introduced errors in this rewrite.  KRING should be
        treated as experimental code for now - check your results
        carefully!!!!
        Moved nowhere.

 9779.  February 13, 1998           COOKNX                      Eric
        The output string was a reasonable length, which was much too
        short for the VLB chapter's messed up references.  Made it real
        big so as to survive such things.
        Moved nowhere.

 9780.  February 16, 1998             XAS                       Eric
        Added call to shutdown the lock on XAS shutdown.  It can't hurt
        and should cover up for tasks that don't call TVCLOS when the TV
        dies under them.
        Moved nowhere.

 9781.  February 17, 1998       UVLOD, FITLD                   Eric
        UVLOD (and its copy in FITLD) attempts to rearrange the incoming
        Stokes to match normal AIPS things.  It branched to an error
        message without resetting the pointers to simple no-ops when it
        could not rearrange XX,YY polarizations.  Fixed it to do local
        pointers and copy them to COMMON only if all are okay.
        Moved nowhere.

 9782.  February 17, 1998          VLB problems                 Eric
        Changed:
        ANSAME   New separated version of the routine to check whether
                 all antenna files are the same
        CLCAL    Remove the above (and rename), change call sequence.
        UVCOP    Add call to MCSEL.
        MCSEL    New - apply time range, antenna, source, IF selection.
        MCTAB    New - read/write an MC table
        MCINI    Change the dimension of the DISP and DDISP columns -
                 they seem to be 1/pol but not also per IF.
        Moved nowhere.

 9783.  February 19, 1998       VLB problems continued        Eric
        Changed
        INDXR    Overhaul typing, add call to ANSAME to set up a VLB
                 mode.  Change how and when CL entries are written when
                 the VLB mode is present.
        It turned out that the new and old INDXR failed to get values
        from the IM and MC tables a lot (and differently).  The
        following requred the calls to be in strict time order which is
        not generally possible.  Therefore
        GETDEL   Changed to use a hash table of times/record numbers
                 into the IM table.  It takes the closest real value but
                 is willing to go a ways away to find one.  Changed call
                 sequence to return DISP, DDISP.
        GETMC    Also changed to use hash table.
        TABLEUTIL   Changed call sequence to OGTDEL, GETDEL and made to
                 accept IRET = -1 as no value found.
        FITLD    Changed call sequence to GETDEL and changed logic to
                 avoid some work reading/writing CL tables that are
                 about to be destroyed.
        Moved nowhere.

 9784.  February 19, 1998          IMTXT, FETCH         Pat/Robert Laing
        The code that set the reference pixel in FETCH was buggy; it set
        it to the same value for all axes.  Fixed.  Also, increased
        buffer sizes for the output line in IMTXT to allow for huge
        images (8192 elements, 32k characters).
        Moved nowhere.

 9785.  February 20, 1998         $APGNOT/VLOG          Ketan
        VLOG did not properly parse gain information from the file
        vlba_gains.key.  Fixed VLOG to do a better job of passing gain
        information.  For many cases, it will now suffice to simply prepend
        the vlba_gains.key file to the cal.vlba file for a VLBA experiment
        before running VLOG.  Because the band designations in the gains
        file do not any longer agree [at L-band] with those produced by
        TSM [in the cal file], the .TSYS file produced by VLOG will contain
        a superset of gain curves for experiments with L-band data.  As
        before, experiments using non-VLBA stations still require hacking
        of the .TSYS file before running ANTAB.  In any event, the .TSYS
        file should be carefully examined and should not be applied blindly!
        Also, the print levels have been bumped up, PRTLEV=2 now echoes the
        cal file while PRTLEV=1 now informs the user of which gain curves
        are being passed to the .TSYS file.  HELP file updated as well.
        Moved nowhere.

 9786.  February 20, 1998         $QPGNOT/KRING          Ketan
        KRING used a weird system to determine the default SNR cutoffs
        for the LS and FFT stages.  Now, to select the default cutoffs
        just leave CPARM(6,7)=0. If you want to pass all solutions, set
        one or both of CPARM(6,7) <0 .  HELP file updated as well.  As
        expected, The new SNR calculation for the FFT stage has provoked
        criticism - this calculation may undergo some alterations in the
        near future...
        Moved nowhere.

 9787.  February 20, 1998         $QPGOOP/OMFIT          Ketan
        For once, only minor changes.  Improved convergence criteria,
        cleaned up the OUTFILE format, switched from various arcane
        options to a single format for all elliptical symmetry models
        of a major axis, an axial ratio, and a position angle, some
        consolidation of model-types, and removal of some cumbersome
        input adverbs.  OMFIT is becoming easier to use...As usual,
        note that this is still DEVELOPMENT code.
        Moved nowhere.

 9788.  February 22, 1998         TK catalog etc                Eric
        Changed:
        DTKS.INC   Made TKSIZE be a parameter so it does not need to be
                   set by everybody.  Added TKTYPE integer, plus TKLUN
                   and TKFIND and raised the buffer size.
        AU9A       Rearranged to open TK before TKCATL and to close it
                   at end.  Dropped TKSIZE, TKPOS, TKLUN setting;
                   changed call seq to ZTKOPN, ZTKCLS.
        AU9B       Dropped TKSIZE, TKPOS, TKLUN setting; changed call
                   seq to ZTKOPN, ZTKCLS, and others; changed to Common
                   name for TKLUN and TKFIND.
        AU9C       Add TK open and close calls surrounding SET1DG.
        TKSLAC     Dropped open and close calls, changed call to TKCURS.
        TKSLPL     Changed its call seq and calls to others.
        TKGGPL     Changed its call seq and calls to others.
        TKGMPL     Changed its call seq and calls to others.
        TKRSPL     Changed its call seq and calls to others.
        TEKFLS     Change call seq, use Common TKLUN, TKFIND.
        TKCURS     Changed call seq, use Common TKLUN, TKFIND
        TEKVEC     Changed TEKVEC and TKDVEC call sequence.
        TKCHAR     Changed call seq to TKCHAR, TEKVEC, ZTKBUF.
        TKCLR      Changed its call seq and calls to ZTKBUF, TEKFLS
        TKLAB      Changed its call seq plus calls to ZTKBUF, TEKFLS,
                   TEKVEC, TKCHAR, TKTICS.
        TKDVEC     Changed its call seq plus calls to ZTKBUF.
        TKTICS     Changed its call seq plus calls to TEKVEC, TKCHAR.
        TKSLIN     Changed comments a little.
        ZTKBUF     Changed its call seq and call to TEKFLS
        ZTKOPN     Changed its call seq and call to ZTKOP2
        ZTKOP2     Changed its call seq to return 0 TYPE for hardware, 1
                   for TEKSRV - GENERIC, UNIX, HP, VMS
        ZTKCLS     Changed its call, to get parms from common.
        IMLIN      Removed unused reference to DTKS.INC
        TXPL       Dropped TKSIZE = statement.
        TKPL       Changed all sorts of calls - the TKFIND is now
                   invisible.  Moved TK open and close into MAIN around
                   the TKCATL calls as well as the TEKDRW
        XGAUS      Remove all TKLUN, TKIND, TKPOS, etc
        XBASL      Remove all TKLUN, TKIND, TKPOS, etc
        XPLOT      Remove all TKLUN, TKIND, TKPOS, etc
        Moved nowhere.

 9789.  February 22, 1998           GETDEL                     Eric
        The valid time range for an IM record is T to T+DT.  The record
        previous can be used if needed, but not the following one.
        Changed logic which allowed for centered times plus previous and
        following.
        Moved nowhere.

 9790.  February 23, 1998         ZTKOP2                       Eric
        Fixed APLUNIX and APLHP versions to survive TVDEV not being
        defined which is the case for "REMOTE" TK use (i.e. from a TK
        emulator or device).  Also fixed some error messages and to keep
        it from aborting if TVDEV or TKDEV are simply not defined.  A
        double getenv(getenv("xxx")) will abort if xxx is undefined.
        Moved nowhere.

 9791.  February 23, 1998          CookBook                     Eric
        Fixing things up:
        Chapter 10 - a typo was repaired to keep an index entry
                     invisible.
        Chapter 4  - the position angle for 3C48 polarization phase
                     difference was rather wrong (-290 should be -140).
                     The comments about OUTNAME were wrong for IMAGR and
                     the comments for NPOINTS were too.
        Moved to ftp area, cook.html comments.

 9792.  February 24, 1998          $QPGNOT/KRING               Ketan
        I had made the mistake of trying to keep the NX table open while
        working with scratch files, KRING would sometimes get confused
        about whether or not the NX table was open.  Also improved the
        timestamp bookkeeping needed to accomodate multiple-integration
        time data so that it didnt interfere with single-integration time
        data.
        Moved nowhere.

 9793.  February 24, 1998              FITLD                    Eric
        Changed the NCOUNT default from 1 to 1000 for VLBA files in the
        help and Fortran; it stays 1 for other types  Rearranged some
        messages and EOI handling to get some messages out when the EOI
        is hit in the default case.  Added a message when multiple
        integration times force the sort order to '**'
        Moved nowhere.

 9794.  February 26, 1998           IMAGR et al                Eric
        The December 23 change to support CHANNEL had odd effects.  It
        made way too large a work file which for some reason caused
        it to take a long time between channels.  I noticed while
        testing that it spends a very long time checking the max/min.
        Changed:
        IMAGR     To make the right size work file and to ask CLUNUV for
                  the max min only on the last time through the loop.
        SCMAP     Changed call seq to CLNUV, always setting max/min.
        WFCLN     Corrected local channel number for CHANNEL adverb,
                  changed call to CLNUV for max/min only on last loop.
        QCLEAN    Added DOMAX to CLNUV call seq to choose whether to
                  call CLMXMN.
        Moved nowhere.

 9795.  February 27, 1998         SPY/ZTQSP2                   Pat
        Overhauled the mess of instances of ZTQSP2; deleted all but the
        Bell and Berkeley versions, made an EXACT copy of the Berk
        version for Linux, and left the cray version.  Deleted all
        others (DEC, IBM, 3090).  The new routines are called by ZTQSPY
        with one extra parameter: the largest possible POPS number based
        on the # of interactive AIPS and batch processes from the device
        characteristics common.  Removed spurious "-" from the ps
        command on the Berkeley side, and added logic that alters the
        regular expression for the 'grep' command so that it only
        includes tasks that end with valid POPS (ehex) numbers.
        There was a call to "uptime" in the IBM versions for unknown
        reasons; it's now toast.
        Moved nowhere.

 9796.  March 2, 1998                  COMB                       Eric
        It would appear that memory is not initialized to 0 or that
        ARRAY (0, 2) is illegal.  A variable not used for its intended
        purpose was nonetheless used and when ARRAY (uninit, 2) was
        referenced it blew up under Linux.
        Moved nowhere.

 9797.  March 6, 1998           $YPGNOT/SNPLT.FOR            Leonia
        SNPLT, supposed to plot SN, CL, TY, and PC table, failued
        to plot TY and probably PC table ocasionally, indicating:
        "NO DATA SELECTED'. Among other criteria, SNPLT compares
        weight of the line with CUTOFF. But TY and PC table do not
        have a weight collumn at all. That is why the value of the
        read weight is equal zero, and those lines compared with
        nonnegaive CUTOOF are rejected. I modified SNPLT to circumwent
        the weight comparison for TY and PC table.
        Moved nowhere.

 9798.  March 6, 1998         Assertion checking             Chris
        Added a subroutine CHECK to APLNOT to facilitate assertion
        checking.
        Moved nowhere.

 9799.  March 6, 1998         New orbit utilities            Chris
        Added new routines for dealing with Earth orbits to APLNOT.
        SLVKEP solves Kepler's equation for the eccentric anomaly.
        VEC2OE calculates a set of orbital elements from a radius
        vector and a velocity vector.
        OE2VEC performs the inverse operation, calculating the
        radius and velocity vector from the orbital elements.
        PROPOE propagates the orbital elements through time taking
        account of precessio due to the oblateness of the Earth.
        Note the PROPOE and OE2VEC together are equivalent to
        ORBIT.
        Moved nowhere.

 9800.  March 6, 1998            TABLEUTIL                 Chris
        Added object wrappers for OB table access.
        Moved nowhere.

 9801.  March 6, 1998              OBTAB                   Chris
        Rewrote OBTAB.  The main features of the new version are
        - simplified inputs;
        - does not require the user to delete and copy antenna tables;
        - handles multiple antenna numbers in one run (assuming that
          they all refer to the same satellite);
        - works with both multi-source and single-source files;
        - calculates orbital elements more reliably; and
        - calculates any eclipse by the Earth up to one orbit before
          the beginning of the OB table.
        Moved nowhere.

 9802.  March 8, 1998          CookBook                          Eric
        Changed chapters:
        0    Table of contents for Chapter 9 mostly, plus release dates
             of 6, 7, 8, updated 13.
        6    Add COSTAR, EDITR, EDITA
        7    Change COMB information
        8    Change IMEAN info, add SERCH
        9    Fix it up with proper index entries, correct errors
             (e.g. PUTHEAD as a task), get correct figures, ...
        13   Make current
        I    Make current
        Also NDX files for 0, 6, 8, 9, 13; two figures in $AIPSFIG for
        chapter 9.  Upgraded the html file to match.  Updated
        RECIPE.TEX and .PS.
        Updated ABOUT files for
        AP   CALIBRAT   COORDINA   INFORMAT   PLOT   TABLE   TASK
        VLBI
        Moved nowhere.

 9803.  March 9, 1998              DBCON                  Chris
	Fixed the index calculation used to locate the source random
        parameter in the second data set.  The index had been offset
        by INDX instead of 1, leading to faulty source assignments
        in the output file and a deluge of warning messages (how
        come nobody complained about this before Friday?).
        Moved nowhere.

 9804.  March 11, 1998              INDXR                  Eric
        Adjusted the time range of writing CL entries inward by 1
        millisecond to avoid curious time ordering.
        Moved nowhere.

 9805.  March 11, 1998            EDITR, EDITA             Eric
        Changed QEDIUTIL to rearrange the "other antennas" list when a
        new primary antenna is chosen.  It attempts to do a reasonable
        thing so that you do not have to re-enter a new other antennas
        list.
        Moved nowhere.

 9806.  March 11, 1998            UVFLG                    Eric
        Changed the limit on flags from 3000 to 10000.  Fixed a bad
        format.  Fixed the test on the limit by moving it to where the
        counter actually gets incremented.  Fixed overflow handling by
        allowing it to proceed with IRET=-1 as a clue to its problems.
        Moved nowhere.

 9807.  March 12, 1998            $YPGNOT/SNPLT            Leonia
        SNPLT has not worked in some cases if CUTOFF = 0 and weights
        at the tables are zero also. I changed CUTOFF.GE.0.0 to
        CUTOFF.GT.0.0 in several subroutines to get around the weight
        comparison, if CUTOFF=0. The TY and PC tables do not have
        weights at all. For these tables I force CUTOFF = 0.
        Moved nowhere.

 9808.  March 15, 1998              INDXR                  Chris
        Fixed erroneous assignment of BTIME(SUBARR) to TE in DUMPCL which
        caused no records to be written to the CL table when VLBMOD was
        false.
        Moved nowhere.

 9809.  March 17, 1998             INDXR                  Craig/Eric
        Corrected more errors:
        1. Reversed the sign of the 1 millisec correction.  Single time
           entries in the CL are normal enough.
        2. Moved the setting of the end time for VLBMODe to after the
           scan-end dump section.  Where it was worked fine for the
           tricky one antenna at a time dumping but not for the normal
           scan end dumping of CL entries.
        3. Added code to pick up the start times for VLBMODe on the scan
           dump.
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 15APR98 is called NEW

***********************************************************************
***********************************************************************

 9810.  March 19, 1998          24-bit TV                  Eric
        To avoid conflicts between NEW and TST, added code to XAS to
        accept the new YSPLIT opcode and do the old thing with it.
        Other changes:
        TVMOVI     Added frame rate testing if POPS debug is on.
        ZSSSO2.C   Added SPLOT opcode 46, SPLIT -> 47.
        To use YHOLD a good bit more to avoid excess blits in this mode
        (n.b. a screen re-write is needed whenever channel or graphics
        selection changes, whenever LUT of OFM changes, zoom changes,
        etc.)  If several of these are to be done, issue a YHOLD onnn
        before them and a YHOLD offf after them.
        $AIPSUB/AU5, AU5A, AU5B, AU5D, AU5E, AU6, AU6A, GRPOLY, GRLUTS,
                HILUT, TVMOVI, TVROAM
        $YSS/YLUT
        $YSUB/COLORC, OFMIO, COLORL, COLORF, GRBOXS, IENHNS, TVBLNK
        Moved these from 15OCT98 this date.

 9811.  March 19, 1998       INDXR, CLCAL                 Eric
        Blocked the VLB mode in INDXR and dropped the subarray 0 output
        option in SN2CL and CLCAL.  They cannot work as intended given
        the rest of the cal computation and application code.  A special
        task to make a regularly gridded (properly chosen) version of
        the multiple subarray CL table will need to be written to
        achieve the desired results.
        Moved from 15OCT98 this date.

 9812.  March 19, 1998       $APLNOT/MCTAB                Ketan
        Simple typos caused UVCOP to crash, two references to RECR
        should obviously have been to RECD.  Recompiled UVCOP,
        anything else?
        Moved from 15OCT98 this date.

 9813.  March 19, 1998   $QPGNOT/KRING                     Ketan
        Simple typo resulted in multi-band delays being 10^9 too large.
        Moved from 15OCT98 this date.

 9814.  March 20, 1998        $SYSUNIX/FDEFAULT.SH         Pat
        Set PURGE to TRUE, remove old IBM3090 section.
        Latter moved to 15OCT98 this date.

 9815.  March 23, 1998   $APLNOT/INDXIN                    Ketan
        INDXIN did not properly check the FREQID and NXSUBA values
        coming from the NX table or the SUBARR value specified by the
        calling task.  This could sometimes result in an NX record being
        delivered that shouldnt be.  This could only have affected VLBI
        data and only when actually subarraying sources.
        Moved from 15OCT98 this date.

 9816.  March 26, 1998   $INSUNIX/CDSETUP, INSTEP1         Pat
        New script to do the bridging work from a CDrom to the start of
        INSTEP1.  It will permit the installer to (a) run from the CD
        [with a mere 10 MByte footprint on hard disk], (b) install a
        full-blown system, or (c) switch from one to the other.  Added
        hooks in INSTEP1 so that it doesn't try to move files off
        read-only media or equally silly things.
        Moved from 15OCT98 this date.

 9817.  March 30, 1998     $SYSUNIX/XASERVERS              Pat
        Changed the order in which daemons are started: do the TVSERV
        and XAS servers first.  Robert Reid at Toronto found this to
        avoid a problem when using ssh to start up the servers remotely.
        Also removed the resetting of the DISPLAY to :n from hostname:n
        (this really messes up ssh connections with X tunneling) and
        streamlined it a bit (check on LOAD area only needed once).
        Moved from 15OCT98 this date.

 9818.  April 3, 1998           $SYSUNIX/OPTIMIZE.LIS     Eric/Pat
        Added an entry for DECBIT (in $APLSUB) to force no optimisation.
        The OPT3 level apparently did a number on this subroutine,
        causing bizarre behaviour such as TVLOD doing next to nothing
        other than saying "TV PROBLEM".  (The channel to load was
        getting passed to TVLOAD as zero).  Setting the level to OPT0
        for just this one routine seems to have cured the problem.
        Moved to ohsumi this date; will move to 15APR98 shortly.

 9819.  April

