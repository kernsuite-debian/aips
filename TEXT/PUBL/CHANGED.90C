-----------------------------------------------------------------------
;  Copyright (C) 1995
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;          Internet email: aipsmail@nrao.edu.
;          Postal address: AIPS Project Office
;                          National Radio Astronomy Observatory
;                          520 Edgemont Road
;                          Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
        This file must be used to record any changes made to the
 code on the Charlottesville VAX in the logon area [AIPS].  The format
 to use is:

   line 1:  Date    Program name     Your name
   line 2:  What was done
   line 3:  Where has this change been moved (e.g. OLD, the Modcomp)
   line 4:  Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month, day,
 comma, year, some space, a title, some more space, your name.


                    Changes to 15JUL90

 ***********************************************************************

        Changes while 15JUL90  was TST:

 ***********************************************************************
 ***********************************************************************

 5594.  January 22, 1990    UNICOS Area Logicals                       Kerry
        Added area logicals to $SYSAIPS/AREAS.DAT for the implementation of
        AIPS under UNICOS.  These include $APLCRI (UNICOS Z-routines), $INCCRI
        (UNICOS INCLUDE files), $QCRI (UNICOS Q-routines) & $SYSCRI (UNICOS
        system files).  Eliminated the UNIX area logicals for empty, never used
        directories, including $APLNUNIX, $QPGUNIX, $QYPGUNIX, $SYSLUNIX and
        $YPGUNIX.  Also cleaned up and embellished the comments.
        Moved to 15APR90 same date.

 5595.  January 22, 1990    Source Code Preprocessing for UNICOS       Kerry
        Source code preprocessing for FORTRAN modules under UNICOS is the
        same as for any other system, however, C modules require some minor
        massaging, including the removable of the ``_'' (underscore) suffix
        from entry points and calls to FORTRAN routines.  Also, ``cft77''
        does NOT convert FORTRAN code to lowercase, so entry points and
        calls to other AIPS routines must be specified using uppercase.
        The UNICOS version of PP does this via ``sed'' using the command
        file C.SED.  A special version of INCS.SH has also been created
        that includes the $INCCRI directory in the preprocessor's search
        path for INCLUDE files.
        New files: $SYSCRI/PP
                   $SYSCRI/INCS.SH
                   $SYSCRI/C.SED
        Moved to 15APR90 same date.

 5596.  January 22, 1990    Compiler & Loader Options for UNICOS       Kerry
        Created options files specifying rather ``vanilla'' defaults for
        UNICOS ``cc'' (C) and ``cft77'' (FORTRAN) compilations plus
        ``segldr'' program loading (linking).
        New files: $SYSCRI/CCOPTS.SH
                   $SYSCRI/FCOPTS.SH
                   $SYSCRI/LDOPTS.SH
        Moved to 15APR90 same date.

 5597.  January 22, 1990    Object Library Maintenance for UNICOS      Kerry
        System V based UNIX platforms do not have ``ranlib'' (eliminated
        after SYSTEM III).  Furthermore, UNICOS uses ``bld'' as an object
        librarian rather than the standard UNIX ``ar''.
        New files: $SYSCRI/LIBR
        Moved to 15APR90 same date.

 5598.  January 22, 1990    ZLPCL2 Script for UNICOS                   Kerry
        Created a special version of the standard UNIX script used to dispose
        line printer output (i.e., temporary disk files) to a suitable device.
        It's very similar to the generic UNIX version, except it uses the
        UNICOS ``asa'' filter to process FORTRAN carriage control characters.
        New files: $SYSCRI/ZLPCL2
        Moved to 15APR90 same date.

 5599.  January 22, 1990    FORTRAN Compilation Script for UNICOS      Kerry
        The technique used in the generic UNIX version of this script to
        detect a FORTRAN compilation failure does not work under UNICOS (i.e.,
        ``cft77'' produces a ``.o'' file whether it fails or not), thus a
        special version of the FC script that tests the return code of the
        compiler.
        New file: $SYSCRI/FC
        Moved to 15APR90 same date.

 5600.  January 22, 1990  Source & Object Library Mappings for UNICOS  Kerry
        Created a generic version of LIBR.DAT for UNICOS that uses the $QCRI
        Q-routines, the $YVTV (virtual TV) Y-routines and $APLCRI Z-routines.
        New file: $SYSCRI/LIBR.DAT
        Moved to 15APR90 same date.

 5601.  January 23, 1990            UVBAS                 Bill C.
        Corrected indexing error when selection channels.  It was selecting
        data starting at channel 1.
        Moved to 15APR90 this date.

 5602.  January 23, 1990       CHANGED.90A                     Bill C.
        Copied the CHANGE.DOC file for 15JAN90 to HIST:CHANGED.90A.
        Moved nowhere else.

 5603.  January 23, 1990       INSVMS:TRANSPRT.COM            Bill C.
        Modified to include the new AIPS PUBL and AIPSIONS directories
        on the transport tape.  Since these are above the release date
        level they are not automatically included.
        Moved nowhere.

 5603.  January 23, 1990         DeAnza routines     Mark Calabretta/Eric
        Corrected YDEA errors in YZERO (constant used in call where
        variable is required) and YSPLIT (NE used where EQ was wanted).
        Moved to 15APR90 this date, to 15JAN90 24-Jan.

 5604.  January 23, 1990        EXPFIT                 Eric
        Corrected bad format numbers and added further directory name
        tests.  Changed EXPFIT.COM to include the new text regions.
        Moved to 15APR90 this date.

 5605.  January 24, 1990           SPFLG                  Eric
        Corrected the CURVALU-like display in most of the flagging modes.
        It was not handling BCHAN correctly.
        Moved from 15JUL90 this date.

 5606.  January 24, 1990     UVBAS.HLP     Huib van Langevelde/Bill C.
        Added explain section.
        Moved to 15APR90 this date.

 5607.  January 25, 1990         BATER                           Bill J.
        Two calls to CHR2H in subroutine CUA had incorrect numbers of
        arguments.
        Moved to 15APR90 this date.

 5608.  January 29, 1990         AIPSHELP.HLP                   Bill C.
        Updated Designated AIP schedule.
        Moved to 15APR90 this date.

 5609.  January 29, 1990         PLCUB.FOR                       Bill J.
        The call to NAMEST had an incorrect argument - hollerith instead
        of character string although the conversion had been performed
        to generate the correct argument.
        Moved to 15APR90 this date.

 5610.  January 30, 1990        AIPSSERV documentation          Bill C.
        Updated doc:readme. to drop discussion of bug fixes in 15OCT89.
        Also added initial versions of DOC:VMSNOTES.90A and
        UNIXNOTES.90A.
        Moved nowhere.

 5611.  January 30, 1990         BATER                          Bill J.
        Incorrect indexing in the command interpreter in subroutine
        BATPOL ensured that this would never work.
        Moved to 15APR90 this date.

 5612.  January 30, 1990         BATER                          Bill J.
        A trivial problem noted after above fix.  Error conditions
        would not be reported correctly from BATPOL due to another
        indexing error.
        Moved nowhere.

 5613.  January 31, 1990        LISTR.HLP     M. Calabretta/Bill C
        Corrected misstatements about the defaults for frequency
        identifier.
        Moved to 15APR90 this date.

 5614.  January 31, 1990       APGNOT:UVPLT   M. Calabretta/Bill C
        Fixed a formatting problem in displaying the timerange on the
        plot; scaled the u,v, and w to the correct frequency when they
        are plotted and allowed plotting all FQ ids on the same plot.
        Also documented in UVPLT.HLP.
        Moved to 15APR90 this date.

 5615.  January 31, 1990        APLNOT:UVGET            Bill C.
        Improved precursor comments especially use of common variables.
        Moved nowhere.

 5616.  January 31, 1990        DDTs                    Glen
        Removed NPOINTS from the DDTSAVE help and from DDTLOAD.001.
        Updated DDT.HLP.  Modified NEWPARMS.001 to include the
        DDT adverbs DDISK, DDTSIZE, EDGSKP, IOTAPE, MDISK, TCODE,
        TDISK, TMASK and TMODE.  Added help files for the adverbs.
        Moved to 15APR90 this date.

 5617.  January 31,1990         QPHSRO/QRECT            Glen
        Replaced a matrix multiply calculation of the Phase rotation
        by calls to SIN and COS.  Replace QRECT use of Look up
        table in PSAP with SIN and COS.  Removed QPHSRO from the
        QVEX this improved small DDT by 3 BITs.
        Moved to nowhere.

 5618.  February 5, 1990    Going AIPS vol. 1         Bill C.
        Revised the AIPS Programmer's Manual "Going AIPS" to reflect the
        changes made in the overhaul.  The new edition refers to the
        15APR90 version of AIPS.  Volume 1 is finished; files in
        DOCTXT:GAVOL1.TEX, GOAIPS.STY, CHAP1-8.TEX, APPENDIXA.TEX and
        APPENDIXB.TEX.  Also added a file README with instructions for
        using LaTeX for Going AIPS.
        Moved nowhere.

 5619.  February 6, 1990          CALIB                    Bill
        Changed call to FRQTAB in GASOLV to determine frequencies from
        the actual file being read rather than the input data file.
        Since the data may be reordered by UVGET this is important;
        under some circumstances this problem causes an infinite loop.
        Moved to 15APR90 this date.

 5620.  February 6, 1990           UVFLG                   Phil
        When writing to an FG table UVFLG was not inserting any
        information in the HI file, it now does. Also tells the user
        which FG table is being written.
        Moved nowhere.

 5621.  February 6, 1990             SETJY                Phil
        Modifed the 'calc' option to use the new flux coefficients
        determined by Perley from VLA data. The default is to now
        use these values for any of 3C48, 3C138, 3C147 or 3C286.
        If the user wishes the old Baars et al coefficients can be
        selected. Also added the QUAL adverb since this is sometimes
        needed when inserting velocity information for the same
        source observed at different velocities. Also changed .HLP.
        Moved nowhere.

 5622.  February 7, 1990           UVPLT                   Phil
        Modified the plot labelling very slightly to remove a gap
        between the top of the plot and beginning of the labelling.
        Moved nowhere.

 5623.  February 9, 1990         GETFQ                 Phil
        Modified to look in CH tables for freq info if there is
        no FQ table. If neither of them are there then it fills in
        the data from the catalogue header.
        Moved nowhere.

 5624.  February 9, 1990             POSSM            Phil
        POSSM was not labelling the plot correctly if the user
        requested the x-axis be labelled in Hz. It now does
        a much better job of this, overriding the automatic scaling
        produced by METSCA if necessary.
        Moved nowhere.

 5625.  February 9, 1990               UVPLT            Phil
        Modified the labelling even more, inserting the IF number
        being plotted, and generally tiding up a little.
        Moved nowhere.

 5626.  February 9, 1990             DOUVCOMP          Phil
        Changed the default value of douvcomp to .true.. So
        modified POPSDAT.HLP and RUNSYS:NEWPARMS.001. Will
        run POPSGN on Monday.
        Moved nowhere.

 5627.  February 9, 1990              SETJY             Phil
        Changed a format statement slightly, and ensured that
        when no sources are selected that the user gets a
        sensible error message.
        Moved nowhere.

 5628.  February 9, 1990              ANTINI           Phil
        There was an error in the call to CHR2H such that only
        8 characters of the column title were written to the
        table instead of 24, the others were all set to nulls.
        Normally this did not matter but some FITS readers don't
        find this very healthy.
        Moved nowhere.

 5629.  February 9, 1990          CALIB                    Bill C
        Fixed a couple of MIN functions that were supposed to be MAX
        in CLBSRC and CLBDR.  This error caused CALIIB to abort when
        doing a common delay-rate solution for all IFs in a MkIII data
        file.
        Moved to 15APR90 this date.

 5630.  February 9, 1990        MK3IN.FOR,MK3IN.HLP     Bill C.
        Numerous improvments.  Any antennas found may be selected by
        using antenna name 'ANY' in the INFILE.  The "Debug" output
        option was cleaned up to work properly on any machine.  CL table
        entries for antennas for which there was no data are no longer
        written.  The observing date in the AN and HI files are now
        correct.  The time tags associated with the first baseline of
        the first scan are now correct if REFDATE is not specified.
            The phase of the phase cal was reversed if the baseline was
        oriented west to east.  This is now fixed.  The phase of the
        phase cal is now adjusted for any offsets in delay.  This
        problem was causing the phase cals on the "remote" stations to
        be trashed.  Also the max and min. peculiar delay offsets are
        kept on a baseline basis.
            The delay residual in the output data was wrong by an amount
        corresponding to one delay lag.
        Moved to 15APR90 this date.

 5631.  February 9, 1990      APLGEN:ZDHPRL.FOR              Bill C
        The use of the intrinsic function "REAL" to convert from a 32
        bit integer to double precision was replaced by "DFLOAT".  Use
        of "REAL" was causing a signifigant precision loss in
        translating HP double precision words on Convexes;  DFLOAT
        should keep the full precision.  Apparently this bug was
        introduced in an attempt to clean up problems found by the SUN 4
        compiler.
        Moved to 15APR90 this date.

 5632.  February 10, 1990    CLCOR.FOR, CLCOR.HLP           Bill C.
        Added two new options: 'PCAL' to insert MkIII manual phase cals
        and 'SBDL' to add corrections to the residual delays without
        modifying the total model delays.  These two options are needed
        for procesion MkIII VLBI data.
           Also changed the adverb BPARM to CLPARM which is dimensioned
        20.  Also CLPARM.HLP.
        Moved to 15APR90 this date.

 5633.  February 10, 1990      POPSDAT.HLP, RUNSYS:NEWPARM.001  Bill C
        Added the new, task specific adverb CLPARM.  In POPSDAT.HLP this
        was done in a procedure ant the end of the file rather than
        defining an adverb that POPS knows by name; i.e. DAPL.INC
        doesn't need to be changed and AIPS etc recompiled and linked.
        This change required that POPSGN be run by hand on each NRAO
        computer updated by the midnight job.
        Moved to 15APR90 this date.

 5634.  February 11, 1990                FILLM            Phil/Bill J.
        Several bugs were fixed, one outstanding one and others
        (re)introduced recently.
        (1) The problem with the integration just prior to midnight
            being labelled wrongly was finally found and fixed, the
            fact that midnight has occurred is now caught and dealt
            with in MCSUM.
        (2) When antennas enter the array during an experiment the
            order of the baselines in the data arrays changes, this
            was not being trapped. MCWANT now checks to see if the
            number of antennas and/or the order of antennas has
            changed and if so it forces a call to MCINI. I fixed this
            18 months ago but my fix had been removed even though
            the variables and arrays I used were still declared.
        (3) An associated problem is that the AN table is written when
            a file is first opened so it only contains information
            for antennas present at the beginning of the observing run.
            A new subroutine (ANTUPD) now updates the AN table before
            the file is closed.
        (4) The bandwidth being written to the SU table was the full
            bandwidth rather than the channel width.
        (5) There was a problem occurring when the number of channels
            changed during the run, this change was not always caught.
            Added another section to MCWANT to explicitly check for
            this change and also for a change in correlator mode.
            When these change the program is now forced to determine
            if a new file must be opened.
        (6) The annoying (to the users) feature of having to specify
            integration time + 0.2 sec to obtain a specified int.
            time has been disabled. This will need more checking to
            determine if it really works.
         Moved nowhere.

 5635.  February 12, 1990                VLBIN                   Phil
        VLBIN was unable to cope with lower sideband data, it just assumed
        everything was upper sideband. Fixed the labelling routines and
        the FFT routines.
        Moved nowhere.

 5636.  February 13, 1990           DOCTXT:VGUIDE.RNO    Bill C/Gareth
        Revised the VMS installation guide for 15JAN90.
        Moved nowhere.

 5637.  February 13, 1990       ZFRE2.C in APLSUN              Chris
        Modified version of the generic Unix ZFRE2. Modifications are
        necessary for Sun OS since the Sun implementation of {\tt df}
        returns the information for the requested disks in the order in
        which they occur in {\tt /etc/fstab} irrespective of the order
        in which they were specified on the command line.
        Moved to 15APR90 this date.

 5638.  February 15, 1990          SDTUV                     Bill C.
        Removed restriction that the input data files have 14 data
        columns.  Also fixed a couple of places where zero divides were
        possible.  Also added the Parkes 64 m antenna to the list of
        antennas that it knows about.
        Moved to 15APR90 this date.

 5639.  February 15, 1990          MK3TX                 Chris
        Now behaves more sensibly if there are no text files present in
        the archive.
        Moved to 15APR90 this date.

 5640.  February 15, 1990          CALIB                    Bill C
        Fixed problem with averaging all data in each IF.  This problem
        only occured when fringe fitting MkIII data.  Also put the SN
        table writing stuff in GASOLV into a separate routine.
        Moved to 15APR90 this date.

 5641.  February 15, 1990       CLCOR.FOR, CLCOR.HLP       Bill C.
        Modified 'SBDL' option to modify the phase as well as the delay.
        The phase is assumed to be at the reference frequency if the
        delay residual correction is non zero.  DATCAL corrects to the
        frequencies of the actual data.  Also updated the table of
        sunspot numbers in the CLCOR.HLP file.
        Moved to 15APR90 this date.

 5642.  February 15, 1990       APLNOT:CGASET.FOR          Bill C.
        Removed the phase corrections for channel selection with non
        zero delay corrections.  This correction was also being done in
        DATCAL and was redundant in CGASET.
        Moved to 15APR90 this date

 5643.  February 15, 1990                 POSSM            Phil
        Added an option to plot all IF's in the same frame, essentially
        adding the second IF onto the end of the first so creating a
        longer spectrum. Also ensured that flagged channels are not
        plotted. Updated the .HLP file to reflect the change.
        Moved nowhere.

 5644.  February 16, 1990            CALIB               Phil
        There was an indexing error in filling up the frequency arrays
        in GASOLV, the bchan and bif offsets were not being taken
        into account.
        Moved to 15APR90 this date.

 5645.  February 16, 1990            TABHDR              Bill C.
        Fixed logic error which caused the length of character table
        entries read from ASCII FITS tables to always be 1.  This
        appears to have had no effect on calibration tables but was
        discovered at CfA.  This affected UVLOD and IMLOD.
        Moved to 15APR90 this date.

 5646.  February 18, 1990         PUTCOL                     Bill C.
        Remove a C in column 1 from a line computing the array pointer
        for a double precision value.
        Moved to 15APR90 this date.

 5647.  February 19, 1990       SLCOL                Neil Killeen/Bill C
        Fixed an error extracting BLC, TRC from the input parameter
        array.
        Moved to 15APR90 this date.

 5648.  February 19, 1990          AIPSUB:AU7A           Bill C
        Added new verbs to access tables.
        - GETTHEAD: Reads table header keywords and other info
        - PUTTHEAD: Writes table header keyword values.
        - TABGET: Reads values from a table.
        - TABPUT: writes values to a table.
        Added new routines to AIPSUB:TBHEAD, TBDATA.
        Also GETHEAD.HLP, PUTHEAD.HLP, TABGET.HLP, TABPUT.HLP,
        POPSDAT.HLP.  This change requires running POPSGN.
        Moved nowhere.

 5649.  February 19, 1990       PRTSD                   Bill C
        Fixed bug in computing time to be displayed; it was multiplying
        all the times by 2.
        Moved to 15APR90 this date.

 5650.  February 19, 1990       SDTUV                   Bill C
        Changed hardcoded number of receivers (14) to the number of
        columns - 2.  Also modified BADRA to accept an RA difference of
        360 degrees as 0.
        Moved to 15APR90 this date.

 5651.  February 19,1990        UVCOP                  Bill C.
        Fixed precision problem in computing subarray number.  Also the
        5 day time correction removal when BPARM(2)>0 is only done for
        single source data and if the uncorrected time is > 5 days.
        Modified UVCOP.HLP to use new adverb UVCOPARM rather than BPARM.
        Moved to 15APR90 this date.

 5651.  February 19, 1990      New adverbs             Bill C.
        Added new "task enrichment parameter" arrays (i.e. ?PARM array).
        Added UVCOPARM for UVCOP and UVFIPARM for UVFIX.  Changed
        HLPFIL:POPSDAT.HLP and RUNSYS:NEWPARMS.001.  Added
        HLPFIL:UVCOPARM.HLP and UVFIPARM.HLP.
        This change requires running POPSGN.
        Moved nowhere.

 5652.  February 19, 1990      UVFIX                   Bill C.
        Corrected a number of errors in the handling of compressed data;
        the output for compressed data was trashed.  Also fixed a bug by
        which the subarray information was stripped off the
        baseline/subarray code.  Also fixed to loop over subarrays if no
        subarray is requested.  Added a SAVE statment in UVWCAL for the
        values that were computed on the first call.  Also changed
        UVFIX.HLP.
           Changed APARM and BPARM to UVFIPARM in UVFIX.HLP.
        Moved to 15APR90 this date (except for new adverb).

 5653.  February 19, 1990      HORUS                    Bill C.
        The specified subarray was being ignored.  This caused HORUS to
        fail when DOPOL was true because only 1 subarray at a time can
        be processed.
        Moved to 15APR90 this date.

 5653.  February 20, 1990     Task specific parameters    Bill C.
        Changed the name of several task specific adverbs added
        recently.  The new convention for simple cases is
        task_namePRM.  This allows a predictable if long and/or ugly
        task specific parameter arrays.  Those changed are:
             CLPARM   => CLCORPRM   (CLCOR)
             UVCOPARM => UVCOPPRM   (UVCOP)
             UVFIPARM => UVFIXPRM   (UVFIX)
           CLPARM.HLP, UVCOPARM.HLP, UVFIPARM.HLP were removed and
        CLCORPARM.HLP, UVCOPPRM.HLP and UVFIXPRM.HLP were added;
        CLCOR.HLP, UVCOP.HLP and UVFIX.HLP were changed as were
        POPSDAT.HLP and NEWPARMS.001
        Moved nowhere.

 5654.  February 20, 1990             VLBIN           Phil
        In the case of lower sideband data the reference pixel in
        the header was being incorrectly set.
        Moved nowhere.

 5655.  February 20, 1990            CVEL              Phil
        Modified to work on lower sideband data, also now will not
        copy the BP table to the output file if it was applied.
        Speeded up the shifting by only calculating the shift every
        5 minutes and interpolating for points in between, previously
        the full shift was calculated for every data point, this
        lead to a very long run time for the task.
        Moved nowhere.

 5656.  February 20, 1990          CALIB               Bill C.
        Fixed bug introduced in recent fix of fringe fitting which
        messed up calibration of VLA like data.  The RCP and LCP data
        were added and called RCP and there were no solutions for LCP
        data.  Also fixed bug which caused the mean gain modulus
        correction from being computed if requested.
        Moved to 15APR90 this date.

 5657.  February 20, 1990       Mean gain modulus correction Bill C.
        Bugs in DATCAL and BLSET caused the mean modulus gain correction
        to fail.  DOCAL wasn't applying the correction at all unless
        delay or rate or baseline corrections were being made.
        Moved to 15APR90 this date.

 5658.  February 20, 1990             POSSM             Phil
        The source number was being incorrectly set when determining the
        velocity of the source, if the source was the last in the dataset.
        Moved nowhere.

 5659.  February 20, 1990             TABED             Bill C.
        Modified to ignore flagged table entries.
        Moved to 15APR90 this date.

 5660.  February 20, 1990        ZFRE2 in APLSUN            Chris
        ZFRE2 expected the first part of the pathname of an AIPS
        ``disk'' to be the mount point of the device on which the
        logical disk resided. This precondition was not met if any
        of the AIPS logicals DA01 etc. referred to a symbolic link.
        This version of ZFRE2 now interrogates each file referred
        to by the AIPS disk logicals to see if it is a symbolic link
        and, if so, reads the value of the link.
        Moved to 15APR90 this date.

 5661.  February 21, 1990     TKLAB                       Bill C.
        Fixed bad call to NAMEST.  It was being passes a Hollerith
        name/class rather than a character string. This caused an
        infinite loop (on Suns at least) in verb TKSLICE.
        Moved to 15APR90 this date.

 5662.  February 21, 1990     XMOM                          Bill C.
        Fixed bug left over from the overhaul.  A numeric array was
        being passed to ZPHFIL and ZOPEN for the file name rather than a
        character.  This caused failure of the open (on Unix at least -
        this may work on Vaxes).  Also cleaned up some other junk not
        cleaned up in the overhaul.
        Moved to 15APR90 this date.

 5663.  February 22, 1990          BPASS                    Phil
        There was an error in setting the row numbers when writing the
        BP table such that row number 1 was always the first written.
        This meant that if a user wished to add to an existing BP table
        he/she could not, the existing table would be overwritten.
        Also removed a now unused subroutine and changed the APARM
        array in the helpfile to BPASSPRM, also meant changing POPSDAT
        and NEWPARMS.001.
        Moved nowhere.

 5664.  February 21, 1990                VLBIN                  Phil
        The GAST at UT=0 was being written into the AN table as radians
        rather than degrees. Also the formula used to calculate IAT-UTC
        was getting progressively wrong as time went on, so I inserted
        the look up table stolen from Starlink . This is correct up to
        Jan 1 1990 - we will need to think about how we cope with this
        - maybe a table distributed by AIPSSERV and let VLBIN read the
        table?
        Moved to 15APR90 this date.

 5665.  February 21, 1990        AXSTRN                   glen
        AXSTRN produces a frequency label in exponential form if the
        frequency is greater than 1E11.  Each internal write
        statement has an ERR= argument to trap errors.
        Moved to 15APR90 this date.

 5666.  February 22, 1990   ZDEAXF       Gustaaf van Moorsel/Bill C
        Fixed declaration of OPERS(20) to OPERS*4(20).
        Moved to 15APR90 this date.

 5667.  February 22, 1990        PRTAB                     Phil
        Modified the code dealing with the DOHMS option, it was relying
        on a hard coded table to decide which columns had time info.
        It now examines the UNITS column label and decodes the type
        of column using GETCOL, so it is now general and does not need to
        be updated whenever a table format changes.
        Moved nowhere.

 5668.  February 23, 1990        NEWPARMS, POPSDAT, DDTs   Glen
        Added help files for two DDT adverbs TNAMF and MAPDIF.  Added
        these adverbs to NEWPARMS and POPSDAT.
        Moved to 15APR90 this date.

 5669.  February 23, 1990          FG tables                Phil
        Added the FREQID to FG tables, this of course meant changes in
        the flagging routines.
          FGREFM - new routine to reformat FG tables
          FLGINI, TABFLG, DATFLG, NXTFLG, UVGET, SDGET, FLAGUP all
          modified to deal with the new column.
          TABFLG and FLAGUP had their call sequences changed.
          UVFLG and QUACK had the FREQID adverbs added and suffered
          moderate changes to reflect the addition of FQ numbers.
          Also changed their .HLP files.
          TVFLG and SPFLG had minor changes - just changed the call
          sequence to FLAGUP.
        Moved nowhere.

 5670.  February 24, 1990         MX/UVGRID                Glen
        New UVGRID which does not require sorted UV data.  MX modified
        to allow unsorted data and to determine Max and Min baseline
        length.  New subroutines: UVAPAS calculates number of passes
        for bandwidth synthesis.  APVCHK prints max and min of a
        vector in the AP.  UVPREP creates a UV scratch file name,
        opens the file, inits the file and reads maximum baseline
        length.
        Moved nowhere.

 5671.  February 26, 1990         Q1GRD                   Glen
        Modified to call QRECT1 not QRECT. QRECT1 provides more
        accurate SIN and COS but does not multiply by radius.
        Moved to 15APR90 this date

 5672.  February 26, 1990        M-Z*.HLP             Bill C
        Added the one line descriptions and the categories to the help
        files for which this had not already been done.
        Moved nowhere.

 5673.  February 26, 1990            UVGET                 Phil
        When I inserted the FQ ID into the FG tables the column numbers
        changed, this caused UVGET to fail to sort the FG table on the
        correct column numbers. Changed the data statement to force the
        sort keys to be columns 5 and 1 instead of 4 and 1.
        Moved nowhere.

 5674.  February 27, 1990        UVCOP                    Bill C.
        Corrected logic error in determining which correlations to keep
        when selecting compressed data by channel.
        Moved to 15APR90 this date.

 5675.  February 27, 1990       SPFLG, TVFLG                  Eric
        Changed DTVF.INC and DSPF.INC to add a variable retaining the
        source random parameter.  Changed GRIDTB and GRIDTC to get
        the correct source ID number even when the user has specified
        a single source.  Changed SPFLG and TVFLG to check frequency
        and source ID numbers when making the list of times to be
        gridded.  Also changed them to correct the handling of the
        interactive (graphical) window setting and to remember the
        input source random parameter offset.  Dropped unused FORMATs.
        Corrected channel number displayed in SPFLG's interactive
        modes.  It used a correct channel number, but displayed a bad
        one if the reference channel was not the first channel.
        Moved from Oz this date to wherever and to 15APR90.

 5676.  February 27, 1990          NEWPOS                      Eric
        Cleaned up the code a bit.  Also changed the formulas used for
        the SIN and ARC projections.  They failed when the angles got
        very large so that ASIN became ambiguous.  Now both use ATAN2.
        Thanks to Mark Clark (GB) who bugged me about this.
        Moved from Oz this date to wherever and to 15APR90.

 5677.  February 27, 1990         TIMDEST                      Bill J.
        Minimum value of TIMDEST set in TIMDEST.HLP was 14 days.
        Changed this to 5 days for the usual situation at the AOC.
        Moved nowhere.

 5678.  February 27, 1990         APLSUB:FPARSE.FOR            Bill J.
        On occasion a history card is more than 80 characters long.
        When PRTTP calls GETNUM to parse the numerical information
        in this record, it can return a NaN to signify some illegal
        value.  FPARSE didn't trap this appropriately and
        equivalenced the R*8 DBLANK which is 1.3E45 to an R*4 causing
        f.p. overflow.  Added a trap so that isn't a fatal condition
        in the case of a "bad" history record.

 5679.  February 28, 1990         TVFLG, SPFLG                 Eric
        Corrected GRIDTB --- it was regarding an end-of-file condition
        as unacceptable at the location where the first point of each
        group was read.  At one time, this location was for the first
        visiblity, but that was changed some time ago to do things in
        groups for vectorization.  Corrected SPFLG and TVFLG --- in the
        first read through the data to determine the list of times, the
        tests on subarray, source, and FQ number were branching all the
        way to the end of the loop.  Thereby, the index was not
        incremented and the same point was retested and re-rejected
        for the full buffer's worth.  This could make the list of times
        seriously incomplete or in error in some cases.
        Moved from Oz here and to 15APR89.

 5680.  March 1, 1990              KEYCOP                   Bill C
        New routine to copy any header keywords from one cataloged file
        to another.
        Moved to 15APR90 this date.

 5681.  March 1, 1990              UVCOP                    Bill C
        Modified to call KEYCOP to copy catalog keyword/value pairs.
        This allows using UVCOP to salvage data from a disrupted FILLM
        run.
        Moved to 15APR90 this date.

 5682.  March 4, 1990          SNPLT                        Bill C
        Fixed several problems with OPTYPE='SUM'.  The 2 IF mode
        (BIF=0) was disabled in the inputs checking and BIF=2 or higher
        actually did IF=1 due to indexing errors.
        Moved to 15APR90 this date.

 5683.  March 5, 1990          Table descriptions.          Phil
        Modified the DOCTXT:MV...nn files to include the descriptions of
        FREQ ID and I.FAR.ROT. Description files modified were those for
        BL, NX, FG, SN and CL tables.
        Moved nowhere.

 5864.  March 6, 1990            CHNCOP, CHNDAT              Phil
        Modified the precursor comments to fully explain what the default
        values of FREQID do.
        Moved nowhere.

 5865.  March 6, 1990            SOURNU                     Bill C.
        Corrected null (selects all) value of QUAL from 0 to -1 as is
        advertised to the users.  Corrected the DATAed values of QUAL
        passed to SOURNU in BLFIT, QUACK, SNPLT, UVFLG.
        Moved nowhere.

 5866.  March 7, 1990          UVCOP                        Bill C.
        Added selection by sources and qualifier, FQ id, and IF.  Also
        UVCOP.HLP.   When selecting by IF then the reference frequency
        is changed, the u,v and ws are scaled and the AN, CL, SN and SU
        tables are suitably modified.
        Moved nowhere.

 5867.  March 7, 1990      Table selection by IF            Bill C.
        Added a number of new routines to reformat tables selecting a
        given range if IF.
          CLSEL - Selects IFs in a CL table
          SNSEL - Selects IFs in a SN table
          SUSEL - Selects IFs in a SU table
          FGSEL - Renumbers IFs in a FG table
        Moved nowhere

 5868.  March 9, 1990           AIPSLetter stuff              Bill C.
        15JAN90 AIPSLetter (let90a.tex) was put into AIPSPUBL.  Also
        changed macro al82.mac to give better uunet address as per DWells.
        Moved nowhere.

 5869.  March 9, 1990 YSVU:window.c,cursor.c Mark Calabretta/Bill C
        Modified WINDOW.C and CURSOR.C to bind a RESIZE event to the F2
        and F7 keys, users can take their pick!  Sunview considers
        pressing a button and releasing it to be two separate events.
        Added a call to event_is_down() to remove the "bounced key"
        behaviour of the function keys within SSS.  I, also replaced the
        calls to event_id() by event_action() which supercedes it.
        Moved to 15APR90 this date.

 5870.  March 9, 1990       UVPLT               Neil Killeen/Bill C
        When DOCAL=1, UVPLT looked for an SN table rather than CL table
        for multi-source data bases.  It now does not check if the file
        is a multi-source file to see if an SN table exists.
        Moved to 15APR90 this date.

 5871.  March 9, 1990        KNTR.FOR, KNTR.HLP  Mark Calabretta/Bill C
        Fixed a couple of bugs in KNTR, one relating to annotation
        of the contour levels, and another in computing the maximum
        absolute pixel value in KONDRW.
           Also changed the way that blanked pixels are handled.  It used
        to be based on connecting pixel centres, but this could produce
        stick-like "contours" for small irregularly shaped clusters of
        pixels surrounded by blank areas.  The algorithm now delineates
        the pixel edges.  There are pros and cons for either method but
        the latter is less likely to confuse users.
           Also expanded the explain part of the help file slightly.
        Moved to 15APR90 this date.

 5872.  March 9, 1990    AIPSUB:TVMOVI.FOR     Mark Calabretta/Bill C
        Removed limitation on long cursor moves.
        Moved to 15APR90 this date.

 5873.  March 12, 1990    ZVTVX2 and ZVTVX3 in APLBERK      Chris
        ZVTVX2 and ZVTVX3 were, incorrectly, treating the case where a
        read from a {\tt SOCK_STREAM} returned less bytes than were
        requested as an error. This was causing TV-by-wire to fail over
        long distances (AOC to Charlottesville). Both routines now loop
        to read the outstanding bytes until either the complete packet
        is received or a genuine error or end-of-file is detected. Write
        operations are treated in the same manner, although partial
        writes are extremely unlikely in the absence of errors.
        Moved to 15APR90 this date

 5874.  March 12, 1990    BPASET.FOR          Mark Calabretta/Phil
        Ensured that the scratch file written by BPASET was not too
        small for UVINIT.
        Moved to 15APR90 this date.

 5875.  March 12, 1990         AU9A.FOR          Mark Calabretta/Bill C
        Fixed error trap for TKCATL; treats KNTR plots like CNTR.
        Moved to 15APR90 this date.

 5876.  March 12, 1990         TKCATL            Mark Calabretta/Bill C
        Fixed a bug in the logic to see if a pixel is in range.
        Moved to 15APR90 this date.

 5877.  March 12, 1990     YSVU:CURSOR.C,WINDOW.C  Mark Calabretta/Eric
        Modified WINDOW.C to accept F2 and F7 as the AIPS TV resize
        button.  Modified CURSOR to surpress erroneous double button
        hits.
        Moved nowhere.

 5878.  March 12, 1990      APLVMS:ZMCACL.FOR              Bill J.
        A redundant call to ZC8CL (to convert compressed ASCII to local
        characters) was removed.  This code was probably a hangover
        from pre-f77.  Affects only VAX version of FILLR.
        Moved nowhere.

 5879.  March 12, 1990      APLNOT:CALREF.FOR              Bill J.
        Under some circumstances the arguments for SIN and COS exceeded
        permissible range for REAL functions. Changed evaluation to
        use double precision.
        Moved nowhere.

 5880.  March 12, 1990      APLPGM:CLIP.FOR                Bill J.
        Currently, CLIP can't handle compressed data.  The error message
        to warn the user advises the use of SPLIT.  Changed this to
        suggest use of UVCMP --- this handles both multi and single
        source databases ---  pending conversion of CLIP to handle
        packed u-v data.
        Moved nowhere.

 5881.  March 14, 1990      APGNOT:MK3IN.FOR               Bill C.
        Modified to open and close SU and CL table whenever they are
        accessed.  This increases the chances that if something goes
        wrong that the tables will be OK.
        Moved to 15APR90 this date.

 5882.  March 14, 1990       CALIB.FOR                    Bill C.
        Fixed logic error in GASOLV in computing the array of
        frequencies when selecting by channel.  This caused later
        routines to blow up.
        Moved to 15APR90 this date.

 5883.  March 14, 1990      APLPGM:PRTTP.FOR              Bill J.
        Added a 'terse' option for FITS format tapes (PRTLEV=-2).
        This gives tape file#, image and filename ONLY.  Changed HELP
        file to reflect this.
        Moved nowhere.

 5884.  March 14, 1990       APLPGM:TACOP.FOR              Bill J.
        Blank OUTNAME and OUTCLASS weren't being interpreted usefully
        i.e. just copy an extension table to higher version attached
        to the input file.  The behaviour of the program was at variance
        with information in "Chapter 99" and caused confusion.
        Moved 15APR90 this date.

 5885.  March 12, 1990             AIPSUB:AIPINI.FOR               Kerry
        Fixed to take different actions depending on wether the current
        program is FILIA2 (open logical unit 6 via ZMSGOP) or FILAIP (open
        logical unit 5 via ZOPEN).  Otherwise, non-VMS installations fail.
        Also if FILAI2 or FILAIP, don't get device characteristics common
        from disk or make accounting entry.  Otherwise, disconcerting error
        messages are issued when the AC and/or SP files and/or the MS file
        for user #1 don't yet exist (FILAI2 and FILAIP create these as part
        of an installation).
        Moved to 15JAN90 and 15APR90 this date.

 5886.  March 15, 1990               SYSAIPS:AREAS.DAT                Kerry
        Added and/or redefined area logicals for screen server and virtual
        TV implementations including:

        Logical    Directory            Contents

        YSS        ...Y.DEV.SS          Screen Server Y-routines (formerly
                                        YSSS as ...Y.DEV.SSS)

        YSERV      ...Y.SERVERS         Screen servers

        YSTV       ...Y.STV             Sunview TV (formerly YSVU as
                                        ...Y.DEV.SSS.SVU)

        YVDEV      ...Y.VDEV            Virtual TV program (formerly
                                        YPGVDEV as ...Y.PGM.VDEV)

        YXTV       ...Y.XTV             X Window TV

        YXTVUNIX   ...Y.XTV.UNIX        UNIX XTV communications

        YXTVBELL   ...Y.XTV.UNIX.BELL   Bell UNIX (streams)

        YXTVBERK   ...Y.XTV.UNIX.BERK   Berkeley UNIX (sockets)

        YXTVVMS    ...Y.XTV.VMS         VMS (DECnet)

        The following areas are still defined until they can be phased out
        entirely:

        YSSS       ...Y.DEV.SSS         (now YSS as ...Y.DEV.SS)

        YSVU       ...Y.DEV.SSS.SVU     (now YSTV as ...Y.STV)

        YPGVDEV    ...Y.PGM.VDEV        (now YVDEV as ...Y.VDEV)

        Moved nowhere.

 5887.  March 15, 1990     DDCH.INC, ZDCHIN               Bill C.
        Increased the maximum number of files open of the 3 different
        types to 20 each.  Also increased the size of FTAB to 2048.
        This should take care of the MX problem that size the overhaul
        it could not clean 16 fields.
        Moved nowhere.

 5888.  March 15, 1990       UVCOP                        Phil
        Under some circumstances when no IF selection was done the CL,
        SN, SU and FG tables were not copied to the output file. Fixed.
        Moved nowhere.

 5889.  March 15, 1990       QGRIDA/QUVIN                 Glen
        Modified QGRIDA and QUVIN to call QRECT1 instead of QRECT to
        increase precission.
        Moved to 15APR90 some time ago.

 5890.  March 15, 1990       UVGRID and friends           Glen
        Moved sections of UVGRID into new subroutines APLOAD, APSHFT,
        APSUM, APFNSH and APWRIT.
        Moved nowhere.

 5891.  March 15, 1990        UVMDIV                      Phil
        The call sequence to CHNCOP in UVMDIV on CVAX was wrong, it
        was OK on nrao1 - God knows what was on the other machines.
        Luckily that piece of code is not used that often.

 5892.  March 15, 1990        QVEX:QPUT, QGET             Glen
        Removed CVEX QPUT and QGET which were identical to the
        QPSAP versions.
        Removed to 15APR90 this date.

 5893.  March 15, 1990        FILLM                       Gareth/Bill C
        Fixed numerous bugs which occured when a scan contained a single
        averaging interval and the next scan was to go into another file.
        The control logic was getting hopelessly confused.  Errors in the
        handling of changes in the number or order of antennas was
        complicating the issue.  In this latter case, tests were made using
        values set in MCANT or MCH1 which had not been called yet.  Several
        of these (number of antennas, correlator mode) are now decoded in
        MCWANT.  All of the changes associated with these problems were in
        MCWANT.
           Corrected an indexing problem in MCGBRC which caused and
        occasional spectrum to be corrupted and an infinite loop under
        special conditions.  The logic error was fixed and a trap was made
        for the infinite loop although it should not occur if the routine
        is working correctly.  The last baseline in a CDA will be lost if
        this trap is invoked.  Fixed addressing bug for mode 2BC.
        Inserted correct source and FQ id numbers into the first
        visibility record of each scan; formerly the source id and FQ id
        from the previous scan were being used.
           Modified to accept autocorrelations for revisions 24 and later.
        Modified to only put data with the same correlator mode in the same
        file.  This involves writing a header keyword giving the correlator
        mode in each line data file.
           Changed the error handling process to return continuous EOF
        conditions from MCREAD if more than PELIM (currently 50) parity
        errors have previously occurred.
           The current file(s) being written are now expanded in size by
        10,000 visibility records when they are opened, and compressed when
        they are closed.  This minimizes the disk space required when FILLM
        is running, but could lead to disk fragmentation if the observation
        forces multiple openings and closings.  FILLM used to compress all
        files that it had appended to when it exited successfully; less
        fragmentation, but potentially an unnecessary disk hog on abnormal
        termination(s).

 5894.  March 15, 1990               AVSPC.FOR/.HLP              Neil/Phil
        Modified AVSPC to deal more sensibly with reference pixels and
        values, now sets the output bandwidth to the bandwidth between
        the two extreme channels selected. Removed the BCHAN, ECHAN
        adverbs as they caused confusuion. Added the ability to copy
        any keyword/value pairs.
        Moved nowhere.

 ***********************************************************************

        Changes while 15JUL90  was NEW:

 ***********************************************************************
 ***********************************************************************
 5895.  March 16, 1990               FPARSE.FOR                  Bill C.
        Previous change caused this routine not to compile.
        Moved from 15OCT90 this date.

 5896.  March, 19 1990           MK3IN                  Bill C
        The source number written into the CL table was always the first
        source in the source list.  Also added call a call to initialize
        the A tape header info when the end of a scan was reached.  Put
        a trap into AT20XX to ignore a scan if the cross reference table
        overflowed.  This should not happen under normal circumstances
        but bad (?) type 20?? records can cause this to happen.
        Moved to 15APR90 and from 15OCT90 this date.

 5897.  March 19, 1990    GETHUT                      Bill C
        Added calls to SPFIL to make sure nulls were removed from TABLE
        info.  This was causing FITTP to write nulls in tables headers.
        Moved from 15OCT90 and to 15APR90 this date

 5900.  March 19, 1990      FITTP                     Bill C.
        Corrected indexing error reading history file.  This was adding
        an extra 8 blanks after the "HISTORY" on the FITS history cards
        and cause then to occasionally run onto the next card.
        Moved from 15OCT90 and to 15APR90 this date

 5901.  March 19, 1990        Generic ZLWOP and ZLWIO                 Kerry
        Switched to FORMAT'ed OPEN and WRITE.  Also corrected call sequence
        to ZLASCL in ZLWIO.
        Moved to 15OCT90 this date.

 5902.  March 19, 1990                LWPLA                           Kerry
        Fixed buffering problem and errors introduced by changing from
        hollerith to CHARACTER constructs during the overhaul.  Eliminated
        EOT character from the beginning of the output PostScript program
        which causes problems on some laser printers and does not seem to
        be necessary.  Eliminated inappropriate H2CHR call and replaced it
        with simple CHARACTER substring assignment.  Also switched character
        font from Courier to Helvetica-Bold.  Tested CNTR and GREYS plots
        using the VLBA correlator group's QMS PS810 and at non-NRAO sites
        using Apple Laserwriter and NEC LC890 laser printers.
        Moved to 15OCT90 this date.

 5903.  March 19, 1990             ZLASCL.PS in SYSUNIX               Kerry
        Created a special version of the ZLASCL script for use with PostScript
        laser printers that prefixes "%!PS-Adobe-" followed by "%%Creator:AIPS
        task LWPLA" to the LWPLA output.  The first needs to appear at the
        beginning of the output ("%!... distinguishes PostScript programs from
        simple text) on a line by itself and this is not possible with the
        buffering scheme used in LWPLA.  ZLASCL.PS should be substituted for
        ZLASCL at sites with PostScript engines.  Some laser printers (e.g.,
        NEC LC890) may also require that the LWPLA output be processed to
        limit the number of characters per line to, say 132 (e.g., using "fmt
        -s -132").
        Moved to 15OCT90 this date.

 5904.  March 20, 1990                  CHLTOU                        Kerry
        Corrected a 32-bit-ism by changing an integer constant "1" argument
        in a call to ZI32IL (starting position in units of 32-bit integers)
        to NP which is assigned NBITWD / 32.  Otherwise, the routine fails
        on 64-bit platforms (e.g., Crays).
        Moved to 15OCT90 this date (also put on 15APR90 UNIX distribution
        tape).

 5905.  March 20, 1990                  CATIO                         Kerry
        Eliminated a baroque EQUIVALENCE of variables used as opcodes that
        confused CRI's cft77 and substituted CHARACTER constants in CALLs.
        Moved to 15OCT90 this date (also put on 15APR90 UNIX distribution
        tape).

 5906.  March 20, 1990                  MX                         Bill J.
        Channel averaging was not handled correctly.  In particular, this
        affected users who had written out their UV databases from ISIS with
        UVFITS.   (UVFITS treats the 2 IFs as 2 FREQUENCY CHANNELS.)
        Moved from 15OCT90 this date.

 5907.  March 22, 1990             XVSS                    Chris
        XView screen server. This is a port of the SunView screen
        server to the X Window System using the XView toolkit. The
        current version should be regarded as a beta test release
        and only functions with bsd sockets. Files added to the system
        (in area XTV) are:
           AIPS.ICON -- aips tv icon
           COLMAP.C  -- colour map handling
           CURSOR.C  -- cursor and buttons
           HEADER.H  -- global definitions
           IMGIO.C   -- image loading/readback
           MAKEFILE  -- Unix makefile
           SOCKET.C  -- miscellaneous socket operations
           SOCKXF.C  -- socket I/O
           WINDOW.C  -- set up windows & event handlers
           XVSS.C    -- main program
        The current version works with versions of AIPS linked with
        the same set of Y-routines used by the Sun screen server (SSS).
        These routines have been moved to the new YSS area and the
        ZSSSxx routines have been moved from APLSUN to APLGEN (at some
        stage they will be renamed to something more appropriate).
        Moved to 15OCT90 this date

 5908.  March 27, 1990                   BPASS                   Phil
        When solving for bandpasses on multiple IF data (MkIII VLBI)
        a frequency index was not being updated every IF loop. This
        caused the resultant BP entries to degrade as a function of IF.
        Moved from 15OCT90 this date.

 5909.  March 28, 1990      FILLM                     Gareth
        Corrected bug recently introduced in reading the parameters
        from an existing catalog entry (this is for the case when FILLM
        will try to append to an existing file).  Corrected the error
        handling when a logical record is incomplete at the end of
        tape.  Fixed the NX record count when closing a dataset.

 5910.  March 28, 1990      MX                       Glen
        Modified UVGRID to correctly handle averaging two (or more?) IFs
        Also added error checks in subroutines APWRIT and APFNSH
        Moved from 15OCT90 this date.

 5911.  March 28, 1990      APLVMS:ZDCHI2,ZMI2       Glen
        VMS Asynchronous I/O requires Event Flags for determining
        when I/O is finished, but only 32 flags are "Unassociated?"
        New modifications to INC:ZDCH.INC caused more than 32 flags
        to be used.  ZMI2 aborts on event flage outside the range
        32 to 63.  ZDCHI2 modified to assign only numbers 32 to 63 and
        ZMI2 to reassign numbers in FTAB if event outside 32 to 63
        ever occur again. (ZMI2 code checks should not now be need,
        but are there just in case...)
        Moved from 15OCT90 this date.

 5912.  March 219 1990            TABBP, BPASET                     Phil
        When a single channel of a BP table was flagged, TABBP marked
        the whole spectrum as flagged - this was OK because BPASET
        did not know what to do if only one channel was flagged bad.
        They now both deal correctly with flagged channels.
        Moved from 15OCT89 this date.

 5913.  March 29, 1990                  POSSM                      Phil
        Modified so that when plotting BP tables a flagged channel is
        not plotted. Also extended the option put in a few weeks ago
        to plot all IFs and channels on the same plot to work on BP
        tables.
        Moved from 15OCT89 this date.

 5914.  March 29, 1990               APLSUB:FPARSE.FOR          Bill J.
        The logic of the trap for bad history records was incorrect and
        was my fault.  This caused PRTTP to fail disastrously on
        encountering negative coordinates (amongst other things).
        Moved from 15OCT90 this date.

 5915.  April 2, 1990            MK3IN                  Bill C.
        Fixed bug in AT20XX in which the cross index reference table was
        messed up.  Also fixed a problem with the Fractional Bit Shift
        correction; It was apparently a factor of 2 too small and with
        the wrong sign although handeling of the FBS correcion in the
        correlators is confusing.  Also added option (APARM(3)=1) to
        suppress the FBS correction altogether.   Also MK3IN.HLP.
        Moved from 15OCT90 and to 15APR90 this date.

 5916.  April 2, 1990             APLGEN:ZRHPRL.FOR      Bill C.
        Corrected error in complimenting mantissa for negative numbers.
        This had the effect of causing negative FBS corrections on MK3IN
        to be too small.
        Moved from 15OCT90 and to 15APR90 this date.

 5917.  April 4, 1990          UVFIX                    Glen
        UVFIX appeared not to work because the default frequency for
        UVW scaling is taken from the ANTENNA table.  This frequency
        is often zero, making the new UVWs zero.  If Antenna frequency
        is zero, the CATBLK frequency is now used by default.  UVFIX
        is unchanged if user specifies the FREQUENCY.
        Moved from 15OCT90 this date.

 5918.  April 5, 1990          PRTAC                         Bill C.
        Fixed problems initializing the accounting (AC) file.  Incorrect
        values were being put into the first 4 words and the file was
        not being compressed.  This rendered the AC file unuseable.
        Moved from 15OCT90 this date.

 5919.  April 6, 1990           UVAVG                         Bill C.
        Modified to process compressed uv data.  Also knowns about
        source and FQ ids and will not average data withdifferent
        values.  Also increased the size of the working arrays.
        Moved from 15OCT90 this date.

 5920.  April 9, 1990          TABMRG                        Bill C.
        Modified to be smarter about blanked values.  Blanked values are
        not summed and if table entries are being merged and one value
        is blanked and the other is not then the valid value is written
        into the output record.
        Moved from 15OCT90 this date.

 5921.  April 11, 1990        MK3IN            Athol Kemball/Bill C.
        Fixed bug in logic detecting and end of tape in ATREC.  Now if
        an EOF is encountered while NEWFIL is true then this is treated
        as an end of tape condition.
        Moved from 15OCT90 this date.

 5922.  April 11, 1990          CLCAL                   Chris
        Removed the erroneous description of the BOTH option,
        which smooths amplitude and phase, from the EXPLAIN file. This
        had claimed, incorrectly that this was a vector average.
        Moved nowhere (more extensive changes planned for 15OCT90).

 5923.  April 12, 1990          APGNOT:ASCOR.FOR            Bill J.
        Expanded buffers JBUFSZ from 3200 to 4800 and BUFF1, BUFF2
        from 1600 to 2400 to cope with spectral line data.
        Moved from 15OCT90.

 5924.  April 8, 1990           $APLUNIX/ZABORS.C                       Kerry
                                $APLBERK/ZABORS.C
                                $APLSUN/ZABORS.C
        Eliminated "core" file preservation mechanism entirely.  Also changed
        to commit suicide with a self-inflicted illegal instruction rather than
        by calling "abort" which issues different signals on different systems.
        Changed in 15APR90 and 15OCT90 same date.

 5925.  April 8, 1990           $APLSUN/ZABOR2.C                        Kerry
        A new module that differs from the $APLBERK version in that it calls
        "ieee_handler" to "set" the action for IEEE "common" floating_point
        exceptions to SIGFPE_ABORT.  Otherwise, invalid floating-point results
        (i.e., NaNs) go undetected.  Should abort now.
        Changed in 15APR90 and 15OCT90 same date.

 5926.  April 8, 1990           $APLBELL/ZCREA2.C                       Kerry
                                $APLBELL/ZACTV9.C
        New modules.  The $APLBELL version of ZCREA2.C differs from the generic
        UNIX version in terms of header files.  The $APLBELL version of
        ZACTV9.C differs from the generic version in that it calls "fork"
        instead of "vfork" (a Berkeley UNIXism).
        Changed in 15APR90 and 15OCT90 same date.

 5927.  April 8, 1990           UNICOS Z-routines                       Kerry
        All new modules in $APLCRI:
        ZABOR2.C        same as $APLBELL version except abort handler function
                        must be declared differently; also no SIGPWR and SIGCLD
                        action set to SIG_DFL
        ZABORS.C        PUTBCKed then REMOVEd to force REMOVE via midnight jobs
                        on other Crays and to use $APLUNIX version instead
        ZACTV9.C        PUTBCKed then REMOVEd to force REMOVE via midnight jobs
                        on other Crays and to use $APLBELL version instead
        ZCMPR2.C        same as $APLBERK version (Berkeley UNIX "ftruncate"
                        supported, at least under UNICOS 5.0.13)
        ZCMPRS.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER PNAME passed to ZCMPR2 instead of
                        HOLLERITH ANAME
        ZCPU.FOR        calls UNICOS routine SECOND (generic UNIX "times"
                        yileds unreliable under UNICOS 5.0.13)
        ZCRDIR.C        same as $APLUNIX version except calls ISHELL (UNICOS
                        specific) instead of "system" to execute a shell
                        command
        ZCREA2.C        PUTBCKed then REMOVEd to force REMOVE via midnight jobs
                        on other Crays and to use $APLBELL version instead
        ZCREAT.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER PNAME passed to ZCREA2 instead of
                        HOLLERITH ANAME
        ZDCHI2.FOR      same as $APLBELL version except SPFRMT and DPFRMT = 0,
                        and TTYCAR = 0
        ZDCHIC.C        same as $APLUNIX version except NBBY "defined" as
                        8 (for some reason not in sys/param.h)
        ZDCHIN.FOR      same as $APLGEN version except NBPS = 1024 and
                        NSPG = 1
        ZDESTR.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER PNAME passed to ZCREA2 instead of
                        HOLLERITH ANAME
        ZEXIST.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER PNAME passed to ZEXIS2 instead of
                        HOLLERITH ANAME
        ZFRE2.C         same as $APLBELL version except logic (?) to look for
                        continuation line
        ZGETCH.C        PUTBCKed then REMOVEd to force REMOVE via midnight jobs
                        on other Crays and to use $APLUNIX version instead
        ZI16IL.FOR      borrowed from tried & true COS implementation
        ZI32IL.FOR      calls Cray's USICTC to perform conversion
        ZILI16.FOR      borrowed from tried & true COS implementation
        ZIVSOP.FOR      same as $APLGEN version except call to FIVASOPEN
                        commented out (name too long)
        ZLASC2.C        same as $APLUNIX version except calls ISHELL (UNICOS
                        specific) instead of "system" to execute a shell
                        command
        ZLASOP.FOR      same as $APLGEN version except "cft77" objected to
                        RECL=160 without ACCESS='DIRECT' for opcode 'POPN'
                        (used anywhere except under VMS?)
        ZLOCK.C         same as $APLBERK version (Berkeley UNIX "flock"
                        supported, at least under UNICOS 5.0.13) except for
                        additional header file sys/types.h required
        ZLPCL2.C        same as $APLUNIX version except calls ISHELL (UNICOS
                        specific) instead of "system" to execute a shell
                        command
        ZMSGOP.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER PNAME passed to ZDAOPN instead of
                        HOLLERITH ANAME
        ZMSGWR.FOR      restored MSGBUF argument to CHARACTER*80, then set
                        MSGTXT = MSGBUF instead if H2CHR on HOLLERITH
                        MSGBUF(20) (i.e., tried & true pre-overhaul technique)
                        and true pre-overhaul technique)
        ZMSGXP.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER PNAME passed to ZEXIS2 instead of
                        HOLLERITH ANAME
        ZOPEN.FOR       same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER PNAME passed to ZDAOPN instead of
                        HOLLERITH ANAME
        ZPUTCH.C        PUTBCKed then REMOVEd to force REMOVE via midnight jobs
                        on other Crays and to use $APLUNIX version instead
        ZR32RL.FOR      lots of unpacking as well as bitwise and'ing, or'ing
                        and shift'ing, but it vectorizes; no NaN detection
                        yet, but otherwise pretty well tested
        ZR64RL.FOR      version in a state of flux (not to be trusted)
        ZRENAM.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER OLDNAM and NEWNAM passed to ZRENA2
                        instead of HOLLERITH OLD and NEW
        ZSHCMD.C        same as $APLUNIX version except calls ISHELL (UNICOS
                        specific) instead of "system" to execute a shell
                        command
        ZTACT2.C        similar to $APLBELL version but checks for zombie'd
                        processes via "grep" on "ps" output to avoid false
                        positives
        ZTAP2.C         in a state of flux, but close to working
        ZTKILL.C        similar to $APLBELL version but checks for zombie'd
                        processes via "grep" on "ps" output to avoid false
                        positives
        ZTPCLD.C        $APLUNIX/ZDACL2.C hacked for pseudo tape (i.e.,
                        instead of $APLGEN/ZTPCLD.FOR because direct access
                        FORTRAN I/O under UNICOS 5.0.13 required COS-like
                        machinations); should probably be used by all UNIX
                        platforms
        ZTPMID.C        $APLUNIX/ZMI2.C hacked for pseudo tape (i.e.,
                        instead of $APLGEN/ZTPMID.FOR because direct access
                        FORTRAN I/O under UNICOS 5.0.13 required COS-like
                        machinations); should probably be used by all UNIX
                        platforms
        ZTPMIO.FOR      same as $APLGEN version except modified to call
                        C version of ZTPMID; should probably be used by all
                        UNIX platforms;
        ZTPOP2.C        same as $APLUNIX version except additional header
                        file sys/types.h required
        ZTPOPD.C        $APLUNIX/ZDAOPN.C hacked for pseudo tape (i.e.,
                        instead of $APLGEN/ZTPOPD.FOR because direct access
                        FORTRAN I/O under UNICOS 5.0.13 required COS-like
                        machinations); should probably be used by all UNIX
                        platforms
        ZTPOPN.FOR      same as $APLGEN version except call to CHR2H commented
                        out (4 characters/real won't work on 64-bit machines)
                        and CHARACTER MTNAM passed to ZDAOPN instead of
                        HOLLERITH ANAME
        ZTPWAD.C        $APLUNIX/ZWAI2.C hacked for pseudo tape (i.e.,
                        instead of $APLGEN/ZTPWAD.FOR because direct access
                        FORTRAN I/O under UNICOS 5.0.13 required COS-like
                        machinations); should probably be used by all UNIX
                        platforms
        ZTQSP2.C        same as $APLUNIX version except calls ISHELL (UNICOS
                        specific) instead of "system" to execute a shell
                        command
        ZTXMAT.FOR      same as $APLGEN version except local CHARACTER CNAMES
                        array passed to ZTXMA2 instead of HOLLERITH NAMES (4
                        characters/real won't work on 64-bit machines) then
                        call CHR2H in loop to convert NNAM CNAMES to NNAM NAMES
        ZVTVC2.C        same as $APLBERK version ($APLBERK not in Z-routine
                        search path)
        ZVTVC3.C        same as $APLBERK version ($APLBERK not in UNICOS
                        Z-routine search path)
        ZVTVGC.C        same as $APLBERK version ($APLBERK not in UNICOS
                        Z-routine search path)
        ZVTVO2.C        same as $APLBERK version ($APLBERK not in UNICOS
                        Z-routine search path); this routine may have
                        trouble getting its arguments correctly from ZVTVOP
        ZVTVO3.C        same as $APLBERK version ($APLBERK not in UNICOS
                        Z-routine search path)
        ZVTVX2.C        same as $APLBERK version ($APLBERK not in UNICOS
                        Z-routine search path)
        ZVTVX3.C        same as $APLBERK version ($APLBERK not in UNICOS
                        Z-routine search path)
        Changed in 15APR90 and 15OCT90 same date.

 5928.  April 8, 1990           Cray INCLUDE Files                      Kerry
        All new modules in $INCCRI:
        DAPC.INC        Declarations, dimensions, COMMON definitions and
                        EQUIVALENCE statements for the Cray 256K word
                        Pseudo-AP implementation (same as the old COS
                        version)
        ZVND.INC        Compiler directive to ignore apparent vector
                        dependency (same as old COS version)
        ZVD.INC         Compiler directive to force scalar compilation (same
                        as the old COS version)
        Changed in 15APR90 and 15OCT90 same date.

 5929.  April 8, 1990           Cray Q-routines                         Kerry
        All new modules in $QCRI.  These are the same as the old COS versions
        except dynamic memory management is disabled.  The former COS technique
        (CALL MEMORY) conflicts with UNIX memory management.
        QCFFT.FOR       QCLNSU.FOR      QINIT.FOR       QMAXV.FOR
        QMEMSZ.FOR      QMINV.FOR       QMULCL.FOR      QPHSRO.FOR
        QPTDIV.FOR      QRFFT.FOR       QRFT.FOR        QRLSE.FOR
        QXFOUR.FOR      QXXPTS.FOR
        Changed in 15APR90 and 15OCT90 same date.

 5930.  April 8, 1990           $SYSUNIX/AREAS                          Kerry
                                $SYSUNIX/CREADIR
        Changed to use $SYSAIPS/AREAS.DAT instead of $SYSUNIX/AREAS.DAT and
        removed $SYSUNIX/AREAS.DAT.
        Changed in 15APR90 and 15OCT90 same date.

 5931.  April 8, 1990           $SYSUNIX/AREASCSH.SED                   Kerry
                                $SYSUNIX/AREASSH.SED
        Added looping to avoid sed'iting matching patterns in comments.
        Changed in 15APR90 and 15OCT90 same date.

 5932.  April 8, 1990           $SYSUNIX/AREAS.CSH                      Kerry
                                $SYSUNIX/AREAS.SH
        As generated by $SYSUNIX/AREAS from $SYSAIPS/AREAS.DAT under UNIX.
        Area logicals for "local" directories should be defined in $SYSLOCAL
        versions of CDVER.CSH and CDVER.SH now.
        Changed in 15APR90 and 15OCT90 same date.

 5933.  April 8, 1990           $SYSUNIX/LIBR.DAT                       Kerry
                                $SYSALLN/LIBR.DAT
                                $SYSCRI/LIBR.DAT
                                $SYSNRAO1/LIBR.DAT
                                $SYSSUN/LIBR.DAT
        Commented better and eliminated references to the defunct areas
        $APLNUNIX, $QPGUNIX, $QYPGUNIX and $YPGUNIX.  Also changed $YVTVPGM
        references to new logical $YPGVDEV (i.e., new name for $YVTVPGM).
        Changed in 15APR90 and 15OCT90 same date.

 5934.  April 8, 1990           $SYSUNIX/CDVER.CSH                      Kerry
                                $SYSUNIX/CDVER.SH
        Added comments (formerly uncommented) and changed to use AREAS.CSH and
        and AREAS.SH (formerly used AREAS.CSH and AREAS.SH from $SYSLOCAL).
        Also changed changed the execution search path definition to search
        the current directory, $SYSLOCAL and $SYSUNIX before all others to
        avoid command name conflicts (e.g., CC the AIPS C compilation script
        versus CC the C++ translator commonly installed as a local system
        utility).  This is where "local" area logicals should be defined now
        (i.e., instead of $SYSLOCAL versions of AREAS.CSH and AREAS.SH).
        Changed in 15APR90 and 15OCT90 same date.

 5935.  April 8, 1990           $SYSNRAO1/CDVER.CSH                     Kerry
                                $SYSNRAO1/CDVER.SH
                                $SYSNRAO1/AREAS.CSH
                                $SYSNRAO1/AREAS.SH
        New files (same as $SYSUNIX versions since all local directories for
        NRAO1 are defined in $SYSAIPS/AREAS.DAT, thus $SYSUNIX/AREAS.CSH and
        $SYSUNIX/AREAS.SH).  Removed obsolete $SYSNRAO1/AREAS.CSH and
        $SYSNRAO1/AREAS.SH.
        Changed in 15APR90 and 15OCT90 same date.

 5936.  April 8, 1990           $SYSUNIX/ASSNLOCAL.SH                   Kerry
                                $SYSUNIX/ASSNLOCAL.CSH
        Eliminated obsolete $AIPSTTn logicals and NRAO1 specific specific
        logic involving graphics terminal logicals.  Added $LPRNTR logical.
        ASSNLOCAL.CSH is a new file used by LOGIN.CSH to define device
        logicals at login time.
        Changed/added in 15APR90 and 15OCT90 same date.

 5937.  April 8, 1990           $SYSNRAO1/ASSNLOCAL.CSH                 Kerry
                                $SYSNRAO1/ASSNLOCAL.SH
        Changed definition of device logical $DA00 from public scratch file
        system to file system for exclusive use by AIPS users.  Also, removed
        obsolete $DASSGN and $AIPSTTn environment variables.
        Changed/added in 15APR90 and 15OCT90 same date.

 5938.  April 8, 1990           $SYSUNIX/LOGIN.CSH                      Kerry
                                $SYSUNIX/LOGIN.SH
        Changed execution search path definition to search the current working
        directory, $SYSLOCAL and $SYSUNIX before all others to avoid command
        name conflicts (e.g., CC).  Also changed definitions of $CDOLD, $CDNEW
        and $CDTST to use CDVER.CSH and CDVER.SH from $SYSLOCAL (formerly they
        used CDVER.CSH and $CDVER.SH from $SYSUNIX). Also added "source
        $SYSLOCAL/ASSNLOCAL.CSH" and ". $SYSLOCAL/ASSNLOCAL.SH" to define
        device logicals at login time.
        Changed in 15APR90 and 15OCT90 same date.

 5939.  April 8, 1990           $SYSUNIX/AIPS                           Kerry
                                $SYSNRAO/AIPS
                                $SYSSUN/AIPS
                                $SYSUNIX/BATER
                                $SYSNRAO1/DACK
                                $SYSNRAO1/DRUN
                                $SYSUNIX/RUN
                                $SYSNRAO1/SPACE
        Removed ". $SYSLOCAL/ASSNLOCAL.SH".  Device logicals are established at
        login time now (see LOGIN.CSH and LOGIN.SH entries).  Also changed the
        execution search path definition to search the current directory,
        $SYSLOCAL and $SYSUNIX before all others in order to avoid command
        name conflicts (e.g., CC).
        Changed in 15APR90 and 15OCT90 same date.

 5940.  April 8, 1990           $SYSUNIX/COMRPL                         Kerry
        Added protection against use on programs which royally screws up
        object libraries and therefore, installations.
        Changed in 15APR90 and 15OCT90 same date.

 5941.  April 8, 1990           $SYSUNIX/SEARCH                         Kerry
        Fixed to correctly remove temporary files and corrected error return
        code.
        Changed in 15APR90 and 15OCT90 same date.

 5942.  April 8, 1990           $SYSALLN/ASSNLOCAL.SH                   Kerry
        Removed.
        Removed from 15APR90 and 15OCT90 same date.

 5943.  April 8, 1990           $SYSCRI/FCOPTS.SH                       Kerry
        Changed to select static allocation of variables (i.e., like an
        implicit SAVE statement for each variable).  Default is "stack" on
        all but Cray Y-MP and Cray X-MP EA systems.
        Changed in 15APR90 and 15OCT90 same date.

 5944.  April 8, 1990           $SYSNRAO1/ASOPTS.SH                     Kerry
                                $SYSNRAO1/CCOPTS.SH
                                $SYSNRAO1/FCOPTS.SH
                                $SYSNRAO1/LDOPTS.SH
        Changed default action to purge preprocessor output (ASOPTS.SH,
        CCOPTS.SH, FCOPTS.SH).  Changed default C and FORTRAN compilation
        options (CCOPTS.SH, FCOPTS.SH).  Changed FORTRAN compiler command
        from "oldfc" to "fc" (FCOPTS.SH, LDOPTS.SH).  Made $OPT2 optimization
        option "-O2 -ngr" to avoid Convex global register optimization
        compiler bug (FCOPTS.SH).
        Changed in 15APR90 and 15OCT90 same date.

 5945.  April 8, 1990           $SYSCVEX/OPT2.LIS                       Kerry
                                $SYSNRAO1/OPT2.LIS
        Added new Q-routines to list of modules to be compiled at optimization
        level "-O2".
        Changed in 15APR90 and 15OCT90 same date.

 5946.  April 8, 1990           $SYSNRAO1/SPACE.FOR                     Kerry
        Changed to call EXIT (0) instead of STOP to avoid "at" job error mail.
        Changed in 15APR90 and 15OCT90 same date.

 5947.  April 8, 1990           $SYSNRAO1/ZLPCL2                        Kerry
        Changed to use anonymous ftp for spooling printer files to the CVAX
        Versatec.
        Changed in 15APR90 and 15OCT90 same date.

 5948.  April 8, 1990           $SYSSUN/SSS.TXT                         Kerry
        Changed text referencing ASSNLOCAL.SH to ASSNLOCAL.*.
        Changed in 15APR90 and 15OCT90 same date.

 5949.  April 10, 1990          $APLUNIX/ZPRI2.C                        Kerry
                                $APLBERK/ZPRI2.C
        The hard-coded value for the lowering of batch job execution priority
        was far too severe (10 on a scale of 0-20).  Changed it to "0" (same
        as interactive), however, to take effect, each task executable must
        be regenerated.  Execution priorities should really be system
        parameters (i.e., set using SETPAR and based on POPS #).
        Changed in 15JUL90 same date.

 5950.  April 11, 1990          $APLCRI/ZILI16.FOR                      Kerry
                                $APLCRI/ZCREAT.FOR
        Screwed up insertion of user agreement in ZILI16.FOR
        Screwed up merging of changes to $APLGEN version in ZCREAT.FOR
        Changed in 15OCT90 and patched 15APR90 UNIX distribution tape same
        date.

 5951.  April 13, 1990          MX                                 glen
        Uniform check for max frequency channel greater than min.
        Forces DFT subtraction if UV data is not X* sorted.
        Moved from 15OCT90 yesterday.

 5952.  April 13, 1990          $QCRI/QCFFT.FOR                         Kerry
        Screwed up insertion of user agreement.
        Changed in 15APR90 and 15OCT90 same date and patched UNIX distribution
        tape.

 5953.  April 16, 1990      IMCREA                        Bill C.
        The rotation on the sky was not being written to the catalog
        header for beams, an undefined (usually 0) value was.
        Moved from 15OCT90 this date.

 5954.  April 16, 1990        QNOT:MAKMAP                     Bill C.
           MAKMAP was depending on GRDAT to set the necessary gridding
        parameters.  This did not work when the uv data had been
        rotated.  Now NGRDAT is set to .TRUE. and the gridding
        parameters are explicitly set.  This caused HORUS to incorrectly
        shify rotated data.
           The IF frequency offsets were being applied twice.  Changed
        the call to CHNCOP to calls to CHNDAT and the frequency offsets
        are refered to BIF.  This error caused HORUS to use incorrect
        frequencies for scaling u, v and w from the reference frequency
        to the actual frequency and thus give a misscaled image.
        Moved from 15OCT90 this date.

 5955.  April 18, 1990           XVSS                     Chris
        A number of miscellaneous changes prior to the release of the
        beta test version.
        - Added a makefile (accidentally missed from the original
        check-in).
        - Corrected bad C code: get_client was declared static in
          WINDOW.C and sock_io was declared static in SOCKET.C. This
          should have caused the Sun loader to fall over but was found
          while porting XVSS to the DECstation 3100.
        - Now expands TVDEV to TVDEVn and then expands TVDEVn to find
          the device name (no longer fixed to TVDEV1).
        - Now assumes any device name containing a colon is of the form
          <service>:<machine> (no longer fixed to XVSSIN).
        - Function keys F2 and F7 are now accelerators for the resize
          operation.
        - Added code to prevent the apparent function key ``bounce''.
        - Added network byte order macros to S
OCKXF for byte-swap
          architectures (eg. DECstations). The transmission is already
          in network byte order since ZSSSXF calls ZILI16 to pack
          the short integers into the buffer.
        Files affected are:
          CURSOR.C in YXTV
          MAKEFILE in YXTV
          SOCKET.C in YXTV
          SOCKXF.C in YXTV
          WINDOW.C in YXTV
        Moved from 15OCT90 this date.

 5956.  April 19, 1990              MX                      Bill C.
        Fixed problem with making the output file too large if frequency
        channels were being averaged or the channel increment was larger
        than 1.  If the number of channels being averaged equals the
        total number of channels used then bandwidth synthesis is
        assumed and the number of output channel images is assumed to be
        1.  Also fixed logic error which caused the dirty image to be
        made twice if no CLEANing was to be done.
        Moved from 15OCT90 this date.

 5957.  April 23, 1990             PRTAB                       Eric
        Corrected excess widths for floating columns, put in tests to
        set widths more sensibly, including reading the full file to
        see how many digits are really required for the integer
        columns.
        Moved from Oz and from 15OCT90 this date.

 5958.  April 23, 1990             SNPLT                     Eric
        Corrected an error --- when PIXRANGE was specified, SNPLT did
        not count the number of plots correctly and hence did not end
        the last one properly.  Changed it to be smarter about phase
        so that plots around +180 and -180 come out on a useful scale.
        Also changed the SUM amplitudes to be self-scaling or scaled
        by PIXRANG while SUM phases are self-scaling.  Inserted CV
        changes allowing proper handling of IFs when summing (March 4
        change).
        Moved from Oz and from 15OCT90 this date.

 5959.  April 23, 1990      APLSUB:ALLTAB                Bill C.
        This routine was checking to see if version 1 of a given table
        type existed and if not then it didn't copy any of that table
        type.  Now an existance test is done for each version of each
        table and a table is copied to the same version number as the
        input file.  This problem was most noticible in TASAV when SN
        tables were not copied.
        Moved from 15OCT90 this date.

 5960.  April 23, 1990        SUBIM                     Bill C.
        Modified to call KEYCOP to copy catalog header keywords.
        Moved from 15OCT90 this date.

 5961.  April 24, 1990         Remote TVs                    Chris
        Added the following documents (in LaTeX format) to DOCTXT.
        Both are preliminary versions.
        TVINSTALL.TEX -- installation notes for TVMON, SSS and XVSS
        (designed to supplement the Unix installation guide).
        XVSSUSER.TEX -- user notes for XVSS under OPEN LOOK.
        Moved from 15OCT90 this date.

 5962.  May 1, 1990            ZFIO, ZMIO                     Bill C.
        The Convex compiler when using -O0 optimization level was
        generating bad code which caused erratic and sometimes obscure
        problems.  It was modified to reduce the number of go to
        statments but the compiler bug appears to be associated with
        having a local variable which is computed and then used only as
        the subscript of an array argument of a subroutine call.  Both
        of these routines shared this problem.  These problems could
        have affected all AIPS tasks to some degree.
        Moved from 15OCT90 this date.

 5963.  May 1, 1990        OPT2.LIS                         Bill C.
        Removed CALIB from the lists of routines to compile with level
        -O2 on Convexs in SYSCVEX, SYSNRAO1, SYSVLAC1.  The current
        compiler used at NRAO incorrectly compiles CALIB at this level.
        Moved from 15OCT90 this date.

 5964.  May 3, 1990           FITTP                          Phil
        When a uv file had an associated FQ table with only one row,
        FITTP translated this to a CH table, deleted the FQ table
        (which caused no harm) and wrote the file. This behaviour
        was causing considerable alarm to some users, so I have
        modified FITTP to translate the FQ table to a CH, write the
        CH table then delete it, leaving the uv-file in its original
        state. The FQ table is only written if it has multiple rows.
        Moved from 15OCT90 this date.

 5965.  May 7, 1990                SETJY                 Phil
        Modified to cope correctly with lower sideband data, it was
        missing the sign of the sideband from one key statement.
        Moved from 15OCT90 this date.

 5966.  May 11, 1990           TVFLG, SPFLG                Eric
        Corrected 3 bugs which occurred in both tasks: The UV input file
        was read from visibility 2 through NVIS+1 in both the initial
        routine which listed the times and in the routine which applied
        the flags to single-source files.  This could cause an apparent
        error in the time sequencing.  The subroutine SOUFIL changes
        the list of sources, removing any minus signs.  Since SOUFIL
        is needed for the time determination and then again for the
        calibration package, the times were found for all sources
        not in the list and then used for all sources in the list
        whenever an initial minus sign occurred in the source list.
        Corrected by restoring the list to its initial form after the
        first call to SOUFIL.
        Moved from Oz, should go to 15JUL90 and 15OCT90.

 5967.  May 15, 1990            XVSS                    Chris
        Corrected handling of zoom and scroll while image planes
        were turned off in SCRWRT.C (migrated Eric's change from SSS).
        Plugged a hole in the error checking in SOCKET.C that caused
        XVSS to crash with no error message if TVDEV was not defined.
        Changed WINDOW.C and CURSOR.C to use ACTION_SELECT events
        rather than explicit MS_LEFT events in case the mouse keys
        have been rebound for left-handed users.
        Moved from 15OCT90 this date.

 5968.  May 16, 1990                PRTAB                 Phil
        Corrected a typo in the new subroutine PRTSCL, which was
        looping from I to NCOL instead of 1 to NCOL when determining
        the starting position of the data in the output string.
        Moved from 15OCT90 this date.

 5969.  May 16, 1990               IMLOD                  Bill J.
        Fixed error in handling of value of keyword/number pair in
        IMPARS.  GETNUM returns DBLANK as value if it can't be
        interpreted correctly. This in turn was being assigned to an
        R*4 in some cases with obvious results.
        Moved from 15OCT90 this date.

 5970.  May 22, 1990             SNSMO                      Chris
        Changed modes of operation so that phase is smoothed using a
        scalar average rather than deriving the smoothed phase from the
        smoothed sine and cosine components.  Also restructured the code
        to make the flow of control more obvious, added some new error
        messages and forced reading of the SN table column numbers from
        the SN table. Also changed the help/explain file for CLCAL,
        which is the principal client of SNSMO, to reflect the changes.
        Moved from 15OCT90 this date.

 5971.  May 22, 1990                    SNSMO            Phil
        SNSMO was always assuming that SN tables had entries for 2
        polzns, this is not always true and so FNDCOL was failing
        looking for the absent entries. Fixed so that the number
        of columns searched for in FNDCOL is dependant on the number
        of polzns present.
        Moved from 15OCT90 this date by Chris.

 5972.  May 22, 1990               SLCTD                    Chris
        New routine to determine whether a given source, calibrator
        source or antenna is in the set of sources, calibrator sources
        or antennae selected by the user.
        Moved from 15OCT90 this date.

 5973.  May 22, 1990              CLCAL                    Chris
        CLCAL now only smoothes calibration data from the requested
        calibration sources (as expected) when using boxcar smoothing
        rather than smoothing calibration data from all sources within
        the boxcar interval. SNSMO in APLNOT now takes additional
        arguments to specify the requested calibration sources. CLUPDA
        in APLNOT (the only routine which calls SNSMO) has been modified
        to provide SNSMO with the required list of calibration sources.
        Moved from 15OCT90 this date.

 5974.  May 24, 1990                   FILLM            Gareth
        The following two fixes made in 15OCT90 have now been copied to
        to 15JUL90.
        April 20, 1990 update in 15OCT90:
        FLMIN now checks to see that a REFDATE, if given, has the
        correct syntax.  Blank is used if not.
        Short integrations are now correctly handled.  There was some
        confusion about the IAT for geometry calculations and the IAT
        time stamp.  The IAT time stamp is now used everywhere for
        determining whether a new integration, new scan, or new catalog
        entry is needed.
        The day number was not being incremented in MCWANT.  This led to
        the program terminating at midnight if the stop time was
        specified and was on the same day as the start time!
        May 18, 1990 update in 15OCT90:
        I believe that the FQ entry selection in FLMFQ been causing
        unpredictable behavior with and without optimization, with and
        without the debugger on the Convex C1.  I have therefore recoded
        the FQ entry selection loop in a manner that makes in easier for
        compilers to do local optimization (e.g. Convex -O0).  Maybe
        this will solve some of the FQ table entry problems.  Fixed a
        bug in FLMCLS which did not store the current FQ ID, but the
        previous one, for the last scan - only a problem when the FQ ID
        had changed from the previous scan.
        Moved from 15OCT90 this date.

 5975.  May 30, 1990              FILLM                    Gareth
        May 24, 1990 update in 15OCT90:
        The auto-correlation values are now stored in the Channel 0
        multi-source file.  This is so that BPASS will find the same
        number of visibilities in channel 0 as in the line data.  This
        is not done for continuum data.
        Moved from 15OCT90 this date.

 5976.  May 30, 1990                         MAKMAP          Phil
        There was a typo in the call sequence to CHNDAT, a 'read'
        should have been a 'write', I have no idea why this has
        never bothered us before. Although I have a vague memory
        of fixing this.
        Moved from 15OCT90 this date.

 5977.  May 31, 1990              $AIPGUNIX/ZSTRTA                    Kerry
        A WRITE statement had an I/O list but the corresponding FORMAT
        statement had no format specifiers, which caused problems under
        UNICOS.  Eliminated the I/O list since the info was hard-coded in
        the FORMAT statement.
        Changed in 15OCT90 same date.

 5978.  June 1, 1990               DDTLOAD                 Glen
        Added DOUVCOMP=FALSE to Tape read procedure so that UVDIF
        will work correctly.
        Moved from 15OCT90 this date

 5979.  June 4, 1990                UVMDIV                Phil
        Source code was different on cvax and chucca. Cvax was correct.
        Prodded the code and conrpl'd uvmdiv, then comlnked everything
        that used it. This fix was missed by the midnight job on March
        15.
        Moved to 15JUL90 this date.

 5980.  June 7, 1990                 BPASET                     Phil
        When antennas were deselected by the user the logic in
        BPASET was wrong so that only the deselected antennas
        were used. Fixed.
        Moved from 15OCT90 this date.

 5981. 	June 7, 1990               APLNOT:SNSMO.FOR          Bill J.
       	An error occured if SNSMO had already reached the end of the table
       	but there were still antennas to loop over. Added trap to test
       	for this.
        Moved from 15OCT90 this date.

 5982.  June 8, 1990                    ADDIF                Phil
        ADDIF was missing the H2CHR calls to translate the name and
        class of the input data set. Another relic of the overhaul.
        Moved to 15JUL90 this year.

 5983.  June 12, 1990              AIPSHELP.HLP               Bill J.
        Versions in TST = 15OCT90 and NEW = 15JUL90 were not the same
        --- NEW was outdated.  This caused complaints from local NRAO
        users.  All three versions should be identical.
        Moved from 15OCT90 this date.

 5984.  June 12, 1990               PCAL                  Chris
        Fixed a conceptual error in the handling of ionspheric
        corrections that led to array bounds violations if there were
        more than 10000 pre-averaged visibility points.  It also led to
        errors in applying the ionspheric Faraday rotation correction
        that would have caused subtle errors in the calculated
        polarizations if ionospheric Faraday corrections were applied.
        Ionospheric rotation data is now stored in a scratch file rather
        than an array.
        Moved from 15OCT90 this date.

 5985.  June 13, 1990         Call to TABKEY              Chris
        TABKEY was being called to read or write keywords with character
        values without converting the value argument to or from
        Hollerith in a number of places. This would cause problems under
        VAX/VMS but would not have been noticed on most (if not all)
        UNIX systems. Fixed in UVFIT, GETANT and PCAL, which appear to
        be the only routines with defective calls.
        Moved from 15OCT90 this date.

 5986.  June 13, 1990                POSSM                      Phil
        Added the DOPOL adverb to POSSM and POSSM.HLP.
        Moved from 15OCT90 this date.

 5987.  June 13, 1990               PRTTP                    Bill J.
        As part of test to see whether tape is Modcomp archive tape
        or not, the number of antennas in the array had to be
        greater than 1.  This is inappropriate for a single dish
        subarray for VLBI.
        Moved from 15OCT90 this date.

 5988.  June 13, 1990               HORUS.HLP               Bill J.
        The default for OPTYPE was not explained.  In fact, OPTYPE
        = '    ' defaults to OPTYPE = 'LINE';  this caused some grief
        to continuum users since OPTYPE = 'LINE' uses ONE IF only/
        Moved from 15OCT90 this date.

 5989.  June 14, 1990        NULL pointers            Chris
        ZSSSOP2.C (APLBERK) and ZVTVO2.C and ZVTVO3.C (APLBERK and
        APLCRI) were erroneously copying a null terminated string from
        the location returned by getenv() and comparing it against the
        string "(NULL)" to test for errors.  This would cause programs
        to crash with segmentation violations or bus errors if the
        appropriate logical names were undefined or had inappropriate
        contents.  All now correctly check the value returned by
        getenv() against NULL.  In addition all now report an error and
        abort if an Internet host is not specified or has a malformed
        name rather than trying to connect to lynx.toronto.edu.  Also
        added function declarations for getenv(), index() and strncpy(),
        removed unused local variables and fixed some dubious casts.
        These modules now lint cleanly, apart from ignored return
        values, on Suns and Convexes.
        Moved from 15OCT90 this date.

 5990.  June 14, 1990              ZFRE2                  Chris
        Fixed a bad sprintf() format string that caused disk numbers
        greater than 10 to be translated to lower case hex digits in
        DA0n logical names. Fixed in APLMASC, APLCRI, APLSUN and
        APLUNIX.
        Moved from 15OCT90 this date.

 5991.  June 15, 1990               CVEL                    Phil
        Major overhaul. Now deals with FQ tables, the catblk handling
        was modified - this removed two problems, the first was that
        compressed data could not be handled correctly, secondly the
        HI file was not copied from the input to the output file.
        Fixed numerous other little bugs along the way.
        Moved from 15OCT90 this date.

 5992.  June 16, 1990              FILLM                   Bill J.
        Subroutine MCWANT called ZBYMOV to translate the date.  This
        is inappropriate for VAXes --- needs a call to ZI32IL instead.
        Symptoms of failure on VAX were formatting errors (in diagnostic
        messages) and a failure to find any valid data.  Tested out the
        repaired code on BOTH VAX and Convex.
        Moved form 15OCT90 this date.


