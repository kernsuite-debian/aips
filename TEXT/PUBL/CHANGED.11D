;-----------------------------------------------------------------------
;  Copyright (C) 2010-2012
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in SOCORRO.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


***********************************************************************
***********************************************************************

                 Changes while 31DEC11 is TST

***********************************************************************
***********************************************************************

13339.  December 1, 2010           Code rollover           Eric
        Changed:
        PUVD.INC 32768 -> 65536  for MAXCIF, MAXCHA
                 5000  -> 25000  for XCTBSZ
        PMAD.INC 32768 -> 65536  for MAXIMG
        ZPBUFSZ  32768 -> 65536, 6*256 -> 12*256
        QRFFT    8192 -> MAXIMG/4
        QXFOUR   32768 -> MAXIMG, 8192 -> MAXIMG/4
        APLSUB   GETRLS.FOR    31DEC10 -> 31DEC11
        INSUNIX  INSTEP1       31DEC11
        SYSPERL  install.pl    31DEC11
        SYSPERL  update.pl     31DEC11
        SYSPERL  ZXHLP2.PL     31DEC11
        SYSPERL  LaCook.PL     31DEC11
        UPDUNIX  UPDCONTROL    31DEC11
        SYSUNIX  AIPSPATH.CSH  31DEC11
        SYSUNIX  AIPSPATH.SH   31DEC11
        Moved nowhere.

13340.  December 1, 2010             RMSD                      Eric
        The MACPPC compiler cannot handle a parameter that involves >
        1 math operation.  Thus PARAMETER (A = B*B/32) does not work
        whilst PARAMETER (A = (B)*(B/32)) does.
        Moved to 31DEC10 this date.

13341.  December 3, 2010          VLA.GAINS             Eric
        The last Q band data added had a last good date of 20110101
        while the last good date for other bands is 21000101.  Fixed
        the Q band date since we have no new/better info.
        Moved nowhere - goes to all versions automatically.

13342.  December 3, 2010            VBGLU               Eric
        Changed:
        1. Compatibility tests to say what is incompatible
        2. Sort order tests to allow 'Tx' to match 'Ty'
        3. HI writing to write up to 4 input file names
        Moved nowhere - could go to 10.

13343.  December 3, 2010            UVFLG              Eric
        Test for EIF > 0 but EIF < BIF and also BCHAN, ECHAN -
        treat as error.
        Moved nowhere.

13344.  December 3, 2010           TIORD               Eric
        Added test on baseline order.  Also help file.
        Moved nowhere.

13345.  December 3, 2010           SNEDT                 Eric
        A badly type If statement caused a computation of difference
        values with EDIFSY (for SY tables) when SHOW ALSO RATE was
        selected in editing SN tables (and probably in editing UV
        data).  Fixed it to do only SY there in QEDIUTIL.
        Moved to 31DEC10 this date.

13346.  December 6, 2010            IMAGR                 Eric
        Made a change to the formula for FACTOR used with the
        multi-scale options.  The old formula could blow up and so
        would have been hard to use.  Changed IMAGR.HLP and QCLEAN.
        Moved nowhere.

13347.  December 6, 2010            LISTR, ANFIND         Eric
        LISTR set 2 READ statuses when OPTYPE not recognized.  This
        messes up ANREFM which clears one only.  Changed ANFIND to
        recognize SAO SMA array.
        Moved to 31DEC10 this date.

13348.  December 7, 2010            SNPLT                Leonia
        Add print (at the plot header) the ploting tone number,
        if the table is PC.
        Moved nowhere.

13349.  December 7, 2010    VLAPROCS, VLATECR            aMY
        Added a message to VLATECR about the possibilty of the download
        failing if the VLA project is too recent.
        Moved to 31DEC10 Dec 8.

13350.  December 8, 2010          FITLD                Eric
        FITLD had trouble with a FITS IDI table that expressed a
        logical variable as a character-string valued variable.
        Changed GETLG to ignore an open quote mark but then require
        the value to follow immediately.
        Moved to 31DEC10 this date.

13351.  December 8, 2010     NORMALIZ gain               Eric
        Changed POPSDAT, NEWPARMS to add adverb NORMALIZ.  It replaces
        CPARM(2) in CALIB to control gain normalization.  Added it to
        CLSMO and SNSMO to forbid, allow, or require global gain
        normalization after smoothing.  Previously, these too did a
        global normalization if the previous table had a non-1.0
        normalization only ("allow" in above terms).
        Changed LISTR to apply the global normalization to lists of
        gains.
        Moved nowhere, LISTR change moved to 31DEC10 January 3, 2011.

13352.  December 9, 2010         TVFLG                    Eric
        Added option LOAD NEXT CH/IF/ST which increments the spectral
        channel and reloads the TV.  If spectral channel exceeds the
        max, it is reset to BCHAN and the IF is incremented.  If the
        IF exceeds the maximum, it is set to BIF and the polarization
        is switched possibly with a Stokes flag change.  Corrected the
        help file and HLPTVFLG.HLP, the run-time help file.
        Moved to 31DEC10 this date.

13353.  December 13, 2010            TYSMO               Eric
        All other SY tasks changed to use Tsys rather than Tsys/Tcal
        so I changed this task too.  In so doing, I found a number of
        issues with the handling of SY clipping - mostly because TY
        has only one real column and SY has tow columns and a
        combination and all are related to each other.  These include
        (1) clipping Pdif and Psum before using them to compute Tsys,
        (2) blanking Pdif, Psum, Tsys if Pdif <= 0 or Psum < Pdif or
            either Psum of Pdif blanked (e.g. by clipping)
        (3) blanking Pdif and Psum if Tsys outside range allowed
        (4) rearrange logic in testing result after MWF smoothing
        Moved to 31DEC10 December 10.

13354.  December 13, 2010           TYSMO                 Eric
        Added FLAGVER adverb and subroutine to apply FG tables to TY
        or SY data.  This does the flagging before the clipping and
        smoothing operations, removing known bad periods before these
        other operations.  Flags that depend on baseline rather than
        antenna or that depend on spectral channel are ignored.
        Moved nowhere.

13355.  December 15, 2010     CookBook                 Eric
        Updated:
        4   Added LOAD NEXT to TVFLG section Put in a modern TVFLG
            figure.
        E   Corrected SY section - Tsys rather than Tsys/Tcal is now
            used by SNEDT, EDITA, SNPLT, TYSMO.  Added remarks about
            applying the FG table with SNEDT (in 31DEC10) or TYSMO (in
            31DEC11).
        All - changed the figure inclusion macro to specify the size
        of the figures (for html jpeg usage) and changed chapters
        0,1,4,5,6,7,8,9,10,A,D,E to use the macro.  Note that the pdf
        macro package does not specify the size (when one does the
        correct size is allocated but no picture appears).
        Moved nowhere.

13356.  December 16, 2010         TVFLG                    Eric
        Changed option LOAD NEXT CH/IF/ST to LOAD NEXT IF/ST since
        LOAD NEXT CHAN is already there.  Now it increments IF only
        and when that rolls over swaps the polariztion.  Also changed
        the spacing of the bottom messages and added code to make the
        image start just above the bottom status lines (plus wedge and
        wedge label) if it is small enough.  Corrected the TVFLG help
        file and HLPTVFLG.HLP, the run-time help file.
        Made the spacing changes to SPFLG as well.
        Moved nowhere.

13357.  December 16, 2010             SOUSP                Eric
        Added CALCODE to the adverbs so that identical SOURCE/QUAL
        entries in the SU table may be differentiated.
        Moved to 31DEC10 on 28 Dec.

13358.  December 16, 2010             REWGT               Eric
        NEW TASK: version of REAMP that scales weights only.
        Moved nowhere.

13359.  December 22, 2010      TVFLG, SPFLG           Eric
        The change made Dec 16 to move the grey-scale down the screen
        meant that the center of the screen might have no image.  The
        catalog header reads assumed that it would always have one.
        Added parameter YCENTR to tell where to make the catalog reads
        and had the TV loading set YCENTR.
        Moved nowhere - bug not in 31DEC10.

13360.  December 22, 2010          TRANS                Eric
        The new TRAROW algorithm to figure out number of planes did
        not take into account the fact the images have an integer
        number of rows per disk block or an inetegr number of disk
        blocks per row.  Thus if NX = 401, the actual space used is as
        if NX = 512.  So it thought it could do more than it could and
        aborted.
        Moved to 31DEC10 this date.

13361.  December 24, 2010          CALIB                Eric
        The subroutine that applied gain normalization to the SN table
        on an IF/polarization dependent basis messed up by trying to
        use the same buffer for read and write.  Switched to 2 LUNs
        and buffers with TABSN and it still did not work.  Changed to
        straight TABIBI and TABIO and that does work.
        Moved GMODIT routine to 31DEC10 this date.

13362.  December 27, 2010           SPLIT                 Eric
        Copied the PD tables - should not do that.
        Moved nowhere.

13363.  December 27, 2010           UVFLG                 Eric
        Add adverbs QUAL and CALCODE which modify SOURCES except when
        UFLG and SOURCES='-'.  They even modify the flags read in from
        INTEXT files.
        moved nowhere.

13364.  December 27, 2010       EDITA, EDITR, SNEDT       Eric
        Changed NEXT CORRELATOR to NEXT POL/IF since users did not
        know what I mean by correlator.  Includes help files and
        7 real time help files.
        Moved nowhere.

13365.  December 27, 2010             RSPEC               Eric
        Added option to write out a signal-to-noise image.
        Moved nowhere.

13366.  December 28, 2010            SOUSP               Eric
        SOUSP did not check for fluxes <= 0 in some IFs.  This led to
        NaNs and so I fixed it.
        Moved to 31DEC10 this date.

13367.  December 29, 2010           DBCON                Eric
        Added messages on appending tables and added SY table to list
        of those appended.
        Moved to 31DEC10 this date.

13368.  December 29, 2010        SNEDT, EDITA            Eric
        Plot scaling for SY tables was affected by an error in the
        coding.  Moved the minimum plot scaling values to a larger
        array and set them in the individual data type main routines
        in QEDIUTIL.  This means the e-13 scaling for rates is not
        affecting Pdif/<Pdif>, etc.
        Moved to 31DEC10 this date.

13369.  December 29, 2010          DBCON                  Eric
        Changed it to copy and append SN tables also.  Changed it to
        do all versions of tables in appending with a warning.  Thus
        vers 2 in file 2 is appended to vers 2 in file 1, vers 3 in
        file 2 is appended to vers 3 in file 1, etc.
        Moved nowhere - do not move this one.

13370.  December 30, 2010         AIPSLetter             Eric
        Put back LET10B in TEX, PS, PDF in $AIPSPUBL.
        Moved nowhere.

13371.  December 30, 2010          PCAL                  Eric
        The task kept track of source numbers as SID(source#)=cal# but
        then used SID in a form that should have been
        CID(cal#)=source#.  Added the alternative list so that
        internal use and use with the CP table would work.  CP table
        ended up with wrong values for source number.
        Moved to 31DEC10 this date.

13372.  December 30, 2010           RLDIF                 Eric
        The corection to the PD table used the same sign when
        correcting the R and L sides.  The hermitian should be used
        for L polarization.
        Moved to 31DEC10 this date.

13373.  December 31, 2010            DBCON                Eric
        Added calls to make an index table on the fly and dropped the
        initial suggestion to use INDXR afterwards.  Added CALCODE to
        the tests of how to renumber sources - it was losing some of
        the distinctions that the EVLA has put in.
        Moved CALCODE correction to 31DEC10 this date, not NX one.

13374.  December 31, 2010               ELINT             Eric
        With large numbers pf sources and large numbers of IFs, the
        limit of 1000 for history cards could be exceeded perhaps.
        Changed code to allow 2000 and to test for the limit before
        adding more history cards.
        Moved nowhere.

13375.  December 31, 2010             RLDLY                Eric
        An array was dimensions MAXANT and was used as if MXBASE which
        walked on things.  Fixed it - why did it seem to work?
        Moved to 31DEC10 this date.

13376.  January 3, 2011              LISTR                Eric
        The GAIN listing applied any gain renormalization prior to
        testing for magic blank.  That made magic blanks not be magic
        and so messed up the listing.
        Moved to 31DEC10 this date.

13377.  January 4, 2011          SY2TY                  Eric
        Created new task to do the Tsys computation from an EVLA SY
        plus CD table, writing a TY table.  These may be useful for
        diagnostics but will not help in calibrating the EVLA.  The
        raw "visibilities" from the BDF are not even normalized
        correlation coefficients so the gain calibration is not a
        scaling by Tsys.
        Moved nowhere.

13378.  January 5, 2011             UVFND               Eric
        Added adverbs QUAL, CALCODE, ANTENNAS, BASELINE to limit which
        data are tested.
        Moved nowhere.

13379.  January 5, 2011            AIPS                  Eric
        Updated Copyleft in AIPS.FOR.
        Moved nowhere.

13380.  January 6, 2011            RLDLY                Eric
        Found an error handling the DOIFS=2 option and probably also
        the DOIFS=1 method.  There was a loop over antennas that
        should not have been run when spreading the results into all
        of the IFs except for 1 antenna each time.
        Moved to 31DEC10 this date.

13381.  January 6-7, 2011         LaCookE                 Eric
        It did not describe RLDLY correctly - CLCAL is not required
        after running it.  PCAL no longer needs to be run after RLDIF
        which now correctes the PD table properly.
        Moved nowhere.

13382.  January 7, 2011           FRING                 Eric
        1. FRQTAB needs to do all frequency computation in double
        precision.  With a small increment and large center frequency
        the resulting list was not accurate enough for FRING.
        2. FRING failed to test after QINIT that it got all the memory
        it wanted.  Added tests and messages about SETMAXAP.
        Moved to patch January 21.

13383.  January 7, 2011             CALIB               Eric
        Changed CPARM(2) to signal a desire for a median rather than a
        mean gain modulus to be used in normalizing the gains.  Our
        new median routine is rather fast so, although this forces a
        further read of the SN table, it may be preferable to avoid
        really bad solutions from dragging the mean away from a
        desirable value.
        Moved nowhere.

13384.  January 18, 2011       TABINI, DBCON             Eric
        Changed TABINI to make NREC an in/out variable.  If 0 on
        write, it will be reset to 100.  This defends against bad
        values in BUFFER(42), the amount by which to expand the file.
        Changed DBCON to set NREC which should defend it against
        bad BUFFER(42) values.
        Moved DBCON NREC value only to patch this date.

13385.  January 18, 2011            UVCOP                Eric
        Used only the first 12 of the 16 characters of the source
        names.  EVLA tends to be profligate so this no longer works.
        Moved to patch this date.

13386.  January 18, 2011         CALIB                 Eric
        The header for the output file was not previously prepared by
        UVGET although the data for the file were.  This made it
        possible for a FREQID random parameter to appear in the output
        file with completely uninitialized values.  Changed the file
        creation to call UVGET and then modify the header as needed to
        put back compression if the output was to be compressed.
        Moved to patch 24 January.

13387.  January 18, 2011          POSSM                Eric
        POSSM neglected the fact that IFs have different frequencies
        when applying the SHIFT adverb.  Moved the CHNDAT call to the
        INIT routine and fixed the shift frequency computation.
        Moved nowhere.

13388.  January 18, 2011          RLDIF                Eric
        1. Add CALIN as a text file containing the Q/U spectrum of the
        calibration source(s).
        2. Improve help file description of the task - it was
        obsolete.
        3. Changed handling of blanked channels to use magic blanks
        and check for them etc.  Should be more reliable.
        4. Improved interpolation methods for the channels with no
        solution.
        5. Found that the one-source, continuum method in which the
        SU, AN, and CL tables are corrected did not work.  Required
        repairs to the addressing.  This fix should go to patch.
        Moved 2,5 to patch 24 January.

13389.  January 18, 2011        RLDLY                  Eric
        1. Convert RMS computation to use double precision.
        2. Change it to copy the GAINUSE CL table rather than the
        highest numbered one.
        2. Added a phase correction which will line up the phases in
        some cases (when IFs solved separately or when they have not
        been given IF-dependent R-L differences by CALIB et al.).
        Moved nowhere.

13390.  January 18, 2011          PCAL                 Eric
        1. Made sure the calibration polarization array is initialized
        to zero.
        Moved nowhere.

13391.  January 18, 2011         CLCOR                 Eric
        Added a correction of the Q and U in the source table when
        correcting the Antenna table D terms using values from RLDIF.
        No need to do RLCOR since there is no source table.
        Moved nowhere.

13392.  January 19, 2011         FARS.FOR              Leonia
        Right now FARS allows to put out the CLEAN components or
        residuals. Now the option of the sum of clean components and
        the residuals is added. The option of substituting the maximum
        amplitude (if it is smaller the given value) by the other given
        value is added if the option of 3 numbers sended to output
        is used.
        Moved nowhere.

13393.  January 20, 2011           IMERG                  Eric
        Added tests to the code to make sure that the input images are
        powers of 2 in both axes.  Cleaned up the code a little in
        some routines although this is very old, Cornwell-style AIPS.
        Added warnings to the help file about the power of 2 and the
        fact that the 2 images must agree in all details of their
        coordinates.  Dropped unused adverbs BLC, TRC but added
        CHANNEL for the BLC(3) which was used for cubes.
        Moved nowhere.

13394.  January 20, 2011            FARS                  Leonia
        Additionally to the FARS correction described at the message
        13392, the substituded value equaled BLANK is allowed under
        control of input parameters.
        Moved nowhere.

13395.  January 20, 2011          OOP                  Eric
        Subroutine OUVATT in UVDATA.FOR searches for the catalog
        number of the file after it is created.  For some erroneous
        reason it searched for ISEQ=0 meaning to get the highest SEQ
        not the one that we were creating.  It then attached the
        catalog number of the highest SEQ to the object.  The next
        time the file had to be found, the wrong one was found.  This
        caused SPECR to copy the tables to the highest SEQ file rather
        than the one it had just filled with data unless that one
        happened to be the highest SEQ.  With different code sequences
        it could cause the new file itself to never be filled (except
        with 0's) and the old higher SEQ file to be overwritten!
        Moved to patch 24 January, many OOP tasks must be relinked.

13396.  January 20, 2011            PCAL                 Eric
        Raise limit of cal source from 20 to 50
        Moved nowhere.

13397.  January 20, 2011      3C138 X band model          Amy
        Corrected the position for the 3C128 X band model, which
        was wrong by about 0.25".
        Moved nowhere.

13398.  January 21, 2011          FRING                Eric
        The exhaustive search method suffered a serious error in which
        one of the parameters giving the number of channels per IF was
        divided by the number of IFs a second time.  This led to
        correct answers for the first IF but wrong ones for subsequent
        IFs.
        Moved to patch this date.

13399.  January 24, 2011         FARS                  Leonia
        The substitution of RM istead of RE,IM as it was done previously,
        is carriing out now. The HLP file is modifyied to send the
        details of the algorithm in the explain part.
        Moved nowhere.

13400.  January 24, 2011            COOKE                 Eric
        Corrected the last changed date to match the truth which is
        now today since RLDIF has changed again.
        Moved nowhere.

13401.  January 24, 2011            SWAPR                 Eric
        Ignored the DOACOR adverb - fixed to put that in common for
        UVGET.
        Moved to patch this date.

13402.  January 24, 2011           TYSMO                 Eric
        The Flag version adverb was out of order in the common
        declaration causing issues for INEXT and FLAGVER.
        Moved to patch this date.

13403.  January 24, 2011          help files              Eric
        BPASS, CPASS, FRMAP, FRPLT, and POSSM inputs files spelled
        UVRANGE as UVRANG.  This disturbs parseltongue although AIPS
        does not have any problem.
        Moved nowhere.

13404.  January 24, 2011           SPLIT                Eric
        Set the CL version to 0 when DOCAL is false for the HI file
        writing including the CL to FO conversion.  Otherwise it could
        be using a non existent version.
        Moved nowhere.

13405.  January 24, 2011           CALIB                Eric
        More adverbs set for getting cal data rather than output data
        - in this case BCHAN and ECHAN.  Fix to use all channels for
        output file.
        Moved to patch this date.

13406.  January 24, 2011       Single/multi source        Eric
        A real multi-source file must have a SOURCE random parameter
        and one and only one SU table.  We have received single-source
        files with an SU table so the code cannot take an SU table as
        evidence of a multi-source.  Changed
        MULSDB    Added messages
        FNDPOL    Fixed test although of no value
        GAININ    Fixed test - decides SN vs CL on this test
        DAYFX     Changed message - need new CL table and NX
        Fixed to do things right:
        ACFIT   ANTAB   BOXES   CLCAL   CLIP    DBCON   FACES   FIXBX
        GETJY   LISTR   SETFC   SHOUV   SPLAT   SPLIT   UVDI1   UVFIX
        UVHOL   UVMLN   UVPRM   UVPRT   DEFLG   KRING   FRMAP   FRPLT
        LOCIT   POSSM   UVPLT   WIPER
        Moved nowhere.

13407.  January 27, 2011        SYCOP               Eric
        NEW TASK: averages SY table (and CD table) in IFs listed in
        APARM and puts those average results in IFs listed in BPARM.
        Moved nowhere.

13408.  January 27, 2011         DOBAND             Eric
        BPASET  For DOBAND > 1, the logic for testing FREQID and
                SUBARRAY from the BP file was in error.  If the FREQID
                was 1 in the BP table, but there was no FREQID random
                parameter, the BP values could never be used (FRQSEL
                is always -1 then).  Added test that both FREQID and
                FRQSEL > 0 before one cares that they do not match.
        BPGET   For DOBAND > 1, the logic testing FREQID and SUBARRAY
                demanded that both do not match before excluding a
                record.  The record should be and now will be excluded
                if either do not match.  The FRQSEL part was correct
                here.
        DOBAND=1 did the test correctly in BPASET and so had no
        problem.
        Moved nowhere.

13409.  January 28, 2011           QUOUT                  Eric
        NEW TASK to prepare text input for RLDIF giving the
        polarization angle or Q and U as a function of frequency.  It
        can use either a well calibrated CP or SU table (post RLDIF
        for that data set) or a spectral image cube containing Q and
        U.
        Moved nowhere.

13410.  January 30, 2011           QUFIX                Eric
        NEW TASK to find an RLDIF correction by comparing two Q/U data
        cubes, one well calibrated and one not.  Provides an RL
        correction for the UV data which produced the not well
        calibrated Q/U cube.
        Moved nowhere.

13411.  January 30, 2011         HUEWEDGE               Eric
        NEW VERB, draws 2 wwedges.  One is increasing horizontally and
        constant vertically, the other is increasing vertically and
        constant horizontally.  The former goes in the hue image plane
        and the latter in the intensity image plane to generate a true
        wedge for TVHUEINT displays.
        Changed: POPSDAT.HLP and NEWPARMS.001 to create the verb, new
        help file HUEWEDGE and AU6 to implement the verb.  Changed
        IWEDGE to have a PIXRANGE type argument and changed AU5C and
        TVDEVICE to have thios argument (as 0,0 => ignore).
        Moved nowhere.

13412.  January 31, 2011            SPLIT                 Eric
        Added CP and SY as table types not to be copied.
        Moved nowhere.

13413.  January 31, 2011       HUEWEDGE                   Eric
        Changed:
        IAXIS1   Made UNIQUE argument into integer DOZERO which is all
                 it controlled with > 0 => zero full plane, < 0 =>
                 zero partial plane, 0 => no zero.
        AU5B     Correct call to IAXIS1
        TVFLG    Correct call to IAXIS1
        SPFLG    Correct call to IAXIS1
        WIPER    Correct call to IAXIS1
        TVDEVICE Correct call to IAXIS1
        HUEWEDGE help file: add LABEL and GRCHAN adverbs
        AU6      Fix it to turn images back on as they were found.
                 Added code to label wedges and image correctly and
                 adjusted the default vertical position.
        Moved nowhere.

13414.  February 2, 2011    IMFIT, JMFIT, SAD             Eric
        Corrected all 3 to separate the header Clean beam from the
        actual Clean beam used in the given image plane.  It reads
        the CG table and finds the beam for the closest frequency to
        the frequency of the current plane.  That is used as initial
        guess for the widths and in the fitting.  Total flux however
        requires the Clean beam of the header,  For IMFIT and JMFIT it
        now lists the fit in Jy/headerbeam and in Jy/actualbeam.  The
        tasks were correct so long as one understood that the units
        were Jy per header beam and allowed the fit widths to be any
        value including < the beam in the header.  The main change was
        to give a better initial gues for small diameter sources from
        cubes.  Using the correct Clean Beam does mean that the
        deconvolved widths are now sensible rather than failures.
        The special CfA output now uses the actual Clean Beam and
        corrects the noise and peak values to Jy/actualbeam.
        Moved nowhere.

13415.  February 2, 2011   FARS                           Leonia
        FARS forced erroniously the outputs to zero, if BLANK is expected.
        The problem has been fixed.
        Moved nowhere.

13416.  February 4, 2011  FARS                            Leonia
        FARS set out amplitude to one exit and zero to another one.
        Change it to send amplitude to one exit and phase to another one.
        Moved nowhere.

13417.  February 6, 2011  FARS
        Simplify the concept of amplitude/phase additionally to RE/IM.
        Moved nowhere.

13418.  February 7, 2011          helps                   Eric
        Changed RLDLY help file to drop the unused SNVER from the help
        (it was not in the inputs).  Also added a couple sentences
        about the difference from FRING - RLDLY writes a new CL table
        not an SN table.
        Changed FITTP help file to include a paragraph of warnings
        about external packages understanding AIPS tables.
        Changed UVAVG help file to fix a typo in the Explain section.
        Added remarks about UBAVG and IMAGR time averaging.
        Moved nowhere.

13419.  February 8, 2011           REWAY                  Eric
        Added option to use the incoming INTTIME random parameter as
        the incoming weight rather than either the actual incoming
        weight or 1.0.  The results appear not to depend much on this
        option which means that the incoming weights are handled
        reasonably.  Also changed all robust rms computations to use
        double precision which seems to be required.
        Moved nowhere.

13420.  February 8, 2011            DISKU                 Eric
        Changed it to sort always on something, with number of files
        the default.  Changed it to examine all the disk spaces it is
        about to print.  They are then scaled uniformly to kbytes (as
        before), Mbytes, Gbytes, or Tbytes.
        Moved nowhere.

13421.  February 10, 2011        VLANT                   Eric
        The help file stated that the task does not work for EVLA data.
        While once true, it is no longer the case.  Changed to say
        this.  Created VLA.ant.2011 and in the public ftp area also
        baselines.vlais11 so that old VLANTs will work on old VLA
        data.  These files contain nothing but comments.
        Moved nowhere.

13422.  February 10, 2011      UVFLG, GETANT             Eric
        UVFLG made the assumption that all "null" antennas would have
        (X,Y,Z) coordinates of (0,1,1) meters.  That is not the case
        if some antenna numbers simply do not occur in the AN file.
        The flagging on low fringe rate then did use antennas at the
        center of the Earth.  Changed to avoid antennas < 100m from
        the center.  A similar error was made in the shadowing
        routine.
        GETANT is supposed to fill parameter arrays for the current
        subarray.  It does not init the variables before it starts so
        values for missing antennas are not changed.  Bad idea - added
        initialization code.
        Moved nowhere.

13423.  February 16, 2011         Misc                   Eric
        SCANLENG   help file had wrong contents
        CLSMO      had a HI file format that tried to do a character
                   variable with F10.5.
        Moved nowhere.

13424.  February 17, 2011            APCAL               Eric
        Change the number of input tables allowed from 8192 to 32768.
        Changed meaning of negative ANTENNAS values - now can have
        list of omitted antennas.  Corrected handling in the omit case
        of DOFIT - which is not then referenced to ANTENNAS.  This
        occurred numerous places in the code and was wrong previously
        in the omit only 1 antenna mode.
        Moved nowhere.

13425.  February 17, 2011            PCAL                Eric
        Wrong subscript typo led to model fluxes not being set up
        correctly from the input adverb giving spectral indices.
        Moved nowhere.

13426.  February 18, 2011           AFARS                Leonia
        The NEW task AFARS that can be run after FARS to make the
        presentation of the results better.
        Moved nowhere.

13427.  February 18, 2011         Robust rms              Eric
        REWAY made it clear that double precision is a very good idea
        for robust attempts to determine the rms.  Changed:
        QCLEAN     rms in autoboxing, lower case letters, variable
                   name too long
        FILIT      rms in autoboxing, variable name too long,
                   wrong parameter name for INSEQ -> wrong images
        FINDR      rms is several modes
        FLAGR      rms in several modes - 75 % more memory now for
                   more times.
        EVASN      rms in amp and phase difference; corrected useless
                   handling of single-source files
        EVAUV      rms in image rms and UV analysis, lower case
        GETJY      Solution code for average flux
        SNFLG      AMP opcode - find mean gain and rms
        RSPEC      rms of image region, lower case comment characters
        Moved nowhere.

13428.  February 19, 2011            AFARS              Leonia
        A small error at the yesterday .HLP file has been corrected
        Moved nowhere.

13429.  February 21, 2011    Double precision             Eric
        LISTR: changed the matrix and list averaging to do the
               averaging and rmses in double precision.  The LIST
               averaging did not previously use data weights.
        RLDIF: changed the LISTR-like section to double precision.
               Changed the multi-source/spectral section to use double
               precision and to actually blank the solutions in the
               solution finding code to match the testing for blanks
               done in the smoothing and extending codes.
        Moved nowhere.

13430.  February 23, 2011         CALIB                 Eric
        Added another thing to keep track of whether we have data by
        polarization, IF, and antenna in each solint.  Count things
        with no data as CNTSAD rather than CNTBAD and report the 2
        separately.  Fixed the counting to get all the ones with no
        data (the weights were 0 and -2 for various reasons).
        Moved nowhere.

13431.  February 23, 2011         TYAPL                  Eric
        (1) Added option to avoid changing the data weights for EVLA
            (SY table) correction.
        (2) Added code to apply the Gains in the square for data taken
            before some date and to ignore the Gains after that.  SY
            values were the (Pon+Poff)/Gain when (Pon+Poff)*Gain would
            have made more sense.  We are switching to that on the
            "some date".
        (3) We cannot escape assuming that the data weights are equal
            to the integration time.
        Moved nowhere.

13432.  February 23, 2011          AFARS                  Leonia
        The error near cut off the amplitude is fixed.
        Moved nowhere.

13433.  February 24, 2011          AFARS                  Leonia
        A small mistake near BPARM.
        Moved nowhere.

13434.  February 24, 2011            TYAPL                Eric
        The units of the SY table have been corrected from a real Psum
        DIVIDED by a gain to a real Psum TIMES a gain - also Pdif and
        the recorded gains changed accordingly.  TYAPL attempts to
        handle the previous form and for data taken 2001-02-24 and
        later will do the new form.  Results appear promising for both
        weights and fringe visibilities close to Jy**(-2) and Jy,
        resp.  Discrepancies may well be due to Tcal issues rather
        than TYAPL scalings.
        Moved nowhere.

13435.  February 24, 2011            LOCIT                Eric
        Add final plot to inputs comments and allow it to be done even
        if the ouput files are not being written.  Gave it the option
        to plot all solutions or only the "good" ones.  Imppoved the
        labeling a little.
        Moved nowhere.

13436.  February 25, 2011         OTT tables              Eric
        The definition of OTT tables includes the time as a double
        precision value in days.  It has however been written with
        single precision on occasion.  Changed DOTTV.INC, OTTINI, and
        TABOTT to trap this case and do the right thing.  This caused
        LOCIT to get wrong answers for the EVLA station coordinates.
        Moved to Socorro right now, nowhere else.

13437.  February 25, 2011         AFARS                    Leonia
        The sequence numbers of the two output files have been swaped,
        if they are not zero in inputs. Fixed.
        Moved nowhere.

13438.  February 25, 2011          USERNO                Eric
        The list in $DOCTXT/USERNO.LIS was rather out of date.
        The programs that prepared it were lost in the interim. So
        wrote a new stand-alone program $AIPNOT/USERNO.FOR and used it
        to update the USERNO.LIS.
        moved nowhere.

13439.  February 28, 2011           RLDIF               Eric
        Changed EXPECT angles to be correct values for 4C48, 3C138,
        and 3C147.  They were half what they should have been.  Also
        fixed bug that kept one from overriding a known source with
        one's own value for polarization angle.
        Moved nowhere.

13440.  March 3, 2011             RSPEC                 Leonia
        The weight (WEIGHT=1/RMS**2) can be  sent to the output now
        additionally  to RMS under control of OPCODE.
        Moved nowhere.

13441.  March 7, 2011             FARS                  Leonia
        The case of NO FQ table has been added.
        Moved nowhere.

13442.  March 7, 2011            ACCOR.HLP              Leonia
        Corrected the wrong statement for ACCOR application for
        Australian LBA.
        Moved nowhere.

13443.  March 9, 2011            AFARS                  Leonia
        Formats of the output cubes has been changed. The both output
        cubes has dimension equaled one. The position of the amplitude
        maximum is sent to the first cube. The amplitude or phase are
        sent to the second cube under control of OPCODE.
        Moved nowhere.

13444.  March 10, 2011           SNPLT                  Leonia
        SNPLT has plotted PHASE using the phase range -180,+180deg, but
        labeled the vertical axis at the range 0,360deg. As a result,
        some plots did not appear.
        The problem is fixed.
        Moved nowhere.

13445.  March 16, 2011           PCCOR                  Leonia
        PCCOR has used minimum and maximum of available PC tones.
        Now, the 2 PC tones may be chosen for each IF under control of
        the input parameters.
        Moved nowhere.

13446.  March 21, 2011           flags                   Eric
        Changed PFLG.INC to allow 30001 flags to apply to a single
        time, up from 6000.  UVCOP raised from 120001 to 200001.
        Moved nowhere.

13447.  March 21, 2011           Stokes in tables        Eric
        The copying of tables has not taken into account any possible
        Stokes selection.  The bad case is when RR is dropped.  The
        tables should then have only one polarization and contain the
        L values - but they have retained two and R values were then
        used for LL data!  Changed the call sequences and code of the
        following to select polarization:
        BLSEL   BPSEL   CDSEL   CLSEL   GCSEL   IMSEL   MCSEL  PCSEL
        PDSEL   SNSEL   SYSEL   TYSEL   CLNULL
        Also fixed handling of BIF/EIF in case the values were not
        desirable.  PCSEL was a mess that required simplification.
        Then changed the COPTAB subroutine used in calibration tasks
        to determine BPOL/EPOL and call with the changed call
        sequences.  Also changed
        AVSPC  Added SY and CD tables and made the COPTAB changes in
               the local COPTAB routine
        UVCOP  Stokes selection not allowed but fixed call seq in local
               COPTAB routine - SHOULD THERE BE SYFSEL flagging SY table?
        SPLAT  Changed like COPTAB
        UJOIN  To local COPTAB routine, added CD and SY, changed call
               seq although no STOKES selection here
        Moved nowhere.

13448.  March 21, 2011      TYAPL, SPLAT                  Eric
        Fixed weights to use the integration time random parameter if
        present rather than the input weights (avoids issues with
        channel averaging).  Added 1.178 division in vis scaling for
        "the 3-level fringe rotation function."
        Fixed SPLAT which scaled by weight on random parameters that
        should only have been summed (i.e. INTTIM).
        Moved nowhere.

13449.  March 22, 2011      FARS                         Leonia
        FARS has not followed the BLC,TRC calculating weights from the
        infile. It always read the weight file since the beginning.
        So FARS has worked correctely only if BLC(1)=0.
        The error has been fixed.
        Moved nowhere.

13450.  March 23, 2011            SNPLT                   Eric
        The correction of March 10 (#13444) was incorrectly conceived.
        SNPLT failed to handle PC table phases correctly because at
        one critical point, the data type code is changed to special
        values just for PC tables.  When other operations on SY tables
        were added, these special values were not updated at every
        place that they were used.  Phase is in fact handle carefully
        to try to determine if -180 to 180 or 0 to 360 plotting would
        be better and the better on is chosen.
        Also increased the number of samples allowed using dynamic
        memory.  Some EVLA SY tables are huge.
        Moved real correction to patch this date.

13451.  March 23, 2011            TRUEP                   Eric
        Corrected:
        1. Acquisition of source fluxes neglected the fact that the SU
           table has I,Q,U,V fluxes whilst only I is needed here.
        2. Scaling by flux ignored the fact that BIF is not always 1.
        3. Clear READ status after reading the data.
        4. Fit spectral index to fluxes and use that to get flux by
           channel for SPECTRAL true.
        5. Add APARM(4,5,6) spectral smoothing option.
        Moved nowhere.

13452.  March 24, 2011             SPLAT                 Eric
        Changed:
        1. Source names were used only as 12 characters (they are 16)
           in several places.  All 16 are now frequently used.
        2. The decision on whether to force a SOURCE random parameter
           was made prematurely.  If one omit-this-source name was in
           SOURCES, it would make the wrong decision and actually
           create a 2nd random parameter.  The data and SU tables
           would be fine but the NX table would have the wrong source
           number.
        3. The recent change to the xxSEL routines caused a bad call
           sequence for CPSEL in SPLAT.  It does not have polarization
           dependent columns.
        The same mistake (3) was made in UVCOP and subroutine COPTAB
        used by a bunch of FUDGE clones.
        Moved nowhere.

13453.  March 25, 2011      FARS                    Leonia
        Using BLC(1), TRC(1) for selection of frequencies was incorrect,
        if FQ table is absent. The problem is fixed.
        Moved nowhere.

13454.  March 25, 2011             TRUEP                  Eric
        It tested for data in one data set and not the other, but, for
        some reason restricted that test to the continuum case.  Thus
        it attempted solutions when there were no data values from one
        of the two data sets, leading to NaN's in the answers.  Fixed
        that test to do both line and continuum, with a message for
        the continuum case and a counter and summary message for the
        line case.
        Moved nowhere.

13455.  March 25, 2011                RLDLY               Eric
        The phase correction of change 13389 works approximately when
        DOIFS = 0 (all IFs with independent delays, phases).  It did
        not get correct phases for DOIFS=2 however.  Changes:
        1. Added messages giving the phases
        2. Added tests on whther there was valid data for an antenna
           when shuffling data around between 2 VLA "IFs" (AC and BD)
           and the AIPS IFs 1-8 and 9-16 (for example).  This
           shuffling caused many of the answers for phase to
           disappear.
        3. Changed frequency reference to be IFs #1 and # NUMIF/2+1
           during computations for the 2 halves of the DOIFS=2 mode.
        Moved nowhere.

13456.  March 28, 2011               UVRFI                Leonia
        UVRFI has reproduced correct phases but amplitudes sometimes
        still rised under the expected ones at the frequencies
        of very high RFI.
        The option SMOOTH allows to improve the amplitude behavior,
        smoothing the amplitudes at the frequency channels.
        Moved nowhere.

13457.  March 28, 2011           RLDLY                   Eric
        Yet another subtlety about breaking the IFs into 2 halves.
        SWT has to have a first-IF-group copy for use when filling out
        the returned values.
        Moved nowhere.

13458.  March 28, 2011           BPCOR                  Eric
        Corrected the spectral index portion to read the correct
        frequencies in via CHNDAT and to compute the correction
        properly as  [(Freq chan)/(Freq tilt chan)] ** SpecIndx/2.
        since BP tables are voltage gains.  Cleaned up help file and
        added comments re BPASS being a better way.  Added channel
        selection for bP normalization with inner 3/4 as default.
        Moved nowhere.

13459.  March 29, 2011               QUFIX                 Eric
        Add estimate of uncertainty to printed display.
        Moved nowhere.

13460.  March 29, 2011              UVCOP                  Eric
        Added SY table flagging based on the applied flag table.
        Changed SY, TY, and SN table flagging to be "opt-out" via
        UVCOPPRM(6) rather than "opt-in."
        Moved nowhere.

13461.  March 29, 2011              SETJY                Eric
        Changed handling of spectral index so for CALC sources
        one set is found for each source and appears appropriately in
        the HI file and messages.  Previously only the last source
        appeared in the HI file.
        Moved nowhere.

13462.  March 31, 2011           NOIFS                 Eric
        Found an error in setting the UVW scaling parameter.
        Moved nowhere - patch??

13463.  March 31, 2011          IM2CC                  Eric
        NEW TASK: converts an image into a multi-facet set of images
        with image values as Clean Components in CC tables.  Main good
        use is for models presented as images in JY/PIXEL from casa
        and other such systems.
        Moved nowhere.

13464.  April 1, 2011               SNPLT                Eric
        The dynamic memory request could be small when there were
        rather few rows in the relevant table.  Added a bunch of
        memory to avoid this issue.
        Moved nowhere.

13465.  April 1, 2011               CALIB                Eric
        The help file was enhanced with info about reading in source
        models.
        Moved nowhere.

13466.  April 4, 2011            BDF2AIPS                 Lorant
        Added an extra option to select loading of particular calcodes
        only instead of all data. May speed up operational issues.

13467.  April 4, 2011             AFARS                  Eric
        Changed the IO around so that the 1-pixel first axis is
        eliminated entirely.  Cleaned up the header info, history.
        Sped up by eliminating excess max/min testing.
        Moved nowhere.

13468.  April 5, 2011           OFMGET, LWPLA            Eric
        Changed verb OFMGET (subroutine AU5E) to use the COLORS adverb
        to control whether all colors come from OFMFILE or only one
        color comes from OFMFILE.  In the latter case, the other 2
        colors may remain unchanged (COLORS > 0) or be zeroed (COLORS
        < 0).  In test, I found that LWPLA was using a bad formulation
        of the 'LG' transfer function.  I fixed that to be like the
        'LG' used elsewhere and added 'L2' and 'N2' as well.
        Moved nowhere.

13469.  April 8, 2011              AFARS                 Eric
        Restored the option to control the value used for balnked
        pixels with -1111 being a code for magic blanks.  A separate
        value is given for RM and phase in BPARM(2) and (3).
        Corrected the IO which did not account for the omission of the
        excess axis properly.  Changed the magic blank pointer to
        correctly show that the amplitude image is not blanked.
        Dropped more unused stuff from the code and added sensible
        defaults for the output CLASSes.  Changed it to read
        real/imaginary as well as amplitude/phase input cubes.
        Moved nowhere.

13470.  April 8, 2011             FARS                 Eric
        Added sensible default output classes.  Changed help for this
        and to correct some typing that got out of alignment.
        Dropped USERID from code and help.  Dropped the APARM(4)=2
        output option entirely - AFARS will handle it.  Changed
        handling to FQ table to
        (1) look in header to see if expected and require one if so,
        (2) use a correct FREQ axis rather than assume 5
        (3) find the freqid coordinate value and the associated pixel
        by correct computations (no guarantee it has not been modified
        in some way since FQUBE or MCUBE).
        Got rid of some excess code.
        Moved nowhere.

13471.  April 8, 2011             DOFARS               Eric
        Wrote RUN file DOFARS.001 with help file to define a procedure
        that will run RSPEC optionally, TRANS both the Q and U cubes,
        run FARS, delete the temporary transposed cubes, and, if
        APARM(4) is not 2, transpose the output cubes, leaving both
        the zxy and xyz output cubes behind.
        Moved nowhere.

13472.  April 11, 2011            SNPLT                  Eric
        Changed allowed range of SysPower gains since they are now
        much smaller than the old ~512 values.  Fixed a comment.
        Moved nowhere.

13473.  April 11, 2011     CookBook Appendix E           Eric
        Added to wording to help with getting ASDM and using obit.
        Moved nowhere.

13474.  April 11, 2011            GETJY                  Eric
        Fixed an error that used the previous IF when an IF was
        blanked in R polarization.  The sums in the L polarization
        were done correctly.
        Moved nowhere.

13475.  April 11, 2011             PCAL                  Eric
        The solution for spectral index did not take into account
        blanked fluxes (in case there are no data).  Changed it to
        skip those with 0.0 flux and fill them in from the spectral
        index if one can be found.  Also changed the fitting to look
        for any good IF rather than requiring IF 1 to be good.
        Moved nowhere.

13476.  April 12, 2011          DOFARS                Eric
        Dropped APARM(4) not equal 2 test from DOFARS.001 and fixed a
        comment.  Cleaned up the FARS and DOFARS help file a little.
        Moved nowhere.

13477.  April 13, 2011            COPTAB               Eric
        The addition of polarization ranges did not make it into
        subroutine COPTAB for BP tables - leading to aborts if there
        were BP tables to be copied.
        Moved nowhere.

13478.  April 13, 2011        TVFLG, SPFLG              Eric
        Counters of points included must now be double precision
        floats since 2^31 - 1 of integer is no longer enough.
        Changed GRIDTB, UVIMG, TVFLG, SPFLG.
        Moved nowhere.

13479.  April 14, 2011         OBIT in AIPS              Eric
        Create verbs to run OBIT tasks:
        Added AUO calls to VERBS subroutine in AIPS, AIPSC, AIPSB.
        Changed POPSDAT, NEWPARMS to make verbs BDFLIST, BDFAIPS and
        adverbs ASDMFILE, NCHAN, NIF, CONFIG.
        Wrote new:
        AUO       Verb subroutine - I see no way around it having to
                  know the OBIT task intimately - a maintenance issue.
        BDF2AIPS  New help file
        BDFLIST   New help file
        Also new help files for the above adverbs.
        Moved nowhere.

13480.  April 15, 2011            DSORC                Eric
        Contained some strange code in which it did not correct the SU
        table for source number changes and did do all others.  With
        the change to ALLTAB to refuse to copy NX tables, added
        special code to copy the NX table and let the source number
        column fixer solve the changed source numbers.  The fix
        routine has to use a special column name for the SU table
        since that table uses SOURCE for the character string name
        rather than the ID number.
        Moved nowhere.

13481.  April 15, 2011        NX table writing           Eric
        RNXUPD wrote the new subarray number in the NX table when
        dumping records for other subarrays, i.e. when switching from
        subarray 1 to subarray 2.  This messes up CALIB and causes it
        to omit the last scan of subarray 1 in self-cal.  Fixed local
        copy of RNXUPD in SPLAT also.
        Moved to patch this date.

13482.  April 15, 2011             IMAGR                 Eric
        Had an error addressing multiple channels when doing time
        averaging in a baseline-length dependent way.  Led to smears
        of signal going out radially.
        Moved to patch this date.

13483.  April 17, 2011          OBIT in AIPS               Eric
        Changed AUO to handle the display of the log files better.
        PRTLIN needed more correct call (NACROS not current string
        length) sequence, initial page=1 not 0.  Put in code to detect
        OBIT's long time string 'YYYYMMDDTHHMMSS ' and to squeeze it
        out of the display.
        Moved nowhere.

13484.  April 18, 2011            SOUSP                   Eric
        Added DOCONFRM option - to ask if the fluxes in the SU table
        should be replaced by the fit values.  They are listed before
        the question.
        Moved nowhere.

13485.  April 18, 2011        file opens                 Eric
        There are file systems (lustre for one) in which information
        about disk files may not be entirely current due to the
        asynchronous way in which the macro information is kept.
        Changed:
        ZDAOPN.C    If the file size is returned 0, issue message and
                    delay 1 sec, and try again.  If needed, repeat one
                    more time.
        ZEXPN2.C    If the expansion shows as <= 0 bytes, do the
                    above.
        ZMSGOP      Change ZDAOPN call to ZDAOPM.
        ZMSGXP      Change ZEXPN2 call to ZEXPNM.
        ZDAOPM.C    New version of ZDAOPN with no MSGWRT calls.
        ZEXPNM.C    New version of ZEXPN2 with no MSGWRT calls.
        Moved nowhere.

13486.  April 18, 2011          TVFLG, SPFLG              Eric
        Got rid of annoyances: in both, change the Stokes flag when
        selecting the new Stokes to avoid flagging, e.g. RR when
        displaying LL.  In TVFLG, drop the subarray question on
        ANTENNA-DT when one subarray was loaded out of multiple
        subarrays.
        Moved nowhere.

13487.  April 20, 2011         CALCODE foibles            Eric
        Data sets come with the same source having 2 CALCODEs.  This
        may be deliberate and useful so it is not forbidden.  But it
        can cause issues:
        SPLIT   Changed CALCODE ' ' for a source to CALCODE='-CAL'
        SPLAT   When not assembling a multi-source file, made above
                change.
        DSORC   Previous "fix" can cause trouble!  One should not
                update an SU table so that > 1 record has the same
                source number.
        Moved nowhere.

13488.  April 21, 2011              PRTUV               Eric
        Changed code to make use of NX table.  It makes a list of
        vis record ranges in the data set that match the start vis,
        SOURCE adverb, and time range.  This should make it start up
        faster and run better.
        Moved nowhere.

13488.  April 27, 2011              SNPLT                 Eric
        Added code to read the table and find out how many records are
        needed for each antenna, setting up a pointer array into the
        bug data array.  Now we survive a table with antenna 89 as the
        highest (and only) antenna as well as tables with very many
        records.
        Moved nowhere.

13489.  April 28, 2011             RFLAG                  Eric
        New task - examines data in time for rms and in spectral
        channel for robust mean and rms.  It can then plot the
        histogram distribution of time rms's and of deviations from
        the spectral fit in sigmas.  It can, alternatively, flag on
        the basis of these.
        Changed POPSDAT and NEWPARMS to create adverbs DCHANSEL and
        DOPLOT.  Made new help files for these.
        Changed GINIT to reserve #36 plot type for RFLAG.
        Moved nowhere.

13490.  April 29, 2011                 TYAPL                Eric
        When using the integration time with SY tables to set weights,
        flagged data were unflagged.  Bug dates to March 21, 2011.
        Moved nowhere.


13491.  May 1, 2011                 RFLAG                   Eric
        Corrected it to avoid wiping out a data set when creating plot
        files.  Also add 3 parameters at the end of the adverbs to
        help EXTLIST.  Changed AU2A (PLGET) to know about RFLAG and
        AU8A (EXTLIST) to list useful info about RFLAG plot files.
        Moved nowhere.

13492.  May 1, 2011                 PRTUV                   Eric
        The new NX table using code had a minor but serious error.
        Moved nowhere.

13493.  May 2, 2011               SETJY                   Eric
        Put in a call to the calc routines with type = current+1 and
        added code to test if things changed by > 3%.  If so, the
        previous fluxes are printed and the peak difference in %.
        Changed the numbering of models to be in the sensible time
        order sequence with Baars >= 4 in both Fortran and help.
        mention the testing of previous model in the explain.
        Moved nowhere.

13494.  May 2, 2011             IMAGRPRM(18)             Eric
        Changed QCLEAN and the help files for IMAGR and IMAGRPRM to
        have the code gradually reduce the maximum number of fields
        imaged at one time to at most 2.  It examines the average and
        rms of the fields imaged at one go and when the rms <
        average/20, it reduces the maximum allowed by one with a
        maximum of 4 going to 2 in one step.
        Moved nowhere.

13495.  May 3, 2011             DOOSRO                   Lorant
        DOOSRO (ie Do ORSO) is VLARUN for the EVLA with additional
        fringe fit and syspower table apllication. EVAUV to come.
        Will also work for simple RSRO, ie 2GHz OSRO in 2011 D-array.

13496.  May 3, 2010           IMAGR, POPSDAT              Eric
        Corrections:
        POPSDAT  The DOPLOT adverb was shown as an array of size 0.
                 ParselTongue could not handle that - changed to
                 scalar.
        QCLEAN   The scheme to decrease IMAGRP(18) was way to
                 extreme.  A revised scheme that might work has now
                 been tested.
        VISDFT   The address offset for Stokes was not initialized.
                 This made an error only if Stokes I followed usage at
                 Q, U, or V.
        Moved nowhere.

13497.  May 4, 2011              FITLD                   Eric
        Changed the local parameter include to contain more of the
        parameters and put that in SUCHCK rather than declaring MAXSOU
        as only 1000 while it was 2500 elsewhere.  Changed it to 5000
        at the same time.
        Moved nowhere to patch June 24.

13498.  May 4, 2011                 TIORD                Eric
        Mention baseline-order checks in the help file and move those
        messages to come out only at the end with a better format.
        Moved nowhere

13499.  May 4, 2011                SPLAT                  Eric
        SOLINT was recorded with an F6.1 format in the history.
        F7.3 is minimal.
        Moved nowhere.

13500.  May 5, 2011               IMAGR                  Eric
        Tweaked the algorithm adjusting IMAGRP(18) in QCLEAN.
        Moved nowhere.

13501.  May 6, 2010                 Fiddly bits             Eric
        QCLEAN   Changed the algorithm for IMAGRP(18) again so that 2
                 jumps to 4 on a restart so it can come down again
        SETJY    Re-ordered and reworded some of the messages esp when
                 flux has changed.
        Moved nowhere.

13502.  May 9, 2011              PCAL                  Eric
        PCAL has never worked for CC models of Q and U which probably
        should be used for even 3C286 in A array.  The pointers that
        offset the Stokes in the model computation routines were not
        set except for point models (SMODEL).  The base Stokes pointer
        for the model computations could also have been wrong although
        that would be very unlikely.  Also fixed an error in which it
        did not get some dynamic memory that it was going to use when
        DOLINE true in all cases of DOMODEL.  Also fixed a place that
        required a PMODEL for single source neglecting that IN2NAME
        was specified.
        Moved nowhere.

13503.  May 9, 2011             RLCAL                  Eric
        NEW TASK.  The right minus left phase of the reference antenna
        may not be as stable with time as assumed by RLDIF.  If there
        is a good model for the source Q and U, it is possible to
        solve for this difference as a function of time.  The new task
        does this, averaging over all baselines, channels, and RL and
        LR* to get the IF-dependent correction within a SOLINT.  That
        correction is applied to the left polarizations of all
        antennas at that time in a new SN table.
        Moved nowhere.

13504.  May 10, 2011             PRTUV                Eric
        The default handling of the scan list - when an NX table is
        not read - came before the needed parameter was known.  Moved
        it to after.
        Moved nowhere.

13505.  May 11-12, 2011            FLAGR, FINDR           Eric
        Changed BPARM(10) to mean do robust averaging on the spectra
        of each baseline/IF/time set rather than simple averaging.
        Any further averaging over time is done by simple averaging
        methods.  Changed the averaging over spectra to s subroutine
        call 5 places in FLAGR to implement the option.  Channels
        omitted from the robust average at each baseline/IF/time are
        not flagged by this task - see RFLAG.
        Changed POPSDAT, NEWPARMS, AU2A for new adverb DOROBUST.
        Made new help file for DOROBUST.
        Moved nowhere.

13506.  May 12, 2011              FUDGE                   Eric
        the history cards ended up with the task name in the format
        statement and then pre-pended in the history writing.  Dropped
        the one in the format statements.
        Moved nowhere.

13507.  May 12, 2011           POSSM                    Eric
        AGAIN!  (1) In plotting tables the selection of Stokes
        pointers would have treated 'RL' and 'RRLL' as R only.
        (2) Then it looked at negative error codes (says if all R or
        all L or both are flagged) from TABBP (et al.) and skipped
        those records even if some the data were good and wanted.  The
        later code can handle empty (all 0 and/or blank) data groups
        just fine.  Affectd BP, BD, and PD tables.
        (3) POSSM made decisions about plotting Stokes from
        autocorrelations without knowing the STOKES the user actually
        wanted, at least when the user did not set STOKES.  Added
        FNDPOL call ahead of any other use of the STOKES value.
        Moved nowhere.

13508.  May 16, 2011          OBIT in AIPS               Eric
        Added TPUT to all verbs, created new simple access to Imager.
        Will make fancier ones in time.
        Changed:
        POPSDAT   Make new verb OBITMAP and adverbs FOV, NTHREAD.
        WHATSNEW  As POPSDAT.
        AUO       Create code for OBITMAP.  Add call to AU2 for TPUT
                  with OBIT verbname as an immediate argument.
        FPTRIM    Trims leading blanks and trailing 0's from an Fm.n
                  formated string.
        ZSHCMD    An internal varialble was too short causing memory
                  to be overwritten.
        OBITMAP   Verb help file with full OBIT Imager help file as
                  explain
        FOV       New adverb help file
        NTHREAD   New adverb help file
        BDFLIST   Add TPUT equivalent info
        BDF2AIPS  Add TPUT equivalent info
        Moved nowhere.

13509.  May 22, 2011            DOOSRO                    Lorant
        Add a test to defend an array from over-running its bounds.
        Moved nowhere.

13510.  May 23, 2011         DOFARS, AFARS                   Eric
        The run file DOFARS.001 had a missing semi-colon which cause a
        grammar error after the first TRANS.
        The help file for AFARS had dropped the BPARM adverb that got
        reinstated later.  Added help info although the inputs section
        was quite adequate.
        Moved nowhere.

13511.  May 23, 2011          OBIT in AIPS                  Eric
        Added PRTLEV adverb to OBITMAP.  Changed meaning of DOWAIT
        some.  For OBITMAP amd BDF2AIPS, which can take a while to
        run, 0 < DOWAIT < 2 means to echo any additions to the log
        file as they occur.  This uses tail -f but stops when the
        ObitTalk process ends.  DOWAIT=2 still waits and then echos
        the log file to the screen.  For BDFLIST, all DOWAIT > 0 are
        set to DOWAIT=2 since it is fast and you may only want to look
        at one or two pages of the output.
        Moved nowhere.

13512.  May 26, 2011            ZDCHIN                   Eric
        Changed the variables used to read NETSP to allow 1024 entries
        each 192 characters long.  The Long lines were killing us.
        Moved nowhere.

13513.  May 27, 2011             TVROAM                   Eric
        Changed AU5A to copy the LUTs of channel TVCHAN to all
        channels to be used in the TVROAM.  Changed TVROAM to do
        IENHNS (black-and-white enhancement) on button A.
        Fixed help files TVROAM, ROAM (was obsolete), REROAM.
        Changed OTVROM in TVUTIL to copy the LUTs also (affects
        FILIT).
        Moved nowhere.

13514.  May 30, 2011             PRTAB                   Eric
        Added adverbs ARRAY3, KEYVALUE, KEYSTRNG, DOINVRS to allow
        selection on a column variable's value, restricting the print
        to include only or exclude those rows matching the selected
        value.
        Moved nowhere.

13515.  May 30, 2011             COMB                    Eric
        The BPARM(4,5) option to blank on S/N should have used the
        absolute vlaue of (S/N) since large negative signals are also
        large wrt the noise.  Fixed this in code, HI, and help.
        Moved nowhere.

13516.  May 30, 2011              SNPLT                  Eric
        Added option DOSCAN to plot scan boundaries on plots with time
        as the X axis.  Changed POPSDAT and NEWPARMS and wrote a new
        help file to add the new adverb.
        Moved nowhere.

13517.  May 31, 2011             OBIT Imager              Eric
        Added 3 new verbs to give nearly full access to OBIT's Imager
        task.  OBITIMAG gives multi-scale, calibration, and other
        IMAGR-like functions.  OBITSCAL add self-calibration to this.
        OBITPEEL piles on peeling operations on top of all the rest.
        Changed:
        NVSSVZ.FIT   Added to $AIPSTARS - NVSS catalog in a VZ table
                     form for finding outliers
        POPSDAT      Added verb OBITIMAG, OBITSCAL, OBITPEEL
        NEWPARMS     Added verb OBITIMAG, OBITSCAL, OBITPEEL
        AUO          Added code to implement all these verbs
        New help files for each of these 3 also.  Fixed typos and
        things in BDF2AIPS and OBITMAP help files as well.  Some
        aspects (NVSS catalog in particular) are not working just yet
        but put these back to get them off my plate for a bit.
        Moved nowhere.

13518.  May 31, 2011               PLOTR                 Eric
        The help file contained residue from an older version that
        limited things to 10 types of data.
        Moved nowhere.

13519.  May 31, 2011             OBIT things             Eric
        Changed AUO to give CatDisk=0 in an attempt to get the NVSS
        catalog stuff to work.
        Mention output UV data set in OBIT*.HLP.
        Moved nowhere.

13520.  June 1, 2011        Inbox archaeology             Eric
        Changed:
        LTESS   Explain confused people with references about MEM.
                Added sentence explaining that LTESS works with VTESS
                and the references are for the latter.
        Moved nowhere.

13521.  June 3, 2011        Auto Index tables             Eric
        Changed the automatic indexing of output data to use the input
        indexing if available in most cases.  Changed
        DRNX.INC    Add parameters to hold old times and pointers to
                    use them
        GETNX       New subroutine extracted from VPLOT reads in the
                    NX table data.
        RNXGET      Calls GETNX seting up the old info pointers and
                    values for up to 20 subarrays.
        RNXINI      Added one pointer initialization.
        RNXUPD      Added code to use lists of times when present to
                    notice the scan gaps.  Also deals with scans not
                    present in the output file at the beginning and
                    later on in the file.
        Changed all tasks to add a call to RNXGET just ahead of the
        RNXINI call.  The former needs the input file and the latter
        the output file info, so they have been kept separate.  Tasks
        that were a bit different include
        DBCON       RNXGET call uses output file info and so deduces
                    that there is no input NX info.  DBCON changes
                    things enough the input info is not likely to be
                    reliable.
        VBGLU       As DBCON.
        SPLAT       Changed local version of RNXUPD as above.
        UVRFI       The RNXINI call was commented out but the RNXUPD
                    and RNXCLS calls were not.  This should have
                    caused curious difficulties.
        Other tasks changed were
        AVSPC DIFRL FIXAL FLGIT FLOPM FUDGE NOIFS PHSRF REWAY RLCOR
        SPLIT SUFIX SWAPR TYAPL UVAVG UVBAS UVCOP UVFIX UVGLU UVLIN
        UVLSD UVLSF UVMOD UVMTH UVRFI BLCHN CALIB CVEL
        Moved nowhere.

13522.  June 6, 2011               SPLAT                  Eric
        The wrong source number ended up in the NX tables when not
        assembling a multi-source file.
        Moved nowhere.

13523.  June 6, 2011               AVSPC                  Eric
        Used the channel count and average of the first IF in building
        the header even when BIF was set to some higher number.  It
        then did odd things to the FQ table channel and total widths.
        Fixed to use BIF and to correct the FQ table in a manner
        consistent with what earlier routines did to it.  Changed the
        help file to emphasize that there is no channel selection in
        mode SUBS.
        Moved nowhere.

13524.  June 6, 2011               FRPLT                  Eric
        1. Increase allowed number times
        2. Do a sensible default for start and stop times
        3. One of the plot loops did not set up blanking correctly and
        so would always join blanked points to good ones.
        4. A label had an extra ) character after the polarization.
        Moved nowhere.

13525.  June 7, 2011            OBITSCAL                 Eric
        Changed info re SOLINT since 1 minute data with a solint of 1
        minute gets solutions every 2 minutes (2 samples separate by
        exactly 1 minute and so are averaged).
        Moved nowhere.

13526.  June 7, 2011              IMEAN                   Eric
        DROUND was declared double precision when it returns integer.
        This seemingly worked under GNU but not under Intel!
        Moved to patch June 8.

13527.  June 8, 2011               FRPLT                 Eric
        Changed:
        1. The page-full logic could not handle missing plots and the
        like.  Used the correct POSSM as a model of how to upgrade the
        code.  Previously it would actually over-plot.
        2. The Stokes labels had a simple typo error for IQUV.
        3. The X axis labeling did not take into account the plotting
        of multiple polarizations and/or IFs when APARM(9) >= 1.
        4. The time binning assumed infinite precision in
        single-procision floating pooint computations of time.
        Changed it to use IROUND.
        5. The axis labeling was on each horizontal axis when APARM(9)
        >= 1.  This led to overlaps and confusion.  Changed it to do
        every other plot when there are > 2.  Changed also to label
        the axis type with the tick labels.  Previously the type
        appeared on upper plots where no tick numbers appear and the
        numbers appeared on the lower with no type.
        6. Added adverb FACTOR with the same meanings as POSSM.  Made
        the plus signs larger for FACTOR=1.  Factor > 100 -> scale by
        FACTOR-100 and do not connect amplitude points.
        7. Add display of antenna numbers and messed a little with the
        position of interior labeling strings (antenna names, numbers,
        IF and pol.).
        Moved nowhere.

13528.  June 8, 2011               POSSM                     Eric
        Changed FACTOR to match FRPLT above.  Also messed a little
        with the position of interior labeling strings (antenna names,
        numbers, IF and pol.).
        Moved nowhere.

13529.  June 9, 2011             Y2K                     Eric
        Y2KLOAD had a typo causing a bad test in HUGE in residual
        image 4.  Y2KEXEC had one too few YES commands causing the
        test to quit instead of be very wrong.
        Moved nowhere.

13530.  June 9, 2011               SETPAR                Eric
        Raised the speed limit from 200 to 500.
        Moved nowhere.

13531.  June 10, 2011             PRTAC                  Eric
        The list of tasks for Y2KH changed so it oculd not find a
        'HUGE' job in the AC file.
        Moved nowhere.

13532.  June 10, 2011               RFLAG                Eric
        1. Add adverbs BIF, EIF
        2. Adjust cumulative plot of time rms to go only to the
           first 0 box.
        Moved nowhere.

13533.  June 13, 2011              ACLIP                  Eric
        NEW TASK: CLIP but for auto-correlations.  This means
        BASELINE, UVRANGE, PHSLIMIT adverbs get dropped and the
        flagged summaries change a lot.  Updated info in CLIP.HLP to
        mention ACLIP and new flag count limits.
        Moved nowhere.

13534.  June 15, 2011             RLDIF                  Eric
        Correct the computation of uncertainties to divide by sqrt of
        the sum of the weights, yielding one hopes the uncertainty in
        the answer as opposed to the variance in the data values.
        Moved nowhere.

13535.  June 15, 2011             CALIB                 Eric
        Add DOAPPLY adverb to control whether the SN table is applied
        to a single-source data set with an output file written (> or
        = zero - so done by default) or not (< 0).
        Moved nowhere.

13536.  June 20, 2011             RFLAG                 Eric
        1. Changed task to use BPARM for all sorts of plot controls
        including plotting only parts of the X and Y range of things.
        2.Changed binning approach - APARM(2) is now the expected time
        interval and a new time bin is started when a baseline that
        has already appeared in the current bin is encountered (or 1.1
        * APARM(2) has passed).  Added minimum expected rms (APARM(5))
        used in spectral mode.
        3. Changed time rms flagging to flag the full interval by
        default and the central point only when APARM(10)>=1.
        Moved nowhere.

13537.  June 21, 2011              RFLAG                Eric
        Changed the code to insist that medians be found from an odd
        number of points - the MEDI and MEDR histograms were
        assymetric about 0.0 otherwise.  Also changed to do the
        spectral rms only on the central spectrum in each time group.
        This makes the count of sample much more sensible and saves
        some excess computing.  Added a remark to the help file
        pointing out that the median estimator forces the histogram to
        have three large spikes, one at 0.0 and one each at plus or
        minus 0.675 sigma.  These do not affect the flagging under any
        normal circumstances.
        Moved nowhere.

13538.  June 23, 2011           ZMI2, ZFI2                Eric
        Changed the error message handling in these bottom level
        subroutines.  C requires formats %lld, %ld, and %d for items
        longer than long, items longer than int, and int,
        respectively.  On LNX64 at least long is 8 bytes now and the
        %ld case was not present. The numbers printed with %d looked
        like the internal variables had overflowed in 32 bits when it
        was only the printing of them.
        Moved nowhere.

13539.  June 23, 2011               CVEL                  Eric
        Programmers got confused in the init subroutine about which
        variable actually went back to the calling program as the
        error code.  The wrong one was used for many important things
        like BP file setup, causing the task to plow on in numerous
        hopeless circumstances.
        Moved to patch this date.

13540.  June 23, 2011         NETSP follies               Eric
        Changed to allow bigger NETSP entries:
        DISK.INC   Raise size of each disk name to 192 (the limit in
                   ZDCHIN)
        DSKASS     Raise size of hollerith temporary variable
        GNETSP     Raise size of line to be read from NETSP
        Moved nowhere.

13541.  June 24, 2011        FITS Table read error         Eric
        The subroutine ATCONV adjusts the list of table keywords for a
        couple of effects including the presence of ISORTORD.  It did
        not adjust the list of character valued keywords so they no
        longer corresponded to the list of types, names, pointers,
        etc.  Fixed ATCONV and changed the call sequence in FITLD,
        UVLOD, IMLOD, CALRD, and TBIN.  Wht was this not noticed?
        Moved to patch this date.

13542.  June 24, 2011         BDF2AIPS                    Eric
        Changed AUO to make BDFLIST and BDF2AIPS more accepting of
        logicals in ASDMFILE.  If ASDMF(1) begins with either
        $xxxx/ or xxxx:, the value of the variable xxxx will be
        translated and the actual ASDMF sent to OBIT will be
        the concatenation of that translation, a '/', anything left in
        ASDMF(1) with trailing blanks omitted, and ASDMF(2).
        Modified help files for ASDMFILE, BDF2AIPS, BDFLIST.
        Moved nowhere.

13543.  June 27 & 29, 2011            DOFARS                  Eric
        Changed temporary variable name INDOWA to DOWINAIT.
        This interfered with INDISK.
        Moved nowhere.

13544.  June 29, 2011         AIPSLetter                   Eric
        Mid-year AIPSLetter: $DOCTXT/LET11A.{TEX,PS,PDF}.
        Moved nowhere.

13545.  June 29, 2011            PRTAB                   Eric
        Changed to use RPARM and allow up to 7 tests to be performed
        and, if all are met, print or do not print the row.
        Moved nowhere.

13546.  June 29, 2011              FGPLT                  Eric
        The spectral channel setting tested against JLOCIF instead of
        JLOCF for BCHAN and so used a big channel range when a narrow
        one was intended.
        Moved nowhere.

13547.  June 29, 2011               UVHOL                 Eric
        Changed it to recognize changed formats for the EVLA and do
        its usual thing.  Added ICHANSEL replacing CHANNEL for all the
        multiple channel data sets.  Changed to handle W, QUAL etc
        based on the array name in the antenna file.  Added CHWANT to
        make a mask of desired channels and DATAVG to average up those
        channels.
        Moved nowhere.

13548.  June 30, 2011             RFLAG                    Eric
        Changed:
        1. Setting of Ymin for cummulative plots - with LOG it was
        sometimes too high (at -5.0).
        2. Changed to write a new FG table always, but to replace an
        existing table at the end if the user requested an OUTFGVER
        that already existed.
        3. Added NOISE as an IF-dependent set of values for APARM(3)
        to be used when APARM(3) < 0.0.  Implemeted by always using
        NOISE but filling it from APARM(3) when it is > 0.  Handled HI
        properly however.
        4. Changed DOPLOT > 0, to return NOISE(i) for i = IFs in
        current job, leaving the other NOISE values alone.  The task
        gets this by summing the time rmses and their squares in each
        channel individually.  The mean and variance in each channel
        is found and may be plotted (DOPLOT >= 4).  In each IF the
        median average channel rmses and its variance are added and
        then scaled by FPARM(9).  0 -> 5 which seems good.
        5. Changed APARM to FPARM and BPARM to VPARM to allow up to 30
        control and plot parameters, respectively.  Added plot scale
        controls for the spectral cumulative histogram and for the
        spectrum of the time rmses.
        6. Added warning about SMOOTH in the help file.
        7. Changed handling of times to find the min and max time
        within each time bin and use those appropriately in setting
        the flag time ranges.
        8. Added a new variable to hold all the flag indicators for a
        given set of times and broke the big loop set into two sets.
        This opens up the possibility of checking across baselines and
        the like.  Added FPARM(10) to flag all baselines if more than
        FPARM(10) (fraction) of them are to be flagged.
        9. Added code to test for filling in channels between flagged
        channels and for too high a fraction of channels flagged ahead
        of the FPARM(10) baselines test as well as the code that was
        already there afterwards.  Changed the too high fraction test
        to count both previously flagged and current about to be
        flagged.  This means if the cutoff is set at 0.4 and half the
        channels were previously flagged they will all disappear.
        Moved nowhere.

13549.  June 30, 2011             CALIB                  Eric
        The DOAPPLY adverb was applied to the writing of the output
        file but not to the creation of the file and writing of its
        HIstory file.  Added further tests on APPLY to prevent it when
        it is not wanted.
        Moved nowhere.

13550.  July 1, 2011        SPLAT, UVCOP                 Eric
        In order to flag SY, TY, SN tables changed
        NXTFLG    Generally used subroutine needed TABLE argument to
                  decide which flags to take and which to ignore.
                  Channel-dependent and baseline-dependent flags are
                  not applied to tables.
        DATFLG    Added a .FALSE. to the NXTFLG call.
        SNSEL     Did not use the local BIF where it should have.
        UVCOP     Changed NXTFLG - the SOUWAN list is prepared
                  differently by UVCOP and is always sources that are
                  wanted.  The usual flag about that said otherwise.
                  This meant that a UVCOP with SOURCES did not apply
                  any flags to UV data or to table data.  Changed the
                  xxFSEL routines to include the BPOL, EPOL argument
                  even though it does not matter in UVCOP.  Changed
                  xxFSEL to make sure that the flagging and
                  IF/polarization selection still left data which were
                  not flagged before writing a table row.
        SPLAT     Changed COPTAB to apply flagging to TY, SN, and SY
                  tables.  Copied the TYFSEL, SYFSEL, SNFSEL routines
                  and their xxFLG subroutines from UVCOP.  Note that
                  SPLAT must use the general version of NXTFLG and
                  DATFLG whilst UVCOP uses a special NXTFLG (more
                  flags allowed) and does not use DATFLG.
        SPLAT     Help file: mention tables in FLAGVER help section
                  and the type of averaging done by SOLINT compared to
                  the multiple choices in UVAVG.
        Moved UVCOP fix to its NXTFLG to patch this date.

13551.  July 1, 2011                 RFLAG                 Eric
        1. The history writing task had a wrong format and variable
        for one of the VPARMS and a format one character too long for
        another.
        2. Changed the axis labeling for the plot of rms versus
        channels.  It had residue of other labeling routines that had
        not been updated.  Corrected lack of use and misuse of
        variables to get consistent labeling.
        Moved nowhere.

13552.  July 4, 2011             BDF2AIPS                  Eric
        The script still contained a x.i command to display the
        inputs.  This has started to show a page full, press Enter to
        continue state, demanding the enter from the terminal.  This
        is confusing in the extreme so I removed the x.i command.
        Moved nowhere.

13553.  July 4, 2011                 PCAL                 Eric
        Indeterminate solutions are usually caused by user error.
        However, the data could cause one in marginal cases.  Changed
        the code to go on even in the presence of indeterminate
        solutions until 10 in a row occur.  Also changed the low level
        messages so that the number of diagonal non-zero terms and the
        expected number are shown in such cases.
        Moved nowhere.

13554.  July 5, 2011              SNIFS                    Eric
        NEW TASK.  Sort of like SNPLT but the X axis is IF number for
        R followed by IF number for L.  It plots CL, SN, TY, SY table
        parameters that depend on IF.  It plots one time interval at a
        time and can do each antenna individually averaged over that
        time or plot each time sample in the appropriate panel.  It
        can also plot all antennas each averaged individuall of the
        time interval.  Then it goes on to the next time interval.
        Moved nowhere.

13555.  July 6, 2011         OBIT                      Eric
        The command x.i for inputs did not work in the OBIT verbs at
        all.  It did work from the script BDF2AIPS but left a page
        full wait with the prompt in the log file and the user in a
        quandary.  Bill has made the command
                 x.inputs(file=x.taskLog)
        which he says will work.  I have put in (commented out still)
        in AUO.FOR but added it back to the BDF2AIPS script.
        Moved nowhere.

13556.  July 7, 2011              UPDCVS                Eric
        Improve the $cvscmd cannot execute error message to make it
        clear what it has tried.
        Moved nowhere.

13557.  July 7, 2011              ANFIND                Eric
        Some idiot somewhere is just making up names for telescopes.
        There is no way that one can recognize all the possible
        spellings for even commonly used antennas, esp if case is also
        a possible variation.  But we can add more to the list
        anyway.  Add trap for 0,0,0 for a station location.
        Moved nowhere.

13558.  July 7, 2011              RFLAG                 Eric
        Changed:
        1. Created new adverb SCUTOFF(64) in POPSDAT, NEWPARMS, and a
        help file.
        2. Added SCUTOFF as an IF-dependent cutoff for deviations from
        the spectral fit.  Changed code to set it with median of mean
        spectral deviations, scaled with FPARM(10).  Put in HI.
        SCUTOFF is in Jy not sigmas as is FPARM(4) now.
        3. Added DOFLAG adverb - if > 0, flagging will be done even if
        DOPLOT > 0.  Moved code that sets the internal cutoffs to the
        actually upper flag routine (so after the plot side of the
        code that will compute NOISE and SCUTOFF).
        4. Moved FPARM(10,11) to FPARM(11,12).
        5. Changed FPARM(5) from a now meaningless lower limit to the
        spectral rms to a lower rms cutoff (like FPARM(6) is an upper
        rms cutoff).
        6. Added array to sum the deviations from the spectral fit and
        squares on a per channel basis.  Added code to plot it (bit 4
        = value 8 in DOPLOT) and set SCUTOFF.
        7. Fixed OVERFLOW display to show all over the boxes plotted
        and to show total count.  Cumulative plots show total only.
        8. When DOTV true and GRCHAN=0, the channels for line types 3
        and 4 are cleared.
        9. The channel plots are now labeled with channels counted
        within each IF.  And the IFs are labeled.
        Moved nowhere.

13559.  July 7, 2011                USUBA                Eric
        Raised upper limits on entries and sources by an order of
        magnitude.
        Moved nowhere.

13560.  July 7, 2011              CALIB                  Eric
        Changed HI writing so that the input file gets a little info
        even when a new file is being written.  The date, the name of
        the new file, and the SN version number are probably enough.
        Moved nowhere.

13561.  July 7, 2011               SNPLT                 Eric
        Changed axis labeling for PSYS - it was Tsys/Tcal but it has
        been TSYS Kelvins for some time.
        Moved nowhere.

13562.  July 11, 2011               USUBA                  Eric
        Corrected a place that assumed there were no more than 20
        antennas when making a printed disply.  Put in a loop with a
        limit of 20 in any one line.
        Moved nowhere.

13563.  July 11, 2011               RFLAG                 Eric
        I7 is not a big enough format for the count of flags!  Changed
        to I12 which includes a blank and a sign plus the largest
        integer standard 32-bit integers can count.
        Moved nowhere.

13564.  July 11, 2011           OBIT                    Eric
        OBIT does not like OUTDISK=0.  Changed AUO to set it to the
        maximum disk number at AIPS startup (not affected by ADDDISK).
        Moved nowhere.

13565.  July 11, 2011               SNIFS                Eric
        Connected line plot for 2nd polarization was one off to the
        right.
        Moved nowhere.

13566.  July 12, 2011             PBCALC                 Eric
        PBCALC had a maximum radius parameter that did not adjust for
        arrays that are not recognized.  Changed it to set RCUT to an
        enormous number for unrecognized arrays for which beam
        parameters are provided.  This affects a lot of tasks most
        notably PBCOR, but also SAD, BOXES, IMFIT, SETFC, OOSUB,
        IMAGR, VTESS, and similar tasks.
        Moved nowhere.

13567.  July 15, 2011             RFLAG                  Eric
        Manage time differently a little.  Expand the user's time
        interval by 0.1 percent rather than 10 per cent.  Use the time
        in the test for too much time passed as the current minimum in
        the time bin rather than the initial time - it should be the
        same but ??  Changed the time array to (2,*) rather than (3,*)
        since the init time is not relevant.  Expanded the discussion
        of FPARM(2) in the help file.
        Moved nowhere.

13568.  July 15, 2011             REFLG                  Eric
        NEW TASK: compresses FG tables like the ones common from
        RFLAG, CLIP, and other such tasks.  Has option to expand the
        flagging if too much of a spectrum is flagged at a particular
        baseline and time.  Options to flag all times for a particular
        channel and baseline if too many are already flagged and to
        flag all baselines at a particular time and channel are
        already flagged are also available.
        Moved nowhere.

13569.  July 15, 2011             FGDIF                  Eric
        NEW TASK: compares the affects of two FG tables to see if they
        flag the same data.
        Moved nowhere.

13570.  July 19, 2011         TVFLG, SPFLG               Eric
        These old tasks still used UVINIT/UVDISK to read the data set
        to determine the times to be used in the grid.  This is
        probably okay if you are gridding the full data set, but does
        not work well if you are selecting data by time or source and
        does not reflect times that are already fully flagged.
        Changed to use UVGET applying all the selection adverbs.  In
        many EVLA cases it may be 60 times faster in the "finding a
        list of times" section of the code.
        Moved nowhere.

13571.  July 19, 2011             RFLAG                   Eric
        1. Changed help file to allow NBOXES of 0 and show that <20
        goes to 200.
        2. Added FPARM(12) (and moved FPARM(12) to FPARM(20) for
        flagging only the center one) to control flagging an antenna
        when the fraction of baselines to it exceeds FPARM(12).
        3. Changed logic (and parameter order) of big FLGITS array so
        that it is zeroed and passed from above.  The lower level
        routine picks up the previous values for times not yet written
        to the FG table.  Testing on fraction of baselines is now done
        only on the "central" time(s).
        Moved nowhere.

13572.  July 19, 2011               REFLG                 Eric
        1. Changed all excess tests not to count those cases in which
        everything was already flagged.
        2. Moved CPARM(2-5) to (3-5,7) and added info to the help file.
        3. Added test on excess baselines to an antenna as CPARM(6).
        4. Added CPARM(2) to flag good channels between groups of
        flagged channels.
        5. Added to help the reminder of how baselines are counted
        (including autocorrelations and with the maximum antenna
        number).
        6. Changed to use UVGET to read the UV data file for times.
        Should be faster than UVINIT/UVDISK when getting 1 source
        which it always does.
        7. Changed to delete the FG tables as needed in addition to
        removing them from the UV data file header.
        Moved nowhere.

13573.  July 19, 2011              FGDIF                   Eric
        1. Add indicator of which FG table had a flag when printing
        details of the differences.
        2. Changed to use UVGET to read the UV data file for times.
        Should be faster than UVINIT/UVDISK when getting 1 source
        which it always does.
        Moved nowhere.

13574.  July 20, 2011              DOOSRO                  Lorant
        Added a estimate for CHINC in FRING so that it won't fringe
        on all gazillion channels. Choice is to do either the max of
        one sample per half a MHz or limit to 32 channels to speed
        things up. Of course less if less than the max are available.

13575.  July 21, 2011              REFLG                Eric
        Added subroutine to sort the output FG table to a scratch
        table and then write the output over again working through the
        flags to see if any match in all but IF and allow a range of
        IFs to be specified rather than just one.  It also checks to
        see if all baselines to an antenna are flagged and combines
        those flags.  Results are disappointing.
        Moved nowhere.

13576.  July 21, 2011               UVCOP                Eric
        The option UVCOPPRM(5) would omit data records from the output
        if all correlators (all channels, polarizations, IFs) had low
        weight but did no flagging.  It now flags all low weights and
        passes the record on if any correlator is not flagged.
        Moved nowhere.

13577.  July 21, 2011              RFLAG                Eric
        Added DOOUTPUT and OUTTEXT to write out a text file with
        channel weights based on the rmses of time rmses and/or
        frequency deviations.  Cleaned up display code a little.
        Moved nowhere.

13578.  July 25, 2011            IMMOD                 Eric
        Added option of input text file listing up to 9999 components.
        Moved nowhere.

13579.  July 25, 2011            STFUN                 Eric
        Changed it to always write out an "rms" image also.  Note that
        the Structure Function is already a differences squared so the
        statistics are not simple Gaussian...
        Moved nowhere.

13580.  July 25, 2011               IMAGR                  Eric
        Changed QCLEAN:
        1. CLSCAL will now write a message whenever rescaling by
        something other than 1.0.  Previously, if the scale was
        exactly the previous one it siad nothing.
        2. CLRMAX default of 5 for the inscribed circle (5 pixels less
        than the full image).
        3. CLGFIT now uses the field for which a beam was computed
        most recently to provide the beam parameters.  Previously it
        used each field even if ONEBEAM caused that field not to have
        a beam.  As a result it read the header beam value and used it
        for all planes of the image in scaling, restoring, etc.  It
        did write this bad value in the CG table but who looks?  The
        new value does get into all facets from this point.
        4. CLSCRS changed to display all rescaling not = 1.0
        Moved to patch this date.

13581.  July 26, 2011            CONVL                   Eric
        Changed it to:
        1. At the start, see if the header Clean beam can be convolved
        to the desired width.  If not and a CG file is to be used,
        then check to see if any channels in the CG file will work.
        If at least one will, CONVL goes ahead.  It used to die.
        2. If, at any channel it cannot find the frequency in the CG
        file or cannot find a Gaussian which will convolve to the
        desired width, it now complains and fills the output plane
        with magic blanks and keeps going.  Previously, it convolved
        with the previous good channel's parameters (usually in a
        plane filled with blanks) or died.
        Moved nowhere.

13582.  July 27, 2011       EXTLIST, RFLAG               Eric
        Changed AU8A for the revised RFLAG for EXTLIST and AU2A for
        PLGET of RFLAG plots.  Changed RFLAG tp pass back two more
        extra parameters giving the range of boxes in the plot.
        Moved nowhere.

13583.  July 28, 2011        VPLOT, CLPLT, CAPLT         Eric
        Raised the maximum number of model Clean components to 200000
        in all of the above.  The limit was 50000 in VPLOT and 25000
        in CLPLT and CAPLT.  Of course 200000 CCs will be very slow in
        the model computation....
        Moved nowhere.

13584.  July 28, 2011          TYAPL, DFLG.INC            Eric
        Rearranged the flagging common to mke 2, one with parameters
        and one with the data.  Changed TYAPL to allow FLAGVER and
        to have DATFLG and NXTFLG versions with the number of flag
        commands allowed at one time = 200001 like UVCOP.
        Recompiled a lot
        Moved nowhere.

13585.  July 29, 2011             install.pl              Eric
        Added code to recognize 64-bit Macs as MACINT.
        Moved nowhere.

13586.  July 29, 2011            VPLOT                   Eric
        The routine that picked up the CC models had an error if NMAPS
        was greater than 64.  A wrong variable was used in an IF
        statement so NCOMPS for field 66 was set to NMAPS and so all
        other fields were ignored.  Updated VPLOT, CAPLT and CLPLT
        help files for the increased number of CCs allowed.
        Moved bug fix to patch.

13587.  July 29, 2011        CookBook Appendix E           Eric
        Revised Appendix E to suggest a quick early edit, temporary
        BPASS/CALIB/GETJY, then RFLAG and REFLG, then delete CL etc
        tables, then TYAPL applying the bug RFLAG flag table, then
        re-doing FRING, BPASS, CALIB, GETJY, then on to polarization.
        Corrected some of polarization also since fixed models do not
        work.  Updated LaCook0, I, J the table of contents and
        indices.  Revised the on-line html and linked PDF files.
        Moved nowhere.

13588.  July 29, 2011             IMAGR                   Eric
        Added test on ALLOK before initializaing the baseline-length
        dependent time averaging.  Moved that IF group to right after
        all possible changes of ALLOK to false.  Now ALLOK will work
        with that averaging option.
        Moved nowhere.

13589.  August 1, 2011         CookBook E               Eric
        Pointed out that Hanning smoothing should be applied once and
        for all with SPLAT since it has gotchas with bandpasses and
        especially in the auto-flagging tasks like RFLAG.  Adjusted
        COOKBOOK.PDF and web copies.
        Moved nowhere (31DEC10 gets it automatically).

13590.  August 3, 2011           RFLAG                  Eric
        Changed the flag writing code and the code calling.  It now
        does the spectral computation and and extension computation
        only on the time bin or bins (at the end of a source) that
        will be dropped following the call to the flagging routine.
        It then writes out the flags only for that time or group of
        times.  This halved the number of flags written in one test
        without making much difference in what was flagged.
        Moved nowhere.

13591.  August 4, 2011            RFLAG                 Eric
        Added option FPARM(13) to clip the data while entering into
        the histogram section of the code and also while entering
        into the flagging section of code.  The data are flagged by
        the clip and the pointer to cause an FG entry to be written
        for the channel/time/BL/IF is set.
        Moved nowhere.

13592.  August 4, 2011            CLCOR               Eric
        Two significant places - opcodes 'EOPS' and 'SUND' - assumed
        that the antenna coordinate system is left handed.  These did
        NOT get corrected in the fall of 2009 as they should have.
        Moved to 31DEC10 this date.

13593.  August 8, 2011           VPFLG                Eric
        VPFLG was actually changed July 14 but no CHANGE.DOC entry was
        made.  That change added to the meaning of DOIFS so that > 0
        meant flag all of an IF if one channel bad and flag all IFS if
        one bad whan DOIFS > 1.  The logic to do this was flawed and
        has now been corrected.  It appears that if DOIFS > 0, the
        code flagged everything during the past month!  Fortunately,
        the counter of flags was also changed to double precision
        float.  A grammar error in the inputs was fixed.
        Moved nowhere.

13594.  August 8, 2011          REWGT                  Eric
        Added INTEXT option to take the OUTTEXT file from RFLAG and
        apply the weight factors once and for all.
        Moved nowhere.

13595.  August 10, 2011       POSSM, BPLOT             Eric
        Added to POSSM, Stokes = 'V' to plot the difference of the R
        and L bandpasses.  Added to BPLOT, STOKES 'I' to plot the
        (R+L)/2 bandpass and STOKES 'V' to plot (R-L)/2 bandpass.
        Added to BPLOT for all table types plotting of real or
        imaginary parts or the difference of real or imaginary parts.
        Moved nowhere.

13596.  August 12, 2011             RSPEC               Eric
        If the last channel was blanked, the task would die rather
        than make the plot.  Fixed the warning error code to 0 after
        heading the warning.
        Moved nowhere.

13597.  August 12, 2011            UVHOL                Eric
        Changed it to display real and imaginary by default with an
        option for amplitude and phase and to display the
        uncertainties in these means as well - all on HOLG.
        Moved nowhere.

13598.  August 13, 2011           SQASH                 Eric
        Rewrote the algorithm  The old one did scatter reads which hit
        the disk these days very badly indeed.  Added weighted average
        (weights found by robust means in SQASH or from a text file),
        weighted and straight rms to the mean, sum, max, min
        operations there previously.
        Moved nowhere.

13599.  August 15, 2011           RFARS                 Eric
        NEW TASK: It corrects the input cubes to FARS (or DOFARS) for
        the rotation measure at the maximum as found from the FARS
        output by AFARS.  Corrected typo in SQASH extension file
        copying.
        Moved nowhere.

13600.  August 17, 2011            FLOPM                Eric
        Changed it to copy all times for the table copying and to copy
        the CL table if DOCAL false.  Previously it copied the tables
        only for the time range of the correction (plus 15 minutes on
        each side) and surpressed the CL table (making a null one).
        Moved nowhere.

13601.  August 18, 2011            MC table times          Eric
        Despite indications otherwise, the times in MC tables are
        start times rather than mid-point times.  Added an interval
        keyword to the MC table definition and corrected the
        indication about times.   Changed
        MCINI    Added DELTAT argument in days, stored as keyword with
                 default 2 minutes.
        MCTAB    Change time meaning pn precursor remarks.
        MCSEL    Added parameter to MCINI call sequences
        GETMC    Added DELTAT as call argument, corrected comments,
                 Changed TRANGE to be DELTAT if > 0, else 2 minutes
                 and change usage so that times in MC table are the
                 start of intervals.
        TABLEUTIL   Made corresponding changes to the OMCINI, OTABMC,
                 and OGETMC pass-through routines.
        FITLD    Add a DELTAT to the calls to MCINI, GETMC.
        FXPOL    Add a DELTAT to the calls to MCINI.
        INDXR    Add a DELTAT to the calls to OMCINI, OGETMC and carry
                 it around in a common.
        Moved nowhere.

13602.  August 19, 2011          Memo 114               Eric
        Changed AIPS Memo 114 for changes to MC table (DELTAT keyword)
        and TIME is at start not middle of interval.
        Moved nowhere.

13603.  August 22, 2011         TVFLG, SPFLG            Eric
        They did not clean up after long source names in the CURVALU
        like display since the blank string used was only 11
        characters long.  NOw it is 16 which is the upper limit.
        Moved nowhere.

13604.  August 24, 2011           TVFLG                 Eric
        Added FLAG BASELINE-DT operation to the Fortran and to the
        help (explain) and real-time help files.  One selects the
        baseline and time range with the cursor and can do multiple
        such baseline-dt's before returning to the main menu.
        Moved nowhere.

13605.  August 24, 2011             RFLAG                 Eric
        Corrected the labeling of the spectral plots - it was slightly
        off.  Also changed it to put a full channel blank in between
        each IF.  Previously there was no blank space except at the
        start and end of the full plot.
        Moved nowhere.

13606.  August 25, 2011        TVFLG, RFLAG            Eric
        TVFLG - lost a useful command when there was only 1 spectral
        channel since I added a command to that column and did not
        change the column-length correction for single channel.
        RFLAG - the spectral plot ranges required that the first VPARM
        of the pair be >= 0.0 and < the 2nd of the pair.  Changed the
        first test to be < Ymax of the plot.
        Moved nowhere.

13607.  August 26, 2011            TVFLG                Eric
        I made things worse yesterday with column 4 losing all its
        options on about the 7th command.  Fixed that and a pointer
        into the clip function as well.  De Sade's law again.
        Moved nowhere.

13608.  August 27, 2011            DOOSRO               Lorant
        Noticed that the channel averaging logic for FRING that I put
        in last month had twisted logic. Tried to untwist it here.
        Moved nowhere.

13608.  August 30, 2011        Returned adverbs             Eric
        Waiting for adverbs should not require the task returning them
        to finish if it can return the adverbs sooner.  (RQUICK is
        DOWAIT.LE.0.0.)  Changed:
        AU2      Drop the section that forces DOWAIT TRUE when there
                 are return adverbs
        INPUT    Add local method OUTQAV to return adverbs and resume
                 AIPS when RQUICK is true.
        FINDR    No speed up here - must add call to OUTQAV ahead of
                 the OUT2AV call to handle the 2 possible values (now)
                 of RQUICK.
        SLFIT    Changed it to force QUICK false since there can be no
                 speed win here.
        SETFC    NFIELD is not known until the end so force RQUICK
                 false and do usual resume at end.
        RLDIF    Drop immediate resume on RQUICK.  Put quick resume
                 and return 0.0's when spectral line and/or doapply
                 are true and DOCRT <= 0.  Force RQUICK false when
                 we are returnig real values in CLCORPARM.
        SOUSP    Drop immediate response to RQUICK and set RQUICK
                 false if confirming a change to the SU table.  If the
                 SU table is to change, the terminal is needed to
                 confirm this, so nothing can happen until the task is
                 finishing anyway.  Send the adverbs back and resume
                 AIPS if RQUICK is still true after the fitting
                 routine but before the plot routine.
        GAL      Drop immediate response to RQUICK, set RQUICK false
                 on errors, restart AIPS with parameters on RQUICK
                 right after the fitting before plotting, printing,
                 and output image.
        EVAUV    Drop immediate RQICK response, set it false on error,
                 return answers before doing plots if RQUICK.
        Moved nowhere.

13609.  August 30, 2011            RFLAG                Eric
        Changed for above and to correct minor errors:
        1. In MAIN routine, force RQUICK false on errors and branch
           to close calls.  If RQUICK, do a call to return adverbs
           and resume AIPS after the NOISE and SCUTOFF values are
           known (after plot before flagging).
        2. In init routine, resume AIPS on get parameter failure only,
           ignoring RQUICK initially.
        3. Changed test on ignoring of CL or SN to check only that
           applying to the multi- or single-source nature of the data.
        4. Moved the progress messages above the branch back on
           UVRANGE so that they will appear even if there is a
           UVRANGE.
        5. Corrected typo in UVRANGE test causing them to fail.
        6. Dropped a premature change of UVRANGE units internally that
           could cause failure in the flagging.
        7. Moved the computation of end points for the NOISE and
           SCUTOFF line plots so that it would occur even if the
           current line does not fit on the plot.
        Moved nowhere.

13610.  August 30, 2011             IMEAN                Eric
        Changed PIXSTD, PIXAVG to solely output adverbs.  Changed to
        get the initial guess for these either from the header
        keywords or from a robust fit to the image (or a sub-image if
        the image is too large).  Changed to ignore RQUICK at the
        start, to make it false for error branches, and to return the
        fit as soon as it is available if RQUICK is true (adverb
        DOWAIT false).
        Moved nowhere.

13611.  August 30, 2011         IMFIT, JMFIT             Eric
        Wrote new WaWa IO routine TINBEG to start an interactive task
        ans force DOWAIT to true.  A more subtle usage is not needed
        for IMFIT and JMFIT.  Changed IMFIT and JMFIT to use TINBEG
        and to do printing on the CRT with DOCRT > 0 and line printer
        with DOCRT < 0 and no printing with DOCRT=0.
        Moved nowhere.

13612.  August 30, 2011           CALIB                 Eric
        In working on OOCAL, realized the impossibility of DOCALIB
        true for single-source files - two SN tables which cannot be
        combined to write any output file.  Added notes in the help
        file and code and a message in the Fortran forcing DOCALIB to
        -1.0 for single-source files.
        Moved nowhere.

13613.  August 31, 2011              IMAGR                Eric
        Adjusted the wording in the help file regarding the
        restoration of multi-scale Clean components.
        Moved nowhere.

13614.  August 31, 2011       IMFIT, ISPEC, etc        Eric
        Changed DOCRT in IMFIT, JMFIT, ISPEC, RSPEC and created this
        adverb in POPSDAT and NEWPARMS.  Initial value 0 => no print.
        New help file also.
        Moved nowhere.

13615.  September 1, 2011          UVAVG                   Eric
        UVAVG computed subarray number with an exagerated sense of the
        accuracy of floating point numbers and so got the wrong answer
        a lot.  Furthermore, it did not keep track of subarray
        properly in the averaging routine and so did not average any
        subarray but the first encountered.  The calibration adverbs
        would not work for all subarrays anyway.  Corrected the first
        two errors and changed the code to loop over subarray.  This
        may result in a data set no longer in time order.
        Moved nowhere.

13616.  September 1, 2011            RFLAG                Eric
        changes:
        1. Error in the init routine skipped restarting AIPS - fixed
        to set RQUICK and branch correctly so that restart happens
        properly.
        2. Clip by FPARM(13) mixed time subscript methods.  Wrong time
        was marked in the to be flagged list.
        3. On time RMS clip, set unflagged to be flagged but not
        previously flagged ones.  Also if no samples valid in the
        channel/IF time group, set only previously unflagged to be
        flagged (if this matters).
        4. On failure of the fit in spectral flagging, set previously
        unflagged channels to be flagged - they were simply marked as
        previously flagged which could leave them as unflagged.
        5. Drop a debugging parameter.
        Moved nowhere.

13617.  September 1, 2011           REFLG               Eric
        Added a spread of the start and stop times of the flags by
        0.1sec.  Fixed a status issue in cleaning up the header at the
        end.
        Moved nowhere.

13618.  September 2, 2011       TVFLG, SPFLG             Eric
        Changed to give times to 0.1 sec in all displays when the
        interval is < 10 sec.  Wrote new subroutine TIDHMS to support
        this.
        Moved nowhere.

13619.  September 2, 2011     UVCOP, PRTUV                Eric
        Created subroutine FINDVO to make a list of visibility ranges
        within a data set based on the index table with source, time,
        subarray, and freqid selection.  Dropped FNDVO (the source of
        FINDVO) from PRTUV and changed it to use FINDVO.  Changed
        UVCOP to use use FINDVO to make life easier and faster when
        possible.
        Moved nowhere.

13620.  September 5, 2011          VPLOT                  Eric
        VPLOT used LUN 30 when doing its flagging option.  This
        collides with usage in the calibration package when applying
        calibration and/or flagging.  Changed the special option LUNs
        to 70 and 71 which should be safe.
        Moved nowhere.

13621.  September 6, 2011         RLDIF                  Eric
        Changed DOCRT to DOPRINT since 0 means none like the other
        DOPRINT usages but unlike the usual DOCRT usage.
        Moved nowhere.

13622.  September 6, 2011          CookBook             Eric
        Slight upgrade of wordings in Chapter E; updated COOKBOOK.PDF
        with new version.
        Moved nowhere.

13623.  September 7, 2011          ISPEC                  Eric
        Added OPTYPEs for LOG10 and LN in both flux and average.
        Moved nowhere.

13624.  September 7, 2011          IMEAN                 Eric
        Corrected typo which made the robust guessing of the mean and
        rms ahead of the fitting for it failed unless there were more
        than 2 planes on the 3rd axis (L3 was just 3)
        Moved nowhere.

13625.  September 8, 2011          XMOM                 Eric
        Added OPTYPE = 'MAX' to write out images of the value at the
        maximum in each row and of the coordinate at that pixel.
        Moved nowhere.

13626.  September 8, 2011          IMAGR               Eric
        Changed IMAGR.FOR (and help) so that SUBARRAY=0 will actually
        work as advertised when DOCAL and friends are used.  There are
        many places that open the UV data set even before it is read
        to copy to the imaging work file.  The request SUBARRAY=0 had
        to be saved in a parameter passed around and overridden until
        it could be invoked under loop control.  the logic of ALLOKAY
        also had to be rearranged in the code to allow the looping
        over subarray.  Anyway, it works I think.
        Moved nowhere.

13627.  September  9, 2011        Stars                  Eric
        (1) Created new adverb STVERS for STar position version
            number.  Changed POPSDAT and NEWPARMS to create it and
            STARS, CNTR, GREYS, KNTR, PCNTR, and PROFL to use it.
            STVERS < 0 => no star plot so the Fortran as well as the
            help had to be modified.  Changed AU2A for DEFAULT value
            -1.  Also new help file.
        (2) Created missing STINI and TABST service routines.
        (3) Changed STARPL and STARS to use STINI and TABST.
        Moved nowhere.

13628.  September 10, 2011        JMFIT, SAD              Eric
        Changed IMFIT, JMFIT, SAD to offer the option of writing a
        stars file attached to the input file.  The "stars" are
        ellipses recorded in a new or pre-existing ST table and may be
        plotted with TVSTAR and many tasks such as KNTR, GREYS, etc.
        Moved nowhere.

13629.  September 12, 2011        REFLG                Eric
        Added SOURCES and CALCODE to limit the number of sources that
        have to be read.  Changed also so that if there are no records
        in the scratch area, the number of sources is set to zero.
        The extra flagging work can help with generic flags too but
        an error had to be corrected.  It should and now does ignore
        flags that are already antenna dependent rather than baseline
        dependent.
        Moved nowhere.

13630.  September 13, 2011         FGDIF               Eric
        Found several errors:
        (1) did not handle IFs=n,0 correctly (is n,max) when reading
        flags.
        (2) compted baseline number wrong in one loop over all
        antennas to a single antenna
        Changed to adverbs SOURCES, CALCODE, and CPARM(4), the latter
        as the maximum number of details differences to be printed
        (with 100 as default).
        Moved nowhere.

13631.  September 13, 2011           IMEAN              Eric
        Changed format in output text file to simply print the double
        precision counters even if 0 with an F14.0 format rather than
        do an integer conversion and I9 (good to 1 billion only).
        Moved nowhere.

13632.  September 13, 2011          TVHELIX             Eric
        Added DOPRINT in AU6 to control the printing of the current
        parameters, the printing of which was added to TVHELX.  Also
        corrected a couple of errors pointed out by Dave Green and
        added a reference to a published paper on the algorithm.
        Moved nowhere.

13633.  September 14, 2010          FRING                Eric
        The EVLA option (APARM(5)=3) was setting the multi-band delay
        in the output which is not correct.  Only the APARM(5)=1 or 2
        should set it.
        Moved nowhere.

13634.  September 14, 2010          IMEAN               Eric
        Changed to compute the histogram even if there is no intention
        to plot it.  This lets the print routine function as
        intended.  Corrected incorrect vaiable name, long variable
        name, and lower case comment characters earlier.
        Moved nowhere.

13635.  September 19, 2011           RFLAG               Eric
        1. Added a parameter to remember whether an outout table is
        time sorted and to mark it as such at the end.  It is very
        unlikely to be of any use.
        2. Put test for any valid values in routine that finds the
        medians of the channel rmses.
        3. Rearranged code so that the flags will be in time order.
        This means that at scan ends the flags will still not
        encompass the time range of the current list of times.
        Moved nowhere.

13636.  September 19, 2011            PRTAB              Eric
        Added more control over formats for number and rows and row
        number.  Changed the scaling routine to read no more than 5000
        table rows.
        Moved nowhere.

13637.  September 19, 2011       Table sorting            Eric
        Changed:
        ZMIO     Allow IO ops up to 128 Mega words
        ITBSRT   ICSORT can do up to 204800 items in a list.  Fixed to
                 know this rather than the old 1024 limit.
        TABSRT   Put in an upper limit to the buffer size that is
                 acceptable to ZMIO for use in OTBSRT.
        Moved nowhere.

13638.  September 19, 2011           REFLG               Eric
        The input FG table does not need to be time sorted so dropped
        that sort.  Changed the other use of TABSRT to use a large
        dynamic memory, potentially large enough to hold the whole FG
        table in RAM or at least be the max size of the pseudo AP.
        Corrected a bug handling compression to antenna-based flags
        which made something of missing antennas.  Made sure the
        output FG table number of rows was controlled by the final
        write.  Old rows were being kept at the end.
        Changed advice on CPARM(1) to slightly less than the normal
        interval and dropped a scaling by 1.001 in the code.
        Changed to issue UVGET ('CLOS'..) always - READ statuses were
        building up when sources are missing.
        Moved nowhere.

13639.  September 19, 2011           FGDIF               Eric
        Dropped both uses of TABSRT - the input FG table files do not
        need to be time sorted.  Changed the detailed display to show
        times to 0.1 sec.
        Changed advice on CPARM(1) to slightly less than the normal
        interval and dropped a scaling by 1.001 in the code.
        Moved nowhere.

13640.  October 3, 2011           IMEAN                Eric
        Corrected a call sequence issue to MINIT - the full image size
        was needed not the subimage size.
        Moved nowhere.

13641.  October 3, 2011         TABSRT               Eric
        Dropped buffer and buffer size from call sequence and added
        KEYSUB(2,2) for subscripts into KEY columns.  Added dynamic
        memory allocation for work buffer.
        Changed TABSRT call sequence and to give null KEYSUB:
        BPASET   CALADJ   CCMERG   CLSORT   FRQUPD   IMSORT   SDGET
        UVGET    TABLE(TBLSRT)
        ANCAL    ATMCA    BPSMO    CLCAL    CLSMO    FITAB    FITLD
        FQUBE    INDXH    LISTR    MFPRT    PCLOD    REFLG    REWAY
        TASRT    TYAPL    TYSMO    UVCOP    BPASS    CALIB    CVEL
        FRING    KRING    SDVEL    APCAL    BPLOT    IBLED    SPFLG
        TVFLG    WETHR
        Other changes:
        CALADJ   corrected subroutine name in error messages
        CLSORT   new call sequence but no one calls it so forces no
                 other changes
        FRQUPD   Drop WORK and WRKSIZ from call seq
        IMSORT   Drop WORK and WRKSIZ from call seq
        UVFIX    Correct call sequence to FRQUPD, drop WORK buffer.
        BPASS    Correct call sequence to FRQUPD.
        FITLD    Correct call sequence to IMSORT
        INDXH    Correct call sequence to IMSORT, change buffer to
                 size 512 as needed for tables.
        Made siomilar changes dropping variables and buffers if they
        are no longer needed.
        Moved nowhere.

13642.  October 3, 2011       UVSRT, TAPPE               Eric
        UVSRT    Still had the 1024 limit of initial sort.
                 Performance is improved with more memory and more
                 sorting in the initial pass.  Drop local copy of
                 ICSORT.
        TAPPE    Changed to do the sort on the two input files if
                 needed.  Then they are read and merged in the sort
                 order with a check to drop duplicates when the sort
                 keys are equal.
        Moved nowhere.

13643.  October 3, 2011         OFMLIST                Eric
        Corrected the formats in OFMLST to manage the higher range of
        input numbers now available.
        Moved nowhere.

13644.  October 4, 2011            SDIMG              Eric
        Drop local copy of ICSORT and change it to know that 204800 is
        the maximum number of sorts it can do.  Changed image limit
        from 4096 to MAXIMG.
        Moved nowhere.

13645.  October 4, 2011             TECOR             Eric
        TECOR would die if a source number was mentioned in the CL
        table and not in the SU table.  This can arise from e.g. SPLAT
        with source selection.  Changed it to blank the output.
        Moved nowhere.

13646.  October 4, 2011           TVFLG, SPFLG           Eric
        If the Stokes type is changed on reading the data, such as
        from RR/LL/RL/LR to I/Q/U/V these tasks would prepare flags as
        if the data were in the translated form.  This would not
        achieve the desired result.  Rather than get fancy, made any
        translated flagging flag all correlators at all times.
        Moved nowhere.

13647.  October 4, 2011             SETJY               Eric
        Changed the cutoff for display old parameters.
        Moved nowhere.

13648.  October 6, 2011          DOFARS                 Eric
        The weights file name had an inadverntant comma.  Changed to a
        period.
        Moved nowhere.

13649.  October 7, 2011            RFLAG                 Eric
        Added FPARM(14) option to flag any channel/IF/time with fewer
        than F(14) baselines on input to the algorithms.  This is sort
        of a "quack" operation.
        Moved nowhere.

13650.  October 10, 2011         TVCOLORS                Eric
        Added values to enter when TV is missing.
        Moved nowhere.

13651.  October 10, 2011          SL2PL                  Eric
        Allow PIXRANGE to be 200 times larger than in the data - up
        from 50 times.
        Moved nowhere.

13652.  October 10, 2011            NOIFS                Eric
        The COPTAB routine was not updated when several xxSEL
        subroutines had BPOL, EPOL added to them.
        Moved nowhere.

13653.  October 10, 2011           PCAL                  Eric
        Changed it to copy with cal and flagging a full IF to a
        scratch file and then to read that file for the individual
        channels data.  Should be faster...
        Moved nowhere.

13654.  October 11, 2011          TABSRT                Eric
        TABSRT ran into trouble destroying the scratch files it had
        made since a buffer of 256 words had become only 2 for dynamic
        memory usage.  Made it 256 again.
        Moved nowhere.

13655.  October 12, 2010          PCAL                  Eric
        Wrote subroutine CATFIX to force the status of a file to
        something desired or to e.g. NOT READ but allow no status or
        WRIT status.
        PCAL: 1. Changed default SOLINT to 5 minutes
              2. Added calls to FIXCAT to defend against READ status
              when needing to create a PD and a CP file.
              3. Added PCLNDX subroutine to examine the NX file to see
              if there is only one scan with the requested SOLINT.  In
              that case a SOLINT is forced equal to 1/3 of the length
              of the scan (seemed to be better than 1/2).
        Moved nowhere.

13656.  October 13, 2011        SETJY, SOUSP             Eric
        Changed SETJY to use APARM(4) as the channel to which the
        fluxes should be referenced in CALC mode with default
        (1+Nchan)/2.0.  The frequencies used will be displayed and put
        in the HI file.  Different ref channels may be used by running
        SETJY with different BIF, EIF, APARM(4).
        Changed SOUSP to read the HI file to find the real frequencies
        to use with the SU data.  It takes the last value found for
        each IF.
        Moved nowhere.

13657.  October 13, 2011         CALIB, BPASS             Eric
        Added calls to CATFIX in CALIB and BPASS just ahead of their
        creation of output tables to make sure there are no READ flags
        on the data set.  Fixed infinite loop in the history file
        writing of GAINERR - only done on GCON mode solutions in
        CALIB.
        Moved nowhere.

13658.  October 16, 2011        DOFARS                Eric
        RSPEC now uses DOPRINT rather than DOCRT.  Fixed procedure
        DOFARS to use the new adverb.
        Moved nowhere.

13659.  October 16, 2011         FARS                 Eric
        The initialize routine was very confused as to its error
        return variable and got it rather wrong in some cases (such as
        missing weights file).
        Moved nowhere.

13660.  October 16, 2011            POSSM             Eric
        SOLINT affected BP plots but not in any deliberate or good
        way.  Fixed code to set SOLINT=0.0 internally on BP plots.
        Fixed error messages to say the right subroutine name.
        Moved nowhere.

13661.  October 17, 2011           QUACK               Eric
        Changed the default time adjustment from 5 to 0.5 sec.
        Moved nowhere.

13662.  October 17, 2011            IMAGR                 Eric
        Added adverbs to control the TV timeout lengths (first time,
        later times) as IM2PARM(8 and 9).  Implemented in QCLEAN
        including TELL.
        Moved nowhere.

13663.  October 24, 2011        UVFIT, DVDMIN            Eric
        DVDMIN: cleaned up parameter formats so that lines do not wrap
        UVFIT:  Added INLIST option to read in up to 20 components
        with initial guesses and whether to hold fixed or solve for
        each of the parameters.  Each line has a spectral channel
        first and only those lines matching BCHAN are used in any
        execution.  Raised number of allowed vis by a lot.  Improved
        formatting of output.  Added default GMAX of 1.0 - the task
        did not iterate when it was 0 previously.
        Moved nowhere.

13664.  October 24, 2011           ELINT               Leonia
        ELINT has printed out all 3 coefficients of the fitted
        polynomial at the each plot, but only one (the first)
        coefficient at the display. It's fixed.
        Moved nowhere.

13665.  October 24, 2011          ZFIO                 Eric
        I messed up a delicate balance where ZFI2 was used by message
        write as well as other things and the message was passed back
        to higher routines that separated them.  It needs a 2-line
        message so made a ZMSFI2.C for messages and changed ZMSGDK to
        call it.
        Moved nowhere.

13666.  October 25, 2011       TVFLG, SPFLG                  Eric
        Found bug in GRIDTB and GRIDTC which assumed that ICOR0 and
        NCOR were known for the input data although with the previous
        use of UVGET (to find times to grid) they now applied to the
        output. This messed up the actual Stokes displayed - although
        the task correctly told what it was displaying.  You ask for V
        and get RR.  Force correct setting of parameters for the input
        file through an additional UVPGET call.
        Moved nowhere.

13667.  October 26, 2011           ISPEC                    Eric
        Added OPTYPE = 'DERI' with adverb FACTOR to plot the per
        channel difference of a FLUX plot rather than the FLUX plot
        itself.  Useful for Zeeman plots and the like.  FACTOR scales
        only DERI plots.  Corrected all operations so that smoothing
        is done before the conversion to log, ln, or derivative and
        the finding of the default plot scale.  Conversion to log was
        done ahead of smoothing previously - probably with curious
        results.
        Moved nowhere.

13668.  October 26, 2011            CLCOR                   Eric
        The code had a "pause" statement in it!  Antique math code is
        really rather bad Fortran.
        Moved nowhere.

13669.  October 27, 2011            CLCOR                  Eric
        The subroutine that used the STNHT function declared it to be
        REAL when in fact it is DOUBLE PRECISION.  Changed that a
        couple of other variables to DOUBLE.
        Moved nowhere.

13670.  October 27, 2011            BPLOT                  Eric
        Changed ANTENNAS so that a negative means exclude the list.
        Changed the plotting which was trying to count the number in a
        given plot and getting confused by single times being
        blanked.  This does mean that antennas that are all blanked
        will appear in 'TA' plots unless excluded via ANTENNAS.  No
        plots will be generated that are all blank however.
        Moved nowhere.

13671.  October 28, 2011            TYAPL                  Eric
        The routine that went after new SY (and TY) data from the
        tables had a parameter designed to reduce the work.  This
        caused it to fail to get needed new data when there were gaps
        in the table for some but not all antennas.  These can arise
        due to flagging which is now applied to the SY and TY tables.
        This bug was found when it made Nan's in the output for one
        time - but it incorrectly applied the SY table over a
        substantial period up to that time.  Found a couple old debug
        messages still in the code and several typos that could have
        affected the portion of code that undoes a previous correction
        in order to do a new one.  That portion is probably rarely
        used.
        Moved nowhere.

13672.  October 28, 2011             ISPEC               Eric
        Changed DERI into ADER and FDER which scale as average and
        flux functions.
        Moved nowhere.

13673.  October 29, 2011             REWAY                Eric
        Added BPARM(1) to set weights to 0 if fewer than BPARM(1)
        samples occur in the rms computation.
        Moved nowhere.

13674.  October 31, 2011            UVFIT                 Eric
        The task used the minimum offset and minimum size to determine
        prefixes and so used nano-asec and overflowed the output
        formats.  Changed to use maximum.  Added FITOUT option to
        write a text file with a compact but complete display of the
        fit results.
        Moved nowhere.

13675.  October 31, 2011        Gridded subtraction         Eric
        For Halloween - changed limit on doubling of grid from 4096 to
        8192.  Gridded models can now be 16K on a side.  Subroutine
        GRDAT sets this and FORCED reflects it in choosing DFT for
        really large images.
        Moved nowhere.

13676.  November 1, 2011        CALREF failures           Eric
        Users are worried about messages from CALREF about it being
        unable to relate antenna N to M.  These can be caused from the
        calling tasks asking for re-references that are not needed.
        In particular, FRING, KRING, CALIB, and CLCAL need to keep a
        list of reference antennas as a function of subarray.  Then
        in looping over antenna, subarray, polarization they will only
        ask for antennas that were used as refernces withing the
        particular subarray.  This will save both work and heartache.
        Subroutines CALADJ and SNAPP used by CLCAL (only) need to have
        their call sequences changed and to use/set the list by
        subarray.
        Moved nowhere.

13677.  November 2, 2011            NANS                   Eric
        Wrote a NEW TASK to count NaNs in UV data sets.
        Moved nowhere.

13678.  November 3, 2011            XAS                    Eric
        Changed init.s and xas.h to have a new user option startIconic
        with default 0 (start open).  Added option to XAS help file.
        Moved nowhere.

13679.  November 3, 2011            BPLOT                   Eric
        The help file limits IFs to 1 - 28.  Fixed upper limit to 90.
        Moved nowhere.

13680.  November 3, 2011            VPLOT                   Amy
        Changed MSAMP from 2000000 to 10000000, because of the size of
        some EVLA data sets.  This will probably will not be sufficient
        for many experiments.
        Moved nowhere.

13681.  November 3, 2011              FLATN                Eric
        Added code to keep CC files from being copied to the output
        image.  It only copies those of the first input image and so
        is not useful.
        Moved nowhere.

13682.  November 7, 2011          DBCON                   Eric
        Corrected parameter MXANT of 45 to MAXANT and fixed a variable
        typed in lower case.
        Moved nowhere

13683.  November 7, 2011              PRTAB                Eric
        Corrected the comparison for string to use only the characters
        given in KEYSTRNG.  Add info to help on this.
        Moved nowhere.

13684.  November 7, 2011           RFLAG                   Eric
        Corrected copying of old FG table to omit any flag records
        that were flagged before RFLAG.  Previously, it reinstated
        them.  Discovered that UVRANGE caused all data outside the
        range to disappear - it did not do that at some time in the
        past but now did.  Added code to check for data completely
        missing and skip them rather than generate flags for them.
        Moved nowhere.

13685.  November 8, 2011        SPLAT, UVCOP              Eric
        UVCOP contained a version of FLGINI for no good reason and it
        was an out of date version.  UVCOP did not die on error from
        flagging tables, but error was unlikely.
        SPLAT failed to flag tables since the FG file was not opened.
        It produced a ton of messages since it did not quit on error.
        Moved nowhere.

13686.  November 9, 2011          QCREATE                Eric
        To create large files quickly but with some dangers as an
        option other than the slow but safer filling with zeros.
        DCRE.INC   Special include for quick create integer
        GTPARM     Pick up quick create value from GO
        AU2        Get adverb value QCREATE if possible - else error
                   message suggesting a compress - and pass it on GO.
        AU2A       Default QCREATE is -1
        POPSDAT    QCREATE added
        NEWPARMS   QCREATE added
        ZDCHIN     Inite QCREAT parameter as -1.
        ZCREAT     Pick up CREAT parameter and pass along to ZCREA2
                   with all files <= 1 Mbyte false.
        ZCREA2.C   $APLUNIX: changed call sequence.  If quick create,
                   do an lseek almost to the requested end of file and
                   write the last buffer+ of bytes to make the file
                   look as long as it is supposed to be.  Otherwise do
                   as we always have and fill the whole thing with
                   0's.
        GO         Help file: add QCREATE
        QCREATE    New help file
        Moved nowhere.

13687.  November 9, 2011         NANS                    Eric
        Added testing for INDE (magic blank value).
        Moved nowhere.

13688.  November 9, 2011           NANS                Eric
        Corrected starting vis number - it was one too high causing a
        read off the end of file sometimes..
        Moved nowhere.

13689.  November 10, 2011         IMEAN                Eric
        Corrected window setting for the robust fit when DOINVER is
        true.  ABORTs happened before the fix.  Also changed it to
        use the full image in X and Y in the robust fit, honoring only
        BLC/TRC(3-7) when DOINVER is false.
        Moved nowhere.

13690.  November 10, 2011       ZCREA2                  Eric
        Update $APLGEN/ZCREA2.FOR and $APLDEC/ZCREA2.C for the new
        call sequence and in the latter for the new function.
        Moved nowhere.

13691.  November 10, 2011      FITTP, FITAB             Eric
        Wrote new ZRLRUV routine which is ZRLR32 but with no checking
        for magic blanks.  It is possible for u, v, w, or visibility
        data to have the exact magic blank value (3140.89282)
        accidentally.  This then puts NaNs in the FITS file which CASA
        cannot handle.  Changed FITTP, FITAB to use ZRLRUV for UV data
        but not for images or tables which can have magic blanks.
        Moved nowhere.

13692.  November 10, 2011        SNEDT, EDITA           Eric
        Changed QEDIUTIL - on a narrow TV window with a bunch of
        points it was possible for FLAG ABOVE and FLAG BELOW to start
        searches for samples at counters < 1 or > maximum.  This led
        to references to addresses that were unintended and thence to
        aborts.  Put in sensible limitations.
        Moved nowhere.

13693.  November 10, 2011        ELINT                   Leonia
        The format E9.3 has been used for the first term of the fitted
        polynomial. So 3 digits after the decimal points have been
        printed out. It may not be enough. So the format is changed
        for E10.4 .
        Moved nowhere.

13694.  November 11, 2011            ZMSFI2                Eric
        The error messages needed a new-line command at the end.
        Moved nowhere.

13695.  November 11, 2011       AU2 (AIPS)                  Eric
        The message in Go about using COMPRESS to get QCREAT was
        expanded into explicit detail.
        Moved nowhere.

13696.  November 11, 2011            TYAPL                Eric
        The algorithm for finding the needed SY samples in the SY
        table was not adequate when there is any serious editing.
        Modified details and added a section of code to make sure the
        best job possible is done in findng samples to interpolate.
        Four copies of all changes had to be made (TY/SY and file 1
        and 2).  Added tests for having to extrapolate - counts all
        that extrapolate more than 0.03 sec and prints info about
        those extrapolating by more than 10+ seconds (up to a maximum
        print count).
        Moved nowhere.

13697.  November 11, 2011      FRING, RLDLY            Eric
        Changed AVERT to use UVGET rather than UvINIT so as to read
        only the desired data rather than much of the data file.
        AVERT checks the integration time at the start of these tasks.
        This simpler version led to a simpler call sequence, so
        changed FRING and RLDLY to match.  In my data set, a 15 minute
        job became less than 0.5.
        Moved nowhere.

13698.  November 12, 2011      CALIB, FRING, KRING, CLCAL     Eric
        CALREF would report failures to re-reference even though there
        were no records for the "old" reference antenna and hence
        none needing re-referencing.  Added counter to CALREF to make
        sure before issuing the error message (and error return).
        Moved nowhere.

13699.  November 14, 2011            PCAL                Eric
        My new copying of an IF's worth of channels to a scratch file
        followed by copying the needed channel to the actual work file
        got tripped up by flagging.  The task needs to count the
        actual number of vis records in the IF-scratch file and reuse
        that count as NVIS for each channel.
        Moved nowhere.

13700.  November 15, 2011         NXTFLG              Eric
        Fixed the format that say too many flags to work.
        Moved nowhere.

13701.  November 15, 2011         TYAPL               Eric
        Added DOACOR = .TRUE.
        Moved nowhere.

13702.  November 16, 2011     FRING, RLDLY               Eric
        Improved the error messages in FRING subroutine FRNALL to be
        those of FRNSRC to explain when excessive FFTs are requested.
        Changed both to allow FFTs 2*MAXIMG in size.
        Change $QPSAP versions of QXFOUR, QCFFT, QRFFT to allow FFTs
        twice as big as before.
        Moved nowhere.

13703.  November 16, 2011      VLBAUTIL/VLBAFIX          Amy
        VLBAFIX  is supposed to separate frequencies if more than one
        existed in a data file.  It did not seperate S/X data properly.
        Fixed.
        Moved nowhere.

13704.  November 17, 2011         PCAL                   Eric
        Raised internal arrays from 20 thousand time averaged cal
        samples to 50 thousand.
        The task could not handle having an entire IF flagged.  The
        new line code messed things up and the older portions would
        still process the "data" with NVIS=0.  That was very bad when
        DOMODEL is true.  Now it traps NVIS becoming 0 and handels it
        fairly well (solutions are 0).
        Moved nowhere.

13705.  November 17, 2011          DOBAND                Eric
        The application of bandpass corrections for autocorrelations
        used the real part of the BP function only.  For LL and RL it
        needs to use the amplitude of the BP function and for RL and
        LR it should take into account the phase.  That makes
        autocorrelation bandpass corrections into the same function as
        cross correlation functions other than the happenstance that
        the two antennas are the same.  Shortened DATBND to make this
        change.
        Moved nowhere.

13706.  November 21, 2011       SPLIT, SPLAT            Eric
        The code handling CALCODE when looping over sources forgot to
        handle the special cases ('*', '-CAL') and so these did not
        work.  Corrected.
        Moved nowhere.

13707.  November 21, 2011          RLDLY               Eric
        Added PRTLEV as an adverb to allow for diagnostic displays.
        Moved nowhere.

13708.  November 21, 2011         RLDLY                 Eric
        Made local copy of CALCOP and changed it to copy only
        baselines to REFANT.  Makes things smaller.
        Changed dimensions of one variable from MXANT to MXBASE which
        caused MACs to fail.  This was correct in FRING.
        Moved nowhere.

13709.  November 21, 2011             CLCAL                 Eric
        A failed solution in an SN table is shown with 0 for reference
        antenna and -1 for weight.  The smoothing routine which allows
        getting rid of the blanks checked for <= 0 weights and set
        them to 1.0.  Added code to set the reference antenna also to
        the desired REFANT.  The routine that interpolates SN to CL
        did not like reference antennas that did not match (as in 0
        and REFANT).  This led to discontinuities in the
        "interpolation".
        Moved nowhere.

13710.  November 23, 2011           RFLAG                 Eric
        Added option to flag the data and then plot the result.
        This uses DOPLOT < 0 and applies the flag table just written
        to generate the plots.  The TYAPL code for applying a large
        FG table was included (DATFLG and NXTFLG with special local
        include).
        Moved nowhere.

13711.  November 24, 2011           UVFIT               Eric
        Added the start and stop time in days to the FITOUT text.
        Added more info about FITOUT to the help file.
        Moved nowhere.

13712.  November 25, 2011         maintenance             Eric
        Updated the TAB completion file HLPIT.LIS
        Corrected the copyright on LSAPROPO.HLP
        Updated the about files:
        ADVERB    ANALYSIS  CALIBRAT  EDITING   EXT-APPL  GENERAL
        IMAGING   INFORMAT  INTERACT  MODELING  PLOT      POLARIZA
        POPS      PROCEDUR  RUN       SPECTRAL  TABLE     TASK
        TV        UTILITY   UV        VERB      VLA
        Moved nowhere.

13713.  November 25, 2011           CLIP                  Eric
        A bit of bad logic kept CLIP from flagging cross-hands because
        they were bad.  It really only got cross-hands when the
        parallel were bad.
        Moved nowhere.

13714.  November 26, 2011          RFLAG                Eric
        Corrected
        GINITL    It closed the TV on error - attempts to finish the
                  plot thereafter hung out to dry.
        RFLAG     The history routine messed up the values of UVRANGE
                  so the plot routine done following flagging found no
                  data.  Changed to use local variables in the history
                  routine.
        Moved nowhere.

13715.  November 27, 2011      TEK, MSG servers           Eric
        Changed XASERVERS and UNIXSERVERS to honor the environment
        variables AIPS_TEK_HOLD and AIPS_MSG_HOLD.  These cause xterms
        to set -hold to hold the window even if the program inside it
        fails.  This gives lots of time to review any messages before
        having to remove the window manually with the window manager.
        The TEK will also come up not in icon form.  UBUNTU 11.04
        systems seem to hide things that start in icon form and then
        not run the TEK server properly.
        Moved nowhere.

13716.  November 27, 2011           ACLIP                  Eric
        A bit of bad logic kept ACLIP from flagging cross-hands because
        they were bad.  It really only got cross-hands when the
        parallel were bad.
        Moved nowhere.

13717.  November 29, 2011            CookBook            Eric
        Fixed COOKBOOK.PDF, all html, cook.html web page
        Changed:
        0     Dates, new table of contents
        2     Iconified or not, Tek and XAS controls
        4     RFLAG, ACLIP, REFLG, FGDIF, TVFLG (BASELINE-DT),
              PCAL replace PMODEL with DOMODEL and prohibit it,
              DOPRINT in RLDIF, SU table corrected by RLDIF,
              DOAPPLY=-1 in 2nd run of rLDIF, SNIFS
        5     CALIB's DOAPPLY & NORMALIZE & self-cal approach,
              RFLAG, OBIT imaging verbs
        6     STVERS, IMFIT et al make STARS file, RSPEC output
              options, SNIFS, HUEWEDGE
        7     FARS, AFARS, RFARS, DOFARS; IMEAN initial guess,
              STVERS in IMFIT/SAD, UVFIT improvements
        8     RFLAG, REFLG, IMEAN initial guess, XMOM 'MAX' op,
              ISPEC derivative, RSPEC output options
        9     SNIFS, flag TY tables in UVCOP/SPLAT, UVFIT limit
              2.5 million now and other options.
        12    QCREATE
        13    several of the ABOUT files
        E     PCAL does models only if 0, QUOUT/QUFIX, RLCAL.
        I, J  update
        Moved nowhere.

13718.  November 30, 2011          FRING                  Eric
        The change to AVERT (use UVGET to speed data access) meant
        that SUBARR=0 no longer was acceptable.  Changed AVERT to set
        SUBARR=1 temporarily when it is 0 so that AVERT can work and
        ten set it back to 0.  Dropped ISUBA from call sequence.
        Corrected the call sequence in FRING and RLDLY.
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC11 is NEW

***********************************************************************
***********************************************************************


13720.  December 12, 2011       help files                Eric
        UVFIT: correct limits on visibilities and parameters, fix some
               bad grammar
        REWAY: correct minor typos and things easily mis-read
        SNIFS  needed details for SNIFS rather than SNPLT in the
               summary sections.
        Moved to 31DEC11 this date.

13722.  December 14, 2011           APCAL                Eric
        APCAL did not check if the TY antenna record had SUBARRAY <= 0
        which is supposed to mean "any".  The FQ tests were also in
        error on a similar point.
        Moved to 31DEC11 this date.

13723.  December 14, 2011           FARS                 Eric
        Changed HI writing to explain all 9 of the APARM parameters.
        Changed handling of some as well - there were cases that would
        escape the code.
        Moved to 31DEC11 this date.

13724.  December 14, 2011          REWAY                   Eric
        Added BADDISK
        Moved to 31DEC11 this date.

13725.  December 16, 2011        CLIP                 Eric
        The history file using a generalized CALHIS recorded only the
        last source considered.  It was prepared to do otherwise but
        did not.  Took advantage of the preparation to prepare the
        source names and numbers for the history routine.
        Moved to 31DEC11 this date.

13726.  December 19, 2011       SPLIT, SPLAT            Eric
        Changed code to supress messages on UVGET CLOSe calls but to
        do the close calls even when no data were found.  The FG table
        was opened and left open although other files were not open -
        a close is needed but it is best to avoid the file not open in
        FTAB messages.  Also moved the RNXCLS to make sure that an NX
        table is closed even on error.  Blocked continuing on the next
        source.
        Moved to 31DEC11 this date.

13727.  December 20, 2011  FRING, KRING, UVFLG    Olaf Wucknitz/Eric
        Using LOFAR data, some limits have been found that are
        incorrect.  Changed the history writing in FRING and KRING to
        handle ANTWT is a general fashion.  Changed the baseline
        limits in UVFLG to MXBASE (= 90*91/2.) rather than 500.
        Moved to 31DEC11 this date..

13728.  December 20, 2011            SLICE                Eric
        Added X, Y, Z physical coordinates to the output text file.
        Allow multiple outputs to go to the same text file and added a
        header line at the start.
        Moved to 31DEC11 this date.

13729.  December 20, 2011             SQASH               Eric
        Changed to allow it to sum even axis 2, producing a 1-row
        image if summing all axes >= 2 or an image with 1 point on the
        2nd axis otherwise.  A trivial TRANS may be needed on the
        latter to make it more visible.
        Moved to 31DEC11 this date.

13732.  December 27, 2011         SLICE                 Eric
        Made a bad array reference - the subscript got set to 0 by the
        coordinate call - so the text file outputs had zero for slice
        value.
        MOved to 31DEC11 this date.

13734.  December 30, 2011         AFARS                 Leonia/Eric
        A small problem has existed near BLC, TRC. It has been fixed.
        The fitting of parabola to determine position of maximum
        (with beter accuracy) is not carried out now if maximum is too
        close to the edges of data.  Changed coordinate computation to
        use header parameters rather than make assumptions about the
        coordinates.
        Moved to 31DEC11 on Jan 2.

13738.  January 2, 2011           UNIXSERVERS              Eric
        Removed debug message inadvertently left in
        Moved to 31DEC11 this date.

13739.  January 2, 2011            IM2CC                   Eric
        Changed it to center each piece of the input image in an
        output image that is a power of 2 pixels on a side.
        Moved to 31DEC11 this date.

13740.  January 3, 2011              FARS               Eric
        FARS had the meaning of APARM(4) backwards for the HI file.
        It also did wierd things (nothing???) when APARM(4) > 1.5 - a
        holdover from when FARS had an AFARS kind of output.
        Moved to 31DEC11 this date.

13741.  January 3, 2012        Imaging                 Eric
        Changed GRDAT, GRDSET, SETGRD to insist on powers of 2,
        rounding up as needed.  The first allowed images up to and
        including 8192 to be doublesd in gridded subtraction, while
        the second limited them to 4096 and the third to 2048.  Fixed
        the latter two to allow 8192 doubling.
        Changed SETDO3 to understand DO3D false imaging - it forbad
        multiple facets in 3D false.  Also have it set FLDSZ which
        needs defaulting sooner than later.  OOSUB was failing badly.
        Moved to patch 16 Jan.

13743.  January 4, 2012       FARS                        Leonia
        FARS has had several mistakes near conversion RE,IM to AMP/PHASE
        especially when RESIDUAL sent to the output
        Moved to patch 16 Jan.

13744.  January 4, 2012         Imaging                   Eric
        Added progress messages to VISDFT, ALGMEM, ALGSTB.
        Moved to patch 16 Jan.

13745.  January 5, 2012       FARS                        Leonia
        Add shifting residual phase to the initial lambda^2 set.
        Moved to patch 16 Jan.

13746.  January 5, 2012       FARS                        Leonia
        Misprint at the previous installation
        Moved to patch 16 Jan.

13748.  January 6, 2012          FITAB                  Eric
        Did not write the TNULL keyword for compressed uv data.  It is
        -32767 rather than the obvious -32768 so it is important.
        Moved to patch 16 Jan.

13749.  January 6, 2012           SQASH                 Eric
        A WRITE statement for a history line had too many arguments
        for its format.  Dropped the unwanted argument.
        Moved to patch 16 Jan.

13750.  January 7, 2012           UVFIT                 Eric
        Add option to have a comment string following the parameters
        in the INLIST file.  This comment appears at the end of the
        line in the FITOUT file.
        Moved to patch 16 Jan.

13752.  January 9, 2012             AFARS                Eric
        Found several errors in the code: (1) If the quadratic maximum
        fit failed or was too close to the edge, the BLC(1) correction
        was not added.  (2) If the fit was once too close to the
        edge, it no longer did the quadratic fit at all (IRET never
        reset to 0).  (3) If the input row was all zero or blank, the
        task used a pixel value that was not properly tested.  Now it
        will use the blanking value.
        Moved to patch 16 Jan.

13753.  January 9, 2012            UVFIT                Eric
        Found lots of places still dimensioned 4 rather than XMXCMP
        (20) so the commputation of lots of things should have gone
        into the weeds and did when there were > 4 model components.
        Adde a couple of spaces to the output file format and changed
        how time is handled so the actual minimum and maximum times
        used are what is reported.
        Moved to patch 16 Jan.

13754.  January 16, 2012            CLCOR                Eric
        The GMRT uses a backwards phase convention to the rest of us.
        Changed a few places - esp the place that moves antenna and
        source positions - to reverse sign for GMRT.
        Moved to patch this date.

13755.  January 16, 2012          CLCOR                Eric
        Tediously removed all of the horribly non-standard illegal
        Fortran from the code.  Corrected bug put in previously today.
        Moved to patch this date.

13777.  March 1, 2012            VLANT                    Eric
        The code reversed the sign of the Y correction for EVLA for
        the delay computations.  It also neglected to shift the hour
        angles from local to Greenwich which it must do for the EVLA.
        I guess these errors compensated in tests in 2009.
        Moved to patch this date.

13780.  March 6, 2012              SCMAP                  Eric
        Changes to Fortran:
        5. Previously, uncompressed input files were fed directly into
        UVMDIV for model division.  This meant that flag tables were
        not applied.  Compressed data were copied first to make them
        uncompressed but also to apply flags.  Changed two places to
        do this for both compressed and uncompressed data.
        Moved fix 5 to patch March 7.

13781.  March 7, 2012             SCIMG                    Eric
        Made the same changes to SCIMG as to SCMAP.
        Moved fix 5 to patch this date.

13865.  June 15, 2012         Mountain Lion            Eric
        The system command ps in Mountain Lion now issues an error
        message if there is an LD_LIBRARY_PATH set (which is required
        in binary installations).  Changed $SYSUNIX files STARTPMON,
        TVALT, UNIXSERVERS, and XASERVERS to send the error output to
        /dev/null and to test for succesful completion rather than for
        error output.
        Moved to NEW/patch 19-Nov.
