-----------------------------------------------------------------------
;  Copyright (C) 1999-2000
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in Charlottesville.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


***********************************************************************
***********************************************************************

                 Changes while 31DEC00 (31DEC99) was TST

***********************************************************************
***********************************************************************

10387.  September 23, 1999           POSSM                 Chris
        Moved the statement incrementing the number of a plot on
        a page in MULTPL so that it is only executed if the plot
        is not blank. This avoids problems setting the coordinates
        and opening the plot file if the first plot on a page is
        blank and should also save some paper.
        Moved to 15OCT99 on this date.

10388.  September 27, 1999         $QPGNOT/UVCON           Leonia
        UVCON has not had default for the number of frequency
        channels. I added: IF (NFRCHA .LE. 0)  NFRCHA = 1.
        The help file has been updated.
        Moved nowhere.

10389.  October 6, 1999        $APGNOT/SPLAT               Leonia
        SPLAT has been created wrong file if one source is selected
        in the option ASSEMBL. SU table was not created and random
        parameter SOURCE was REMOVED. It happened because UVGET
        changes ILOCSU to -1 if only one source was selected.
        I circumvented the problem changing the list of selected
        sources to blanks if only one source is selected. The minor
        following modification have been fulfilled also:
        SOLINT changed from beeing measured in seconds to minutes.
        The message reminding about NX table creating by INDXR
        has been added.
        Moved nowhere.

10390.  October 8, 1999       $APGNOT/MATHS           Leonia
        The default for CPARM(2,3) has not been determined
        explicitely for optype POLY. So they are not zero
        in all machines. I fixed it.
        Moved nowhere.

10391.  October 8, 1999       $APGNOT/SPLAT          Leonia
        As I found the problem of one source to be assembled
        has not been solved in all cases by the way described
        at 10389. So I have simplified the solution creating
        a single source file if one source is selected even
        if assembling (APARM(7) =0)  was requested. The relevant
        message has been added.
        Moved nowhere.

10392.  October 9, 1999      $HLPFIL/MCUBE.HLP       Leonia
        IN3SEQ has had the restriction (-10,10). Craig Walker
        needs remove this restiction. I did it.
        Moved nowhere.

10393.  October 18, 1999            VBGLU                Chris
        Fixed an error in retrieving the catalogue number for the
        output file when updating the history records that caused
        the header of one of the input files to be corrupted when
        there were more than 2 input files.
        Moved to 15OCT99 on this date.

10394.  October 19, 1999            FIXWT                Chris
        Revised FIXWT to use the real parts of the visibilities
        to estimate noise levels rather than the amplitudes. This
        should give better estimates of the noise at low SNRs. It
        also seems to reduce the occurrence of isolated points
        with discrepent weights.
        Moved to 15OCT99 on this date.

10395.  October 20, 1999        $YPGNOT/CONFI           Leonia
        The two new options have been added.
        1. The possibility of optimising inside of a sector in the
           sky limited by two circles and two radius.
        2. The new inititial configuration and relevant constraint
           in the shape of two circles with inner one tangent inside
           to the outer one.
        The last option is added in view of serios topography
        constraint in the ALMA site at Chilie.
        Moved nowhere.

10396.  October 20, 1999       $YPGNOT/VPLOT           Leonia
        Parameter MAXBT has been increased from 100000 to 1000000,
        to allow plotting of more data.
        Moved nowhere.

10397.  October 21, 1999          FRPLT                Chris
        Removed an assignment to the unused and uninitialized common-
        block variable UVSCAL that included a division by its
        uninitialized value.
        Moved to 15OCT99 on this date.

10398.  October 25, 1999          UVMAP                 Eric
        Believe it or not, there are still people using UVMAP/APCLN.
        They discovered that the xshift parameter is in backwards for
        the output header, messing up self-cals...
        Moved to 15OCT99 October 26.

10399.  October 28, 1999           PLOTR                Eric
        Found a bug when plotting symbols.  The plot paraform has an
        internal scaling which was not applied to the symbols
        coordinates before calling the general symbol plotter.  The
        failure affected only certain ranges in the data.
        Moved to 15OCT99 this date.

10400.  October 28, 1999        ACCOR                  Leonia
        ACCOR has not worked if NX table was absent. The routine
        UVTIME has gotten zero for LREC because UVPGET (which
        estimates LREC) was called after UVTIME.
        I moved CALL UVPGET before CALL UVTIME.
        Copyleft fixed 29Oct (Eric).
        Moved nowhere

10401.  October 29, 1999       TICINC                Leonia/Eric
        Small plots sometimes end up with only one tick mark which
        does not say much about the scaling.  Fixed a .LT. to .LE.
        which should require more ticks in general.
        Moved to 31DEC99 this date.

10402.  November 1, 1999          TVBLNK               Eric
        TVBLINK did not work right on XAS with 8-bit pseudo color
        display.  It tried to do split screen which it can do, but it
        cannot have 2 different LUTs.  Fixed code to recognize the
        less capable situation and to do 1 channel at a time.
        Moved to 15OCT99 this date.

10403.  November 1, 1999        SPLAT                    Leonia
        All tables have been copied with subarray=0.
        I fixed it adding relevant cards in subroutine COPTAB.
        Moved nowhere.

10404.  November 1, 1999   CLFIX, CL2HF, ASTROMET.HLP  Ketan/Dave Gordon
        Dave Gordon's latest batch of changes to the astrometry programs
        include: modifications to handle different CL table epochs at the
        reference and remote stations, calibrating by subarray, a new
        algorithm for the Haystack reference frame conversion, and some
        other minor things.  He reports that he has run through the data
        path end-to-end with no problems.
        Moved to 15OCT99 this date.

10405.  November 8, 1999          FITLD            Chris for Eric
        Fixed a faulty FORMAT reference that caused FITLD to complain
        about running in batch when it should have complained about
        reading too many files that were not FITS files.
        Moved nowhere.

10406.  November 8, 1999       CALIB                  Leonia
        CALIB using ANTUSE with CPARM(2)>0, has printed information
        about the average gain as:
        "The average gain over 'all' antennas ...."
        although only antennas selected by ANTUSE participate in the
        averaging. I changed it providing additionnaly the list of
        antennas participated in the averaging, which is selected by
        ANTUSE.
        Moved nowhere.

10407.  November 8, 1999           UVMTH, DIFUV           Eric
        UVMTH did not defend itself adequately when applying one data
        set to another.  It used the NVIS from data set 1 to read data
        set 2.  (Common variables strike again.)  I fixed it to handle
        compressed data, to use dynamic memory for the summing array
        (which made it go much faster), and to handle the two data
        sets independently.  Now, if the user at least sees to it that
        baseline 1-2 in the one is about the same as in the other....
        DIFUV also lacked defenses.  Fixed NVIS and made it handle
        some differences between the two data files.  This one really
        requires them to be very similar.
        Moved nowhere.

10408.  November 9, 1999            SPFLG                 Eric
        Changed the SWITCH ALL-BL FLAG option from current vs all
        baselines to a 4-position switch with all baselines to each 1
        of the antennas included as choices.  Changed selection of
        data to flag, status display, SPFLG.HLP, HLPSPFLG.HLP.
        Moved nowhere.

10409.  November 10, 1999            Editing               Eric
        Based on Ketan's latest round of suggestions, changed:
        EDITR      Add REASON adverb and pass it on.
        EDITR      HLP: Add REASON adverb.  Add amplitude-range
                   setting option, NEXT CORRELATOR, EXPERT=TRUE
                   affects
        EDITA      Add REASON adverb and pass it on.
        EDITA      HLP: Add REASON adverb.  Add amplitude-range
                   setting option, NEXT CORRELATOR, EXPERT=TRUE
                   affects
        SNEDT      HLP: Add amplitude-range setting option, NEXT
                   CORRELATOR, EXPERT=TRUE affects
        SCMAP      HLP: Add amplitude-range setting option, NEXT
                   CORRELATOR,
        QEDIUTIL   1. To read in REASON, to set it to TASK/TIME/DATE
                      if blank when written to FC table.
                   2. If these tasks start with EXPERT set to true:
                      a) The ALL-pol and ALL-IF flags are set true,
                         else they are false
                      b) The display ranges are set to 0:max for
                         amplitude, -180:180 for phase, -1000:1000 ns
                         for delay, -1000:1000 mHz for rate
                      These (1 & 2) can be changed interactively.
                   3. Add self-scale max but keep min at 0 option for
                      amplitude plotting.
                   4. Add NEXT CORRELAT operation which increments
                      polarization and IF: R/1, L/1, R/2, L/2, etc to
                      both TV and expert menus.
                   5. Changed to hold off computing running
                      differences until they are needed.
        Also changed HLPEDICL.HLP, HLPEDISN.HLP, HLPEDITY.HLP, and
        HLPEDIUV.HLP, to add NEXT CORRELATOR and to add info on
        setting the amplitude display range.
        Moved nowhere.

10410.  November 11, 1999           Editing                  Eric
        Corrected QEDIUTIL to compute difference data only when needed
        and only at plot time itself.  If failed to do it sometimes
        when it was needed and it is best to move it to the EDPLOT
        routine itself which is called from all over.
        Moved nowhere.

10411.  November 11, 1999           DOUVCOMP                Eric
        Corrected FITLD.HLP to state what the task already does:
        DOUVCOMP <= 0 is uncompressed data, > 0 compressed.  The
        "default" value in POPSDAT.HLP is already 1.  Corrected an
        oversight in AU2A in which this adverb was set to 0 by
        DEFAULT.
        Moved nowhere.

10412.  November 11, 1999        CALIB                     Leonia
        CALIB has not written history about the new adverb ANTUSE.
        I modified CALIB to add the relevant lines in the history
        file.
        Moved nowhere.

10413.  November 12, 1999             TBIN                 Eric
        TBIN did not test enough things so that it would flag a row at
        the very last access tio that row.  Added another test and
        improved the error handling.  Added a bit to clarify things in
        the help file as well.
        Moved nowhere.

10414.  November 12, 1999            IMAGR                  Eric
        The TELL call was just too late to detect the case in which
        the user drops NITER to force it to quit and so it looped for
        the next field and then decided that the infinite loop
        (overlap=2) condition was present.  I have moved the code
        forward so it can quit abruptly if requested.
        Moved nowhere.

10415.  November 12, 1999           OTFIN                  Eric
        Added the OFF scan number to the displays and upgraded the
        help to advise users what widths are better.
        Moved nowhere.

10416.  November 12, 1999          BSTST                   Eric
        Changed it to offer the option of a Clean deconvolution as
        well as the EKH one.  Improved the labeling of RMs's etc
        Moved nowhere.

10417.  November 12, 1999          BSCLN                    Eric
        New task to Clean beam-switched images.
        Moved nowhere.

10418.  November 13, 1999           BSMOD                 Eric
        Changed the task so that it does not require an input data
        set.  It now takes observatory latitude, longitude, radius
        from center of earth, telescope diameter, REFDATE, OBJECT in
        addition to the old adverbs.  Frequency is set by beam width
        and diameter.  The 12M is the default for the observatory.
        Moved nowhere.

10419.  November 15, 1999          New adverbs                 Eric
        Created new adverbs to help replace the overused *COUNT ones.
        Changed POPSDAT.HLP and NEWPARMS.001 to create them.
        Created new help files for BPRINT, EPRINT, NPRINT, NPLOTS.
        Changed NCOUNT to ORDER in BSGRD and BSCOR.
        Changed NCOUNT to NPLOTS in CONFI, ELINT, POSSM, SNPLT, VPLOT.
        Changed *COUNT to *PRINT in PRTAN, PRTSD, PRTUV, UVPRT, HFPRT,
        and PRTCC.  Changed BCOUNT and ECOUNT but not NCOUNT to *PRINT
        in PRTAB.
        Changed PRTSD, UVPRT and PRTUV to allow 30000 NPRINT on 0 for
        CRT and to limit NPRINT to 2000 for printer.  Also changed
        PRTUV to do extra decimals on the time when possible.
        Moved nowhere.

10420.  November 15, 1999        APCAL                      Ketan
        APCAL would refuse to do opacity corrections if source fluxes
        were not found in the SU table.  Now, APCAL will go ahead assuming
        a source flux of zero - a reasonable default - with a stern
        rejoinder to the user that they may have wanted to run SETJY.
        Also, APCAL would refuse to do opacity corrections if a text file
        containing weather information was not supplied.  Internally, the
        only use of this file was to find the maximum recorded ground
        temperature for each station.  The WX table is now supplied by
        VLBA calibration transfer and APCAL needs to be made to read that
        table.  For now, the behaviour of APCAL has been changed not to
        crash with opacity corrections are requested and no weather text
        file is supplied.  The new behaviour is to assume a default
        maximum ground temperature of 20 C at each station, _if_ the
        INFILE is left blank [with a warning of course...].
        Moved nowhere.

10421.  November 15, 1999        KRING                  Ketan/Craig W.
        Craig was lamenting that for any reasonably complicated model
        the model division stage of fringe-fitting was very slow.  The
        model division code in KRING (and in FRING) is hard-wired to
        request only DFTs.  Based upon Craig's assertion that using
        a gridded FFT results in no noticeable degradation of the final
        solutions, the code has now been changed to let the model-division
        routines choose the fastest method rather than insist upon using
        DFTs.  Craig reports a tremendous improvement in speed.
        Moved nowhere.

10422.  November 15, 1999    OMFIT                 Ketan
        At user-request, added a new mode to allow the user to
        strip the amplitude information off of a UV data set.  The
        new switch is set using OUTVER=7 and sets the amplitude of each
        incoming visibility with unity in the output UV data set.
        Moved nowhere.

10423.  November 16, 1999          GRBOXS                 Eric
        The call to DRBOXS to erase the current boxes can return
        negative IERR now without cause for alarm.  Unfortunately, in
        one of the 2 calls IERR.NE.0 was used.
        Moved nowhere.

10424.  November 16, 1999          IMAGR                  Eric
        Changed UVWAIT - the Linux compiler cares how the round-off
        computation is done.  A = B*C ; I = A+0.5 gets a different
        results than I = B*C + 0.5.  The Q routine was doing the
        latter, UVWAIT was doing the former.  This is going to get us.
        Moved nowhere.

10425.  November 17, 1999          EDITR, EDITA            Eric
        Changed QEDIUTIL, EDITR, EDITA, SNEDT and their help files to
        add the ANTUSE adverb.  This is use to specify which antennas
        appear in the initial display on the TV.
        Moved nowhere.

10426.  November 17, 1999          TICINC                  Eric
        Added code to figure out the actual number of tick marks in a
        plot and if it is <= 1, to decrease the interval to get more
        even if that is more than would be desirable.  Made a similar
        change to the equivalent routine (EDTINC) inside QEDIUTIL.
        Moved nowhere.

10427.  November 17, 1999          FITLD                   Chris
        Fixed an error in the VLBA saturation correction that was
        introduced in Version 10.5 and that could lead to errors
        of the order of 10% in auto-correlation amplitudes.
        Incremented the revision number to 10.5.1.
        Moved nowhere yet: will need to be released as a patch to
        15OCT99.

10428.  November 19, 1999         SPLAT                   Leonia
        SPLAT has given wrong reference frequency if BCHAN .NE. 0
        for APARM(1) = 3. I have fixed it. Beside of that I improved
        the help file to clarify relation of APARM(1) and CHANNEL and
        CHANSEL.
        Moved nowhere.

10429.  November 21, 1999        VPLOT                    Leonia
        VPLOT has not worked for the hude data if APARM(3)>0.
        The parameter MAXSOL should be increased until MAXBT.
        I have fixed it. Another small improvement has been done:
        If APARM(3)>0 and APARM(4)=0 and BIF=EIF, then MIN is equal
        to MAX, because MIN/MAX is found comparing the value in
        different IFs. So if user forget to put APARM(4)>0, then
        there will not be vertical line in the ploting of points at
        all. To help user I added the following card:
              IF (DOAVG .AND. BIF.EQ.EIF) APARM(4) = 1
        Moved nowhere.

10430.  November 21, 1999            CROWDED                   Eric
        Created new adverb CROWDED and added it to EDITA, EDITR, and
        SNEDT (and of course POPSDAT and NEWPARMS).  Also new help
        file.
        Changed QEDIUTIL to read the keyword and, when true, to allow
        multiple polarizations and/or multiple IFs to be displayed and
        edited at the same time in EDITA, EDITR and SNEDT.  Corrected
        a bug which occurred when the display was crowded (> 1 sample
        at the same TV x pixel) and FLAG TIME was used.  Not all
        samples on that vertical line were deleted.
        Reworded HLPEDITCL, HLPEDISN, HLPEDITY, HLPEDIUV as well
        Moved nowhere.

10431.  November 22, 1999        VPLOT                    Leonia
        Recentely (#10429) I modified VPLOT fixing APARM(4) =1,
        if APARM(3)>0 and BIF.EQ.EIF. Craig Walker considers that it
        is a bad idea changing input parameters inside of a task.
        So I removed the line: IF (DOAVG .AND. BIF.EQ.EIF) APARM(4) =1
        and added the note:
        Note: APARM(3)=1 but SOLINT=0, APARM(4)=0 and BIF=EIF so MIN=MAX.
        Moved nowhere.

10432.  November 22, 1999             FLGIT                  Eric
        Fixed writing of selected sources into HI file.
        Moved nowhere.

10433.  November 22, 1999            JMFIT                  Eric
        OFFSET was correctly scaled and used with the image data.  It
        was not rescaled for reporting to the user.
        Moved nowhere.

10434.  November 22, 1999             DBCON                 Eric
        DBCON forgot that the number of output correlators can exceed
        the number of input in 1 of the 2 data sets.  It also did not
        zero the right array to help cover that.  Fixed.
        Moved nowhere: should go to patch.

10435.  November 23, 1999             CALIB                 Eric
        Added more comments in the help file about what has to be set
        to do Clean models on a multi-source file.
        Moved nowhere.

10436.  November 24, 1999            UJOIN                  Eric
        Changed handling of tables so that the IF selection will be
        made in them.
        Moved nowhere.

10437.  November 24, 1999         CALIB, BPASS               ERic
        Changed both to try to read Craig Walker's mind.  The task
        will quit if
           a. Mutiple sources selected and both IN2NAME and IN2CLASS
              non-blank
           b. Single-source file with SMODEL=0 and one of IN2NAME and
              IN2CLASS blank
           c. Single-source file with SMODEL>0 and neither IN2NAME nor
              IN2CLASS blank
        Note that BOTH IN2NAME and IN2CLASS must be specified,
        SMODEL(1) is ignored for multi-source files, and must be > 0
        for single-source point modeling.
        Moved nowhere.

10438.  November 26, 1999    $APGNOT/UVHOL.FOR            Leonia
        UVHOL has been able to keep the given number of samples
        at the end of each pointing, dropping the relevant samples
        at the beginning. Durga Bagri needs to drop
        samples at both beginning at the end of each pointing.
        The new option has been added to satisfy this request.
        HELP file is updated.
        Moved nowhere.

10439.  November 30, 1999           File naming             Eric
        Due to user complaints I have changed the extended hex naming
        of fields to regular names.  This will have a bunch of affects
        - the worst being that NEW cannot read the new names.
        xCLNnn -> xCLnnn, xMAPnn -> xIMnnn, xBEMnn -> xBMnnn
        and the new numbers are 001 - 512 rather than blank, 1-511.
        Changed
        AU5C      Recognize either old or new names (by the 4th
                  character)
        SETGDS    Recognize either old or new names.
        LPCAL     Recognize either old or new names.
        GPHAS     Recognize either old or new names.
        IMCREA    Create xIMnnn or xBMnnn class images.  Corrected
                  error - LFIELD was not initialized if creating an
                  image here.
        WFCLN     Change output class names.
        MX        Change output class names.
        APCLN     Changed default input and output classes.
        SDCLN     Changed default input and output classes.
        SCMAP     Changed output class names.
        VLABP     Changed default input class.
        VLACLOAD  Changed *CLN to *CL001 and *BEAM (wrong) to *BM001.
        VLALLOAD  Change IMAP to IIM001 etc
        DDTLOAD   Changed IMAP to IIM001, ICLN to ICL001, etc
        MAPIT     Changed class names
        HYB       Changed class names, corrected IBEAM to IBM001
        COMAP     Changed class names, corrected IBEAM to IBM001
        FLATN     Changed to recognize old or new names.
        Changed comments in help files for: WFCLN, MX, APCLN, SDCLN,
        TABED, ALLDEST, SCMAP, VLABP, VLAC, FLATN, IMAGR.
        Moved nowhere.

10440.  November 30, 1999             ALLOKAY                Eric
        Added adverb ALLOKAY to IMAGR to try to allow quicker
        restarts.  ALLOKAY=1 => beam images are already computed
        correctly.  ALLOKAY=2 => beams okay and also the UV work file
        is a correct weighted and residual data set for the components
        now in the Clean images.  The latter requires BCOMP to be set
        to include all components and all of the name parameters for
        the work file to be set and the OUTVER to be set.  Also the
        OUTSEQ must be set.  Changed:
        IMAGR     Help file - add adverb and all sorts of
                  requirements.
        IMAGR     Add adverb; test ALLOKAY=2 to see if work files
                  exists (sets it to 0 if not); create, fill, weight
                  the unsubtracted data file if ALLOKAY=2 when
                  filtering CCs;
        QUVUTIL   To write the SUM of the weights to beam images as a
                  header keyword and to use that as a default sum of
                  weights when imaging.
        QCLEAN    To create filtering file only when ALLOKAY low
                  enough, to avoid making beam images and subtracting
                  initial components when instructed.
        Moved nowhere.

10441.  December 1, 1999             FILLM                    Eric
        For some reason the weights in the CL table were set to 0.
        Changed to 1.0.  It did not seem to hurt anything, but SNPLT
        would refuse to plot the 1,0's.
        Moved nowhere.

10442.  December 1, 1999            Naming                    Eric
        Changed SETGDS and LPCAL - on old names they were changing the
        last 2 characters to blank.  WE have tolerated anything in
        those chars and I guess we still have to.  In the new names
        the last 3 chars are 001 and there is no reason to not force
        this - new names are deduced from finding a number in the 4th
        character position and it would be crazy for someone to have
        such a name while being outside of the new name system.
        MOved nowhere.

10443.  December 3, 1999           FDEFAULT                  Eric
        Added -Wimplicit and -Wall (unused and uninitialized) to the
        Linux compiler options.
        Moved nowhere.

10444.  December 3, 1999            TBIN                    Eric
        Removed unused variables detected by testing the new options.
        The g77 unused detector is not fooled by DATA statements while
        the Sun compiler is.
        Moved nowhere.

10445.  December 6, 1999         CALREF in APLNOT            Chris
        Rewrote CALREF.
        - CALREF no longer applies a spurious delay correction.
        - Smoothing times now conform to the header comments.
        - The correct interpolation table are now used if the
          smoothing times are small.
        - CALREF now reports an error if the old and new reference
          antennae can not be related to one another.
        - CALREF will no longer fail if there is only one solution
          linking the old and new reference antennae.
        - Delays are now interpolated using the rate as the first
          derivative of delay with respect to time.
        - Faulty logic that attempted to avoid overflows while
          computing ATAN2 has been replaced.
        - Excess arguments (including a large work array) have been
          removed.
        Calls to CALREF have been updated in FRING, KRING, CALIB, and
        CALADJ.
        Moved nowhere.

10446.  December 6, 1999      FRING and KRING                Chris
        Corrected offsets into the column pointer arrays in calls to
        FNDCOL and CALREF for the second polarization. The erroneous
        offsets caused CALREF to fail to change the reference antenna
        for the second polarization.
        Moved nowhere.

10447.  December 6, 1999            OTFBS                    Eric
        Changed DSDD.INC amd SDDPTS to comments everything and to set
        the apperture efficiency pointer.  Changed OTFBS to scale the
        data to something like sky temperature (multiply by eta_l *
        eta_fss / eta_a).
        Moved nowhere.

10448.  December 7, 1999          JMFIT                      Eric
        Fixed default handling of GMAX to match the help file and
        IMFIT.  It was supposed to allow GMAX < 0 and the use DMIN if
        it is greater in abs value than DMAX.
        Moved nowhere.

10449.  December 9, 1999      ZLASCL and ZLPCL2              Pat
        Change the lpstat syntax to support CUPS.  Does not affect lpr
        or lp or lpq commands.  If the CUPS_SERVER variable is defined,
        these scripts now assume lpstat is the CUPS version, not the
        vendor supplied one.
        Moved nowhere.

10450.  December 10, 1999        ZFI2, ZMI2                 Eric
        The error message complaining about being outside the size of
        the file needs to work with long-long variables.  This
        requires (!) a different C format identifier (%lld rather than
        %d).  Since sizeof is not allowed in #if statements, this
        format must be compiled into everything - it is seemingly
        legal everywhere I could check.  It does not work on alphas
        but will not be invoked there.
        Moved nowhere.

10451.  December 10, 1999          QCLEAN                   Eric
        Dies if ALLOKAY was not declared - which it is not in SCMAP
        and WFCLN.  Made it optional.
        Moved nowhere.

10452.  December 10, 1999          IMAGR                    Eric
        Fixed help file: STOKES = 'RR' and 'LL' not 'R' and 'L'.
        Moved nowhere.

10453.  December 10, 1999          SCIMG                     Eric
        New task: A multi-field version of SCMAP.
        Moved nowhere

10454.  December 13, 1999       LWPLA.HLP                 Leonia
        HELP file for LWPLA says that if LPEN= 0, then LPEN=3.
        It is exactly what LWPLA should do. But the range of
        LPEN given in LWPLA.HLP does not allow LPEN to be less
        then 1. I modifyed LWPLA.HLP to exclude this contradiction.
        Moved nowhere

10455.  December 14, 1999    VPLOT                       Leonia
        When VPLOT is used for editing, a user can desire to edit
        only one frequecy channel but to flag all of them. It can
        happen in a spectral project when one channel is used for
        referencing and for self calibration. The new parameter
        APARM(6) has been added to satisfy such a requirement.
        Help file is updated.
        Moved nowhere

10456.  December 14, 1999    SPLAT                       Leonia
        SPLAT creates a single source file when multi source file
        is orded but only one source is selected (see #10391).
        The relevant message has been printed. Unfortunately
        the same message has been appeared even if single source file
        had been ordered. I have excluded the warning appearence
        in the last case.
        Moved nowhere

10457.  December 14, 1999            IMAGR                     Eric
        QUVUTIL (OUVIMG) had a problem in which the gridding routine
        assumed that the input UV data CATBLK was in common.  My
        recent change to allow ALLOKAY destroyed this assumption in
        all cases requiring disk-based gridding.  The bug was already
        there when the first field did not require disk-based gridding
        but a later field did need it.
        Moved to patch area this date.

10458.  December 20, 1999         ZFRE2 in APLSOL             Chris
        Changed struct statvfs to statvfs_t. Solaris 8 EA only changes
        the second form for large file access.
        Moved nowhere.

10459.  December 20, 1999            OTFBS                    Eric
        Changed OTFBS back to scale the data by the counts to
        temperature scale and the 2 efficiencies (multiply by eta_l *
        eta_fss) and to write a TY table with TSYS as recorded and
        TANT as TSYS scaled by the efficiencies (multiply by eta_l *
        eta_fss / eta_a).
        Moved nowhere.

10460.  December 20, 1999            UVCOP                    Eric
        Fixed a long-standing error.  When copying single-source
        multi-array files to a single array it was supposed to
        subtract the infamous 5 days per subarray.  Instead of
        subtracting 5*(SUBA-1) it subtracted 5*SUBA producing times
        around -5 days.
        Moved nowhere.

10461.  December 20, 1999           TI2HA                    Eric
        The OUTNAME and OUTCLASS adverbs were ignored.  Added DOARRAY
        adverb to give permission to subtract 5*(SUBarray#-1) from
        times before computing the hour angle.
        Moved nowhere.

10462.  December 20, 1999        Calls to CALREF             Chris
        Modified routines calling CALREF to dynamically allocate
        sufficient workspace to handle the table being modified. The
        workspace allocation is conservative in that it guarantees
        that the workspace will be sufficient. It is unlikely that
        this will cause problems in allocating the workspace since
        tables will rarely require more than 1 megabyte of dynamic
        storage.
           Also modified the calling routines to issue a warning
        and continue after receiving IRET=1 (no connection between
        old and new reference) from CALREF since this is often
        triggered by the use of different reference antennae in
        different subarrays.
           Modified:
           CALADJ in APLNOT
           CLCAL in APGNOT (call sequence for CALADJ)
           CALIB in QPGNOT
           FRING in QPGNOT
           KRING in QPGNOT
        Moved nowhere.

10463.  December 22, 1999           FILLM                    Chris
        Now writes AC and BD datastreams with different bandwidths
        in the same observing band to the same output file in continuum
        mode. This avoids some problems that arise when FILLM tries to
        switch from one to two output files after the frequency setup
        changes.
        Moved nowhere.

10464.  December 27, 1999           VPLOT                   Leonia
        If SOLINT>0, VPLOT can plot right plots only if X is equal to
        time and  Y is equal amp, phas, weght, rms, real, or imag.
        I have added the relevant warning if X or Y are not equal to
        to the above values.
        Moved nowhere.

10465.  December 29, 1999            IMAGR                     Eric
        Added a multi-resolution Clean to IMAGR.  For m resolutions,
        it uses m*NFIELD fields.  The field parameters and
        (optionally) Clean box parameters for fields 1-NFIELD are
        copied to the corresponding fields NFIELD+1 to m*NFIELD.  The
        resolutions are specified with the parameter WGAUSS and NGAUSS
        are used.  There is no requirement toi use a point source, it
        must be among those requested.
        FITBM      Changed call sequence to add field number and to
                   use that in the message reporting the result.
        BMSHP      Fix call sequence to FITBM (field 0)
        MX         Fix call sequence to FITBM (field 0)
        APCLN      Fix call sequence to FITBM (field 0)
        SDCLN      Fix call sequence to FITBM (field 0)
        FIELDF     Added call argument = # fields for BCOMP.
        SCIMG      Fixed call seq to FIELDF.
        QUVUTIL    Changed taper in OUNFWT to use WTTAPER which is
                   desirable since it is done only once.  Put taper
                   back in OUVIMG using UVTAPER.  Calling program will
                   choose which to do.
        CLEAN      Changed to get COMPDIAM and set the number of CC
                   columns accordingly.  Changed to check NITER before
                   creating CC files.  We can now make CC files
                   version N without making N-1 so this should be ok.
        QCLEAN     Beams become function of field number which they
                   should have already been.  Add MR Clean widths,
                   controls.  Improve beam messages.  Fix beam
                   histogram call to be for only current field
                   (another error that previously did not matter).
                   Write CC files with Gaussians and read them.  Etc
        IMAGR      Manage the new field numbers, compute the tapers
                   needed to give the widths, pass the taper to the
                   weighting or imaging parts, etc.
        POPSDAT    Create new adverbs IMAGRPRM(20) to replace
                   CPARM(10) making space for future developments and
                   MGAUSS, PGAUSS, and WGAUSS all (10) for 1-D
                   Gaussian parameters.
        NEWPARMS   Added MGAUSS, PGAUSS, WGAUSS, IMAGRPRM.
        IMAGR      HELP: Changed CPARM to IMAGRPRM which gives room to
                   grow new options.  Added NGAUSS and WGAUSS to allow
                   multi-resolution Cleans and changed wording for
                   this new option.
        QTAPER     Pseudo Q routine to do taper for a row at a time
        QGRDCC     Added tapering option to call sequence and code.
        GRDCRM     Changed call sequence to return Gaussian widths if
                   found and to all Gaussians as components.  It tests
                   for there being only one size Gaussian per file.
        CCSGRD     Changed calls to QGRDCC and GRDCRM to pass on and
                   use Gaussian components.  Changed it to call QTAPER
                   and set up its parameters.
        Moved nowhere.

10466.  December 30, 1999           MAPPR                  Eric
        Added PROC MAPPR a simplified access to IMAGR to POPSDAT.HLP
        and created the necessary help file.
        Moved nowhere.

10467.  December 31, 1999           FLATN                  Eric
        Corrected typo - the compilers let me WRITE into a
        non-character variable!
        Moved nowhere.

10468.  January 4, 2000           GRBOXS                  Eric
        Fixed the initial cursor on operation - it could request
        really illegal positions depending on what boxes it started
        with and what subimage was visible.  It now tries to find some
        legal box and failing that the TV center.
        Moved nowhere.

10469.  January 4, 2000         VPLOT                     Leonia
        Added abbility of plotting the following new values for X and
        Y in the case of time averaging (SOLINT > 0):
        X:  U, V, UV-dist; Only UT has existed early.
        Y:  U, V, W, UV-dist.
        Moved nowhere.

10470.  January 4, 2000            CALADJ                  Chris
        The buffer size passed to TABSRT from CALADJ had become coupled
        to the number of rows in the table to be sorted causing problems
        for tables with less than about 100 rows. Removed this coupling.
        Moved nowhere.

10471.  January 4, 2000         Doc files                   Eric
        Added 31DEC99, 15OCT99 sections to WHATSNEW.HLP.
        Changed LSAPROPO.HLP since deletions do not make it and
        MSGSERVER et al. are now fully spelled out.
        Update ABOUT files:
        ZZADVERB.HLP    ZZANALYSIS.HLP  ZZAP.HLP        ZZCALIBRAT.HLP
        ZZEDITING.HLP   ZZHARDCOPY.HLP  ZZIMAGING.HLP   ZZINTERACT.HLP
        ZZOOP.HLP       ZZPLOT.HLP      ZZPOLARIZA.HLP  ZZPROCEDUR.HLP
        ZZSINGLEDI.HLP  ZZTABLE.HLP     ZZTASK.HLP
        Moved nowhere.

10472.  January 5, 2000           FILLM                     Eric
        Changed from a fixed max antenna number (28) to a parameter
        and set that to 29.  Introduced a name for 29 as the Pie Town
        VLBA/VLA antenna.
        Moved nowhere.

10473.  January 10, 2000          UVFIX                    Leonia
        Different scaling at the N-S and W-E directions has been
        implemented. The difference is seen at the output of JPREC
        routine but can not be explained by defferential abberation.
        The difference is of order 10^-5 and gives an error of 6msec
        at the edge of the field 10 argmin.
        The effect is found by Miller group.
        Moved nowhere.

10474.  January 10, 2000             MWFLT                 Eric
        Corrected 2 dimension statements in the code that does
        2-dimensional median filtering.  Certain counters needed to be
        max_win**2 in size.  The 'ROW' filtering did not handle
        defaults properly and did a divide by zero.
        Moved nowhere (except U MN).

10475.  January 14, 2000          $YPGNOT/FGPLT.FOR       Leonia
        The new task FGPLT plots the flagged time intervals from the
        given FG table. The standard parameters (TIMERANG, STOKES,
        FREQID, ANTENNAS, BASELINE, BIF, EIF,..) are used to select
        the data. Each horizontal direction corresponds to one of
        the selected baseline/IF. Each new baseline is labeled.
        The new IF is not. The more IFs is plotted the less is the
        space. So the vertical size of the plot is constant for the
        same number of baselines. If the page vertical size is not
        enough to plot all selected baselines/IFs the plot continues
        on the next page.
        Timerange can be splited on NCOUNT equal time intervals to
        have better resolution. So NCOUNT plots will be plotted.
        Each plot plots the consecutive time interval of the length:
        TIMERANG/NCOUNT.
        Moved nowhere.

10476.  January 16, 2000              FITLD                 Eric
        Fixed a string used in an error message.  It was declared *8
        and DATAed to things 9 or 10 long.
        Moved nowhere.

10477.  January 16, 2000         Number Clean Boxes        Eric
        Defining Clean boxes as simple Fortran arrays
        (4,mxnbox,maxfld) makes each array take 2 Megabytes of memory
        and yet limits a user to 256 boxes even if he images only 1
        field.  Changed to do (4,mxnbfl) with mxnbfl=64K.
        PUVD.INC  Changed MXNBOX to 2048 - max boxes in any one field,
                  added MXNBFL = 256 * 512.
        GRSLIC    Remove unused ref to PCLN.INC
        WINDF     Make WIN be (4,NFIELD,*), compute the LIMIT allowed
                  (min (2048, MXNBFL/NFIELD)).
        WRIBOX    Dropped MXNBOX from call seqence, rearranged axes of
                  WIN.
        TVUTIL    OTVBOX: change order of window, DIM(1) = 4*NFIELD,
                  DIM(2) = LIMIT assumed.
        QCLEAN    Changed handling of WIN and its dimensions.
        IMAGR     Put Win in its own common, reducing memory from 2 to
                  1 set. rearranged axis order in WIN (makes copy to
                  resolutions messier).
        SCMAP     Simplified it some - the multi-field preparations in
                  it are not needed since that was put in a new task.
                  The window handling is smaller and simpler than the
                  others since there is only 1 field.
        SCIMG     Put WIN in its own common to reduce from 3 to 1
                  copies in core.  Changed axis order, storage
                  declaration, SCHECK call seq to pass MFIELD.
        WFCLN     Changed dimensionality of WIN, altered axis order in
                  WINDF subroutine.
        SNSMOO    Was confused when the refant was 0 => data flagged
                  and so quit rather than handling as flagged.
        IMAGR     Help: changed limit on number of Clean boxes.
        FILEBOX   Help: changed limit to 2048 etc
        Moved nowhere.

10478.  January 16, 2000        FRING, KRING             Eric
        Added CMETHOD to the inputs of both tasks.  The DFT method is
        so slow that the minor inaccuracy of the gridded method is
        tolerable in many cases.  Let's let the user choose.
        Moved nowhere.

10479.  January 19, 2000        AIPS.HLP,AIPS.l          Pat
        Provided more specific example of how to use the Secure Shell
        (ssh) for remote starting of TV's: set AIPSREMOTE to "ssh -n"
        and it mostly works.  Need to work on some confusing "waiting on
        clients to finish" messages...
        A week or so ago I also updated these files to document the
        debug options (aips debug[=[debug-program]:aips]).
        Moved nowhere.

10480.  January 19, 2000          CookBook              Eric
        Update to 310DEC99 and change psfig to resizebox and
        includegraphics for LaTeX2e.
        LaCook1   Changed the line counts, parenthetical remarks,
                  edition number, and other minor things.
        LaCook2   Update the man page entirely, add information about
                  true color TVs
        LaCook3   Changed terminal width information, file class
                  names, added TGINDEX and VPUT/VGET/VGINDEX, added
                  info to UVCOP about applying a flag table, mentioned
                  XHELP, added TAPES and FITAB mentions, updated WWW
                  references for FITS, mentioned scp and gzip.
        LaCook4   Changed RESTORE 0 to DEFAULT, NCOUNT to NPRINT,
                  minor rewording reflecting CROWDED in EDITR, added
                  CLIPM reference, added ANTUSE and CROWDED in
                  description of EDITA, changed to new EDITA plot and
                  add references to NEXT CORRELATOR etc., NCOUNT ->
                  NPLOTS, added references to FITAB, changed IMAGR to
                  use DEFAULT and explicitly show NGAUSS=0.
        LaCook5   64 -> 512 fields, list overlap/SDI/multi-res as
                  reasons for IMAGR, added use of MAPPR, RESTORE 0 ->
                  DEFAULT, 8192 -> 16384, class names, add info about
                  using simple shifts these days, changed FILLM
                  weighting to disparage using Tsys from tape, CPARM
                  -> IMAGRPRM, add info re deletion of workfile, added
                  ALLOKAY ref, added ref to SETFC and FLATN, added
                  OBOXFILE, add SELECT NEW FIELD, FORCE A FIELD, THIS
                  IS FIELD n, added section on new algorithms (filter,
                  SDI, Multi-res), expand on NOISE in VTESS, added
                  CROWDED, NEXT CORRELATOR, FLAG QUICKLY to EDITR
                  discussion.  Mention SCIMG along with SCMAP.
        LaCook6   Add footnote showing how lower case may be entered
                  in AIPS strings, added PRINTER verb description and
                  info re responding to xterm width and height, *COUNT
                  -> *PRINT, drop ASCAL things, add INVER to LWPLA and
                  info re multiple plots to one file, drop VBPLT ref,
                  mentioned SNPLT enhancements, add SQ enhancements,.
                  mention TVROAM, upgraded discussion of XAS to
                  mention 24-bit versions and verbs TVHUEINT and
                  TV3COLOR, added PLOTR.  Remove most references to
                  film recorders.
        LaCook7   Typo fix and figures.
        LaCook8   Add mentions of FLGIT, CLIPM, UVMLN, added
                  cross-references in the IMAGR section, modernized
                  some wording, reference full-color workstations.
                  Remove references to film recorders.
        LaCook9   Minor rev on Solaris large files, add warning re
                  FITAB tables, NCOUNT -> NPLOTS, SNPLT new OPCODEs,
                  SCIMG as well as SCMAP, CC filtering in IMAGR.
        LaCook10  DOCRT=1, add BSMOD, BSCLN, BSTST, NCOUNT -> ORDER,
                  add discussion to BSAVG
        LaCook11  Add FITAB mention.
        LaCook12  Fix up TV connectivity discussion - guest accounts
                  are no big deal now, disk catalogs do not exist,
                  tv=local is good.  Cahnged TAPQL to EXTAB, mentioned
                  FITAB and gzip and scp.
        LaCook13  Replaced all sections with current ones.
        LaCookA   Update figures from psfig.
        Removed most of $AIPSPUBL/*.NDX, $AIPSPUBL/*.TEX.  They are
        obsolete.
        Moved nowhere.

10481.  January 20, 2000      CALIB                      Leonia
        CALIB has used wrong solution interval when the data folow
        more often than 1sec and SOLINT is selected less than 1sec
        also to obtain the solution for each time point.
        I have fixed the problem reducing the magic "1sec" to
        0.25sec.
        Moved nowhere.

10482.  January 21, 2000      CALIB                     Leonia
        Having thought more about 1sec problem I found that something
        more should be done:
        1.When there is no NX table the LASTIM has been calculated as:
          LASTIM = CURTIM + SOLINT - 1sec
          Such a calculation should prevent any solution if
          SOLINT < 1sec.
        2.My previous change 1sec to 0.25s for existing NX can not be
          enough if the dump time less than 0.25sec. For example
          VLBA correlator gives dump time ~0.13sec
        So I have changed 1sec to 0.1sec for both existing and not
        existing NX table. Actually I'd prefer to remove this 1sec
        at all. But I am afraid to do it because I do not know all
        arguments for it.
        Moved nowhere.

10483.  January 21, 2000      BPASS                    Leonia
        There has been a misprint which caused printing the same
        "corr" even for the case of existing many polarizatios.
        I have fixed it.
        Moved nowhere.

10484.  January 24, 2000       GRBOXS in YSUB             Chris
        Adapted GRBOXS to round to integer using NINT rather than
        by adding 0.5 and truncating. Although the FORTRAN standard
        defines  NINT(X) to be INT(X + 0.5), NINT(X) is often
        different from INT(X + 0.5) in critical cases. For example
        NINT(1.5) = 1 and INT(1.5 + 0.5) = 2. In some cases the
        tendency of INT(X + 0.5) to round up critical cases was
        leading to clean boxes "walking" across the field when
        when repeatedly read from a file and then saved.
        Moved nowhere.

10485.  January 24, 2000   $YPGNOT/FGPLT                Leonia
        Following the recomendations of Eric, Chris, and other
        people I have made the following modifications of FGPLT:
        1. Increased the spacing between the baselines.
        2. Plot all baselines and IFs including unflagged ones.
        3. Add the space between the baselines if more than one
           IF is plotted.
        Moved nowhere.

10486.  January 28, 2000          IMAGR                 Eric
        When I changed the order of the WINdows array (1/16) I forgot
        that CLBOX is in a different order.  Changed it to put CLBOX
        values where they belong in WIN.
        Moved nowhere.

10487.  January 29, 2000           UVFIX                  Eric
        Changed $APLNOT/LPSEC to use a string that is more Y2K
        friendly: YYYY-MMM-DD.  Changed call to LPSEC in UVFIX and the
        format.
        Moved nowhere.

10488.  January 29, 2000            CALIB                 Eric
        Changed MFIELD to 0 for point model computations to avoid some
        messages and to avoid some references to CC files.  Changed
        messages to include LIMFLX (FLUX adverb).  Clarified FLUX
        adverb in help file.
        Moved nowhere.

10489.  January 29, 2000           CMPCFL                Eric
        Routine to compress the DFIL.INC commons used heavily by the
        OOP code caused scratch file and cataloged file entry numbers
        to change.  Many tasks and subroutines assume that they know
        the index of a file in this common.  Changed the subroutine to
        trim the ends of the lists only.  Added a SAVE statement to
        UVMSUB for the SCRGRD and SCRWRK scratch files.
        This caused some line cases to fail in IMAGR.
        Moved nowhere.

10490.  January 29, 2000              WHATSNEW              Eric
        Updated for January.
        Moved nowhere.

10491.  January 30, 2000             TIMDAT                Eric
        The short form date is still allowed and used in EXTLIST.
        The code dealing with it was strange for year.  It did a MOD
        and then tested for <= 0 and > 100 when only 0 was possible
        and that is not really a bad date.  Fixed.
        Also fixed one call to TIMDAT for REASON in QEDIUTIL.
        AIPS, IBLED, SPFLG, TVFLG, and the QEDIUTIL ones are all the
        routines that use this short form from TIMDAT.
        Moved nowhere.

10492.  January 31, 2000             JULDAY                 Eric
        Tiring of all the people who go around reading precursor
        comments and not code, I have fixed the precursor comments to
        match the Y2K compliant code.
        Moved nowhere.

10493.  January 31, 2000            FITAB                   Eric
        Changed comments about FORMAT which really does not apply to
        UV data.
        Moved nowhere.

10494.  February 1, 2000            IMAGR                    Eric
        With blank OUTNAME and IN2NAME parameters, the program's tests
        for validity of ALLOKAY > 0 did not work properly.  Added lots
        of tests to force the name parameters to be set to allow
        ALLOKAY.  Also fixed help file to explain these limitations.
        Moved nowhere.

10495.  Fenruary 2, 2000            UVFIX                   Leonia
        Recentely (see 10473) I implemented  different scaling at
        the N-S and W-E directions. Later I found that found assymetry
        in the expansion/contraction due to differential abberation is
        the result of bad test. So I removed the different scaling in
        U and V directions.
        Moved nowhere.

10496.  February 2, 2000           FITLD                  Eric
        For some reason it put weight 0 for CL table entries it
        created.  Then it added real info from various tables without
        ever messing with the weights!  Sigh...  Change to put in
        1's.
        Moved nowhere.

10497.  February 2, 2000           Rest of CookBook           Eric
        Finish up appendix Z, then the TOC and Index can be done.
        LaCookZ   Change things around dropping IBMs, gripe database,
                  film recorder.
        LaCookI   Updated.
        LaCook0   Updated.
        Moved nowhere.

10498.  February 4, 2000          Imaging                    ERic
        Changed estimation of how long DFT and gridded modeling will
        take.  Changed parameters in QMTYP including changing from
        linear dependence on size of grid to dependence on the area of
        the grid.  Changed SETGDS to set FLDSZ (if <= 0) so that grid
        size will be known when CALIB et al make the decision on
        method.
        In testing found bugs:
        IMAGR     Changed to suppress message when ALLOKAY or SUBARRAY
                  > 2 doing a test open on the UV work file.
                  Fixed dimension of two parameters which were writing
                  over core potentially when read later.
        QCLEAN    The filtering routine CLFILT wrote outside the
                  APCORE memory area for large images with components
                  near the edges of swaths!  Fixed it to convolve only
                  those rows actually needed.
        Moved QCLEAN fix to patch area.

10499.  February 6, 2000           QEDIUTIL                  Eric
        The flagging routines were not handling crowded displays with
        and without ALLPOL and ALLIF properly.  Changed a bunch of
        things including fixing UNDO and REDO flags which did not loop
        as needed.  Limited looping to eliminate flags in the FC table
        for no data.  Made EDFLAG loop suitably for displayed data
        also.
        Moved nowhere.

10500.  February 8, 2000        FCLEVEL.SH in SYSUNIX        Chris
        FCLEVEL.SH needs to use special processing for Linux. Changed
        the test to trigger whenever the value of ARCH begins with
        LINUX rather than requiring an exact match. This may avoid
        some problems encountered by people trying to port AIPS to
        LinuxPPC.
        Moved nowhere.

10501.  February 8, 2000        UVCOP, UVFIX            Eric
        In UVCOP, the subarray computation used 1.01 to round up which
        was not enough for some of the vis recs.  Changed to 1.1.
        In UVFIX, the phase shift vs frequency used channel 1 as the
        reference channel rather than the correct one.
        Moved nowhere.

10502.  February 12, 2000            Slices                Eric
        The Tektronix emulation is not working well for cursor
        reading.  So changed to do a bunch of functions also on the
        TV.  Changed:
        AU9B     Correct handling TK catalog
        AU9C     Made it loop and forgive errors better
        POPSDAT  Changed TVSLICE to SLICETV, added verbs TVSLICE,
                 TVASLICE, TVMODEL, TVAMODEL, TVRESID, TVARESID,
                 TVGUESS, TVAGUESS, TVSET, TV1SET
        NEWPARMS Run file - added most but cannot rename TVSLICE,
        TVSLIN   Inits the SL plotting
        TVVEC    Draws a line segment
        TVLAB    Labels SL plots on TV
        TVSLPL   Plots slices, models, residuals, gueses
        TVSLAC   Reads cursor, gets coordinates
        Changed AIPS, DAIP, AIPSB, AIPSC to know about AU6E.
        Created new help files.

10503.  February 13, 2000            SLFIT                  Eric
        Found a nsaty bug - it was using the SL file name from the SL
        file header even when RECAT had moved (and renamed) the SL
        file.  It seems that this is the only task to fall into this
        trap (I did a grep for (17) all over).  Added an attempt to
        display the results with errors in internal units and in
        consistant (and labeled) external units.
        Moved nowhere.

10504.  February 21, 2000        SETFC                Eric
        Found two major bugs: the coordinates for multi-source files
        were put in the wrong variables and so were not used in
        setting the field centers.  0,0 was used instead.  And they
        were not handled properly as regards signs.  RAs were negative
        but the sign on 0 hours was lost and the sign on -00 degrees
        dec would also be lost.  Fixed to use > 0 RAs always and to
        handle the DEC signs correctly.
        The SUN position was not computed correctly due to the use of
        a wrong and uninitialized variable pointed out by the DEC
        compiler.
        Moved nowhere.

10505.  February 21, 2000            EQUINOX            Eric
        EQUINOX has replaced EPOCH in the (proposed) wcs.  Added this
        keyword to DFUV, FVUV, DFIT, and VFIT includes.
        Moved nowhere.

10506.  February 21, 2000            IMAGR              Eric
        IMAGR has found the beam position angle with the wrong sign
        since 29 December.  (CELLSG is all positive in QUVUTIL and has
        sign in QCLEAN!)  Sigh...  Fixed QUVUTIL OUBFIT.  Messages
        need to appear.
        Moved nowhere.

10507.  February 21, 2000            UVFIX             Leonia
        It was found recently UVFIX gives a small error in
        UV calculation which gives an error in the image if it's
        size very large (~10'). Some people considered that the
        differential abberation should give unsymmetry contraction
        in the image while UVFIX has calculated correction for
        the differential abberation as symmetrical. I have carried
        out the mathematical analysis of the problem which shows
        that contraction along the direction of motion is negligible
        and therefore the differential abberation is symmetrical and
        the UVFIX error should be in another area.
        It was found that UVFIX has used wrong picture plane to
        project baselines.
        UVFIX has projected baselines on the picture plane corresponded
        to the non abberated direction of the source. It is figured out
        now that the abberated direction should be chosen for the
        projection although the correction of rotation due to
        abberation was not necessary in the first case.
        So the picture plane to project baselines has been changed from
        non abberated to abberated direction.
        The required correction of the rotation is added.
        Moved nowhere.

10508.  February 22, 2000            SETSLICE                  Eric
        SLICETV was a bad name since it blocks saying GO SLICE.
        Changed POPSDAT, NEWPARMS and the help to rename it SETSLICE.
        Moved nowhere.

10509.  February 22, 2000            POSSM                    Eric
        The task used CATBLK even after calls to UVGET('INIT'..).
        This caused the frequencies and velocities to be wrong for
        plots 2-NPLOTS on each page whenever BCHAN > 1.
        Moved nowhere.

10510.  February 23, 2000         IMAGR                Eric
        Another bug in the change to fitting each beam separately.  In
        QCLEAN, it did not move the beam parameters of the only beam
        (when DO3DIM false) to the beam parameters of the other
        images.  As a result the images were restored with width 0 for
        fields 2-N.
        Moved nowhere.

10511.  February 23, 2000        UVLOD, FITLD            Eric
        I broke these for regular UV loading with the EQUINOX change.
        The parsers pretend to be list and symbol driven, but
        actually use absolute subscripts into that list.  No longer -
        made it test strings more and parse out which PSCALn it is
        and so forth.
        Moved nowhere.

10512.  February 24, 2000        TVFLG, SPFLG              Eric
        Found that the FC table common was not in the right order and
        that the record size in the FC table open routine was too
        small - all for a very long time (since REASON) was added.
        This interfered with the action of LIST FLAGS (and UNFLAG) at
        least in TVFLG under Linux.  However, under Solaris they
        worked fine and I suspect most other things worked okay
        anyway.
        Moved nowhere.

10513.  February 25, 2000   Compilation under Solaris/IA32  Chris
        Added support for the Portland Group compilers to
        SYSSOL86:CCOPTS.SH, SYSSOL86:LDOPTS.SH, and SYSUNIX:FDEFAULTS.SH.
        Also added a version of ZTPWAD.FOR to APLSOL86 that will recognize
        the deviant end-of-file code from pgf77 as well as the normal
        negative values.

10514.  February 25, 2000        CONFRM                 Eric
        Lots of places in AIPS.EXE can ask for confirmation with this
        subroutine.  It was not free format but required the user to
        type in column 1.  Fixed that with CHTRIM.
        Moved nowhere.

10515.  February 25, 2000          SETFC                 Eric
        SetFC used a linear formula for the field centers which really
        does not work well especially near the pole.  Rick proposes a
        -SIN projection like formula which is fine up to angles of one
        radian.  That should be enough for the "primary beam" fly's
        eye.  Added comment on that to help file.
        Moved nowhere.

10516.  February 25, 2000       POSSM               Eric
        Fixed a bad error message.  Removed an excessive checking of
        IF numbers which used the UVGET output header rather than the
        input header in the Main after the POSSIN had already set
        them.
        Moved nowhere.

10517.  February 29, 2000     $YPGNOT/CONFI             Leonia
        Recentely the new mask of topography of the ALMA's site was
        produced. This mask has better resolution (4x4 times) and
        larger area (10 times). CONFI has not been able to handle
        such a big size file. So I have modified CONFI to use the new
        topography mask. Additionaly I changed the default of many
        input parameters to match them with the current vision of
        ALMA. The help file has been updated.
        Moved nowhere.

10518.  February 29, 2000     $SYSUNIX/START_AIPS       Pat
        Corrected an inconsistency in the use of /tmp and the $TMPDIR
        variable that was causing the data area listing to show up twice
        in the AIPS startup.  This only affected users who have TMPDIR
        set in their environments (like me!).
        Moved to AIPS_ROOT in CV this date (both kochab and elsewhere).

10519.  February 29, 2000               DBCON                 Eric
        1. Changed code and help to remove the claim that it did
        frequency independent phase shifts unless DOPOS was 2.0.  It
        did the right phase shift but would refuse if the two files
        were not in the same sort order and DOPOS>1.
        2. Changed it to examine the FQ tables and renumber the FQs if
        needed in output UV data, and output FQ, CL, and FG tables.
        Moved nowhere.

10520.  March 2, 2000              EDIT*                    Eric
        Changed QEDIUTIL
        1. to start ALL-IF and ALL-POL flags as EXPERT .AND. .NOT
           CROWDED.  Changed EDITRm EDITA, SNEDT help files to
           reflect this.
        2. to require point flagging to be close to the point (< 2
           pixels); 5 was allowed previously.
        3. to loop for more points at the same pixel in crowded
           displays in POINT and QUICKLY modes.
        4. to issue instructions when needed but not too often.
        The 3rd point was confusing: a user would flag a point and it
        would appear marked bad.  But then on a replot it would
        return.  This is because only 1 correlator was flagged when
        more than one appeared in the same TV pixel.  The flagging
        marked the pixel in the other color, but the replot marked
        also the remaining good points.  Now all correlators should be
        deleted and perhaps even two time's worth (point 2 above).
        Moved nowhere.

10521.  March 6, 2000         SNPLT                       Leonia
        SNPLT has not worked if the weight is equal to zero for the
        whole CL table. The weight is compared with CUTOFF to select
        the data. But CUTOFF could not be negative because the
        negative input has been converted to zero by the card:
        CUTOFF = MAX (0.0, CUTOFF)
        To get passing data with zero weigt allowing negative
        CUTOFF I have commented this card.
        This card was in contradiction with the statement in
        HELP file:
        CUTOFF....Table weights <= CUTOFF will not be plotted,
                  <0=>plot all
                  ^^^^^^^^^^^^
        Moved nowhere.

10522.  March 7, 2000                DBCON                 Eric
        DBCON did not scale the u,v,w's for any frequency difference
        between the two data sets!  This is okay, so long as they are
        not multi-channel.
        The error message about frequencies not matching was wrong.
        It came out when it should not rather than when it should.
        Moved nowhere.

10523.  March 7, 2000             GRDSET                   Eric
        The subroutine that sets the SC file sizes used in CC modeling
        did not use the correct estimates of sizes. Added a second
        size estimate and some rounding up and then changed to use the
        max of the 2 size estimates.  One of the files is
        (2*NY,NX/2+1) in size and that can be larger than NX,NY even
        with some fiddles already in the routine.  We can afford files
        that are too large and cannot affford ones that are too small.
        Moved nowhere.

10524.  March 7, 2000              SNPLT                  Eric
        This task should not plot bad/flagged data.  I do not know why
        it ever has - the help file rather than the code needed
        changing in Leonia's recent "fix".
        Moved nowhere.

10525.  March 10, 2000            TVFLG                  Eric
        Made it smarter about asking for IF and channel numbers - if
        there are only two switch them; ask only if > 2.
        Moved nowhere.

10526.  March 14, 2000            TVFLG                  Eric
        In working on SPFLG, found a bug relating to the storage of
        Stokes in the FC file.  It caused e problem with later REDO
        operations.
        Moved nowhere.

10527.  March 14, 2000               SPFLG               Eric
        Changed it to plot all frequencies and all IFs on the
        horizontal axis.  Axes 3 and 4 are for baselines number and
        stokes only - no need to switch IFs.  This makes for some
        interesting changes in how certain flagging operations are
        displayed and then preformed.  Among changes:
        1. BIF, EIF, BCHAN, ECHAN are now keywords in the SPFLGR
        header for cataloged work files.
        2. Changed displays for flagging time and time-range to take
        into account the ALLIF flag.
        3. ALLIF is ignored on area flags if the area covers > 1 IF.
        Otherwise it is applied.
        4. An error recording the Stokes displayed when flagging
        caused some REDOs of CLIPs to fail.
        5. An error applying the various DO-baseline combinations
        could cause the data not to be flaggedin the work file.
        6. An error using a constant for an in/out variable was
        found.
        Help file reworded as well.
        Moved nowhere.

10528.  March 14, 2000              UJOIN                    Eric
        Corrected a bug in the application of DOWEIGHT 2.  It used
        only the flags applying to the highest included IF instead of
        all IFs.  Now it  correctly flags a whole spectrum if any
        channels (in that Stokes) are flagged.
        Moved nowhere.

10529.  March 16, 2000               DBCON                    Eric
        For 2 single channel data sets the u,v,w are already in
        wavelengths at whatever freq they were actually observed.  One
        does not want to change the u,v,w therefore - making the fix
        of March 7 partly wrong.  Backed out the extra mutiplication.
        Moved nowhere.

10530.  March 20, 2000              IRING                   Eric
        Changed:
        1. The X axis increment should be used with correct sign
        2. The angle check for allowed angles for summing had position
           angle on the X axis not to the North.
        3. The angle for the major axis of the ring was similarly
           measured without regard for North.
        The help file wrongly stated that CPARM(6) was used for
        plotting.  Also added remarks about East from North.
        Moved nowhere.

10531.  March 21, 2000               TABED                      Eric
        Corrected examples in TABED explain section.  The file formats
        of SN and FG tables have changed since this was written.
        Moved nowhere.

10532.  March 21, 2000              DBCON                      Eric
        The recent change to handle FQ numbers properly put a road
        block into the attempt to combine data with different
        bandwidths as if they were the same.  DBCON now - rightly -
        makes them into 2 FQs.  Added FQTOL to adverbs to allow the
        task to ignore FQ when told to (-1) or to use FQTOL (kHz) to
        decide whether FQs are the same.
        Moved nowhere.

10533.  March 21, 2000            HLPTVFLG, HLPSPFLG            Eric
        Upgraded the on-line help files for changes made previously.
        Moved nowhere.

10534.  March 22, 2000             UJOIN                  Eric
        Changed the meaning of DOWEIGHT to make the flag a whole
        spectrum if any flagged the default.  Added a display of which
        input channels contribute to which output and a test on
        frequencies (warning only) to make sure that things agree ok.
        Changed help file for DOWEIGHT, to explain CHANSEL and
        OPCODE=DIFF better.  Added an explain section by Michael
        Rupen.
        Moved nowhere.

10535.  March 23, 2000            IMAGR help                 Eric
        Modified some wordings based on understanding difficulties
        encountered by some users.
        Moved nowhere.

10536.  March 24, 2000      $YPGNOT/CONFI                Leonia
        CONFI has been able to optimize an array configuration having
        a group of antennas unmovable. This option has been worked
        only for two circle constraint and only without topography
        constraint. The number and list of the fixed antennas have
        been taken from IN2FILE. I have generelized this option.
        Now the user can determine the list of the fixed antennas as
        first DPARM(2) lines at the INFILE. The posible initial model
        as a circle with progressive spacing is eliminated.
        The help file has been modified in particular to clarify the
        using of IN2FILE as topography mask and as a list of the fixed
        antennas.
        Moved nowhere.

10537.  March 25, 2000            FILLM                 Ketan/Eric
        Changed the option that allowed the weights to be set by the
        system temperatures to use the nominal sensitivities instead.
        The former were well calibrated only for some frequency at
        some time in the past and hence not correct in the resulting
        weights.  The latter should be correct since they are what was
        also applied to the visibilities.  Also help fileto describe
        and recommend this option.  In time, I will switch it to use
        this by default.
        Moved nowhere.

10538.  March 25, 2000         DOCALIB = 2                  Eric
        Changed all the following tasks to allow DOCALIB=2 => to
        calibrate the weights, DOCALIB = 1 to NOT calibrate the
        weights.  Previously this choice was up to the programmer and
        DOWTCL was true only in FRING, KRING, VPLOT, and a few
        other VLB tasks.  Also all help files.
        APGNOT/PRTSD  SDCAL  SELSD  QPGNOT/SDIMG
        QPGOOP/SDGRD  BSGRD
        APGNOT/ACFIT  BLAVG  CLIPM  DECOR  FLGIT  LISTR  SHOUV
        APGNOT/SPCAL  SPLAT  SPLIT  SWPOL  UV2TB  UVFIT  UVFND
        APGNOT/UVHOL  UVIMG  UVMLN  UVPRM  UVPRT
        QPGNOT/BLCAL  BPASS  CALIB  CPASS  FRING  HORUS  KRING
        QPGNOT/LPCAL  PCAL
        YPGNOT/CLPLT  FRMAP  FRPLT  IBLED  POSSM  SPFLG  TVFLG
        YPGNOT/UVPLT  VPLOT
        APGOOP/MAPBM  RFI
        QPGOOP/BLING  EDITR  GPHAS  IMAGR  OMFIT  SCIMG  SCMAP
        Other changes:
        SPCAL   allow calibrate single-source files,  Also BLCAL,
                LPCAL, PCAL  The help filesfor these claimed that they
                would always calibrate multi-source files.  What was
                true was that they would never calibrate single-source
                files.
        SWPOL   DOCAL was true only if DOCALIB > 0.5 despite claims of
                the help file.
        BLCAL   Always applied calibration to multi-source files even
                if DOCAL was false.
        Moved nowhere.

10539.  March 28, 2000          $QPGNOT/UVCON.FOR, HLP    Leonia
        Modified to calculate the visibilities noise and weight
        depending on the antennas elevation. The noise temperature
        of the atmosphere at zenith is added as a parameter.
        Moved nowhere.

10540.  March 28, 2000             Menu title                Eric
        Added to TVMENU the option to display a title line for the
        menu which could be used as a status line for example.  ' '
        means do not   display or make space for a title.
        Changed TVDEVICE (TVDMEN) to pass this parameter through.
        Changed QCLEAN to display the field number, shift, cleaned
        flux and iterations.  Also changed SCIMG to display field
        number and shift and fixed bug with DOCAL handling.
        Changed TVHUI, TVRGB, QEDIUTIL, PLAYR, SCMAP to not use this
        option.  Fixed DOCAL bug in SCMAP as well.
        Moved nowhere.

10541.  March 28, 2000                 AU8A                  Eric
        On 9/2/96, ROTATE was added to the inputs of PCNTR.  EXTLIST
        was never corrected for this - fixed pointers and added
        display of rotate.
        Moved nowhere.

10542.  April 5, 2000           ZDELA2 in APLSGI             Chris
        Copied the APLUNIX version of ZDELA2, which uses nanosleep(),
        to APLSGI to over-ride the APLBELL version, which uses the
        BSD interval timer. This might help with a recently-observed
        problem where AIPS processes occasionally abort after
        receiving an alarm signal.
        Only relinked AIPPGM programs for now.
        Should probably do this for Solaris and Linux too.
        Moved nowhere.

10543.  April 6, 2000             CLIPM                   Eric
        It did not get PFLAGS right when there is only LL data.
        Moved nowhere.

10544.  April 6, 2000      calibration package            Eric
        The cal package tries to go on when there is no NX table - a
        normal situation with single-source files and trouble with
        multi-source files.  The common parameter CURSOU which
        identifies the source in the current scan is zero always when
        there is no NX table.  Changed:
        UVGET    to issue a warning on no NX with multi-source files
        DATFLG   to allow CURSOU=0 to mean a flag record for any
                 specific source applies to the current data
        DATGET   to allow CURSOU=0 to allow any source even when
                 source names are specified
        Moved nowhere.

10545.  April 6, 2000           FGSEL                      Eric
        FGSEL did not correctly delete records that fell outside the
        selected range of IFs and channels.  Affected UVCOP, FLGIT,
        SPLAT, UJOIN.
        Moved nowhere.

10546.  April 6, 2000            EDIT class                Eric
        Changed EDITR, EDITA, SNEDT to call the Class function with
        KILL on actual error and ABOR on user requested abort.
        Changed QEDIUTIL to make KILL keep the FC table while ABOR
        deletes it.  Corrected EDITUV - it did not reset the SHOW ALSO
        choice under all circumstances that needed it reset.
        Moved nowhere.

10547.  April 6, 2000          PUTTHEAD                   Eric
        Changed this verb to allow adding keywords to a table header
        (so long as there is space).  This takes the adverb KEYTYPE in
        addition to those already used.  Changed help accordingly.
        Moved nowhere.

10548.  April 7, 2000               CCEDT                     Eric
        The memory sent in to the editing subroutine is now
        dynamically allocated.  Therefore, it is not zeroed in advance
        and must be zeroed.  The task depended on it being 0 initially
        which is not right even for normal Fortran memory.  Moved some
        heavy work to be done only when needed and added tests for
        failure of the algorithm.  Previously, on failure it wrote all
        over itself and really went into the weeds.
        Moved nowhere.

10549.  April 10, 2000            FILLM, PRTUV                Eric
        Changed format of weight scaling message in PRTUV to allow
        wider range.  Changed scaling of weights - I think the
        bandwidth in MHz not Hz is appropriate.
        Moved nowhere.

10550.  April 16, 2000          ICHANSEL                 Eric
        The adverb CHANSEL(3,10) is used mostly to define ranges of
        channels to average into a single continuum channel or to be
        used for a baseline fit.  These uses allow for different
        ranges for different IFs, but there is no way in the current
        usage to specify that.  Therefore, added new adverb
        ICHANSEL(4,20) to be like CHANSEL but use ICHANSEL(4,i) to be
        the IF with 0 => all IFs.  Changed:
        POPSDAT    Added new adverb
        NEWPARMS   Added new adverb
        ICHANSEL   New adverb help file
        WANTCH     Changed to loop to 20 and to ignore ICHANSELs that
                   are 0 (not all 20 are used usually - they must be
                   zeroed in advance).
        AVGCHN     CHANSEL is now IF dependent on 3rd argument, lets
                   CHWT be scalar rather than a large array.
        AVGCIF     CHANSEL is now IF dependent on 3rd argument, lets
                   CHWT be scalar rather than a large array.
        AVSPC      Average and count of channels as well as CHANSEL
                   are now IF dependent.  Changed entire pick up of
                   CHANSEL, which was rather confused, to quit when
                   the 1st ICHANSEL(2,i) is <= 0 and to put then in
                   the correct IF(s).  Changed finding of average
                   channel to use WANTCH to avoid overlapped windows
                   and the like.  If an IF got no window from
                   ICHANSEL, then it takes the center 75%.  Fixed
                   AVOPTION handling - anything other than AVIF and
                   SUBS should be normal spectral averaging, not just
                   blank.  It was inconsistent on this point.  Fixed
                   it to correct frequencies in FQ table when the
                   average channel and/or count of channels in an IF
                   differs from that in the first IF.
        BPASS      Changed dimension and pickup methods for CHANSEL,
                   fixed history display, default handled at pickup
                   now.
        CPASS      Changed dimension and pickup methods for CHANSEL,
                   fixed history display, default handled at pickup
                   now.
        PHSRF      Changed dimension and pickup methods for CHANSEL,
                   added history display.
        SPLAT      Restructured to drop REMOVED random parameters.
                   Change computation of average channel to be
                   IF-dependent and use that to correct FQ output
                   table.  Removed some odd stuff with compressed
                   output, rearranged the buffer usage to simplify
                   I/O and averaging, Handle the new ICHANSEL adverb.
        SPLIT      Pick up new ICHANSEL, change call sequences to
                   averaging routines, use average channel out to
                   correct the output FQ table entries.
        UVLSF      Pick up new ICHANSEL, use mask by MAXCIF to avoid
                   something really gross.
        UVLSD      As UVLSF, plus add adverb ORDER.
        UVLIN      Changed NBOXES and BOX, as well as the INFILE
                   option, to support specification of IF.  Changed
                   the DOOUTP option to PRTLEV and generalized it to
                   handle any array rather than just the VLA (!).
        UVMLN      Changed NBOXES and BOX to ICHANSEL and added ORDER
                   adverb.
        FLGIT      Changed NBOXES and BOX to ICHANSEL.
        and all the corresponding help files.
        Moved nowhere.

10551.  April 17, 2000        Update ABOUT files            Eric
        I ran the various test tools and corrected helo files LSAPROPO
        and ZZADVERB, ZZANALYSIS, ZZCALIBRAT, ZZEDITING, ZZGENERAL,
        ZZINTERACT, ZZMODELING, ZZONED, ZZPLOT, ZZSPECTRAL, ZZTASK,
        ZZTV, ZZUV, ZZVERB.
        Moved nowhere.

10552.  April 18, 2000           FILLM                      Eric
        In the SOLAR mode subroutine, there were 2 arrays used to get
        the right VLA IFs together with the right AIPS polarizations
        and IFs.  These arrays were wrong - nominal sensitivity for RL
        was applied to LL, etc.  This error was carried to the MCWAIT
        routine that applied the Tsys and now nominal sensitivity to
        weights.  1,1,3,3, and 5,7,5,7 bacem 1,3,1,3 and 5,7,7,5.
        Moved nowhere.

10553.  April 19, 2000          CookBook                  Eric
        Updated WHATSNEW.HLP and CookBook chapters 4, 6, 7, 8, 9, 10,
        and 13 plus the consequent changes to the Index and table of
        contents.  TVSLICE et al, DBCON, SPFLG, UJOIN, FILLM and
        DOCAL=2, ICHANSEL were the causes of the changes.
        Moved nowhere.

10554.  April 19, 2000           SETFC                    Eric
        The NVSS files we made were for Epoch 2000, not too useful for
        people who have old data or who still use 1950.  Wrote a
        program to convert the 2000 components to 1950 (from EPOSW
        code) and created files $AIPSTARS/xxxMJY.NV50 with xxx = 1000,
        300, 100, and 50.  Revised SETFC help and fortran to select
        the default file based on the header epoch.
        Moved nowhere.

10555.  April 20, 2000              CATLST                Eric
        The buffers used to hold file names for sorting were limited
        to 512 entries.  Changed this to 3*512 = 1536.
        Moved nowhere.

10556.  April 20, 2000             NEWPARMS                Eric
        Although POPSDAT is the important place for new adverbs,
        NEWPARMS is still used and new adverbs should be placed there
        as well.  ANTUSE was omitted.
        Moved nowhere.

10557.  April 25, 2000         SNPLT, UVPLT                Eric
        Changed SNPLT to also allow parallactic angle as an XAXIS.
        Corrected Stokes labeling and X axis labeling in SUM mode.
        Changed UVPLT to plot data weights, elevation, hour angle, and
        parallactic angle.  Corrected UV buffer size, changed fixed
        scale plot test (not 0 means that 0 cannot be used as a plot
        limit!) to max > min => fixed scale, added SOUFIL call so that
        source names will be right on fixed scale plots.

10558,  April 26, 2000          UVPLT                       eric
        I must not have tested one of my changes, although I swear I
        did.  The call to SOUFIL can only work if UVIIT has set things
        up.  Changed it to call and use SCAL even when fixed scale,
        just not read all the way through the file.  This inits other
        things not previously initialized (except by assuming they are
        0 to start) and checks the name parameters etc early in the
        process.
        Moved to AOC this date.

10559.  April 27, 2000        CL table weights            Eric
        Weights in cal tables were being ignored in part.  This may
        explain some difficulties with SNEDT which assumed otherwise.
        BPASET  BP averaging used weights without checking for
                negative values.  Set w = max (0, w), then average.
        BPGET   BP fetching did not allow for the case where the two
                weights were both <= 0.  Added handling of that case -
                data will be flagged, before the 1st BP was used even
                if it was bad.
        CSLGET  Pickup of SN and CL table data ignored the wight
                columns entirely.  Changed it to blank CALTAB entries
                when the weight is <= 0.
        MK3IN   Put values for phases in the CL table and left all
                weights = 0.  Changed it to start with all weights 1.
        M3TAR   Same as MK3IN.
        Moved nowhere,

10560.  April 27, 2000           DBCON                    Eric
        DBCON attempted to copy CL and FG tables with translation of
        FQ and source numbers and times.  It failed if only one of the
        two files had a file of this type.  It also did not fix the
        subarray and did not use the correct time offset.  Added a
        TABCOP to fix the missing file problem and fixed the calling
        subroutine to send in correct time offset and a new subarray
        offset and fixed DBCAPP to do the subarray offset.
        Moved nowhere.

10561.  April 27, 2000            DBCON                   Eric
        DBCON also had an error when combining LL data with an rr/ll
        data set and writing the result out in compressed form.  The
        output (compressed) LREC was used to zero the accumulation
        buffer not the LREC prior to compression.  This does not
        matter unless some input correlators are not present so that
        values are not filled in.
        Moved nowhere.

10562.  April 29, 2000         $YPGNOT/SNPLT.FOR         Leonia
        SNPLT has labeled different IF's plots starting with 1,
        not with BIF as it should be. It is fixed.
        Moved nowhere.

10563.  May 1, 2000           APCLN, SDCLN               Eric
        These two centered their TV display on the first Clean box
        rather than the center of the image.  Changed them to center
        on the image.
        Moved nowhere.

10564.  May 2, 2000             VPLOT                    Leonia
        When min/max bars is requested, VPLOT and one of
        the input data points is zero and flagged (re=im=wt=0), the bar
        has extended down to zero. It is fixed.
        Moved nowhere.

10565.  May 2, 2000              FLGIT                  Eric
        Corrected a mistake and a minor issue:
        a. The flags on deviation from n * rms (APARM(4) and APARM(5))
           did their tests on amplitude squared but the APARM values
           did not get squared.  Thus the 5 sigma test was real a
           sqrt(5) sigma test.  Too many channels were flagged.
        b. The VPOL test was done at the RR polarization.  It should
           be done after the excess flux test on the LL polarization
           and only if RR is not flagged.  Changed the test to check
           for flagged and to do it on the second polarization looking
           back rather than the reverse.
        Moved nowhere.

10566.  May 3, 2000         Plotting                    Eric
        Discovered that TICINC does not return an error code when it
        cannot find a plot interval - so things go on to plot a messed
        up set of parameters.  Changed
        TICINC   To return -1 error code when an interval cannot be
                 found and to try harder at both ends of the range.
        QEDIUTIL To return error -1 when EDTINC fails, but to avoid
                 dying in the end.
        TKTICS   To trap TICINC error < 0 to skip the ticks but not
                 die (i.e. return IERR 0).
        CTICS    To trap TICINC error < 0 to skip the ticks but not
                 die (i.e. return IERR 0).  Use CORDDS not COORDD.
        ITICS    To trap TICINC error < 0 to skip the ticks but not
                 die (i.e. return IERR 0).  Use CORDDS not COORDD.
        CORDDS   Does COORDD but allowing 3 digits for day number.
        SNPLT    To handle missing antenna file by allowing up to 90
                 antennas and taking IAT as the default time system.
        Moved nowhere.

10567.  May 8, 2000                KRING                Chris
        Added a trap for the case where there is no data from which
        to derive a solution. Previously, this case would lead to
        an abort after a division by zero.
        Moved nowhere.

10568.  May 9, 2000                FRMAP                Leonia
        Today is the victory day, day of end of the world war II
        in Europe. Congratulation!!!!!
        FRMAP has not been able to print the table if PRTLEV.NE.0
        and number of lines crossing the given cell more than 60.
        I added the relevant warning.
        Moved nowhere.

10569.  May 9, 2000             BPLOT                   Eric
        Corrected a guaranteed zero divide when plotting the phase of
        the reference antenna.
        Moved nowhere.

10570.  May 9, 2000              UVPLT                      Eric
        If all antenna files were missing it would plot nothing since
        it loops over subarray number.  Fixed to do at least 1.
        Moved nowhere.

10571.  May 10, 2000             UVFIX                 leonia/Eric
        The change to J2000 coordinates had an error causing the task
        to precess the first subarray but not the others.  There was a
        longer standing problem of using the time of the first sample
        for things even if that sample was not in the current
        subarray.  Corrected both.
        Moved nowhere.

10572.  May 10, 2000              Y2K                    Eric
        Checked in $RUNSYS/Y2KLOAD.001 and Y2KEXEC.001 which are new
        versions of DDT suitable for modern computers.  Also the
        help files Y2K.HLP and Y2KSACE.HLP to support them.  This is
        still under development but I need the procs to be
        distributed.
        Moved nowhere.

10573.  May 12, 2000             FILLM                   Chris
        Added checks for frqeuency changes. Without these checks, data
        was sometimes directed to incorrect files when there were setups
        using different AC and BD IF frequency settings and setups using
        the same AC and BD IF settings for the same correlator mode in an
        experiment.
          Also revised the main loop over files to prevent FILLM terminating
        early if there is no selected data in the first 2 files examined.
        This modification has the unfortunate consequence that many error
        messages will be generated on hitting the end of tape whan NCOUNT
        is large since the MCREAD subroutine does not distinguish between
        read errors and end of file conditions.
        Moved nowhere.

10574.  May 16, 2000              FILLM                     Eric
        Chris's recent changes exposed a gotcha when handling the
        default value for NCOUNT (1.0e10 - a bad integer).
        Also changed it to honor FBLANK when put in the nominal
        sensitivity, avoiding use of this special data and flagging
        any data affected.  In the one test so far, the data affected
        were either not present or fully flagged anyway.
        Moved nowhere.

10575.  May 23, 2000    interferometer model table         Chris
        Added routines IMINIT and TABIM to APLNOT. These initialize
        and read/write/close interferometer model (IM) tables using
        argument lists instead of common blocks in INCS:DIMV.INC.
        Moved nowhere.

10576.  May 23, 2000       TABLEUTIL in APLOOP             Chris
        Added new table access routines.
        OCQINI - initialize CQ table
        OTABCQ - access CQ table
        OGCINI - initialize gain curve table
        OTABGC - access gain curve table
        OIMINT - initialize interferometer model table (without
                  INCS:DIMV.INC)
        OTABIM - access interferometer table
        OTABMC - access CALC model components table
        Moved nowhere.

10575.  May 23, 2000           FRING                     Leonia
        FRING has given a wrong message about nonuniform frequencies
        because the tolerance (1.E-7) has been given in Hz.
        I have changed it calculating the tolence in Hz as a product
        of 1.E-7*DF; DF is the found minimum spacing between the
        frequencies.
        Inside of FRNMOD I added (as it has been done in CALIB)
        printing of the CC components actually used in the model
        dividing.
        Moved nowhere.

10576.  May 24, 2000              FXPOL                 Chris
        FXPOL has been completely re-written to be able to deal with
        situations with odd bands LCP and even bands RCP (and stranger
        cases) as well as the usual VLBA case where odd bands are RCP
        and even bands LCP.
        Moved nowhere.

10577.  May 26, 2000          $YPGNOT/CONFI              Leonia
        Fitting to topography, CONFI has shown position of 1000 not
        fitted elements if at least one element appeared outside of
        the topography mask. I have modified the task terminating it
        at this case with the relevant message.
        Moved nowhere.

10578.  May 26, 2000             IBLED                    Eric
        Corrected examination of antenna numbers: the delete all
        baselines with one antenna did not work when applying the
        flags directly to the data.
        Moved nowhere.

10579.  May 26, 2000               KNTR                    Eric
        Found 3 bugs:
        a. The determination of the end point of a line segment uses
        an interpolation scheme without (previously) checking the
        result for validity.  Values from 0 to 0.5 could be in nasty
        cases 200 - causing a line to go off to the edge of the plot.
        A better algorithm is probably called for, but i simply
        substituted some tests for validity and provided alternative
        computations of the interpolations.
        b. Long lines with the pen down were drawn as a lot of short
        segments, wasting disk space, computation time, etc.  Savings
        of 10-40% in the plot file are realized.
        c. A format was inadequate for the range of things that might
        be plotted.
        Moved nowhere.

10580.  May 27, 2000              EXTLIST                   Eric
        Changed AU8A for the addition of NY - nuber of Y panes - which
        moved a bunch of adverbs to 1 higher addresses in the buffer.
        Moved nowhere.

10581.  June 1, 2000          Linux/PPC support             Chris
        Added support for Linux/PPC running on a PowerMac G3 or G4.
        Added a SYSLINPPC area and an APLPPLIN.
        Changed FDEFAULT.SH, LIBR, STARTPMON, ZLASCL, and ZLPCL2 in
        SYSUNIX.
        Changed INSTEP1 in INSUNIX.
        Changed Makefile for XAS.
        Most of the porting work was done by Craig Lewis.
        Moved nowhere.

10582.  June 2, 2000             CDVER.SH/CSH               Pat
        Modified these to reflect local changes (UPDATE location changed
        slightly; no more direct automounter maps; /home/aips1/...)
        Moved nowhere.

10583.  June 2, 2000                  DBCON                Eric
        Changed the test on coordinate rotation so that an angle of
        1e-6 and 0 would be regarded as close enough to each other
        (!)  Cleaned up the code some too.
        Moved nowhere.

10584.  June 2, 2000              QUVUTIL                 Eric
        QUVUTIL skipped the call to UVWAIT on natural weighting unless
        there was some powere (other than 1) of the weight taken.  It
        did not check for a UVTAPER (called keyword WTTAPER at this
        stage).  So UVWTFN='NA' or ROBUT=7 were not tapered in IMAGR
        and elsewhere.
        Moved nowhere.

10585.  June 6, 2000             TABLEUTIL                Chris
        Added wrappers for phase cal (PC) table access routines.
        Moved nowhere.

10586.  June 6, 2000               FXPOL                   Chris
        Added conversion routines for phase cal (PC) tables that were
        unintentionally omiited from the initial version.
        Moved nowhere.

10587.  June 7, 2000              XAS                      Eric
        Changed init to detect the number of bits per pixel as well as
        the depth.  Some XWindows use 24 and most 32 for 3x8 bits of
        color.  Rewrote scrdo24 to handle both 24 in 24 and 24 in 32 -
        before it only did the latter.  In testing, discovered an
        error that caused it not to repaint all pixels in zoom mode
        with split screen (used only by TVROAM).  A long standing
        error in the 24-bit and 8-bit codes could cause aborts for
        addressing exceptions by going on too long in zoomed rows.
        Moved to AOC Linux machines as soon as bits of it worked.

10588.  June 8, 2000              POSSM                    Eric
        POSSM plotted R bandpass solutions unless you told it 'LL' and
        plotted the average of R and L on blank (but not I).  But it
        labelled the plot with whatever the user said for STOKES.
        Changed it to be friendlier about the user's STOKES, to label
        it meaningfully, and to warn about the averaging in the help
        file.
        Moved nowhere.

10589.  June 11, 2000          FACES                        Eric
        New task: It makes images and CC files for a multi-field
        "image" using the NVSS as the list of sources.
        Moved nowhere.

10590.  June 12, 2000              VLBAUTIL                 Chris
        Added a run file containing a preliminary set of procedures
        for dealing with VLBA data. The initial set of procedures
        is:
        VLBALOAD - run FITLD with default options
        VLBAMCAL - remove redundant calibration records
        VLBASUBS - set up subarrays if necessary
        VLBAFPOL - fix polarization labels if possible or recommend
                   settings for FXPOL
        VLBAFIX  - fix common VLBA problems (VLBAMCAL, VLBASUBS,
                   and VLBAFPOL in sequence).
        These are primarily aimed at novice users.
        Moved nowhere.

10591.  June 13, 2000              DOCALIB                 Eric
        Upgraded the help file for this adverb to tell about DOCAL=2
        for weights.
        Moved nowhere.

10592.  June 13, 2000            EDITA                      Eric
         The Tsys - <T> plot was labeled as being in Kelvins but was
         actually 100 * (Tsys/<T>-1).  Changed by dropping the 100,
         changing the label to Ratio rather than K and the option name
         from TSYS - <T> to TSTS/<T>-1.  CHANGED QEDIUTIL, EDITA.HLP,
         HLPEDITY.HLP.
         Moved nowhere.

10593.  June 14, 2000      $APLNOT/BESSJ0                    Leonia
        The new function BESSJ0 calculates the values of the Bessel
        function of zero order. The algorithm is taken from:
        http://gams.nist.gov... after significant simplification.
         Moved nowhere.

10594.  June 14, 2000                  ISPEC                Eric
        Changed to have ZINC < 0 => a request to plot the Z axis in
        the opposite order (thereby allowing velocity to increase to
        the right in typical cases).
        Moved nowhere.

10595.  June 15, 2000              BLSUM                    Eric
        Changed BLSUM to offer the option of writing a text file for
        use with PLOTR to plot the spectra from up to 5 blotch regions
        selected in BLSUM.  Changed it to plot flux for Clean images
        and average brightness otherwise.  The business of plotting
        the ratio of the current channel to the blotch image makes
        little sense to me (now anyway).
        Moved nowhere.

10596.  June 19, 2000           ZVTPO3, ZVTPGC              Pat
        A brief (and incomplete) security audit of TPMON found a couple
        of strcpy calls in these routines that were potential buffer
        overflows.  As TPMON acts as a service accepting connections
        from potentially anywhere, such unsafe strcpy could potentially
        yield a shell to a "hostile".  Replaced these with strncpy calls
        which prevent buffer overflows.
        Moved nowhere.

10597.  June 20, 2000            CALIB, FRING                Eric
        Both of these rounded the scan time range outward by a bit and
        both comments were wrong about the size of the rounding.
        CALIB expanded by 4.32 sec in each direction!  With 3 sec
        between scans this can lead to very bad decisions about what
        to include and not include in phase switching experiments.
        FRING expanded by 1 second.  Change both to expand by 0.1
        sec - the accuracy of a time at 10 days.
        Moved nowhere.

10598.  June 20, 2000            OHGEO, HGEOM                Eric
        Changed the handling of the reference pixel in both cases.  In
        HGEOM, allow the user APARM(3 and 4), and in OHGEO AXREF and
        AX2REF, to specify the desired ref pixel.  Default is the 2nd
        image ref pixel without regard for output image size.
        Corrected OHGEO which had very bad methods for setting the ref
        pixel and which got most of its header from the 2nd image incl
        frequency, stokes, and more.  HGEOM had a wierd break from a
        sensible ref pixel if IMSIZE was large enough to a center of
        field when it was not.
        Moved nowhere.

10599.  June 21, 2000             QEDIUTIL                 Eric
        The history file was not written correctly due to the use of
        the wrong variable name.  The column labels were repeated
        rather than showing the information.
        Moved nowhere.

10600.  June 24, 2000          NVSS lists                  Eric
        Changed the format of the NVSS lists to include one more
        decimal place for the fluxes - i.e. 0.1 mJy.  Replaced the
        $AIPSTARS files for 1000, 300, 100, and 50 mJy for both 1950
        and 2000 epochs.  Also created very much larger files for 5
        and 1 mJy which will be available from the WWW but not put in
        the standard distribution.
        Changed:
        SETFC   Changed the reading of the NVSS lists and flux
                computation.
        FLATN   Corrected handling of scratch image headers to block
                out unused axes - OOP has strange ways of doing things
                that force NAXIS >= 1 but then make NDIM = 7.
        FACES   Changed the NVSS format, improved beam model incl new
                74 MHz model.
        Moved nowhere.

10601.  June 24, 2000         $QPGNOT/UVCON.FOR, HLP        Leonia
        The new option: pointing error has been added.
        The three type of the primary beam are offered:
               1. circular dish with the flat illumination (VLA)
               2. illumination is 10db down at the dish edge
               3. illumination is 15db down at the dish edge
        The three component of the pointing error are offered:
               1.global pointing error, constant in time for all
                 antennas. This error immitates the error of the
                 source coordinate.
               2.random among all antennas, but constant in time.
               3.random among all antennas and in time.
        The task can use the model given as CC component using
        DFT method for the visibility calculation.
        Moved nowhere.

10602.  June 26, 2000           SETFC, FACES                 Eric
        The ACOS arguments can sometines get too big - corrected all
        ACOS uses in these 2 to test for argument size.
        Moved nowhere.

10603.  June 26, 2000             WENSS                   Eric
        Added formatted WENSS files for J2000 and B1950 to the WWW
        STARS area and remarks anbout them to the SETFC and FACES help
        files.
        Moved nowhere.

10604.  June 28, 2000          SETFC, FACES                 Eric
        Added the FLUX adverb to be a cutoff in the product of the
        source flux and the antenna beam.  The file names alone do not
        provide an adequate flux control.
        Moved nowhere.

10605.  June 28, 2000       VLBAUTIL procedures             Chris
        Fixed a faulty call to the VLBANEW procedure from VLBASUBS.
        Moved nowhere.

10606.  June 29, 2000         TVFLG, SPFLG help             Eric
        The user's value of STOKES does not completely control the
        default Stokes to be flagged.  That default is normally just
        what is displayed plus relevant crosshands.  Corrected the
        help files on this subject.
        Moved nowhere.

10607.  June 29, 2000          TVLABEL                      Eric
        Changed AU5B amd the help files to add GRCHAN as an adverb to
        TVLABEL and TVWLABEL.
        Moved nowhere.

10608.  July 1, 2000     $APGNOT/MATHS                      Leonia
        Added the new option 'ABS' that calculates the map of
        absolute value of the input image.
        Moved nowhere.

10609.  July 2, 2000             IMAGR improvements         Eric
        In working with IMAGR to correct a bug, it became clear that
        it is very useful to have NO clean boxes in some fields for a
        period at the beginning of the Clean, esp in OVERLAP 2 mode.
        A field is chosen for Cleaning in that mode based on outdated
        information - in weak fields information that is likely due
        to sidelobes of the main sources which are Cleaned away before
        the field is actually chosen.  Changed to allow FLDSIZE=-1 to
        mean no initial Clean box and a size = IMSIZE and to allow the
        TVBOX option and verb to return 0 boxes (hit button D right
        off).  Changes:
        IMAGR    To have FLDSIZ(*,i) < 0 => no box, size=IMSIZE
        SCIMG    To have FLDSIZ(*,i) < 0 => no box, size=IMSIZE; to
                 declare local includes for TELL separately to avoid
                 unused variables; to correct handling of CLBOX since
                 box 1 for all fields comes ahead of box 2, etc
        TVMENU   Set logical to init TITLE graphics plane from inputs,
                 window size change or previous line longer than
                 current one.  Tittles were getting messy.
        FIELDF   Handle round-off for negative FLDSIZE in BOXFILEs.
        GRBOXS   Clear box-drawing graphics when #boxes <= 0; allow
                 NBOX = 0 to be returned.  Previously it set NBOX to
                 at least 1 even if no TRC was set.
        QCLEAN   Fixed a bug in 3D Cleaning with OVERLAP<2: it did the
                 histogram only on the first field.  This could set a
                 very low flux level for loading to the AP, much too
                 low for larger Clean boxes in later fields.  Changed
                 it to do the histogram over all images in this case.
                 Changed it to allow no Clean boxes in a field.  Added
                 flag to be set by TELL and the TV saying to QUIT -
                 otherwise the QUIT operation was overridden in some
                 cases and ignored.  Added message recommending
                 OVERLAP=2.  Added a call to CLNTEL ahead of the Clean
                 loop after images are first made.  Added an off
                 scroll for image plane 1 - the scroll was turned off
                 for all other image planes but the one that
                 mattered.  Added warning that > MAXPIXEL pixels were
                 loaded to the AP.
        Helps:   IMAGR (fldsize, quick exit from TVBOX)
        Helps:   SCIMG (fldsize, quick exit from TVBOX)
        Helps:   HLPSCMAP (number boxes, quick exit from TVBOX)
        Helps:   HLPCLEAN (number boxes, quick exit from TVBOX)
        Helps:   HLPSCIMG - forgotten real-time help file
        Moved nowhere.

10610.  July 3, 2000        Unused variables            Eric
        Changed 129 subroutines to remove unused variables - most were
        DATAed things that the Sun compilers do not report.
        AU2  AU3  AU5A  AU5B  AU5C  AU7  AU7A  AU8  AU9A
        HELPS  HIENH  HILUT  OFMLST  PSEUDO  RDUSER
        ANTDAT  ANTINI  B2JPOS  BAKLDS  EXTIO  LMPIX  MAPCOP
        MAPOPN  MAPWIN  MDISK  MINIT  MSGWRT  MWFBSM  NEWPOS
        OFMDIR  PSFORM  SETDO3  TABKEY  TAPIO  VBOUT
        ARRAY  UVPHAS
        ZRMTAP  ZSSSLK  ZSSSOP  ZTAPE  ZTXREN  ZVTPRO  ZVTVOP
        ZVTVRC  ZVTVRO  ZACTV8  YTVOPN  YCREAD
        DLINTR  IMANOT  OFMCON  OFMGAM  TVFLAM  TVLOAD  TVPSUD
        TVXPRT
        ACTFRQ  AGINI  APLPBI  APPLPB  ATCONV  ATINI  BAINI  BASAVG
        BCINI  BLINI  BLSET  BOXBSM  BPINI  CAINI  CALINI  CHNDAT
        CLSORT  CMINI  CSINI  DGETSD  FLGINI  FNDPOL  FNDVAR  FQINI
        FRINI  GAINI  GCINI  GETDEL  GETKEY  GNFSMO  GNSMO  GRIDTB
        HFINI  IMCREA  IMINI  IMREF1  IMSORT  INDXIN  NDXINI  NXTFLG
        OBINI  OTTINI  RMEXT  SDCSET  SNAPP  SNINI  SNRESC  SOINI
        SOUINI  TABAPP  TPIOHD  WXINI
        QSPSUB  QUVIN  QROLL
        AEGRID  GRDCRM  GRDSUB  UVMDIV  UVPDIV  UVTBUN  UVTBUW
        Save the COMRPL for the MAXIF change.
        Moved nowhere.

10611.  July 4, 2000     FLGIT, CLIPM, UVLIN, UVMLN     Eric
        Rearranged the reporting of data flagged to use dynamic memory
        allocation.  The forthcoming change in MAXIF was disastrous
        for these 4, raising memory needs by 16 or 24 Mbytes.  Now
        they will run in a lot less memory in most cases.
        Moved nowhere.

10612.  July 6, 2000          IBLED                     Eric
        Rearranged the buffer handling for the calibration and
        averaging to use dynamic memory.  Corrected a hard coded (!!)
        28 for the antenna station ID strings.  Pie Town caused it to
        abort.
        Moved nowhere.

10613.  July 6, 2000        APCAL, GETJY                  Eric
        Changed GETJY to count sources and then use dynamic memory to
        allocate the buffers it needs; MAXIF was making this one
        enormous and it still would only handle 300 sources.
        Changed APCAL to allow only 10 records per antenna/IF/FQ to
        describe the gain model in a 2nd dimension.  I doubt that > 1
        is actually needed at present, so long as MERGECAL is run.  It
        was using 2 * MAXANT (=180) for no good reason at all, making
        this one of the biggest tasks in the system.  Also added
        option to limit plots to < APARM(5) in sec(z).
        Moved nowhere.

10614.  July 6, 2000              APCAL                   Chris
        Removed code that added a scan with 2 system temperature records
        between every solution interval.
        Moved nowhere.

10615.  July 7, 2000             BLING BLAPP               Eric
        Fixed an error introduced with the DOCALIB=2 change in March:
        'Inputs' was misspelled 'Input' causing BLING to die.
        Changed BLAPP to use dynamic memory for arrays that were
        previously 2 x MAXIF x MXBASE.
        Moved nowhere.

10616.  July 8, 2000           QEDIUTIL                      Eric
        The handling of ALLPOL and ALLIF in EDFLAG was strange - I
        wonder what I was thinking.  Corrected it to handle crowded
        and uncrowded plots and ALLPOL/ALLIF correctly (I hope).  The
        REDO operation did not init variables it used and otherwise
        did some odd things.  Fixed it to set the parameters in
        advance, and loop only as needed.  UNDO needed a bit of this
        too.  Fixed it to use OBJECT as the default source 1 name.
        Moved nowhere.

10617.  July 8, 2000        FILLM, SPLIT help                Eric
        Added DOWEIGHT to FILLM as a synonym for CPARM(2) = 8.
        Changed the help file to describe the synonyms.  Also did this
        for DOCAL=2 and the APARM(4) option in SPLIT and SPLAT help
        files.  Changed FILLM to allow the weighting option for any
        version of the data - the Tant values are only good at rev 25
        but the nominal sensitivities were good before then.
        Moved nowhere.

10618.  July 9, 2000        POPS verb                    Eric
        Changed POPSDAT.HLP and POPSYM.HLP but NOT NEWPARMS.001 to
        create a new verb (spelled with a tilde sign).  Changed COMPIL
        to compile it and to correct an error handling the compilation
        of the = sign in lists.  Changed KWICK to call PASSGN and
        wrote PASSGN, a version of MASSGN to handle the new verb.
        The tilde verb stores 1 or more values in an array starting at
        the specified subscript.  It does not check the array bounds
        and so can overflow in the next adverb, whatever that may be.
        Thus APARM(6) ~ CPARM copies CPARM(1)-CPARM(5) into APARM(6)
        through APARM(10) and then copies CPARM(6)-CPARM(10) into
        whatever follows (in this case BPARM(1)-BPARM(5)).  This will
        help a lot with, e.g. RASHIFT, GWIDTH, et all.  Thus
              GWIDTH(1,3) ~ a,b,c
        sets the width parameters for the 3rd gaussian without
        changing any other GWIDTH values.  The number of values on the
        right-hand side of the ~ determines how many values on the
        left are changed.  the array is not 0 or blank filled as with
        the = sign.
        Moved nowhere.

10619.  July 9, 2000           PUVD.INC                 Eric
        Changed MAXIF from 28 to 90 to handle interferometers that
        deal with frequencies in a very general way.  Several tasks
        have already been fixed to use dynamic memory rather than to
        go up in size by 15-40 Mbytes with this change.
        Moved nowhere.

10620.  July 11, 2000           BOX2CC                  Eric
        Corrected BOX2CC.001 to limit NCCBOX to 10 and to set CCBOX to
        zero first.  Created a BOX2CC help file.  Fixed a missing
        comment line in CCEDT.HLP.
        Moved nowhere.

10621.  July 12, 2000           PLAYR                    Eric
        Changed order of includes - DATA statements preceded
        declarations and only HP62 in Bonn told us.
        Moved nowhere.

10622.  July 12, 2000           INDXR                   Eric
        The method of computing the antenna and subarray numbers from
        the baseline code did not allow for numbers epsilon less than
        ideal and so got wrong answers occasionally.  Put in a much
        less elaborate method that works.
        Moved nowhere.

10623.  July 12, 2000           AFILE                   Eric
        AFILE used list-directed READs in several places to read in a
        variety of variables from internal strings.  This is
        technically illegal in Fortran 77 and the (lesser) HP compiler
        took today to complain.  Changed by adding a routine to use
        GETNUM to parse the strings and changed the READs to calls to
        this GETI4.  I am hoping that MPI or someone will test this.
        Moved nowhere.

10624.  July 14, 2000            XTRAN                  Eric
        Changed to allow DOOUT = -2 to be the same as +2 except no
        output.  DOOUT=-1 matches +1 in its choice of reference pixel
        etc.
        Moved nowhere.

10625.  July 15, 2000          CALIB                   Leonia/Eric
        A logic mistake is found at the ANTUSE determination.
        As a result only first of listed ANTUSE has been actually
        selected at a special combination of the ANTUSE list.
        CALIB could have a problem if number of antennas at the
        AN table exceeds 50. It has been fixed also.
        Moved nowhere.

10626.  July 17, 2000      $YPGNOT/APCAL.FOR           Leonia
        APCAL has not worked if the TY table lists more sources than
        SU table. Such a situation takes a place when APCAL is used
        after UVCOP applied selecting sources.
        Reading a row of the TY table APCAL has checked the presence
        of the found source at the SU table and died if the source
        is not found at the SU table.
        I have changed the logic here. Now if the source is not found
        at the SU table, APCAL goes reading the next line at the TY
        table.
        Moved nowhere.

10627.  July 17, 2000            FRING                 Eric
        Changed FRING to use dynamic memory relative to APCORE to see
        to it that any fringe fit will "fit into" any AP size.
        Changed $QPSAP and $QSGI versions of QSEARC to take 3
        arguments as the 3 offsets needed into the AP.  This lets 0 -
        3 be to the standard AP memory and the remaining 3 - 0 be to
        dynamic memory.  Added comment to help file.
        Now sites should consider whether very large AP memory is
        right for them.  FRING previously required it.
        Moved nowhere.

10628.  July 18, 2000              TECOR               Chris
        Fixed two errors in parsing IONEX files, both of which resulted
        from ambiguous wording in the IONEX definition.
        1. The number of maps given in the header is the number of maps
           of each type not the total number of maps in the file. Assuming
           the latter may lead to some TEC maps not being read if RMS and
           HEIGHT maps are interleaved with TEC maps.
        2. EXPONENT records can appear outside the header. It appears that
           where EXPONENT records appear outside the header the new exponent
           applies to all subsequent data until the end of file or until
           another EXPONENT record is encountered and is not limited in
           scope to the enclosing map. This interpretation is based on the
           sample routines referenced in the IONEX definition document.
        It does not appear that either error would have caused a problem
        with any of the data currently archived at CDDIS.
        Moved nowhere.

10629.  July 20, 2000              FRING                    Eric
        I had attempted to avoid re-allocating dynamic memory on every
        scan/pol.  But every parameter can vary between scans even the
        number of rate or delay points so changed it to recompute the
        pointers and allocate memory if needed in every call to FRNSRC
        and FRNALL (and deallocate the memory on the way out of
        course).  July 21 - corrected a typo in FRNALL freeing memory.
        Moved nowhere.

10630.  July 21, 2000           PBCALC                      Eric
        Broke the primary beam calculation out into a single
        subroutine to be used by PBCOR, PATGN, SETFC, and FACES.
        Added Perley's beams for 74MHz and P band and the NVSS beam
        for L band as well as the old PBCOR beams for higher
        frequencies.  This should still go into the OOP code for IMAGR
        beam correction....
        Moved nowhere.

10631.  July 24, 2000         APCAL                        Leonia
        APCAL has given the message implemented by Ketan. The message
        does not have a sense if OPCODE .NE. OPAC.
        I have left the message only if opacity is uses.
        Moved nowhere.

10632.  July 24, 2000          OHGEO, HGEOM                 Eric
        Due to complaints, I have changed the default handling of the
        new reference pixel adverbs.  If they are BOTH zero, then the
        numeric center of the input image is placed at the numeric
        center of the output image.
        Moved nowhere.

10633.  July 24, 2000       BPASS.HLP                       Leonia
        The default of BPVER (BPVER=0) has been described as BPVER=1
        that does not correspond to the actual codes. I changed it:
        0 => a new table to be generated.
        Moved nowhere.

10634.  July 25, 2000         IMSEL in APLNOT               Chris
        Re-wrote IMSEL to use IMINIT/TABIM rather than IMINI/IMTAB.
        This means that the RDATE keyword is no longer omitted from
        the output table and allows the logic to be simplified since
        it is no longer necessary to swap table meta-data in and out
        of common.
        Moved nowhere.

10635.  July 25, 2000           TVLABEL, TVALL                Eric
        Fixed to describe and spell GRCHAN more correctly.
        Moved nowhere.

10636.  July 25, 2000           OHGEO, HGEOM                  Eric
        Corrected bug in OHGEO that had the wrong coordinates
        appearing in the output image - it said the 1st image and
        should have said those of the 2nd for the first 2 axes.  Of
        course, not long ago it took all axes from the 2nd (e.g. freq,
        stokes, etc).  Also changed the defaults once more: if IMSIZE
        and the ref-pixel adverbs are ALL 0, the the output size and
        ref pixel are taken from the 2nd image.
        Moved nowhere.

10637.  July 25, 2000               SETLOC                  Eric
        The code trying to recognize coordinates did not do a good job
        on a legitimate but unrecognized ra/dec pair.  Fixed it to
        still treat them as RA/DEC (or GLON or ELON...) but just do
        linear arithmetic (i.e. -CAR projection).
        Moved nowhere.

10638.  July 25, 2000                 UVHOL                  Eric
        Changed help anf fortran to allow BDROP=1 rather than
        converting that value into 5.  0 still goes to 5.
        Moved nowhere.

10639.  July 26, 2000             IMAGR                      Eric
        Changed QCLEAN to sum the restored flux from field n to m and
        then to report the total clean flux in each field as it
        exits.
        Moved nowhere.

10640.  July 26, 2000               IMEAN                    Eric
        Added another test for the fit of the histogram for rms being
        in deep trouble.  If the fit section does not include at least
        10% of the pixels (it should be ~80%) then we have not found
        the right peak in the histogram or it does not look like a
        Gaussian.  Added a message that all the bail-out tests go to.
        Moved nowhere.

10641.  July 27, 2000              FILLM                     Chris
        FILLM does not handle changes in correlator configurations well
        if they coincide with file boundaries. If FILLM detects an end-
        of-file condition in an MCRECO READ operation it calls MCRECO
        with an INIT opcode until it find data that it wants and then
        call MCRECO with the READ opcode again. If the correlator set-up
        has changed then the INIT operation detects this and sets a flag
        indicating that a change of output file is needed but no action
        is taken regarding the output file since no data has been read.
        The subsequent READ operation compares the correlator parameters
        to those it found during the INIT and finds them to be the same
        and therefore concludes that the output file need not be changed.
        This results in the first scan from the new file being written
        to the same output file as the last scan from the previous file
        when it should be directed to another file.
        Fudged FILLM so that INIT operations will not overwrite its
        record of the previous sky frequencies which should prevent
        most but not all errors of this kind. I suspect that it is
        unsafe to prevent the update of other remembered data.
        A better solution would be to determine the output file at the
        point where the correlator configuration change is detected
        rather than waiting for data to be written but this would
        appear to require considerable effort.
        Moved nowhere.

10642.  July 28, 2000                 LISTR                 Leonia
        LISTR has not understood 'I' as a stokes if OPTYPE='GAIN'.
        So if the data are 'I' stokes then LISTR considered 2
        polarisations and having succesfully finished the first (the
        only) one died without any explanation because a second
        polarisation is absent. I have modifyed the routine GANSET
        adding 'I' in the list of considering stokes and forcing
        STOKES='I', if ICOR0=1 and if CATBLK indicates the only
        polarization in the data.
        Moved nowhere.

10643.  July 28, 2000            FITLD                     Chris
        While the FITS-IDI definition and the earlier VLBA memo
        required that epochs be 8-character strings in the SOURCE
        table the VLBA has been writing the epoch as a double-precision
        number and FITLD has expected this. FITLD now copes with both
        the correct form of the SOURCE table and the VLBA variant by
        checking the dimensionality of the column and assuming the it
        holds a double-precision number if the dimension is 1 or a
        character string if the dimension is 8.
        Moved nowhere.

10644.  July 30, 2000            Modeling                    Eric
        Changed SETGDS.  With the new naming convention, it always
        numbered the model files from 001 even if there was only 1.
        This made it impossible to subtract field, say 8, from the uv
        data.  Changed to read IN2CLASS(4:6) == J, and then to number
        from J to J+NFELD-1.
        Moved nowhere.

10645.  July 31, 2000              FITAB                    Eric
        Found an egregious error.  the data were opened under LUN 16
        and then TABSRT could be called.  This uses LUNs 16-25 and
        routines under it did not care if the LUN was already open in
        the FTAB, they just kept going.  Thus, if one were writing UV
        data with > 1 piece, the sorting of tables to time order (if
        needed) would destroy the initial part of the input UV data
        set.  Why has this not been reported - does no one use FITAB?
        Moved nowhere, lots more to come - should go to patch.

10646.  August 1, 2000        UVCOP                       Leonia
        I have fixed the bug in UVCOP, that has existed long time.
        UVCOP has not flagged the data if the selected FREQID>1.
        UVCOP rewrote the (FREQID) random parameter of a visibility
        (RPARM(1+ILOCFQ)) to 1(one) independent on the selected
        FREQID. And this is right.
        But later inside of routine DATFLG, it compares the FREQID
        of the FG table with RPARM(1+ILOCFQ), which was recalculated
        to 1 (one) ealier. It is clear that if FREQID of the FG is
        not 1, then it does not match with the having selected data
        and the flagging is missing.
        I have changed comparison (inside of DATFLG) from
        RPARM(1+ILOCFQ) to the selected FREQID.
        Moved nowhere.

10647.  August 2, 2000          install.pl                 Pat
        Put back a checkpointed version of this script (in $SYSPERL).
        It's not ready for prime time yet, as I have only tested the
        menu and input parameter portion of it.  Yet to test is the
        actual meat of the deployment.  However, I encourage people to
        try out the first part and let me know what they think.
        Moved nowhere.

10648.  August 2-3, 2000        ZOPEN                     Eric
        When ZOPEN returns an error code 1 (already used in FTAB) this
        means that some file is open with that LUN.  To use that LUN
        for some other purpose at that point allows that other purpose
        to overwrite the original file - the users data in FITAB for
        example.  It is never right to mask this error.  Changed
        maksing of this error in:
        AMERGE  EXTINI  IMGERR  RELPOP  TABINI  UVPREP  UVPROT
        ALGSUB  ONV1    CONV3   GRDMEM  UVTBGD  PASS1
        AHIST   BSROT   CLIP    CORER   CORFQ   CPYRT   DIFRL   DIFUV
        FUDGE   HISEQ   REMAG   SDLSF   SDMOD   TAFFY   TBAVG   UVBAS
        UVCMP   UVLSD   UVLSF   UVMTH   UVPOL   WTSUM   XBASL   XGAUS
        XMOM    XPLOT   XSMTH   XSUM    ACCOR   AVER    AVSPC   BASRM
        BLAVG   BLOAT   BSFIX   BSMAP   BSMOD   CANDY   DAYFX   DBCON
        DECOR   DESCM   DTCHK   FETCH   FILLM   FILLR   FLGIT   FXTIM
        FXVLA   GLENS   IMFLT   IMLIN   IMMOD   INDXH   M3TAR   MANDL
        MK3IN   MODVF   MULTI   MWFLT   NINER   NNLSQ   PATGN   PCCOR
        PHNEG   PHSRF   RESEQ   SBCOR   SDTUV   SELSD   TI2HA   UJOIN
        USUBA   UVAVG   UVCOP   UVCRS   UVDGP   UVFIL   UVFIX   UVGLU
        UVLIN   UVMOD   UVNOU   UVSIM   VBCAL   VBGLU   VBMRG   VLBIN
        WTMOD   BLCAL   BPASS   CALIB   CPASS   FRING   GRIDR   LPCAL
        PCAL    SDIMG   APCLN   APGS    APVC    SDCLN   STEER   UTESS
        UVMAP   BLANK   BLSUM   IMVIM   IBLED
        Moved nowhere - INSTEP4 to be done.

10649.  August 6, 2000              IMAGR                    Eric
        All values of IMAGRPRM(8) were used in the filtering stage if
        the initial value was not zero (so that the copy of the
        original data was made).  The help file states that a zero
        value will mean no filtering at any time.  So changed it to
        test for exactly zero before calling CLFILT.  Added emphasis
        in the help file on this point.
        Moved nowhere.

10650.  August 8, 2000      VLBAUTIL run file                 Chris
        Cleaned up procedures defined in VLBAUTIL and added new procedures
        for splitting out frequency IDs, applying amplitude calibration, and
        correcting for parallactic angle. Also added some helper procedures
        and removed VLBAFIX. See the VLBAUTIL help file for more information.
        Moved nowhere.

10651.  August 10, 2000           FITAB, FITTP              Eric
        FITTP had a long-standing failure to pass the error code from
        PTF3D to higher level routines so that they could quit on tape
        error while writing tables.  This error was copied into FITAB
        where it is even more important.
        Moved nowhere.

10652.  August 10, 2000              DBCON                  Eric
        One of the ZOPEN calls corrected a few days ago had an error
        test of IRET (set to 1 at that point) while ZOPEN returned
        IERR.  The correction to allow only 0 caused DBCON to have a
        hard-coded failure.  Sigh...
        Moved nowhere.

10653.  August 17, 2000             FITTP                  Eric
        The SGI aborted from the use of a real*4 buffer on a real*4
        address for a real*8 variable (calling ZRLR64).  The buffer
        has to be forced to a real*8 boundary via equivalence.
        Moved nowhere.

10654.  August 17, 2000           ZWINC2                  Eric
        Created an SGI version of ZWINC2.  Oddly, other architectures
        require POSIX_SOURCE to be true, SGI requires it to be false.
        Moved nowhere.

10655.  August 19, 2000            MULTI                  Eric
        Like other tasks in the past, MULTI regarded CL tables with
        1,0 solutions as not good and so set weight to 0.  Users do
        not like seeing nothing out now that weights are used.
        Changed to all weight 1.
        Moved nowhere.

10656.  August 29, 2000          DFT subtraction           Bill/Eric
        When QPTDIV was changed (15APR98), the frequency scaling array
        was changed to be freq(i)/freq(ref) rather than an incremental
        freq(i)/freq(i-1) form.  Unfortunately, the calling routine
        was not changed to match.  Bill changed VISDFT, VSCDFT,
        VSFDFT, QXXPTS (comments), QPTDIV, QPTADC to go to the
        new/better frequency form.  I noticed that the 7 words used
        for point CC, 12 for Gaussians, and 11 for spheres, could be
        reduced to 4, 7, and 6, resp.  So I changed the above for this
        saving of space and changed QGADIV, QGADIV, QSPDIV, QSPSUB to
        do the model computation in one loop as QPTDIV and to use the
        reduced memory per component.  the error affected subtraction
        by DFT of compoennts well away from the phase center when
        there are > 2 frequencies.
        Moved nowhere.

10657.  August 29, 2000           Gridded subtraction        Eric
        ALGSTB had a habit of looping once through the data for each
        row swath and each spectral channel in the data set whenever
        the full grid of model values would not fit in the AP.  It
        attempted to do > 1 channel at once by a very suspicious
        algorithm which fortunately rarely if ever actually did more
        than one at once.  With a smarter use of the AP and
        overlapping swaths, it is possible to do all the channels at
        once.  Changed ALGSTB to do this, making it go 5-6 times
        faster for a 14 channel test data set.
        Moved nowhere.

10658.  August 29, 2000           QCLEAN, QUVUTIL           Eric
        Changed QCLEAN to choose the display field in OVERLAP=2 mode
        whenever it is about to make available all fields on the TV.
        Previously, it started with the value of DOTV and continued
        with whatever field was displayed last.  Now it at least hints
        at what field it will clean nexxt if no boxes are changed.
        Changed QCLEAN to look for the keyword NFLDRSTR in the CLEAN
        object and to use that value as the maximum field number to be
        computed and restored at the end.  Any value <= 0, > MFIELD,
        or if the keyword is not present causes all fields to be
        recomputed and restored.  The overlap from all fields is
        included in the restored fields.
        Changed QUVUTIL to check that the input and output uv data
        sets in OUVSRT have the same compression state.  Added Bill's
        corrections to make most routines quit if IERR not 0 at the
        start.   Added Bill's change to test the 'SCRCNO' keyword.  If
        the keyword is in an object, its value must be tested to make
        sure it is positive before it is used.
        Moved nowhere.

10659.  August 29, 2000           OOSRT                     Eric
        A UVSRT using the OOP sort routines rather than the ones in
        UVSRT.   It is mostly just good as a test of those routines.
        It is about the same speed.
        Moved nowhere.

10660.  August 29, 2000          OOP                        Eric
        Raised the limit in ZOINTD.C from 1000 to 1280 objects.  The
        512 field limit on images went over the 1000 limit.
        Moved nowhere.

10661.  August 31, 2000               cationex              Chris
        Added the source code for a stand-alone utility to combine
        several IONEX data files into one for TECOR to APLCONTR.
        The sources and makefile are in APLCONTR:cationex.tar.
        Primitive instructiones for compiling and running cationex
        are in APLCONTR:cationex.html.
        Moved nowhere.

10662.  September 1, 2000          model division               Eric
        For I do not know how long, the model subtraction and division
        using SMODEL has failed.  It chose gridded in all cases and as
        a result did nothing - so moved the DODFT = DODFT .or. DOPTMD
        to after all choices between the 2 methods in UVMSUB and
        UVMDIV.  Corrected VISDFT which no longer used the right AP
        locations forsuch models after the recent change in the CC
        handling.
        Moved nowhere.

10663.  September 1, 2000             TVCPS                    Eric
        Changed TVCPS to make sure that the margin does not erase the
        picture and that the font scaling does not go to 0.
        Moved nowhere.

10664.  September 5, 2000            COPIXEL                   Eric
        Created a new verb COPIXEL to translate between coordinates
        (COORDINA) and pixel coordinates (PIXXY).  Changed AU7 to
        deprecate the copy of COWINDOW there and move to AU7B with new
        verb.  Changed POPSDAT.HLP and NEWPARMS.001 to renumber
        COWINDOW and create COPIXEL.  Corrected help for COWINDOW - it
        did not mention INNAME et al (which it used) and created a
        help for COPIXEL.
        Moved nowhere.

10665.  September 6, 2000            IMINIT                Eric
        Changed Chris' routine IMINIT to accept a missing RDATE
        keyword.  Otherwise UVCOP et al which call IMSEL could fail
        for this little used table.  RDATE was not in the older
        versions of the table (or at least the IM subroutines) and got
        lost sometimes.
        Moved nowhere.

10666.  September 7, 2000           MOVE                  Eric
        The output user number is needed in HI routines if they have
        to expand the output HI file.  Fixed it to have that number
        set as NLUSER.
        Moved nowhere.

10667.  September 8, 2000       UVFLG, UVPLT              Eric
        Changed UVFLG to flag a range of elevations rather than just
        elevations below APARM(4).  This means changing APARM(5 and 6)
        to APARM(6 and 7).
        Changed UVPLT to offer the option using REFANT to plot
        elevation, hour angle and parallactic angle wrt to a single
        REFANT rather than wrt the average of the two antennas of each
        antenna pair.
        Moved nowhere.

10668.  September 13, 2000        SETPAR                   Pat
        Finally made it accept 31DEC99 as a valid version.
        Moved nowhere.

10669.  September 14, 2000           INDXR                  Eric
        INDXR and TABLEUTIL thought that RFREQ in MCINI was REAL*4.
        Everywhere else it was known to be the correct REAL*8.
        This caused fussy machines to quit but no damage to data.
        Moved nowhere.

10670.  September 14, 2000        CALIB, FRING              Eric
        Changed help and code in CALIB and FRING to have DOFIT allow
        a negative antenna number to mean all but those listed.  Fixed
        the help file for KRING which already allowed this option.
        Moved nowhere.

10671.  September 21, 2000        UVPLT                     Leonia
        UVPLT has not worked with multi freqid/subarray data if all
        FREQID or/and all SUBARRAY wanted to plot (FREQID/SUBARRAY=0).
        Choosing all FREQID or/and all SUBARRAY, UVPLT can come across
        to the combination of FREQID/SUBARRAY which does not exist at
        the data. UVPLT has died at such a case.
        I have fixed it making the task go to closing the data file
        after UVGET('INIT'..) if IRET.EQ.-1 and looking for the next
        FREQID/SUBARRAY.
        Moved nowhere.

10672.  September 25, 2000              FITTP                 Eric
        FITTP had a buffer defined as 8192 for writing out images.
        FITAB had it right (= MAXIMG).
        Moved nowhere.

10673.  September 28, 2000            UVPLT                  Eric
        When asked to do a fixed-scale plot of all subarrays, it would
        plot the last subarray Nsub times.
        Moved nowhere.

10674.  October 4, 2000                CVEL                  Eric
        Fixed CVEL's handling of no source table to avoid a useless
        and confusing close call.  Fixed GETFRQ; it handles the
        absence of an IF axis but quit if there was not one present.
        The formats were too small as well.
        Corrected BPASS - it called GETFRQ with CVPARM once (without
        initialization to 0.0) and with APARM once (with user's
        adverbs about all sorts of things not including velocity).
        Affected VLBA data only.
        Moved nowhere.

10675.  October 6, 2000             XTRAN                   Eric
        Fixed XTRAN to (1) use ordinary methods when just copying the
        image rather than reading it all into core, (2) to do the full
        parameter regrid (using separate X and Y solutions) even when
        only 3 parameters are found (this deals with skew some) and (3)
        to display a second test on the fit results when only header
        changes are done (or DOUTP <= 0).  Changed XTRFIT (1) to
        display more digits in the answers, (2) to warn when the
        apparent rotation in the X and Y axes is different, (3) to
        compute the correct axis increment (it mixed the 2 before
        which fails when the two rotations are not =).
        Moved nowhere.

10676.  October 6, 2000            FILLM                  Eric
        Added info about DOWEIGHT  and DOUVCM to the history file.
        Moved nowhere.

10677.  October 10, 2000           XTRAN                  Eric
        Corrected the computation of fit angles and increments which
        were still wrong in XTRFIT.  Also added a display of the fit
        parameters.  In XTRANS, made sure the new checking  routine
        got the right header.  Corrected handling of BLC, TRC - it
        changed the ref pixel before the fitting but did not alter the
        input pixels.  Moved that correction to after the fit.  Also
        added the ability to reject user pixel positions outside
        BLC-TRC.  Added fit parameters and INFILE to history file.
        Moved nowhere.

10678.  October 12, 2000             CALIB                   Eric
        Fixed handling of DISK2 - a zero was passed to routines like
        CATKEY that could not handle it.
        Moved nowhere.

10679.  October 13, 2000            MATCH                    Eric
        New task - converts source, antenna, FQ numbers of one UV file
        to match those of another.
        Moved nowhere.

10680.  October 16, 2000           IMEAN                    Eric
        Changed the pixel counter to integer.  Floats can count to 16
        million but then adding one changes nothing so they cannot
        count by one any higher.
        Moved nowhere.

10681.  October 16, 2000         GETJY                   Leonia
        GETJY has not selected in LINUX the right antenna list if
        the deselected option is used at the ANTENNA.
        The array ANTS was declared with dimension 50. At the same
        time this array is calculated for the numbers more than 50
        until MAXANT=90. LINUX is more sensitive (probably) to
        such a "violence". I have changed dimension of the array ANTS
        from 50 to MAXANT.
        Moved nowhere.

10682.  October 18, 2000            IMAGR                   Eric
        Changed IMAGR.FOR to reorder the multi-resolution widths to
        make 0 first.  If there is a 0 width, that is the only one
        restored.  Changed IMAGR.HLP to say this and to allow OVERLAP
        > 2 to mean recompute all images every OVERLAP "major" cycles.
        Changed QCLEAN.FOR to implement the OVERLAP > 2 option, to
        always test for >= 2 rather than = 2, and to write the correct
        max/min in the output headers (cubes required a forced open,
        put, then close).
        Moved nowhere.

10683.  October 18, 2000              Misc                   Eric
        Changed:
        HGEOM    Help file had typos.
        IRING    Used the axis increment to find the beam area without
                 thinking about sign.  This gave a pixels/beam that
                 was usually negative.  Put ans abs value in with PPB
                 and with the default for CPARM(2).
        Moved nowhere.

10684.  October 20, 2000              IRING                  Eric
        Failed to handle BLC right in computing the coordinates.  It
        corrected the center for BLC (to the subimage) and then
        corrected the subimage pixels to the full image.  Fixed.
        Moved nowhere.

10685.  October 20, 2000              CONVL                 Eric
        Failed on images = 8192 due to small buffer sizes - raised
        them.  Failed on images > 8192 due to a need to make 32768
        images for them.  I do not know why that is so but put in
        message and early quit for now.
        Moved nowhere.

10686.  October 20, 2000            FILLM                   Eric
        Changed it to omit pointing data most of the time unless
        CPARM(2) = 16.  Fixed it to quit with only one end-of-tape
        diatribe.
        Moved nowhere.

10687.  October 20, 2000            LISTR                   Eric
        Used an I5.5 format for qualifiers which always makes *****
        for negative numbers.  Changed to I5.4.
        Moved nowhere.

10688.  October 23, 2000           FACES, SETFC             Eric
        Changed the format of the NVSS and WENSS files to integer mJy
        again with an extra digit to fit in the big fluxes.  Added
        Bill Cotton's algorithm for setting face locations and for
        defaulting cell and image size.  SETFC will now write out
        Clean boxes (inscribed circles) for the fly's eye portion and,
        optionally, write out Clean circles for the exterior sources.
        Replace all $AIPSTARS files with NV00.0030, NV00.0100,
        NV00.0300, NV00.1000, NV50.0030, NV50.0100, NV50.0300,
        NV50.1000, WE00.0100, and WE50.0100 where the first 2 letters
        are the survey, next 2 are the last 2 of the epoch, and the
        last 4 are the flux limit in mJy.
        Moved nowhere.

10689.  October 27, 2000              UVHOL              Eric
        Changed help file to add STOKES (to do 4 polarizations in mode
        HOLG), to describe a new naming convention.  Changed UVHOL to
        honor user's file name for output (appending pol and IF), to
        write all 4 polarizations out for HOLG optionally, to do more
        standard handling of ANTENNAS and BASELINE, to allow single
        source selection (there were 2 gotchas).
        Moved nowhere.

10690.  October 30, 2000          ZLASCL                   Pat
        Fixed a bug in the PREVIEW section: regardless of the type of
        previewer specified in the PRDEVS.LIST file (ghostscript, gv,
        gs, or ghostview), one always got the same one due to an error
        in the logic of the script.  Now fixed.
        Moved to CV operational systems this date.

10691.  November 6, 2000      PRTUV                       Leonia
        The new option to print random parameters has been added.
        The list of the random parameters associated with the data
        is found with help of the subroutines LISRAN and PRMSET.
        The subroutines remove the REMOVE type random parameters
        and give the relevant list of random parameters' type.
        Random parameters or regular data are printed under control
        of DPARM(6). The default is print of the regular data.
        The random parameter BASELINE is printed as the column of
        relevant antennas and subarray. So the first four columns
        (Vis#, IAT, Base, Suba) look identical at the output print
        of the regualar data and random parameters.
        Moved nowhere.

10692.  November 8, 2000             COMPRESS            Eric
        Added a message to K2TEXT to explain that it replaces an old
        compress scratch file with a new one.
        Moved nowhere.

10693.  November 8, 2000             IMAGR              Eric
        The changes to QCLEAN dated October 18 above were never
        putbck.  Redid them to allow automatic re-imaging of all
        fields and to force the image max/min to disk.
        Moved nowhere.

10694.  November 12, 2000           POSSM                Eric
        Believe it or not, POSSM still had 28 antennas hard coded a
        number of places.  Changed to MAXANT and reduced a few other
        minor stupidities.
        Moved nowhere.

10695.  November 12, 2000            IMAGR              Eric
        In early July, I corrected the handling of histograms for
        determining how deep to Clean.  Unfortunately, in OVERLAP >= 2
        mode, this became a separate histogram on each field with
        MAXPIXEL applied a field at a time.  This caused it to Clean
        outer noise fields very deeply, which is often wrong.  Changed
        it back to computing the histogram over all fields every time
        even though all fields have not been re-imaged.  In some
        cases, this will make the Cleaning too slow but MAXPIXEL and
        FACTOR can then be used to speed it up.  Changed IMAGR.HLP to
        point this out.
        Moved nowhere.

10696.  November 13, 2000          PRTUV               Leonia
        The first source name has not been printed at the recently
        implemented option printing the random parameters.
        I have fixed it.
        Moved nowhere.

10697.  November 14, 2000         TBIN                Leonia/Eric
        The message with version of the created table has been added.
        The name of the output UV file has been added to the history
        file.
        Moved nowhere.

10698.  November 20, 2000        TBOUT                 Leonia
        The table version, the name of the output text file, and
        date and time have been added to the history file.
        Moved nowhere.

10699.  November 20, 2000             SKYVE                   Eric
        SKYVE required that the EQUINOX keyword be put in the HI file
        by the FITS reader.  Since they now understand that word, they
        put its value in the header and do not put it in the HI file.
        Changed to allow that word to be present or absent.
        Moved nowhere.

10700.  Novemnber 21, 2000            SPLIT                  Eric
        The HI file checked only the old adverb for whether weights
        were calibrated.
        Moved nowhere.

10701.  November 27, 2000           IMAGR                     Eric
        Changed $QNOT/MAKMAP to eliminate the uniform weighting.  It
        was trapping the multi-resolution tapering and redoing the
        uniform weighting over again.  All  tasks that use MAKMAP do
        the uniform weighting and initial tapering before making maps.
        Changed $APLOOP/UVUTIL.FOR to copy the AN and FQ tables when
        making a scratch uv file in UVRSCR.  This caused the filtering
        option to fail when a sort was not required.
        Moved nowhere.

10702.  November 27, 2000       UVCON                  Leonia
        If an image is used as a model and Jy/beam is the image unit, the
        following UV data have the wrong flux. I have fixed it up
        dividing the output UV data by the ratio beam/pixel.
        The help file has erroniously explained that FACTOR multiplies
        only the clean component fluxes. Actually FACTOR carries out the
        multiplication of the image as a model also.
        So the HELP file has been modified.
        Moved nowhere.

10703.  November 29, 2000      $YPGNOT/PBEAM.FOR, ..HLP   Leonia
        The new task PBEAM fits for the coefficients of an analytical
        model to raster-scanned data produced by UVHOL.
        The program fits a polynomial of the form:

		GO + G1*ARG + G2*(ARG^2) + G3*(ARG^3) + ...

	where ARG = (X1*EC)^2 + Y1^2
              X1 =  (X-X0)*COS(PHI) + (Y-Y0)*SIN(PHI)
              Y1 = -(X-X0)*SIN(PHI) + (Y-Y0)*COS(PHI)
              X0 and Y0 are offsets from the fiducial center.
              EC = b/a is eccentricity of the ellipse
              PHI is position angle of the major axis

        In the case of circular beam (EC and PHI are not fitted) the fit
        polynomial looks simpler:

		GO + G1*ARG + G2*(ARG^2) + G3*(ARG^3) + ...

	where ARG = (X-X0)^2 + (Y-Y0)^2
              X0 and Y0 are offsets from the fiducial center.

        The fitting parameters are recorded in the output text file.
        The data points and the fit polynomial plotted at the TV or
        in the ps file.
        Moved nowhere.

10704.  November 29, 2000           -> 31DEC00                 Eric
        Changed 31DEC99 to 31DEC00 in
        $AIPS_ROOT/AIPSPATH.SH and .CSH
        $APLSUB/GETRLS
        $AIPNOT/SETPAR
        $HLPFIL/DOCALIB, SETSLICE
        Fixed ftp address in Y2K.HLP
        Updated: WHATSNEW.HLP, LSAPROPO.HLP, and ABOUT files for
        ADVERB   AP   CALIBRAT   COORDINA   GENERAL   IMAGING
        INTERACT   MODELING   OOP   PLOT   POLARIZA   PROCEDUR
        RUN   TASK   TV-APPL  UTILITY   UV   VERB  VLBI
        Moved nowhere.

10705.  December 1, 2000        FITLD                          Leonia
        FITLD has made the confusion with FQ and SU table if
        DOCONCAT=1, if selection of IF is included and if the data
        have many freqid. The problem was in the two subroutines:
        FR2FQ and SO2SU. These routines considered number of IF to be
        equal to the total number of IFs even if the less number of
        IFs is selected. I have fixed it using the actual selected
        number of IFs (NIFFR in FR2FQ, SUBAND in SO2SU, instead of NOBAND).
        Moved nowhere.

10705.  December 3, 2000               IMAGR                Eric
        IMAGR took the average of the 64 first BCOMPs and then put
        that in BCOMP(1->512-64) rather than BCOMP(65->512).  The
        setting of BCOMP was then messed up for all uses.
        Moved nowhere.

10706.  December 3, 20000             IMAGR                 Eric
        Changed $QPSAP/Q1FIN to avoid using rows for the Hermitian
        parts of the grid from addresses outside the AP grid area.
        UVGRID was capable of generating a grid down to say row -2 and
        then wanting to quit (if the lowest abs(u) was row 1).  If the
        swaths were small the grid had a statistical chance to go only
        to -2 rather than -3 or below.  Q1FIN used row -3 for the
        Hermitian of row 3 in any case - even though it had not been
        computed and the addresses contained user dat (incl u,v,w
        values) and the convolving functions.  For normal data, this
        should have made a very obvious problem (image values about =
        u,v,w in wavelengths).  For 4-band, where u,v,w are small and
        fluxes large, the error might not have been so obvious.  The
        error was only likely for large images in small APs with
        sparse data.
        Moved nowhere.

10707.  December 5, 2000         PBCALC                   Eric
        Rick Perley has provided consistent and good VLA beam fits for
        all frequencies above and including L band.  Changed PBCALC to
        implement these beams and changed the help files for PATGN,
        PBCOR, SETFC, and FACES accordingly.  Changed the Fortran to
        implement better history writing and to alter the default
        selection of IMSIZE in SETFC and FACES fly's eye sections.
        Moved nowhere.

10708.  December 6, 2000            BPCOR                Eric
        BPCOR did not let FQID = 0 in the BP table mean any and
        insisted on reading a source file even in single-source files.
        Fixed these two sillinesses.
        Moved nowhere.

10709.  December 7, 2000            FITLD                Eric
        Found errors in selecting IFs for AT and IM tables.  It was
        using NOBAND reset to input number of bands on tables for
        which the IF selection had been applied.  Got rid of unused
        variables, and changed routines using NOBAND as a local
        variable.  Changed wording in help - FITLD should select IFs
        correctly even if they are not in ascending frequency order.
        But that selection will be different than if it were done
        on the frequncy-sorted output of FITLD.
        Moved nowhere.

10710.  December 8, 2000            DFTPL                 Eric
        Added BCHAN, ECHAN, BIF, EIF, FREQID to the inputs and fixed
        the task to loop over them and use correct frequencies to
        scale any position shifting.  Corrected uninitialized
        variables that led to NaNs for some reason I do not
        understand.  It suggests that dynamic variables are still used
        sometimes.  Found that it did not include samples in the
        max/min that it should reject (self-scale but fixed range) but
        it did try to plot them.  Fixed it to handle compressed data.
        Moved nowhere.

10711.  December 8, 2000           HLPB                  Eric
        The lines in LSAPROPO are up to 26 characters in length.  This
        service program clipped at 24.
        Moved nowhere.

10712.  December 8, 2000              OHGEO                 Eric
        OHGEO copies header parameters mostly from image 1.  But it
        set the number of axes and some other fundamentals from image
        2.  This is not good when the 2 disagree on these such as
        image 2 is a moment image.
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC00 (31DEC99) is NEW

***********************************************************************
***********************************************************************

10713.  December 12, 2000         Update                Eric
        Update: NEW INSTEP1 updated from 31DEC99 to 31DEC00.
        Moved nowhere.

10714.  December 12, 2000          PAPC.INC             Eric
        Changed the shippedcopy to include the larger sizes of AP but
        the one that is not commented away is still 5 Mbyte.
        Moved to NEW this date.

10715.  December 12, 2000           HGEOM                  Eric
        HGEOM has had an error reading the input whenever it was using
        only a subset of the rows and was doing more than one plane.
        It would read 1 too may rows in each plane when the rows were
        long enough - for some reason it avoided this error on smaller
        rows.  It worked on 512x512 and failed on 1024x1024.
        GEOM, LGEOM and PGEOM also had this error.  Changed all of
        them to put out 1/10'th as many progress messages.
        Moved to NEW (31DEC00) this date.

10716.  December 12, 2000            COMB                  Eric
        Fixed typo in help file.
        Moved to NEW (31DEC00) this date.

10717.  December 12, 2000          VPLOT                   Eric
        It reverses the sign of the VLA Y antenna position twice.
        Models work much better with only once.
        Moved to NEW (31DEC00) this date.

10718.  December 12, 2000          FLATN                   Eric
        Changed to do multiple fields of multiple pointings.  If there
        is > 1 pointing, the output image is primary beam corrected.
        Changed PBCALC to use the LAMBDA value as a clue to init or
        re-init the parameters.
        Moved to NEW (31DEC00) this date.

10719.  December 12, 2000          VPLOT                  Leonia/Eric
        There was an error addressing the X coordinate when plotting a
        model at the data points in the presence of time averaging.
        This caused a bad and only partial model plot.
        Moved to NEW (31DEC00) this date.

10720.  December 12, 2000             INSTEP3                 Eric
        Added IMAGR and FITAN to support Y2K as well as DDT.
        Moved to NEW (31DEC00) this date.

10721.  December 12, 2000          PBPARM                   Eric
        The new FLATN has a new adverb (to go to PBCOR, FACES, SETFC
        at least in time) call PBPARM for primary beam parameters.
        Changed POPSDAT.HLP, NEWPARMS.001, and created a help file.
        Moved to NEW (31DEC00) this date.

10722.  December 13, 2000            INCS.SH                Eric
        $SYSSGI was missing a suitable INCS.SH.
        Moved to NEW (31DEC00) this date.

10723.  December 21, 2000           SETJY                   Jim
        Added the 1999.2 flux scale supplied by Taylor and Perley, and
        changed that to the default.  Added a warning about 43-GHz
        fluxes to the help file.
        Moved to NEW this date.

10724.  December 21       omitted from NEW

10725.  December 25, 2000          $APGOOP/SPECR         Eric/Leonia
        SPECR has not worked with compressed data. It has been fixed
        up.
        Moved to NEW (31DEC00) this date.
