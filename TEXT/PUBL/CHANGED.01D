;-----------------------------------------------------------------------
;  Copyright (C) 2000-2001
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in Charlottesville.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


***********************************************************************
***********************************************************************

                 Changes while 31DEC01 is TST

***********************************************************************
***********************************************************************

10713.  December 12, 2000         Update                Eric
        Update: CHANGE.DOC, GETRLS, SETPAR, INSTEP1, MAKE.MNJ,
        update.pl, install.pl, AIPSPATH.SH and AIPSPATH.CSH to change
        31DEC00 to 31DEC01.
        NEW INSTEP1 updated from 31DEC99 to 31DEC00.
        Moved NOWHERE - important not to go to NEW.

10714.  December 12, 2000          PAPC.INC             Eric
        Changed the shipped copy to include the larger sizes of AP but
        the one that is not commented away is still 5 Mbyte.
        Moved to NEW (31DEC00) this date.

10715.  December 12, 2000           HGEOM                  Eric
        HGEOM has had an error reading the input whenever it was using
        only a subset of the rows and was doing more than one plane.
        It would read 1 too may rows in each plane when the rows were
        long enough - for some reason it avoided this error on smaller
        rows.  It worked on 512x512 and failed on 1024x1024.
        GEOM, LGEOM and PGEOM also had this error.  Changed all of
        them to put out 1/10'th as many progress messages.
        Moved to NEW (31DEC00) this date.

10716.  December 12, 2000            COMB                  Eric
        Fixed typo in help file.
        Moved to NEW (31DEC00) this date.

10717.  December 12, 2000          VPLOT                   Eric
        It reverses the sign of the VLA Y antenna position twice.
        Models work much better with only once.
        Moved to NEW (31DEC00) this date.

10718.  December 12, 2000          FLATN                   Eric
        Changed to do multiple fields of multiple pointings.  If there
        is > 1 pointing, the output image is primary beam corrected.
        Changed PBCALC to use the LAMBDA value as a clue to init or
        re-init the parameters.
        Moved to NEW (31DEC00) this date.

10719.  December 12, 2000          VPLOT                  Leonia/Eric
        There was an error addressing the X coordinate when plotting a
        model at the data points in the presence of time averaging.
        This caused a bad and only partial model plot.
        Moved to NEW (31DEC00) this date.

10720.  December 12, 2000             INSTEP3                 Eric
        Added IMAGR and FITAN to support Y2K as well as DDT.
        Moved to NEW (31DEC00) this date.

10721.  December 12, 2000          PBPARM                   Eric
        The new FLATN has a new adverb (to go to PBCOR, FACES, SETFC
        at least in time) call PBPARM for primary beam parameters.
        Changed POPSDAT.HLP, NEWPARMS.001, and created a help file.
        Moved to NEW (31DEC00) this date.

10722.  December 13, 2000            INCS.SH                Eric
        $SYSSGI was missing a suitable INCS.SH.
        Moved to NEW (31DEC00) this date.

10723.  December 21, 2000           SETJY                   Jim
        Added the 1999.2 flux scale supplied by Taylor and Perley, and
        changed that to the default.  Added a warning about 43-GHz
        fluxes to the help file.
        Moved to NEW this date.

10724.  December 21, 2000          Message levels           Eric
        Repetitive informative messages should be at a fairly low
        level, e.g. 2 or 3, so that they may be suppressed.  ERror
        messages must be > 5.  Changed $QNOT routines for the former:
        ALGSTB   ALGSUB   GR2DUV   GRDMEM   GRIDUV   MAKMAP   OLDMAP
        SDGRID   UVGRID   UVGRTB
        And the latter:
        APLOAD   APWRIT   UVTBUN   UVTBUW   VISDFT   VSCDFT   VSFDFT
        Moved nowhere - not important enough for NEW.

10725.  December 24, 2000          $APGOOP/SPECR         Eric/Leonia
        SPECR has not worked with compressed data. It has been fixed
        up.
        Moved to NEW (31DEC00) this date.

10726.  December 28, 2000          IMAGR                  Eric/Bill
        Following suggestions made by Bill, added code to decide to
        skip a field in OVERLAP 2 mode when, after re-imaging, its
        objective function (peak + some part of average) is < the
        objective function of other field(s).  This will remake a
        bunch of fields until a good one is found to Clean.
        Moved nowhere - experimental algorithm.

10727.  December 28, 2000       $YPGNOT/FRPLT, POSSM      Leonia
        FRPLT has never worked with non zero SHIFT.
        When FRSCL is calculated the two asteriks' was used
        erroniosly: one at the end of the line; another at the
        beginning of the next line. Such two asteriks' are interpreted
        as exponent. The value of the exponent power is too huge to
        calculate the exponent and FRPLT blew up.
        Another small bug has been fixed at FRPLT and POSSM.
        Both tasks use UVGET which takes care about the frequency
        reference pixel if bchan .ne. 1. But FRPLT and POSSM carry out
        it also. So the frequency pixel shifted twice at UVGET and at
        the task itself.
        Moved to NEW (31DEC00) this date.

10728.  December 29, 2000            ZTRLOG                  Eric
        ZTRLOG has been called from both Fortran and C, the former
        with Fortran Character strings.  We CANNOT do this - and have
        been lucky that all compilers we currently use put the string
        lengths at the end of the calling sequence.  Changed
        $APLGEN/ZTRLOG.FOR to translate to hollerith and call ZTRLO2,
        renamed $APLUNIX/ZTRLOG.C to  $APLUNIX/ZTRLO2.C  Changed to
        call ztrlo2_ the following C:
        $APLCRI:   ZTPOP2
        $APLLINUX: ZMOUN2
        $APLHP:    ZMOUN2, ZTKOP2, ZSTRTP
        $APLSOL:   ZMOUN2, ZTPOP2
        $APLSGI:   ZCREA2, ZMOUN2, ZMOUN2.CI5
        $APLAXLIN: ZMOUN2
        $APLCVEX:  ZTPOP2
        $APLSUN:   ZMOUN2
        $APL3090:  ZCREA2
        $APLULTRX: ZMOUN2, ZCREA2
        $APLDEC:   ZMOUN2, ZCREA2
        $APLIBM:   ZMOUN2, ZCREA2, ZTPOP2
        $APLBERK:  ZCREA2, ZSTRTP
        $APLUNIX:  ZCREA2, ZM70O2, ZPATH, ZSTRTP, ZTPOP2, ZTKOP2,
                   ZTTOP2
        Changed $SYSUNIX/PP.FOR to include ZTRLOG.FOR, RFILL, CHR2H,
        H2CHR and created ZTRLOP.C containing ZTRLO2, ZPUTCH, ZGETCH.
        Changed $SYSPERL to handle ZTRLOP rather than ZTRLOG.
        Moved nowhere - let's hope 31DEC00 gets away with this.

10729.  January 16, 2001        $QPGNOT/BPASS.FOR         Leonia
        BPASS has shifted spectra at the VLBA case to remove the shift
        to the center of the Earth carried out by the correlator.
        The shift has been calculated for the first antenna of the
        visibility. It is wrong for the cross correlation case,
        because the visibility is the product of the two antenna
        signals being shifted differentely.
        At this new version the visibilities are nit shifted, but the
        solution for each antenna is shifted by the relevant value.
        The auto correlation case has not been changed.
        Moved nowhere

10730.  January 18, 2001        $QPGNOT/FRING.FOR         Leonia
        FRING has typed the warning: "Frequencies do not lie on a
        uniform grid.." when it is not true.
        It was because the tolerance 1E-7 of the frequncy channel
        space is too small and contradicts with the accuracy of
        the frequency set given as 'REAL'.
        So I have changed the tolerabce to 1E-3 and it should help.
        Moved nowhere

10731.  January 22, 2001          PCAL         Steve Myers / Eric
        The computation of the rms has been incorrect for a long time
        but the answers were reasonable until the weights became more
        nearly 1/sigma**2.  Most weights were sqrt (number of
        observations) too small and some matrix elements also had to
        be scaled (increased) by the sum of the weights.  LPCAL had
        typing corrected but never summed the weights for any real
        purpose.
        Moved nowhere.

10732.  January 22, 2001         SCMAP, SCIMG              Eric
        Both SCIMG and SCMAP passed the UVTAPER on as UVTAPER - this
        is no longer correct.  It is called WTTAPER now and is applied
        during weighting.  SCIMG also  did not have parameters set
        properly to determine the number of channels to average (and
        did not put that value everywhere it is needed).
        Moved to patch area.

10733.  January 23, 2001             QCLEAN                  Eric
        Three places did a METSCA and then applied that scaling to
        another variable witout checking if the first was pure zero.
        Fixed to METSCA on the other in that case.
        Moved nowhere.

10734.  January 23, 2001           SCMAP                     Eric
        Failed to set NBOXES=1 when it was zero - so no cleanable
        signal  and no Clean...
        Moved to patch area.

10735.  January 26, 2001           FILLM                   Eric
        A typo meant that the obs mode in scans after the first was
        taken from the source name (chars 9-10) rather than the actual
        mode.  This could cause Solar mode to be falsely asserted if
        the source name char 9 was S.  It could also cause Solar mode
        to be missed when it should have been invoked.
        Moved to patch area.

10736.  January 27, 2001           CATALOG                  Eric
        Changed CATLST so that it changes format when the highest slot
        number to be listed is > 9999.  Affects CATALOG, MCAT, UCAT,
        PCAT verbs.
        Moved nowhere.

10737.  January 27, 2001            SETGDS                   Eric
        SETGDS was filling NITER with the max number of CCs in the
        file rather than the number about to be used.  Most tasks did
        not care (NCLNG ended with the desirec value) but VPLOT and
        CLPLT used the returned value.
        Changed CLPLT and VPLOT to handle 25000 CCs rather than 10000.
        PCAL put the output into the HI - should have used NSUBG-1
        like all the other tasks.
        Moved nowhere.

10738.  January 27, 2001          help files                 Eric
        The NMAPS section of a lot of help files was not updated to
        show the new name format, the support for starting at a class
        > 1, and the continued support for the old name form.  Changed
        help files for UVCON, BLCAL, BPASS, KRING, FRING, IBLED,
        FLATN, PCAL, LPCAL, UVSUB, UVADC, CLPLT, VPLOT, CALIB, CPASS,
        GPHAS, BLING.
        Moved nowhere.

10739.  January 29, 2001           ZTPMID                  Eric
        One of the main problems with FITS disk is detecting the end
        of file condition.  END= is not legal in a READ where the
        BLKNO is specified, but the eof IOSTAT has varying values
        both with time and architecture.  Made an $APLIBM version
        using END= to get around a recent change that we can no longer
        test or debug.
        Moved nowhere.

10740.  January 30, 2001       Primary beams                Eric
        Rick Perley completed the beam measurements for P and 4 Bands.
        Changed PBCALC.FOR to drop the old P and 4 band models and add
        the P and 4 band parameters provided by Rick.  Changed the
        help files of FLATN, PBCOR, SETFC, FACES, and PATGN to account
        for this.  Changed the help and Fortran files for PBCOR,
        SETFC, FACES, and PATGN to add the adverb PBPARM replacing
        other adverbs that functioned as beam parameters.  Changed
        PBCOR to replace GPOS with COORDINA as well.
        Moved nowhere.

10741.  January 30, 2001            ZDCHIN                   Eric
        Changed the initial value of CRTMAX to -1 so that, when first
        set up, installations will respond to the size of the CRT
        window.
        Moved nowhere.

10742.  January 31, 2001       PBEAM.FOR                   Leonia
        Some final changes have been put to the task codes.
        They include change of the formats to work with very wide
        beams at low frequencies (327, 73MHz); exclude vector
        averaging of the "identical" points separated by time;
        final hair dressing of the codes.
        Moved nowhere.

10743.  February 1, 2001     UVCON.FOR                     Leonia
        UVCON has not worked with CMODEL='COMP' since last summer,
        when the new version of the subroutine QXXPTS was installed.
        UVCON using the private copy of the old QXXPTS has a
        problem in an array address.
        I have modified the private version of QXXPTS using its
        last version at the system.
        Additionally the maximum number of antennas has been increased
        to 2000 to allow UVCON simulating SKA.
        Of cource antenna selecting does not work with the simulated
        data, because 2000 exceeds the upper limit 50/90.
        Some formats are updated to the new number of antennas.
        Moved nowhere.

10744.  February 1, 2001           Tools                     Eric
        Changed PRTAC to allow stand-alone usage to summarize all of
        the Hosts in the local SITE in HOSTS.LIST.  It also can
        initialize the AC files leaving all entries after a requested
        time.  Added stand-alone usage description to the help file as
        an Explain section.  New program DRCHK to check the agreement
        between HOSTS.LIST, NETSP, and the DADEVS.LIST file(s).  It is
        only a stand-alone program but I wrote a help file anyway.
        Moved nowhere.

10745.  February 5, 2001        $QPGNOT/BPASS.FOR         Leonia
        The recentely modified BPASS (see #10729) has not worked with
        SOLINT=-1, because the source ID was not determined at this
        case. I have fixed it.
        Moved nowhere.

10746.  February 7, 2001           DRCHK                  Eric
        Fixed a formatting bug - WRITE cares about trailing blanks
        fitting in the string.
        Moved nowhere.

10747.  February 8, 2001            WTMOD                   Eric
        WTMOD could not handle packed data even though it could modify
        weights without ever unpacking and repacking the data.  Fixed
        that and added clarifications to the help file.  This task may
        be needed by people who have nominal sensitivity scaled
        weights to be combined with old simple weights.
        Moved nowhere.

10748.  February 8, 2001      $YPGNOT/CONFI.FOR           Leonia
        Made several modifications:
        1. Increase number of antennas to 2000, in order to make
           possible using CONFI for SKA optimization.
           The relevant formats have been changed.
        2. If the number of antennas exceeds 100, only cofiguration
           is plotted now without uv coverage, because the plot file
           is becoming huge for large number of antennas.
        3. The output file can be prepared now in two formats:
               to continue of optimization of sidelobes by CONFI
               (the exsisted version) and
               to use it as an input file for simmulation task UVCON.
        Moved nowhere.

10749.  February 12, 2001             ZLWIO                   Eric
        The expanded file name local variables were not long enough.
        Moved nowhere.

10750.  February 13, 2001       OMFIT, HF2SV, CL2HF            Eric
        These also called ZFULLN with short name strings.  HF2SV
        needed a lot of cleaning up of its handling of the string.
        Moved nowhere.

10751.  February 13, 2001          UVFLG                      Eric
        Added trap for APARM(4) > APARM(5).  Users were flagging
        all the data when the elevation range was not specified
        properly.
        Moved nowhere.

10752.  February 13, 2001           VBGLU                Eric
        CHNDAT was called with FREQID unset - this could only have
        worked when there was no FQ table.  Set FREQID=1 and hope that
        there is only 1 or that all have the same IF frequency order.
        Moved nowhere.

10753.  February 14, 2001           HF2SV                Eric
        Linux compilers got confused whan a character variable was
        passed in, correctly declared (CHARACTER FNAME*(*)), and then
        used in an expression which called for an intermediate
        argument (e.g. WRITE(MSGTXT,2000) FNAME(1:NCH) // 'XXX').
        The compilers go on at length about array arguments when
        FNAME(1:NCH) is a scalar.  Made local variables of known
        length to avoid this egcs compiler error.  Solaris, HP, SGI
        all accepted this code.
        Moved nowhere.

10754.  February 14, 2001           FITLD                  Eric
        Changed it to notice that the correlator (AN file array) name
        is not VLBA and to turn off all VLBA options (divide RE/Im by
        weight, DIGICOR, DELCORR, artifact correction) although some
        were not done in this case previously.  Fixed history and
        messages to honor this.
        Moved nowhere.

10755.  February 20, 2001     $APGNOT/FACES.FOR          Leonia
        NPARMS should be 168 instead of 171 at the fortran code.
        This difference made a problem at some machines.
        Moved nowhere.

10756.  February 23, 2001     $YPGNOT/IRING.FOR, HLP     Leonia
        Fixed the problem with very small radii given at argsec.
        The help file has improved including CPARM(6).
        Moved nowhere.

10757.  February 23, 2001   VLBAUTIL.001, VLBACALA.HLP         Jim
        Changed VLBACALA in the VLBAUTIL procedure to do
        INTERPOL='SELF' on the a-priori amplitude calibration.
        This prevents interpolation between different sources
        at different elevation angles, which can cause
        significant errors in antenna gains.  Also added
        a sentence mentioning this in the VLBACALA help file.
        Moved nowhere.

10758.  February 27, 2001            MATCH              Eric
        Added DOALL option to control which of the AN, SU, and FQ
        parameters are matched and which left alone.  For use with
        VBGLU, the frequency parameters must be left alone.
        Moved nowhere.

10759.  February 28, 2001      Plots at the pole        Eric
        Changed:
        IAXIS1  to move the INSIDE strings in only a little
        TICINC  to look over the full subimage for a range of
                coordinates and to use a better list for RAs.
        ITICS   to use a simpler/better algorithm for the full axis
                drawing.
        CTICS   as ITICS
        TKTICS  as ITICS
        Moved nowhere.

10760.  March 1, 2001               BPASS                   Eric
        The code to shift VLBA data after solving for the bandpass
        rather than before forgot about the possibility that one or
        more channels would be blanked (~ 10^^5).  Changed the
        interpolation routine to allow data arrays with NP
        polarizations rather than a hard-coded 2.  Then added a call
        to do the interpolation before the shift.
        Moved nowhere.

10761.  March 2, 2001                 DISKU                  Eric
        One of 2 arrays that should be dimensioned by number of disks
        only went to 9.  Frazer (needless to say) went over this.
        Changed both to be parameterized at 35.
        Moved nowhere.

10762.  March 5, 2001               CROSSPOL               Amy
        Added defaults so that CROSSPOL would not die
        because of "hidden" inputs.  Changed procedure
        so BASELINE 0 would work.  Added checks to force
        a valid REFANT and GAINUSE to be entered.  Added
        a CLCAL at the end to apply copied SN table to
        CL table.  Corrected help file.
        Moved nowhere.

10763.  March 6, 2001      $YPGNOT/CONFI.FOR; ..HLP        Leonia
        The two options have been added:
        The hexagon tiling type of the initial configuration is added.
        The task gives a warning now if the spacing between antennas
        less than the given limit.
        The help file updated.
        Moved nowhere.

10764.  March 6, 2001                 DEFER                  Eric
        Added adverb to POPSDAT.HLP and NEWPARMS.001.   Also new help
        file.
        Moved nowhere.

10765.  March 6, 2001               MDESTR                  Eric
        Fixed it to look for a lot of files to destroy and destroy any
        it finds when the header is missing or empty.
        Moved nowhere.

10766.  March 7, 2001               UVFLG                  Amy
        Changed subroutines FLAGEL and FLGPCL so that an input
        REASON will override UVFLAG's REASON.  Edited help file
        stating that if REASON is left as the default in these
        two specific cases UVFLG inserts it's own REASON.
        Moved nowhere.

10767.  March 8, 2001              SORT                    Eric
        There seemed to be some confusion of character length for the
        'SORT' keyword in QUVUTIL and QCLEAN.  Changed all to be *2.
        Moved nowhere.

10768.  March 8, 2001            LISTR, UVSRT              Eric
        Changed LISTR to display Tant as well as Tsys and changed the
        scaling of GAIN displays to show another digit by default and
        to apply FACTOR incl changes of a factor of 10 - formerly
        forbidden!) to both kinds of GAIN display.
        Added DEFER option to UVSRT to defer creating the output until
        the sort has been done and just after one of the scratch files
        has been deleted.
        Moved nowhere.

10769.  March 9, 2001            UVFLG                      Amy
        Removed bug in IF statements I added 2 days ago.
        Moved nowhere.

10770.  March 20, 2001          ACCOR                       Leonia
        Add the new option to SOLINT. Now if SOLINT<0 then the data
        are averaged over the scans. The help file has been updated.
        Moved nowhere.

10771.  March 20, 2001          SETFC, FACES               Eric
        Fixed the flux scaling in FACES - it was not corrected for the
        change back to mJy in the tables.  Also moved the flux
        rescaling to before the flux cutoff so that the cutoff is in
        Jy at the actual frequency.  Changed help file to reflect this
        and to drop the warning about large angles.  Changed SETFC
        help file to drop that old warning and to fix the beam
        parameter section that was missing stuff.
        Moved nowhere.

10772.  March 20, 2001            MDESTR                   Eric
        The call argument to MSGWRT was missing when the file was too
        busy to delete.
        Moved nowhere.

10773.  March 22, 2001            FACES, SETFC            Eric
        The number of fields allowed by the 512 limit combined with
        CELLSIZE and IMSIZE may not cover the requested central area.
        Added warnings to both tasks.  Also change FACES to try up to
        20 times 512 fields for sources so long as no more than 512
        get written with sources.
        Moved nowhere.

10774.  March 23, 2001        SPLAT                       Leonia
        SPLAT has not worked at time averaging mode if both cross
        and auto is used, because the total number of baseline
        was calculated specifically for only cross correlation.
        I fixed it calculating the total number of baselines
        in dependance on APARM(5).
        Moved nowhere.

10775.  March 23, 2001	     CROSSPOL                     Amy
        Fixed up the tget/vput and vget/tput statements so when
        CROSSPOL is run the previous tputs for the tasks in
        CROSSPOL are saved.  Unfortunately this will not work
        if the procedure crashes.
        Moved nowhere.

10776.  March 26, 2001        FACES, SETFC               Eric
        The FLYEYE routine did not work well in the extreme cases.
        Fixed both to attempt 20 times (or more) MAXFLD fields and to
        try more Y positions than X since DY is about 1/2 DX.
        Suppressed coordinate error messages and changed the handling
        of failed coordinate computations to skip them entirely.  All
        flyeye fields must fit (easily) into a -SIN projection.
        Moved to AOC this date.

10777.  March 26, 2001            BLING                 Eric
        BLING forgot to move BADDISK from the Inputs object to the
        DFIL.INC common for use.
        Moved nowhere.

10778.  March 27, 2001            UVPLT                 Eric
        The QUAL adverb was not put in the SELQUA Common variable for
        use by the calibration package and so was ignored.
        Moved nowhere.

10779.  March 27, 2001         SETFC, FACES             Eric
        The routine added for FLYEYE did not guarantee that (0,0) was
        at the center of a field.  Added code to insure this.
        Moved nowhere.

10780.  March 28, 2001         KRING.HLP                Amy
        Changed reference to BPARM(3) in help file to CPARM(8),
        since BPARM do not exist.
        Moved nowhere.

10781   March 28, 2001   VLBAUTIL.001,VLBAUTIL.HLP      Amy
        Added procedures VLBAPCOR, VLBAFRNG, VLBAKRNG, VLBAFRGP
        and VLBAKRGP to VLBAUTIL.  VLBAPCOR runs PCOR, CLCAL and
        sometimes SNCOR and FRING.  VLBAFRNG and VLBAFRGP run FRING
        and CLAL.  VLBAKRNG and VLBAKRGP run KRING and CLAL.
        Moved nowhere.

10782   March 28, 2001   VLBAPCOR.HLP                   Amy
        Added new procedure help file.
        Moved nowhere.

10783   March 28, 2001   VLBAFRNG.HLP                   Amy
        Added new procedure help file.
        Moved nowhere.

10784   March 28, 2001   VLBAKRNG.HLP                   Amy
        Added new procedure help file.
        Moved nowhere.

10785   March 28, 2001   VLBAFRGP.HLP                   Amy
        Added new procedure help file.
        Moved nowhere.

10786   March 28, 2001   VLBAKRGP.HLP                   Amy
        Added new procedure help file.
        Moved nowhere.

10787   April 2, 2001  VLBAFRGP.HLP and VLBAKRGP.HLP    Amy
        Fixed reference to CALSOUR in help files.
        Moved nowhere.

10788   April 2, 2001 VLBAFRGP, VLBAKRGP, VLBAKRNG, VLBAFRNG  Amy
        Added IF statement so if GAINUSE is equal to the default
        the highest CL table is used as GAINUSE in KRING/FRING and
        as GAINVER in CLCAL.  Also changed VLBAKRGP/FRGP to list
        what sources were being referenced to what calibrator.
        Moved nowhere.

10789   April 2, 2001       VLBACALA                     Amy
        Added OUTSEQ=INSEQ to the two TACOP runs in VLBACALA.
        Moved nowhere.

10790   April 4, 2001       FILLM                      Leonia/Eric
        Claire Chandler pointed out the data loaded by FILLM which
        (CH0) made any AIPS task blow up!
        I have found the bug in FILLM which cuased the corruption
        of the last visibilities of a scan if the next scan data
        has different frequencies and as a result requires creating
        a new files (stream). Having finished the buffer to record
        the previos scan (by UVDISK), UVINIT store the last portion
        of the data (the UVDISK actually records the integer number
        of blocks) at the beginnig of the buffer. The information
        of the following scan is added to this beginning.
        But the subroutine recording history information used the
        same buffer for its operation and as a result corrupted the
        beginning of the buffer that represents the end of the
        previous scan. I have changed the buffer used at the history
        subroutine to the small integer buffer of 256 elements.
        Additionally I changed using the main large buffer for
        the small buffer in input of  many other routines: CATIO,
        UVCREA, CATDIR, DIE, GTPARM, RELPOP, NXTMAP, MAPCLS, CATKEY.
        The question is why have not people seen the problem before?
        The answer is:
        First, The problem appears when the next scan has different
        frequencies or something yet to cause the creating a new
        stream(file) of the data. It is not usual case.
        Second, the corruption of the last visibilities can not be
        so dramatic as in Clair's case. Instead it can cause
        the change of data or skipping the corrupted visibilities.
        So the people can not pay attention on this.
        Moved nowhere.

10791.  April 4, 2001         UVCON                  Leonia
        UVCON has not allowed using images with a digit at the
        fourth character of its CLASS name. It was a correct
        precaution for the old representation of the images classes.
        Now it is wrong. So I have removed this constrain.
        Moved nowhere.

10792.  April 9, 2001           PBCOR               Eric
        PBCALC reset the input array to the beam model, but did not
        reset the units properly (the 10**3, 10**7 etc).  When the
        frequency changed the user array was picked up again and the
        units were scaled down by another 10**3, 10**7 etc.  The
        affect was to fix only every 16'th or 14'th or ?? plane.
        Moved correction the 31DEC00 patch area.

10793.  April 9,2001           IMAGR                 Eric
        IMAGR was having trouble deciding that it is done.  Changed
        the routine that evaluates the "objective function" to refuse
        to examine any field below MINFLX and added a check on the
        reuturn for no field found => FINISH = true.  Also added
        IMAGRPRM(20) to allow the user some control over how far apart
        the "current" and "second-best" must be to do a retry.  The
        default is a factor of 1.005; it was 1.0.  Changed IMAGR.HLP
        and fixed a typo in it as well.
        Moved nowhere.

10794.  April 9, 2001             CCOPTS.SH            Eric
        Changed the $SYSLINUX version of CCOPTS.SH to have it specify
        64-bit file I/O for site COAOARN (NRAOAOC backwards).  This
        seems to be all that is required in the new Linux kernel to do
        large files.  The option is -D_FILE_OFFSET_BITS=64.
        Moved nowhere.

10795.  April 9, 2001             QUVUTIL              Eric
        When making images without making beams (ALLOKAY >= 1) the
        image header common used for coordinate checks was not
        initialized.   Changed OUVIMG to set DOINIT true at the start
        and for beams, bit allow it to be true for the first image.
        Moved nowhere.

10796.  April 9, 2001           SHOW/TELL              Eric
        Changed AU1A to display NUMTELL as well as OPTELL.  Changed
        AU2 (STQUEUE) to use NUMTELL <= 0 to mean all as well as DOALL
        > 0 meaning all.  Changed the STQ header to show POPS numbers
        included.
        Moved nowhere.

10797.  April 9, 2001  VLBAPCOR/FRNG/KRNG/FRGP/KRGP    Amy
        Add subarrays to help files.  Procedures should not
        need changing.
        Moved nowhere.

10798.  April 10, 2001           FPARSE                   Eric
        For some reason this parsing routine was not updated when the
        others were in 2/2000!  The addition of EQUINOX pointed out
        the failure of using table position numbers in such routine -
        the character values are now used everywhere.  Made GETI a new
        $APLSUB subroutine removing it from FITLD and UVLOD.  It gets
        the numeric part of a string skipping over non-numeric
        characters.  PRTTP and AIPS (TPHEAD) were affected by this
        error.
        Moved nowhere.

10799.  April 10, 2001          SETFC, CHKFC              Eric
        Changed SETFC so that the size of the circular Clean box is
        taken into account in the separation of the fields.  This
        means that overlaps of a few not ~15 are now appropriate.
        CHKFC is a new task - it makes the fields described in a
        BOXFILE and fills them with 1's in the Clean boxes and blanks
        or 0's elsewhere.  Running FLATN on the output will show where
        you are Cleaning.
        Moved nowhere.

10800.  April 10, 2001      VLBAUTIL                              Amy
        Add VLBACRPL, VLBASNPL and VLBACPOL.  VLBACRPL and VLBASNPL
        are plotting procedures, basically a simplified POSSM and
        SNPLT respectively.  VLBACPOL is CROSSPOL with an added
        check on TIMERANGE (no default is allowed).
        moved nowhere

10801.  April 10, 2001      CROSSPOL                              Amy
        Added check to TIMERANGE, the default is not allowed.
        moved nowhere

10802.  April 10, 2001 VLBACRPL.HLP, VLBASNPL.HLP & VLBACPOL.HLP  Amy
        Added the help files for these procedures.
        moved nowhere

10803.  April 10, 2001            SPFLG                   Eric
        Added a progress message for large gridding ops.
        Moved nowhere.

10804.  April 10, 2001            CALIB              Craig Walker/Eric
        Changed Fortran and help to add the option to restrict gain
        normalization to elevations greater than APARM(10) degrees.
        Moved nowhere.

10805.  April 10, 2001            SPECR                   Eric
        Fixed:
        a. Read mode needs to be RRAW since it does no data selection
           and READ removes the FREQID (at the least).
        b. Needs to copy any table in the input EXCEPT BP tables.
        c. Also fixed the FFT handling when the output spectrum is
           smaller than the input.
        Moved nowhere.

10806.  April 11, 2001   VLBAUTIL, VLBASNPL, VLBACRPL     Amy
        Add DOTV to VLBASNPL and VLBACRPL.  Fix VLBAFRPL help
        file.
        Moved nowhere.

10807.  April 11, 2001            CALIB                   Eric
        At Craig's suggestion, move APARM(10) to CPARM(1) since
        CPARM(2) is the logical that turns on the mean gain modulus
        constraint.
        Moved nowhere.

10808.  April 12, 2001       PRTTP, TCOPY                 Eric
        Fixed counters in both to be double precision to avoid
        overflows at 2 Gbyte.  Added counters to display the byte size
        of each file in PRTTP as well.
        Moved nowhere.

10809.  April 12, 2001          FITLD                    Eric
        The use of FREQSEL to select 1 of several FREQIDs caused
        problems.  Sveral tables were not rearranged and edited to
        have the new numbers and not have the unselected data.  The
        logic was simplified to put the FQ selection and the FQ
        renumbering in one place and to apply that in all cases.
        Moved nowhere.

10810.  April 15, 2001              CHKFC                Eric
        Added optional field numbers in the center of each Clean box
        and a pixel at each end of the included portion of a row at a
        higher values as well to mark the Clean Boxes.
        Moved nowhere.

10811.  April 17, 2001            ALGSTB                 Eric
        ALGSTB is required to deal with all data that comes in even if
        they are at u,v values outside the allowed range of the gridded
        model (1/(2*cellsize)).  It does this by altering the u,v
        values to something legal while zeroing the data and weights.
        UVLIMT was supposed to count and report these.  But it stopped
        counting at 10 and no summary was printed.  Changed UVLIMT to
        count even when it does not print any more, to issue a warning
        on the first unprinted overflow.   Changed ALGSTB to print a
        prominant message when samples are deleted.
        Moved nowhere.

10812.  April 17, 2001          BPASS, CPASS               Eric
        The use of models has never worked.  There is an array called
        FACGRD that must be initialized to 1, but was left unset at 0.
        All CC fluxes were multiplied by FACGRD(1) (= 0) before being
        used in the model.  Needless to say the model failed.
        Added adverb CMETHOD to allow the users to select the method.
        Moved nowhere.

10813.  April 17, 2001          PRTTP                      Eric
        Changed it to NOT print summaries of a file when the file has
        1 record <= 512 bytes.  The analysts did not like seeing the
        outputs for the label files.
        Moved nowhere.

10814.  April 17,2001  VLBAUTIL, VLBASUMM                  Amy
        Added new procedure to VLBAUTIL called VLBASUMM. This
        runs PRTAN and LISTR of the user.  The VLBAUTIL help
        file was modified.
        Moved nowhere.

10815.  April 17, 2001           SETFC                      Eric
        Changed SETFC to have BPARM(7) => radius of Clean circle if it
        is > 0 with a min of 5 and a max of fldsize/2-6.  The Sun
        subroutine did not handle its call sequence properly.
        Moved nowhere.

10816.  April 18, 2001           VLBALOAD                  Amy
        Add NFILES as an input.
        Moved nowhere.

10817.  April 22, 2001       VLBAUTIL, VLBASUMM            Amy
        Remove SUNARRAY adverb from VLBASUMM and make it loop
        over antenna tables if there is more than one present.
        Moved nowhere.

10818.  April 22, 2001          VLBACPOL.HLP               Amy
        Expand explaination of DPARM in VLBACPOL help/explain file.
        Moved nowhere.

10819.  April 23, 2001       $YPGNOT/CONFI.FOR         Leonia
        I have improved the proximity of antennas to the 'bad'
        topography. The old version has the discret equaled to
        the cell size. Now it is half of the cell size.
        This change is important when the roads are interpreted as
        a 'bad' topography.
        Moved nowhere.

10820.  April 24, 2001          CHKFC                       Eric
        CHKFC used WINDF from IMAGR but that expected an array
        IMSIZE(2,nfields) all filled in.  Moved WINDF to CHKFC and
        made a local version that computes the iMSIZE for each field
        as it goes and if there is no Clean box makes one with FLDSIZ.
        Fixed filling in of rectangles as well.
        Moved nowhere.

10821.  April 24, 2001              UVMOD                   Eric
        Changed this old clunker to use GMAX, GPOS, et al to set up
        to 4 sources in a uv data set.  One at a time is too slow.
        Moved nowhere.

10822.  April 24, 2001             DBCON                   Eric
        Changed help file to recommend that the first file be the one
        with all the subarrays already in it.  Otherwise, adding 5
        days and 0.01 subarray can make cumulative floating-point
        error to the level that subarrays are not correctly
        recognized.  There is more to do - this is the finger in the
        dike.
        Moved nowhere.

10823.  April 26, 2001       $QPGNOT/UVCON.FOR           Leonia
        The task UVCON has had a nice feature puting the model center
        at RA=0 and the given declination independent on the actual
        model center. It was achieved using the private version of
        the routine GRDAT. Erroniously this private version exluded the
        relevant shift of the UV data for the used fields of the model.
        As a result UVCON has excluded the space shift between the
        model fields and has produced wrong UV data for multi field
        model. I have fixed the problem introducing the shift
        relatively the first field.
        Moved nowhere.

10824.  April 26, 2001        Subarray number           Eric
        The subarray number is kept as the (subarray-1)/100.0 added to
        the baseline number (256*A1+A2).  This strains the accuracy of
        single-precision numbers and makes absurd the attempt in some
        VLB routines to use the 1/1000 part for an important code.
        Repeated DBCONs with the multiple subarray data set second
        cause 0.01's to be added repeatedly to the baseline numbers.
        The accumulated error made subarray 5.9 instead of 6.0 and
        only 0.1 was used in the roundoff.  Changed that to 0.5
        everywhere:
        $APLNOT: DATFLG   DATGET   DGETSD   AVERT
        $APGNOT: UVFIX    AVSPC    INDXH    MULTI    PHSRF    PRTUV
                 SWPOL    USUAB    UVCOP    UVFLG    UVIMG    VBCAL
                 FXVLA    RESEQ    DBCON    TI2HA    MATCH
        $APGOOP: INDXR
        $QPGNOT: CPASS    SDVEL    BPASS    FRING
        $YPGNOT: IBLED    VPLOT    SPFLG    TVFLG
        I wonder why the subarray is not used more places.
        Moved nowhere.

10825.  April 26, 2001             IMAGR                   Eric
        Created adverb FGAUSS to set a flux level to  Clean to for
        each of the resolutions in IMAGR.  Changed IMAGR to sort and
        default these andput themin each image; QCLEAN to pick them
        up, use them in selecting and Cleaning fields; IMAGR.HLP,
        WGAUSS.HLP, FGAUSS.HLP.  Also changed QCLEAN to ignore fields
        that currently seem done when computing the histogram to
        select pixels for the next Clean round.  Changed POPSDAT.HLP
        and NEWPARMS.001 as well.
        Moved nowhere.

10826.  April 26, 2001           LISTR help               Eric
        DPARM(4) is important to ordinary listings even if no
        averaging takes place.  Otherwise microscopic time differences
        are treated as different in the display.  Added info to the
        help about this.
        Moved nowhere.

10827.  April 27, 2001           SNSMO help               Eric
        The info about SUBARRAY was wrong - 0 -> all.
        Moved nowhere.

10828.  April 30, 2001           SETFC, FACES             Eric
        These two were not prepared for a RADIUS smaller than the
        maximum good area.  Fixed them to allow sizes up to 16384
        for recommended image size and to take the user's radius
        into account.
        Moved nowhere.

10829.  April 30, 2001            CCEDT                   Eric
        Added BOXFILE and NBOXES/CLBOX as alternative input methods
        for specifying the boxes - these are in cells and are
        converted internally.
        Moved nowhere.

10830.  May 1, 2001          VPLOT.FOR, .HLP              Leonia
        DBCON concatanating data with different subarrays adds 5 days
        to time for each subsequent subarray. Until now VPLOT has
        deleted these 5 days returning the data to the actual
        observation time. Now people, in particular Claire Chandler
        consider this feature is not good. So I have removed the 5 days
        deleting making VPLOT plot the data shifted at time by
        5*(SUB-1). The relevant change of the calculation of the
        geometry for the model has been done. Users have to pay
        attention on this 5 days time shift selecting TIMERANG.
        A message reminding users this fact has been added.
        The HELP file has been changed at TIMERANG desription.
        Moved nowhere.

10831.  May 1, 2001              SLBINI                    Eric
        SLBINI did not test to see if the coordinate rotation applied
        to the slice or not.  Thus it would go to relative labeling of
        a spectrum if the RA/Dec were rotated in axes 2/3.  Added test
        for pure x or y slice into this labeling control.
        Moved nowhere.

10832.  May 1, 2001                COMB                      Eric
        Changed APARM(5) nad (6) for OPTD so that any value incl
        serious negatives is allowed.
        Moved nowhere.

10833.  May 2, 2001              CALIB                       Eric
        CALIB scales the CC file by FACGRD based on the SU table flux
        divided by the sum of the CC fluxes.  It failed to use 1.0
        when the source was not in the SU tabel and when the source
        flux was 0 in the table.  Added warning and setting to 1.0.
        Made note in help file too.
        Moved nowhere

10834.  May 2, 2001          AIPSMEM105                      Eric
        Put back an update of the VLBAUTIL procedure Memo.
        Moved nowhere.

10835.  May 3, 2001       $QPGNOT/PCAL.FOR               Leonia
        PCAL has not averaged IFs if CPARM(1)=1 repeating instead
        the first IF.
        Even more, PCAL has not averaged frequencies inside of an
        IF. Instead it has taken the first frequency at each IF.
        Erroniously both the number of IFs and frequencies to be
        averaged was put equaled 1 through the CATBLK(KINAX+..)
        which was fixed to one at the beginning of the routine
        PCLCOP.
        Moved nowhere.

10836.  May 4, 2001           PCAL.HLP                    Leonia
        Because now (see the previos message) PCAL averages
        frequencies before finding solution I have added a paragraph
        to the HELP file reminding that the data should be phase
        calibrated before PCAL.
        Moved nowhere.

10837.  May 5, 2001               UPDCONFIG                  Eric
        Made the chkout version of UPDCONFIG specify ssh1 for MPI.
        This is the only way for a site mentioned in this file to get
        anything done.
        Moved to MPI to get the damn MNJ working again.

10838.  May 8, 2001                 FRING                    Eric
        The dynamic memory allocation and addressing of the fringe
        search algorithm depnded on the number of frequencies returned
        by the routine that checks the distribution of the
        frequencies.  In the case of seriously irregular distribution
        of frequencies that number was less than the number actually
        fed to the search routines.  Thus the addresses used were not
        correct.  Changed to use the max of the returned number of
        frequencies and the other frequency counts that may be used.
        This might waste some memory but will never be too small.
        Moved nowhere.

10839.  May 8, 2001      VLACALIB.HLP VLAPROCS                Amy
        Added DOPRINT and OUTPRINT to VLACALIB.  The structure has
        also been changed so that messages are only cleared if
        DOPRINT>=0.  Added FLAGVER as an input.
        Moved nowhere.

10840.  May 8, 2001      CALIB.HLP                            Amy
        Added SNVER to the description of adverbs in help file.
        Moved nowhere.

10841.  May 9, 2001             CPASS                      Eric
        Changed the usage of BCHAN and ECHAN so that all data are read
        but the channels outside BCHAN-ECHAN are given 0 weight.  Made
        the fitter use a weighted solution and gave 3 options for
        weights: 1, data weight, apparent 1/sigma^^2 from
        pre-averaging (tempered a bit by the data weight).
        Moved nowhere.

10842.  May 9, 2001                IMAGR                     Eric
        Changed QCLEAN to allow 1-pixel loads when there is only one
        field.  It was setting APCLCLN(LFIELD) = 0 when 1 pixel was
        loaded which then forced a remake of all fields in OVERLAP 2.
        An alternative would be to laod more pixels if this is not ok.
        Moved nowhere.

10843.  May 11, 2001    VLBAUTIL, VLBACPOL                   Amy
        Fixed bug in VLBACPOL.  In the first run of CLCAL GAINUSE
        was set to the number of highest CL table rather than the
        highest CL+1.
        Moved nowhere.

10844.  May 11, 2001    VLAPROCS, VLACALIB                   Amy
        Added DOWAIT=1 to the beginning of VLACALIB.
        Moved nowhere.

10845.  May 11, 2001    VLBAPCOR.HLP                         Amy
        Expanded the explanation of what to do if the PC table
        does not correct certain antennas.
        Moved nowhere.

10846.  May 14, 2001               FILLM                     Eric
        Found a subtle bug - the program never changed the number of
        antennas even if it changed.  Further, it tested the antenna
        ID before that had been changed.  This caused the task to
        treat an autocorrelation data area as cross-correlation.  The
        Solaris system did not like 2.0 **(-31040) fortunately.
        Changed to reset antenna number and to set the MCINIT logical
        in the MCANT routine when the antenna info is known.  Also
        fixed a large number of erroneous message levels.
        Moved nowhere.

10847.  May 14, 2001               CPASS                    Eric
        Fixed the history writing to use the new BCHAN/ECHAN values
        and to do the averaging time in the claimed units.
        Moved nowhere.

10848.  May 14, 2001           FACES, SETFC                 Eric
        In FACES.HLP changed a .23 to .023 in the inputs - the help
        and the code had it right.
        In SETFC.FOR, changed it to write the full line of the Clean
        box for NVSS and Solar fields.
        changed SETFC.HLP and .FOR to insert BPARM(3) to scale FLUXes
        so that FLUX refers to the flux at the observing frequency
        rather than the table frequency.
        Moved nowhere.

10849.  May 15, 2001         $YPGNOT/CONFI.FOR, HLP         Leonia
        I have enhanced the task adding hexagon tile with the
        arbitrary number of antennas as an initial configuration.
        This option can be usefull for design of a compact
        array configuration and for design of a bank of antennas as
        an array element.
        Moved nowhere.

10850.  May 18, 2001              DEFLG                    Eric
        New task: flags data based on the ratio of the vector average
        amplitude to the scalar average amplitude in a sliding window.
        Moved nowhere.

10851.  May 18, 2001              VPFLG                    Eric
        New task: copies a data set converting any partially flagged
        IF sample to fully flagged.  It also copies and alters the FG
        tables.  This is of use for VPOL observers.
        Moved nowhere.

10852.  May 18, 2001               CPASS                   Eric
        Added BPVER to HI file.
        Moved nowhere.

10853.  May 18, 2001         UVFLG                         Leonia
        Using INFILE as a flagging data source, UVFLG has not paid
        attention to the flagging data given as input parameters
        such as TIMERANG, BIF, EIF..and flagging because of elevation
        and pulse cal.
        Now I have added flagging because of elevation and pulse cal
        working together with INFILE.
        The relevant warning is provided if user uses INFILE.
        The help file has been updated.
        Moved nowhere.

10854.  May 18, 2001        PRTUV, UVPRT                   Amy
        Changed the limits on NPRINT, so that if OUTPRINT was
        and DOCRT<0 then there are no limits on NPRINT.
        Previously NPRINT was limited to 2000 visabilities if
        DOCRT<0, now that only applies if OUTPRINT=''.
        Moved nowhere.

10855.  May 21, 2001           FILLM                     Eric
        Cretaed adverb DOACOR (new help, changed POPSDAT.HLP,
        NEWPARMS.001) to control whether autocorrelations are read
        into line data sets by FILLM.  Also changed FILLM to compute
        its own channel zero rather than use the (suspect) on-line
        one.  CPARM(2) = 32 instructs FILLM to use the on-line one.
        Moved nowhere.

10856.  May 22, 2001              UVSORT                    Eric
        Fixed the calls to catio - both were WRIT when the comments
        said one would be UPDT.  Also suppressed the messages and made
        UPDT be first.
        Moved nowhere.

10857.  May 23, 2001      $YPGNOT/PBEAM.FOR            Leonia
        PBEAM has been used the fixed line dimension (21) for the
        measurment array as I had been told.
        Recentely Rick Perley tried (unseccesfully) PBEAM for the
        measurments 37x37.
        I have increased the dimension of the measurment array till
        61x61.
        Moved nowhere.

10858.  May 24, 2001               AVSPC                   Eric
        Fixed help file: ICHANSEL was spelled witout the I in the
        examples which were otherwise correct.
        Moved nowhere.

10859.  May 25, 2001            TICINC                    Eric
        My February change messed up the handling of time and RA
        increments in the range f 2 to 30 minutes of time.
        Moved nowhere.

10860.  May 25, 2001              SNFLG                   Eric
        AIPSified the task provided by Mark Reid and Lincoln
        Greenhill to write a flag table for places in the SN tables
        where, on a baseline basis, the phase jumps too much between
        solutions.
        Moved nowhere.

10861.  May 26, 2001          DEFLG, CLIPM                   Eric
        Changed logic on FLAGVER to have them copy the input FLAGVER
        to a new file and append to that.
        Moved nowhere.

10862.  May 27, 2001              ABOUT files                Eric
        Updated ZZ*.HLP files:
           ADVERB     AP    CALIBRAT   EDITING  GENERAL  IMAGING
           PROCEDUR   RUN   TASK       UTILITY  UV       VLBI
        Moved nowhere.

10863.  May 28, 2001           VLBACPOL.HLP                  Eric
        The pre-cursor remarks are used in the CookBook and this help
        file had them all wrong although the rest told truth.
        Moved nowhere.

10864.  May 29, 2001          SAD, IMFIT, JMFIT              Eric
        Changed the error reporting so that the errors are not
        divided by sqrt(2) when the widths are fixed.  That applies
        only in the large wrt the beam case which generally does
        not apply.
        Moved nowhere.

10865.  May 29, 2001         PBEAM                          Leonia
        PBEAM has not worked with polinom degree more than 3 for
        such a long wavelength as meters. The primary beam is very
        wide at this case. That is why the elements of matrice
        prepared for least square exceeds the limit of 2**128~10**42.
        To get around the problem I switched the relevant variables to
        double precision. The least square routine with double
        precision inputs/outputs is written.
        Moved nowhere.

10866.  May 29, 2001            EPOCONV                 Eric
        New verb: converts COORDINA adverb between 1950 and 2000
        coordinates.
        Moved nowhere.

10867.  May 29, 2001        DLESQR                      Leonia
        DLESQR is the double precision version of the least square
        routine LEASQR.
        Moved nowhere.

10868.  May 30, 2001        PBEAM.FOR                  Leonia
        I have detached the routine DLESQR I put in the system
        yesterday. Some minor bugs which prevented working the task
        with high polinom degree  and low threshold have been fixed.
        Moved nowhere.

10869.  May 31, 2001        Bandpass cal application          Eric
        Changed BPASET to set ISVLA (as not VLBA and not EVN) - ISVLA
        was actually referenced without ever being set.  Fortunately,
        that was only in the case of bandpass shifting which is only
        done for the VLBA.
        Changed DATBND to measure the average BP amplitude applied to
        the data (non-VLB central 75% of channels, VLB all channels)
        and to apply that average to the data weights on DOCAL=2.
        Now gain calibration may be done with BPASS as well as CALIB.
        Moved nowhere.

10870.  May 31, 2001             PLOTR                      Eric
        Added lots of functionality: axis functions, up to 10 point
        types, and corrected the line plotting so that it works.
        Moved nowhere.

10871.  May 31, 2001             EXTLIST                     Eric
        Added code to support the new PLOTR in AU8A.
        Moved nowhere.

10872.  June 1, 2001           ANTAB.HLP                    Eric
        Droppped the ' ' code for blanking a Tsys column - the parser
        would not recognize it so there was no point trying to allow
        it.
        Moved nowhere.


10873.  June, 1, 2001            CookBook                    Eric
        Updated chapters:
        0   Table of Contents changed
        4   VLACALIB change; add DEFLG, VPFLG, SNFLG; FILLM
            channel-0; CPASS use
        5   Mention CHKFC, FACES, DEFLG, SNFLG
        9   New VLBAUTIL procs; DEFLG, 2 Gbyte limit change
        13  Regular update
        A   VLACALIB DOPRINT option
        B   VLACALIB DOPRINT option
        C   VLBAUTIL procs
        I   Index changed
        Recipe  rearranged usage - more unused now
        Moved nowhere.

10874.  June 1, 2001                IMAGR                     Eric
        Added code to allow scaling the weights by channel.  A W or w
        card in the BOXFILE gives the weight, channel (0 -> all), and
        IF (missing or 0 -> all) of the weight.  Later cards prevail
        over earlier.  Changed IMAGR.FOR and IMAGR.HLP only.
        Moved nowhere.

10875.  June 1, 2001     VLAPROCS, VLACALIB                 Amy
        Changed DOPRINT so that VLACALIB will only print if
        DOPRINT>0.  Previously VLACALIB would print if DOPRINT>=0.
        Also edited HELP file to reflect this change.
        Moved nowhere.

10876.  June 1, 2001     VLBAUTIL, VLBALOAD                 Amy
        Added a message to at the end of VLBALOAD which warns of
        permanently flagged data.  When FITLD is started it states
        this but a novice user is unlikely to notice the message
        as it is one among many at the start of the program.  Also
        edited HELP file to mention the automatic flagging.
        Moved nowhere.

10877.  June 4, 2001               FILLM                  Eric
        Changed scaling of Van Vleck correction per request of Bryan
        Butler.
        Moved nowhere.

10878.  June 5, 2001     $APGNOT/ACCOR.FOR, HLP          Leonia
        Using a fixed value for SOLINT, ACCOR can meet a small
        interval of averaging at the scan end because of the gap
        between scan. The measurements can be very noisy at the
        small intervals. Now the intervals less than 0.4*SOLINT
        are not recorded to the output SN table.
        Several sources can be averaged together if SOLINT.GT.0.
        So the source ID to record to the output table is not
        determined at this case. Until now the source ID of the
        first scan was recorded to all rows of SN table.
        Now the source ID as well as frequency ID equaled zero
        are recorded to all rows of SN table.
        Zeros at source ID column makes the following task CLCAL
        non sensitive to the adverb CALSOUR.
        The help file has been updated.
        Moved nowhere.

10879.  June 6, 2001         AIPSASSN                      Eric
        Changed default for MSG_EMULATOR to xterm from none for AOC
        and VLA.  Fixed $ONLINE for AOC.
        The change to START_AIPS means that remotely started servers
        no longer know what the user wants and I like the message
        terminal.
        Moved nowhere.

10880.  June 6, 2001              FC                      Eric
        Changed FC so that it searches first $SYSLOCAL, then
        $AIPS_VERSION/$ARCH/SYSTEM, and finally $SYSUNIX for the
        FDEFAULT.SH.  Made ALPHA, SOL, SUL, HP, HP2, SGI, LINUX, and
        AXLINUX versions of FDEFAULT.SH.  Stripped these systems out
        of the $SYSUNIX version of FDEFAULT.SH leaving 9 others.
        Moved nowhere.

10881.  June 6, 2001             XAS                      Eric
        The change to START_AIPS means that XAS no longer will have a
        "stderr" to which to write messages starting sometime after
        the beginning.  With rsh it did not abort even if it could not
        write to its former stderr.  With this damn ssh, it aborts
        leaving shared memory and TVSERV processes clogging the
        system.  Moved the message about being told to exit to after
        the clean up operations so that the users will not be too
        fucked.
        Moved nowhere.

10882.  June 6, 2001     VLAPROCS (VLACALIB)               Amy
        Changed the handling of DOWAIT so that the users input
        DOWAIT is saved rather than changed to 1, as in last
        version, or -1, in previous versions.
        Moved nowhere.

10883.  June 7, 2001      CLCOR                          Leonia
        Correction of the AN or/and the SU table, if the relevant
        correction of the antenna or/and the source is carried
        out (OPCODE=ANTP) has been added. The history file has not
        included information about the source position correction.
        It has been fixed together with the important information
        about AN or/and the SU table correction.
        The help file has been updated.
        Moved nowhere.

10884.  June 10, 2001   ANTINI,PRTAN,UVFIX              Leonia
        The subroutine ANTINI has had the misprint reading
        POLARXY. POLARX has been read as POLARY, and POLARY=0.
        The misprint has been fixed.
        The two task: PRTAN and UVFIX which definitely use
        POLARXY have been recompiled with the corrected ANTINI.
        Moved nowhere.

10885.  June 10, 2001             TVFLG                   Eric
        Found a typo in the clip by form section - it used I inside
        the loop as if it were the loop variable instead of LSTOKS.
        Moved nowhere.

10886.  June 11, 2001    PRTAN                          Leonia
        POLARXY have been erroniosly listed in meters.
        They should be in arcsec. I have fixed it.
        Moved nowhere.

10887.  June 11, 2001     UVFIX                         Leonia
        UVFIX has erroneously considered that POLARXY are given
        in meters. So POLARXY have been recalculated to arcsec
        for using in the routine JPRECS. This recalculation
        has been removed because POLARXY is given in AN table
        header already in arcsec. Thanks to Lincoln Greenhill
        for pointing out to the mistake.
        Moved nowhere.

10888.  June 11, 2001            UPDCOPYSUB              Eric
        This routine was creating <file>.old but then leaving it on
        successful conclusion.  Added an rm to delete it.  They are
        piling up.
        Moved nowhere.

10889.  June 11, 2001            CCOPTS                  Eric
        Our users are not building the load modules with 64-bit
        capability even when their machine has it.  Changing:
        $SYSLINUX, $SYSSUL, $SYSAXLIN, $SYSPPLIN CCOPTS.SH to specify
            COMP="$COMP -D_FILE_OFFSET_BITS=64"
        all the time.
        Moved nowhere.

10890.  June 12, 2001           POSSM                    Eric
        Oh no - Phil code!!!!
        1) It was plotting all n IF plots to the TV with no pause on
           NPLOTS=0.  Added a pause.
        2) On NPLOTS=0, it set PBIF=PEIF=1 for convenience in plotting
           the first time interval.  Then it set BIF=PBIF and EIF=PEIF
           somewwhere during the second plot interval!  Dropped the
           setting to 1 and handled the inconvenience another way.
        3) The UV data array was summed from BIF to EIF as 1 ->
           (EIF-BIF+1) but then addressed as BIF to EIF.  If BIF was 2
           the last plotted IF was all zero.  If BIF was 3 of 4 then a
           zero divide occurred.
        4) The NPLOTS > 0, reset the IF selection based on the IF
           header coming out of UVGET.  If BIF=EIF=2, there is 1
           output IF so BIF was reset to 1 causing it to plot IFs 1
           and 2.
        5) Many places the plot parameter KLOCF(LOCNUM) was used to
           address ordinary headers - either in or out of UVGET.  It
           neads JLOCF for output and KLOCFY for input (with new code
           to make sure the KLOCs get set).  I am amazed it worked in
           labeling since JLOCF and KLOCF need not be the same and
           they were thoroughly confused.
        6) On single-source files, it was not calling CHNDAT (early
           enough) but used the FINC, FOFF outputs of it.  Moved the
           CHNDAT call to do it for all files and re-ordered the
           code so that the label initialization was called ahead of
           the use of these parameters.  The frequencies and
           velocities output to the file were wrong.
        Moved nowhere.

10891.  June 12, 2001          FITS disk                    Eric
        Changed FITS disk to C type I/O (except VMS).  This should
        allow FITS disk files larger than 2 Gbytes.
        ZTPOPN  $APLGEN:Fixed call to ZTPOP2 and ZTPOPD to send
                Hollerith file name.
        ZTPOPD  $APLGEN: Fixed call seq for hollerith file name
        ZTPOPD  $APLUNIX: C open routine for C type I/O
        ZTPMIO  $APLUNIX: .FOR same as $APLGEN except a new call
                sequence for ZTPMID.
        ZTPMID  $APLUNIX: C routine like zmi2
        ZTPWAD  $APLUNIX: C routine like zwai2
        ZTPCLD  $APLUNIX: C routine to close down like zdacls
        Removed IBM version ZTPMID, many many versions of ZTPWAD.
        Moved nowhere

10892.  June 16, 2001             TVFLG                  Eric
        Found two more bugs in CLIP BY FORM.  The first was a constant
        being passed down through several subroutine calls and
        eventually being set in a bottom level routine.  It was 1
        being set to MAX (1, MIN (NGREY, IPL)), i.e. 1, but some smart
        compilers protect dumn programmers from changing the value of
        1.  The second was a failure to set the main flagging Stokes
        pattern to the one desired at the moment.  That pattern, not
        the one for the FC file controlled what was done.  So 1011 was
        done for LL as well as RR.
        Moved nowhere.

10893.  June 18, 2001             UVLIN, UVLSF                 Eric
        Changed remarks about FLUX to clarify the meaning - it does
        not refer to 10 seconds any more but to real weights.  Also
        mentioned UVLSF in UVLIN help file.
        Moved nowhere.

10894.  June 18, 2001            SETGDS                        Eric
        Improved the message when the non-3D image is offset.
        Moved nowhere.

10895.  June 18, 2001            BPASS                         Eric
        Changed BPASSPRM(10) so that value 1 is the VLB option -
        normalize amplitudes using all channels, value 2 is normalize
        amplitude using ICHANSEL channels, and value 3 and up is
        normalize amplitude and zero phase using ICHANSEL channels.
        With these options, one may not need to divide by channel
        zero at all (unless phases are crazy and rapidly varying).
        Moved nowhere.

10896.  June 21, 2001     VLBAUTIL:VLBACRPL                   Amy
        While trying to use VLBACRPL on a non-phase referencing
        experiment, I realized that the POSSM input SOLINT was
        necessary.  So I added it.  Changed both VLBAUTIL.001
        and VLBACRPL.HLP
        Moved nowhere.

10897.  June 21, 2001              POSSM                  Eric
        Which header is which was still confused and the use of
        KLOCF(LOCNUM) was a way out of it for Phil but most
        misleading.  It did not get frequency right in UV plots, BP
        were okay.
        Moved nowhere.

10898.  June 21m 2001            BPLOT                     Eric
        The character labeling had wrong variables for string length.
        It seemed to work for DOTV but not plot files.  Changed the
        time labeling on LTYPE=3.
        Moved nowhere.

10899.  June 22, 2001           FRPLT.HLP                 Leonia
        The adverb ANTENNAS has not be described clearly.
        It was not clearly told that the data are averaged for all
        selected baselines (included ANTENNAS) and the one plot
        is plotted indepedent on ANTENNAS.
        A paragraph has been added to clarify it.
        Moved nowhere.

10900.  June 22, 2001            UVPRT, PRTUV              Eric
        Made then systomatically check for high fluxes and use an
        appropriate ste of formats for them.
        Moved nowhere.

10901.  June 22, 2001            AIPS                   Eric
        Updated the copyleft.
        Moved nowhere.

10902.  June 26, 2001          ANTNUM, SCANTIME            Amy
        Added line to the EXPLAIN files to demonstrate how to get
        these procedures to print the antenna number or scan time
        range, respectively, to the terminal.
        Moved nowhere.

10903.  June 27, 2001          Model subtracting          Eric
        Changed:
        CCSGRD - it was changing NSUBG (next cc to subtract) based on
                 the requested, not actual, number of CCs.  It also
                 looped for more even if the first negative or too low
                 flux was found.  Former = flat error, latter harmless
                 since all fluxes will be too low.
        GRDCRM   Changed to set NSUBG and also, when DONE due to too
                 low flux or first negative to reset NCLNG to the
                 number that actually were used rather than the number
                 requested (by the user or the CC file size).
        VISDFT   Reset NCLNG on done.
        VSCDFT   Reset NCLNG on done.
        VSFDFT   Reset NCLNG on done.
        Moved nowhere.

10904.  June 28, 2001            TVFLG                   Eric
        Failed on 1-polarization CLIP BY FORMs - accessing the "2nd"
        polarization in some odd and wrong way.
        Moved nowhere.

10905.  July 2, 2001        SNPLT.FOR                    Leonia
        When STOKES='DIFF' and OPTYPE='AMP', SNPLT has calculated
        amplitude of vector differences of the two polarizations.
        Therefore the plotted amplitude has not been equaled
        zero for identical amplitudes of the two polarization,
        if the phases are not identical.
        Besides that the difference has not been multiplied by GMMOD,
        as it is done if a single polarization amplitude plotted.
        I have fixed it.
        Moved nowhere.

10906.  July 2, 2001           GETCRD                  Eric
        GETCRD was changing an input variable if it was < 1.  The new
        Solaris compiler is too smart for its own good and complained
        even though the input was always >= 1.  Changed it to a local
        variable.
        Moved nowhere except U Colorado.

10907.  July 2, 2001           FILLM                  Eric
        Changed the VLA center per Barry Clark note to aips++ giving
        the center used in 1995 coordinates in 1999.
        Also changed the default behavior of CPARM(7) for spectral
        line data: = 0 gets a new FQ on a big change, < 0 gets only 1
        FQ in all cases.  Also changed Chapters 4 and B of the
        CookBook.
        Moved nowhere.

10908.  July 3, 2001         SNPLT                    Leonia
        Return back vector differences of the two polarizations.
        (see message 10905). The help file has been revised to
        emphasize that the difference may not be equal zero
        if the both polarization amplitudes are identical (OPTYPE=
        'AMP').
        Moved nowhere.

10909.  July 3, 2001            FILLM                 Eric
        Changed it to rename a source if its RA and/or Dec differ from
        those of an identically named and qualified source.  Added bit
        to CPARM(2) for planetary observations where position changes
        are to be ignored.
        Moved nowhere.

10910.  July 4, 2001              TVDEVS.SH                 Eric
        The TV number can be > 9 in extended hex, so it must be
        REHEXed before comparing to 0.  Vincent McIntyre of the ATNF
        for pointing this out.
        Moved nowhere.

10911.  July 10, 2001       TVFLG, SPFLG                     Eric
        Added option to expand the time range flagged by DPARM(5) sec
        in each direction as the FC table is applied.
        Moved nowhere.

10912.  July 12, 2001              AVSPC                     Eric
        Changed the default channels for "channel 0" to (n+1)/8+1 to
        n - (n+1)/8.  This matches FILLM.  Note that FILLM gave the
        wrong reference channel for channel 0 prior to the recent
        change to compute channel 0 internally.
        Moved nowhere.

10913.  July 12, 2001            FDEFAULT.SH           Eric/Shoshana
        The $SYSUNIX version had a string terminator mismatch.
        Moved nowhere.

10914.  July 12, 2001              UVCOP                 Eric
        It uses the NX table to predict the size of the output file -
        a very bad idea for TASAV files.  Changed to use min (nvis,
        prediction).
        Moved nowhere.

10915.  July 12, 2001          INSTEP4                    Eric
        Philippe Brieu of UCLA pointed out that a grep -v ^- could use
        quotes around the ^- => they are no harm and apparently are
        needed sometimes.
        Moved nowhere.

10916.  July 13, 2001             AVSPC                   Eric
        Clarified BIF, EIF used only for AVIF mode.
        Moved nowhere.

10917.  July 17, 2001             $TMPDIR                Eric
        $TMPDIR is used by window managers etc and so should not be
        used by AIPS.  Changed $SYSUNIX/ RUN, XASERVERS, START_AIPS,
        TVDEVS.SH, DADEVS.PL, SUB, UNIXSERVERS to use AIPSTMP
        instead.
        Moved nowhere.

10918.  July 17, 2001            OPTIMIZE.LIST           Eric
        DECBIT fails on the latest Solaris compilers.  It has failed
        under HP and SGI so set it to 0 level for all.
        Moved nowhere.

10919.  July 27, 2001            VLACALIB.HLP		 Amy
        Added DOBAND and BLVER so VLACALIB could be used with
        spectral line data.
        Moved nowhere.

10920.  July 27, 2001               WENSS              Eric/Wendy Lane
        Added Cygnus A to the WENSS survey tables.
        Moved nowhere.

10921.  July 30, 2001            SETFC, FACES              Eric
        Used the wrong array reference when seek the FREQ axis - it
        worked so long as there was a reasonable number of random
        parameters.
        Moved nowhere.

10922.  August 1, 2001   VLBAUTIL.001 VLBACPOL.HLP       Amy
        Changed last CLCAL in VLBACPOL to apply the SN table
        produced by POLSN to all antennas, as opposed to just the
        ones listed in the BASELINES parameter.  Clarified the
        part of the help file about selecting a REFANT.
        Moved nowhere.

10923.  August 2, 2001             CLPLT                   Eric
        CLPLT,  when averaging spectral channels and/or IFs, called
        AVGCHN with a call sequence it NEVER had.  Then it did an
        average anyway over the size of the record.  Had the code
        worked the average of all the data twice except the first
        channel/IF which would have had weight 1 would have been
        plotted.  In fact, the call to AVGCHN was so bad, one wonders
        what did happen.
        Moved nowhere.

10924.  August 3, 2001         $APLNOT/INVERT.FOR        Leonia
        The new subroutine INVERT calculates the inverse matrix
        of sizes up to 64x64.
        Moved nowhere.

10925.  August 6, 2001         $APLSUB/JPRENU.FOR        Leonia
        When DIR=-1 the time (relative the JD time) was changed by
        sign. This is the wrong way returning back to the mean
        coordinates, because the parameters of the precession
        matrix are described by a polynom including the second
        power term.
        The inverse matrix is calculated instead for DIR=-1.
        Moved nowhere.

10926.  August 7, 2001   VLAPROCS.001,VLACLCAL.HLP       Amy
        Cleaned up VLACLCAL.  Specifically remove all "hidden
        inputs" and input OPCODE, which is and always was set
        by the procedure.  DOPRINT and OUTPRINT were also added
        to the inputs so the LISTR output could be controlled.
        Edited help file to remove references to inputs that did
        not exist and added an explain section which describes
        the procedure.
        Moved nowhere.

10927.  August 7, 2001    $APLSUB/JPRECS.FOR          Leonia
        Several changes have been made:

        1.Having calculated position and velocity of the Sun and
          the rotation matrix for the two given times (given JD
          and JD+DELDAT), the interpolation for any other time
          was carried out wrong. For example if the time is equal
          JD then the weight of its measurements was calculated as
          zero and the weight of the (JD+DELDAT)'s measurements
          was one. Obviously it should be vice versa.

        2.I have changed the calculation of the relativistic light
          bending using the AIPS routine GRD which has been used at
          B1950 routine PRECES.FOR. Using GRD does not change the
          result but makes returning back (DIR=1 => DIR=-1) much
          simpler.

        3.In the abberation I have simplified the coefficients
          checking that this change does not change the result.
          The abberation effect at DIR=-1 is estimated as the
          solid solution relatively the date coordinates.
          Such a solution guarantees the returning back
          (DIR=1 => DIR=-1).

        With these changes and changes at JPRENU (#10925) running
        JPRECS twice (DIR=1 and DIR=-1) returns coordinates back
        to the mean ones with accuracy better than 0.0001 marcsec.
        Moved nowhere.

10928.  August 8, 2001              FITLD                    Eric
        The handling of CQ tables was never correct.  At each new tape
        file, the old CQ table was read and each line was treated as a
        different integration-time/filter pair although in fact they
        were usually the same pair and different FQs or subarrays.
        Then the program tried to append at the end for new
        int-time/filter pairs, but with pointers that caused it to do
        nothing.  Now the read extracts the pairs and at the end of
        each file the CQ table is rebuilt from scratch.
        Removed the DELCORR adverb - for the VLBA the CQ should always
        be written and it will not be written for the other
        correlators.  Corrected DELDAT to 1.D-6 in the call to JPRECS.
        Moved nowhere.

10929.  August 8, 2001              CLCOR                    Eric
        Changed the call to JPRECS also to 1.d-6
        Moved nowhere.

10930.  August 9, 2001    $APLSUB/JPRECS.FOR          Leonia
        As it is indicated at the previous message (#10927)
        the abberation was represented by simple coefficients
        without relativism. It gives a small difference (~0.4mas).
        Now I have implemented the abberation with relativism.
        The inverse (DIR=-1) solution for abberation is still
        found by solving relevant system of equations relatively
        the date coordinates making the precise returning back
        (DIR=1 => DIR=-1).

10931.  August 9, 2001        JPRECS, JPRENU             Eric
        JPRECS and JPRENU were in $APLSUB but now call routines in
        $APLNOT so moved them to $APLNOT also.  I cleaned up the code
        a tiny (I hope) bit too.  Changed DELDAT in JPRECS calls in
        GETSOU and FRMAP to 1.D-6.
        Moved nowhere.

10932.  August 10, 2001            SAD                  Eric
        Added option to loop over clip levels in selecting islands,
        fitting at a sequence of decreasing levels.  Added option to
        scale printed peaks and fluxes by the primary beam.  When the
        bandwidth smearing is selected, the printed peak values are
        increased by the smearing factor (in area).  Changed the
        handling of deconvolution to allow partial solutions with 0 as
        the min value.  Corrected the position angle of the bandwidth
        smearing and the deconvolved results by 90 degrees.
        Changed DECONV to be friendlier about allowing partial fits
        and forcing a sensible position angle.
        Changed IMFIT and JMFIT to understand the frienlieer DECONV.
        Moved nowhere.

10933.  August 10, 2001       $APGNOT/UVFIX.FOR         Leonia
        UVFIX uses the private version of JPRECS which allows to
        apply rotation and not rotation effects under control of input
        parameters.
        I have update the private version of JPRECS to the system
        version of JPRECS changed recently.
        Moved nowhere.

10935.  August 20, 2001      $YPGNOT/VPLOT.FOR          Leonia
        Averaging at time VPLOT has stopped averaging meeting the scan
        end if SOLINT>SCAN. I have added the new option at SOLINT.
        Now if SOLINT<0, then SOLINT= ABS(SOLINT) and time averaging
        does not pay attention on SCAN averaging until end of SOLINT.
        Moved nowhere.

10936.  August 25, 2001      $YPGNOT/VPLOT.FOR          Leonia
        Negative SOLINT allows averaging through scans if
        |SOLINT|>SCAN (see #10935). Therefore averaging different
        sources is possible. I have added a warning about this.
        At the edit option (APARM(1)=1) if autocorrelation is selected
        only the selected autocorrelation has been flagged.
        I have changed it. Now all baselines with selected antenna
        (OPTYPE=AUTO) are flagged at the found bad points.
        Moved nowhere.

10937.  August 29, 2001             IMAGR                    Eric
        Changed IMAGR.FOR - FLUX negative does not care what the value
        of FLUX is but ABS(FLUX) was used as the default for WFLUX
        causing odd behaviors if users really paid no attention to the
        value in that case.  Clarified help file too - I was
        confused.
        Moved nowhere.

10938.  August 29, 2001         SAD, IMFIT, JMFIT            Eric
        Changeed the deconvolution section to add 1 more deconvolution
        attempt to the setting of the max deconvolved result: the
        Clean beam itself plus 1 sigma.  This should help with setting
        as better upper limit to the sizes.
        Moved nowhere.

10939.  September 4, 2001       VLBACPOL.HLP		     Amy
        Changed help file so that it states when VLBACPOL should be
        run while reducing data.  Also fixed the description of
        VLBACPOL's output.
        Moved nowhere.

10940.  September 5, 2001           SAD                     Eric
        Inserted DPARM(2) option to cutoff on total component flux.
        Added asterisk to deconvolved sources smaller than the
        deconvolved Clean-beam + uncertainty (in major axis).
        Correctd deconvolved display -> did --- on 3/4 of the displays
        using AND rather than OR.
        Moved nowhere.

10941.  September 6, 2001          JMFIT, IMFIT              Eric
        Added the corrections for primary beam to peak and flux and
        for delay beam for peak to both tasks.  Fixed display of
        cutoff level in PBCOR - it was not changed when the meaning
        changed to 1/previous meaning.
        Moved nowhere.

10942.  September 13, 2001           FITLD                 Eric
        Changed it to forgive a missing a CQ table with warnings and
        setting DELCOR false.  Then a stronger warning appears if
        it turns out that this is VLBA data.
        Moved nowhere.

10943.  September 19, 2001      $APGNOT/ACCOR               Leonia
        The default for SOLINT has been equal 60 min. Long time
        it has been supposed that the behaviour of the BBC's digitizer
        is stable in time. Now when it is clear that it is not right
        SOLINT=60min is too big. So the default changed for 2min.
        Moved nowhere.

10944.  September 20, 2001     $APGNOT/ACCOR               Leonia
        The negative SOLINT implemented this year (#10770) mean
        the averaging is carried out at the scan length independent
        on the value of the negative SOLINT.
        It is changed. Now If SOLINT.LT.0  then the ABS(SOLINT) is
        used as the average interval and averaging is terminating at
        the end of the scan.
	Because of the gaps between scans small intervals can appear
        at the scan ends. The intervals less than
        0.2*MIN(SOLINT, SVAN) are not recorded to the output
        SN table.
        Formely the intervals less than 0.4*SOLINT were not not
        recorded to the output SN table.
        Default for SOLINT has been changed from 2min to -2min.
        Moved nowhere.

10945.  September 21, 2001      $YPGNOT/UVPLT               Jim
        Modified UVPLT to add an option allowing users to plot
        against uv distance in a user-specified position angle.
        This has been implemented in a new option 17 for BPARM(1)
        and BPARM(2), as well as addition of the adverb ROTATE
        which allows users to set the position angle on which
        they want to project the baseline.
        Moved nowhere.

10946.  September 21, 2001         FILLM         Bryan Butler/Eric
        1. Added the creation of a weather (WX) table with subroutine
           FLMWX which writes to the table and a parameter in FLMTAB
           which tells it whether to call FLMWX to add an entry and
           timing variables to check entry timing.  Created:
              WXINI which creates/opens the WX table
              TABWX which writes/reads the WX table
              DWXV.INC for common WX variables
        2. Added the creation of a source position (PO) table *only*
           if the 'planets & Sun' bit is set (bit 4 of CPARM(2)) and
           if the source has coordinates of date (EPOCH=-1).  Added
           subroutine FLMPO which writes to the table, a parameter to
           FLMTAB which tells it whether to call FLMPO to add an
           entry, timing variables to check entry timing, and a
           variable which indicates which sources are moving ones and
           which are not - in FLMSU and FLMPO.  Created
              POINI which creates/opens the PO table
              TABPO which writes/reads the PO table
              DPOV.INC for common PO variables
        3. Added modification of the CL table entries, based on
           opacity and gain curves (of course it can be turned off if
           desired).  Added BPARM input parameter (reluctantly) to
           allow some flexibility.  Added several common variables to
           indicate parameters and the type of opacity and gain curve
           correction and slightly modified input parameter handling
           (FLMIN) to deal with these new adverbs and parameters.
           Added a subroutine to read in a gain curve file.  A
           standard VLA.GAINS file will be provided in $AIPSIONS.
           Added mechanics in FLMCL (the CL table writer) to check for
           the type of opacity and gain curve correction and do the
           necessary modification of the amplitude (real part) of the
           gain correction value.  Added a subroutine to calculate the
           opacity given the weather information.
        4. Other changes (while I was at it)
           - changed the shadowing check: if the 'default' (25 m) is
           asked for, the shadowing is now retrieved from the shadow
           bit on the archive tape.  This is useful because the
           on-line version knows about *all* antennas (not just the
           ones in a given subarray) when it does its shadowing
           calculation (Ken tells me that this even includes the
           AAB!).  This only required a small modification to the
           input parameter treatment, and a small modification in
           FLMUV where the shadowing is checked (instead of calling
           MCSHAD, the on-line shadowing bit is checked in this case).
           - made a new 'bit' logical in CPARM(2): . bit 8 makes it
           possible to ignore all source qualifier numbers, treating
           all sources with the same name as truly the same source
           (sets the qualifier for all to 0).  This only required a
           small modification to the input parameter treatment, and a
           check in FLMSU.
           - Took out the reassignment of CPARM(8) and CPARM(9) in the
           table timing since the initial values may be needed later.
        5. 2nd round of changes i made to FILLM (after eric AIPSisized it):
           - made references to light speed and pi (and 2*pi) come
           from INCS:PSTD.INC at various places throughout.
           - in MCREAD: some cosmetic changes (got rid of variable
           GOTEOF [used ISEOF in its place]); set ISEOT properly in
           the case of 2 EOFs encountered in a row.
           - in MCHEAD, added a check for crossing file boundaries, so
           an informational message can be printed at these.  to
           facilitate this, needed to add 2 of the variables which are
           used in MCWANT (TSDATE and TSIAT0) to a COMMON in MC2.INC
           (and modified the use of these variables [TSOFF and TSIAT]
           in MCWANT cosmetically).
           - in MCRECO, changed the way that NOFILE is updated.  As
           programmed previously, it updated twice for every EOF
           encountered (since MCHEAD was effectively called twice at
           every EOF [the first time hrough, MCHEAD traps ISEOF, and
           just falls through]).  Also, added an update to NOFILE in
           MCREAD when tape headers are encountered.
           - in MCH1: modified the interpretation of the 'nibbles' for
           bandwidth code, front-end filter code (added code and
           variable [MCFEFW] for this), and correlators per baseline
           (i made these use ZGTBIT, which I think is infinitely more
           straightforward than what was in there before); modified
           setting of bandwidths in cases of bandwidth code of 8 or 9
           (this was incorrectly set to be equivalent to 50/2**8 MHz
           in both cases, when in fact it should be set to be 50/2**9
           MHz in both cases); also modified the bandwidths in cases
           where the front-end filter code indicates that the
           front-end filter bandwidth is less than the selected
           'bandwidth'; took out a duplicate assignment to the
           calibrator code variable (TCALCD);
          - in FLMGN, added the parameter 'READ' to the 2nd call of
          ZTXIO, i.e., changed: CALL ZTXIO (LUNGN, INDGN, INLINE, IRET)
          - in PARSEL, changed II after the call to GETNUM, II is
          already set to the next white space, so doesn't need to be
          incremented by 2, only by 1 or 0.  If it's incremented by 2,
          then the first date read in is missing its first digit and
          is wrong.
          - in FLMPO, made a check that this particular entry has not
          already been written into the PO table.  For datasets with
          integration times less than 10 sec, consecutive entries can
          have the same exact values for the position (because the
          position is only updated every 10 sec tick in the online
          system), and we don't want duplicate entries. so, have to
          keep track of times+positions already written (in array
          TIMED), and check that the current entry hasn't already been
          written before adding it to the PO table (use logical
          variable ALREDY).
          - in FLMWX, added a check that the tape revision is >= 4
          before adding a weather entry to the WX table (weather data
          was not written to tape prior to revision 4).
        Moved nowhere.

10947.  September 24, 2001            PRINT                     Eric
        Added some digits to PRINT verb in KWICK.FOR and changed
        FRMT.FOR to make more low digits when useful.
        Moved nowhere.

10948.  October 2, 2001          TECOR.HLP                      Amy
        Change the sentence in the help file that said dispersive
        delay corrections should not be turned on.  I said that they
        depended on the accuracy of the input file, and should be
        checked carefully.
        Moved nowhere.

10949.  October  9, 2001         CL2HF, ANTINI              Eric
        CL2HF ignored the fact that table keywords are now all double
        precision and got DATUTC wrong.  But a check of ANTINI, showed
        that ANTINI read it wrong also, getting the type handling
        right but using a pointer not properly set.  UT1UTC was
        returned rather than DATUTC.
        Moved nowhere.

10950.  October 10, 2001           FITLD                    Eric
        If the first FQ found is not number 1, it is switched to be
        number 1 to guarantee that there are data for number 1.  The
        routine FR2FQ was prepared to find the frequency offset from
        the new FQ 1 and apply it to the other FQs.  Unfortunately, if
        the offset did not occur in the first FR record (which it
        would not in this case) then the offset was zero for the first
        record(s) in the output FQ table and then non-zero for the
        later record(s).  Added code to find the offset first, then to
        write the table.
        Moved nowhere.

10951.  October 15, 2001            FILLM                Brian/Eric
        Reset the planetary motion array when streams/files change.
        Moved nowhere.

10952.  October 16, 2001            LISTR                Eric
        Added DPARM(14) to get weights in a MATX display.
        Moved nowhere.

10953.  October 23, 2001          TECOR                  Amy
        Changed TECOR so that it can handle multiple files.  Added
        adverb NFILES.  If NFILES > 1 then TECOR will read the day
        number and year from the file name given in INFILE, if the
        file name is in a standard format.  It then will increment
        through as many day numbers as in NFILES.  The standard
        format is CCCCdddC.yyC, where C is any character, ddd is
        the 3 digit day number and yy is the 2 digit year.  The
        file in INFILE must also be the first day, the C's must
        be the same between days and the files must all be in the
        same directory.
        Moved nowhere.

10954.  October 23, 2001            IMAGR                     Eric
        Fixed the TELL section's handling of FLUX.  The FGAUSS cutoffs
        for each field were not updated.  This caused the histogram to
        not be recomputed but did not stop the Clean - which caused
        numerous bad things.  This error only applied if FLUX was set
        to something and then lowered with TELL and applied only to
        OVERLAP < 2.
        Moved nowhere.

10955.  October 25, 2001            SLCOL                     Eric
        Changed the format and type of data displayed.  It now does X,
        Y wrt the true ref pixel, Distance wrt user-spec pixel (ref
        pixel default) with a sign set by X wrt that point.  All
        models and all components are displayed.
        Moved nowhere.

10956.  October 25, 2001            FRING                    Eric
        Changed GRDCRM to test Gaussian widths with less precision
        than a total match.  Fixed FRING to use a proper CMETH of 4
        characters - it was failing to use the input string.
        Moved nowhere.

10957.  November 1, 2001             FITLD                   Eric
        Changed the size parameters at the start to standard ones from
        PUVD.INC.  IT was limiting the number of channels to 2048 and
        MAXCIF to 4096.
        Moved nowhere.

10958.  November 1, 2001            ISPEC                    Eric
        Used REAL for frequencies - DOUBLE pRECISION is needed at high
        frequencies with narrow channels.
        Moved nowhere.

10959.  November 2, 2001           CHKFC                     Eric
        Changed the character writing into the facets to allow the
        option of large characters (same lousy font).
        Moved nowhere.

10960.  November 2. 2001           FITLD                     Eric
        I guess Phil never figured that AIPS "bytes" (1/2 word) were
        not the same as real tape bytes.  He tested real tape bytes
        against buffer sizes in AIPS bytes.  For the user with large
        data this will not do.
        Moved nowhere.

10961.  November 5, 2001           MWFLT                    Eric
        One 2048 sized buffer remained -> MAXIMG.
        Moved nowhere.

10962.  November 6, 2001         TECOR.HLP		    Amy
        Added paragraph mentioning all the IONEX files available
        on CDDIS.
        Moved nowhere.

10963.  November 15, 2001     COMB                          Leonia
        COMB has the two opcode 'MEAN' and 'SUM' which carry out
        similar operation with the two given map. Both make the linear
        combination of the input maps (MEAN do not have the free term
        C3). But MEAN normalises the coefficients A1 and A2 by their
        sum. The difference between SUM and MEAN has not been clearly
        described at the help file. So the relevant description has
        been added. SUM and MEAN have treated the blanked pixels
        differentely. By request of Lincoln the new OPCODE='SUMM'
        has been added. The difference between SUMM and SUM is only at
        blanked pixels treatment. SUM puts blank at output if the MAP1
        or the MAP2 pixel is blank. SUMM puts blank at output if the
        both MAP1 and MAP2 pixels are blank. If one of the map's pixel
        is blank, SUMM puts this map's term at the linear combination
        as zero.
        Moved nowhere.

10964.  November 15, 2001               FITDISK             Amy
        Procedure using FITTP to write files to disk using an
        automatically generated name based on the file name in
        AIPS.  Internal blanks are changed to '_' and trailing
        blanks omitted.
        Moved nowhere.

10965.  November 20, 2001          UVCOP                    Eric
        Failed to apply any flag table entry with non-zero source
        number to single-source data.  Changed it to apply all
        source numbers to such data.
        Moved nowhere.

10966.  November 21, 2001   SCANTIME (part of VLBAUTIL)     Amy
        SCANTIME used to calculate the beginning and end time of
        a scan by taking the time in the NX table and adding and
        subtracting the time on scan ('TIME INTER) in the NX table.
        This is incorrect, the time on scan should be divided by 2
        and added and subtracted to the time in the NX table.
        Moved nowhere.

10967.  November 21, 2001            FITLD                   Eric
        For some reason the correlator sometimes writes data with
        FQIDs having identiacl frequencies.  This confuses things no
        end when concatenating to files that have 1 FQID of the same
        value.  Made another Band-aid patch to translate the
        "duplicate" FQIDs to the lowest one before any of the other
        translations.
        Moved nowhere.

10968.  November 21, 2001         UVLOD, FITLD             Eric
        UVLOD (and its copy in FITLD) attempt to convert abnormal
        Stokes and Complex axes to normal ones.  There was no
        attention paid to a change in the axis length affecting how
        much to read.  All converted Stokes axes were length 4 even if
        there were not 4 incoming values to do the conversion.
        Changed to avoid the conversion in some more cases.
        Moved nowhere.

10969.  November 23, 2001              SLCOL                   Eric
        Fixed it to honor the replace text file option as well as
        append.  Changed how it is requested.
        Moved nowhere.

10970.  November 23, 2001             FITAB                    Eric
        The logic testing the vis range could result in an infinite
        loop where IPIECE < NPIECE always.  Fixed.  This showed up on
        a file with no vis recs.
        Moved nowhere.

10971.  November 23, 2001         VLBAUTIL.001                 Eric
        The CPARMs were not set right for SNSMO clipping bad
        amplitudes.  The clip number was put in the phase smooth
        time instead of CPARM(6).
        Moved nowhere.

10972.  November 23, 2001           SPLIT                      Eric
        When calibrating a single-source file it changes the velocity
        type and reference based on the non-existent source table.
        Changed it to change the type only when multi-source.
        Moved nowhere.

10973.  November 25, 2001           USAVE                   Eric
        New pseduo-verb: SAVEs to another user.
        Changed POPSDAT.HLP, STORES.FOR, USAVE.HLP.
        Moved nowhere.

10974.  November 26, 2001          XAS.SHR                 Eric
        The order and placement of the RGB bytes in the 24- or 32-bit
        word for TrueColor displays depends on the byte order of the
        display machine, not the byte order of the machine running
        XAS.  The Image structure may be used to give this byte order,
        while shared memory usage guarantees that the two are the
        same.
        Moved from the AOC this date.

10975.  November 28, 2001        ELINT                    Leonia
        Rick Perley requests printing error of the polynom
        coefficients. I have modify ELINT to do it.
        Print of source factors for each antenna has been
        removed.
        The help file has been updated to clarify PRTLEV=0,1,2.
        Moved nowhere.

10976.  November 29, 2001              IMAGR                  Eric
        Clarified the handling of BOXFILE - now leading blanks are
        ignored in lines of all types.  Changed IMAGR, FIELDF, WINDF,
        WRIBOX, AU5C (verb FILEBOX) to handle the files this way.
        Fixed QCLEAN to be forgiving about errors when prompting for a
        field number (in force a field or select a field).
        Moved nowhere.

10977.  December 4, 2001           SNPLT                   Amy.
        Changed SNPLT so that it checks the weights of all IFs,
        rather than only the first. Also changed SNPLT to set the
        amp, phase, rate and delay for a specific IF to FBLANK if
        the weight for that IF was negative.
        Moved nowhere.

10978.  December 4, 2001            GETTIM                   Eric
        Changed subroutine to regard GMRT as a VLA-like antenna and to
        set the error code for unrecognized arrays only if the array
        center is zero (i.e. VLB).   Affects CVEL.'
        Moved nowhere.

10979.  December 5, 2001           MAKE.MNJ                 Eric
        Added lines to allow it to accept an argument that only
        contains the date without the time.  This save fixing
        update.pl and install.pl and puts the correct .000000
        that one would want in those cases.
        Moved nowhere.

10980.  December 5, 2001          MNJ                      Eric/Pat
        Changed putbck system's addrec.c to use UT (gmtime) rather
        than localtime in the *.UPD files.  Changed $UPDUNIX/AIPSUPD
        to fetch the time string as UT in form YYYYMMDD.HHMMSS to name
        files and to use in the LAST*.DAT* files.  Changed
        $UPDUNIX/UPDLSTDAT.c to build a comparable string from the
        transaction files for comparing with the current time.  Thus
        we will not have to wrry about crossovers of dates etc between
        the aips repository (currently CV) and the MNJ site.  This
        will force the MNJ sites to recompile UPDLSTDAT.c.
        Moved nowhere.

10981.  December 5, 2001           SNEDT                      Eric
        The EDITSN subroutine in QEDIUTIL had the logic wrong on ENTER
        IF when the IF is predictable.  It is not predictable when
        crowded.
        Moved nowhere.

10982.  December 6, 2001          PCAL, LPCAL                  Eric
        Both tasks play games with BIF/EIF internally and then wrote
        them to the HI file.  Fixed the HI file to get the actual
        full range used.
        Moved nowhere.

10983.  December 6, 2001           help files                 Eric
        Updated INTERPOL.HLP with info from the tasks that use it.
        Updated TVCPS.HLP by dropping all the film recorder info.
        Moved nowhere.

10984.  December 6, 2001          FRING.HLP                   Amy
        Changed the default of APARM(1) from 6 to the correct value, 3.
        Moved nowhere.

10985.  December 10, 2001        ABOUT etc                  Eric
        Updatedthe ABOUT files
           ZZANALYSIS.HLP  ZZCOORDINA.HLP  ZZFITS.HLP
           ZZIMAGE-UT.HLP  ZZMODELING.HLP  ZZPOPS.HLP
           ZZPROCEDUR.HLP  ZZTASK.HLP      ZZTV.HLP
           ZZUTILITY.HLP   ZZUV.HLP        ZZVERB.HLP    ZZVLBI.HLP
        Also the tab completion file: HLPIT.LIS
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC01 is TST

***********************************************************************
***********************************************************************

10987.  December 18, 2001           DFTPL                 Eric
        The code that finds the I Stokes was really messed up!  It
        counted the correlators that make up the I and then divided by
        that count.  But the count was zeroed way outside the loop and
        the other parts were in the innermost part of the loop.  And
        there was no test for zero divide.
        Moved from 31DEC02 Dec 18.

10988.  December 19, 2001   VLBACALA, VLBASUBA, VLBAFQS   Amy
        The biggest change was made to VLBACALA where I changed
        the CPARM(6) (max deviation for the amplitudes) in the
        second run on SNSMO to 1.0.  Since the max deviation is
        in real amplitudes (i.e. not fractions or percents) 0.02
        was much too small.
        Changed VLBASUBA and VLBAFQS so that the default of CLINT
        is actually 1 minute as claimed in the help file.  Previously
        it had been left to the default in INDXR which is 5 minutes.
        Moved to 31DEC01 this date.

10989.  December 28, 2001          update.pl             Eric
        Fixed to edit PAPC.INC into $INC/NOTST/$ARCH whether or not it
        started there.  Previously it edited it in $INC!
        Moved from 31DEC02 this date..

10990.  December 29, 2001          CPASS.HLP             Eric
        The help file lied about the auto normalization after
        averaging which was also done in CPARM(8)=0.  Fixed that and
        added comments about normalizations.
        Moved from 31DEC02 this date.

10991.  December 29, 2001     UVWAX        Eric/Joe Lazio/Wendy Lane
        New task - like UVNOU but deletes data near 0 in u and/or near
        0 in v and/or at high values of w.
        Moved from 31DEC02 this date.
