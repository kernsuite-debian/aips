-----------------------------------------------------------------------
;  Copyright (C) 1996-1997
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the the
master version of AIPS kept in Charlottesville.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


                    Changes to 15JAN95


***********************************************************************

        Changes while 15JAN95 was TST:

***********************************************************************

***********************************************************************

 8182.  July 7, 1994       $SYSUNIX/FDEFAULT.SH                 Pat
        Changed all -fpe3 options for Dec (Ultrix, Alpha) to -fpe0.
        Apparently the former setting made underflow cause a f.p.
        exception which makes tasks crash & burn.  The latter setting
        allows the task to continue.
        Moved to 15JUL94 today.

 8183.  July 7, 1994                SAD                      Eric
        More changes:
        (1) Changed flux scaling to use RMS when appropriate to set
        scaling.
        (2) Removed bug in subtracting previous components: a limit on X
        was used in testing the max Y.
        (3) Changed to keep track of the max flux in each island and
        then to fit them in descending order of max flux.  Previously
        they were fit in the order found, roughly bottom to top in Y.
        The flux ordering should remove the possibility of overlapped
        fitting windows allowing the fit to wander off extrapolating the
        edges of a strong component.
        (4) Changed help and code to add adverbs GAIN and DPARM.  The
        retry and warning levels will now use sqrt (level*level +
        (gain*peak)**2) rather than just level.  The DPARM's are used to
        set min flux, max rms, max width, max departure from the fitting
        area and max departure from the image before a fit is rejected.
        (5) Changed SUBFIT to return if there are no gaussians.
        (6) Changed it to recompute the rms, sum, and extrema around
        each component after all components are subtracted.  The numbers
        then apply to each component, not to a full fit area, and apply
        after nearby sources have also been subtracted.  Normally, this
        lowers the "errors", but, if objects remain just outside the
        search area, then the "errors" may increase.
        (7) Added a bit to the help file about the output, including the
        H, L, S codes for questionable residuals.
        (8) Added to code and help PRTLEV to display the areas that are
        rejected for selected reasons.
        (9) Raised max number of sources to 4000.
        (10) The P.A. in pixels is actually measured counterclockwise
        from the X axis!  This means that the conversion of the clean
        beam to pixels and the fit components to arc seconds had to be
        changed.  This conversion was entirely wrong - it assumed that
        the pixel spacing varies across the image but that the direction
        to North does not.  This is backwards.  The coordinates rotate
        as one moves around a projection, but the real increments change
        only very slightly.  This is fortunate - CLEAN would be wrong
        otherwise.
        (11) The deconvolution area needs work badly - but I will do
        that later.
        Moved to 15JUL94 this date.

 8184.  July 7, 1994             FITLD                      Eric
        Changed:
        (1) $APLDEC/ZTPWAD.FOR - added another error code to mean end of
        file.  This code arises when the last record is not a full 2880
        bytes.
        (2) $APLGEN/ZR64RL.FOR - changed to pick up the correct word
        when looking for underflows, NANs, etc.  Dropped the $APLDEC
        version which commented out this section rather than figuring
        out why it did not work.
        (3) FITLD.FOR - in subroutine LOADUP, changed the code to refer
        to tape data only when needed.  If one multiplies a valid number
        by a random place in a buffer, then one can get underflow,
        overflow, NaNs, and other fp abort conditions!  One should
        always use only data that are initializaed.  In this case, it
        used the uninitialized data and then did an IF to replace it
        with good stuff.  An IF-THEN-ELSE structure is required.
        (4) FITLD.FOR - changed a bunch of message levels.  >5 is for
        errors, 2 is for progress messages.
        (5) FITLD.FOR - changed it to do the listing of possible output
        files only when the format really is VLBA and DOCONCAT is true.
        This listing was updating the last access date, potentially on
        whole catalogs.
        Moved to 15JUL94 this date.

 8185.  July 7, 1994               SUBIM                     Eric
        Initialized the max and min with the initial header min and max,
        resp.  If the header had garbage, this could leave garbage in
        the max/min.  Fixed the initialization.
        Moved to 15JUL94 this date.

 8186.  July 7, 1994               PRTTP                     Eric
        The call to print VLB information used IERR but tested IRET.
        Thus it took several q's to quit.  Fixed it to test the error
        returns more carefully.
        Moved to 15JUL94 this date.

 8187.  July 7, 1994              IMEAN                      Eric
        Changed the program to compute a histogram at all times.  DOHIST
        now controls only whether it is plotted.  Changed the OUTFIL
        option, so that the histogram is printed into the output file.
        Raised the maximum number of boxes to 1024 and the default to
        101.
        Moved to 15JUL94 this date.

 8188.  July 7, 1994             CPYRT                       Eric
        Task to replace HI file with contents of a file and to add an
        NRAO copyright notice to the top of image files.
        Moved to 15JUL94 this date.

 8189.  July 7, 1994               WFCLN                     Eric
        Turn off the option to restart using an old WFCLN file - it is
        purported not to work and it never seems to do a quick restart
        anyway.  Changed only the HLP file to do this.
        Moved to 15JUL94 this date.

 8190.  July 8, 1994           AIPSPATH.CSH,SH           Pat/Ruth/Rick
        The logic of these scripts in using TPATH and PATH was flawed.
        TPATH is set to the old contents of PATH when the script is
        called (e.g. through LOGIN.SH or LOGIN.CSH), but the old scripts
        only did this if TPATH wasn't set already.  If a user changes
        the PATH after calling AIPSPATH and then inadvertently calls it
        again, the changes made to the PATH since the first call are
        lost.  Removed the test on contents of TPATH.
        Moved to 15JUL94 and /AIPS this date (needs done at AOC).

 8191.  July 8, 1994         $APLSOL/ZMOUN2             Pat/Ruth/Gustaaf
        Made it use "m" instead of "h" to indicate high density on
        exabyte 8500 devices.  Apparently "h" means use compression AND
        high density.
        Moved to 15JUL94 this date and sent manually to the AOC (mail).

 8192.  July 8, 1994         $APLUNIX/ZIGNAL.C           Pat/Bob Garwood
        Bob noticed a typo in this routine where there was a - that
        should have been a _.  Linux apparently detected this too, as it
        was embedded in a #ifndef __linux, and the correct version (with
        the underscore) was used for Linux.  SunOS and other systems had
        the relevant symbol #define'd so that the section was totally
        skipped.
        Moved nowhere as yet, probably should move to 15JUL94?

 8193.  July 9, 1994        HLPB, LSAPROPO              Eric
        Why did I think this worked?  HLPB swaps the list of words back
        and forth between two arrays as it sorts them, removes
        duplicates and drops excluded words.  The output loop then used
        WORDS(i) while the last swap put the good stuff in CATS(i).
        Also changed HLPB to trim all the output lines.
        Also fixed LSAPROPO.HLP which was messed up by this.
        Moved to 15JUL94 this date.

 8194.  July 10, 1994              HOLGR                    Eric
        Changed help and code to (1) raise the size of the maximum image
        to 512, (2) drop the degree of interpolation of the antenna beam
        from 8 (2 from subsampling data and 4 from larger grid) to 2
        (all from larger grid), (3) drop the use of UVMAX < 0 to imply a
        fixed radial taper which was applied to the data but not the
        weights, and (4) to add a choice of tapers which apply to the
        data and to the weights.  Rearranged and equivalenced the arrays
        to reduce the memory required from 30 to 16 Mbytes.
        Changed it to offer a choice of interpolation factors in the
        antenna beam (option 10) output, up to 2048/NPIX only and
        corrected the axis increment in the output header.
        Moved to 15JUL94 this date.

 8195.  July 10, 1994            FILLM.HLP                Eric
        FILLM actually loads all observation codes when VLAOBS is blank.
        Changed help file to say this and to recommend setting VLAOBS.
        Moved to 15JUL94 this date.

 8196.  July 10, 1994            SETJY                    Eric
        Changed it to allow CALCODE = '----' to mean reset the calcode
        to blank.  Also added test to refuse to set calcode to '*'.
        Moved to 15JUL94 this date.

 8197.  July 12, 1994        $APLULTRX/ZCREA2             Pat
        I don't know how this ever worked... the reference to the data
        structure member giving the available free space was incorrect.
        Fixed (compiler no longer complains).
        Moved to 15JUL94 this date.

 8198.  July 12, 1994        $APLBELL/ZDELA2              Pat
        Minor modification to permit timing to be correct.
        Moved to 15JUL94 this date.

 8199.  July 12, 1994        CALIB, SNSMO, CSLGET           Eric
        The parameter used to keep the average gain scaled to 1 was (a)
        miscomputed in CALIB and SNSMO since null solutions (1,0) were
        included (for sure in the former, probably in the latter) and
        (b) misapplied in CSLGET by using the SQRT of the average
        antenna gain rather than the average.  Repeated self-cals with
        gain normalization would gradually lose flux.  Relink all.
        Moved to 15JUL94 this date.

 8200.  July 12, 1994          GRIDTC, SPFLG               Eric
        Subroutine GRIDTC is used by SPFLG alone and calls SPFBLT which
        is in SPFLG only.  Therefore copied GRIDTC.FOR into SPFLG.FOR
        and deleted the $APLNOT version.  It was pulled out initially
        for vectorization, but now causes unresolved reference messages
        in NEW.
        Moved to 15JUL94 this date.

 8201.  July 13, 1994              WTMOD                      Eric/Craig
        A minus sign was left out and a LT should have been an LE.0 when
        setting weights to already flagged data.  This had the effect of
        unflagging data in the non-reweight mode and unflagging data
        that had weight 0 in the rewieight mode.
        Moved to 15JUL94 this date.

 8202.  July 13, 1994              UVFND                      Eric/Craig
        When the task was changed to use UVGET it was forgotten that
        correlators with weight <= 0 can be returned; the routine used
        before did not return flagged data (GETVIS).  Changed the flux
        checking loop to check weights.  In the single-dish subroutine,
        changed the flux loop to check that the flux is not exactly 0.0
        which is what GETVIS returns if the correlator is flagged.
        Moved to 15JUL94 this date.

 8203.  July 13, 1994       $APLALPHA/LDOPTS.SH               Pat
        Modified to attempt to force -fpe0 option so that underflows do
        not cause a f.p. exception.  Unfortunately this appears to be
        innefective.
        Was going to move it to 15JUL94 but missed the deadline.

 8204.  July 15, 1994            FITTP                     Eric
        Put in things to report the data scaling to the user and to
        count and report the number of vis's and image pixels written as
        pure zero.  Perhaps this will warn people who are destroying
        their data by writing them as 16-bit integers.  (The case that
        just came up had a least bit of about 0.48 Jy!)
        Moved by the grace of pmurphy to 15JUL94

 8205.  July 18, 1994       $APLGEN/ZOINTD                 Pat
        This module failed to compile under some K&R compilers because
        there was no #include <stdio.h> (see Jan 1994 patches).
        Inserted same.
        Moved to 15JUL94 this date.

 8206.  July 18, 1994      $SYSUNIX/XASERVERS              Pat
        The flags for "ps" (berkeley mostly) used in this script were
        arbitrary and inconsistent.  They didn't even work on OSF/1.
        Rationalised the "is this process running" logic and in the
        process somewhat simplified the script.  It gets the name of the
        process owner for XAS, TEKSRV, and MSGSRV if running, and also
        the display variable if possible.
        Moved to 15JUL94 this date.

 8207.  July 18, 1994      $APGNOT/UVFND.FOR               Athol
        Minor typographical error corrected in UVFND fix of 13 Jul
        (# 8202). Weights referenced as VIS(K,3) instead of
        VIS(3,K).
        Request to move this to 15JUL94 pending with Pat.

 8208.  July 19, 1994          ZIGNAL                    Eric
        Corrected $APLUNIX signal handler ZIGNAL.C.  I had copied
        Stevens' book incorrectely, using two != rather than |= 's.
        Thanks to Martin Shepherd  (mcs@phobos.caltech.edu) for pointing
        this out.  I do not understand why the C compilers accepted the
        old statements without complaint.
        Moved by the grace of pmurphy to 15JUL94

 8209.  July 19, 1994         ZSSSX2                     Eric
        Corrected $APLUNIX/ZSSSX2.C for the bad assumption that all
        words to be byte-flipped appear initially to be positive.  Stole
        the "union" code from XAS itself.
        Moved by the grace of pmurphy to 15JUL94

 8210.  July 20, 1994           ZTPMID                  Eric
        Changed the $APLIBM version of ZTPMID (the only one that uses C
        for this) to loop until all bytes are done for reads and writes.
        This will mostly just allow proper trapping of errors.  When
        nothing is wrong, only 1 read or write should be needed for a
        mere 2880 bytes.
        Moved nowhere.

 8211.  August 1, 1994  $APGOOP/DTSUM.FOR &  $HLPFIL/DTSUM.HLP  Athol
        Added a print-level option to DTSUM to allow the printing of
        a condensed summary of visibiltiy counts for the entire
        uv-data file in the same antenna-matrix format. Useful for
        finding gross discrepancies in VLBA correlator output files.
        Moved nowhere.

 8212.  August 2, 1994      $APGNOT/ANCAL.FOR                 Phil
        ANCAL hit a problem when being used on S/X data in the same
        file. User was using the INDEX keyword (incorrectly as it turned
        out - but that was fixed) and ignoring the first 4 columns
        of the input text file. This resulted in the first 4 columns of
        the internal Tsys array being blanked - correctly. However when
        applying the Tsys information to the CL table no check was
        performed to ensure the Tsys column was blanked and so the CL
        column was filled with numbers scaled by the sqrt(fblank).
        Moved nowhere.

 8213.  August 3, 1994      $APGNOT/ANCAL.FOR          Phil
        Modified slightly to not blank valid CL columns based on blanked
        Tsys columns. They are now passed through untouched.
        Moved nowhere.

 8214.  August 3, 1994        New task: $APGNOT/BASRM.FOR        Phil
        New task to remove spectral baselines from total power spectra
        and write out a new uv-file. Any cross power data in the file
        are passed through untouched. This first version only works on
        uncompressed data, the next version (next week?) will work on
        compressed data also.
        Moved nowhere.

 8215.  August 3, 1994     $YPGM/ISPEC.FOR 		Dave
        A user pointed out a minor problem: while ISPEC calculates
	the "average over area" and correctly says this on the plot,
	the printout read "sum over area". Changed the printout
	to have the correct header.
	Moved nowhere.

 8216.	August 4, 1994		$YPGM/GREYS.FOR		Dave
	The combination of DOWEDGE=1 and LTYPE .LE. -2 was
	causing some plotting problems; the filename would be plotted
	on top of the wedge coordinates. Changed a couple of if
	statements to take the absolute value of LTYPE.
	Moved nowhere.

 8217.  August 9, 1994       Misc                       Eric
        Changed:
        AU5     Added prompting messages to TVPOS, IMXY, IMPOS verbs
        PRTTP   Corrected format for positions in Export format display,
                the 0 fills were offset 1 column
        Moved nowhere.

 8218.  August 9, 1994          Stars                    Eric
        Changed:
        CCNTR   Corrected (updated) the column numbers for MF files and
                corrected the plotting of the components to use the
                correct position angle wrt North.
        STARPL  Changed names of width columns - they are not delta RA
                and delta DEC, but rather major and minor axes.  Changed
                meaning of position angle to be E from N.
        STARS   Removed any division by COS (Dec) and changed column
                titles for major and minor axes.
        STARS   .HLP file: corrected spelling and changed it to describe
                major and minor axes rather than position uncertainty.
        MF2ST   NEW TASK: convert MF entries to ST entries.
        Moved nowhere.

 8219.  August 9, 1994        $AIPSPUBL/COOK11.TEX & .PS      Phil
        It was rumoured that Eric was beginning to doubt the existence
        of the revised version of Chapter 11 (VLBI) of the Cookbook. In
        order to allay his fears I have checked it back in. There are
        numerous changes, the most importnant of which is that the
        Chapter now concentrates on describing the reduction of VLBA
        data. This is only a first draft, we need sections on
        polarization and phase-referencing, however it will serve as a
        guide for most observations currently being reduced.
        Moved nowhere.

 8220.  August 10, 1994        $APGNOT/UVCOP.FOR              Athol
        Improve table handling and FQ ID selection in UVCOP.
        Expanded table handling to include re-numbering FQID/IF/FREQ
        for BP tables; corrected FQID selection and re-numbering
        for CL, SN, SU and FG tables. Still scope for further work
        to reflect time, source and antenna selection in the output
        tables.
        Moved nowhere.

 8221.  August 10, 1994        $APLNOT/BPFSEL.FOR             Athol
        New subroutine to re-number FQID/IF/FREQ parameters in
        BP tables. Analoguous to CLSEL/FGSEL/SNSEL/SUSEL. Called
        by UVCOP (see #8220).
        Moved nowhere.

 8222.  August 10, 1994  $APLNOT/CLSEL FGSEL SNSEL SUSEL      Athol
        Corrected FQID selection and re-numbering in these routines.
        All input FQID entries were being copied to the output
        table and labelled as FQID 1 without selection. Improved
        error handling if table routines fail; did not previously
        report all errors.
        Moved nowhere.

 8223.  August 11, 1994     $APGNOT/SKYVE.FOR,$HLPFIL/SKYVE.HLP      Mark
        New task to regrid a Digitized Sky Survey image onto a coordinate
        system and projection recognized by AIPS.

 8224.  August 14, 1994       $APGNOT/FITLD.FOR           Phil
        Minor changes. 1) added the correlator supplied scaling value to
        the history records. 2) Changed some message priorities to those
        defined by Eric. 3) Added the code to prepare for the digital
        corrections. 4) Print out the IF sky frequencies before they are
        re-ordered.
        Moved nowhere.

 8225.  August 14, 1994           TVCPS                   Chris
        Added an ASPMM adverb to TVCPS.
        Moved nowhere.

 8226.  August 15, 1994   $APGNOT/SHOUV.FOR   $HLPFIL/SHOUV.HLP  Athol
        Corrected array boundary error in scanning XANT(50) in
        subroutine CLOSET. Caused an FPE in attempting to process
        elements beyond the end of the array. Also removed a reference
        to optypes MATX and LIST in SHOUV.HLP.
        Moved nowhere.

 8227.  August 15, 1994       UVLOD, IMLOD, FITLD          Eric
        Changed all 3 help files and UVLOD and IMLOD source code to do
        no tape movement when NFILES = 0.  Sent a code fragment to Phil
        to fix FITLD too.  Linux will not allow one to BAKF at the start
        of the tape followed by anything besides a close.
        Moved nowhere.

 8228.  August 15, 1994       $APGNOT/SETJY.FOR            Athol
        SETJY was adjusting the source velocity in the wrong direction
        for a non-zero alternate ref. pixel (APARM(1)) when using the
        RADIO velocity definition. Was also making the sideband
        correction twice in all cases.
        Moved nowhere.

 8229.  August 16, 1994       $SYSUNIX/OPTIMIZE.LIS       Pat
        For reasons as yet unknown, if FILL is optimized with Gnu C on
        Linux systems, FITTP cannot even write to disk.  Reduced
        optimization to squat.
        Moved nowhere, but may put in patch area...

 8230.  August 16, 1994       $QPGNOT/CVEL.FOR & CVEL.HLP     Phil
        Made the antenna based LO-offset array double precision. Also
        removed the code that switched the direction of the total-power
        spectra. It was under the control of the user and was
        superfluous since I now understand the sign conventions and have
        it right (famous last words!).
        Moved nowhere, will need to go into the patch area.

 8231.  August 19, 1994      Shifting routines          Phil
        In preparation for the bandpass correction for VLBA data I have
        moved all the velocity shifting routines from CVEL into the
        $APLNOT library. Routines are :
           ACSHFT, XCSHFT, WTSHFT - freq. shift total power, cross power
                                    and weight spectra
           DOPLR, CVLDOP - calulate velocities and interpolate in time
           DAYNUM, GEODLL, GETTIM, GETFRQ, VELPIX - utility routines to
                           get various pieces of useful information
           SPINTP - a spectral interpolation routine
           TRTOCF, TRTOCS - FFT spectra and cross-correlation function
                           to and from each other.
           DSHIFT - control the shifting
        Moved nowhere.

 8232.  August 19, 1994       $APGNOT/ANCAL.FOR               Athol
        Made the following changes in ANCAL: 1) mark negative system
        temperatures read from the KEYIN file as indefinite (would
        previously generate an FPE in attempting to apply these values);
        2) prevent interpolation with blanked values; 3) increased
        parameter MAXNX in TYCONS and introduced a check for array
        boundary errors (would previously generate an FPE); 4) constrain
        the task to update only the TY table it has created (would
        previously create a new TY table with the KEYIN file data but
        then consolidate TY 1 by adding source information).
        Outstanding problems: interpolates across source and fqid
        scan boundaries. Checked out again for further work.
        Moved nowhere.

 8233.  August 23, 1994       Single dish               Eric
        Changed to allow for compressed data (which was not checked and
        did not even try to work!):
        PRTSD   Cleaned up looping constructs, changed it to honor the
                requested first component (it used to subtract 1).
        SDGET   Init for uncompressing
        DGETSD  Changed to uncompress the data and to fix the
                addressing.  It did not select channels and IFs
                correctly.
        Moved to the patch area.

 8234.  August 23, 1994        SDGRD                    Eric
        New task to select and project single-dish data, sort them,
        weight them, and grid them into a cube.  It is a rewrite of
        SELSD, UVSRT, and GRIDR with some revised options.
        Moved to the patch area.

 8235.  August 24, 1994        Shifting routines           Phil
        Added the necessary variables to DCVL.INC to allow use of PSAP
        Q routines. Updated TRTOCF, TRTOCS, XCSHFT & DSHIFT to
        initialize and use the Q routines if FFT is a power of two.
        Moved them to the $QNOT area.
        Added the routines ISPRIM & PAD to $APLNOT to determine if a
        spectrum is a prime number and, if so, pad it to the next power
        of two so the PSAP routines can be used.
        Changed the level of routine messages in GETFRQ & FRQUPD so they
        can easily be switched off if desired.
        Moved nowhere.

 8236.  August 24, 1994          $QPGNOT/CVEL          Phil
        A much stripped down CVEL. SInce I've moved most of the routines
        out I had to change the way some of the internal bookkeeping is
        handled.
        Moved nowhere.

 8237.  August 24, 1994               $QPGNOT/BPASS        Phil
        Added a new ability to BPASS. If the data is from the VLBA
        correlator (recognized by array name string in AN table) then
        BPASS will remove the effects of the diurnal aberration
        introduced in the VLBA correlator model. The effect is to shift
        all bandpasses in frequency space back to the RF frequency at
        which they were originally recorded. This enables the bandpasses
        to be averaged in time before further shifting. Also modified
        the BPASS.HLP file.
        Moved nowhere.

 8238.  August 24, 1994        SDGRD inspired           Eric
        Changed:
        DIRCOS   It did not handle RA-RA0 > PI for full-sky systems like
                 AIT and GLS.
        LSTHDR   Changed format of ref pixel adding 4 digits.
        MSGHDR   Changed format of ref pixel adding 4 digits.
        PRTTP    Changed format of ref pixel adding 4 digits.
        SDGRD    Changed to do 16 planes at a time or fewer if the rows
                 are long and the support wide.  Changed to use DEC 0 as
                 the reference value for GLS, AIT, and MER systems.
        Moved SDGRD and DIRCOS to patch area.

 8239.  August 25, 1994              $APGNOT/FXPOL       Phil
        FXPOL will now reconstruct the IM table based on the changes in
        the polarization structure of the data. We needed this because
        the correlator group are currently unable to correct the output
        FITS data for dual polarization without a major rewrite of the
        software. Also updated the .HLP file.
        Moved nowhere.

 8240.  August 26, 1994         Single dish              Eric
        Changed PRTSD to display 0.1's of a second.  Installed Jeff
        Mangum's submitted task UVF, revised heavily by me, in
        $APLCONTR.  It has a C main program which can run stand-alone or
        as an AIPS task using a set of subroutines in UVFAIP.FOR.  It
        does require the fitsio package which is available on anonymous
        ftp from Bill Pence.
        Moved these to the patch area.

 8241.  August 28, 1994         $APGNOT/UVFLG           Leonia
        The new parameters in APARM have been installed.
        These parameters limit the range of amplitudes and weights of
        a visibility to be flagged or unflagged. This new option works
        only for a single source file.
        Moved nowhere.

 8242.  August 29, 1994        PRTUV, UVDIF            Eric
        Changed PRTUV to set phase to 0 for autocorrelations
        Changed UVDIF to check that antenna numbers are in range
        1-MAXANT, not 1-28 and to skip that test for singledish data.
        Moved nowhere.

 8243.  August 29, 1994        OTFUV                  Eric
        New task to read singledish data SDD format for on the fly
        mapping and convert it directly into an aips uv file.
        Moved to patch area.

 8244.  August 29, 1994        $APGNOT/SETJY            Phil
        Added the newly determined flux values for the source 1934-638.
        It is the primary flux calibrator for the ATCA. Also updated the
        .HLP file.
        Moved nowhere.

 8245.  August 31, 1994        $QPGNOT/BLCAL.FOR        Athol
        BLCAL did not set FACGRD, the factor used by VISDFT from
        DGDS.INC for scaling CC components. BLCAL could not divide
        by a CC model as FACGRD was zero. Set FACGRD to 1 in BLCMOD.
        Moved nowhere.

 8246.  September 1, 1994         $QPGNOT/FRING.FOR        Phil
        Changed the way in which delay searching is turned off. IFf
        the user does not want a delay determined then DPARM(2) should
        now be set to a negative number.
        Also updated .HLP file.
        Moved nowhere.

 8247.  September 1, 1994     $APLNOT/TABBP,BPINI,BPREFM      Phil
        In preparation for dealing with VLBA bandpasses I have renamed
        the IFFREQ column in the BP table - which I never used anywhere
        (that's foresight, eh!) - to CHN_SHIFT. It nows contains the
        number of channels the BP entry has been frequency shifted from
        its RF value. TABBP and BPINI needed to know about the change
        and BPREFM needed to update older tables.
        Moved nowhere.

 8248.  September 2, 1994       $INC/DANS.INC $APLNOT/GETANT     Phil
        Added the antenna numbers into an array (TELNO), they do not
        always correspond to the row number. Updated GETANT to get the
        information from the AN table.
        Moved nowhere.

 8249.  September 6, 1994        $APLNOT/BPREFM         Phil
        The error code from the call to TABBP was not being checked
        correctly. Only non zero positive values are real errors,
        negative values indicate some degree of flagging within the BP
        table. Taught BPREFM to deal with this and also return a more
        sensible error message.
        Moved nowhere.

 8250.  September 6, 1994        $YPGNOT/FRMAP         Leonia
        The new task FRMAP installed in $YPGNOT to provide fringe-rate
        mapping of spectral line sources.
        Moved nowhere.

 8251.  September 6, 1994        $QPGNOT/BPASS           Phil
        Some of the BP tables generated by VLBA data were too big for
        the buffer sizes allocated to the sorting routines. Changed.
        Moved nowhere.

 8252.  September 7, 1994         $YPGNOT/VBPLT          Phil
        The baseline selection was a real mess. I removed the flawed
        subroutine FILANT and replaced it with a much neater routine
        BASLST. This now works nicely. In addition, when averaging in
        time, the list of baselines to be averaged was being set up
        incorrectly, also fixed this.
        Moved nowhere.

 8253.  September 8, 1994         $APGNOT/UVFLG          Leonia
        Default value of new parameters APARM meant not to make
        flagging (unflagging). I change it to the opposite. Now if
        APARM = 0, the task does not pay attention to amplitudes or
        weights and works identicaly to old version.

 8254.  September 9, 1994             $INC/DSEL.INC       Phil
        Added 3 new variables to serve as BP table keywords. Needed for
        the VLBA bandpass corrections.
        Moved nowhere.

 8255.  September 9, 1994          $APGNOT/SNSMO         Phil
        The amplitude in the SN table for the 2nd polzn was being
        doubled when smoothing. Removed the offending code. Bill says
        there is a lot more trouble lurking in here so no doubt we'll be
        back.
        Moved nowhere.

 8256.  September 9, 1994        BP table changes         Phil
        Added 3 new keywords to the BP table, needed for the vlba
        bandpass corrections. Necessitated a change to the call seq of
        BPINI which of course meant changes to the following routines:
        BPREFM, BPFSEL, BPASET, TABLEUTIL, BPCOR, UNCAL, FITLD, BPASS,
        CVEL and POSSM.
        Moved nowhere.

 8257.  September 9, 1994         $YPGNOT/POSSM.FOR        Phil
        With VLBA bandpass tables I've added a 3rd dimension and so that
        requires an additional adverb to select the bandpass required
        when plottong the BP table. Added the adverb FQTOL to select the
        required shift, it is not invoked if data are non-VLBA, if VLBA
        data and FQTOL = -999, all bp anetries for an antenna are added
        together. FQTOL = 0 is a sensible choice. Also modified .HLP
        file.
        Moved nowhere.

 8258.  September 12, 1994          UVDIF                   Eric
        Found a test with an OR in it that caused it to ignore
        differences in flagging!  Changed the OR to an AND.
        Moved to patch area.

 8259.  September 12, 1994       UVLSF, UVLIN               Eric
        Changed the pre-cursor remarks and categories for UVLIN.HLP.
        Added to UVLSF the option to flag data based on the peak
        residual in the selected channels (for fitting a baseline) and
        on the rms in those channels.  UVLSF does not need the shift
        option of UVLIN since UVFIX now does it correctly.
        Moved nowhere.

 8260.  September 12, 1994         SPLIT                  Eric
        Removed statement which kept SPLIT from using an FG table on a
        single-source file.  Other cal programs will use one.
        Moved to patch area.

 8261.  September 12, 1994         $APGNOT/UVAVG.FOR      Athol
        UVAVG did not average random parameter INTTIM correctly; output
        values were substantially overestimated due to an initialisation
        error.
        Moved nowhere.

 8262.  September 13, 1994       CALIB, FRING, HORUS        Eric
        All  3 refused to apply flagging to single-source data sets and
        the firsrt two also turned off bandpass and gain calibration for
        such data sets.  This is pretty arbitrary, especially since
        dozens of other tasks do not do this.  So removed the3se
        arbitrary prohibitions.
        Moved to the patch area.

 8263.  September 13, 1994       $SYSUNIX/LINK              Pat
        The use of separate versions of LIBR.DAT for shared or non-
        shared libraries was not working correctly.  For Sun4, there
        are two files LIBR.DAT and LIBR.DAT.SHARED supplied, and if
        the installer selects the use of shared libraries, the former
        is renamed LIBR.DAT.UNSHARED and the latter to LIBR.DAT.  The
        generation of the list of libraries by LINK was not taking
        this into account.  It does now.
        Moved to the patch area.

 8264.  September 13, 1994   $APGNOT/SPCAL.FOR $HLPFIL/SPCAL.HLP  Athol
        New task for spectral line polarization feed calibration;
        assumes circular feeds and moderate linear polarization.
        Moved nowhere.

 8265.  September 14, 1994       $APGOOP/IMCLP              Bill C.
        New task to clip the range of values in an image.  Values
        outside of the range are replaced with the closest value inside
        the range.  Also IMCLP.HLP.
        Moved nowhere.

 8266.  September 14, 1994        SDGRD                   Eric
        Changed help and code to allow abs(weight) cutoff as well as
        weight cutoff.
        Moved to patch area.

 8267.  September 14,        $INC/DSEL.INC                  Phil
        Added a new array to keep track of the current frequency shift
        for each antenna.
        Moved nowhere.

 8268.  September 15, 1994         $INC/DCVL.INC            Phil
        Added some new variables to this include for use in another new
        subroutine that will soon be back in the system. Alos changed
        the name of some variables to avoid clahses with those in
        DSEL.INC. This necessitated changes in the following routines:
        CVLDOP, FRQUPD, GETFRQ, DSHIFT & CVEL.FOR.
        Moved nowhere.

 8269.  September 16, 1994         $APLNOT/GETTIM, $QNOT/DSHIFT    Phil
        Added CATBLK to GETTIM's call sequence, caused change in DSHIFT.
        Moved nowhere.

 8270.  September 16, 1994        $QPGNOT/BPASS              Phil
        Tidied up the BPASS code, had been experimenting with fanning
        out the bandpass entries over channel shift space and had left
        the inactive code in BPASS. Removed it and so BPASS now operates
        as described in change entry # 8237.
        Moved nowhere.

 8271.  September 16, 1994      $APLNOT/XCSHNQ, NQTOCF, NQTOCF    Phil
        Versions of $QNOT/XCSHFT, TRTOCF & TRTOCS that do not use Q
        routines. SInce VLBA bandpass correction is going to require
        FFT's and complex shifting (only occasionally in time) we need
        non Q versions of these routines to avoid having to shift the
        whole calibration system to $QPGNOT.
        Moved nowhere.

 8272.  September 16, 1994          $YPGNOT/POSSM.FOR          Phil
        Since I've changed slightly the implementation of the VLVA
        bandpass correction I no longer need to allow POSSM to select
        among the fanned out BP entries. So I've removed the FQTOL
        adverb added a while ago.
        Moved nowhere.

 8273.  September 16, 1994        ZFIO, OTFUV              Eric
        To enable ZFIO to read non-AIPS files it must be able to read
        the last bytes in a file even if they are < 1024 bytes.  Changed
        ZFI2.C to return error code 1000+n (n = # words read okay) in
        this case and changed ZFIO to zero out the remainder.  Changed
        OTFUV to use this return.
        Moved to patch area for SD people.

 8274.  September 16, 1994         SDGRD                  Eric
        Changed and corrected the blanking test to allow no blanking
        when there is no division (weight or convolution outputs) and to
        do blanking on the abs(weight) if so specified.  Also fix up
        help file to explain.
        Moved to patch area for SD.

 8275.  September 16, 1994         CONPL                   Eric
        New task: plots AIPS convolution functions in the upper half.
        In the lower it can plot the convolution of the upper function
        with a Gaussian.  Or, in the lower, it can plot the Fourier
        transform of the convolving function or the expected signal to
        noise for a uniformly sampled aperture.  These last two can be
        plotted as X, 1/X, or log(X) forms.
        Moved to patch area for fun.

 8276.  September 16, 1994         DBCON                  Eric
        DBCON insists on adding -SIN to the UU and VV parts of the
        random parameters.  This is not good for single dish data.  So
        fixed the addition to limit it to real uv data.
        Moved to patch area.

 8277.  September 17, 1994         TVFLG, SPFLG, IBLED, UVFLG    Eric
        Changed all 4 tasks to use FLAGVER even for single-source files,
        creating a flag table if needed and FLAGVER > 0.  They will
        write in a flag table if one already exists.  Only if fLAGVER =
        0 and no FG table exists will they actually flag the
        single-source data.  All help files too of course.
        Moved nowhere.

 8278.  September 19, 1994            $APGNOT/FITLD              Phil
        Added the ability to remove the FFT artifacts from total power
        spectra (they are washed out in the correlator from the
        cross-power spectra). At the moment that correction spectra
        (supplied by Chuck Broadwell) are hard coded into data
        statements inside FITLD, but after the correlator software
        revision is over they will be passed through the correlator as
        FA tables and applied by FITLD. A minor change was to skip to
        the end of a file being read if the time detected was > the
        timerange specified by the user.
        Moved nowhere.

 8279.  September 20, 1994           $YPGNOT/FRMAP             Leonia
        Installed the blank option for the source selection. Now if
        the source is identified as blank, the first source from the
        data is mapped. Additionnaly the information about maximum
        possible window size is printed now.
        Moved nowhere.

 8280.  September 20, 1994           $APGNOT/INDXR.FOR         Athol
        Increased array GEODLY in subroutine WRITCL. Subroutine
        GETDEL, which gets the VLBA correlator model from the IM
        table, was writing over the array boundary and corrupting
        other fields in the CL table created by INDXR. Also, now
        warns the user that CPARM(3) and CPARM(4) are ignored if
        CL#1 already exists.
        Moved nowhere.

 8281.  September 21, 1994	$APGNOT/FITTP.FOR		Dave
        FITTP was claiming to report the number of unflagged
        records in the CL table when in fact it was reporting
        the flagged records. Changed so it correctly reports
        the unflagged records.
        Moved nowhere.

 8282.  September 22, 1994       $YPGNOT/FRMAP.FOR         Leonia
        In a single source file the task (using standard subroutine
        GETSOU) did not recalculate RA and DEC on the observation
        time. As a result there was a small discrepancy between the
        single- and multi source files. I've written a new version
        of GETSOU - GETSO which recalculates RA and DEC to the
        apparent position. So now we have RAAPP and DECAPP for both
        single and multi source files.
        Moved nowhere.

 8283.  September 22, 1994              $APGNOT/SPLIT.FOR       Phil
        Stopped SPLIT from copying the IM, CT, MC & AT tables to its
        output file. They are not needed at that point.
        Moved nowhere.

 8284.  September 22, 1994          UVPRT                   Eric
        Added more flagging of data automatically in Holography mode: if
        W = 40000 or the previous W = 40000 and the current is 40001,
        then delete the sample.
        Moved to the AOC $LOAD area.

 8285.  September 22, 1994          ZDAOPN                   Eric
        Changed $APLUNIX ZDAOPN.C to attempt a read-only file open when
        the read write open fails for access privilege and non-exclusive
        use is requested.  This will fail later if a write is attempted
        but will allow read only privilege for reads.
        Moved to the patch area.

 8286.  September 22, 1994          DBCON                   Eric
        Changed it to skip the scaling of "U" and "V" for single-dish
        data.  This was shifting positions in an attempt to make channel
        1 the ref channel.
        Moved to the patch area.

 8287.  September 23, 1994        WFCLN                    Eric
        In the SUM mode it set NCHAV = BCHAN-ECHAN+1 (sigh..).  This
        negative number of channels was used to dimension arrays etc and
        things failed only down at the primary beam correction function
        which summed over no channels and divided by the 0 sum.  Also
        changed $QOOP/PBUTIL.FOR to avoid thhis 0 divide.
        Moved to the patch area.

 8288.  September 27, 1994    various $SYSUNIX scripts    Pat
	COMRPL and COMLNK were failing for routines compiled in the
        $APLCONTR area, as they assumed it was a valid AIPS area (it's
        under $AIPS_VERSION) but was not found in LIBR.DAT.  I've
        modified (hacked) COMRPL, COMLNK, FC, AIPSCC, SEARCH and LINK
        so they now recognise $APLCONTR as "different" and requiring
        an options file.
        Moved nowhere (yet).

 8289.  September 28, 1994     $APLPGM/PRTAB & $APGNOT/FITTP     Phil
        Both of these tasks had problems with the large spectral sizes
        of VLBA databases. One particular project has 4 IFs and 512
        spectral channels and was overflowing the declared buffers of
        4096 words. Increased them where approrpiate to 8192 words.
        Moved nowhere.

 8290.  September 30, 1994        $APGNOT/FITTP          Phil/Leonia
        The size of a buffer in subroutine EXTWRT was not enough for
        writing especially large tables. The parameter MXLREC  has
        been doubled.
        Moved nowhere.

 8291.  September 30, 1994       UVFLG                  Eric
        Corrected it to handle compressed data and to flag single-dish
        rather than always using an FG table.  Changed GETNAN to
        suppress the missing AN file message for single-dish data.
        Moved nowhere.

 8292.  October 1, 1994           TVCPS                 Eric
        Upgraded the help file and added an option to force the program
        to use portrait mode.  Changed the program to use landscape when
        that will fit the image better except when prohibited by the
        user.
        Moved nowhere.

 8293.  October 3, 1994         FITS tables                 Eric
        Changed DTHD.INC to allow for 128 columns - it limited us to 60.
        Changed TABHDR and TABHDK to check for the column limit
        intrinsic to AIPS of 128 and to return an error if too many
        requested.  Changed UVLOD, IMLOD and GSCAT to skip too wide
        tables.  Phil will get FITLD.
        Moved nowhere.

 8294.  October 3, 1994               $APGNOT/SNCOR          Phil
        Added a new option, CPRT, to copy the rates from one IF to all
        other specified IFs. Also changed SNCOR.HLP.
        Moved nowhere.

 8295.  October 3, 1994          $APGNOT/FITLD.FOR           Phil
        Added the option of selecting spectral channels from each IF.
        Ensured that, if the file expansion failed due to lack of disc
        space, FITLD dies elegantly.
        Added Eric's change from #8293 above.
        Updated FITLD.HLP to reflect channel selection change.
        Moved nowhere.

 8296.  October 4, 1994           $QPGNOT/FRING.FOR         Phil
        If no SBD delay search requested, force the solutions to really
        be zero so that phase offsets do not creep in.
        Moved nowhere.

 8297.  October 4, 1994           $APGNOT/SNCOR          Phil
        The fix I put in yesterday had a minor logic error in that it
        did not overwrite flagged rates in specified IFS. Fixed.
        Moved nowhere.

 8298.  October 5, 1994           $APGNOT/FITTP            Leonia
        This is a repeat of the same thing which me and Phill made three
        days ago. With misunderstood reason the version of FITTP which
        had existed before Phil correction (8289 Sept. 29) appeared in
        the CFA system.
        Moved nowhere.

 8299.  October 4, 1994              SDGRD                   Eric
        Changed $QPSAP QGRIDA to recognize a type 4 visibility and call
        a new routine QGRD5 to grid visibility data that have 0 for
        the imaginary part and for which the beam grid is returned in
        the imaginary part.  Changed SDGRD to invoke this, shaving about
        20% off the run and cpu times for the test data set.
        Moved nowhere so far - I intend to experiment more.

 8300.  October 5, 1994             TOUCH                    Eric
        Some major computational tasks may not read a SCratch file
        header often enough to keep its catalog time updated.  The VLA
        automatic TIMDEST was deleting SC files that were actually open
        and "locked" by another computer.  Since the AOC does not use a
        file locking that works over NFS, the lock did not prevent the
        deletion.  TOUCH will silently update all SC files in the DFIL
        common if the last call to it was more than 10 minutes ago.
        Changed APCLN, SDCLN, MX, and ($QOOP) QCLEAN to call it.
        Moved nowhere.

 8301.  October 6, 1994            SDGRD                   Eric
        Corrected bug introduced in 8299 leading to bad rows at the
        bottom of each frame.  Added code to do the problem in-core
        where possible.  Created new grod routine $QPSAP/QGRD6.FOR and
        revised help to explain new uniform weight options.
        Moved to patch area with 8299.

 8302.  October 7, 1994            UVMOD         Eric/Arie Grossman
        Subroutine BESJ was giving floating point errors for planet
        visibilities.  Replaced with BESJ1 from Numerical Recipes.
        There was a missing factor of 2 in the calculation of disk size
        which was also fixed so that BMAJ and BMIN are correctly the
        major and minor diameters.  Code submitted by Arie Grossman of
        the University of Maryland.
        Moved nowhere.

 8303.  October 11, 1994   $APGNOT/SHOUV.FOR  $HLPFIL/SHOUV.HLP  Athol
        VLBA tests required closure phases to higher than 1 deg precision.
        Modified SHOUV to print all phase quantities in decimal form if
        DPARM(3), the no. of digits per column, is sufficient (allowed
        range: 5-9). Toned down the max. allowed column width for amplitudes
        from 10 to 7 as the the single precision real rounding calculations
        were breaking down. Both amplitude and phase can now be printed to
        a maximum precision of ~6 significant digits. Changed the format
        of the scaling factor to avoid scaling information of the form
        "1000 = 0.0000 Jy".
        Moved nowhere.

 8304.  October 11, 1994    $QPGNOT/BLCAL.FOR                    Athol
        Add a warning message when appending solutions to an existing
        BL table; in response to a gripe.
        Moved nowhere.

 8305.  October	11, 1994         $APGNOT/SNCOR                Phil
        Added another option to SNCOR. This one is called 'CPSN' and is
        a generalization of 'CPRT', it will copy the whole solution from
        one IF to another within the SN table. Also modified .HLP to
        reflect this change.
        Moved nowhere.

 8306.  October 12, 1994             IMVIM                    Eric
        The call to GINIT requires the input parameter array returned by
        GTPARM, preferably with the defaults filled in by actual values.
        Fixed this plot task - it called GINIT with the character form
        of the first (HOLLERITH) variable in the parameter array.  Also
        changed it to fill in more of the defaults.
        Moved nowhere.

 8307.  October 13, 1994            SETJY.HLP                 Eric
        The last person to edit SETJY.HLP must have used an old version
        of the file - eliminating the changes I put in to allow users to
        reset a calcode to blank.  Put my changes back.
        Moved nowhere.

 8308.  October 13, 1994           UVLSF                    Eric
        Changed UVLSF and its help to allow for shifting the phase
        center before fitting the continuum and then shifting both back
        before writing them out.  It takes twice as long but it could be
        worth it.  UVLIN is still not obsolete since it does cutoffs
        with a different algorithm and offers a complete flagging report
        if so desired.
        Moved to the patch area since the CookBook will mention this.

 8309.  October 13, 1994           NEWPOS                    Eric
        Changed NEWPOS to handle checking of large angles differently.
        It had a test that made no sense and limited MER, GLS, and AIT.
        Also added a test that is sensible to MER.
        Moved nowhere.

 8310.  October 17, 1994           FRMAP                    Leonia
        Add a new option in FRMAP. Now it can do mapping using absolute
        values of fringe rates without referencing to a reference
        channel.
        Moved nowhere.

 8311.  October 19, 1994           EHEX, REHEX              Pat
        Two new shell scripts added to $SYSUNIX.  These convert from
        decimal to "extended" hex (base 36) and back, respectively.
        Moved nowhere.

 8312.  October 20, 1994        $APGNOT/UVAVG.FOR           Phil
        Added the adverb ZINC to the task. If ZINC is non-zero it specifies
        the pre-average time of the data thus enabling UVAVG to estimate
        how large an output file need be created. If ZINC is zero it
        reverts to its old ways. Also updated the helpfile.
        Moved nowhere.

 8313.  October 20, 1994             SDCLN                  Chris
        Fixed a bug in calling MAPOPN (name and class were passed as
        Hollerith rather than CHARACTER) that caused sporadic failures.
        Moved nowhere.

 8314.  October 20, 1994        $APGNOT/UVCOP             Phil
        Added the adverb NCOUNT to UVCOP. When selecting AC data only
        UVCOP would create an output file that could hold all selected
        AC and XC data, in these days of huge filesizes this is
        impractical. NCOUNT specifies the fraction of AC data to
        all data in order to limit the size of output file created.
        Moved nowhere.
 8315.  October 23, 1994        Number base               Eric
        Changed the basic numbering scheme in aips from hexadecimal to
        extended (base 36) hex.  This means we can now have 35 disks,
        1295 TVs, 46655 users (1, 2, and 3 digits, resp.).  Changed:
        To allow more tapes and disks -
            $INC/DDCH.INC
        To generate and understand base 36 -
            $APLGEN/ZEHEX   (new) to encode extended hex
            $APLGEN/ZHEX10   changed to do base 36 rather than 16
        The file name is to change, adding another digit in the version
        field and droppin the 1 of the ;1.  The following required
        simple changes for name structure and to use ZEHEX rather than
        ZHEX:
             $APLSUN/ZBKLD2    $APLSUN/ZBKTP2
             $APLIBM/ZBKLD2
             $APLUNIX/ZBKLD2   $APLUNIX/ZBKTP2
             $APLVMS/ZBKLD2    $APLVMS/ZBKTP2
        Limit checking changes with the change in base as well as
        calling ZEHEX rather than ZHEX:
             $APLVMS/ZMOUNT    $APLGEN/ZMOUNT
             $APLGEN/ZMOUNR    $SYSCVEX/SPACE
        Basic changes:
             $APLGEN/ZPHFIL    changed to do new names
             $APLGEN/ZPHOLV    changed to do either old or new names
        Changed to call ZEHEX rather than ZHEX were:
             $AIPGUNIX/ZSTRTB   $AIPNOT/TPMON     $APLCVEX/ZTPOPN
             $APLUNIX/ZBKLD1    $APLUNIX/ZBKLD3   $APLUNIX/ZBKTP1
             $APLUNIX/ZDIR      $APLVMS/ZBKLD1    $APLVMS/ZBKLD3
             $APLVMS/ZBKTP1     $APLVMS/ZBKTP3    $APLVMS/ZDIR
             $APLVMS/ZDOPRT     $APLVMS/ZFRE2     $APLVMS/ZMOUN2
             $APLGEN/ZIVSOP     $APLGEN/ZSTAIP    $APLGEN/ZTPOPN
             $APGNOT/FILLM      $APLSUB/LPOPEN    $APLSUB/OFMDIR
             $APLVMS/ZSHCMD (only partly changed - rest real hex)
        Changed to call ZEHEX rather than do their own hex conversions
        were:
             $AIPGUNIX/ZSTRTA   $AIPGVMS/ZSTRTA   $AIPSUB/AU2
             $AIPSUB/PRTMSG     $APLCRI/ZDCHIN    $APLCRI/ZIVSOP
             $APLDEC/ZTTOPN     $APL3090/ZDCHIN   $APL3090/ZTTOPN
             $APLVMS/ZACTV8     $APLUNIX/ZACTV8   $APLUNIX/ZTTOPN
             $APLGEN/ZDCHIN     $APLGEN/ZWHOMI    $APLSUB/BLDTNM
             $APLSUB/MSGWRT     $APLSUB/WHOAMI    $APLCONTR/UVFAIP
             $APL/DEV/ZIVSOP    $APL/DEV/ZSTAIP   $APL/DEV/ZMOUNR
             $AIPNOT/TPMON
             $APGNOT/LWPLA (drop large dim on ICHBUF too)
        Change version limits from 255 to 46655 in:
             $AIPSUB/AU3A       $AIPSUB/AU8       $AIPSUB/AU8A
             $AIPSUB/SGLOCA     $APLPGM/DISKU     $APLSUB/EXTINI
             $APLSUB/MADDEX     $APLSUB/MDESTR    $APLSUB/TABINI
             $QPGOOP/SCMAP      $QPGOOP/WFCLN     $QPGM/RSTOR
             $QYPGNOT/SDCLN     $QYPGM/APCLN
        Change device limits from 255 to 1295, user limits from 4095 to
        46655 in:
             $AIPPGM/FILAI2     $AIPPGM/FILAIP    $AIPPGM/FILINI
             $AIPPGM/SETSP      $AIPNOT/SETPAR    $AIPSUB/CATCR
             $APLSUB/CATDIR     $APLSUB/CATOPN    $APLSUB/IAMOK
             $APLPGM/PRTAC also parameterize and check counter sizes
        Correct sizes of DASSGN and TIMEDA and their support buffers in
             $AIPPGM/AIPSC      $AIPSUB/AU3A      $APL3090/ZDCHIN
             $APLCRI/ZDCHIN     $APLGEN/ZDCHIN     $APLPGM/DISKU
             $APLGEN/ZFREE   up buffers of disk values
        Moved to CIT and CfA inadvertently.

 8316.  October 23, 1994        New header parms            Eric
        Changed DHDR.INC and VHDRIN to define pointers:
            KRCOK  Code to indicate WCS parameters are usable
            KDLON  LONGPOLE value
            KDPRJ  PROJP1...PROJP9
            KRPCM  PC pixel conversion matrix (7 x 7)
        There are still 17 free words in the header!
        Moved nowhere.

 8317.  October 23, 1994        UPDAT                       Eric
        Dusted off the old format conversion program.  Changed it to
        convert from C to D with modern release names (none before the
        overhaul).  Uses ZPHOLV to find old and new names and then does
        a rename.  Added code to open all CB files, read record 1 and
        set the header values for the coordinates words.
        Moved nowhere.

 8318.  October 23, 1994        CLBOX                       Eric
        New adverb CLBOX - 50 clean boxes.  Changed POPSDAT.HLP and
        NEWPARMS.001 to define the adverb and created CLBOX help file.
        Changed help files named:
           APCLN     CXCLN    MX       SCMAP     SDCLN     WFCLN
           GREYS     REBOX    TKBOX    TKNBOXS   TVBOX     COMAP
           COMAP_UV  DDTSAVE  HYB      MAPIT     MAPIT_UV  POPSDAT
        Changed procedures to use CLBOX in $RUNSYS
           DDTLOAD.001    NEWPARMS.001    COMAP.001
           HYB.001        MAPIT.001
        Changed dimensions and names of BOX in fortran routines:
           $AIPSUB/AU5C   $YSUB/GRBOXS
           $QOOP/QCLEAN   $APLOOP/CLEAN
           $QYPGM/APCLN   $QYPGNOT/SDCLN     $QYPGNOT/MX
           $QPGOOP/CXCLN  $QPGOOP/SCMAP      $QPGOOP/WFCLN
           $YPGM/GREYS
        Moved nowhere.

 8319.  October 23, 1994       LIBR.DAT                     Eric
        On SUNS at least LIBR.DAT needed updating for $APLPGM.  A final
        pass of APLSUN/SUBLIB is now required - apparently I changed
        something that used to pick up zptbit and zgtbit earlier in the
        link.  Sigh...
        Moved nowhere.

 8320.  October 24, 1994         LIBR.DAT                    Eric
        The link lists for YPGNOT, QYPGM, QYPGNOT, QPGNOT, and QPGM
        required another reference to APLSUN in the $SYSSUN version for
        some - not all - programs.
        Moved nowhere.

 8321.  October 24, 1994         CATINI                       Eric
        Created a subroutine CATINI which 0's and blank files an image
        header and puts 1's for the PC matrix diagonals, coordinate
        increments, reference pixels, and number of ppixels.  Changed
        UVLOD, IMLOD, FILLM, MANDL, PATGN, UVFIL, and CANDY to use it.
        Moved nowhere.

 8322.  October 24, 1994         Unused ...                   Eric
        Changed due to warnings in mass compile:
        MCUBE   A common was - 1 place - not the same length as the
                rest - not really a problem.
        TAFFY   Put the OLD header in a common without regard for the
                alignment (which was off).  This was bad.
        Also removed unused variables in
        AHIST   HISEQ  PRTCC  TASAV   TRANS   UVLSF   XSMTH   XSUM
        Moved nowhere.

 8323.  October 25, 1994        More unused                   Eric
        Removed unused variables from:
        $AIPGUNIX/ZSTRTB  $AIPSUB/TBHEAD  $QPSAP/QCSQTR
        $QPSAP/QFINGR     $QPSAP/QGASUB   $QPSAP/QGRD1
        $QPSAP/QGRD2      $QPSAP/QGRD3    $QPSAP/QGRD4
        $QPSAP/QINTP      $QPSAP/QMAKMS   $QPSAP/QMENT
        $QPSAP/QPTDIV     $QPSAP/QSPDIV   $QPSAP/QSPSUB
        $QPSAP/QUVIN      $QPSAP/QVINDE   $QPSAP/QVTRAN
        $QSUN/QCLNSU      $QNOT/APWRIT    $QNOT/CONV1
        $QNOT/CONV2       $QNOT/CONV4     $APLNOT/BLREFM
        $APLNOT/BPINI     $APLNOT/FILSWP  $APLNOT/VMBLKD
        $QPGNOT/CALIB     $YPGM/BLANK     $YPGM/BLSUM
        $YPGVDEV/TVMON    $YPGNOT/IMLHS   $YPGNOT/TVHLD
        $AIPGUNIX/ZSTRTB  $APGNOT/ADDIF   $APGNOT/ASCOR
        $APGNOT/CCMOD     $APGNOT/GEOM    $APGNOT/GLENS
        $APGNOT/IMFLT     $APGNOT/IMMOD   $APGNOT/NINER
        $APGNOT/NNLSQ     $APGNOT/POLCO   $APGNOT/REMAG
        $APGNOT/RGBMP     $APGNOT/SHADW   $APGNOT/STFUN
        $APGNOT/SUMSQ     $APGNOT/TBIN    $APGNOT/TBOUT
        $APGNOT/WARP
        Changed the include file DWXV.INC and the call sequences of
        $APLNOT WXINI WXIO and WXTAB to eliminate a pile of unused
        variables.  Of course, it looks as if WX itself is unused.
        Raised buffer sizes in BLANK and BLSUM.  ASCOR and SHADW both
        had a CATBLK-like variable ina common, not on a correct
        boundary.
        Moved nowhere.

 8324.  October 25, 1994          CALIB                      Eric
        Corrected a bug: the loop that averaged the observed gains was
        done over all frequency channels (ECHAN-BCHAN+1) rather than
        only over all IFs.  This caused addressing problems.
        Moved nowhere.

 8325.  October 27, 1994          LIBR.DAT                   Pat
        Essentially the same changes as Eric made in #8320 above, but for
        the Solaris and Linux versions.  Had to hit APLPGM as well.
        Moved nowhere.

 8326.  October 26, 1994           UPDAT                     Eric
        Added the ability to handle missing and 0-length CB files,
        fixing the CA file entry for them and closing all open files to
        allow the program to continue.
        Moved to IBM immediately.

 8327.  October 26, 1994         IBM complaints               Eric
        TVCPS   Error in FORMAT - X with no number.
        PLCUB   Lower case in code
        BLANK   Comma missing in FORMAT.
        VLBIN   TAB characters.
        UVNOU   TAB characters.
        UVLIN   TAB characters.
        SBCOR   TAB characters.
        MODVF   TAB characters.
        AFILE   List-directed IO to string.
        FRMAP   Comma missing in FORMAT.
        CLPLT   Comma missing in FORMAT.
        HLPB    String length on initialization.
        SWPOL   Comma missing in FORMATs, removed SAVEs of COMMONs and
                declared them in the MAIN (the SAVE is required if the
                COMMON is not at a high level, but upsets the IBMs)
        SETAN   String length on initialization.
        PRTAN   Comma missing in FORMAT.
        FFTV2   Commons initialized in DATA.
        SNINI   String lengths.
        Moved nowhere.

 8328.  October 26, 1994        HOLGR, FFT                Eric
        Changed for the 2nd time the subroutine named FFT.  We cannot
        have one named the same as a task.  Its new name is FFTMC and
        changed HOLGR to call it by that name.
        Moved nowhere.

 8329.  October 27, 1994      IAND, IOR, IEOR             Eric
        Fortran compilers think they know what IAND, IOR, and IEOR are
        and that is illegal for the way we use these routines (which we
        actually provide).  So change all references to them to ZAND,
        ZOR, and ZEOR, create $APLGEN Z routines of these names (in C),
        and $APLVMS routines in Fortran.  Subroutines changed:
        $AIPSUB/AU1A     $AIPSUB/AU5      $AIPSUB/AU6
        $AIPSUB/AU6B     $AIPSUB/AU6C     $APLCRI/ZR64RL
        $APLSUB/DECBIT   $APLSUB/DWRITE   $APLSUB/RANDUM
        $APLSUB/TKCURS   $YDEA/YGRAPH     $YDEA/YIMGIO
        $YDEA/YLUT       $YDEA/YMKCUR     $YDEA/YSCROL
        $YDEA/YZOOMC     $APL3090/ZR32RL  $APL3090/ZR64RL
        $APLVMS/ZSHCMD   $APLVMS/ZTAP2    $APLVMS/ZTKFI2
        $APLVMS/ZTPWA2   $YGEN/YCHRW      $YGEN/YCOVER
        $YGEN/YCUCOR     $YGEN/YCURSE     $YGEN/YFIND
        $YGEN/YLOCAT     $YGEN/YLOWON     $YGEN/YSLECT
        $YSUB/TVFIND     $YIVAS/YBUTON    $YIVAS/YCHRW
        $YIVAS/YCUCOR    $YIVAS/YCURSE    $YIVAS/YGRAPH
        $YIVAS/YIMGIO    $YIVAS/YLUT      $YIVAS/YOFM
        $YIVAS/YSCROL    $YIVAS/YSPLIT    $APLGEN/ZGTBIT
        $APLGEN/ZR32RL   $APLGEN/ZR64RL   $YM70/YCUCOR
        $YM70/YCURSE     $YM70/YSCROL     $YM75/YSCROL
        $YIIS/YGRAPH     $YIIS/YIMGIO     $YVTV/YFIND
        $YVTV/YLOCAT     $YVTV/YSLECT     $YSS/YIMGIO
        $YSS/YSCROL      $YSS/YSPLIT
        Moved nowhere.

 8330.  October 27, 1994      IAND, IOR, IEOR             Eric
        Fortran compilers think they know what IAND, IOR, and IEOR are
        and that is illegal for the way we use these routines (which we
        actually provide).  So change all references to them to ZAND,
        ZOR, and ZEOR and changed tasks:
        $APGNOT/FILLM     $APGNOT/IMLOD      $APLPGM/PRTTP
        $APLPGM/SAD       $APLPGM/CPYRT      $APLCONTR/TVFLM
        $APLCONTR/WSLOD   $YPGM/BLANK        $YPGM/BLSUM
        $YPGM/TVRGB       $YPGNOT/IBLED      $YPGNOT/TVCPS
        $YPGNOT/SPFLG     $YPGNOT/TVFLG
        MOved nowhere.

 8331.  October 27, 1994       unused                 Eric
        Suns think that variables that are declared and DATAed are
        "used" even if they are not.  Linux knows better.  Inconsistent
        call sequences are also pointed out.  These are usually okay,
        but a nuisance worth fixing usually.  Changed only those files
        that seemed to have IOR, IAND or IEOR in them:
        $AIPSUB/AU1A    $AIPSUB/AU6B     $AIPSUB/PRTMSG
        $APLSUB/TKCURS  $QOOP/QCLEAN     $YGEN/YCOVER
        $YSS/YIMGIO     $AIPPGM/BATER    $AIPPGM/GRIPR
        $APGNOT/CANPL   $APGNOT/DBCON    $APGNOT/FILLM
        $APGNOT/GEOM    $APGNOT/HGEOM    $APGNOT/IMLOD
        $APGNOT/LGEOM   $APGNOT/LWPLA    $APGNOT/MK3IN
        $APGNOT/PGEOM   $APGNOT/SLICE    $APGNOT/TXPL
        $APGNOT/STRAN   $APLPGM/PRTPL    $APLPGM/PRTTP
        $APLPGM/QMSPL   $APLPGM/TKPL     $APLPGM/XSMTH
        $APLPGM/SAD     $APLPGM/CPYRT    $QYPGNOT/MX
        $QYPGNOT/SDCLN  $QYPGM/APCLN     $YPGM/BLANK
        $YPGM/BLSUM     $YPGM/TVRGB      $YPGM/TVPL
        $YPGNOT/IBLED   $YPGNOT/SPFLG    $YPGNOT/TVFLG
        MK3IN: One of the inconsistent call sequences was an error,
               leading to bad seconds in a time string.  Dropped the
               SAVEing of labeled commons in MK3IN, declaring them in
               the MAIN.
        SAD:   changed a typo in a column name and added a REVISION
               keyword with current value 3.
        MX:    one of the header block saves and restores only did the
               first half - a holdover from the code overhaul!
        Moved nowhere.

 8332.  October 27, 1994      GREYS              Gustaaf/Eric
        The slice plotting routine never worked.  It used parts of the
        name advers for the corners.
        Moved nowhere.

 8333.  October 28, 1994     $APGNOT/CLCOR.FOR    Leonia
        As I've discovered just recently VLA and VLBI have different
        system of coordinates for their antennas. X axis is located in
        Greenwich meridian for VLBI for VLBI antennas and in local
        meridian for VLA antennas. The subroutine ANTPOS calculated
        local hour angle before February 1994 when I changed it for
        the Greenwich hour angle. So the programm calculated correctly
        correction for VLA's antenna position and incorectly for VLBI's
        before the February and vice versa after the February. I've
        instaled the new parameter CLCORPRM(7) which distinguish VLBI
        and VLA.
        Moved nowhere.

 8334.  October 31, 1994    $YPGM/UVHGM.FOR       Leonia
        The task has been terminated with arithmetic esception in all
        options. I fixed it.
        Moved nowhere.

 8335.  October 31, 1994                 MX                     Eric
        Certain summing arrays were too small for averaging across a lot
        of channels/IFs.  Raised them to MAXCIF size (from 128 - a
        factor of 64).
        Moved nowhere.

 8336.  November 1, 1994        $APGOOP/DTSUM.FOR          Leonia
        I have increased the number of digits in integration time print
        and added print of number of 131072 microsec intervals producing
        the integration time.
        Moved nowhere.

 8337.  November 1, 1994          ZCREA2                      Eric
        None of the versions of this cleared the buffer that they wrote
        to disk.  So it has been non-zero for a long time.  Changed
        adding a memset call in versions $ALPUNIX, $APLBERK, $APLIBM,
        $APL3090, $APLDEC, $APLULTRX, and $APLSGI.
        If massive updates are to be done INSTEP2 should not be used.
        It caused the COMRPL.UPD file to point at APLSUN which is then
        ignored by IBM's.  So ZDCHI2.FOR was not recompiled and hence
        set NTAB3 = 0 (no maps allowed)!  Whole system needs relinking
        for ZCREA2 fortunately.
        Moved nowhere.

 8338.  November 1, 1994           SDGRD                      Eric
        Corrected the gridding - it forgot to rezero the array processor
        summing areas for later passes.  Therefore, if more than one
        pass was required to do all the channels, the later channel
        images contained ghosts of the earlier channels.  Halloween I
        guess.
        Moved to the patch area.

 8339.  November 2, 1994            KNTR                     Eric
        Changed the labeling to put numbers on all left edge vertical
        axes but letters only once and to put numbers on every other
        bottom axis with letters only once.
        Moved nowhere.

 8340.  November 3, 1994          CALIB, SNPLT                 Eric
        The mean gain modulus was being computed wrongly by CALIB.  It
        was computed separately for each sub-array and the last
        sub-array's value was written to the table.  Moved the summimg
        parameters to common, set them to zero in the init routine, and
        let it keep summing throughout.  SNPLT was multiplying by the
        mean gain when it should have been dividing.
        Moved to the patch area.

 8341.  November 4, 1994             CookBook                 Eric
        Rewrote Chapter 10 of the CookBook using Gustaaf's draft for
        guidance.  Added $AIPSFIG figures KNTR.PLT and TVCUBE.PLT.
        Updated the table of contents COOK0.TEX for chapter 10 and to
        add tables of figures and recipes.
        Moved to the WWW area.

 8342.  November 4, 1994            $APGNOT/VBGLU            Phil
        VBGLU was telling the users that parameter MAXBAS neede to be
        increased. It was and VBGLU then worked....except when I
        originally wrote this beast I forgot to glue together the SU
        tables from the input files. Fixed this up and tidied up the
        GLUTAB routine to deal with tables without a time axis.
        Moved nowhere.

 8343.  November 4, 1994       $APLNOT/SPINTP.FOR           Phil
        SPINTP was overwriting the input weight array with the corrected
        weights rather than overwriting the output weight array. Fixed.
        Moved nowhere.

 8344.  November 4, 1994       $APGNOT/MFPRT.FOR            Leonia
        The task printed an additional wrong collumn and as result there
        was there was a confusion in output table. The reason is that
        there is an additional column (after column #2 in the table MF)
        which is not needed to print. It is not clear whether this
        extraneous column had existed ever or it s a result of recent
        modification.
        Moved nowhere.

 8345.  November 7, 1994          OTFUV                     Eric
        Changed help and program to allow for concatenation, say of
        multiple IFs.
        Moved to patch.

 8346.  November 8, 1994  TVDEVS.KLUDGE,START_AIPS,START_TVSERVERS   Pat
        Created a "hook" version of TVDEVS.SH called TVDEVS.KLUDGE
        that will call the appropriate (TST/NEW/OLD) version of
        TVDEVS.SH depending on VERSION.  Modified START_AIPS so that
        when it calls START_TVSERVERS via a remote shell, it passes
        the version (TST/NEW/OLD) to it, and finally modified
        START_TVSERVERS to use this version.  This is to ensure that a
        TST version of AIPS does not start the TV servers via a shell
        script that defaults to NEW.
        Moved nowhere, but info mailed to the AOC this date.

 8347.  November 8, 1994         SETPAR                     Pat
        Modified some of the limits on the parameters, in particular
        the limit of 15 TV's.
        Moved nowhere.

 8348.  November 8, 1994         $APGNOT/UVCOP.FOR          Athol
        UVCOP was not always copying the tables it has to correct
        for frequency selection due to a bug in calling MULSDB in
        subroutine ESTSIZ. This bug exists in NEW but not OLD so
        has been around for a while.
        Moved nowhere.

 8349.  November 8, 1994           ZMOUNT                   Eric
        Changed an error message in TPMON and an index error in ZMOUNR
        which was causing the wrong tape number to be passed on
        dismounts.
        Moved nowhere.

 8350.  November 8, 1994            SAD                     Eric
        Added keyword REALRMS to MF table.
        Moved nowhere.

 8351.  November 8, 1994            OTFUV                  Eric
        Corrected setting of times to base them on the date in the
        output file header (when concatanating) and to allow an optional
        addition of integer days to the time.
        Moved to patch.

 8352.  November 8, 1994            MFPRT                   Eric
        Fixed it to handle missing MF files with some grace, to get the
        fit channel from the table column 1.  Changed adverb names in
        help file.
        Moved nowhere.

 8353.  November 9, 1994     SNSMO in APGNOT               Chris
        SNSMO now smooths phases rather than real and imaginary
        components.  This should preserve the phase differences
        between IFs better than before.
        Moved nowhere.

 8354.  November 13, 1994        SDGET, UVFLG               Eric
        When I tried flagging single-dish data with a FG table there
        were problems.  Someone added parms to DSEL.INC and employed
        them in flagging without adding them to SDGET (just UVGET).
        Copied a bunch from UVGET.  And UVFLG decided to add 300 lines
        to the FG table for each flag command to allow for 300 sources
        all number 0.  Changed this too.
        Moved to patch area.

 8355.  November 14, 1994        SYSETUP                    Pat
        Fixed the bug in SYSETUP that caused it to add a gazillion IC
        and ID files unnecessarily.  It now works as advertised.
        Moved to the patch area today.

 8356.  November 14, 1994         VLBA bandpass subsystem       Phil
        Numerous changes:
        1) DCVL.INC: Removed unused variables, declared AVDELI
           correctly.
        2) CVLDOP.FOR: tidied up variable useage.
        3) FRQUPD.FOR: added CATBLK to call sequence, determined #IFs
           internally from CATBLK.
        4) GETFRQ.FOR: added FRQSEL to call sequence, determined #IFs &
           reference frequency internally from CATBLK.
        5) DSHIFT.FOR: added FRQSEL to call sequence, changed call seqs
           to GETFRQ & FRQUPD, call TPSHFT now instead of ACSHFT.
        6) New routines: $APLNOT/DETRAT - determines natural fringe rate
                         wrt Earth centre.
                         $APLNOT/TPSHFT - shifts total power spectra
                         with optional hanning smoothing.
                         $APLNOT/BPSHFT - shifts bandpass spectra a
                         given amount, to be used in DOBAND routines.
        7) BPASS.FOR: removed clumsiness with catalogue headers in
           shifting routines, ensured source number available for first
           record, changed call seqs for routines above, removed the
           initially very clumsy code to determine frequency shifts -
           replaced with simple routine DETRAT, use TPSHFT with
           smoothing instead of ACSHFT, write max shift for given
           antenna into the BP table in CHN_SHIFT columns.
        8) CVEL.FOR: ensured shift info from BP tables passed through
           cleanly, ensured source number available before first call to
           DETRAT, recognize VLBA data, add all the bandpass shifting
           routines as implemented in DATBND.
        Moved nowhere.

 8357.  November 15, 1994           IMEAN                     Eric
        Added code to fit and display the noise bump in the histogram,
        attempting to get the noise (true rms and noise mean).  Added
        comment to the help file on this.
        Moved nowhere.

 8358.  November 15, 1994            SDGRD                     Eric
        Fixed bug that led to 0 coordinate increment on the frequency
        axis.  Basically I set BIF to 1 if there is no IF axis.
        Moved to patch area.

 8359.  November 15, 1994           OTFUV                      Eric
        It would be nice if single dish data formats were documented
        correctly (or even at all).  The "RA offsets" recorded with
        on-the-fly data turn out to be real angles on the sky, not RA
        offsets.  Actually, even that is not quite true.  To get a real
        RA one adds the ra offset divided by the cos of the central DEC
        to the central RA.  Sigh....  All data handled through OTFUV
        (and UVF) are hereby declared null and void.
        Moved to the patch area.

 8360.  November 16, 1994           $APLNOT/DATCAL.FOR     Athol/Bill
        BLPNT was not correctly incremented in loop 300 for the case
        of single-polarization, multi-IF data. Baseline-based
        correction factors in this case were always taken from IF.1
        and were incorrect for higher numbered IFs.
        Moved nowhere.

 8361.  November 16, 1994        MANDL, etc                Eric
        Moved the CATINI call in MANDL, PATGN, and CANDY to after the
        GTPARM call.  The user number was 1 otherwise.
        Moved nowhere.

 8362.  November 17, 1994          $APGOOP/DTSUM.FOR          Phil
        DTSUM was not working on the Solaris machines here at the AOC.
        The problem was caused by the call sequence to UVDGET At one
        point in DTSUM one of the output parameters contained a DATA'd
        variable and so UVDGET could not overwrite it. Obvioulsy SunOS
        and other compilers allow this.
        Moved nowhere.

 8363.  November 17, 1994          $APLSOL/ZMOUN2.C          ERic
        Added some new device type codes to recognize for better monted
        messages.
        Moved nowhere.

 8364.  November 18, 1994          SETSP                     Pat
        Made two significant changes and a few minor ones.  The minor ones
        involved changing some limits that needed it.  The first major
        change was to have it read HOSTS.LIST intelligently to retrieve
        the list of hosts to process, and also to use that to figure out
        the names of the SP files.  Done with backwards compatibility; if
        this is compiled with 15JUL94 or older, it should work with the
        "C" format data.  The second major change was to allow looping
        through the hosts, changing a given item to a different value for
        each host.  This is very useful when you want to make an "almost"
        global change where many of the hosts will have the same value,
        but not all.  There are still some bugs (not *all* mine I think
        either...) For example, if you run it on a host with a built-in
        2nd AP size of 1216, you won't be able to exceed this for a host
        with a larger value (running on a sun trying to set it for a big
        IBM/AIX system).  Also, it does not elegantly handle TIMDEST
        parameters, but that bug manifested itself in a portion of the
        code that I don't think I changed, and it's not too relevant since
        those parameters are overridden by the info in NETSP.  We should
        now be able to can the SPLIST file.
        Moved nowhere, thinking about a patch...

 8365.  November 18, 1994        BLING and BLAPP            Chris
        BLING and BLAPP have been substantially rewritten to improve
        their reliability and additional information has been made
        available in the BS table.  The operation of the new programs
        is described in AIPS memo 89.  PUVD.INC, BSINI.FOR, TABBS.FOR
        and TABLEUTIL.FOR have been updated to support the changes.
        Moved nowhere.

 8366.  November 21, 1994       $YPGNOT/VPLOT            Leonia
        VPLOT is a new faster version of VBPLT. The code of the task
        has been tidied up to simplify the original one written by
        many people and as a result being too complicated. A new option
        (plotting both amplitude and phase) has been added. The sign size
        depends now upon the number of plots on the page. This size is
        inversly proportional now to square root of the number of plots
        on the page. The labeling of Y axis had been missed during
        modifications of VBPLT. It has been restored.
        Moved nowhere.

 8367.  November 21, 1994         $QPGNOT/BPASS.FOR          Phil
        The shifting routine installed for VLBA data had a bug in that
        if any spectrum for an IF was totally flagged the average weight
        was divided by zero. Fixed. Also tidied up a little to avoid
        repeating operations that only needed doing for the first
        visibility.
        Moved nowhere.

 8368.  November 21, 1994          $APGNOT/FXPOL.FOR        Phil
        FXPOL did not attempt to deal with FG tables - 'twas an
        oversight. It now does the correct thing to them.
        Moved nowhere.

 8369.  November 21, 1994            $APGNOT/UVCOP.FOR        Phil
        Speeded up UVCOP considerably for some cases. In the ESTSIZ
        routine if no source was selected then an output file of the
        same size as the input file was created for copying, ignoring
        any other selection criteria. Now if timerange or FREQID is
        selected and no particular source is selected then ESTSIZ used
        the NX table to determine the size of the output file.
        Also UVCOP now takes advantage of the fact that data are sorted
        TB. If that is so and timerange is selected then if the current
        sample time is > than the stop time it jumps to the end of the
        copying routine.
        Moved nowhere.

 8370.  November 21, 1994           BLING                Chris
        Drastically reduced the size of the executable by sharing some of
        the scratch arrays in COMMON.  Also replaced some inappropriate
        calls to RFILL with more appropriate calls to DFILL.
        Moved nowhere.

 8371.  November 22, 1994          Pulse cal tables          Phil
        Extended the definition of the pulse cal table to include the
        state counts. That is the time that the sampler spends in one of
        the 4 states when 2-bit mode is in use. Updated DPCV.INC, PCINI
        and PCTAB. Will be using these routines soon.
        Moved nowhere.

 8372.  November 22, 1994          BLING                Chris
        Added missing TYPE arguments to QPUT.  Rather surprisingly,
        missing these off caused no problems most of the time but
        gave rise to sporadic segmentation faults.
        Moved nowhere.

 8373.  November 22, 1994         MOVE                  Eric
        New task to move or copy a catalog slot's worth of file to
        yourself or some other user.  Move is done on the same disk,
        deleting your copy.  Fixed error message in CATDIR.
        Moved nowhere.

 8374.  November 23, 1994         misc                  Eric
           Changed MOVE to default OUTSEQ = 0 to highest+1 and use -1 to
        mean INSEQ.  Added messages on each file moved or copied.  Fixed
        it to loop over all extensions.
           Fixed OTFUV to compare axis types correctly for
        concatenation.  It had left out KHCTP and hence did the first
        words of the header including date-obs and the like.
        Moved OTFUV to the patch area.

 8375.  November 27, 1994       MOVE and ZAP            Eric
        Corrected MOVE to set the new user number into the image header.
        Images were still partly owned by the old user number!
        Changed AU3 and ZAP.HLP to use the user number in file deletion.
        Otherwise, files stored under odd user numbers cannot be
        deleted.  This caused my 1000000+ APCLN to be zapped!  Changed
        MDESTR as well - it also prohibited this.  Now it prohibits this
        only on public catalogs.
        Moved nowhere.

 8376.  November 28, 1994           FRING              Chris
        Corrected a logic error in the handling of scans from the
        index table.  FRING was setting the scan duration to the
        larger of SOLINT and the duration from the NX table where
        it should have retained the latter.  This lead to errors
        in calculating the scan boundaries and would cause scans
        where the source number changed to be split unexpectedly.
        Moved nowhere.

 8377.  November 30, 1994        PC routines          Phil
        Changed the cable-cal variable from s.p -> d.p. We store it as
        seconds but its typically a picosecond value so want to keep
        full precision.
        Moved nowhere.

 8378.  November 30, 1994          SUBIM                 Eric
        Changed it to warn about but not delete constant images.  It
        still deletes ones that are fully blanked.
        Moved nowhere.

 8379.  November 30, 1994        INDXIN, DATGET           Eric
        When an index table entry has no samples, the loop range over
        vis becomes N to N-1.  This causes UVGET to quit when doing an
        INIT if that is the first scan otherwise selected and is a silly
        waste of time in all cases.  Changed INDXIN and DATGET to skip
        empty index entries.
        Moved nowhere.

 8380.  November 30, 1994          GETDEL              Tony Beasley/Phil
        The original version of GETDEL took IM values and interpolated
        them onto the finer time grid of the CL table by looking for the
        nearest IM entry to the CL entry and perofroming either a
        forward or backward shift of the IM polynomial. John Benson
        tells us that only forward shifts should be done so the routine
        was modified to do this. Also avoids the majority of the
        problems that were causing the CL table to have some zeroed
        entries for the total model. Some cases still occur but this is
        due to the correlator not providing an IM entry before the first
        data point. Benson is looking into this.
        Moved nowhere.

 8381.  November 30, 1994            IBLED                    Eric
        Added a bit of time (min of 0.5 sec and 0.05 * DELTIM) =- to the
        time range for flagging.  Round offs were getting us otherwise.
        Moved nowhere.

 8382.  December 1, 1994            BPASS                    Phil
        Ensured that the solution interval written into the BP table was
        never zero. BP values will not be applied if this is the case.
        Should never happen but we had a user trying to generate a BP
        table with data from one time stamp only and the time range for
        that is, of course, zero.
        Moved nowhere.

 8383.  December 1, 1994         $APLNOT/GETFQ.FOR           Phil
        GETFQ relied upon UVGET having been run before it to set up some
        catalogue indicies. Fixed so that it calls AXEFND internally to
        avoid this problem.
        Moved nowhere.

 8384.  December 2, 1994           $APLNOT/PCTAB             Phil
        Fixed an indexing error in the state counts loop.
        Moved nowhere.

 8385.  December 5, 1994           $YPGM/PCNTR               Pat
        Changed INPRMS in the GTPARM call from 87 to 85 as per bug
        report from David Titterington.
        Moved nowhere.

 8386.  December 5, 1994        New task: $APGNOT/PCLOD         Phil
        PCLOD is a new task to read the ascii format pulse-cal tables
        generated from the VLBA monitor system. It reads in the
        pulse-cal, cable cal and state count data into a PC table.
        Also a helpfile.
        Moved nowhere.

 8387.  December 5, 1994	$APGNOT/SNCOR.FOR		Dave
	The XFER option was not working correctly, and likely never
	has. Changed some array arguements in subroutine XFER.
	It also looks like antennas to be changed have to be
	specified individually in ANTENNAS (ie ANTENNAS=0 does
	not do all of them), but I'll look into that later.

 8388.	December 5, 1994           SAD                      Eric
        The histogram computation had a problem when the untrue rms was
        too large compared to the true one (i.e., the peak was too
        narrow).  Widened the histogram and covered up the failure.
        The routine to gues more than one peak in an island did not
        check for blanked pixels.  This led to an island with 4 INDE
        components.
        Moved nowhere.

 8388.	December 5, 1994           POSSM                     Phil
        Added a couple of informative lines to the plots, re bandpass
        corrections and application of CL tables. Removed the annoying
        message that appeared when plotting a subset of IFs from a
        dataset.
        Moved nowhere.

 8389.  December 5, 1994           IMEAN                        Eric
        Changed IMEAN's handling of the fit for a noise rms.  There are
        too many divergent cases to do the blind histogram.  Added 2
        adverbs to let the user estimate mean and rms in advance
        (IMSTAT, say).  If PIXSTD is 0 it does two passes reading the
        data using the rms found in the first pass to set the parms of
        the histogram for the second.  If PIXSTD < 0, it skips the noise
        estimation.
        Moved nowhere.

 8390.  December 5, 1994           GALPOL                        eric
        This subroutine put out a message about epoch at every call -
        say 10**6 times in a big hgeom!  Killed the stupid message,
        relinked HGEOM.  Called by COORDT.
        Moved nowhere.

 8391.  December 6, 1994          SPLIT                      Phil
        Quick change to ensure it does not copy the PC table through to
        the output single source file.
        Moved nowhere.

 8392.  December 6, 1994           WFCLN             Tony Beasely/Eric
        Changed WFCLN and its help to add an INFILE option to define
        clean boxes for all 16 windows as needed.  Needs standardizing.
        Moved nowhere.

 8393.  December 6, 1994           MOVE                   Eric
        This tar baby won't go away.  Fixed 2 places that needed user
        number set to output user.
        Moved from the AOC.

 8394.  December 6, 1994          PCLOD                    Phil
        Corrected the reading of the phases.
        Moved nowhere.

 8395.  December 6, 1994        $YPGNOT/SNPLT.FOR                Phil
        Added the ability to plot the cable-cal and amplitude & phase
        of the pulse-cal tones from the PC table. Also tidied the task
        up a little and added to code to recognize and forbid plotting
        variables that don't exist in the different table types that
        SNPLT can handle. Should really tidy this up more to handle the
        tables differently - one day.
        Updated the helpfile.
        Moved nowhere.

 8396.  December 7, 1994       SN2CL, CLCAL       John Conway / Phil
        Added Conway's extensions to the interpolation modes.  He has
        added 3 new modes and we have ensured that the previous modes
        are untouched and perform as before. New modes are SIMP:
        performs a classic linear interpolation; AMBG: uses the mean
        residual rates to resolve phase ambiguities and then does a
        SIMP; CUBE: fits a 3rd order polynomial to fit the rates and
        phases and then does a SIMP.
        Added a warning message about doing smoothing for VLBI data -
        suggest users do that in SNSMO, but carry on anyway.
        Updated the helpfile.
        Moved nowhere.

 8397.  December 9, 1994        $APLSUB/FPARSE.FOR          Phil
        When NAXIS = 0 and GROUPS = T in a FITS header FPARSE printed an
        error message about NAXIS and GROUP structure not matching. In
        fact this is a legal construct and is used by the VLBA FITS
        format when constructing the base header - no data follows the
        header, only tables. Made a minor change to FPARSE to recognize
        this construct and set up the keywords accordingly.
        Moved nowhere.

 8398.  December 9, 1994             $APLPGM/PRTTP.FOR         Phil
        VLBA data is recognized by the values of 4 keywords (for
        redundancy), one of these keywords changed as a result of the
        previous change to FPARSE. Fixed PRTTP to recognize this.
        Moved nowhere.

 8399.  December 9, 1994             Holography                Eric
        Added a new phase routine for subreflector geometries done by
        Mike Kesteven and changed file naming conventions in HOLGR.  In
        UVPRT, altered the automatic flagging algorithm to make it
        simpler, added the option to have multiple reference antennae
        for a single output antenna, and changed the output file name
        convention, adding the IF number.  Also both help files.
        Moved from Perley's area.

 8400.  December 9, 1994             Misc                      Eric
        IMVIM   read the wrong number of adverbs and so ignored GRCHAN.
        UVGLU   made a last call to the "DIDDLE" routine which had been
                changed not to recognize a last call!  Deleted it.
        Moved nowhere.

 8401.  December 9, 1994           CookBook                    Eric
        Rewrote chapters 7 and 8 on display, making it one chapter
        called COOK7.  Renamed and adjusted chapter 9 into COOK8, moving
        some Slice info from the old chapter 8.  Revised the spectral
        line chapter 10 to add info and renamed it COOK9.  Corrected and
        converted AIPS Memo 76 to be Appendix A and acquired a
        PostScript copy of the spectral-line outline from Andrea Cox to
        be Appendix B (COOKB).  Created 7 more Figure plots in support
        of these.  More will need to be done with TOC and cross
        references and renumbering chapters 11-15.
        Moved nowhere.

 8402.  December 9, 1994        VLBA bandpass stuff         Phil
        Added the last routines that provide us with the structure to
        correct VLBA bandpasses. We still have some algorithmic
        problems, in that the sharp edges we see in the bandpasses cause
        Gibb's type ringing when we do the shifting. We are
        investigating alternate smoothing algorithms to remove the
        ringing yet not change the shape of the bandpass in subtle ways.
        Changes are:
          BPASET:  Check if VLBA data, if so set up needed arrays and
                   variables.
          BPGET:   When setting up the bandpass buffers, if VLBA data
                   make a copy of them for shifting purposes - save
                   having to go back to the BP table each time we shift.
          DATBND:  Determine how much to shift bandpass to match program
                   source, shift the data in the secondary buffer. If
                   the shift is > 0.1 channels from the previous shift
                   then load the original buffer and shift it. Apply
                   flagging to the channels that are wrapped around as a
                   result of the shift.
          DSHIFT:  Call ACSHFT not TPSHFT. Deal with the AVDELI array
                   slightly differently, it now carries information
                   on the shift applied in BPASS so I can keep track
                   of which channels to flag due to wrap around.
          SPINTP:  Gave this routine much more intelligence on dealing
                   with the ends of the spectrum, will now average for
                   5 channels of good data and use that to extrapolate,
                   rather than just taking the first or last good point.
          ACSHFT:  Added the option of Hanning smoothing while shifting.
          CVEL:    Minor change to deal with the AVDELI arrays.
        Moved nowhere.

 8403.  December 12, 1994		$UPDUNIX/AIPSUPD	Dave
	Changed a couple of /AIPS to $AIPS_ROOT. It was keeping
	me from running the midnight job on the special large-AP
	version of AIPS on Pilabo.
	Moved nowhere.

 8404.	December 13, 1994          holography                  Eric
        Fixed the parameter count to HOLGR which should have been
        increased for the 2 new adverbs.  Rearranged the file open and
        close flags in UVPRT.  It was getting confused into thinking the
        file was closed and was then not able to open the next one.
        Moved nowhere.

 8405.	December 13, 1994           CookBook                   Eric
        Changed chapters 1, 3, 4, 5, and 6 to reflect the new chapter
        numbering and the nomenclature that a chapter is not a \Sec.
        Changed Chapter 4 to allow the large plot to be optional.
        Changed the table of contents (COOK0) for the revised chapters
        (7 and 9) and chapter numbering and the new appendices.  Also
        made the front picture optional.  Reinserted COOKB.PS.
        Apparently the chkout system had put it in correctly to the rcs
        area, but made a 0-byte file in the plain text area!
        Moved to the anonymous ftp area and updated cook.html for WWW.

 8406.  December 14, 1994           UVCOP                      Eric
        UVCOP, when adjusting for channel, IF, ... selection, took
        itself too seriously.  Changed it to be forgiving if there are
        no AN files and to copy FQ tables even if the file is not
        multi-source.
        Moved nowhere.

 8407.  December 14, 1994        aips man page               Eric
        The man page, repeated in AIPS.HLP and COOK2.TEX, should say
        tvhost once where it says tvdisp.  Did not fix the man page
        itself - I do not know where that is.
        Moved nowhere.

 8408.  December 15, 1994          SDGRD                       Eric
        The task was creating two SC files at all times.  It only needs
        the second if it is forced to sort the data.  Moved that
        creation into the sort routine, which is seldom called.
        Moved to the patch area.

 8409.  December 15, 1994           OTFUV                     Eric
        Added adverb CHANSEL to the task to let the user specify
        channels to be flagged as they are read in.  CHANSEL is more
        general than the current need (which is a short list of single
        channels) but it is the channel swelection adverb in AIPS and it
        allows for future generality.
        Moved to the patch area.

 8410.	December 19, 1994           FRING                     Leonia
        Changed the warning text in the case of too long SOLINT.
        If SCAN > SOLINT > SCAN/2 the task forced SOLINT = SCAN and if
        the SCAN interval exceeded the allowed threshold the warning
        text confused the user because it informed him about too long
        solution interval and at the same time recomended him to take
        this interval even larger (SCAN > SOLINT).
        Decreased the additionnal intervals at the beginning and end of
        a scan from 8.6 sec (1E-4 day) to 2 sec.
        Added some explanation of SOLINT and its limitation to HELP.
        Moved nowhere.

 8411.  December 20, 1994   Delay and rate smearing corrections   Athol
          Add a facility to the calibration system to correct the ampl.
        of VLBA data that have been pre-averaged in frequency in the
        presence of residual delays, usually as spectral averaging in
        the VLBA correlator. Trigger this correction if the array name
        in the AN table is 'VLBA' and the keyword 'SPEC_AVG' as stored
        in the AN table is greater than 1.
          This correction is applied to all polarization
        correlation pairs independently and assumes alignment of polzn.
        delay solns in the same frame (ie. no uncorrected offsets
        between the R and L solutions).
           Also improve the application of rate smearing corrections
        by extending them to all polzn. correlation pairs rather than
        only RR and LL. Allow two new options for DXTIME on input to
        UVGET, namely DXTIME=0 and DXTIME < 0. The former will use the
        integration time for each u-v record as specified by random
        parameter INT_TIM (failing that; 1 sec) and the latter will
        suppress any rate smearing correction.
           Changed the following routines:
        $INC/DSEL.INC      Add new internal variables to DSEL.INC
                      DODSM, DORSM  L      Do delay, rate corrections ?
                      NXDSM         I      No. of pre-avgd. freq. chan.
                      IANLUN        I      LU for AN table
                      ANBUFF        I(512) Buffer for AN table
        $APLNOT/SELINI.FOR
                      Initialise DXTIME=0; NXDSM=0; DODSM=F; DORSM=T
        $APLNOT/UVGET.FOR
                      Set IANLUN=45
        $APLNOT/GAININ.FOR
                      Check AN table for array name and SPEC_AVG
                      keywords. Set NXDSM; set DODSM if
                      NXDSM > 1 and array name = 'VLBA'
        $APLNOT/DATGET.FOR
                      Before each visibility record is passed to
                      DATCAL and lower calibration routines, determine
                      the integration time to be used for the rate
                      smearing correction as described above. Pass this
                      value to DATCAL; set DORSM false if DXTIME < 0.
        $APLNOT/CGASET.FOR
                      Remove all previous scaling of the BLFAC array to
                      accomodate rate smearing corrections.
        $APLNOT/CSLGET.FOR
                      Use new integration time as calculated in DATGET
                      in deciding time tolerance in CL table entries.
        $APLNOT/DATCAL.FOR
                      Calculate delay and rate smearing corrections on
                      the fly in DATCAL if DODSM and/or DORSM are set
                      and delay/rate solutions are being applied. Do
                      a discrete Sinc correction for delay smearing
                      where only a small number of channels may have
                      been pre-averaged. Correct all polzn. pairs
                      independently.
        $APLNOT/DSMEAR.FOR
                      New subroutine to extract the SPEC_AVG and ARRNAM
                      keywords from the AN table.
        Moved nowhere.

 8412.  December 20, 1994        GAL                       Gustaaf
        Implemented a number of bug fixes suggested by Martin Shepherd.
        Introduced improved array bounds checking, and better handling
        of the PL extension file.
        Moved nowhere

 8413.  December 20, 1994       VPLOT                      Leonia
        The task did not work with the symbol '|'. It's been fixed
        Moved nowhere.

***********************************************************************

        Changes while 15JAN95 was NEW:

***********************************************************************

 8414.  December 23, 1994         TVFLG, SPFLG                Eric
        Changed TVFLG, SPFLG, and GRIDTB to try hard to avoid bad
        beating between the data times and the Master grid cell times.
        The programs all integerize the times on a 0.1 of a Master grid
        cell (DPARM(6)) and look through the first 10000+ times to see
        what regularity there is in those sample times.  Then the Master
        grid cells are set to be centered on that preferred 0.1 of a
        cell.  Also made fixes that will allow data sampled < 1 sec
        apart (i.e. OTF) including raising averaging buffers to hold all
        the data allowed (16384 rows in the master grid).  Changed
        DSMEAR to suppress error messages and clean up its typing.
        Fixed SPFLG and TVFLG to average across blank rows so long as
        the time range and source ID are ok.  A blank row stopped it
        before.  Also fixed a quirk with the menu and help display.
        Changed the smooth and scan times displayed to be the integer
        number of basic intervals rather than try to show seconds.
        Moved from 15JUL95.

 8415.  December 23, 1994          OTFUV                     Eric
        Changed it to make the beam be 257 (i.e. baseline 1-1).  The old
        scheme confused SPFLG etc.  Added code to keep track of data
        ordering and to put SORT = 'T' in the header iff its true.
        Added message at the end about it too.
        Moved to the patch area and from 15JUL95.

 8416.  December




