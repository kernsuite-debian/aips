;-----------------------------------------------------------------------
;  Copyright (C) 2003-2005
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in SOCORRO.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


***********************************************************************
***********************************************************************

                 Changes while 31DEC04 is TST

***********************************************************************
***********************************************************************

11456.  December 1, 2003        several                    Eric
        Changed 31DEC03 to 31DEC04 in install.pl, update,pl, INSTEP1,
        SETPAR, GETRLS, AIPSPATH.*SH, UPDCONTROL.
        Moved nowhere.

11457.  December 2, 2003          FILLM                  Eric
        Fixed time advances while skipping tests to handle day roll
        over.  There was a problem only when no data had yet been
        selected.
        Moved to 31DEC03 this date.

11458.  December 2, 2003        $YPGNOT/DELZN              Leonia
        Creating output file DELZN has carried out calculation of
        the values for the times given at the CL table rows. Now DELZN
        can calculate the values of the output file for the times even
        distributed over the time range of the input data. The new
        option works under control of APARM(8). The new version is
        useful when the output CL table (target sources) is attached
        to the different UV data.
        Moved nowhere.

11459.  December 3, 2003         MAKE.MNJ               Eric
        The part in do_daily that defines AIPS_ROOT should come ahead
        of the line that uses it.
        Moved to 31DEC03 this date.

11460.  December 4, 2003         install.pl            Eric
        Grammar error caused special hack for HPs not to work.
        Corrected $arch to $ARCH.
        Moved to 31DEC03 this date.

11461.  December 8, 2003            SNSMO                 Eric
        There was no default for SMOTYPE despite what the help said.
        The clipping routines had a variety of troubles.  Put in
        counters for what was deleted in CLPAPH, CLPRAT, CLPDEL.  The
        amp/phase clip assumed that both polarizations needed to be
        present and so showed both bad if one was.  This caused odd
        behaviors and failures to clip.  Dropped this both pol
        nonsense.  Fixed the setting of the BAD flag so that fewer
        records would be updated - only those actually changed.
        Moved to 31DEC03 this date.

11462.  December 8, 2003         ZDCHIN, FILAIP            Eric
        Set the default AIPSmark to 20 not 1 in ZDCHIN.
        Have FILAIP not re-init the SP and IC files if they
        pre-exist.  The number of records in a user-independent
        catalog was not set (no longer used much anyway).
        Moved nowhere.

11463.  December 8, 2003            GRBOXS                Eric
        Modified messages to tell users what to expect a bit better.
        Moved nowhere.

11464.  December 9, 2003           UVFIX                 Eric
        Two major errors in processing multi-subarray data:
        1. The counter used to show start of data only worked for the
           subarray of the first sample.  All others used parameters
           based on that one.
        2. When bug 1 was fixed, several parameters were found to be
           set to the output values by the first subarray.  This
           included EPOCH and the coordinates and so made handling the
           second one problematical.  Made a bunch of parameters be
           picked up and saved at the beginning and then reused when
           needed.
        Moved to 31DEC03.  Cannot patch 31DEC02 since UVFIX differs in
        other ways too.

11465.  December 10, 2003            UVPLT                Eric
        Fixed to do self-scaling on the binned values where
        appropriate.  Corrected which values end up in the bins.
        Moved nowhere.

11466.  December 11, 2003         BLOAT                  Eric
        The alternate reference pixel was not reset when the frequency
        reference pixel was.
        Moved to 31DEC03 this date.

11467.  December 11, 2003         VPFLG                  Eric
        Add option to flag all IFs if 1 is bad.
        Moved to 31DEC03 this date.

11468.  December 11, 2003         UVFLG                  Eric
        Expand error message when trying to flag ampl or weight on a
        multi-source (FG table) data set.
        Moved to 31DEC03 this date.

11469.  December 12, 2003         CLIPM                  Eric
        Changed meaning of APARMS - APARM(5) = min allowed weight, 6-8
        were 5,6,8 before, APARM(9) controls all IF flagging.
        Moved nowhere.

11470.  December 16, 2003          PLOTR                Eric
        Corrected symbol size by multiply or divide by SQRT(XYRATIO)
        to keep the symbols square when XYRATIO is not 1.
        Moved to 31DEC03 this date.

11471.  December 18, 2003       CookBook                 Eric
        Corrected DELZN remarks in LaCook9.tex and COOK9.PS and
        COOK9.PDF.
        Moved to 31DEC03 this date.

11472.  December 22, 2003        UVPRT                   Eric
        Changed displayed remark: u, v, w are scaled to selected
        frequency, not the reference frequency.
        Moved to 31DEC03 this date.

11473.  December 23, 2003      ALGSUB, ALGSTB            Eric
        Added field number to messages to show progress when more than
        one field is involved.
        Moved nowhere.

11474.  December 29, 2003     ELINT                     Leonia
        ELINT has forced the imag part of the output CL table amplitude
        to zero. As a result ELINT has given the right output CL table
        only if the input CL table has zero for imag part of amplitudes.
        It fixed.
        Moved nowhere.

11475.  January 1, 2004       install.pl                 Eric
        Changed 31DEC03 version of install.pl to myver NEW (stops the
        MNJ).  Found that it had called itself 31DEC04 since 4 Dec!
        Moved nowhere (only 31DEC03).

11476.  January 3, 2004        CLCAL et al.               Eric
        Changed
        CLSMO    Fix spelling of comment
        SNSMO    I swear I did this once already: dropped an initial
                 insistence on having both polarizations at each time.
                 This got in bad trouble in some cases.
        CLCAL    The smoothing of real and imaginary is not ideal and
                 was changed back to smoothing phases keeping track of
                 the last good phase to try to avoid wrap troubles.
        Moved to 31DEC03 - opening it just for this.

11477.  January 3, 2004        AIPS, ZDCHIN               Eric
        Modified the Copyleft statement, adding 2004 in the former,
        adding 1995- to the latter.
        Moved nowhere.

11478.  January 4, 2004      SNPLT, WETHR               Eric
        Changed these to do a fixed X scale when a start and stop time
        are given.  Fixed the comments in the help files - PIXRANGE was
        and is fully a fixed scale plot.
        Moved nowhere.

11479.  January 5, 2004         DBCON                   Eric
        The buffers for copying and concatanating tables were awfully
        small.  Fixed to 3*MAXCIF which will cover BP tables.  The
        basic VLBI tables were not concatenated - IM, MC, PC, AT, CT,
        OB, and GC tables were added to the concatenation list.
        NOTE: CL tables > 1 are copied from the first file but any in
        the 2nd file are ignored.  SN amd BP tables are copied from
        the first file and any from the second file are ignored.
        Comments to this effect were added to the help file.
        Moved to patch 19 January.

11480.  January 5, 2004           DSORC                  Eric
        New task - renumbers sources.
        Moved nowhere.

11481.  January 6, 2004           PLOTR                  Eric
        The step line function did not start well.  Corrected it.
        Moved nowhere.

11482.  January 7, 2004           POSSM                  Eric
        Used LUN 39 to be SU ISTAB call - this is marked as a tape
        device here - we have to fix tape handling!!!!
        Moved nowhere.

11483.  January 8, 2004           FITLD                  Eric
        It regarded the number of rows in an FQ table as the same as
        the max FQ number in the table.  Fixed to get the max FQ and
        use it some places.  VLBAUTIL will need fixing.
        Moved to patch January 19.

11484.  January 11, 2004        Tape LUNs               Eric
        We have used for tapes LUNs = 31 -> 31+NTAPED.  This has
        caused trouble (see POSSM above).  The default DEVTAB has
        31-39 set aside.  It is now time to change this.  I expect
        that no one has used LUNs > 100 so I will for tapes use
             LUN = 129 - NTAPE
        Simple minded changes to the following just to change this
        formula:
        GRITP   GR2TEX  BAKLD   BAKTP   FILLR   FITAB   FITLD
        FITTP   GSCAT   IMLOD   M3TAR   MK3IN   MK3TX   UVLOD
        Other changes
        ZDCHIN   Remove old DEVTAB(30+i) = 2, set DEVTAB(129-i) to 2.
        ZTAPE    Changed several tests on LUN.
        ZTPOPN   Changed tests on LUN, changed MTLUN (lock disk),
                 changed FORMATs
        ZTPMIO   Changed tests on LUN and FORMATs (I2 -> I3)
        ZTPWAT   Changed tests on LUN and FORMATs (I2 -> I3)
        ZTPCLS   Changed tests on LUN and FORMATs (I2 -> I3)
        AU4      Changed LUN formula
        TAPIO    Changed test on LUN
        LSERCH   Changed odd usage of LUN tests
        TPMON    Changed setting of tape LUN and tests/comments
        FILLM    Changed formula and tests on the LUN in the disk
                 reading routine.
        Moved nowhere.

11485.  January 12, 2004           WXSEL                 Eric
        The WX table needs to be selected too - in UVCOP, UJOIN,
        SPLAT, and FLGIT.
        Moved nowhere.

11486.  January 12, 2004          STARTPMON             Eric
        Now that tape units > 9 actually might work, it is time to fix
        STARTPMON - it looked for and made, e.g. TPMONa and then
        ordered TPMON10 to start!
        Moved nowhere.

11487.  January 14, 2004        CALIB, FRING                 Eric
        1. The subroutine that divides the vis data by the model is
           UVDOUT.  The data weights it put out were those that came
           in times the amplitude of the model.  Since weights are
           1/sigma**2, it should have been times the amplitude squared
           of the model.
        2. Created adverbs SOLSUB, SOLMIN for solution subinterval and
           minimum size.  Changed POPSDAT.HLP, NEWPARMS.001, and new
           help files.
        3. Changed CALIB - added these two adverbs.  Changed to use
           dynamic memory for big solution data arrays which now are
           also dimensioned by SOLSUB.  Dropped apparent loop over
           Stokes which could never have worked (did not back up the
           reads) but which was probably never done.  Add up the data
           in sub-intervals, do a solution, then shift sub-intervals.
        4. Changed FRING - added these two adverbs.  Changed big
           dynamic arrays to include both polarizations since we have
           to retain correlator 1 data for subintervals 2-N while
           doing the 2nd correlator.  Changed then to read in both
           correlators at once and solve properly.  Shifts the arrays
           by sub-interval, adding data at the end for the next
           sub-interval.  Changed also meaning of PRTLEV.
        5. Changed KRING - added these two adverbs.  Changed it to do
           the subintervals.
        Moved nowhere.

11488.  January 14, 2004             OHGEO                 Eric
        The function PSNCVT in POSITION.FOR assumed that the X
        coordinate in the input image went with the X coordinate
        version in the out image without checking.  It can handle
        simple transposes of the Ra-Dec.  Fixed to check and blow awy
        some of the bad ones and to handle simple transposes.
        Moved to patch January 19.

11489.  January 15, 2004             CLCOR                  Leonia
        CLCOR has used the different sign for the correction of
        phase (-) and delay (+). The sign has to be identical (+).
        It is fixed.  Error was only in option CLOC.
        Moved nowhere.

11490.  January 15, 2004            VLACLCAL                Amy
        Updates VLACLCAL.HLP to take CLCAL smoothing changes into
        account.
        Moved nowhere.

11491.  January 16, 2004           UVFLG                Eric
        Fixed FLAGVER default remark - the code already used the
        highest but the help file said 1.
        Moved nowhere.

11492.  January 18, 2004         remote tape           Eric
        Fixed
        ZTPOPR    Tested LUN to be 31-31+NTAPED for real tape.
        ZMOUNR    Uses an lUN - should be the right kind even though
                  it does not open
        ZVTPOPR   Limited LUNs to <= 50!
        TPMON     Assumed user has message file on remote machine
        Moved nowhere.

11493.  January 19, 2004         IMFIT, JMFIT           Eric
        Reordered the adverbs and changed task to allow the answers to
        be returned in GMAX, GPOS, and GWIDTH and the uncertainties in
        DOMAX, DOPOS, and DOWIDTH.
        Changed POPSDAT.HLP to add adverb RADIUS and changed default
        of DOBLANK to 0.0.  Added RADIUS to NEWPARMS.001.  Changed
        AU2A to DEFAULT DOBLANK to 0.
        Added RADIUS to IMFIT and JMFIT.  If RADIUS > 0, the rms will
        be found in a circle of that radius in pixels, if = 0 the rms
        will be taken from the header or the full plane as previously,
        if RADIUS < 0 then abs(RADIUS) will be taken as the rms.
        Moved nowhere.

11494.  January 19, 2004      TGIN, SGIN, VGIN             Eric
        Changed AU2A and the help files to allow for sort options in
        the listings.
        Moved nowhere.

11495.  January 19, 2004      Read-only file system     Eric
        DVDs can be mounted on read-only systems but are still usable
        if the catalog routines do not insist on updating the last
        access time.  Changes:
        DDRC.INC    Include for parameter - to avoid DDCH recompile
                    everything
        ZDRCHK      Prepares parameters for ZDRCH2
        ZDRCH2.C    Opens read-write, if fail opend read only, sets
                    parameters based on success.
        AIPS        Call ZDRCHK after user number known and CATCR
        GTPARM      Call ZDRCHK after user number known
        ZOPEN       Set EXCL to -1 if read-only file system
        ZDAOPN.C    Test for read-only as well as no access errors
                    Handle excl==-1 as read-only open.
        ZCREAT      Forbid any creation on a read-only file system
        CATDIR      Forbid OPEN and CLOS on read-only disks, do not
                    change status on read only disks
        CATIO       Update status only on writable disks
        CATOPN      Update date only on writable disks
        MCREAT      Test near start for DSKLOK=1 and loop or die
        SCREAT      Test near start for DSKLOK=1 and loop or die
        UVCREA      Test near start for DSKLOK=1 and loop or die
        Moved nowhere.

11496.  January 20, 2004          XAS                  Eric
        Rearranged the code in init.c to allow the screen size to be
        over-ridden by user Xdefaults options (AIPStv*xPixels and
        AIPStv*yPixels).  Smaller than the visible screen works well,
        bigger may not play well with your screen manager.  Also
        updated XAS.HLP.
        Moved nowhere.

11497.  January 21, 2004         XTRAN                Eric
        The initial read of the text file damaged the error return so
        that if an error was found in reading the file, it was not
        passed on to the following code and the program kept going.
        Also added the ability to skip lines in the text file
        beginning with $ - to allow comments.
        Moved nowhere.

11498.  January 21, 2004          SAD                 Eric
        Fixed the sorting of the solution display to do S, X, Y, R,
        and D correctly taking into account real RA and Dec even when
        the image is rotated.
        Moved nowhere.

11499.  January 21, 2004         IMFIT, JMFIT          Eric
        Created new adverbs FMAX, FPOS, FWIDTH for the output of iMFIT
        and JMFIT - over-writing GMAX, GPOS, GWIDTH messes up some
        procs.  Changed IMFIT and JMFIT help files, POPSDAT,
        NEWPARMS.  Made new help files.  Corrected Fortran files to
        reset the DOMAX et al parameters only if they are > 0.
        Moved nowhere.

11500.  January 21, 2004            SETFC              Eric
        Changed to return CELLSIZE and IMSIZE used - they change
        values if they start = 0.
        Moved nowhere.

11501.  January 22, 2004          DELZN, CLCOR        Leonia
        DELZN created the outfile with one column data corresponded
        to the atmosphere zenith delay and CLCOR (option 'atmo') read
        such a file format interpreting the only data column as a
        atmosphere zenith delay. If an user has wanted to make
        correction of atmosphere zenith delay and clock delay,
        CLCOR has carried out the wrong calculation of both delay and
        rate correction based on the only data column at the infile.
        Now DELZN creates the outfile with four data column:
        atmosphere zenith delay, rate of the atmosphere zenith delay,
        clock delay and clock drift. The format of the infile in CLCOR
        has been changed relevantly. The help files are updated.
        Moved nowhere.

11502.  January 22, 2004          AIPS                  Eric
        Recent changes pointed out that certain subroutines did not
        always close all files - this left them open blocking later
        reuse.  Fixed AU2, AU2A, and AUC.
        Moved nowhere.

11503.  January 25, 2004          FRING                 Eric
        The weight array was local and so had a much larger dimension
        than required - but the zeroing thought it was just right.
        Solutions for the second IF were badly damaged when the number
        of working antennas increased in the middle of a data set.
        Moved nowhere.

11504.  January 25, 2004          VLARUN               Lorant
        Implemented minor changes to robust, inseq and refant to
        accomodate for Michaels requests - demonstration at xraydio
        Reserving major upgrade to make it infinitely robust to later

11505.  January 27, 2004         install.pl             Eric
        The test to see if a machine was in a pre-existing HOSTS.LIST
        used a numeric compare (==) which apparently is always true
        when comparing e.g. BOB and LOCALHOST.  It should and now does
        use a string compare (eq) which works.  Also added a comment
        to the user about the password in FILAIP.
        Moved eq to the 31DEC03 ftp area.

11506.  January 28, 2004           tapes               Eric
        ZTPOPR had a GT where a GE was needed - so a tape number =
        your highest one used as a remote tape would fail to open.
        MOved nowhere.

11507.  January 29, 2004         SGLAST                 Eric
        Added explanatory message about lASTEXIT on error.
        Moved nowhere.

11508.  January 29, 2004         TI2HA                  Eric
        Added advice about DBCON and PUTHEAD to be used when running
        TI2HA.
        Moved nowhere.

11509.  February 9, 2004        Character in Z          Eric
        I noticed that CHARACTER variables are sometimes being sent
        directly to C routines.  This is a serious no-no.  Changed
        ZABORT   $APLGEN: changed to send HOLLERITH to ZABOR2
                 Changed ZABOR2 stub ($APLUNIX) comments
        ZACTV8   $APLUNIX: use HOLLERITH to call ZACTV9
        ZERROR   $APLGEN: changed to use HOLLERITH from ZERRO2 -
                 changed ZERRO2 ($APLGEN and $APLVMS) accordingly
        ZFIO     $APLGEN: changed to use HOLLERITH to ZFI2 and ZTKFI2
                 except on VMS.  Changed comments and some code in the
                 $APLGEN stubs for ZFI2 and ZTKFI2.
        ZFREE    $APLGEN: changed big name buffer to HOLLERITH,
                 revised $APLGEN and $APLVMS versions of ZFRE2 to
                 support this.
        ZFULLN   $APLGEN: changed to call ZPATH and ZMKTMP with
                 HOLLERITH, revised $APLGEN and $APLVMS versions of
                 ZPATH and ZMKTMP to support this.
        ZLASCL   $APLGEN: use HOLLERITH to call ZLASC2 except for VMS,
                 changed comments in $APLGEN version ZLASC2.
        ZLPCLS   $APLGEN: use HOLLERITH to call ZLPCL2 except for VMS,
                 changed comments in $APLGEN version ZLPCL2.
        ZMIO     $APLGEN: do VMS and Unix differently incl single
                 buffer Unix and hollerith to ZMI2 - drop $APLUNIX
                 version of ZMIO.FOR.
        ZMI2     $APLGEN: improve comment re OPER
        ZMOUNT   $APLGEN: use HOLLERITH in calling ZCRLOG and ZMOUN2,
                 improved comments in $APLGEN ZMOUN2 and ZCRLOG.
        ZMSGDK   $APLGEN: Use HOLLERITH for non-VMS in calling ZMI2.
        ZMSGER   $APLGEN: Use HOLLERITH in calls to ZERRO2.
        ZPASWD   $APLGEN: new calls ZPRPAS w or w/o HOLLERITH
        ZPRIO    $APLGEN: calls ZPRI2 w or w/o HOLLERITH
        ZPROMP   $APLGEN: new calls ZPRMPT w or w/o HOLLERITH
        ZROPEN   $APLGEN: use HOLLERITH for ZROPN2 call, fix
                 $APLGEN/ZROPN2 comments
        ZSHCMD   $APLGEN: make new subroutine to call ZSHCM2 w or w/o
                 HOLLERITH.  Rename VMS, UNIX, IBM, CRI versions to
                 ZSHCM2.
        ZSSSLK   $APLGEN: use HOLLERITH in call to ZSSSL2, change
                 $APLGEN/ZSSSL2 comments
        ZSSSOP   $APLGEN: use HOLLERITH in call to ZSSSO2, change
                 $APLGEN/ZSSSO2 comments
        ZTABOR   $APLGEN: new calls ZTKILL w or w/o HOLLERITH
        ZTACTQ   $APLGEN: change to call VMS ZTACT2 with CHARACTER,
                 rest with HOLLERITH
        ZTACT2   $APLGEN: changed comment
        ZTAPE    $APLGEN: use HOLLERITH in call to ZTAP2, fix error
                 message, change comments on $APLGEN/ZTAP2
        ZTKILL   $APLGEN: change comments re task name
        ZTKOPN   $APLGEN: use HOLLERITH to call ZTKOP2 on non-VMS and
                 fix $APLGEN/ZTKOP2 comments
        ZTPMIO   $APLGEN: change to do CHARACTER and old ZTPMID call
                 sequence to VMS, HOLLERITH and new call sequence to
                 the others.  Delete $APLUNIX/ZTPMIO.FOR.
        ZTTOPN   $APLUNIX: call ZTTOP2 with HOLLERITH
        ZTXMAT   $APLGEN: call ZTXMA2 with filespec HOLLERITH except
                 for VMS - the VMS routine uses I think the wrong
                 length for file names which were already HOLLERITH.
                 Changed comments in $APLGEN/ZTXMA2.
        ZVTVOP   $APLGEN: Use HOLLERITH in call to ZVTVO2 and fix
                 comments in $APLGEN/ZVTVO2.
        ZWHOMI   $APLGEN: CHANGE CALL TO ZCRLOG TO HOLLERITH
        AU2      Changed to call ZTABOR
        AUC      Changed ZPRPAS to ZPASWD
        PASWRD   Changed ZPRPAS to ZPASWD
        PREAD    Changed ZPRMPT to ZPROMP
        RDUSER   Changed ZPRMPT to ZPROMP
        Moved nowhere.

11510.  February 9, 2004              ZXHLP2                   Eric
        Changed all cv references to aoc.
        Moved nowhere.

11511.  February 9, 2004        CLSMO                  Eric
        Michael Bietenholz pointed out that the code swapped rate and
        delay columns and swapped the smoothing times of the two - so
        doing the right thing most confusingly.  Rearranged.
        Moved nowhere.

11512.  February 11, 2004         PLOTR                    Eric
        Allow comment lines starting with $ or # anywhere.
        Moved nowhere.

11513.  February 11, 2004         XHELP                  Eric
        XHELP limited the length of a name to 8 characters - 10 is
        better as in explain etc al.  Changed HELPS.FOR.
        Moved nowhere.

11514.  February 11, 2004             BPASS              Eric
        Added warning about data averaging across sources.
        Moved nowhere.

11515.  February 11, 2004         TVPSEUDO               Eric
        Changed TVPSUD and COLORC top add yet another color scheme
        suggested by Lincoln Greenhill.
        Moved nowhere.

11516.  February 12, 2004          FCLEVEL              Eric
        The default code seemed suspect - replaced the full case
        statement with a different grammar that appears to work
        everywhere.
        Moved nowhere.

11517.  February 12, 2004          AIPS                 Eric
        We get lots of complaints about damaged LASTEXIT files when
        machines crash.  I do not understand this - the abort handler
        does not reference LASTEXIT.  Changed AIPS.FOR so that if
        SGLAST read does have an error, it is reported and INIT
        called.
        Moved nowhere.

11518.  February 12, 2004         ZXHLP2 (XHELP)       Eric
        Fixed up $SYSUNIX/ZXHLP2 and $SYSPERL/ZXHLP2.PL to work on the
        present NRAO web setup.
        Moved nowhere.

11519.  February 15, 2004      CHANGES, AIPSPLIT.TAR       Eric
        Removed $Id date crap that confuse the cvs system.
        Moved nowhere.

11520.  February 15, 2004        START_TVSERVERS           Eric
        The previous fix that set $DISPLAY to $TVDISP:0 is a bit
        dangerous and should be applied only for Inet sockets.
        To make this take effect, managers must move the file from
        $SYSUNIX to $AIPS_ROOT fixing the $AIPS_ROOT definition.
        The tv=local option did not work when $DISPLAY=server:12.0 -
        i.e. when the display is at the end of an ssh link.
        Moved nowhere.

11521.  February 15, 2004           AIPS                  Eric
        Changed SGLOCA to return errnum 45 for no SAVE/GET directory
        when trying to read LASTEXIT.  Changed AIPS to skip message in
        that case and improved the message about a new vocabulary.
        Tested that a bad LASTEXIT file is survived well.
        Moved nowhere.

11522.  February 18, 2004        VLBAARCH.001/HLP          Lorant
        New procedure to take care of archiving VLBA data from
        distribution tape or disk into single source and single
        frequency (-ID) files. Essentially a combination of
        VLBALOAD, VLBAFIX (taken from VLBAUTIL) and FITAB.
        Meant to be used by the analysts and myself

11523.  February 20, 2004       CLIPM, UVMLN              Eric
        Both of these messed up the relationship between source table
        row number and source number - they wrote flag entries for row
        number not source number.
        Moved to patch area today.

11524.  February 23, 2004       SPLAT                     Leonia
        SPLAT has always  copied PC tables even if DOCALIB=1
        although HELP file has reported that "PC table is not copied
        considering PCAL calibration had been carried out".
        It is changed to not copy PC tables (assembling option)
        if the calibration has been applied (DOCALIB.GT.0).
        SPLAT.HLP is changed to make the statement more clear.
        Moved nowhere.

11525.  February 23, 2004          TBOUT                  Eric
        For some reason local variables dimensioned only 50 were used
        when an include wa salso used that provided correct variable
        sizes (dimension 128 columns the max in aips).  HF tables have
        more than 50 columns.
        Moved nowhere.

11526.  February 24, 2004       DELZN                     Leonia
        OPTYPE='DELA' has been used when the multi band delay column
        of the input SN table is used. I have changed 'DELA' for 'MDEL'
        to exclude a possible confusion with the single band delay.
        Moved nowhere.

11527.  February 24, 2004       REFREQ                    Amy
        Added variables and some explanation to help file.  Made
        procedure more rational.  Removed hidden adverb UNITS, I
        did not understand why anyone would want to use this adverb.
        Will see if anyone complains.
        Moved nowhere.

11528.  February 24, 2004       CALIB, SETJY              Eric
        Changed CALIB per Robert Braun to use the V polarization from
        the source table when calibrating the RR (I+V) and LL (I-V)
        correlators.  This is particularly useful for WSRT with
        equatorial mounted linear feeds where XX=I-Q and YY=I+Q.  If
        they are changed to Stokes -1 to -4 and the Q flux put in the
        V place then CALIB will work for the usually non-zero Q of
        calibrators.
        Changed SETJY to allow changing the Q,U,V fluxes while leaving
        the I (ZEROSP(1)) flux set by CALC alone.
        Moved nowhere.

11529.  February 26, 2004       START_AIPS                Eric
        Dieter Engels (University of Hamburg) suggested a much more
        comlex grammar for parsing the SSH_CLIENT variable which
        solves the new format used by some systems for its value:
           ::ffff:134.100.120.133 33151 22
        Also put in SSH_CONNECTION since SSH_CLIENT may not be set
        when the other is.
        Moved nowhere.

11530.  February 26, 2004         RLDIF                   Eric
        New task: does the LISTR operation to display RL and
        conjugate(LR) for calibrators to determine the R-L phase
        difference.  It returns this in adverb CLCORPRM and optionally
        does the usual printing.
        Moved nowhere.

11531.  February 26, 2004            LISTR                Eric
        The "vector" sum line shown at the bottom of the matrix
        listings assumed that the real and imaginary parts in the two
        halves of the matrix are supposed to be the same.  This is not
        always true - changed it to sum the two halves separately.
        Moved nowhere.

11532.  February 26, 2004          SLBINI                Eric
        It did not check that the rotation had nothing to do with the
        slice (AXTYP=4) before bumping type 3 (absolute) plots to type
        4 (relative).  Affect ISPEC the most, other tasks relinked:
           AIPS, SL2PL, PFPL2, PLCUB, SLFIT, XBASL, XGAUS, XPLOT.
        Moved nowhere.

11533.  February 28, 2004           VLBAFIX/VLBASUBS           Amy
        VLBAFIX/SUBS used to force everything into one subarray, I
        added an option to actually split the data into multiple
        subarrays using USUBA OPCODE='AUTO'.
        Moved nowhere.

11534.  March 1, 2004           WX tables                Eric
        Fixed SPLAT, FLGIT, UJOIN to avoid copying the WX table during
        the mass table copy, saving it for the WXSEL intelligent copy
        done later.  Otherwise the latter tried to overwrite the
        former causing a variety of possible problems.
        Moved nowhere.

11535.  March 3, 2004          QEDIUTIL                  Eric
        The UV editing portion did not update pointers properly when
        flagging a single baseline and either NEXT BASELINE or ENTER
        OTHER ANT functions were done.  The correct antennas appeared
        on the screen but not in the flag table.
        Moved to patch area.

11536.  March 8, 2004         ASTROMET.HLP                Amy
        Updated, mostly adding comments about calibration transfer and
        referring to the VLBAUTIL scripts that might be useful.  Also
        cleaned up the text a bit.
        Moved nowhere.

11537.  March 12, 2004       CONFI                       Leonia
        There has been two options of finding maximum of the beam.
        One of them is two complicate and does not have any advantage.
        I have removed it. The default value for the minimum
        radius of optimization is added. This default is equal
        1.2*lambda/ARRAYSIZE and correspond to the edge of the main
        lobe of the synthesized beam.
        Moved nowhere.

11538.  March 13, 2004           TBOUT                   Eric
        The "simple" fix I made caused several problems.  The length
        variable was replaced by a standard one in the the call to
        GETHUT but not where it was used making the length of
        character and bit outputs 0 rather than correct.  The
        subroutine GETHUT declared the "known" lengths of the strings
        in its argument list.  This is very bad when strings of some
        other (presumably larger) length are sent in as they were
        after the "simple fix".  Corrected GETHUT.
        Moved nowhere.

11539.  March 13, 2004         FILLM, PRTTP              Eric
        The new archive system makes it very easy to download a very
        mixed bag of data and users expect FILLM to load it all in one
        run.  Changed:
        a. It failed to recognize new data in which the number of
        streams increased, probably because it happened at a file
        boundary.  Changed to not write more NX, CL et al records
        after the change has arisen and to force a close and reopen
        operation when the number of streams changes.
        b. It did not allow CL, TY et al intervals less than the
        integration time.  Given that times are inaccurate when 200
        days are added, this meant that a large number of CL records
        did not get written that should have been.
        c. Test for wheether the array center was moved from 0 to
        account for Pie Town at Q band used an uninitialized variable
        whan MXANT (29) should have been used.  This variable became
        29 after the routines were used once but Q band AN files may
        be funny!
        c. FILLM has happy to combine data from different
        configurations as if they were all from the first one
        encountered!!  Changed it to read in pre-existing antenna
        files and to use the antenna station IDs to decide whether to
        concatenate or not.
        PRTTP was given the fix that FILLM has for reading short
        records at the end of disk files.  It was still reporting a
        short record with no I/O error.
        Moved nowhere - should go to patch sometime.

11540.  March 14, 2004         VLBAARCH.001/HLP              Lorant
        The analysts didn't get enough disk space so far, so I modified
        VLBAARCH to be able to switch disks during operation, when new
        files are created, and make "zap" in the proc accept "indisk=0".
        Moved nowhere.

11541.  March 13 & 14, 2004          ZXHLP2                Eric
        Fixed it so that it will do min match on symbols of 4 or more
        characters and exact match on 1-3 character symbols.  Note
        that it takes the first symbol to match in the alphabetized
        list HLPIT.LIS.  Cleaned up code to use functions and to do as
        many symbols as there are in a line except not the symbol for
        which we are doing the help.  It is slwer now but really
        slick!
        Moved to cgi web location, nowhere else.

11542.  March 16, 2004            adverbs help files        Eric
        Corrected BATNLINE, GRADDRES help files - they are adverbs not
        verbs.
        Dropped from POPSDAT and NEWPARMS unused adverbs:
            PGAUSS, MGAUSS
        Changed POPSDAT.HLP to declare more adverbs properly.
        Revised AU2A to DEFAULT a couple more adverbs in special ways
        and to handle an init of characters > 4 in length.
        Created new help files for:
            AVOPTION    BPASSPRM    DEFER      DELTAX    DELTAY
            DOBTWEEN    DOEBAR      DOFIT      PHASPRM   SEARCH
            SNCORPRM    SOUCODE     SPECINDX   TAU0      TRECVR
            VLBINPRM    X           XAXIS      Y
        Moved nowhere.

11543.  March 17, 2004          list, ABOUT files           Eric
        For changes before today, changed HLPIT.LIS and ABOUT files
        ADVERB     ANALYSIS   ASTROMET   CALIBRAT   COORDINA
        MODELING   OPTICAL    POLARIZA   RUN        TASK
        UTILITY    UV         VLBI
        For the new help files changed
        ADVERB     ANALYSIS   CALIBRAT   IMAGING    PLOT
        POPS       SPECTRAL   TASK       TV         UV
        VERB       VLBI
        Moved nowhere.

11544.  March 18, 2004        AU2A, POPSDAT                Eric
        SNVER should default to 0 - it has been 1 in POPSDAT and I
        fixed AU2A to match.  Fix both to be 0 now.
        Moved nowhere.

11545.  March 25, 2004           DELZN                   Leonia
        The OPTYPE='PHAS' has been added. This option allows to pick up
        phase delay instead of multi band delay (OPTYPE='MDEL').
        The ambiguity problem is waiting for solution!!!!
        Moved nowhere.

11546.  March 25, 2004         $APGNOT/FIT2A             Leonia
        Number of digits at the third column of the output file
        has been changed from 3 to 6.
        Moved nowhere.

11547.  March 26, 2004         BLCAL                     Amy
        BLCAL was not reading the CMETHOD input correctly because
        CMETH was declared as only one character long.
        Moved nowhere.

11548.  April 2, 2004          DELZN                     Leonia
        The new option not fitting clock has been added.
        Now there is no default for number of terms in the fitting
        polynomial for clocks as it was originally (APARM(3)=0 => 2)
        Now Aparm(3)=0 means no fitting for clocks.
        The help file has been modified in particular to make more
        clear what is plotted.
        Moved nowhere.

11549.  April 3, 2004           CALIB                     Eric
        If DOFIT was set, then GCALC2 was called to do a fit for some
        but not all antennas.  Unfortunately, it used all included
        antennas for the data but had only gain=(1,0) for those
        antennas it was told not to fit.  This got rather in the way
        of fitting.  Changed it to omit all data which contain an
        antenna that is not to be solved.  The fits are now much
        better.  So why is this option there - ANTENNAS would do?
        Moved nowhere.

11550.  April 6, 2004           DELZN                     Leonia
        Some misprints (which do not lead to an error) found in the
        program. Mapping functions are stored now instead of relevant
        elevations. This simplifies the program and makes easier to
        modify DELZN if it is required.
        Moved nowhere.

11551.  April 7, 2004            CookBook              Eric
        Changed $DOCTXT/LaCOOK?.tex and $AIPSPUBL/COOK?.PS mostly to
        allow for making html and linked pdf files.  This involved
        changes to all chapters, mostly in the nature of things
        invisible in the output PostScript files.  The macro file
        LaCook.mac was revised to make every section self-labeling, to
        write 2 kinds of index outputs with section reference in one
        of them, to have new macros for the section-ref index
        (LaCookJ), and to choose between jpg and eps forms of the
        figures.  All figures were worked on to be 990 points or so
        wide in eps and then jpeg versions were made of them.
        Real changes to content were also made:
        4 - Changed to talk about RLDIF rather than LISTR for the
            polarization right-left phase.  Fixed CL version info from
            CLCOR and elsewhere.
        9 - Improved the DELZN section (per Amy) and added multi-band
            delay section; CLCOR makes new gain versions.
        A - Changed LISTR to RLDIF for polarization and fixed GAINUSE
            after CLCOR.
        13 - Updated ABOUT sections.
        Also Index and Table of Contents.
        Dropped $AIPSPUBL/COOK*.PDF and made new full-book,
        cross-referencing $AIPSPUBL/COOKBOOK.PDF instead.
        Changed COOKNX.FOR to allow for an italic index entry and to
        limit the number of references in any one row.
        Created COOKNS.FOR to make the section-reference index from
        the other form of output file.
        Moved nowhere.

11552.  April 7, 2004            ZCLOSE                  Eric
        Some tests on tape LUNs still remained - in $APLUNIX and
        $APLGEN versions of ZWAIT and $APLGEN/ZCLOSE.  It would not
        close files or wait on them if the LUN was in the range
        31-30+NTAPED which is bad if NTAPED >= 10.  Fixed comments in
        ZTPOPN, ZTPOPR, TAPIO, FILLM, and PRTTP about the LUNs and
        dropped a stupid line of code from TPIOHD.
        Relinked everything!
        Moved nowhere.

11553.  April 7, 2004            SYSTEM                Eric
        Changed AU3B, POPSDAT, NEWPARMS to make a new verb SYSTEM to
        send a command to the operating system.  New help files
        SYSTEM, SYSCOM, SYSOUT.
        Moved nowhere.

11554.  April 8, 2004             FILLM                Eric
        For some reason, FILLM would not check a source table for
        entries if the number of vis was < 1.  Thus a first scan with
        no data would create a source table entry for that source but
        not acknowledge it when the next source showed up.  So the two
        ended up with the same source number although they were known
        to be different otherwise and the third source would be called
        number 3.  Now if the source table has data it looks into it.
        Moved nowhere.

11555.  April 9, 2004             SETFC                 Eric
        Changed it to return NFIELD as well as CELLSIZE and IMSIZE.
        Moved nowhere.

11556.  April 10, 2004         Calibrator models             Eric
        Wrote CALWR and CALRD taks to write source models into FITS
        disk files and CALRD to read them.  The former will be mostly
        used by the AIPS group to prepare models to be shipped with
        AIPS.  The latter will be used to read in the models.  Each
        FITS file contains a postage stamp image and the merged CC
        file with header information including the rms noise off
        source and the total CC flux.  Added to $AIPSTARS:
        3C138_K.MODEL     3C138_Q.MODEL     3C138_U.MODEL
        3C147_K.MODEL     3C147_Q.MODEL     3C147_U.MODEL
        3C286_AK.MODEL    3C286_AQ.MODEL    3C286_U.MODEL
        3C48_ABQn.MODEL   3C48_AK.MODEL     3C48_U.MODEL
        Moved nowhere.

11557.  April 12, 2004         FRING                      Amy
        Changed FRING so that it does not reset the number of IFs
        (NUMIF) when the SU table is opened.  Also added a warning
        if the number of IFs in the SU table is different from the
        number of IFs in the header.
        Moved nowhere.

11558.  April 12, 2004      CALRD, SETJY                  Eric
        Added the current 12 models to the help file and a remark
        about setting flux in the SU table for CALIB.  Added code to
        SETJY to recognize the 3 bands and 4 sources for which models
        are available at present and added info to the SETJY help file
        about the models.
        Moved nowhere.

11559.  April 12, 2004           CALDIR                   Eric
        New verb to list all calibration models available.
        Changed POPSDAT, NEWPARMS, and AU7B.  Added MGAUSS and PGAUSS
        back to the former two - their deletion causes trouble with
        compress.  Also new help file.
        Moved nowhere.

11560.  April 12-13, 2004         CookBook               Eric
        Updated the ABOUT files for ADVERB, CALIBRAT, FITS, GENERAL,
        IMAGE-UT, TASK, VERB, VLA.  Updated LaCook13 for these
        changes.  Changed LaCook4 to describe CALRD, CALDIR and the
        use of models.  Updated the table of contents and index as
        well.
        Moved nowhere.

11561.  April 13, 2004         VLBAARCH                   Lorant
        Modified the FPOL in VLBAARCH not to croak on data sets with
        only one frequency and one IF (apparently this is requested
        by some users). Also suggested to Amy to fix this in VLBAUTIL
        Moved nowhere.

11562.  April 15, 2004            MWFLT                 Eric
        Changed max filter size to 201 from 51.
        Moved nowhere.

11563.  April 15, 2004          POSSM                   Eric
        The divide by channel 0 option had some errors:
        1. The counter of failures was no re-zeroed and so blocked all
        plotting after it exceeded the count of the number of
        samples.
        2. The flux test compared a flux cutoff with the square of the
        flux.
        3. It forced BCHAN to 1, ECHAN to Nchan, and DOCAL to false
        for no good reason and would not use a single channel as the
        channel zero.  Fix help file for DOCAL - the rest were not
        mentioned.
        4. Its count of Vis subtracted an omitted correlators count
        despite the fact that they are blanked suitably.
        Moved nowhere.

11564.  April 15, 2004             SNFLG                  Eric
        The phase difference routine tried to fix phases > 180 or <
        -180 but they could actually be nearly 720 degrees in the
        worst case so more of the fix statements are needed.
        Moved nowhere.

11565.  April 16, 2004         FILLM                  Eric
        The sign of CPARM(3) was lost before it was written to the
        history file.  Fixed misleading wording in help file.
        Moved nowhere.

11566.  April 16, 2004         POSTSCRIPT             Eric
        General information help file about PostScript and AIPS
        including macros to draw arrows and labeled bars.  Added
        mention of this in LWPLA.HLP.
        Moved nowhere.

11567.  April 19, 2004      START_TVSERVERS           Eric
        Apparently lots of computers do not run networking!  So
        DISPLAY=localhost:0  or DISPLAY=<hostname>:0 do not work.
        Added code to convert this to :0 when the $HOST, $TVHIST, and
        $TVDISP are all the same.  I wonder what wierd setups will now
        be revealed.  Fle must be moved to $AIPS_ROOT with editing to
        set the value of AIPS_ROOT appropriate to the local system for
        this change to take effect.
        Moved nowhere.

11568.  April 19, 2004           SAD                   Eric
        Raised the number of components allowed from 4000 to 40000.
        Added DPARM(10) option to expand (or contract) the area of the
        image taken about each component for fitting it.
        Moved nowhere.

11569.  April 20, 2004           FLATN               Eric
        Make help clearer about not applying beam pattern unless doing
        mosaicing.
        Moved nowhere.

11570.  April 20, 2004            SAD                   Eric
        Changed to allow BWSMEAR to be < 0 to imply use abs(BWSMEAR)
        but not scale peak flux by correction.  Fixed formats to allow
        for 5 digits in component number.
        Moved nowhere.

11571.  April 20, 2004        SAD, JMFIT, IMFIT           Eric
        The initial values for the max deconvolved Gaussian in all 3
        were the same and were wrong.  Changed to gues max and min =
        formal solution and go from there.  Typos were found in the
        IMFIT version of the array deconvolver.  SAD did not return
        the correct position angle in SAD's units (90 degrees
        different from the world incl IMFIT/JMFIT) for the bandwidth
        smearing term.  This was most visible at the deconvolution
        stage but affected the initial guesses as well.
        Moved nowhere.

11572.  April 21, 2004           CLCAL               Eric
        Changed SN2CL so that it does 2PT on INTMOD 0, a new SELF on
        INTMOD 1, and the old SELF (nearest) in INTMOD 2.  The new
        SELF adds a loop over source ID (having first found all source
        IDs) and does 2PT but using the source IDs one at a time.
        Changed CLCAL Fortran and help to rename the old mode SELN and
        to describe the new SELF and set INTMOD correctly.  Changed
        BLAPP for the required value of INTMOD now = 0 for the
        hard-coded 2PT it uses.
        Moved nowhere.

11573.  April 22, 2004        VLBAFPOL/CRPL/SNPL        Amy
        Fixed VLBAFPOL's handling of one IF, one freq..  Per a users
        request, VLBACRPL/SNPL only do a TVINIT if DOTV>=1.
        Moved nowhere.

11574.  April 22, 2004           UPDUPDATE               Eric
        Script to be used later to update a MNJ site for changes to
        XAS, POPSDAT, START_TVSERVERS etc etc  It is not necessary for
        the AIPS Manager to do things by hand except in the rare cases
        of changes to READLINE, PP.FOR, F2PS.C, et al.  These require
        at least knowledge of the local compilers and so need to be
        done by hand, but they should almost never change.
        This is not used yet - I am going on vacation and do not dare
        change the MNJ yet.
        Moved nowhere.

11575.  April 22, 2004             UVFND                   Eric
        Previously it checked only channels CHANNEL to CHANNEL+n where
        n was determined by the width of the window, number of
        correlators, etc.  Added BCHAN and ECHAN to the adverbs and
        all of those are tested.  The same channels as before are
        printed.  Found a bug in which the frequency and number of
        channels could be wrongly determined in the print routines.
        Moved nowhere.

11576.  April 22, 2004      IMEAN, SAD, IMFIT, JMFIT        Eric
        Changed to exclude pixel values which are exactly zero from
        the fits for the actual image rms.  Remarked on this is the
        help file, citing the use of REMAG to set blanked pixels to
        zero.
        Moved nowhere.

11577.  May 3, 2004              BPLOT                   Eric
        To get the plot file to have all the parameters set, the
        default PIXRANGE was filled in.  This led to the next plot
        (e.g. next time or antena) to use the PIXRANGE of the first
        plot.
        Moved nowhere.

11578.  May 3, 2004              STARS                   Eric
        Changed STARPL back to allow for plotting stars at the edges
        of a field.  Changed PLOTWO to use local variables for the
        plot positions do the limiting of a line to the field will not
        change the calling variable.
        Moved nowhere.

11579.  May 3, 2004             UPDUPDATE                Eric
        Fixed Logfile to LogFile and got the putbck system to accept
        the file as executable.
        Sent out warning that this file needs to be ln -s in the
        user's update area.
        Moved nowhere.

11580.  May 4, 2004             POSSM                   Eric
        Added code to FILLPL to prevent exactly constant amps and/or
        phases from causing the plot routine to lose its cookies.
        Moved nowhere.

11581.  May 4, 2004          MNJ                       Eric
        Changed AIPSUPD to call UPDUPDATE before the UPDCOMRPL to make
        sure it gets done.  This might make trouble if POPSGN.FOR has
        had to change for something in POPSDAT.HLP.  However, in case
        of failure of COMRPL, knowledge of the changes to the text
        will disappear so one must run UPDUPDATE in any case.
        Changed UPDCONTROL which spotted changes in files and issued a
        special mail message.  Changed it to notice (with corrected
        names) changes in things that UPDUPDATE cannot handle and to
        tell AIPS Managers some clue of what to do.  Fixed the info re
        READLINE and dropped XAS and POPSDAT sections.
        Moved nowhere.

11582.  May 5, 2004      OFMFILE web address               Eric
        Kristy Dyer found a web address in Japan that has images of
        all the standard AIPS OFMFILEs.  Added this address to the
        help files for GREYS, KNTR, LWPLA, OFMGET, PCNTR.
        Moved nowhere.

11583.  May 5, 2004       SPLIT, SPLAT, AVSPC              Eric
        SPLIT and SPLAT attempted to reset the reference frequency and
        rescale u,v,w when averaging all of the channels.  This was
        fine for the case of no averaging across IFs, but ignored the
        fact that the IFs are at different frequencies (and
        potentially channel widths, channel selection, etc) when the
        IFs were averaged.  Fixed the average IFs to compute the
        average frequency as accurately as possible.  Added notes to
        the help files to warn that the average frequency is a
        straight average while the data average takes into account
        data weights and flags which often differ between IFs.
        AVSPC was changed to eliminate the AVIF option - it claims to
        work for multi-FQ data sets and the like so fixing the scaling
        for averaging IFs is too tricky.  However, it is so simple
        that one would like to retain it rather than require SPLAT.
        Moved nowhere.

11584.  May 5, 2004              UPDUPDATE               Pat/Eric
        Added redirect of standard error to standard out for make XAS
        and RUN POPSGN.
        Moved nowhere.

11585.  May 6, 2004           CookBook                    Eric
        Changed the wording regarding AVSPC in Chapter 9.  Also edited
        Chapters 0, 4, 5, 10, and A to drop the doFIG is statements.
        Chnaged COOK9.PS and COOKBOOK.PDF for the first.  No PS
        changes for the others.
        Moved nowhere.

11586.  May 7, 2004             CONVL                   Eric
        Changed it to accept blanked images as the main image but not
        the image with which the main image is convolved.  Blanks are
        converted to 0.0.  On output the image is reblanked at the
        same pixels that were blanked previously if new adverb DOBLANK
        > 0.
        Moved nowhere.

11587.  May 11, 2004              MFPRT                   Eric
        Added option to print in STARS format and to use sexagesimal
        format for coordinates (rather than do offsets) with the basic
        print format.  Fixed it to omit spectral channel when there is
        only one frequency image plane.  Fixed scaling of flux to show
        microJy when cutting off at milliJy is inappropriate.  Several
        minor errors were also fixed.  The STARS format has the option
        of using the fit or the deconvolved widths and can have the
        output width scale with source flux (or not) and to have the
        symbol type scale with source flux or not.
        Moved nowhere.

11588.  May 11, 2004            install.pl                Eric
        There were typos ($m was set to 28 or 29 rather than $d) in
        finding the date of yesterday.
        Moved nowhere.

11589.  May 12, 2004            $APGNOT/ATMCA.FOR...HLP   Leonia
        The current phase referencing procedure considers observing of
        one strong calibrator located near the target source.
        Solution found for the delay toward the calibrator applies to
        the target source.
        This procedure works well if the calibrator and the target source
        are very close to each other so atmosphere can be considered
        identical for the two directions. In practice this is not true.
        The new task ATMCA reconstructs the delay at atmosphere toward
        the target(reference) source using the observation of several
        calibrators located at some vicinity of the target(reference)
        source. This method does not require the identical
        atmosphere delay for the target(reference) source and the calibrators
        requiring instead linear representation of the delay along RA, DEC
        and time, which can be corrected for a larger area of the sky and
        time.
        The atmosphere delay at the vicinity of the target(reference) source
        is represented by the following linear combination of the two sky
        coordinates and time:
        DELAY = PH0 + SLRA*DRA + SLDEC*DDEC + SLT*DT
         where   PHO is delay at the point DRA=0, DDEC=0, DT=0
                 SLRA  is  slope of the delay at RA direction
                 SLDEC is slope of the delay at DEC direction
                 SLT   is slope of the delay at time direction
                 DRA is deviation of the reference point at RA
                 DDEC is deviation of the reference point at DEC
                 DT is deviation of the reference point at time
                 The deviations are considered relatively the target
                 (reference) source in sky and in time.
        The data for at least four calibrators (three if time dependence is
        excluded) are used to fit the unknown PH0, SLRA, SLDEC, and SLT.
        PH0 is the solution for delay toward the target(reference) source.
        The task finds the solution for each given time interval (SOLINT)
        independently and apples it to the given CL table.
        Moved nowhere.

11590.  May 12, 2004                   CLCOR                       Amy
        Added option OPCODE='TROP' which works basically identically to
        OPCODE='ATMO' except in 2 ways.  The INFILE should contain the
        total zenith delay (rather than just the correction as for ATMO)
        which is subtracted from the atmospheric model used by the
        correlator (in column ATMOS in the CL table).  This difference
        is then treated almost identically as in OPCODE='ATMO' except
        that a more sophisticated mapping function is used.
        Moved nowhere.

11591.  May 12, 2004           FITTP, FITAB               Eric
        Changed FITTP and fITAB to invoke 1PDm.n formats for double
        precision keyword values rather thna 1PEm.n although the fITS
        format does not differentiate between them in any way.  There
        may be some value in the implication of higher precision.
        Moved nowhere.

11592.  May 13, 2004           $APGNOT/ATMCA.FOR...HLP          Leonia
        Error found at the calculation of the RE/IM correction at
        CL table. Fixed. Some misprints at .HLP file fixed also.
        Moved nowhere.

11593.  May 15, 2004            FILLM, PRTTP             Eric
        Correct the code at the end of file - a short record may
        actually contain more than one short record.  Issue message
        only when the short record is shorter than needed - previously
        it gave a message if the short record was shorter or longer
        than needed.
        Moved nowhere.

11594.  May 17, 2004      FITTP, FITAB, CALWR             Eric
        The table extension data might not have been zero filled if
        the data took fewer than 2880 bytes.  Fixed this.
        Moved nowhere.

11595.  May 17, 2004               models                  Eric
        The model files were messed up by putbck which did not handle
        them as binary but rather put them through a string handling
        business.  Rceomputed the FITS files to zero-fill the CC table
        data record and fixed putbck to handle $AIPSTARS/*.MODEL and
        $AIPSPUBL/*.PDF (was present but mis-spelled) with straight
        copies.
        Moved nowhere.

11596.  May 18, 2004              FRING                    Amy
        When the new feature SOLSUB/SOLMIN was used in FRING, it did
        not properly update the GOTANT variable when going to the next
        solution interval.  The subroutine that writes the SN table uses
        GOTANT to determine which antennas have solution.  This bug
        prevented good solutions from being written to the SN table.
        Moved nowhere.

11597.  May 19, 2004          $APGNOT/ATMCA                Leonia
        The new option creating the output SN table has been added.
        The output SN table includes the delay difference of
        the input SN table and fitted atmosphere represented
        by linear combination at the vicinity of the calibrators
        The output SN table can be useful to see the effect
        of the atmosphere correction.
        The output SN table is appeared at the next after the
        highest existing SN table. The atmosphere correction is
        presented at the output SN table for the CALIBRATOR list
        of the sources.
        Moved nowhere.

11598.  May 20, 2004             LISTR                 Eric
        Changed MATX type 4 to do a proper phase rms (based on Reals
        and imaginaries averaged suitably) rather than an amplitude
        rms.  Changed phase displays to do scaling by powers of 10 in
        degrees rather than simply integer degrees.
        Moved nowhere.

11599.  May 24, 2004        RANDOM, GRANDOM              Eric
        New verb RANDOM returns value for 0 to 1, GRANDOM returns
        Gaussian distributed random number with mean 0, rms 1.
        Changed NEWPARMS, POPSDAT, KWICK (call RANDUM), RANDIN (more
        initialization), and AIPS, DAIP, and AIPSB (to call RANDIN).
        New help files too for GG, RANDOM, GRANDOM.
        Moved nowhere.

11600.  May 24, 2004             SNPLT                   Eric
        The help and code said that SUBARR=-1 would plot all
        subarrays, but the inputs required the vale to be >= 0.
        Changed the limit to -1 and added a comment in the inputs.
        Moved nowhere.

11601.  May 24, 2004              LISTR                  Eric
        Changed help and code to allow gain listings to include all
        subarrays on subarray < 1.
        Moved nowhere.

11602.  May 24, 2004              ISPEC                   Eric
        The computation of velocity/frequency for printing out in the
        case in which the axis is reversed was not correct.  The Z
        pixel wanted to be corrected for the inversion, but internally
        the data are already inverted including the header because of
        the plot routines.
        Moved nowhere.

11603.  May 24, 2004               POSSM                  Eric
        Reversed spectra had bad velocity axis labeling - the total
        number of channels was used which is the number of spectral
        channels times the number of polarizations times the number of
        IFs.  The number of spectral channels is what is now needed.
        checked the text file output and it seems okay.
        Moved nowhere.

11604.  May 25, 2004              ATMCA                 Leonia
        Add the option fitting only two space slopes at the atmosphere
        behavior using only two calibrators. This option can give a
        a good fitting only if the two calibrators and the target source
        are located near a straight line. RMS of the residuals is added
        to the printout.
        Moved nowhere.

11605.  May 25, 2004           SN2CL                   Eric
        Several bugs were exposed by a data set with a bit of missing
        data:
        1. The loop over source and subarray branched to the exit code
           when the end of the input SN table was hit without a usable
           calibration for the current record.  This caused it to omit
           any further subarrays and (now with the new SELF) sources
           that followed the one where the condition was hit.
        2. The second solution got marked as possibly good before the
           check on record number that would show that there was no
           second solution.
        3. The looping to find a second solution treated the last
           record as wanted even after finding out that it was not
           wanted.  Blanking of the gains in this case probably caused
           it to avoid error but it did complicate the logic.
        Moved nowhere.

11606.  May 26, 2004               MBDLY                  Amy
        Fixed annoying feature, where if FREQID was -1 (which is the
        default) then MBDLY would solve for nothing.  Now if FREQID
        or SUBARRAY are negative then they are set to 0, which then
        treated as the default by MBDLY.
        Moved nowhere.

11606.  May 27, 2004           WTMOD                  Eric
        Added SUBARRAY to limit the operation to the requested
        subarray.
        Moved nowhere.

11608.  June 3, 2004       Line printing                Eric
        Wanted to change DOCRT to allow suppression of form feeds and
        extra info when printing to text files.  LPOPEN reused DOCRT
        to convey the line length making this impossible.  So changed
        LPOPEN   Added NACROS as output from LPOPEN, so changes DOCRT
                 only for batch.  Dropped unused code.
        Fixed call sequence in AU1A, AU7, OFMLST, PRTMSG, and PRINTER
        subroutines and in tasks IMFIT, JMFIT, LISTR, MFPRT, PRTAN,
        PRTSD, PRTUV, SHOUV, TXPL, UVFND, UVHOL, UVPRT, RLDIF, CORER,
        OTFIN, PRTAB, PRTAC, PRTCC, PRTTP, SAD, UVDIF, COHER, DTSUM,
        HFPRT, TBDIF, BLSUM, ISPEC.
        PRTLIN   Changed to suppress the form feed character when
                 going to text files and DOCRT < -1.5.  Suppress all
                 start-of-page stuff when DOCRT < -2.5.
        PRTALN   As PRTLIN.
        INPUT    The test on DOCRT ignored the fact that its value is
                 forced to <= 0 on batch jobs.
        Changed task and help files to implement these options fully:
        BLSUM    COHER    CORER    DTSUM    HFPRT    IMFIT    ISPEC
        JMFIT    LISTR    MFPRT    OTFIN    PRTAB    PRTAC    PRTAN
        PRTCC    PRTIM    PRTSD    PRTTP    PRTUV    RLDIF    SAD
        SHOUV    TXPL     UVDIF    UVFND    UVHOL    UVPRT
        Some fixing for batch jobs was also required.
        Fixed COHER - it used an improper format to read incorrectly
        the date string.  Changed it to use DATEST.
        Fixed CORER - it worked on compressed data only if those data
        had 1 spectral channel and 1 IF.
        Changed TBDIF to implement these options and to allow for
        printing only those lines that differ.  Changed it to do min
        match at some level on the column names since PRTAB does not
        show the full length of long column names.
        Changed verb subroutines and help files to implement:
        EXPLAIN, HELP (s.r. AU1A)       OFMLIST (s.r. OFMLST)
        PRTHI         (s.r. AU7)        PRTMSG  (s.r. PRTMSG)
        Moved nowhere.

11609.  June 4, 2004             FITTP, FITAB            Eric
        Some FITS readers (major ones!) cannot read D format numbers.
        Changed formats of double precision numbers back to E format.
        Moved nowhere.

11610.  June 4, 2004             IMDIST                  Eric
        The position angle needed to be done with an ATAN2 not an
        ASIN.  Fixed AU9.
        Moved nowhere.

11611.  June 9, 2004              CALIB                   Eric
        Last Oct 1 change limited APARM(1) to > 2.  Some users make
        use of pure baseline at a time solutions and require Min
        antenna to be allowed to be 2.
        Moved nowhere.

11612.  June 12, 2004               VPLOT                 Eric
        The ratio operations (POLPLOT = e.g. RL/RR) did not work
        right.  The averaging routine (over frequency) did not know
        about the offset to the data and the later routines assumed
        there was an offset when the averaging routine could not do
        one.  The time-averaging section ignored the POLPLOT option
        entirely.  Fixed these and the labeling.
        Moved nowhere.

11613.  June 14, 2004          IMAGR                  Eric
        The error handling for a field that had no components could
        lead to that field showing up as "second best" but better than
        any other field but the field would not be taken again.  The
        IGNORE flag has to be in the 2nd best section as well as the
        first best.
        Moved nowhere.

11614.  June 16, 2004           PRINTER, RFI           Eric
        Changed the print object to know the keyword NACROS after the
        printer has been opened.  Changed RFI to call it - DOCRT is no
        longer the size of the print line.
        Moved nowhere.

11615.  June 16, 2004           AIPS                    Eric
        Changed SGLAST so that when it reads a lastexit file it checks
        that it can see INSEQ and INNAME adverbs.  If the file reads
        okay but is trashed this should catch it.
        Moved nowhere.

11616.  June 18, 2004           PCNTR                   Eric
        Had two errors - the polarization vector routine assumed that
        the grey file was being read if grey was plotted but it was
        only initialized if it was going to be used to blacken
        vectors.  The test for 3-D coloring in polarization used an
        uninitialized (0) variable.
        Moved nowhere.

11617.  June 22, 2004               TVFLG                 Eric
        Changed code to ask for subarray on FLAG ANTENNA-DT only when
        there is actually more than one subarray.
        Moved nowhere.

11618.  June 22, 2004           PCNTR                     Eric
        Changed it to allow any of the 4 images to be the contour
        image and any to be the grey image.  Image 1 functions as Ipol
        for clipping and may be a Stokes cube, image 2 in Ppol or Q,
        image 3 is Pang or U, and image 4 is given if needed.  Found
        an error in the background grey image that would cause the
        dodark not to work at the bottom of the image for contouring.
        (CONDRW uses buffers 1 and 2 for contour and background - it
        does not matter what was DBINITed.)
        Moved nowhere.

11619.  June 23, 2004            HELP                      Eric
        Fixed a "bug" in AU1A  - DOCRT=-1 caused HELP to print on the
        line printer when it was supposed to be < -1.  Also changed
        EXPLAIN so the DOCRT=0 will be the terminal not printer.
        Fixed the latter help file, the former said what was intended.
        Moved nowhere.

11620.  June 24, 2004            PCAL, SPCAL               Eric
        PCAL: found that the no reference antenna technique produced
        somewhat peculiar results and erroneous error estimates.
        Changed all methods to choose a reference antenna if none is
        specified.  Corrected the error computation for the ORI-
        method, adding BPARM(2) to suppress it should it give
        trouble.
        SPCAL: Made the same reference antenna changes as PCAL.  Also
        corrected the error computation in the way we did in January
        2001 following Steve Meyer's suggestions in PCAL.
        Moved nowhere.

11620.  June 24, 2004            VLBAARCH                  Lorant
        There is no reason not to run USUBA in the archiver if there
        is (n)one subarray. Before, SUBARRAY was left zero, and if it
        needed a SUBARRAY=1 in VLBAFIX it was not always caught. Here
        we're not trying to save time but to get the best data, so
        better run USUBA to force data in one subarray (if not more).
        Moved nowhere.

11622.  June 24, 2004              CALIB                   Eric
        Users are setting the I = Q + U + V flux in SETJY and then
        expecting CALIB to work.  Put a test in for I=V and have it
        use only I in that case with a message on each source and echa
        IF.
        Moved nowhere.

11623.  June 27, 2004              FLAGR                    Eric
        New task - to edit data in pipelines and the like.  The two
        algorithms at present do a baseline-based and an antenna-based
        flagging on RMSes that are too large within a specified
        averaging time.  This is definitely a test program, putbck now
        to allow some testing.  Algorithms to compare one time with
        another are needed next.  Was called FLRMS for 1 day.
        Moved nowhere.

11624.  June 28, 2004        CLCOR, FITLD                Eric
        Again, FITLD and CLCOR disagreed on coordinates.  Fixed FITLD
        to use the reference date in the output header for precession
        to apparent position.  It was using the REFDATE of the current
        tape file instead.
        Added another OPCODE to CLCOR: 'ANTC' is 'ANTP' except that
        the coordinate shift is applied to the epoch (mean)
        coordinates not the apparent ones.  Added messages to show the
        two shifts and, on ANTC, fix the shifts returned from SOUMOD
        to be the apparent coord shifts for the CL table parts.
        Moved nowhere.

11625.  June 28, 2004             model files             Eric
        Renamed the model files that had array codes in the names.
        Claire meant nothing serious with those codes and they make
        life messy - no the names are simply 3C286_K and Q and 3C48_K
        and Q.  Changed SETJY and CALRD help files accordingly and
        added a warning about coordinate epochs.
        Moved nowhere.

11626.  June 29, 2004          Epoch test              Eric
        Changed
        DUVH.INC     Add parameter DEQUIN for equinox (epch).
        DBCON        Made corresponding change in /CATHDR/ and NWORDS
                     for the tasks local copies of the include.  The
                     epoch test was already done with the headers.
        UVPGET       Pick up epoch.
        SETGDS       Test epoch DEQUIN versus epoch in model headers.
                     Error message and quit.
        Moved nowhere.

11627.  June 29, 2004                DELZN                Amy
        DELZN ignored flagging in the input SN table, i.e. both flagged
        and unflagged records were used for the fitting.  Fixed.
        Moved nowhere.

11628.  June 30, 2004           AIPSLetter                 Eric
        Put back the new aipsletter.  It took new programs to run on
        the MNJ.FTP summary lists.
        Moved to web/ftp site.

11629.  Jule 1, 2004             ATMCA                    Leonia
        The new option (APARM(1)=1) is added. This option allows
        make a correction for atmosphere when there is only one
        additional (to the main calibrator) calibrator.
        This option does not reconstruct the two dimensional atmosphere
        behavior. Instead it reconstructs the atmosphere along the line
        reference  - the second calibrator. If the target source is located
        along (or close) to this line, then the phase correction
        for the target source can be done. The codes for other options are
        modified significantly.
        The help file is completely rewritten by Ed Fomalont,
        describing specifically the observation schedule and data
        reduction to prepare the ATMCA input SN table.
        Moved nowhere.

11630.  July 1, 2004             AIPS                     Eric
        DSKLOK(1) > 0 is a disaster - changed error handling and added
        check and quit on this condition.
        Moved nowhere.

11631.  July 1, 2004              CLCOR                   Eric
        Walter Brisken found something I forgot in CLCOR ANTC fix.
        Moved to AOC this date.

11632.  July 1, 2004             SETFC                    Eric
        Changed help and code to allow user control over points per
        beam (3 default) and max phase error (20 degrees default).
        Since Wmax is known, fix the formulas to use that rather than
        Bmax to set field of view.
        Moved nowhere.

11633.  July 2, 2004          ATMCA                       Leonia
        The phase of the reference calibrator (APARM(1)=1) has been
        added to the estimated correction. The warning about
        maximum angle Calibrator to Reference to Target is added.
        Moved nowhere.

11634.  July 2, 2004           WENSS                 Eric
        The WENSS and WISH catalogs contain multiple-component sources
        twice, once as the various components and again as a sum.  I
        did not realize that and included both in previous WE files.
        The files are now corrected to leave out the sum "sources" and
        to be sorted with a proper numeric sort.  The stronger source
        (> 100 mJy) files are in $AIPSTARS and in the ftp area while
        the all source files are only in the ftp area.
        Moved nowhere.

11635.  July 6, 2004              RECAT                Eric
        Error messages from ZOPEN were blocked to stop the no such
        file message.  Fixed it to show all other ZOPEN messages.
        Moved nowhere.

11636.  July 6, 2004           FILLM                    Eric
        The velocity frame code was not examined properly to check for
        user fixed frequencies and the like.  The result was that a
        frequency appeared in the source table as a velocity.  Added
        some tests to stop this although it probably caused no harm.
        Moved nowhere.

11637.  July 7, 2004            FILLM                      Eric
        Changed $APLUNIX/ZONLIN.C to add an error routine that all the
        other ones call to make a message telling the user that an
        online function has been called from a non-online version.
        The previous error messages were less than obvious.
        Moved nowhere.

11638.  July 7, 2004               TVFLG                   Eric
        Added two more display options - the vector amplitude rms and
        rms/average.  The prevous rms and rms/mean were scalar.  Fixed
        the TVFLG.HLP and HLPTVFLG.HLP to differentiate and show the
        new commands.  This will be helpful in preparing inputs for
        FLAGR.
        Moved nowhere.

11639.  July 8, 2004           ATMCA                      Leonia
        Several changes following Ed's recommendations done.
        1. Weight proportional to the distance CAL-REF added
           when averaging different calibrators (APARM(1).EQ.1)
           This makes less noise output when the secondary
           calibrator is too close to the reference calibrator.
        2. The SN table has copied even when APARM(1).EQ.1
           This error removed.
        3. The last group of points at the SN table have skipped
           because a logical error at the codes. Fixed.
        4. Warning about to big angle CAL-REF-TAR includes now
           specific information about CAL, TAR and the angle itself.
        Moved nowhere.

11640.  July 8, 2004            ZSBIND                   Eric
        This unused Z routine has been causing problems.  It declares
        gethostname to set types but some newer OSs have a different
        declaration.  Moved to $APLCONTR to get it out of the way.
        Moved nowhere.

11641.  July 12, 2004         ATMCA.HLP                   Leonia
        A lot of changes have been done by Ed Fomalont following
        the modification of ATMCA (11639).
        Moved nowhere.

11642.  July 12, 2004             LISTR                     Amy
        If SUBARRAY = 0, OPTYPE = 'GAIN' then LISTR assumed that all
        subarrays were wanted (even if there was only one AN table). If
        a user then tryed to deselect antennas, LISTR did not handle
        this correctly.  Fixed it so that if SUBARRAY = 0; OPTYPE = 'GAIN'
        and antennas are deselected LISTR now assumes SUBARRAY = 1.
        Moved nowhere.

11643.  July 13, 2004            DBCON                   Eric
        The task did not check to see if there are FQID random
        parameters before deciding to make more than 1, renumbering
        the 2nd data set's FQID (usually 1 but of unlike frequency to
        that of data set 1).  Added better tests to avoid this.
        Moved nowhere.

11644.  July 13, 2004           START_TVSERVERS           Eric
        The switch to DISPLAY=":0" when the TV display and host are
        the same overrides a user-set display such as "1.0".  Fixed
        this to only override our "host:0.0"  Note that special
        settings still require TV=local as well.
        Moved nowhere.

11645.  July 13, 2004             PRTTP                  Eric
        Check OUTPRINT=' ' on print levels -3, -4 - fill in a default
        value and warn the user.
        Moved nowhere.

11646.  July 13, 2004            FLAGR                   Eric
        Changed it a lot.  The ANTE one has been corrected to get
        correct antenna-based solutions.  All functions now support a
        clip on flux (after averaging and when appropriate after
        conversion to antenna based).  A new function working over
        time has been added.  An EXPLAIN file was written to I hope
        deal with the confusion over what the task does.
        Moved nowhere.

11647.  July 13, 2004             AIPS                  Eric
        Moved the Copyright statement - it came before the user's
        message file is created and so had error messages.  Looks
        lousy that way.
        Moved nowhere.

11648.  July 13, 2004           DRAWBOX                Eric
        New verb - draws Clean boxes on graphics plane and returns.
        Changed AU5C, POPSDAT.HLP, NEWPARMS.001, and new help file.
        Moved nowhere.

11649.  July 14, 2004           VLBAARCH              Lorant
        Analysts requested to put subarray variable back after last vget.
        Also took the opportunity to explain more in detail the step-by-step
        data handling done to the files, per request/suggestion of a user.
        Moved nowhere.

11650.  July 18, 2004            VECTOR                  Eric
        Changed POPSDAT.HLP, NEWPARMS.001, AU2A.FOR and created
        VECTOR.HLP to make a new adverb to control whether vector or
        scalar averaging is done.
        Moved nowhere.

11651.  July 18, 2004            FLAGR                   Eric
        Added flagging on weights and optype GAIN which combines all
        sources in the TIME operation dividing the amplitudes by the
        apparent source amplitude first.  Added VECTOR as adverb.
        Moved nowhere.

11652.  July 19, 2004         perl                      Eric
        Added versions to check_version.pl in $SYSPERL.
        MOved nowhere.

11653.  July 19, 2004           TECOR.HLP                Amy
        Added alternate ftp site to get ionex files.
        Moved nowhere.

11654.  July 20, 2004           INPUT                Eric
        Suprisingly, OOP tasks end with a direct call to an AIPS mid
        level routine of the old style (DIE).  Created subroutine
        OUT2AV as a public function to return adverbs from an object
        to aips (if needed) and then shut down the current task.  It
        uses a private function OUSTOP also added to INPUT.FOR.  The
        former can replace the direct calls to DIE in order to add the
        usual level of obfuscation present in OOP.
        Moved nowhere.

11655.  July 20, 2004             FINDR                 Eric
        New task - like FLAGR OPTYPE = 'TIME' and 'GAIN' but designed
        to find the averages and print them and return a summary in
        adverbs to pipelines.
        Moved nowhere.

11656.  July 20, 2004            FLAGR                  Eric
        Change PRTLEV to match FINDR and fix minor typos and a weight
        solution on singletons.  Improve grammar in explain file.
        Moved nowhere.

11657.  July 20, 2004           DDT, Y2K                Eric
        Recomputed masters since CALIB and VTESS have changed.
        Moved to ftp site.

11658.  July 21, 2004            LISTR                   Eric
        Put the scaling of phases under user control.  DPARM(7) must
        be > 0 or phases and angles are in integer degrees.  Minor
        other corrections made.
        Moved nowhere.

11659.  July 21, 2004        EHEX, REHEX                 Eric
        Make adverbs DENUMB, EHNUMB in POPSDAT.HLP, NEWPARMS.001,
        EHEX.HLP, REHEX.HLP, and AU8.FOR.  These function as in/out
        adverbs for verbs EHEX and REHEX.
        Moved nowhere.

11660.  July 21, 2004          TVLOD                     Eric
        Changed TVWIND subroutine to honor TXINC < -1, TYINC < -1 even
        if the window has to be squeezed,
        Moved nowhere.

11661.  July 21, 2004        VLBAARCH                    Lorant
        Since USUBA is run by default, the NX table was left out. Fixed
        Moved nowhere.

11662.  July 22, 2004          modeling                 Eric
        The source models made from subimages have pointed out the
        dependece AIPS model routines have on the image size of the
        model image even when using the CCs.  Changed UVMTYP and
        SETGDS to call new routine FORCED to check the image
        dimensions.  If they are not a power of 2 or are less than 128
        DFT will be forced on CMETHOD = ' ' and will be subject to a
        warning message when 'GRID' has been forced (in modeling tasks
        that use SETGDS).
        Moved nowhere.

11663.  July 23, 2004            CALIB                   Amy
        Fixed CALIB so that it writes the SOLSUB and SOLMIN in the
        history file if they are set.
        Moved nowhere.

11664.  July 27, 2004           APCAL                   Amy
        Added the Trec and Tau0 that were used in the opacity correction
        to the history file.  Previously only the input Trec and Tau0
        were in the history file.
        Moved nowhere.

11665.  July 27, 2004     Weights in solutions             Eric
        The correct data weights when divided by a model or converted
        to only phase should be multiplied by AMP ** 2 where AMP is
        the amplitude being divided into the data sample.  When we
        made this change to UVDOUT however more solutions began to
        fail.  So we are adding a weight modification done after
        conversion to "correct" 1/sigma**2 weights and data averaging
        but before the data are solved for antenna-based gains or
        fringe fits.
        (1) Changed POPSDAT, NEWPARMS to make adverb WEIGHTIT.
        (2) Changed GCALC, GCALC1, GCALC2, NCALC to do correct
            weighting when mode is 2 (amplitude independent) and then
            to call REWAIT, a new routine to apply WEIGHTIT to the
            weights.
        (3) Changed CALIB.FOR and .HLP  to offer WEIGHTIT.
        (4) Changed UVUTIL s.r. SLFCAL to pick up WEIGHTIT and pass it
            in the MODE parameter to SLFPA which calls the GCALC
            routines.
        (5) Changed SCMAP and SCIMG Fortran and Help files to add the
            WEIGHTIT adverb and to pass it on in as needed including
            TELL. Fixed declarations in SCMAP to avoid unused variable
            messages.
        (6) Changed FRING and KRING to correct the data weights by
            amplitude squared first and then WEIGHTIT before they are
            "averaged" (usually essentially no time smoothing, just
            placing in the arrays for fitting).  Also fixed history to
            record SOLSUB and SOLMIN if they are used.
        Moved nowhere.

11666.  July 27, 2004            GREYS                       Eric
        In true color plotting the pix ranges set by APARM were
        ignored when plotting the images and the wedges.  Now they are
        properly used.  Step wedge labels are for the red image - a
        fact added to the help file too.
        Moved nowhere.

11667.  July 28, 2004          FLAGR                   Eric
        The task did not handle the choice of which FG table to copy
        right and neglected to change the table sort order to
        unknown.
        Moved nowhere.

11668.  August 3, 2004            FILLM                 Eric
        An out antenna is VLA:OUT not just OUT so the test to ignore
        out antennas was ignored.
        Moved nowhere.

11669.  August 5, 2004          install.pl              Eric
        The $INSTALL_FROM_CD was treated as a logical one place where
        the compiled tools such as F2PS are supposed to be copied.
        Changed that test to looking at the string value like all the
        rest.  I do not see how the CD install works anyway!
        Moevd nowhere.

11670.  August 8, 2004       SCANLENG              Eric
        New adverb in POPSDAT.HLP, NEWPARMS.001.
        Help files for WEIGHTIT and SCANLENG.
        Moved nowhere.

11671.  August 8, 2004      FINDR, FLAGR              Eric
        Added VDIF OPTYPE to do antenna-based amplitude of the vector
        difference between a SOLINT averaged data point and the
        SCANLENG averaged data surrounding ot.  FINDR tells one about
        it and FLAGR does flagging.  Also added more messages to FLAGR
        on PRTLEV to show individual flags and questionable points
        too.
        Moved nowhere.

11672.  August 9, 2004             Y2KLOAD             Eric
        Changed procs:
        1. The checker of uv data now takes an argument of the flux
        level and L and H use 0.5 rather than 0.05.
        2. The L and H VTESS now set FLUX = -SCALR3/10 which seems to
        get convergence where a FLUX constarined vtess does not.
        New data to anonymous ftp site.
        Moved nowhere.

11673.  August 9, 2004        FINDR, FLAGR               Eric
        Found a gross addressing error - how did it work?
        Moved to AOC this date.

11674.  August 11, 2004        IMAGR, models             Eric
        Changed:
        QUVUTIL   Added calls to set FLDSZ before model subtraction or
                  division to make sure it is set.
        FORCED    Changed call sequence to look at all fields at once
                  and to base decisions on more global image size
                  parameters.  If the minimum is < 64 or the average
                  <= 128 or any < 768 are not power of 2, then FORCED
                  is true.
        UVMTYP    Change to call FORCED for all fields at once
        SETGDS    Change to call FORCED for all fields at once
        Moved nowhere.

11675.  August 11, 2004         FINDR, FLAGR             Eric
        Added OPTYPE VRFI to do baseline-based amplitude of the vector
        difference.  Kept working on explain sections.
        Moved nowhere.

11676.  August 12, 2004             TVRGB                 Eric
        The formats used for certain parameters did not allow for
        really large images to be put out in PostScript correctly.
        Moved nowhere.

11677.  August 12, 2004         FINDR, FLAGR             Eric
        Pulled out subroutine ROBUST to dfo robust averages in an
        array.  Changed FINDR and FLAGR to use ROBUST everywhere.
        This caused me to find wrong RMSes being printed by FINDR
        (they were 3 times too large), blanked solutions being handled
        and printed by FLAGR.  FLAGR TIME OPTYPE now has the
        possibility of flagging correlators for all times.
        Moved nowhere.

11678.  August 14, 2004             IMAGR                 Eric
        Changed:
        1. QCLEAN to control SDI Clean differently.  It should be
        based on the fraction of pixels in the Clean windows having
        residual values toward the upper part of the histogram.  So
        IMAGRPRM(4) now selects SDI Clean when the fraction of pixels
        having residual value greater than half the peak residual
        exceeds IMAGRPRM(4).  The lower residual value to include is
        set by IMAGRPRM(19) or 0.333, whichever is greater, times the
        RESMAX.  The default for IMAGRPRM(19) is set by the shape of
        the dirty beam and can have values like 0.06 up to 0.5.
        Previously the lower residual value was set by RESMAX divided
        by (1 + GAIN * IMAGRPRM(4)) which could be rather too low.
        Worse still, the lower limit might have been applied to a BGC
        Clean rather than the limit carefully found to put MAXPIXEL
        pixels into the Clean inner loop.
        2. IMAGR.HLP to change the SDI parameters.
        3. HLPCLEAN.HLP to describe several TV options that were
        omitted including the ones involved with the SDI options.
        4. QCLEAN to add header keywords CCFLUX (total Clean flux in
        this field - not just the total of this field's CC file) and
        CCTOTAL (total Clean flux over all fields).
        Moved nowhere.

11679.  August 14, 2004         Y2K Huge                  Eric
        Use WEIGHTIT=1 for Huge.  Compute new masters and make them
        available since the new approach to VTESS seems to work.
        Moved nowhere.

11680.  August 15, 2004           TVFLG SPFLG               Eric
        Changed to display the current pixrange in the status line(s).
        Moved nowhere.

11681.  August 17, 2004             DFQID                  Eric
        NEW TASK: Renumbers FQ IDs inside a data set.
        Moved nowhere.

11682.  August 17, 2004           VLBAARCH+HLP              Lorant
        Changed VLBAARCH to only flag weights below 0.1 (versus 0.7),
        because this is the archive and that should be as complete as
        possible. VLBAPIPE (or the user) should flag what (s)he thinks
        is bad data with UVFLG, not the archiver. <0.1 is defenitely
        bad in uncompressed data (i.e., weight is per IF). NB I still
        need to test this added flagging after putting it in VLBAPIPE.
        Also, in some experiments the PI uses Doppler tracking per each
        source, which may result in freq-ID's that differ only in the
        5th decimal of the frequency. As CHAR(freq) uses a F9.4 float,
        the name of the files may not be unique in the 4th decimal. I
        changed the naming convention a bit to make sure that for each
        frequency-ID we have an unique name - by appending a freq-ID#.
        Moved nowhere.

11683.  August 18, 2004           WHATSNEW              Eric
        Updated the web page dec04.shtml and took that list to the
        WHATSNEW help file (throwing away all the obsolete info it
        contained).
        Moved nowhere.

11684.  August 25, 2004           UVFND                 Eric
        The VCLP option was not really functional - there was
        elaborate code to set the selection of which APARM to use and
        then the parameters that were set were never used.  Made the
        code simpler.
        Moved nowhere.

11685.  August 25, 2004           PBCOR                  Eric
        Changed help file (explain) to reflect the new adverb names
        and to show the correct cutoff for beam value.
        Moved nowhere.

11686.  September 1, 2004   DELZN.HLP AIPSMEM110.PS       Amy
        AIPSMEM110.PS (Strategy for Removing Tropospheric and Clock
        Errors using DELZN) was put in the system and it is now
        mentioned in DELZN.HLP.
        Moved nowhere.

11687.  September 1, 2004   $APLNOT/JPLEPH.FOR            Leonia
        The new software package includes JPL software to calculate
        position of the solar planets.
        Moved nowhere.

11688.  September 1, 2004       FIXBX                    Eric
        New task - will convert Clean boxes from old boxfile to the
        facets of a new boxfile.
        Moved nowhere.

11689.  September 1, 2004        PLOTR               Eric
        Fixed a test on line type - an absolute value was needed to
        get the legitimate test to see that the symbol was desired.
        Moved nowhere.

11690.  September 7, 2004      CLCOR                      Leonia
        The new opcode 'SUND' has been added. This opcode corrects
        the extra time delay caused by the bending of the light ray
        passing through the gravitational field of the solar system
        planets.
        The VLBA correlator (before September 2004) carries out this
        correction considering the source locates at the infinity.
        This option removed the correlator correction and put the
        correction taking into account the actual position of the
        source inside of the solar system.
        The correction is carried out only for the one source
        (located at the solar system) given at the adverb SOURCE.

11691.  September 8, 2004         GAL                 Eric
        Raised buffer size to 1024x1024.
        Moved nowhere.

11692.  September 16, 2004      SHADO                    Amy
        SHADO would croak if the UVCON antenna files in AIPSTARS
        were used as the INFILE, even though the file format was
        the same.  This is because SHADO did not ignore comment
        lines.  Fixed.
        Moved nowhere.

11693.  September 21, 2004        CLCAL.HLP              Amy
        Clarify what happens when multiple SN tables are used,
        either for in OPCODE='MERG' or to apply to a CL table.
        The SN tables are simply concatenated, so this feature
        is not intended for multiple SN tables with incremental
        calibration of the same source(s).
        Moved nowhere.

11694.  September 22, 2004          ACOUNT                 Eric
        Replaced some GO TO's with IF-THEN-ELSE to stimulate the
        putbck check sum code.
        Moved nowhere.

11695.  September 22, 2004        JPLEPH.FOR             Leonia
        The new version with Bryan's fix of the bug in annual
        aberation for J2000.
        Moved nowhere.

11695.  September 22, 2004         install.pl             Eric
        Walter Brisken suggests changing the start line to
        #!/bin/env perl
        rather than a specific perl version.
        Moved nowhere.

11696.  September 23, 2004          GAL                   Eric
        Changed it to: (1) handle 1536x1536 images, (2) scale the plot
        symbol by FACTOR and use SOLCON for the convergence criterion,
        and (3) return the APARM adverbs converted to fit answers from
        the initial guesses.
        Moved nowhere.

11697.  September 23, 2004            CLIPM               Eric
        Added flag on max weight, moving APARM(6-9) to APARM(7-10).
        Moved nowhere.

11698.  September 23, 2004          SPFLG                 Eric
        Added option for vector rms and rms/mean as well as scalar
        which was already there.  Fixed help file and HLPSPFLG for
        this.  Fixed a units thing in TVFLG.
        Moved nowhere.

11699.  September 24, 2004        CLCOR                  Leonia
        OPCODE = 'SUND'.
        The error in JPLEPH (see 11695) is taken care. The error
        reading the input file is fixed.
        Moved nowhere.

11700.  September 27, 2004         POSSM                 Amy
        POSSM has the ability to divide by 'channel 0', the user
        can define what channels to use with BPARM(2-3).  POSSM
        set BPARM(3)=BPARM(2).  Fixed.
        Moved nowhere.

11701.  September 28, 2004       CDi_j                  Eric
        Changed PCHDR which interprets the CDi_j and PCi_j keywords.
        They can contain skew not only in the two possible "rotation"
        angles but also in funny increments.  Changed it to average
        the increments obtained by dividing by cos(rot) and those
        obtained by dividing by sin(rot) and to report any serious
        differences in the results.  Affects AIPS (TPHEAD), IMLOD,
        UVLOD, FITLD.
        Moved nowhere

11702.  September 28, 2004           TVALL             Eric
        This proc had a bug - it cleared graphics channels 2, 4, and 8
        although only GRCH and 8 are used.  Fixed that clearing and
        moved the TVON command to later in the proc - all in POPSDAT.
        Moved nowhere.

11703.  September 30, 2004         FITTP, FITAB          Eric
        Clarified and improved the defaults for CATNO in help and
        code.
        Moved nowhere.

11704.  September 30, 2004        FLAGR, FINDR           Eric
        Pulled ASOLVE and VSOLVE from the two tasks and added robust
        computation of the antenna-based solutions.  Added code to
        both to flag or report on closure error statistics.
        Moved nowhere.

11705.  October 4, 2004         POPSDAT                      Eric
        My revised TVALL turned on the TV after TVWED and it must be
        on before TVWED.
        Moved to AOC this date.

11706.  October 4, 2004             PCNTR                    Eric
        Fixed a MAPCLS loop to do all 5 possible on's.  I added one to
        allow all images to be used for all things and did not
        increase this loop.
        Moved nowhere.

11707.  October 6, 2004            SMOOTH                   Eric
        Changed:
        CALIB        Wrote user adverb not SMOOTH (with defaults
                     completed) to HI
        SPLAT        as CALIB
        SPLIT        as CALIB
        ACFIT        as CALIB; also used DOSMTH as logical
        SPCAL        Changed init of DOSMTH to 0 from FALSE
        ISPEC        Allow SMOOTH(1)=5-8 to mean 1-4.
        WETHRC        Allow SMOOTH(1)=5-8 to mean 1-4.
        DSEL.INC     DOSMTH becomes an integer
        DATGET       Test DOSMTH=1 to do before bandpass application
                     and =2 to do after
        SELINI       Init DOSMTH=1
        UVGET        On init call SETSM always, not testing DOSMTH.
        SETSM        Set DOSMTH = 0, 1, or 2 and make functions 5-8
                     the same as 1-4 but applied after BP
        CALEDIT      Change DOSMTH to integer and set init to 0.
        Changed HELP files re SMOOTH:
        SMOOTH  ACFIT   BLING   BPASS   CALIB   CLPLT   CPASS
        DECOR   EDITR   FRING   FRPLT   HORUS   IBLED   IMAGR
        ISPEC   KRING   LISTR   POSSM   RLDIF   SHOUV   SPFLG
        SPLAT   SPLIT   TVFLG   UV2TB   UVFIT   UVHOL   UVIMG
        UVPLT   UVPRM   UVPRT   VPLOT   WETHR   WIPER
        Moved nowhere.

11708.  October 9, 2004             SPFLG                     Eric
        Added option LOAD LAST BASELINE to go backwards through
        baseline numbers.  Otherwise a mistaken LOAD NEXT BASELINE
        leads to a serious hastle to get backwards.
        Moved to AOC this date.

11709.  October 11, 2004         ATMCA                     Leonia
        Interpolation along the elevation has been added as a
        new option (APARM(1)=5). SN table has been created now
        for APARM(1)=1,5.
        Moved nowhere.

11710.  October 15, 2002        ATMCA.HLP                Leonia
        Modify the help file in accordance of the code correction
        (11709). Clarified list of the source corrected at output
        SN table
        Moved nowhere.

11711.  October 15, 2004         Y2K                    Eric
        Updated the help and explain for huge and for the move to the
        aoc from cv.  Update ddt.html on the web site.
        Moved nowhere.

11712.  October 17, 2004           WIPER                Eric
        Added a line around the plot and at zero in each axis.  The
        line is in graphics channel 5 and so is overridden by the data
        if needed.  Added comment on this to help file.
        Moved nowhere.

11713.  October 18, 2004        head/tail        Eric/Walter Briskin
        Walter pointed out that the grammar of the unix utilities head
        and tail has changed to "head/tail -n L" from "head/tail -L"
        to show L lines.  Fixed $INSUNIX files CDSETUP, INSTEP1, and
        REGISTER and $SYSUNIX files AIPSPATH.CSH, AIPSPATH.SH, LIBR,
        PRDEVS.SH, START_AIPS, TVDEVS.SH, UNIXSERVERS, XASERVERS,
        ZLASCL, COMLNK, COMRPL, and SYSETUP.  This should test the new
        capabilities of the MNJ nicely.
        Moved nowhere.

11714.  October 28, 2004     $APLNOT/SNAMBG.FOR            Leonia
        The new subroutine SNAMBG reads the input SN table, calculates
        phase for each row IF and stoke and then solves 2 PI ambiguity
        for each antenna and source.
        The value of the ambiguity solved phase (in degrees) is recorded
        into the REAL column of the output SN table. IMAG column of the
        output SN table is equal zero.
        Having used the output SN table should be deleted either inside
        of the main routine (DELEXT) or outside using the verb EXTDEST.
        Moved nowhere.

11715.  November 1, 2004     $APLNOT/SNAMBG.FOR            Leonia
        The sorting information was lost at the output SN table.
        Fixed.
        Moved nowhere.

11716.  November 1, 2004      Plotting beams            Eric
        It can be annoying if the plot interferes with the plot of the
        beam.  Changed:
        PLTBEM   To set integer corners rather than floating to match
                 PLTBSZ
        PLTBSZ   Version of PLTBEM to return the pixels used to plot
                 the beam so that the plot programs may avoid them.
        CONDRW   Changed call seq to take the beam plot corners and
                 blank all data at those pixels so that no contours
                 will be drawn.
        PCNTR    Changed to blank grey scale and polarization plots
                 in the beam plot area if requested and pass beam
                 corners to CONDRW.  It calls PLTBSZ if requested to
                 set the corners first.
        PCNTR    HLP: changed CBPLOT meanings described
        CBPLOT   HLP: changed CBPLOT meanings described
        CNTR     Fixed call seq to CONDRW to do no blanking.
        CCNTR    Fixed call seq to CONDRW to do no blanking.
        KNTR     Like PCNTR plus a messier thing in the contouring
                 since that is doen in panels by KNTR
        KNTR     HLP: changed CBPLOT meanings described
        GREYS    Add CBPLOT adverb and interpret it, call PLTBSZ,
                 blank grey scale appropriately, change call to
                 CONDRW, and finally call PLTBEM.
        GREYS    HLP: added adverb CBPLOT, all meanings described
        Moved nowhere.

11717.  November 1, 2004           YCURSE                   Eric
        YCURSE never checked that the TV coordinates were reasonable
        (i.e. 1 - MAXXTV).  There is a suspicion that wierd values can
        come back from XAS on some systems and the software does not
        defend itself, causing mysterious aborts.
        Moved nowhere.

11718.  November 2, 2004            ATMCA                  Leonia
        Two pi ambiguity is solved using the subroutine SNAMBG.
        The relevant correction of the codes for output SN table
        has been added. Help file is updated but is needed (probably)
        improvement.
        Moved nowhere.

11719.  November 5, 2004          SETGDS                 Eric
        Some tasks wrongly initialized BITER to 0 rather than 1.
        Changed SETGDS to interpret BITER < 1 as = 1.
        Moved nowhere.

11720.  November 7, 2004      Robust gains              Eric
        Changed things to allow a choice of robust gain solutions
        instead of a single-pass solution using all the data:
        POPSDAT  New adverb DOFLAG (putbck 21-Oct)
        NEWPARMS New adverb DOFLAG (putbck 21-Oct)
        GCALC    Rearrange code to do robust looping or to omit it
                 (i.e. do 1 to 10 or 10 to 10 for robust iteration)
                 Call sequence returns fraction data that would heve
                 been omitted from the next solution had there been
                 one.  Call sequence addition also of INIT to say
                 whther gains are init to (1,0) or GLAST and to set
                 the clip level of the last iteration.
        GCALC1   As GCALC.
        GCALC2   As GCALC, return DOFIT to original method which had
                 been obliterated April 3.
        NCALC    As GCALC - required much modernizing of excessive
                 GO TO's - and the previous change to allow for
                 weighting was not done correctly.
        NEVAL    Used by NCALC - tested WT not equal 0, should test WT
                 greater than 0
        CLBPA    Add FRAC to call sequence of above, add to histogram
                 which is added to call sequence.  Pass back the
                 modified weights.  Clip level of last iteration added
                 to call sequence to pass into GCALC et al.  Take the
                 weights returned by GCAL et al and pass them back to
                 calling program.
        UVUTIL   Fix call sequences of above and interpret additional
                 codes in SOLTYPE.  Added FFLAST keyword fetch with
                 2.5 default and added that to calls of GCALC et al.
        CALIB    Interpret additional SOLMODE values, add histogram
                 init and display.  Added adverb DOFLAG interpreting
                 it and passing it along to CLBPA.  Add code flagging
                 data when rejected it on the last pass (including
                 non-robust fits).
        BPASS    Add SOLTYPE adverb.  Drop local GCALC and offer
                 GCALC, GCLAC1, NCALC methods including robust.  Allow
                 divide by channel 0 when autocorrelation data only.
        SCIMG    Interpret additional SOLTYPE values
        SCMAP    Interpret additional SOLTYPE values
        CALIB    HLP : Add robust forms of SOLMODE, amplify DOFIT
                 discussion.
        SCIMG    HLP : Add robust forms of SOLTYPE
        SCMAP    HLP : Add robust forms of SOLTYPE
        BPASS    HLP : Add SOLTYPE adverb.  Upgrade discussion of
                       normalization and BPASSPRMs
        DOFIT    HLP : Amplify discussion considerably.
        SOLTYPE  HLP : Add robust solution values and discussion of
                       how robust method is done.
        FRING    HLP : Amplify DOFIT discussion
        KRING    HLP : Amplify DOFIT discussion
        DOFLAG   HLP : new
        Moved nowhere.

11721.  November 8, 2004           ZLOCK.C                Eric
        Changed $ALPUNIX and $APLBERK versions of ZLOCK.C to issue and
        error message and set an error return only when it is not a
        read-only file system.
        Moved nowhere.

11722.  November 8, 2004             SETGDS               Eric
        The epoch test mentioned ALTSW rather than EPOSW.
        Moved nowhere.

11723.  November 8, 2004          CALIB                   Eric
        The second polarization did not count the solutions with too
        little data.
        Moved nowhere.

11724.  November 8, 2004           PATGN                  Eric
        Fixed the default reference pixel and changed the CPARM
        adverbs so that they are all in arc seconds where appropriate.
        Some were in pixels and some in arc sec.
        Moved nowhere.

11725.  November 8, 2004          EXTLIST                Eric
        Changed AU8A (EXTLIST verb): to account for the addition of
        the CBPLOT adverb in GREYS.  Corrected code for POSSM and
        FRMAP and FRPLT.  All three used the wrong sign for the offset
        parameter and the latter 2 had the version entries placed
        wrongly.
        Moved nowhere.

11726.  November 9, 2004            KNTR                 Eric
        Fixed an error done with the last change (CBCORN negative).
        It took 0 as a request for a beam in a separate panel.
        Moved nowhere.

11727.  November 9, 2004          ATMCA                 Leonia
        The deleting of the intermediate SN table has had the mistake.
        The table was deleted from the catblk header but was not
        destroyed. As the result the task did not work at the sequence
        run. It fixed. Delete of the output SN table (if OPTYPE='PHAS')
        has been added. The help file updated.
        Moved nowhere.

11728.  November 10, 2004           CALIB                 Eric
        A bug in counting in CLBPA caused aborts and failed
        solutions.
        Moved nowhere.

11729.  November 11, 2004         Doc files              Eric
        Updated LSAPROPO.HLP and ABOUT files for ADVERB, CALIBRAT,
        EDITING, GENERAL, HARDCOPY, IMAGING, INFORMAT, OOP, PLOT,
        POPS, PROCEDUR, TASK, TV, UV, VERB, and VLBI.
        Moved nowhere.

11730.  November 12, 2004         BPASS                  Eric
        Added mode 4 for normalizing (BPASSPRM(10)) so that ICHANSEL
        can be a few chnnels if needed and all VLBI channels then used
        for normalizing.
        Moved nowhere.


11731.  November 13, 2004             CookBook             Eric
        Updated CookBook chapters:
        0: Update
        4: SMOOTH revised and warning added, BPASS SOLTYPE added,
           fix file name for CALRD example
        5: IMAGR: SDI parameter meaning revised, mention FIXBX,
           CALIB: SOLTYPE, DOFLAG, WEIGHTIT; FLAGR & FINDR mentioned
        6: DOCRT=-2,-3; POSTSCRIPT.HLP, PCNTR meaning of DOGREY
           changed, CBPLOT enhanced
        7: MFPRT added option
        9: CLCAL 'SELF' changed meaning; RLDIF rather than LISTR for
           polarization; mention FLAGR, FINDR, WIPER; drop use of
           SMOOTH and add warning; downgrade BLING; BPASS discussion
           enhanced and new section on A&P added.  WEIGHTIT in FRING.
        10: POSTSCRIPT.HLP; mark SPFLG figure as dated
        13: Brought up to date.
        C: SMOOTH dropped; BPASS changed; CVEL added
        I: Update
        J: Update
        Recipe: new ones and update
        Also did COOKBOOK.PDF.
        Moved nowhere.

11732.  November 16, 2004            PP.FOR                 Eric
        Changed $SYSUNIX/PP.FOR to translate 'LONGINT   ' to
        'INTEGER*8 ' on all machines except HP and HP2.  They get
        plain 'INTEGER   '.  This is anticipating a use in the 31DEC05
        release, but we need to get the change in now so install.pl on
        that release will build it correctly.
        Moved nowhere.

11733.  November 17, 2004         CCOPTS.SH              Eric
        The Solaris Ultra CCOPTS.SH had a case statement on Fortran
        compilers not on C compilers.
        Moved nowhere.

11734.  November 18, 2004          UPDUPDATE             Eric
        Added updating the $UPDUNIX files in $TST/$ARCH/UPDATE.
        Moved nowhere.

11735.  November 18, 2004        LaCook.mac              Eric
        The LaTeX people helped me debug my macros and found why the
        start of chapters typeset differently when doing one or many
        chapters.  Putbck this fix to preserve it.  Now I should look
        at the macros a bit more...
        Moved nowhere.

11736.  November 18, 2004     UPDSRTUNQ.SED              Eric
        This sed script file had a begin: lable that was unused and
        generated error messages on Macs.  Dropped the unused label.
        Moved nowhere.

11737.  November 18, 2004         CALIB                 Eric
        Adjusted the DOFLAG default: if APARM(6) = 0, the default is
        -2.5 so that the DOFLAG marking will generate some report.
        But if APARM(6) = 1 or more, the default is -99 which means
        that the gain solver will not mark any data bad so that the
        closure checker will receive all data that entered the gain
        solver.
        Moved nowhere.

11738.  November 18, 2004      VLBALOAD.HLP             Lorant
        Changed the upper limit of NFILES from 999 to 9999 to
        accomodate job numbers over 999 to be used in VLBAARCH.
        Moved nowhere.

11739.  November 21, 2004             FILLM              Eric
        Apparently if a run includes Pie Town and Q band at all, the
        antenna positions will be shifted at other bands too.  Fixed
        it to react to > 25 OUT antennas and try the center moved fix.
        Changed the fix to leave a (0,0,0) antenna position unchanged.
        Changed task to print the first 10 bad nominal sensitivity
        messages and then a summary at the end.
        moved nowhere.

11740.  November 22, 2004            SNPLT               Leonia
        The new OPTYPE to plot out REAL or IMAG has been added.
        moved nowhere.

11741.  November 22, 2004        EDITA                  Eric
        Changed QEDIUTIL - it chose badly for which IFs and
        polarizations to process when undoing and redoing flags.
        Moved nowhere.

11742.  November 22, 2004   binary MNJ/install    Wes/Eric
        In preparation for the binary install and MNJ putbck the MNJ
        procs:
        AIPSUPD        Call UPDRSYNC on $UpdRsync else UPDCOMRPL and
                       UPDCOMLNK
        UPDCONFIG      Set $UpdRsync on existence of file
                       $SYSLOCAL/RSYNC.ME
        MAKE.MNJ       $TST/$ARCH/UPDATE to have $UPDUNIX files copied
                       rather than symlinked
        MAKE.BMNJ      New MAKE.MNJ without compiles, copies - just
                       cvs, do_daily, UPDCONFIG
        UPDRSYNC       New - does the rsync for binary
        UPDUPDATE      Copy UPDUNIX files rather than link
        AIPSPATH.SH    Set LD_LINRARY_PATH for binary on the RSYNC.ME
                       file's existence.
        AIPSPATH.CSH   As above.
        Moved nowhere.

11743.  November 25, 2004           CALIB                  Eric
        When there are ony a few baselines the robust method does not
        make much sense nor does the marking of data as questionable.
        Changed GCALC, GCALC1, GCALC2, and NCALC to suppress the
        robust and flagging when the number of baselines is small.
        Added ECALC to do exact gain computations when the number of
        baselines is 1 or 2.
        Moved nowhere.

11744.  November 26, 2004          CALIB                   Eric
        Fixed the scaling of gains in ECALC for two baselines.
        Moved nowhere.

11745.  November 26, 2004       EDITA, EDITR, etc          Eric
        Modified QEDIUTIL to
        1. Allow UNDO of flags for IFs not in core.  It just means
        dropping the flag so that it is not re-applied to the data
        when they are again loaded.
        2. Change flag area, above, and below to do all points rather
        than just un-flagged points.  Required a new OP in EDFLAG and
        a new subroutine EDGTAP (get all points not just unflagged).
        This allows a REDO to really redo the intent rather than just
        those points that were flagged the first time.
        Changed also:HLPEDICL, HLPEDITY, HLPEDIUV for this greatly
        improved REDO FLAGS.
        Changed EDITA.FOR and help to delete the new SN/CL table that
        is created for the editing process.
        Moved nowhere.

11746.  November 27, 2004         UVFIX.HLP              Eric
        Changed the help file to improve grammar and to mention option
        20 in the inputs.
        Moved nowhere.

11747.  November 27, 2004       Buffered TV              Eric
        Fixed ZSSSO2.C - it reset buffered to 0 every time but only
        checked its setting on the first call in a task.
        Moved nowhere.

11748.  November 27-28, 2004     install.pl, UPDRSYNC     Wes/Eric
        Significant overhall of install.pl to install using rsync for
        all the source code and binaries on option -n.  UPDRSYNC is
        the part of the MNJ that does the binary rsync's to
        $ARCH/SYSTEM, LIBR, and LOAD.  It now checks for a file named
        BUILD.INPROG and waits if it is present looping 20 waits of 10
        minutes before giving up.
        We just need to get the aipssrc cron fully up to speed and we
        should have a full binary system for MACPPC and soon for SUL.
        Moved nowhere.

11749.  November 28, 2004          COMB                  Eric
        Fixed history display of operation to show 4-character OPCODE
        rather than a number and to have a value for SUMM in the
        comment field.  Altered help file to admit to SUMM in the
        inputs area.
        Moved nowhere.

11750.  November 28, 2004      install.pl, PAPC.INC      Eric
        Changed the main PAPC.INC to be 20 megabytes.  Changed
        install.pl to have 20.0 as the default and to skip the
        detailed screen when doing binary and CD installs.
        Moved nowhere.

11751.  November 29, 2004         misc                   Eric
        Changed install.pl to skip menu 10 for binary installs.
        Fixed grammar for AIPSPATH.CSH for binary systems.
        Dropped update.pl from CDSETUP.
        Moved nowhere.

11752.  December 1, 2004      CDSETUP, HLPIT.LIS         Eric
        Updated the readline completion file.
        Changed CDSETUP to have 4 modes - the test with -f
        cannot tell the difference between a link file to a real file
        and a simple real file.  Thus, which direction one is
        converting an existing system had to be double checked.  It is
        simpler to ask up front.
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC04 is NEW

***********************************************************************
***********************************************************************

11754.  December 2, 2004      MNJ                      Eric
        Changed UPDRSYNC to drop the work-around for an error and
        AIPSUPD to fix the error, definig $logFile and the error file
        with full pathnames rather than relative ones.  We have been
        leaving LogFile entries lying around.
        Moved from 31DEC05 this date.

11755.  December 3, 2004       more MNJ                Eric
        UPDCVS and UPDREMOVE also had this work-around.  (I hate
        work-arounds, one should always find the general solution.)
        Moved from 31DEC05 this date.

11756.  December 5-6, 2004         more MNJ            Eric
        Changed AIPSUPD to set the LogFile and ErrorFile logicals with
        full pathnames inside the version loop.  Otherwise they were
        set with the calling version which might not be the version(s)
        being done.  Changed AIPSUPD, UPDCONTROL, and UPDCVS always to
        tee every message that goes to ErrorFile also to LogFile.  It
        was inconsistent previously.  Changed UPDUPDATE to do the
        $AIPS_ROOT portions only if UpdDoCopy is YES and to provide
        the $AIPS_ROOT value as a call arg to AIPSROOT.DEFINE.
        Changed UPDREPORT to use the logical LogFile rather than a
        locally relative name.
        Moved from 31DEC05 this date.

11756.  December 14, 2004               SN2CL              Amy
        The IBM compiler exposed a problem in SN2CL (a subroutine
        that does the interpolation for CLCAL) in which it relied
        on floating point arithmetic to give it an exact zero in
        order to not interpolate FBLANK entries.  SN2CL now no longer
        relies on this nor does it do any arithmetic on FBLANKs
        themselves.
        Moved from 31DEC05 this date.

11757.  December 6, 2004   $APLNOT/J2B, B2J            Leonia
        The new subroutines J2B, B2J convert J2000 to B1950 and
        vice versa.
        Moved to 31DEC04 on 14 Dec.

11759.  December 8, 2004         Misc                   Eric
        Changed:
        1. FLATN.HLP   There is no reason to limit IMSIZE to 8192
        2  UPDCONFIG   Wrong home area for MPI.
        Moved to 31DEC04 this date, #1 to Hawaii, #2 to Bonn.

11760.  December 9, 2004   $APLNOT/JPRECS.FOR          Leonia
        The new version of JPRECS can work with both J2000 and B1950
        coordinate systems. Originally JPRECS could work only with
        J2000. The new version converts B1950 mean coordinates
        (if EQUIN=1950D0 and DIR=1) into J2000 using the new
        subroutine B2J (see #11757) and recalculates
        the found J2000 mean coordinates to the apparent coordinates.
        If DIR=-1, then JPRECS converts the given apparent coordinates
        into the mean J2000 and then recalculates J2000 in B1950 using
        the new subroutine J2B (see #11757).
        Moved to 31DEC04 on 14 Dec.

11763.  December 14, 2004              SN2CL              Amy
        The IBM compiler exposed a problem in SN2CL (a subroutine
        that does the interpolation for CLCAL) in which it relied
        on floating point arithmetic to give it an exact zero in
        order to not interpolate FBLANK entries.  SN2CL now no longer
        relies on this nor does it do any arithmetic on FBLANKs
        themselves.
        Moved to 31DEC04 this date.

11764.  December 14, 2004       AIPSASSN                  Eric
        Changed to add VLADATADIR for the VLA site and to add a call
        to LOCALASSN.CSH or .SH if present.
        Moved to 31DEC04 this date.

11765.  December 14, 2004       FILLM                      Eric
        Changed to force the apparent position to be computed by
        Leonia's new JPRECS.  This removes the diurnal aberation
        included by the VLA but it was only right for one time not the
        whole data set anyway.
        Moved to 31DEC04 this date.

11767.  December 15, 2004          MAKE.*MNJ            Eric
        Changed MAKE.MNJ to copy the MAKE.*MNJ files to the update
        work area along with the A*, U*. and R* files.  Also fixed the
        message that comes out ahead of doing this from link to copy.
        MAKE.BMNJ still was not executable in the putbck version.
        Moved to 31DEC04 this date.

11768.  December 17, 2004        FILLM                  Eric
        Users may use fixed frequency for calibrator observations
        followed by tracking frequency for target source line
        observations.  Changed the setting of the velocity type
        keywords to catch tracking modes should they occur after the
        first source.
        Moved to 31DEC04 December 29.

11771.  December 17, 2004  install.pl, MAKE.*MNJ, UPDRSYNC    Eric
        The former left out HP2 architecture from the list of cvs
        forbidden things and the latter including a debug printout.
        Added SYSTEM areas for all architectures to install.pl even
        for rsync installs.
        Moved to 31DEC04 this date.

11773.  December 20, 2004      X band models         Amy/Eric
        Put back models for 3C286 and 3C48 at X band.
        Moved to 31DEC04 automatically.

11786.  December 29, 2004           FILLM                 Eric
        Added check on gain codes with message and flagging of data.
        Moved to 31DEC04 this date.

11787.  December 31, 2004         install.pl             Eric
        Fixed back to 31DEC04 and made to be NEW.
        Moved nowhere - this is for 31DEC04 only.

11788.  January 4, 2005         install.pl,  CDSETUP      Eric
        install.pl was given option -c to mean CDrom as well as the
        test on logical AIPSCDROM=YES.  It was fixed to turn off
        network when CD and vice versa and to test for previous
        network or CD specification not made this time.
        CDSETUP was excessively complicated since it assumed that one
        might be redoing the size of the AP or the XAS or similar
        things even when keeping things on the CD.  These things
        cannot be done.  I suppose that one could fully offload the CD
        to disk and then do a normal install rather than a CD one, but
        not when keeping a light footprint.
        Moved to 31DEC04 (04 version of install.pl) this date.
