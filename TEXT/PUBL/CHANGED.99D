-----------------------------------------------------------------------
;  Copyright (C) 1999-2000
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in Charlottesville.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


                    Changes to 15OCT99


***********************************************************************
***********************************************************************

                 Changes while 15OCT99 is TST

***********************************************************************
***********************************************************************

10202.  March 26, 1999        Object Manager                   Chris
        Fixed the guard for the while loop that establishes the value
        of len in create_llelem (ZOINTD.C in APLGEN). This incorrectly
        used a bitwise and operator instead of a Boolean and operator
        and listed the conjuncts in the wrong order so that there would
        always be a read from beyond the expected length of dim.
        Moved to 15APR99 on this date.

10203.  March 27, 1999       Freq offset in Source table       Eric
        The source table contains a frequency offset as well as the FQ
        table.  Technically, the CL table has both the source offset
        added to the time-variable Doppler offset so one really ought to
        find every time record and make everything go 10 times slower!
        But the Doppler change is small (0.5 km/s max) while the source
        offsets can be large (100 Mhz possible).  So fix things to at
        least take the source part into account.  Actually, UVGET
        already does this in the INIT call when there is 1 source out so
        DSEL.INC    Add parameter SFREQS(MAXIF)
        SELINI      Init SFERQS = 0.0d0
        DGHEAD      Set SFREQS
        CHNCOP      Change call seq to add SFREQS array to call and to
                    add the SFREQS values to the FOFF(if) written to the
                    output FQ table.
        UVDATA      In OUVOPN, save SFREQS from UVGET (INIT) call as
                    SOURFREQ in UVDATA object
        UVUTIL      Changed UVFRQS and UVREFQ to get SOURFREQ from the
                    UV data set and add it to FOFF.  Changed UVFCOP to
                    get SOURFREQ and pass it to OCHNCO.  Fixed them to
                    use BCHAN and ECHAN - wrong channel frequencies were
                    found when BCHAN and ECHAN were still active i.e.
                    not 1 and N.
        QUVUTIL     Added OUVOPN calls in OUVIMG and OUNFWT.
                    Frequencies are known only after an open.
                    OUVIMG found FREQS and then used FREQG for the list
                    of frequencies.
        TABLEUTIL   Changed call seq of OCHNCO to take source offsets to
                    pass on to CHNCOP.
        UVMDIV      Send 0's for SFREQs to CHNCOP - all single source by
                    this routine.
        UVPDIV      Send 0's for SFREQs to CHNCOP - all single source by
                    this routine.
        CALIB       Send SFREQS from DSEL and UVGET(INIT) to CHNCOP.
        PCAL        Send SFREQS from DSEL and UVGET(INIT) to CHNCOP.
        LPCAL       Send SFREQS from DSEL and UVGET(INIT) to CHNCOP.
        FRING       Send SFREQS from DSEL and UVGET(INIT) to CHNCOP. NOT
                    DONE - Ketan has it.
        KRING       Send SFREQS from DSEL and UVGET(INIT) to CHNCOP.
        CPASS       Send SFREQS from DSEL and UVGET(INIT) to CHNCOP.
        BPASS       Send SFREQS from DSEL and UVGET(INIT) to CHNCOP.
        BLCAL       Send SFREQS from DSEL and UVGET(INIT) to CHNCOP.
        MX          Send SFREQS=0.0D0 to CHNCOP.
        Moved to 15APR99 April 8

10204.  March 27, 1999               CLINV                      Eric
        New task to copy an SN or CL table inverting some or all of the
        calibration contained therein.
        Moved to 15APR99 April 8.

10205.  March 27, 1999               FLGIT                     Eric
        Added option to flag on VPOL, fixing up displays and help file.
        Moved to 15APR99 April 8.

10206.  March 27, 1999              FITAB                     Eric
        Added more parameters to the main header as HISTORY AIPS since
        that is what UVLOD uses to build its headers.
        Moved to 15APR99 April 8.

10207.  March 27, 1999               IMAGR                    Eric
        Major gridding bug in 3D disk-based images.  If there is a gap
        in the u coverage so that there are rows beyond the end of one
        swath in which there are no data, GR3DUV was supposed to write
        rows of 0 to the grid file, but it did not.  Instead it wrote
        the next swath to early in the file and did not re-write the
        file at rows near 0.  This should have done very bad things to
        the image - in the case under study where the data weights are
        small (<< 1), the image ended up in the KiloJy range.  With more
        normal weights, horizontal stripes particularly toward the image
        corners were the result.
        Also change IMAGR.FOR to force VERSION to the output channel
        number for line images, so that the correct CC file would be
        created at the beginning.  Restarts failed otherwise even for
        line (although the help says OUTVERS matters only for
        continuum).
        Changed TVMENU to remember the last TV size when it did a menu.
        Then, if that has changed it will redraw all of the menu.  It
        could get confused otherwise.
        Changed QCLEAN to wait 5 minutes for the first TV menu to time
        out and to init the color tables only on the first pass.
        Moved to 15APR99 April 8.

10208.  March 27, 1999            Anticipate                   Eric
        Changed:
        PUVD.INC   Added MAXAFL = max fields in AIPS adverbs
        DGDS.INC   Added LIMFLX = lowest flux to subtract in CC files
        Moved nowhere.

10209.  March 30, 1999            IMAGR, SCMAP                   Eric
        Changed
        SCMAP    Added tests to control whether the LUTs are initialized
                 by self-cal TV function and added longer TIMLIM for
                 first time around.
        QCLEAN   Fixed TIMLIM setting a bit and CLIINF test on cell size
                 which failed sometimes for large cells.
                 Added test to see if anything is found in OVERLAP 2
                 since the last time all images were remade.  If not, it
                 switches to OVERLAP 1 mode rather than go into its
                 infinite loop.
        Moved to 15APR99 April 8

10210.  March 30, 1999          SPLIT                           Eric
        On error in UVCREA, there was a call to UVGET ('CLOS'...)
        although UVGET ('INIT'...) had not been called since the
        previous close.  This caused a failure because DOCAL was true by
        that point, but had been false in the earlier quick UVGET
        open-close.  CLBUFF had been used for scratch purposes to see if
        an SU table existed and so had whatever was in the SU tables's
        first record but 0's for the data area (CLBUFF(257-512)).
        So the SU table was closed with erroneous data and thereby
        effectively destroyed!  This only happened if it had been used
        with LUN 27 previously and successfully - i.e. by a previous
        SPLIT.  Anyway - put in a logical to keep track of whether we
        should do a UVGET close or not.
        Moved to 15APR99 April 8

10211.  March 30, 1999          CALIB                        Eric
        Missed one of the calls to CHNCOP which needed SFREQS added to
        it.
        Moved to 15APR99 April 8.

10212.  March 30, 1999             XGAUS                     Chris
        Fixed the dimensions of the SCRTCH array which was a factor too
        small. It is hard too see how this was missed since XGAUS blew
        up in a spectacular fashion.
        Moved to 15APR99 on this date.

10213.  March 31, 1999         LaCook9                  Ketan/Eric
        I've added information on how to process data that has
        calibration transfer from the correlator.  Also, there is now
        some material on phase-referencing.  I took the opportunity to
        place more emphasis on EDITR.  Probably somewhere it should say
        that EDITR is now the recommended task for initial examination
        and for editing of VLBA data.  Upgraded LaCook0, LaCookI and all
        of the PostScript copies and the html TofC.
        Moved to 15APR99 this date.

10214.  April 2, 1999            KNTR                        Eric
        Added NY adveerb to allow user control of number of panes in Y
        direction.  Changed POPSDAT.HLP, NEWPARMS.001, created NX.HLP,
        NY,HLP.
        Moved to 15APR99 this date.

10215.  April 2, 1999           GETDEL in APLNOT             Chris
        The loop that minimized the number of records to be checked
        for for time/source/subarray/frequency matches assumed that
        the sum of reference time and time interval increased
        monotonically with increasing row number and could therefore
        exclude potentially valid IM table records from the validity
        test. It also assumed that delay polynomials are valid before
        the reference time of the record. Rewrote the preselection
        using two simulated while loops to maintain the correct
        invariant conditions and removed a redundant loop.
        Moved to 15APR99 on this date.

10216.  April 2, 1999           GETMC in APLNOT             Chris
        Fixed a defect that lead to DTIME being calculated relative
        to a record that was either earlier or later than the one
        actually being used.
        Moved to 15APR99 on this date.

10217.  April 4, 1999          UVPRT, UVHOL                 Eric
        Removed holography from UVPRT and fixed bug affecting data
        weight scaling.
        Created new task UVHOL which is like UVPRT.  However, it
        squirrels away all records with matching W (a holography code
        for pointing/phasing) and then prints or writes out only the
        last N of them and then only if at least M are in the set.
        Moved to 15APR99 April 8

10218.  April 5, 1999            ZTPOPN                     Eric
        ZTPOPN set the common parameter TPNAME(ivol) before finding out
        if the tape would actually open.  It then left it set when
        things failed.  In AIPS, after this failure, the set name would
        cause the program to try to dismount an uninitialized on exit
        and to fail on a mount as well.
        Moved to 15APR99 this date.

10219.  April 5, 1999               TABIO                   Eric
        Changed to reset write status in the table header to a no-op on
        CLOS.  Otherwise, a header just read by ZFIO will always appear
        to be in write form and hence confuse a TABIO call.  It was this
        that ultimately caused to destruction of source tables in SPLIT.
        Moved nowhere.

10220.  April 6, 1999             MNJ                      Eric
        The min-mnj did not work properly because UPDCONTROL spelled
        UpdMiniPRG as UpdMiniPrg.  Changed spelling and added TPMON to
        the default list.
        Moved to Kitt Peak and the 15APR99 this date.

10221.  April 7, 1999             LIBR                     Pat
        Added AXLINUX (in fact *LINUX) to the list of systems on which
        "lorder" will not be done for libraries.
        Moved to 15APR99 this date.

10222.  April 8, 1999             BPASS                    Eric
        There was an addressing error that caused bad bandpasses to be
        computed for the first half of a good polarization for an
        antenna when all channels of the other polarization of that
        antenna were flagged.  The bug has been there since 1996 (in
        CVX) and has therefore affected both 1998 releases.
        Moved to 15APR99 April 8.

10223.  April 8, 1999             FITLD                   Chris
        Added code to pick up the observing date from RDATE keywords
        in FITS-IDI files. Normally this will be the reference date
        for the first ARRAY_GEOMETRY file. Previously FITLD only
        looked for DATE-OBS keywords. This was potentially dangerous
        since DATE-OBS is not required in any FITS-IDI tables and
        usually only occurs in UVDATA tables. Added comments to the
        help file describing circumstances in which the current
        scheme might fail.
        Moved to 15APR99 on this date.

10224.  April 8, 1999             KRING                   Ketan

        Added new SOLTYPE = 'NOFT' to totally disable FFT stage.  This
        allows KRING to perform only the least squares and behave just
        like CALIB except that KRING can also solve for rates,
        single-band and multi-band delays. When a solution's SNR falls
        below the threshold, the solutions are now blanked.  The
        minimum gridding time is now used to better grid the data in
        time.  This should fix the 'two-times found message'.
        Unfortunately, the user should now take care to actually enter
        the minimum integration time as accurately as possible [For
        the VLBA, the minimum integration time should be enterred as
        the appropriate multiple of 0.131072].  Once the time-gridding
        routines are overhauled, this nuisance will be abated.  The
        test suite for KRING has now been fully automated.  The SNR
        calculations for the FFT stage and the LS stage have been
        overhauled to be on the same scale.  Two SNRs are now
        calculated in each stage.  The first is labelled SNR and is
        used for threshold testing against the user-supplied SNR
        cutoffs.  The second is labelled SNR/vis and should be used
        for comparing SNRs between the FFT stage and the LS stage.
        Further details supplied upon request.  Some refinements for
        these calculations are forthcoming.
        Moved to 15APR99 on this date.

10225.  April 8, 1999             OMFIT                   Ketan
        OMFIT now supports INFILEs with internal versioning - for
        easier prototyping of models within a single INFILE.  The
        adverb DOFIT has been added to allow the user to supply a
        starting model from POPS.  Any available model-type can be
        specified using DOFIT.  The adverbs have been rearranged.
        Errors in the calculation of machine precision (resulting in a
        lax convergence criterion), the estimation of map noise, and
        construction of a catalogued AIPS file have been fixed.  The
        OMFIT test suite now checks the self-calibration convergence.
        OMFIT now includes the covariance matrix of the parameters in
        the OUTFILE.
        Moved to 15APR99 on this date.

10226.  April 9, 1999            SPCAL, USUBA               Eric
        Fixed bad declaration in SPCAL (like previous fixes in PCAL et
        al) for HSOLTY - thanks to Jean-Francois Desmurs.
        Fixed the table copying routine in USUBA to keep going on error
        as best it can and to close the files no matter what.  USUBA
        needs work but it is too messy to do now.
        Moved to 15APR99 this date.

10227.  April 12, 1999               FITLD                  Chris
        Increased the limit in FQIDs to 256 to conform to the rest of
        AIPS and added a test against this limit in MAPFQI.
        Moved to 15APR99 on this date.

10228.  April 12, 1999     Solaris tape routines            Chris
        Used #ifdef tests to protect reference to MT_ISXY in ZMOUN2,
        ZTAP2, and ZTPWA2 in APLSOL. This symbol appears to have been
        removed in Solaris 7.
        Moved to 15APR99 on this date.

10229.  April 12, 1999          GRDFIT                 Eric
        UVGRID has a -1 that was not include in GRDFIT so it was
        possible to disagree by 1 row on whether a gridding would fit
        without sorting.  Added 2 rows for safety to GRDFIT.
        Moved to 15APR99 this date.

10230.  April 12, 1999          CONFI                    Leonia
        CONFI has not worked for the array design if the number of
        elements exceeds 50. The last version of MMA(ALMA) considers 64
        element.  To meet these requirements the dimmension of the
        relevant array are increased to allow number of an array
        elements as large as 100.
        Moved nowhere

10231.  April 15, 1999           CLINV.HLP              Leonia
        The help file for CLINV lists OPTYPE as an adverb, but it has
        not appeared in the inputs. The HELP file erroniously has not
        listed OPTYPE in its first part. I fixed it
        Moved to 15APR99 by Eric

10232.  April 18, 1999        LSAPROPO, ABOUT files        Eric
        Ran the update tools and found that LSAPROPO is not updated when
        a remove of a help file is done.  So I putbck a new LSAPROPO
        with the fixes suggested by SHOPH.
        Then updated the follow ZZxxxx files for ABOUT lists:
        ZZADVERB.HLP    ZZANALYSIS.HLP  ZZCALIBRAT.HLP
        ZZFITS.HLP      ZZGENERAL.HLP   ZZHARDCOPY.HLP
        ZZIMAGE-UT.HLP  ZZIMAGING.HLP   ZZPLOT.HLP
        ZZPOPS.HLP      ZZTABLE.HLP     ZZTAPE.HLP
        ZZTASK.HLP      ZZUV.HLP        ZZVERB.HLP
        ZZVLA.HLP
        Moved to 15APR99 this date.

10233.  April 18, 1999        CookBook                   Eric
        Updated $DOCTXT/LaCook13.tex and $AIPSPUBL/COOK13.PS  for the
        new about files.  We got lucky and the table of contents did not
        change although the pagination is less than desirable a couple
        of places.
        Moved to 15APR99 this date.

10234.  April 19, 1999          PBUTIL                  Eric
        Bill pointed out that subroutine PBFSCI also needs to call the
        good coordinate routine PSNANG.  It is not used so far, hence
        Moved nowhere.

10235.  April 19, 1999             XTRAN                  Eric
        Fixed to put the angle it finds in the output header.
        Fixed XTRFIT formats to be more precise.
        Moved nowhere.

10236.  April 21, 1999           FITLD, IMLOD               Pat
        Minor enhancement of an error message, in the situation where
        the file size is physically shorter than the headers indicate.
        Some non-compliant FITS writers fail to pad the last block.
        Moved to 15APR99 this date.

10237.  April 25, 1999           UVPRM.FOR                  Leonia
        The routine SETANT and CALL SETANT have had different number
        of parameters:
        CALL SETANT (50, XANT, XBASE, NANT, NBAS, DESEL)  in UVPRM
        SUBROUTINE SETANT (N, XANT, XBAS, NXANT, NXBAS, IANT, IBAS,
        DESEL) in $APLSUB
        As a result the memory confusion occurs. In particular FRQSEL=1
        was zeroed.  I matched parameters in CALL SETANT with the
        subroutine in $APLSUB.
        Moved nowhere

10238.  April 27, 1999         $APGOOP/COHER               Leonia
        COHER has given an idea about the coherence property of the
        baselines and antennas. The new option has been added to
        create the file with variable coherence time as a function of
        baselines and time. This file has the format which match the
        format of input file of the task BLING. So it can be used
        directely by BLING making the variable solution interval.
        This option can be usefull for milimeter interferometry, when
        the phase changes nonlinear and fast.
        Moved nowhere

10239.  April 28, 1999            DATCAL                  Chris
        Fixed a typographic error in the application of dispersive
        delay corrections that corrupted the imaginary part of the
        visibilities.
        Moved to 15APR99 by Pat.

10240.  May 3, 1999           Number of fields             Eric
        Raised the number of fields to 512, without changing number of
        fields in the adverbs:
        PUVD.INC   Changed MAXFLD to 512, MAXAFL is still 64.
        ZREHEX     $APLGEN - new routine to decode extended hex
        AU5C       Decode class name with ZREHEX rather than format.
        SETGDS     Changed to not use DFIL.INC common - UNSETG must be
                   called.  Changed to use ZEHEX to make class name.
        UNSETG     Simplified to ignore DFIL.INC and just clear status.
        IMCREA     Changed to use ZEHEX to make class name.
        QCLEAN     Removed obsolete test on 64 fields for an
                   equivalence.  Fixed TV display which had some odd
                   things and fixed it to do > 64 fields by asking for a
                   field number.
        MX         Limit # fields to MAXAFL, fix adverb declarations,
                   fix class name to EHEX.
        UVMAP      Fix beam classes to xBEM.
        FLATN      Fix class names to use EHEX.
        WFCLN      Fix to limit adverbs and # fields to MAXAFL, name
                   classes with ZEHEX.
        IMAGR      Fix to handle MAXAFL adverbs to MAXFLD fields, to
                   name classes with ZEHEX, and to force 3D when #fields
                   > MAXAFL.  Made it be interactive when #fields > 64
                   and to resume aips from a higher level when not.
        SCMAP      Fixed to handle > 64 fields in TV display.  Changed
                   to set RQUICK false.
        INPUT      Changed AV2INT to leave RQUICK at whatever is
                   returned from the lower level routines.
        EDITR      Changed to set RQUICK = .false.
        EDITA      Changed to set RQUICK = .false.
        SNEDT      Changed to set RQUICK = .false.
        PLAYR      Changed to set RQUICK = .false.
        Moved nowhere.

10241.  May 3, 1999         Stopping use of CC file        Eric
        Added FLUX adverb to tasks to specify the minimum (abs) value of
        a CC component to be used in modeling.  LIMFLX was added to DGDS
        a while back.  Now change:
        SETGDS   Changed to set NCOMP to max on NCOMP(i)=0 only if all
                 NCOMP are 0.  Otherwise, negative and excessive are set
                 to the max.
        UVPDIV   Upgrade comments
        UVMDIV   Allow gridded method on NONEG
        UVMSUB   Allow gridded method on NONEG
        GRDSUB   Upgrade comments.
        GRDCRM   Test for NONEG and LIMFLX and bail out when
                 encountered.
        VISDFT   Quit when flux level < LIMFLX.
        VSFDFT   Quit when flux level < LIMFLX.
        VSCDFT   Quit when flux level < LIMFLX.
        QUVUTIL  Pick up MODFLUX wherever MODNONEG is picked up.
        PBUTIL   Upgrade comments.  Removed sections of unused
                 variables.
        BLING    Changed to handle NCOMP dimension correctly, to honor
                 NONEG, and to add the FLUX adverb.  Also help file.
        BPASS    Added FLUX to help and code, adjust MAXFLD to MAXAFL.
        CALIB    Added FLUX to help and code, adjust MAXFLD to MAXAFL.
        CLPLT    Added FLUX to adverb and changed it to do NONEG and
                 LIMFLX cutoffs.  Made it more standard in handling
                 NCOMP.
        CPASS    Added FLUX to help and code, adjust MAXFLD to MAXAFL.
        FRING    Added FLUX to help and code, adjust MAXFLD to MAXAFL.
        GPHAS    Serious fixes: this has not worked in 1998 since the
                 BCOMP and NCOMP adverbs were dimensioned 16.  Added
                 NMAPS and FLUX adverbs, changed to create multiple
                 field objects for modeling.
        IBLED    Added FLUX to adverb and changed it to do NONEG and
                 LIMFLX cutoffs.  Made it more standard in handling
                 NCOMP.
        LPCAL    Fix class naming to ehex, adjust MAXFLD to MAXAFL.
        KRING    Added FLUX to help and code, adjust MAXFLD to MAXAFL.
        PCAL     Added FLUX to help and code, adjust MAXFLD to MAXAFL.
        UVADC    Added FLUX to help and code, adjust MAXFLD to MAXAFL,
                 changed odd code that tried to allow 0 components in a
                 field to the current natural method, changed to allow
                 NONEG.
        UVCON    Added FLUX to help and code, adjust MAXFLD to MAXAFL,
                 changed odd code that tried to allow 0 components in a
                 field to the current natural method, changed to allow
                 NONEG.
        UVSUB    Added FLUX to help and code, adjust MAXFLD to MAXAFL,
                 changed to allow 0 components in a field (if some NCOMP
                 not 0) for all OPCODEs.
        VPLOT    Added FLUX to adverb and changed it to do NONEG and
                 LIMFLX cutoffs.  Made it more standard in handling
                 NCOMP.  Removed "temporal" statement that eliminated
                 the Z term from non-3D models.
        Moved nowhere.

10242.  May 3, 1999              MAXFLD                  Eric
        Changed formats for field number in QCLEAN, GR3DUV, GRDMEM,
        GRIDUV, IMGMEM, MAKMAP, UVTBGD, UVGRTB, UVGRID.  Also format in
        QCLEAN for interpolated images.
        Moved nowhere.

10243.  May 3, 1999            LWPLA                      Eric
        Created $APLGEN/ZTXREN.FOR to rename text files.  Changed ZLWIO
        OPEN function to return the number of pages and max bounding box
        if the file pre-exists.  Changed LWPLA and help file to allow
        multiple plot files in a single run, making a multi-page
        PostScript file that is only pseudo encapsulated.  If there is
        one page then it is accepable for true encapsulation and most
        functions will over-print multiple pages (which gives one
        ideas...).
        Moved nowhere.

10244.  May 3, 1999           CATN2L in APLSUB            Chris
        Fixed CATN2L to transfer the image sequence number on little-
        endian machines. Solves problems with TVCPS and perhaps other
        programs finding erroneously different catalogue headers.
        Moved to 15APR99 patch area on May 14, 1999.

10245.  May  7, 1999            EXTLIST                   Chris
        Updated offsets in AU8A which handles the EXTLIST verb and
        had fallen out of sync with the inputs for CLPLT and VPLOT.
        Moved nowhere.

10246.  May 7, 1999       VPLOT.FOR, .HLP                 Leonia
        VPLOT has plotted auto if OPTYPE='auto' and cross if
        OPTYPE='cros', or '    '. If erroniously optype is selected
        as something different, VPLOT has not worked. I changed
        the logic of OPTYPE. Now cross is carried out for any optype
        but 'auto'. Auto is carried out if OPTYPE='auto'.
        Moved nowhere.

10247.  May 11, 1999     POPSDAT.HLP,  ANTUSE.HLP          Leonia
        The new adverb ANTUSE(50) has been created. This adverb should
        be used when it is required to specify the subgroup of antennas
        having been selected by ANTENNAS.
        Moved nowhere.

10248.  May 11, 1999     ANTAB.FOR, .HLP                   Leonia
        ANTAB has not worked with foreign stations when the time of TSYS
        measurement appeared between scans. This feature of ANTAB occurs
        because ANTAB has to know the source ID for the time of the
        measurement. ANTAB takes this time from NX table and of course
        failes to do this if the time does not belong to any scan.
        To circumvent the problem I increase the scan length of both
        side by the given time interval. The value of the time interval
        is given by the new adverb OFFSET.
        Moved nowhere.

10249.  May 11, 1999                LDOPTS.SH                  Eric
        Added the SAVE parameter in $SYSHP, $SYSHP2, $SYSALPHA, $SYSDEC
        versions of LDOPTS.SH and changed to true this parameter in the
        $SYSSUN and $SYSIBM versions.  Otherwise links fail if someone
        is using the load modeule at the time.
        Moved nowhere.

10250.  May 11, 1999            AITOFF Coord                  Eric
        I was working with an image making task using AITOFF coordinates
        and found a problem or two:
        DIRCOS   Allowed L and M to be too large in aitoff ( (L/4)**2 +
                 (M/2)**2 must be < 0.5 )
        NEWPOS   Required L*L + M*M < 1 which is not needed, a proper
                 test is done later.
        CTICS    Had absurd initial values for parameters designed to
                 bail out coordinate difficulties.  Changed them to the
                 reference point value.
        ITICS    Like CTICS.
        Moved nowhere.

10251.  May 12, 1999         GRIDTB (TVFLG)                    Eric
        Added messages about no data selected when UVGET returns error
        4 with no data read.
        Moved nowhere.

10252.  May 13, 1999           CALIB.FOR .HLP               Leonia
        CALIB has used all antennas selected by ANTENNAS in the
        calculation of the mean gain modulus (CPARM(2)>0). It can be
        useful to limit the antennas used for the gain normalization to
        those with good a priori calibration, especially when using
        VLBI-style calibration based on system temperature and gains.
        This prevents the flux scale from being dragged up or down by
        poorly calibrated antennas including antennas subjected to bad
        weather. Now this additional selection can be done under contol
        of new adverb ANTUSE.
        Moved nowhere.

10253.  May 13, 1999          TECOR and APGPS              Chris
        Corrected sign of the dispersive delay correction in both
        programs.
        Moved to 15APR99 patch area on May 14, 1999.

10254.  May 14, 1999          Solaris 2.x on PCs           Chris
        Added support for Solaris on PCs. The operating system
        interfaces for Solaris on i86 are identical to those for Solaris
        on SPARC; the only change needed for AIPS is a new ZDCHI2 that
        sets BYTFLP to indicate that the host is little-endian.
           Added APLSOL86 to hold the new ZDCHI2.
           Added SYSSOL86 for compiler scripts etc.
           Changes INSTEP1 in INSUNIX to recognize i86 platform for
        Solaris.
           Modified the Makefile for XAS to recognize the SOL86
        platform.
           Added a SOL86 section to FDEFAULTS.SH in SYSUNIX.
           The compilation scripts assume that g77 and gcc are used as
        the FORTRAN 77 and C compilers (tested with egcs 1.1.2).
        Moved nowhere.

10255.  May 14, 1999                CCNTR                      Eric
        Changed help file limits to allow plotting as many CCs as
        desired.  Use this to examine affect of CPARM(8) option newly
        added to IMAGR.
        Moved nowhere.

10256.  May 17, 1999                 IMAGR                     Eric
        1. Added option to do Steer-Dewdney-Ito Clean as well as Clark
        Clean on images, with it switching at a break point set by the
        ratio of RESMAX to the level that BGC would load to the AP.  If
        that ratio gets close to 1.0 SDI is done.  Also added TV menu
        option to force SDI and to force BGC Clean at any stage.
        2. Added option to remove isolated weak CC components at the end
        and even during the Clean.  This keeps flux from being sucked
        out of the source by isolated noise bumps.
        Changed:
        IMAGR     Help file to add options and to allow CPARM in TELL
                  for some and only some of the options.
        IMAGR     Fortran to pick up the options and store them under
                  proper names in the Clean class object.
        UVUTIL    Added subroutine UVRSCR to do a raw uv-data copy from
                  one file to another.  The filtering routine requires
                  that we keep a copy of the original data and go back
                  to it after the filter is applied.
        QCLEAN    Added subroutines CLASDI to do SDI Clean, CLFILT to do
                  filtering, CLGRCV to do convolution to a grid for
                  CLFILT.  Also changed CLINI, CLNUV, CLNTV to support
                  these options.  Added CPARM to TELL options in part.
        Moved nowhere.

10257.  May 19, 1999               GRDFLT                      Eric
        Changed it to print messages both on the first call and on any
        later call in which the convoltion types have changed.  It did
        only the first call before.
        Moved nowhere.

10258.  May 24, 1999               IMAGR                       Eric
        Changed to delete the work file unless one of the name adverbs
        is set in advance (IN2NAME, IN2CLASS, IN2SEQ).  Changed help
        file remarks about this and about OUTSEQ.
        Moved nowhere.

10259.  May 24, 1999               CLIP                        Eric
        CLIP assumed that the WEIGHT/SCALE random parameters were the
        last 2 in the list.  This is usually, but not always, true.
        Fixed it to fetch the right pointer from the header for
        compressed data.
        Moved nowhere.

10260.  May 24, 1999           FILLR, FILLM                     Eric
        Changed help file for FILLR to make the point that the user
        wants FILLM fairly forcefully.  Improved the documentation for
        FILLM's VLAMODE as well.  ' ' => any.
        Moved nowhere.

10261.  May 24, 1999           IMEAN, ACTNOISE                Eric
        Added DOCAT to IMEAN to tell it to save the RMS and mean found
        by fitting the histogram as ACTNOISE and ACTMEAN.  It also picks
        up these from the header if the adverbs are 0.  Changed the AU7A
        verb ACTNOISE to store ACTMEAN as well inthe header.
        Moved nowhere.

10262.  May 25, 1999              XAS                    Eric
        Changed the code controlling character size to be (hopefully)
        smarter.  It wants to make bigger characters if there are a lot
        of pixels on the screen, but only if those pixels are smaller
        than our current ones.
        Moved nowhere.

10263.  May 25, 1999              CLIP                  Eric
        CLIP assumed that the Stokes axis was axis number 2 when dealing
        with compressed data.  This is not the case for VLBA Correlator
        output.
        DTCHK did not fix the address pointers to address VIS(3,*) and
        so worked only for compressed data.
        RESEQ did not multiply the pointers by 3 for expanded
        (previously compressed) data and so failed on compressed data.
        Moved to the patch area this date.

10264.  May 25, 1999           MK3IN                   Eric
        A string was continued across two lines, e.g.
               MSGTXT = 'xxxxxxxxxxxxxxxxxxxxxxxxxx
              *   aaaaaaaaaaaaaaaaaaaaa'
        which will produce a variable amount of blank space between the
        x's and the a's, probably longer than MSGTXT.  The correct code
        is
               MSGTXT = 'xxxxxxxxxxxxxxxxxxxxxxxxxx '
              *   // 'aaaaaaaaaaaaaaaaaaaaa'
        Moved nowhere.

10265.  May 26, 1999              SNPLT                       Eric
        Added DDLY = dispersive delay to the possible things plotted.
        Moved nowhere.

10266.  May 26, 1999                IRING                  Eric
        Changed APARM(1,2) to be relative to the reference point rather
        than relative to the "center" of the subimage selected by the
        user.  This is more general and specific and invariant to
        changes of window size.
        Moved nowhere.

10267.  May 28, 1999             IMAGR                      Eric
        Found problems with the new automatic CCMERG:
        TABSRT   Corrected to copy 0-length tables rather than go
                 through the sort code (and fail).
        TABMRG   Corrected to avoid writing out a data record when there
                 were no good records in.
        CCMERG   Correctd to skip all the sort and merge calls on empty
                 files and copy instead if needed.
        QCLEAN   Added test to see if there are any CCs at the moment
                 before calling the merge and filter routines.
        Moved nowhere.

10268.  May 28, 1999             PCAL                        Eric
        Cleaned up the typing a little to attempt to follow the logic.
        It didn't help much...
        Moved nowhere.

10269.  May 30, 1999            SYSETUP                     Eric
        Dropped all the TV files (IC and ID) junk.  It produces error
        messages otherwise.
        Moved nowhere.

10270.  May 30, 1999          Square-root transfer          Eric
        Added Square-root transfer functions to linear and log.
        Changed:
        ISCALE   To add the function and clean up code  Also changed the
                 scaling of the log function, it was to washed out.
        TVALUE   To respond to the function type (when TV only)
        LWPLA    Add sqrt function
        IMLHS    Add sqrt function
        The following help files were also upgraded to mention the sqrt
        function:
        FUNCTYPE  BLANK     BLSUM     LWPLA     PLAYR     TVHLD
        COTVLOD   TVALL     YVCUBE    TVLOD     TVMOVIE   TVROAM
        Moved nowhere.

10271.  June 2, 1999             QCLEAN                    Eric
        Made a better test for Clean going wrong (comp abs(flux) going
        up, sum of flux going down) in OVERLAP 2 mode.  Others were
        handled better.  It now keeps track of the min CC flux by field
        for this case.
        Moved nowhere.

10272.  June 2, 1999             UVHGM                    Eric
        Added PIXRANGE to control plotted range when desired.
        Moved nowhere.

10273.  June 3, 1999             OTFUV                    Eric
        Changed it to use MAXCHA for max number of channels rather than
        2048.  Also raised max number of directory entries to 5000.  The
        new correlator needs the former anyway.
        Moved nowhere.

10274.  June 3, 1999              OOP                     Eric
        Changed MAXIO from 5 to 6, MAXCLS from 10 to 20, MAXVKW from 50
        to 100 in OBJPARM.INC.  Changed HBUFF size from 4096 characters
        to 20480.  The class name arrays for 512 fileds of clean get
        pretty large.  Recompile and relink all OOP.
        Moved nowhere.

10275.  June 13, 1999            Memory files               Eric
        Changed INIT and STORES to open POPS Memory file "0" without
        asking for exclusive use.  This allows it to be opened read only
        if there is a privilege problem with read/write access.
        Moved nowhere.

10276.  June 13, 1999            IMAGR                      Eric
        Changed QCLEAN to merge the Clean components only when needed
        (OVERLAP > 0, SDI possible, CC filtering).  Changed the help
        file to say this and to encourage the merging.
        Moved nowhere.

10277.  June 13, 1999           FITAB                      Eric
        Changed coordinate keywords in UV table to match the wcs
        proposal for tables.
        Added comments re QUANTIZE <= 0 to help.
        PRTTP: changed UV table reading to recognize table wcs keywords
        and to translate them back to normal random groups words so that
        the standard parser will recognize them.
        Moved nowhere.

10278.  June 14, 1999          $QNOT/XCSHFT.FOR           Leonia
        The logical error has been found in the smoothing part of the
        routine. The
                         IF (ISMTH.GT.1) THEN
        appeared instead of
                         IF (ISMTH.EQ.1) THEN

        I fixed it.
        $QPGNOT/CVEL and $QPGNOT/BPASS have been comlnked with the new
        XCSHFT.
        Moved nowhere.

10279.  June 14, 1999                XTRAN                    Eric
        Added some explanation of Fortran formats for the kiddies.
        Moved nowhere.

10280.  June 15, 1999             FRING                   Chris
        Cleaned up the logic in the main loop of FRNALL and fixed
        many serious errors including the following.
        - Failure to set NSUB when DOFIT was used leading to the latter
          part of the subroutine being skipped (leading to the reference
          antenna not be set and consequent array out-of-bounds access
          in least-squares routines).
        - Many attempts to access index 0 of arrays with a lowest index
          of 1 (including loop termination conditions).
        - Failure to correctly add/subtract results for intermediate
          antennas when rereferencing phase, delay, and rate.
        The aggregate effect of these was that the least-squares
        routines would always have been fed incorrect data whenever
        DOFIT was used or APARM(9) was 1 and delays, rates, and delays
        were never properly referred to a reference antenna when DOFIT
        was used.
          Even with these fixes in place, FRING still fails to find some
        solutions with APARM(9)=1 that it finds with APARM(9)=0 so some
        unidentified flaws remain.
        Moved nowhere.

10281.  June 16, 1999          $APGNOT/PCCOR.FOR, HLP           Leonia
        Selection of IFs is added for the case when two bands are
        observed simultaneously. For example X/S observations typically
        used in astrometry/geodesy. In this case PCCOR should run
        twice selecting IFs for the each band.
        CLCAL should be applied twice to combine the two SN table
        in one CL table.
        Multi band delay (MBDELY) of the output CL table will
        include the sum of the two SN tables MBDELYs. So it does
        not correspond to the either first IFs or second IFs.
        If MBDELY for one of the two IFs is wanted, then MBDELY in the
        relevant SN table should be zeroed. The zeroing of MBDELY can
        be done under control of the new parameter DELCOR.
        Moved nowhere.

10282.  June 16, 1999               FITLD                     Chris
        Found that FITLD went to some effort to make sure that VLBA
        weights were not proportional to the integration time. Removed
        this so that weights are now written as w' = w * s * t where
        w is the tape weight (0 <= w <= 1), s is the VIS_SCALE value
        and t is the integration time. Incremented version number to
        10.5.
        Moved nowhere.

10283.  June 17, 1999            $UPDUNIX/UPDSSHD.PL          Pat
        New file: intended to act as a pseudo-server in conjunction with
        an appropriate configuration of ssh keys.  The idea is that a
        key is generated on the master machine (done), and a copy of
        this key is distributed to each MNJ site for placement in the
        appropriate ~/.ssh/ directory.  On the server, a special line is
        inserted in the ~aipsmgr/.ssh/authorized_keys file that will
        permit a single command to execute (UPDSSHD.PL) if this key is
        used.  That command in turn retrieves the passed argument to the
        ssh command on the client via an environment variable, and if
        this matches an AIPS file, the contents are returned on standard
        output.
        The next step is to incorporate this into UPDCOPYSUB, keyed on a
        switch to be set in UPDCONFIG on a per-site basis.
        Moved nowhere.

10284.  June 17, 1999                TYPUVD                  Eric
        Changed TYPUVD in DUVH.INC to be -1 for interferometer data from
        E-W interferometers using UU-L-NCP.  Changed UVPGET to find this
        occurence and return the -1.  Changed DATGET, GETNAN, SDGET,
        FITTP, SELSD, UVFND, DBCON, UVDIF, UVPLT, GRIDR, SDIMG, MX, and
        UVMAP to accept this value as equivalent to 0.  Changed OOP
        ONBJMNGR to trap the occurence and return 'UP' for this NCP
        case.  Changed UVUTIL, UVPHAS, IMAGR, and INDXR to accept this
        value as equivalent to 'UV'.  It will be used in a bit.
        Moved nowhere.

10285.  June 17, 1999             -NCP imaging                Eric
        Changed
        IMAGR    To force DO3D false for non -SIN projections.
        UVUTIL   To detect NCP TYPEUVD and set appropriate projection
                 parameters on the image header in U2IDES.
        Moved nowhere.

10286.  June 17, 1999         Large angle imaging             Eric
        The -SIN projection can be used for shifts only up to some
        reasonable angle [(1 - L*L * M*M) must be positive].  It should
        be possible to image while keeping all shifts as simple shifts
        and changing them into -SIN shifts only when required.  The
        previous code changed all shifts into -SIN shifts and then went
        back to RA, Dec when required (to do 3D for example).  This
        means that user input SHIFT, RASHIFT, DECSHIFT will now be in
        "simple" [Delta RA * cos (Dec_ref), Delta Dec] or "-GLS" shifts.
        Changed:
        BSGRD.HLP   To refer to simple shifts
        QIMAGE      In I2IDES changed to simple shifts from -SIN (which
                    may not have been what was being gridded anyway!)
        SDIMG.HLP   To refer to simple shifts with proper info.
        SDIMG       Changed setting of ref pixel and shift header
                    parameters.  The ref pixel setting was wrong before
                    in that the shift had already been corrected by
                    dividing by COS(Dec) before it was used to shift the
                    ref pixel.
        GRIDR.HLP   To refer to simple shifts with proper info.
        GRIDR       Changed setting of ref pixel and shift header
                    parameters.  The ref pixel setting was wrong before
                    in that the shift had already been corrected by
                    dividing by COS(Dec) before it was used to shift the
                    ref pixel.
        SDGRD.HLP   To refer to simple shifts with proper info.
        UVUTIL      In U2IDES, change handling of SHIFT to simple -GLS
                    type.  (I believe SHIFT is only used by SD data.)
                    Fixed ref pixel on ISBEAM (which never seems to be
                    used).
        UVMOD       Minor, perhaps unneeded, change to make the Z shift
                    term 0 for -NCP.  W will be zero anyway so...
        FXSHFT      Add comments at start to => -SIN (non 3D) only and
                    now obsolete.
        PRJMAT      Add comments that it is for -SIN projection only.
        SHFTXY      Changed to make simple shifts, not -SIN
        XYSHFT      Changed to use simple shifts, not -SIN
        SHINCP      New: -NCP version of SHIFTXY/SHIFTP pair
        SHISIN      New: -SIN version of SHIFTXY/SHIFTP pair
        SHFCRP      New: figures out the new CRP shift (in arc sec)
        GRDAT       Changed to call SHINCP or SHISIN rather than SHIFTP.
        SHIFTP      Changed comment to point at new routines and => this
                    one is obsolete.
        IMCREA      Changed to use SHFCRP to set ref pixel
        IMHCOR      Changed to use SHFCRP to set ref pixel
        UVMAP.HLP   Upgrade SHIFT comments.
        UVMAP       Changed SHIFT to be simple shift, adding calls to
                    SHISIN/SHINCP and SHFCRP as needed.
        MX          Changed SHIFT to be simple shift, adding calls to
                    SHISIN/SHINCP and SHFCRP as needed.  Corrected an
                    equivalence CLBUFF that was 512,512 that should have
                    been 512,64.
        SHIFT.HLP   Changed the nice explain section to do simple
                    shifts.
        RASHIFT.HLP Fixed definition, mention BOXFILE.
        DECSHIFT.HLP Fixed definition, mention BOXFILE.
        HORUS.HLP   Fixed SHIFT description.
        WFCLN.HLP   Fixed RA/DEC SHIFT descriptions.
        IMAGR.HLP   Fixed RA/DEC SHIFT descriptions.
        MX.HLP      Fixed RA/DEC SHIFT descriptions.
        Moved nowhere.

10287.  June 17, 1999           BSGRD                    Eric
        Changed to manage shifts better and to allow different XTYPEs
        for the two gridding operations (to Az-El and then to ra-Dec).
        Moved nowhere.

10288.  June 18, 1999             FRING                 Chris
        Fixed two sign errors for RFACT in FRNALL. FRING now gives
        consistent answers with APARM(9)=1 and APARM(9)=0. Results
        from the coarse search are slightly different using the two
        modes on some baselines where the target antenna has a lower
        number than the reference. I suspect that there is some
        integer truncation in FRNSR2 or QSEARC: this is probably
        harmless.
        Moved nowhere.

10289.  June 21, 1999             QCLEAN                   Eric
        Fixed up a couple of things about IMAGR:
        1. CCFILT has to recompute the CC flux in each field.  It was
        not doing so.  Added message about it too.
        2. The OVERLAP restore step dies if the angle between the 2
        fields was too large to compute mutual coordinates.  Changed to
        suppress this "error" (the fields cannot overlap) and continue.
        Moved nowhere.

10290.  June 24, 1999             FRING                 Chris
        Fixed REFI/REFJ confusion in referenceing the second antenna
        of a pair in FRNALL.
        Moved nowhere.

10291.  June 24, 1999              GRBOXS                  Eric
        The new box code did not handle the situation of multiple images
        on a TV plane properly.  Changed to draw windows in range of
        image not of full TV screen.
        Moved nowhere.

10292.  June 24, 1999           IMAGR                       Eric
        QUVUTIL would only accept type UV not type UP - the NCP uv
        data.
        Moved nowhere.

10293.  June 21, 1999          KRING                     Ketan
        Fixed a simple typo in the calling sequence for a subroutine.
        Moved nowhere.

10294.  June 21, 1999          CL2HF                     Ketan
        Dave Gordon at GSFC has supplied a new version of CL2HF that
        is reported by R. Gaume at USNO to produce acceptable results
        on one of the RDV experiments.   Another revision to CL2HF is
        coming soon (although it is only cosmetically different from
        the version checked in today).
        Moved nowhere.

10295.  June 21, 1999           STFUN                    Ketan
        The hard-coded image size limits in STFUN have been removed.
        Now, the largest image size needed is determined and the
        necessary amount of memory is allocated.
        Moved nowhere.

10296.  June 24, 1999            KRING                   Ketan
        Fixed a simple typo affecting the weights calculation for the
        doubly indirect baselines when CPARM(3) = 0 or 3.
        Moved nowhere.

10297.  June 24, 1999           IMCREA, IMHCOR                Eric
        These also forced the -SIN string.  Changed to test on TYPUVD.
        So IMAGR did not get right string in header even though shifts
        done okay.
        Moved nowhere.

10298.  June 28, 1999        GPINI in APLNOT            Chris
        Some table columns were changed from REAL to DOUBLE sometime
        between the realease of 15OCT99 and 15APR99. Changed them back
        to REAL so that the GP table access routines work.
        Moved nowhere.

10299.  June 28, 1999            LDGPS                  Chris
        LDGPS now reads the KEYIN-style file format agreed with VLA/VLBA
        operations. Support for CONAN and the Los Alamos summary format
        has been withdrawn.
        Moved nowhere.

10300.  June 29, 1999            COMB                   Pat
        With OPCODE = 'MEAN' this task was not correctly setting the
        output to the blanked value when both inputs were blanked.
        Fixed.
        Moved nowhere.

10301.  June 29, 1999            INPUTS GO                   Eric
        Remove GPOS from AU1A, AU2 lists of system adverbs.  It can be
        in units other than pixels.  Fixed limits in IMFIT and JMFIT
        help files.
        Moved nowhere.

10302.  June 30, 1999           VISDFT etc                   Eric
        These routines dimensioned DONE(field number) as DONE(MAXANT)
        which used to work (90 > 64) but does not now (90 < 512).
        Affected VISDFT, VSCDFT, VSFDFT.
        Moved nowhere.

10303.  June 30, 1999            LDGPS                 Chris
        Corrected scaling factor for differential biases in nanosec.
        Moved nowhere.

10304.  July 1, 1999            APGPS                  Chris
        Forced longitudes read from the GP table header into the
        range 0 to 360 degrees to avoid problems caused by wrapping
        around the Earth.
        Moved nowhere.

10305.  July 4, 1999          LWPLA                           Eric
        Fixed the handling of ASPMM.  It was setting it for the first
        plot and then using that value if possible for later plots.
        Moved nowhere.

10306.  July 5, 1999              AIPSEXEC                  Pat
        Modified this script slightly to permit the command-line DEBUG
        argument to AIPS itself to specify both the debugger and whether
        or not to run AIPS under said debugger.  Now one can say, e.g.
        "aips debug=dbx:aips" if you want to run dbx and run AIPS itself
        under it; or "aips debug=/path/to/oddball/debugger" to use that
        debugger on tasks (but not on AIPS itself).  The old behaviour
        has not been altered, i.e. "aips debug" will still prompt you
        for the debugger name and whether or not to run AIPS under it.
        Moved nowhere.

10307.  July 6, 1999              REGRD.FOR                 Pat
        Due to a buffer being 2x too small, this program failed in
        somewhat random ways on different architectures (Solaris for
        one; Linux seemed unaffected).  Resized the appropriate buffer
        to the correct size.
        Moved nowhere yet; candidate for a patch?

10308.  July 7, 1999        $APGNOT/UVCON.FOR             Leonia
        The range of hour angles has been given for Greenwich.
        I changed it to the array center (site) for people's
        convenience. Time attached to a visibility has been rounded
        to the range 0-1day. The help file has been updated.
        Moved nowhere.

10309.  July 8, 1999        $APGNOT/UVCON.FOR             Leonia
        Having finished the yesterday modification I found inconsistency
        of different coordinate system in one input file if some
        antennas are determined in the coordinate system related with
        Greenwich and other with local meridian. To solve this problem
        I recalculatecoordinates of all antennas to the RH coordinate
        system with axis X directed to Greenwich. Then the given hour
        angle at the local meridian is recalculated to Greenwich.
        Moved nowhere.

10310.  July 9          SD Beam switched stuff                 Eric
        Changed:
        QIMAGE   had a bad call sequence to GRDFIX affecting
                 coordinate-scaled convolution functions.
        BSGRD    to allow 2 convolution functions, one for the Az-El
                 image and another for the Az-El to Ra-Dec regrid.
                 Also changed the "rotation" correction to be a shift
                 either done in the initial Az-El gridding or done as a
                 separate interpolation step.
        BSGRD    Help file to explain these things
        BSTST    to remove a bug in a call sequence and to compute and
                 display RMS in non-signal as well as overall.
        BSTST    Help file to allow specification of the non-signal
                 channels.
        BSMOD    New task to create beam-switched data from a model with
                 various errors and defects.  Also help file.
        Moved nowhere.

10311.  July 9, 1999           PLOTR                         Eric
        New task to plot data points read from a text file.  Up to five
        different sets of data may be plotted with specified symbol (or
        line) type.
        Moved nowhere.

10312.  July 10, 1999         UVWAIT                    Eric
        The frequency scaling array was carried partially in REAL*4 for
        loading into the array processor and partly in REAL*8 since the
        numbers need a fair amount of accuracy.  Unfortunately, when one
        or the other is used microscopic differences in round off can
        occur cauing it to seek wrong rows, getting into all sort of
        trouble.  Why this has not arisen before I do not know.
        Moved nowhere.

10313.  July 10, 1999             VTESS                  Eric
        VTESS was blowing up with a zero divide in DOTGRD.  Attempting
        to find the optimum step length it assumed that SCLF was not
        zero, but at this point near convergence both SCLF and GAIN were
        zero.  EPSSTR = GAIN / (SCLF * RL0) and only RL0 was tested.
        Changed it to avoid the zero divide and to limit EPSSTR to <= 1
        when it would occur.  UTESS had the same math.
        Moved nowhere.

10314.  July 11, 1999           POSSM                     Eric
        POSSM with SOLINT = x was looping for all possible baselines for
        each time interval from start to stop by x even though large
        portions of the data were not at suitable subarrays etc
        Changed
        UVGET    To make FSTVS3 (a mostly unused DSEL.INC parameter)
                 one less on init
        DATGET   To use FSTVS3 as a counter of the real vis record
                 number.
        FINDUV   New: to find the next time interval start time and the
                 corresponding vis record range.
        POSSM    To use FINDUV to find the time intervals and to require
                 Time-ordered data when SOLINT not 0.
        POSSM    Help - added comment about time order being required.
        BPASS    Used FSTVS3 to recompute NREAD3 and FSTRD3 which do not
                 need recomputing to reinit the I/O.
        CPASS    Used FSTVS3 to recompute NREAD3 and FSTRD3 which do not
                 need recomputing to reinit the I/O.
        Moved nowhere.

10315.  July 12, 1999        $APGNOT/PCCOR.FOR            Leonia
        PCCOR has considered the row of a PC table beeing bad if at least
        one of the tones is zeroed. Actually PCCOR needs only two tones.
        The logic has been wrong. For example if one of the three tones,
        noticed at the table header is zero PCCOR did not worked although
        it should. I changed the logic allowing PCCOR working if
        number of measured tones .GE. 2.
        Moved nowhere.

10316.  July 16, 1999               FRING                    Chris
        Factored the frequency gridding calculation from CHKAP, FRNSRC,
        and FRNALL into a single subroutine and fixed a gross error
        in this calculation that caused FRING miscalculate the AP
        memory requirement as an absurdly large number and abort
        when a single channel was selected. Also fixed several
        tests in CHKAP, FRNSRC, and FRNALL that used the total number
        of frequencies instead of the number that were actually being
        search.
          The behaviour of FRING appears ill-defined if the delay
        search is turned off and more than one channel is selected
        (or more than one IF with APARM(5) > 0). This requires some
        further thought.
        Moved nowhere.

10317.  July 19, 1999              EDITR              Eric
        To assist with the expert mode, changed
        QEDIUTIL    to call TVDXPR rather than an internal routine
                    Also corrected loading of UV data to make sure
                    that current flags are applied when data are
                    loaded; the one-antenna at a time mode was
                    overlooked in this matter.  Pick up DOEXPERT from
                    TBEDIT or UVMAST object.  Corrected pickup of
                    DOTWO (=COMPARE) in TY editing - it did not use
                    the correct object and so was always the default.
        TVDEVICE    Added routine TVDXPR as interface to TVXPRT.
        TVXPRT      Displays TV menu, highlights single-character
                    codes in the menu, does the expert prompt, read,
                    help, etc previously done in QEDIUTIL.
        POPSDAT     Added adverb EXPERT
        NEWPARMS.001  Added scalar expert.
        EDITR       Added EXPERT adverb to enter expert mode as task
                    begins.
        EDITR.HLP   Added EXPERT.
        EDITA       Added EXPERT adverb to enter expert mode as task
                    begins.
        EDITA.HLP   Added EXPERT.
        SNEDT       Added EXPERT adverb to enter expert mode as task
                    begins.
        SNEDT.HLP   Added EXPERT.
        EXPERT.HLP  New help file.
        Moved nowhere.

10318.  July 19, 1999               AIPS.FOR
        Fixed the copyleft statement that is displayed.  It said 1998
        and should have said 1995-1999.
        Moved nowhere.

10319.  July 20, 1999      CALIB/$APLNOT/GETCTL.FOR      Leonia/Eric
        CALIB has not worked properly when the model is in Lpol, but
        the UV data have all four polarizations. CALIB has subtructed
        the model only from Rpol of the data in this case. The problem
        has been found in the subroutine GETCTL. Some other errors
        are found at the GETCTL as well. The modified version of GETCTL
        has been put in the system. The list of the tasks included
        CALIB has been comlnked with the new GETCTL.
        Moved nowhere.

10320.  July 20, 1999           VGET, VPUT, DEFAULT            Eric
        Created 2 new pseudoverbs to save and get task adverbs in
        versioned files and a pseudoverb to re-initialize the adverbs of
        one task only.  Changed:
        POPSDAT    Added pseudoverbs VGET, VPUT, DEFAULT, reserved verb
                   numbers for these, verb VGINDEX, adverb VNUMBER.
        AIPSB      Changed TS to TG and added loop to kill all possible
                   versions of TG files.
        AIPSC      Changed TS to TG in loop deleting and in creation of
                   main TG file.   Changed CU2 to add VPUT.
        HELPS      Added codes for the 3 Pseduoverb to verb conversions.
        AU2        Added code to rename old TS files to TG and to name
                   the files by the new schemes including VPUT.
        AU2A       Added code to rename old TS files TG, to name the
                   files by the new scheme, to do VGINDEX and VGET
                   (using the code for TGINDEX and TGET except for the
                   file opening) and to do the new verb DEFAULT.  This
                   requires long lists of adverbs with non-0 and
                   non-blank adverb values.  We will have problems
                   with maintenance.
        AU3A       Changed to new TG names - the previous version had
                   the wrong names so ALLDEST and TIMDEST did not kill
                   TS files.
        DISKU      Changed to loop over TGET/VGET files.
        Created new help files for VGET, VPUT, VGINDEX, DEFAULT, and
        VNUMBER.
        Moved nowhere.

10321.  July 20, 1999            DOCRT                   Eric
        Changed things to respond to the width of the terminal window.
        Changed
        ZWINC      Added number columns to call sequence
        ZWINC2     Added number columns to call sequence and set them
                   in $APLGEN, $APLSOL, $APLHP, $APLDEC, $APLLINUX (last
                   4 identical) versions.
        AU1A       Changed call to ZWINC, added code to set DOCRT from
                   Ncols, pick up NACROS from LPOPEN or ZWINC setting.
        AU7        Changed call to ZWINC, set print width with window.
        OFMLST     Changed call to ZWINC, made DOCRT an in/out variable
                   containing the width in abs value.
        PRTMSG     Changed call to ZWINC, set print width.
        LPOPEN     Changed to return DOCRT = width to use (in abs value)
        PRTLIN     Changed call to ZWINC, return is ignored.
        PRTALN     Changed call to ZWINC, return is ignored.
        ZDCHIN     Changed call to ZWINC, return is ignored.
        PRINTER    Changed to use output of LPOPEN as width and to store
                   that as DOCRT back in the printer object.
        Changed to use LPOPEN to set the width:
        CORER   LISTR   MFPRT   PRTAN   PRTUV   SHOUV   UVFND
        UVHOL   UVPRT   COHER   DTSUM   TBDIF   OTFIN   PRTAB
        PRTCC   SAD     UVDIF   ISPEC   PRTIM   PRTTP   HFPRT
        BLSUM   TXPL
        Changed DOCRT write up in HELP files for
        DOCRT   BLSUM   BSPRT   COHER   CORER   DTSUM   HFPRT
        ISPEC   LISTR   MFPRT   OFMLIST OTFIN   PRTAB   PRTAC
        PRTAN   PRTCC   PRTHI   PRTIM   PRTMSG  PRTSD   PRTTP
        PRTUV   RFI     SAD     SHOUV   TBDIF   TXPL    UVDIF
        UVFND   UVHOL   UVPRT
        Removed holography from UVPRT help file.
        Moved nowhere.

10322.  July 20, 1999              UVCOP                      Eric
        UVCOP determines a mask for the input channels so as to select
        frequencies and IFs.  Sadly, it used the uv-data increments of
        the output data set to address things relevant to the input data
        set.  Selecting BCHAN > 1 and BIF > 1 would have not gotten the
        correct results.
        Moved to patch area July 21.

10323.  July 21, 1999         BPASS, CPASS                 Eric
        My July 11 change did not work since BPASS and CPASS were
        effectively using FSTVS3 a common variable as a local variable
        to count the way through local IO buffers.  Changed to local
        variables, using only NREAD3 and FSTRD3 from common when UV IO
        is initialized.
        Moved nowhere.

10324.  July 21, 1999        IMAGR, VTESS help files          Eric
        Fixed the adverbs in the help area to be in the same order as in
        the inputs area for IMAGR.HLP.
        For VTESS.HLP, added strong remarks about the importance of
        NOISE to a successful deconvolution.
        Moved nowhere.

10325.  July 22, 1999           GO, TPUT, ..                  Eric
        Added message suppresion around the automatic renaming of the
        old TS files to the new TG files.  If users are using aips new
        and aips tst they can end up with both files and the rename will
        fail without serious consequence.  The message is anoying.
        Moved nowhere.

10326.  July 22, 1999            QCLEAN                      Eric
        The routine that found the max/min ignored the field requested
        and did all fields.  Since only the requested field was current,
        the results were misleading for all other fields and would cause
        the next field to be the previous field.
        Moved to patch area this date.

10327.  July 22, 1999         $APGNOT/PCCOR.FOR              Leonia
        Direct cal transfer produces some extra lines if the number of
        tones given at the table header exceeds the actual number of
        measured tones. Until now these extra lines are filled out by
        zero. The relevant modification (see #10315) was done to serve
        in the case of such a table. In the near future the extra
        lines will start be filling by blanks(nan). I have modified
        PCCOR to serve both zeroed and blanked extra lines in the PC
        table.
        Moved nowhere.

10328.  July 26, 1999           FITTP, FITAB               Eric
        A major screw up has been found with FITAB/FITTP etc.  If a UV
        file was written with FITAB, then read back in and modified in
        some way (UVCOP et al) and then written with FITTP, the output
        will not be read correctly thereafter.   There will be a work
        around when I figure out how to recover any ffile in this state.
        For now and quickly - changed FITTP and FITAB to stop writing
        out any "AIPS" history cards found in the HI file (all others
        are still written).  It is these "AIPS" history cards which are
        parsed by UVLOD and FITLD and which contain from FITAN
        information about the UV file structure, information that may no
        longer be current.  FITTAB avoided the problem by writing the
        current information AFTER the HI file, but FITTP writes the
        current information before the HI.
        When I figure out how I will add an option to UVLOD for users to
        try when UVLOD/FITLD gets an error 4 (unexpected EOF).
        Moved nowhere will have to be a major patch announcement.

10329.  July 27, 1999        Fixes for FITTP/FITAB         Eric
        Added the ERROR adverb to UVLOD, IMLOD, and PRTTP and comments
        about it in their help files and in the FITLD help file.  If
        ERROR = 2 the AIPS history cards are not parsed.
        Moved to the patch area this date.

10330.  July 27, 1999         DDT                  Ralph Gaume / Eric
        The class used by UVMAP is now IBEM again in accord with all
        other tasks.  Changed DDTLOAD.001 to match.
        Moved nowhere.

10331.  July 27, 1999          FLGIT                     Eric
        Added an option to flag data close to the V axis (abs(U) <
        APARM(9) wavelengths.  U s computed on a channel-by-channel
        basis making this more selctive than UVNOU.
        moved nowhere.

10332.  July 27, 1999               IMAGR                    Eric
        Changed the OVERLAP=2 loop that decides what field to do next to
        require the maximum of the field to be > MINFLX, the user's
        cutoff flux level.  The loop includes the average of the field
        in the test and that may alter the choice and allow it to go
        below MINFLX which is not desirable.  It got into virtually an
        infinite loop over this.
        Moved nowhere.

10333.  July 27, 1999           ORDER                       Eric
        New adverb to specify the order of a polynomial fit - initial
        value = 1.  Changed:
        POPSDAT       Add ORDER, set to 1.
        NEWPARMS.001  Add ORDER, set to 1.
        AU2A          Add ORDER to list of adverbs with +1 initial value
                      for DEFAULT.
        IMLIN         help file: change NCOUNT to ORDER.
        XBASL         help file: change NCOUNT to ORDER.
        SDLSF         help file: changed NCOUNT to ORDER
        SDLSF         renamed order variable and added it to HI files.
        UVLSF         Add ORDER adverb to allow for 0 order fits as well
                      as first order.  Also help.
        UVLIN         Add ORDER adverb to allow for 0 order fits as well
                      as first order.  Also help.
        FLGIT         Add ORDER adverb to allow for 0 order fits as well
                      as first order.  Also help.
        ORDER         New help file
        Moved nowhere.

10334.  July 28, 1999         QEDIUTIL               Eric
        I failed to fix all of the "FLAG FAST" strings into "FLAG
        QUICKLY" strings.  So the mode was not actually available.
        Moved nowhere.

10335.  July 28, 1999          FILEBOX                 Eric
        The handling of the name was not fixed properly for the new
        extended hex field names.  It did the ZREHEX part but tested for
        validity on the old form of the names.
        Moved nowhere.

10336.  July 28, 1999          FLGIT                  Eric
        I forgot to init the LUN and VER for CHNDAT which did not matter
        for my 1 IF data set but which quickly got some people.  Sigh..
        This CHNDAT call was added for frequencies needed to do the
        UVNOU option.
        Moved nowhere.

10337.  July 28, 1999          TV minor bug               Eric
        AU5D, AU5E, AU6, and AU6A all used TV parameters before calling
        TVOPEN.  This works since they are in Common and more or less
        right xcept at the beginning.  TV parameters (NGRAY, NGRAPH,
        TVLIMG, etc etc) must never be referenced until TVOPEN is
        called at least now that the TV info is kept in XAS itself.
        Also found IMLHS called YINIT before TVOPEN - that never worked.
        Moved nowhere.

10338.  July 28, 1999        $APGNOT/PCLOD.FOR          Leonia
        PCLOD has given a wrong result on mashines under LINUX, if
        COMLNK had been done with optimization. The condition of the
        difference in time has been given as
        IF (TTIME .NE. OTIME).
        If the times are considered equal the previous condition can
        work differentely in different system. This occured in the
        machine under LINUX. I change this condition:
        DDTT = TTIME - OTIME
        EPS = 1.0E-10
        IF ((DDTT .GT. EPS .OR. DDTT .LT. -EPS)...
        Moved nowhere.

10339.  July 29, 1999           ZWINC                 Eric
        There was not enough error handling when ZWINC2 returns 0 for
        the terminal height.  Some default - I use -24 - needs to be put
        in CRTMAX when it starts as 0.
        Moved nowhere.

10340.  August 3, 1999           XTRAN                   Eric
        Changed the task to be used only for its "plate-solution"
        function.  OGEOM, LGEOM, OHGEO, et al. can be used for simpole
        re-gridding.  Changed the adverbs needed to run it.  Added mode
        to simply copy the image and alter the output header parameters.
        Fixed handling of BLC, TRC - it did not do the right thing at
        all when they were specified and a re-gridding with rotation
        occurred.  It fit for the wrong "center" pixel in that case and
        then rotated about the center.  Changed it to leave the geometry
        ID alone if there is one and use -TAN otherwise.  The task is
        still a linearized one and so unreliable for large fields.
        Moved nowhere.

10341.  August 3, 1999            FLATN                  Eric
        Changed INTERPLATE INTWIN routine to suppress error messages
        from the position routines and to return IERR=-1 if all
        coordinates fail and IERR=0 if only some do.  Changed IMGHGE to
        suppress error messages and only use the output of the position
        routines if the error is zero.  This way will allow partial
        images to work.
        Chaned FLATN to handle IERR=-1 properly and to make another
        progress message.
        Moved nowhere.

10342.  August 4, 1999              SETFC          Brian Butler / Eric
        New task: it creates C cards for IMAGR's BOXFILE giving the
        centers of (a) a fly's eye covering the center region, (b) extra
        fields covering strong sources taken from the NVSS survey
        tables, and (c) an extra field on the Sun.  There is a help file
        plus 4 text files in $AIPSTARS call 1000MJY.NVSS, 300MJY.NVSS,
        100MJY.NVSS, and 50MJY.NVSS.  These files are used by default
        choosing the one that matches the flux limit given by the user
        or the user may specify his.her own table.
        Moved nowhere.

10343.  August 5, 1999                  ALLTAB                  Eric
        Changed some lists of tables copied:
        SPLIT   Added BL table to omission list since it is applied.
        SPLAT   Added BL table to omission list since it is applied.
        AVSPC   Added BP table to omission list since it is meaningless
                in the output and allow FG tables to be copied if they
                are not applied.
        ACFIT   If the output is multi-source (which it can be) then
                allow the copying of the SU table.
        BLAVG   Added a bunch more files to omit.
        GPHAS   Corrected error handling so that it would die on
                multiple source selection - previously it would
                emasculate itself and then try to continue.  Added a
                bunch of table types to the omission list.
        Moved nowhere.

10344.  August 5, 1999             XTRAN                     Eric
        The interpolation to the new grid neglected to sum the
        interpolation weights and divide by them.  This led to a
        herringbone pattern in the images output!  Added a new array to
        sum weights and divide by them and added code to blank areas not
        computed.  Also changed it to honor blanked input pixels.
        Minor updates to help file.  Changed XTRFIT subroutine to
        correct a FORMAT.  A 1PDm.n was followed by Fm.n with no 0P and
        so printed a number 10 times too large for the reference pixel.
        (The 0P came right after!)
        Moved nowhere.

10345.  August 6, 1999            UVAVG                     Eric
        Corrected the call seq to ZEXPND - the FTAB pointer was used
        where the disk number was needed.  This never worked.
        Moved nowhere.

10346.  August 6, 1999            TBOUT                    Eric
        Improved string handling with JTRIM to avoid unprintable
        characters in the output.
        Moved nowhere.

10347.  August 6, 1999           CLIP                      Eric
        Added PRTLEV to replace APARM(8) for printing and then added
        APARM(8) as a parameter to control deletion of whole spectra if
        some number>= APARM(8) of channels are clipped.
        We need a CLIPM to do clipping with flag table, multi-source
        type inputs.
        Moved nowhere.

10348.  August 9, 1998          FITAB                  Eric
        Found and fixed 2 exgregious errors having to do with image
        writing.   In the first, quantized floating output did not hvae
        the data values filled to the buffer, causing garbage to be
        written.  I know I tested this, so I must have added a "simple"
        logic change that messed everything up afterwards.  In the
        second, the time tests were applied to tables having nothing to
        do with time and a < instead of <= caused no table data to be
        written
        Moved to patch area this date.

10349.  August 9, 1998         CC File                 Eric
        Changed:
        PRTCC   Type 4 (sphere) was not recognized in PRTCC.
        SAD     SAD was willing to write out deconvolved Gaussians (even
                if the deconvolution failed) in the CC file iff the
                output CC version number was 1.  Otherwise it wrote
                convolved Gaussians which VISDFT etc cannot handle.
                Changed it to write deconvolved or zero width if
                deconvolution is being done.
        SAD     Help file - clarify the writing to CC file.
        CCEDT   Reordered CPARMS, allow circular flux aperture.  Handle
                7-column CC tables but require the values in columns 4-7
                be constant through the file.  Allocate memory to hold
                the CCs dynamically.  Changed to use image increment
                based tolerances and defaults.
        CCEDT   Help file: Changed CPARM(3,4) to CPARM(1,2) and vice
                versa to put important parms first.  Allow circular flux
                aperture w CPARM(1) < 0.
        Moved nowhere.

10350.  August 10, 1999     $YPGNOT/CONFI              Leonia
        I added two options, both are important when optimization is
        carried out with topography constraint:
        1. The input file can be now shifted (when it created by
           previous fitting to the topography) or not shifted under
           control of APARM(8).
        2. Optimization with topography constraint can be done now
           together with donut or two circle constraints.
        The help file is updated.
        Moved nowhere.

10351.  August 12, 1999   $QPGNOT/UVCON, $APGNOT/UVSIM   Leonia
        UVSIM has had limit of 50 antennas for history file.
        When I was writing UVCON I copied the relevant codes from
        UVSIM. So the limit of 50 antennas was transfered to UVCON.
        The problem has not been seen in UNIX mashine but was
        discovered recentely on LINUX.
        Therefore both UVSIM and UVCON have not worked if number of
        antennas exceeds 50 (at least on LINUX). I fixed it.
        Moved nowhere.

10352.  August 12, 1999           EXTAB                 Chris
        A new task to export AIPS table data to other programs
        (e.g. spreadsheets and databases) via text files. Also
        serves as a paraform for translating AIPS tables to
        text formats with data selection.
        Moved nowhere.

10353.  August 12, 1999          TAPQL                 Chris
        Removed TAPQL, which translated AIPS tables to PostQUEL
        for export to the Postgres database. PostQUEL is no
        longer used (recent versions of Postgres use SQL) and EXTAB
        solves the problem of exporting table data to a database
        in a more general fashion.
        Moved nowhere.

10354.  August 12, 1999        KEYIN subroutine        Chris
        Modified the KEYIN package to treat ASCII carriage-return
        characters (character 13) as a white space character. This
        should reduce problems with files that have been prepared
        under Windows or that have had carriage-return new-line
        pairs inserted by awkward mail programs.
        Moved nowhere.

10355.  August 12, 1999            CLIPM                   Eric
        New task - a CLIP geared to multi-source input files with flag
        table output.  It is based on UVMLN and CLIP.
        Moved nowhere.

10356.  August 16, 1999       CONFI.HLP               Leonia
        A small misprint has been fixed in CONFI.HLP.
        Moved nowhere.

10357.  August 16, 1999          DDT scripts           Chris
        Updated DDTLOAD to set FLUX to zero before running CALIB
        rather than inheriting the value from the map settings
        (which causes CALIB to use zero input components and
        leads to a DDT failure).
        Moved nowhere.

10358.  August 16, 1999       TABLE object interface       Chris
        Added support for bit-field columns to TABDGT and TABDPT
        where they had silently been ignored before. Bit fields
        are input and output as arrays of logical values.
        Moved nowhere.

10359.  August 16, 1999             EXTAB                 Chris
        Now writes bit-field values to the output file.
        Moved nowhere.

10360.  August 17, 1999          $APGNOT/JMFIT.FOR       Leonia
        JMFIT gives negative errors sometimes because the fitting
        of the gaussian to histogram gives negative value for its
        width sometimes. Since the absolute value is right I simple
        added ABS to the calculation of the width. Besides of that
        I removed two redandant prints and changed one of the
        subroutine's output parameter, which was given explicitely
        equaled zero.
        Moved nowhere.

10361.  August 20, 1999            IMAGR                   Eric
        Upgrade to deal with requests:
        IMAGR    Use average BCOMP for fields < 65 as default for fields
                 > 64.  Call FIELDF for BCOMP and store it away then.
                 In loop over channels, restore initial BCOMP for each
                 channel and do open CLEAN on each channel (to get BCOMP
                 limits correct for each channels).  Store interactive
                 state for CLEAN class use.
        IMAGR    Help file: Add comments about BCOMP setting and
                 interactive use.  Upgrade TV EXPLAIN to include menu
                 items for filtering, BGC/SDI selection, prompting for
                 field number and new FORCE A FIELD.  More explanation
                 under the OVERLAP 2 paragraph.
        FIELDF   Read B cards for BCOMP.
        ISUM     New routine to sum an integer array
        RSUM     New routine to sum a real array
        QCLEAN   TV option to force a field.  Use ISUM to save lots of
                 little loops.  Filter CCs on restarts and on Clean
                 failures as well as on request.  Correct and improve
                 filtering summaries.  Improve estimate of peak residual
                 in SDI clean (it still is pretty lousy).
        Moved nowhere.

10362.  August 24, 1999          VPLOT                     Leonia
        VPLOT has declared the absence of SU table in the edit mode
        (APARM(1) > 0) if the image file as a model is presented.
        The logical unit number (LUN) for SU table used when the
        model presented is equal 27. The logical unit number (LUN) for
        FG (write) was chosen erroniously as 27 also.
        I fixed the problem changing the logical unit number (LUN) for
        FG (write) to 30.
        Moved nowhere.

10363.  August 25, 1999            SNPLT                   Eric
        Substantially rewritten.  It can now plot multiple polarizations
        and/or IFs and is able to plot them separately or plot both
        polarizations and/or all IFs on single plots (per antenna).
        Moved nowhere.

10364.  August 25, 1999       UVLOD, FITLD                  Eric
        The table reader in UVLOD (and its clone in FITLD) overwrote the
        error condition in cleaning up and exiting.  So a tape error was
        lost.
        Moved nowhere.

10365.  August 30, 1999         SNPLT                      Eric
        Minor problem blocked access to LL-only data.
        Moved nowhere.

10366.  August 30, 1999         KRING                      Ketan
        The least-squares stage of KRING has now been completely
        replaced.  This was necessary for reworking the SNR calculation
        to use the same methods as found in the FFT.  For test data,
        the two stages now produce SNRs that agree to within 1%.
        Many inputs were removed from KRING including the ability to
        create/fill an output file for single source data.  Since KRING
        requires an NX table, this was disallowed anyway.  Averaging
        the frequencies within an IF is not allowed anymore either;
        KRING's more efficient use of memory renders this sort of option
        unnecessary.  The default SNR cutoff threshold has been lowered
        to 3.  The help file has been updated somewhat but likely still
        needs some user input.  The output format has been cleaned up
        as well to be more readable and the print levels consolidated.
        Moved nowhere.

10367.  August 31, 1999             EDIT Class               Eric
        Fixed all HLPED* (UV, TY, CL, SN) files to say EDIT QUICKLY
        rather than EDIT FAST.
        Changed QEDIUTIL - it would not flag the first point in quick
        mode until you had pointed at and flagged a second point.
        Moved nowhere.

10368.  September 1, 1999            OTF                     Eric
        The OTF routines did not work on byte-swapped machines.  They
        once did, but I overhauled the logic and never checked.
        Changed
        SDDPTS   New call sequence - header not translated from external
                 bit pattern.
        OTFIN    Changed to call SDDPTS before translating full header
                 from external to internal form; fixed setting of
                 swapped.
        OTFUV    Changed to call SDDPTS before translating full header
                 from external to internal form; fixed setting of
                 swapped.
        OTFBS    Changed to call SDDPTS before translating full header
                 from external to internal form; fixed setting of
                 swapped.
        Moved nowhere.

10369.  September 1, 1999         CPASS.HLP                Leonia
        Pre-average interval (CPARM(4)) has not been described
        clearly. In particular the default has not been named.
        I copied the full description of CPARM(4) from the explain
        part to the help part. The default is added to the list of
        input parameters.
        Moved nowhere.

10370.  September 1, 1999       $APGNOT/QUACK.FOR..QUACK.HLP  Leonia
        QUACK has had two options of flagging data starting the
        beginning of a scan.
        'END ' => flag all but APARM(1) min from end of scan.
        'BEG ' => flag first APARM(2) min of each scan.
        I have added the third option, which allows to flag data
        near the end of the scan. The old options are renamed:
        'ENDG' end of the scan is good (not flagged)
        'BEGB' beginning of the scan is bad (flagged)
        The new(third) option is named:
        'ENDB' end of the scan is bad (flagged).
        The flagging was started 5sec earlier to include the edges of
        the scan. It was done wrong for the option 'end', because
        the flagging interval should be expanded to the right to
        include the right edge of the scan. I fixed it.
        Additionally the time of the expanding is not fixed now as
        5sec. It can vary under control of APARM(3). It is important
        for the case of very short scans.
        Moved nowhere.

10371.  September 1, 1999     SNCOR                       Leonia
        I've added the new option 'NORM' which normalizes amplitudes
        to one. The help file is updated.
        Moved nowhere.

10372.  September 2, 1999      QUACK                      Leonia
        Revising my recent modification of QUACK (10368) I changed
        back the names of the two old options. So they are named now
        again as 'END ' and 'BEG '.
        Moved nowhere.

10373.  September 2, 1999            EDIT class             Eric
        The WTSCAL (DOWEIGHT adverb) parameter did not set a default, so
        DOWEIGHT=0 flagged all the data.
        Moved nowhere.

10374.  September 2, 1999             ZDCHIN                 Eric
        Changed NETSP error message to appear only for prgnam = 'AIPS'
        and added explanation.
        Moved nowhere.

10375.  September 2, 1999            IMAGR                   Eric
        Changed UVWAIT and QWTSUM to handle areas which have no data.
        Like other grid routines, having a large gap between 0 and the
        lowest abs (u) caused problems.
        Moved nowhere.

10376.  September 3, 1999           CVEL                    Leonia
        Added new selection parameter QUAL to select shifted sources
        by qualifier. The help file is updated. It was written in the
        help file in source selection: '*' = all. Indeed ' ' means
        all also. So I changed this statement to '*' or ' ' = all.
        Moved nowhere.

10377.  September 3, 1999        Various MNJ scripts          Pat
        The Secure Shell MNJ has been tested and found to work.  There
        are three necessary components:
            (1) the "mnj" binary key, which should be put in the ~/.ssh/
                directory of the relevant account and set via chmod to
                mode 0600; contact me for a copy of this;
            (2) a revised UPDCOPYSUB (already putback; it's backwards
                compatible and should not break anything; and
            (3) UpdSSH=YES set in the relevant section of UPDCONFIG.
        Currently only brador is using this setting, but within a week I
        expect all NRAO sites to be using the secure shell.  Eventually
        the old rsh way will be phased out completely.
        This scheme is implemented via a special entry in the
        authorized_keys file of the aipsmgr account on the server MNJ
        (kochab):
           command="/AIPS/15OCT99/SYSTEM/UNIX/UPDATE/UPDSSHD.PL",
           no-port-forwarding,no-X11-forwarding,no-agent-forwarding,
           no-pty 1024 37 10939307688004...
        This restricts the command that can be executed to the
        UPDSSHD.PL script in $UPDUNIX.  This in turn checks the first two
        arguments to the ssh command; the first is the filename, and the
        second is an optional string.  If the latter is MODE, it returns
        the file protection mode of the file.  If there is no second
        argument, the contents of the file are returned.  If the filename
        requested is not in one of the allowed hierarchies
        (/aips1/master/TST, /aips1/master/NEW, /AIPS, or
        /home/kochab_1/AIPS) then the request for the file or mode info is
        rejected.
        NOTE: any $SYSLOCAL copy of UPDCOPYSUB will override the new
        version.  You should not need such a local copy.
        NOTE 2: anyone wishing to implement this scheme on a "client" MNJ
        (i.e. where your own machine and not kochab is the "master") needs
        to generate a ssh key for the relevant account as I did for
        aipsmgr here, and put the right key in the authorized_keys file on
        the subservient MNJ machines.
        Moved to brador this date.

10378.  September 3, 1999           Misc                 Eric
        Improved the message in ZDCHIN explaining NETSP failure.
        Changed $SYSSUL and $SYSSOL versions of CCOPTS.SH to compile for
        64 bit file indices in NRAOCV.  We are all at 2.6 now.
        Moved nowhere.

10379.  September 6, 1999           PRTAC                Eric
        Fixed handling of DOCRT - the LPOPEN call was skipped when DOCRT
        > 0 so it did not get set to the screen width.  Also it did not
        zero enough of the arrays so some **** appeared in the output.
        Moved nowhere.

10380.  September 9, 1999        $APGNOT/SETJY                  Leonia
        I have added the forth name to having existed three names of
        each of the six calibrators. The new names are taken from
        ~cwalker/sched/catalogs/sources.vlba.
        Moved nowhere.

10381.  September 7, 1999        UVAVG, SPLAT                 Eric
        Changed:
        LISRAN   To clean up typing, to change output meanings, to
                 report unrecognized random parameters, to include
                 WEIGHT and SCALE in the list since they do not have to
                 be last.
        UVAVG    Changed handling of random parameter group to use the
                 output of LISRAN.
        SPLAT    Revised to use same random parameter technique.
                 Changed an RCOPY call to copy only what is needed.  The
                 program runs some 20 times faster now.
        Moved nowhere.

10382.  September 10, 1999           SNPLT               Eric
        The attempt to choose the best phase range (-180 to 180 vs 0 to
        360) caused it to ignore PIXRANGE under some circumstances.
        Moved nowhere.

10383.  September 10, 1999           EDIT class               Eric
        The data reading loop was too sensitive for linux in dealing
        with times.  Changed it to look sensible for data between half
        way before to half way after the current time.
        Moved nowhere.

10384.  September 11, 1999         EDITing                  Eric
        Changed default SOLINT and DETIME to 0.01 sec and max (2,
        5*SOLINT) minutes.  Changed EDITR.HLP, EDITA.HLP, SNEDT.HLP
        and QEDIUTIL.FOR.  Also fixed another time test loading 2nd UV
        data for comparison.
        Moved nowhere.

10385.  September 13, 1999          CLIPM                  Eric
        Fixed STOKES handling for cases in which there are fewer than
        4 correlators.
        Moved nowhere.

10386.  September 20, 1999           BPASS                 Chris
        Removed the declaration of BPVER that had crept into the
        subroutine BPSIN. BPVER is also declared in DSEL.INC and
        the double declartion caused compilation to fail under
        Linux. It should have produced some warnings elsewhere as
        well.
        Moved nowhere.

10387.  September 23, 1999           POSSM                 Chris
        Moved the statement incrementing the number of a plot on
        a page in MULTPL so that it is only executed if the plot
        is not blank. This avoids problems setting the coordinates
        and opening the plot file if the first plot on a page is
        blank and should also save some paper.
        Moved from 31DEC99 on this date.

10388.  October 18, 1999            VBGLU                Chris
        Fixed an error in retrieving the catalogue number for the
        output file when updating the history records that caused
        the header of one of the input files to be corrupted when
        there were more than 2 input files.
        Moved from 31DEC99 on this date.

10394.  October 18, 1999            FIXWT                Chris
        Revised FIXWT to use the real parts of the visibilities
        to estimate noise levels rather than the amplitudes. This
        should give better estimates of the noise at low SNRs. It
        also seems to reduce the occurrence of isolated points
        with discrepent weights.
        Moved from 31DEC99 on this date.

10395.  October 21, 1999          FRPLT                Chris
        Removed an assignment to the unused and uninitialized common-
        block variable UVSCAL that included a division by its
        uninitialized value.
        Moved from 31DEC99 on this date.

10398.  October 26, 1999          UVMAP                 Eric
        Believe it or not, there are still people using UVMAP/APCLN.
        They discovered that the xshift parameter is in backwards for
        the output header, messing up self-cals...
        Moved from 31DEC99 this date.

10399.  October 28, 1999           PLOTR                Eric
        Found a bug when plotting symbols.  The plot paraform has an
        internal scaling which was not applied to the symbols
        coordinates before calling the general symbol plotter.  The
        failure affected only certain ranges in the data.
        Moved from 31DEC99 this date.

10400.  October 29, 1999        ACCOR                  Leonia
        ACCOR has not worked if NX table was absent. The routine
        UVTIME has gotten zero for LREC because UVPGET (which
        estimates LREC) was called after UVTIME.
        I moved CALL UVPGET before CALL UVTIME.
        Moved from 31DEC99 this date.

10401.  October 29, 1999       TICINC                Leonia/Eric
        Small plots sometimes end up with only one tick mark which
        does not say much about the scaling.  Fixed a .LT. to .LE.
        which should require more ticks in general.
        Moved to 31DEC99 this date.

10402.  November 1, 1999          TVBLNK               Eric
        TVBLINK did not work right on XAS with 8-bit pseudo color
        display.  It tried to do split screen which it can do, but it
        cannot have 2 different LUTs.  Fixed code to recognize the
        less capable situation and to do 1 channel at a time.
        Moved to 15OCT99 this date.

10403.  November 1, 1999        SPLAT                    Leonia
        All tables have been copied with subarray=0.
        I fixed it adding relevant cards in subroutine COPTAB.
        Moved from 31DEC99 this date.
