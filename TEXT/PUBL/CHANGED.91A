-----------------------------------------------------------------------
;  Copyright (C) 1995
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;          Internet email: aipsmail@nrao.edu.
;          Postal address: AIPS Project Office
;                          National Radio Astronomy Observatory
;                          520 Edgemont Road
;                          Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
        This file must be used to record any changes made to the
 code on the Charlottesville VAX in the logon area [AIPS].  The format
 to use is:

   line 1:  Date    Program name     Your name
   line 2:  What was done
   line 3:  Where has this change been moved (e.g. 15OCT90)
   line 4:  Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month, day,
 comma, year, some space, a title, some more space, your name.

                    Changes to 15JAN91

 ***********************************************************************

        Changes while 15JAN91  was TST:

 ***********************************************************************
 ***********************************************************************

 6065.  June 25, 1990               FITTP                 Bill J.
        Minimum value for BLOCKING adverb in HLP file was set at 1.0
        which was at variance with HLP file text. Gripe #4300.
        Moved 15OCT90 this date.

 6066.  June 25, 1990              POSSM                     Phil
        Added new feature in the text output option. A sensible
        header is now printed in the text file, and the spectrum
        is listed in columnar form as channel#, vel, amp, phase.
        A flagged channel is marked as flagged. Also corrected
        a couple of minor problems with determining the scaling
        of the plots and the labelling, these were remnants of
        the recent graphics changes.
        Moved nowhere yet.

 6067.  June 25, 1990              UVCOP                     Phil
        When selecting by FREQID the channel bandwidth in the
        catalogue header was not being updated correctly, added
        a new subroutine (FQSCOP) to ensure that this is all done
        correctly.
        Moved nowhere yet.

 6068.  June 25, 1990            GETJY                    Phil/Neil
        The FREQID variable was not passed in common.
        Moved to 15OCT90 this date.

 6069.  June 26, 1990              LSERCH                  Chris
        ZTPOPN and ZTPCLS assign unique LUNs in the range 51 to
        51+NTAPED to the lock files which control access to the tape
        drives.  LUNs above 50 appear to be used nowhere else.  However
        LSERCH was using 50+MAX(3, NVOL) as the maximum valid LUN,
        causing problems if there were more than 3 tape drives and less
        (logical) disks than tape drives.  LSERCH now uses 50+MAX(3,
        NTAPED) as the maximum valid LUN.
        Moved to 15OCT90 this date.

 6070.  June 26, 1990              PRTCC                  Bill J.
        It is sometimes useful to know the sum of components up to
        (but not including) the first negative delta.  PRTCC now
        outputs this information.
        Moved nowhere.

 6071.  June 26, 1990              UVCOP                  Bill J.
        A modification for gripe # 4277.  UVCOP now has the option
        (UVCOPPRM(4)>0.0) to keep the user informed of the progress
        of copying.  This is often useful for large files.
        Currently, it lists every 10,000th visibility copied and
        the asociated timestamp.  This is fine for 'TB' data but
        looks a little strange for 'XY'.  Also fixed a trivial
        (but often confusing to the user) bug which printed
        message that data had been "copied from the beginning to
        0\ 0 0 0.0" in the case of copying over the FULL time range
        with selection.
        Moved nowhere.

 6072.  June 26, 1990          CALIB                   Phil / Bill C
        Fixed array declarations of WT1 and WTB in GASOLV, CLBPA.
        Fixed numerous errors in GASOLV which were encountered with
        multi polarization fringe fitting when each section of data
        had to be read from disk multiple times.  Also fixed a number
        of problems in CLBDR which occured when it was trying to do a
        fit with insufficient data.  Fixed an error in GASOLV setting the
        value of INCJJJ to the no. of channels rather than the number of
        IFs as the increment in IF.
           Cleaned up a few problems with processing IQUV data; it now
        only does solutions for I rather than I and Q.  Closure defects
        are now labeled Ipol rather than RPOL.
           Now CALIB fill in the list of sources passed as both the
        source and calibrator list for SOUFIL.  This should fix
        selection of calibrators by CALCODE.
        Moved nowhere.

 6073.  June 26, 1990          MWFBSM                  Bill C.
        Modified to be sure to replace blanked values if any valid values
        were in the input array.
        Moved nowhere.

 6074.  June 26, 1990          SN2CL                  Bill C.
        Fixed indexing problem; if a blanked IF was found in a SN table
        entry, that and all following IFs were blanked.
        Moved nowhere.

 6075.  June 26, 1990          SWPOL                  Bill C.
        Fixed error in indexing visibility record.
        Moved nowhere.

 6076.  June 26, 1990          MX                      Bill C.
        Cleaned up the handling of frequency channels; also fixed bug
        which caused too many channels to be processed if CHINC>1.
        Changed names and useage of variables to more closely reflect
        channel selection as viewed by the user.
        Moved nowhere

 6077.  June 26, 1990          GAPLT                   Bill J.
        Call to subroutine GINIT was nonsense --- wrong sequence of
        arguments and insufficient arguments.
        Moved to 15OCT90 this date.

 6078. June 26, 1990           SNPLT                    Neil/Phil
       The data statement initializing QUAL to /30*-1/ should be
       /30*0/. The tables routines expect QUAL of 0 to mean any
       qualifier in contrast to the calibration routines that
       expect -1.
       Moved to 15OCT90 this date.

 6079.  June 27, 1990                CVEL.HLP         Phil
        I forgot to outbck the helpfile which reflected the
        latest CVEL changes, so the program did not know about
        the new adverbs.
        Moved to 15OCT90 this date.

 6080.  June 28, 1990               TAPIO.FOR               Bill J.
        Suppressed the messages about block sizes read being at
        variance with those expected.  This causes so much distress
        with users that these essentially debugging messages
        needed to be removed.  Prompted to do so by the same question
        about these messages twice in five minutes!
        Moved to 15OCT90 this date.

 6081.  June 28, 1990         DATFLG                        Eric
        Corrected gross errors: the offset to the first spectral
        channel to be flagged was not included when computing the
        index to negate the weights.  Then a flag channel 12-20
        acted as a flag channel 1-9.  The offset to BCHAN was not
        used when examining if there were any unflagged channels
        in BCHAN-ECHAN, making still more trouble.
        Moved to 15OCT90 this date, 15JUL90 later from OZ.

 6082.  June 28, 1990        Unix Terminal I/O                  Chris
        Changed ZTTOPN in APLUNIX and added a Unix specific version of
        ZTTYIO.  ZTTYIO and ZTTOPN now use the designated input-output
        unit (*) rather than relying on units 0, 5 and 6 being
        preconnected to standard error, standard input and standard
        output respectively (I assume this was calcified FORTRAN 66).
        In addition, explicit opens of {\tt /dev/tty} have been dropped
        from ZTTOPN.  This provides the necessary hooks for interposing
        a more friendly interface between the user and AIPS in the Unix
        environment by allowing AIPS to be run in a pipe.
        Also removed Convex specific version of ZTTOPN which is no
        longer necessary.
        Relinked AIPS and ZSTRTA for now: will slowly permeate other
        AIPS programs.
        Moved nowhere.

 6083.  June 28, 1990         ZLPCLS (APLGEN, APLVMS)         Bill J.
        Changed the logic in the effective handling of OUTPRINT.  If
        OUTPRINT = ' 'then a temporary file is created for the line-
        printer output and this is deleted after printing.  On the other
        hand, if the user specifies a suitably valid OUTPRINT file to
        receive the output, this is created, opened and closed properly,
        but NOT printed.  (It has seemed to me that this logic is to
        be much preferred over the original especially when some users
        like to print a lot into a file to be examined with an editor
        elsewhere.)  This fix answers Gripes 3921, 4069 and 4128.
        APLGEN:ZLPOPN.FOR had its output messages changed slightly
        to remove explicit reference to "lineprinter files".  PRTUV
        had been modified before to have this logic.  That program
        however uses different calls.
        Moved nowhere.

 6084.  June 29, 1990         CALIB                    Neil Killeen/Bill C
        Fixed bugs in CLBHIS which caused it to blow up if there were
        more than 35 antennas in the AN table.
        Moved nowhere.

 6085.  30 June 1990         PRTAB                     Eric
        Corrected character and bit-field lengths so that the data length
        controls what is displayed even if the column header is longer.
        Corrected type in setting the field lengths and starting
        character numbers which could make one or more of the first
        columns into blanks fields.  Changed to center character fields
        under the headers using the maximum actual character data length
        rather than the column width.  Improved the centering of column
        numbers over the columns as well.

        Changed it to remove nulls from character strings in all places
        they might occur inside the table.  Also had it check for lengths
        needed for times and floating numbers (i.e. are all positive).
        Moved from Oz to 15JAN91 and 15OCT90.

 6086.  30 June 1990          IMCCLR                    Eric
        Raised the lowest level of the standard 8-color contour used
        by TVFIDDLE among others.  It was too dark for standard SUN
        monitors.
        Moved from Oz to 15JAN91 and 15OCT90.

 6087.  30 June, 1990         ILNCLR, IENHNS            Eric
        Corrected ILNCLR to avoid writing to non-positive array
        subscripts.  It was blithly writing to negative array subscripts
        and wiping out other local parameters in TVPSEUDO bits of AIPS,
        SPFLG, and TVFLG.  The bug hit unimportant variables only in AIPS
        itself.  Corrected IENHNS to leave the graphics on or off as it
        was on input.  Previously, it could get it wrong.  Also corrected
        the plotting of the transfer function to account for zoom.
        Before, the plot went to the upper right of the memory, not the
        visible screen.
        Moved from Oz to 15JAN91 and 15OCT90.

 6088.  30 June 1990           PCNTR                         Eric
        Corrected test on IYINC - it used a YINC of 1 except for YINC=1
        where it used a YINC of infinity I think.
        Moved from Oz to 15JAN91 and 15OCT90.

 6089.  30 June 1990      MCREAT, GRIDTB and GRIDTC       Eric
        Changed two message levels in MCREAT from 8 to 7 so that
        disk too full and disk not allowed messages may be suppressed.
        Changed GRIDTB and GRIDTC to honor BADDISK even when creating
        a cataloged master grid file.  Changed TVFLG/SPFLG help files to
        reflect this improvement.  Added  GRIDTC to OPT2.LIS in
        SYSCVEX:, SYSNRAO1:, and SYSVLAC1:.
        Moved from Oz to 15JAN91 and 15OCT90.

 6090.  30 June 1990           TVFLG & SPFLG            Eric
        Changed them to turn off the menu and restore the zoom only
        when that is useful.  This speeds it up a lot.  Corrected the
        handling of bad sort order in the input data --- it continued
        on erroneously due to a missing error code.  Changed to turn on
        the TV cursor sooner and to clean up the line/box displays
        in the flagging routine.  Fixed to turn off the graphics planes
        used to show the window when it is set with the cursor.

        Changed format statement 1010 in subroutine TVFCLP and SPFCLP
        so that internal write does not overflow recipient character
        variable (typed in clip levels).

        Changed $INC DTVF.INC and DSPF.INC to add source number to
        the FC table and to pass the source name around more.
        Changed SPFLG and TVFLG to allow the user to choose whether
        the current flags are applied to all sources or just to those
        explicitly visible at the moment on the TV.  Made the status
        line(s) display smarter, allowing 3 lines for narrow windows.
        Corrected setting of time ranges and areas --- if button B or
        C was hit before any TRC was set then a bad entry was made in
        the FC table which could delete a lot of data later but not
        on the TV.  Changed it to make B and C mean A when no TRC is
        set and to make an entry in the FC table only if some pixel
        in TVFLG/SPFLG was flagged by the command.  Corrected history
        entries so that SOURCES get a close quote and names are not
        repeated.  Changed so that the wedge when displayed is at
        least 128 pixels --- some wedges were too narrow to see.
        Changed help files to mention the new SET SOURCE FLAG.

        Changed fortrans and help files to exclude autocorrelation
        by default.  This change was in the CV version of TVFLG but was
        not documented in their CHANGE.DOC.
        Moved from Oz to 15JAN91 and 15OCT90.

 6091.  30 June, 1990     YSTV:WINDOW.C                  Eric
        Added more initializations.  Previously the window width and
        height variables were unknown until the screen was redrawn
        (as for example by opening the icon).  So, YWINDO got bad
        answers when SSS had never been opened.  One can write to the
        icon now.
        Moved from Oz to 15JAN91 and 15OCT90.

 6091.  30 June 1990        PRTAC & Text file reading            Eric
        Corrected text file reading routines to ignore all commented
        lines.  Changed:
        PRTAC   Ignore lines starting with ';' and '*' in user list.
        AU1A    Added line to ignore comment (';') when looking for 2nd
                ignored line in Inputs section of help file.
        AU2     Added line to ignore comment (';') when looking for 2nd
                ignored line in Inputs section of help file.
        AU2A    Added line to ignore comment (';') when looking for 2nd
                ignored line in Inputs section of help file.
        Fixed up PRTAC - it was overhauled incorrectly,
        not taking the new format into account.  Someone fixed
        it partially, but not completely or correctly.
        Moved from Oz to 15JAN91 and 15OCT90.

 6092.  1 July, 1990       FNDEOT, AVTP, FITTP         Eric
        Changed call sequence to FNDEOT to have the calling routine pass
        in the IO buffer and its size.  Some tape drivers require that
        the buffer always be larger or equal to the largest tape record.
        Moved from Oz to 15JAN91 and 15OCT90.

 6093.  1 July, 1990            tapes                             Eric
        Changed a number of routines to test for non-standard and other
        pseudo-FITS tapes (e.g., RPFITS).  This means checking the record
        length on tapes and checking the value assigned to SIMPLE.
        Changed:
        APLSUB/TAPIO   Corrected a bug in which the FTAB pointer was
                       used to count logical records in a physical
                       record.  Corrected it to return an error code
                       (10) when the logical and physical lengths are
                       incompatible.  It was blithly proceding when
                       the physical was < one logical.  Added code
                       to mask message about logical and physical
                       length incompatibilities when MSGSUP > 999.
                       BillJ had commented out these messages which is
                       a very bad idea; lengths must be tested.
        APLSUB/TPHEAD  Changed to handle the error 10 from TAPIO and
                       to check the value assigned to SIMPLE.
        APLNOT/TPIOHD  Changed to look for 2880-byte logical records,
                       to handle the error 10 from TAPIO and to check
                       the value assigned to SIMPLE.
        AIPSUB/AU4     Changed to handle the code for non-standard
                       FITS-like data (-1) now returned by TPHEAD.
        APGNOT/IMLOD   Changed to handle the code for non-standard
                       FITS-like data (-1) now returned by TPIOHD.
        APGNOT/UVLOD   Changed to handle the error 10 from TAPIO and
                       to check the value assigned to SIMPLE.  Changed
                       to check tape errors and close tape properly as
                       well in subroutine UVPARM.
        APLPGM/PRTTP   Changed to handle the error 10 from TAPIO and
                       to check the value assigned to SIMPLE.  Also
                       simple removed error 10 returns for VLA
                       on-line data tapes.
        APGNOT/FILLM   Changed to ignore error 10 from TAPIO and to
                       mask length incompatibility messages.
        APGNOT/FILLR   Changed to ignore error 10 from TAPIO and to
                       mask length incompatibility messages.
        APGNOT/MK3IN   Changed to ignore error 10 from TAPIO and to
                       mask length incompatibility messages.
        APGNOT/MK3TX   Changed to ignore error 10 from TAPIO.
        Moved from Oz to 15JAN91 and 15OCT90 - Bill has MK3IN so told him.

 6094.  1 July 1990            SETPAR                     Eric
        Changed it to test limits on all parameters read from the
        user (an AIPS Manager).  In so doing, relaxed the tests on
        TIMDEST limits to allow for even shorter time limits.
        Moved from Oz to 15JAN91 and 15OCT90.

 6095.  1 July 1990       IBM discovered                    Eric
        Corrected GO TO's with an address inside a DO loop (usually
        the end thereof) in CLCOR, TABED, UNCAL, SETJY, and TABEX.
        Corrected two EQUIVALENCE statements which equivalenced
        a variable to itself as well as to other variables in
        GETJY.  The CLCOR error caused a real error on all machines.
        Moved from Oz to 15JAN91 and 15OCT90.
        Moved to CV from Oz (based on version fetched today from CV.

 6096.  July 1, 1990      IBM discovered                Eric
        UVFND had a logic error due to an error in indentation leading
        to an incorrectly placed END IF.  There were branches into the
        IF block which the IBM RISC Series 6000 compiler detected.
        Moved from Oz to 15JAN91 and 15OCT90.

 6097.  July 3, 1990          CLCOR                    Bill C
        Corrected error indexing input parameter array for OPCODE='PCAL'
        (MkIII VLBI manual phase cal).  The wrong phases were being
        inserted in the table.
        Moved to 15OCT90 this date.

 6098.  July 3, 1990           UVFIX                     Bill J.
        Didn't report missing AN table(s) --- instead "ends succesfully"
        leaving user confused.  Added user error messages and failure
        signals.  In response to Gripe 4326.
        Moved to 15OCT90 this date.

 6099.  July 3, 1990           GETJY                    Bill J.
        Bumped up number of secondary calibrators allowed to cope
        with survey experiments by red-haired people.
        Moved nowhere.

 6070.  July 5, 1990          IMLOD                     Bill J.
        I had added a trap in IMPARS to cope with "rogue" history
        records i.e. those which were greater than 80 characters.
        For example, the end of one record (up to character 80)
        was "BPA = -" --- this caused the parser grief, and tried
        to assign a number greater than allowed in R*4 to a real.
        Bad history records shouldn't cause failure to load image so
        the trap tested for these and substituted FBLANK for the
        real.  Unfortunately, the test often trimmed the bandwidth
        to FBLANK.  Changed this to something more appropriate.
        I'm surprised that Gripe 4299 was the only complaint!
        Moved to 15OCT90 today.

 6071.  July 7, 1990          LISTR/LISTR.HLP           Glen
        Added Cal Code Data selection to LISTR and LISTR.HLP. Also
        Shortened standard OPTYPE='SCAN' output for special cases
        of frequencies the same for all sources.  Added 'LR' and 'RL'
        option to OPTYPE='LIST'.  Added a few columns of precision
        when extra room was available.  Stopped auto rescale of
        OPTYPE='LIST' for small decreases in scale.  Removed 60 sec
        and 60 mins from time print.  Added two subroutines ISORT
        and IMERGE to simplify antenna selection.
        Moved Nowhere.

 6072.  July 7, 1990          MX                        Glen
        Added further check for channel averaging.  Case of averaging
        several channels, when in the last plane there are not enough
        channels left to average, the remaining channels are averaged.
        Moved Nowhere.

 6073.  July 7, 1990         DDTLOAD.001                Glen
        Replaced NCOMP=? with NCOMP=0 so ASCAL will pass the DDT
        test.
        Moved to 15JUL90 and 15OCT90 this date.

 6074.  July 5, 1990         OFMDIR, AU5E                       Eric
        Moved OFMDIR from AIPSUB to APLSUB, added an error return to its
        call sequence removing the POPS error handling, and removed any
        writing of the OFM to the TV.  Changed AU5E to account for the
        new call sequence of OFMDIR, to do the writing of the OFM to the
        TV on OFMGET, and cleaned up the error handling.
        Moved from Oz to 15OCT90 and 15JAN91.

 6075.  July 5, 1990        FILINI and FILAIP             Eric
        Went through FILINI cleaning up the GO TO's into IF-THEN-ELSE
        and correcting the code.  Whoever overhauled it, ignored all
        the changes in file formats.  Corrected file size computation
        for public CA files in FILAIP (these are never used anyway).
        Moved from Oz to 15OCT90 and 15JAN91.

 6076.  July 5, 1990            AU4                      Eric
        Corrected call sequence to FNDEOT to pass in the tape buffer.
        Fixed precursor remarks to FNDEOT as well.
        Moved from Oz to 15OCT90 and 15JAN91.

 6077.  July 8, 1990              DATBND                      Phil
        Was not applying the bandpass corrections to cross-polzn
        spectra (i.e. RL, LR) due to an indexing error.
        Moved to 15OCT90 today.

 6078.  July 8, 1990              SMOSP                        Phil
        Never smoothed anything other than the first polarization
        (usually RR) since it only ever though there was one polzn
        in the data, it now finds out for itself how many there are
        and does them all.
        Moved to 15OCT90 today.

 6079.  July 12, 1990            DATGET                      Bill C.
        Added compiler directives includes in front of DO loops 150 and
        180 to suppress vectorization.  When these loops were short they
        occasionally produced erratic effects when compiled using the
        vectorizer on Convexes.
        Moved to 15OCT90 this date.

 6080.  July 12, 1990               UVFLG                     Phil
        Added the option to delete just the cross-hand polarizations
        if so desired. Also changed UVFLG.HLP to reflect this.
        Moved nowhere.

 6081.  July 13, 1990                SPLIT                   Phil
        When the CHNSEL adverb was used the channel bandwidth of the
        output file was incorrect.
        Moved to 15OCT90 this date.

 6082.  July 13, 1990                 AVSPC                   Phil
        AVSPC had been broken for 6 months, this was 'common knowledge'
        at the AOC - it wasn't so bloody 'common' to me. The problem
        was that the number of channels in the spectrum was being
        extracted from the output catalogue header not the input, so
        it was always 1. In the course of fixing this I found the same
        problem as was occurring in SPLIT ie. the channel bandwidth of
        the output file was incorrect. Fixed.
        Moved to 15OCT90 and 15JUL90 this date.

 6083.  July 16, 1990      CALIB,FRING et al.                   Bill C.
        Changes mostly affecting multi IF fringe fitting.
        Modified to honor user specified ANTENNAS for single source
        data.  Changed to blank solutions for which there was
        insufficient valid data or, in CLBDR, if the determined SNR
        ratio was below the minimum.  Fixed problem in CLBDR that caused
        IFs to be ignored if a lower IF number failed to converge.
        CLBDR now sets SNRs for the reference ANTENNA to SNRMIN+1 if the
        solution converges.  Modified CLBDR to use frequency offsets
        inside of a given IF to do the solutions and then refer the
        phase to the reference frequency; this allows using the
        uncertainty of the phase solution to estimate the SNR.
           Split the amplitude-phase and fringe fitting functions into
        CALIB and FRING.  Split the host of least squares routines into
        separate files and made local include CALIB2.INC into INC:GAIN.INC.
        In both CALIB and FRING a new adverb SNVER allows the user to
        specify if he wants a new SN table or to add to an old one.  In
        the latter case solutions in the old table that are going to be
        redone are flagged with a call to CALSEL.  In both CALIB and
        FRING, most of the weirdness to allow both fringe fitting and
        amplitude and phase calibration was cleaned up and the
        unnecessary adverbs were removed.  Also changed CALIB.HLP, added
        FRING.HLP.
           Added an option in CALIB to pass solutions that failed or had
        too little data.  The effect is not to change the prior
        calibration and may be useful in certain self calibration
        applications.   CALIB  now reports as failed solutions
        only those for which the solution failed or the SNR was too low
        and reports the solutions that had too little data separately.
        CALIB now prints a header for closure error listings even if no
        data exceeded the specified limits.
           Modified RUNSYS:VLAPROCS.001 to reflect the changes to CALIB.
        Moved nowhere.

 6084.  July 16, 1990          CALREF                      Bill C.
        Corrected to ignore flagged table entries rather than quit.
        Moved nowhere.

 6085.  July 16, 1990          New adverbs                 Bill C.
        Added new adverbs SNVER and SOUCODE.  Changed POPSDAT.HLP and
        NEWPARMS.001.  Added SNVER.HLP and SOUCODE.HLP.
        Moved nowhere.

 6086.  July 16, 1990          CALSEL                      Bill C.
        New routine to flag selected entries in an SN or CL table.
        Moved nowhere.

 6087.  July 17, 1990          UVTBUN                      glen
        Difference between UVTBUN and UVUNIF was that UVTBUN doubled
        row U=0 while UVUNIF conjugated row U=0.  Modified UVTBUN
        to conjugate U=0.
        Moved nowhere.

 6088.  July 19, 1990            AIPSSHAR                  Chris
        Placed a new shell script, AIPSSHAR, in SYSUNIX.  This is
        a simplified Unix shell archiver: it packages text files
        into a shell script that recreates the files when executed.
        Instruction may be found in the header of AIPSSHAR.  This
        script is intended for packaging AIPS related programs, such
        as the various AIPS screen servers, that do not need the AIPS
        libraries so that they may be more easily installed on machines
        without AIPS.
        Moved to 15OCT90 this date.

 6089.  July 19, 1990      CLCAL                          Bill C.
        Major overhaul.  Added adverbs SOUCODE to select the source
        calibrator code and SNVER to select a single SN table to be
        applied.  CLUPDA was changed from being in a library to
        incorporated into CLCAL.  Now the input SN table are copied to a
        temporary SN table, smoothed if requested and applied to the
        input CL table and then deleted.  The input SN tables are left
        unchanged.  The output CL table is purged of entries to be
        replaced.  There was a general clean up of the tables handling.
        Now uses SOUFND and ANTFND to determine selected sources,
        calibrators and antennas.
        Removed use of DSEL.INC.
        Also cleaned up the CLCAL.HLP file.
        Moved nowhere.

 6090.  July 19, 1990        ANTFND,SOUFND                 Bill C.
        Yet another set of routines to check lists of antennas and
        sources.  SOUFND selects sources from the SU table on the basis
        of names, qualifiers and "Cal" codes.  Both routines handle
        excluded antennas or sources.
        Moved nowhere.

 6091.  July 19, 1990        CL and SN tables              Bill C.
        Modified handling of table column pointers.  Added two new
        parameter includes PSNTAB.INC and PCLTAB.INC with pointers into
        SNKOLS and CLKOLS from SNINI and CALINI to point to the
        beginning of a column entry in the record returned from TABIO.
        These INCLUDE files should be synchronized with any changes made
        in the the table columns made in SNINI and CALINI.  Affected
        routines: SNINI, TABSN, CALINI, TABCAL.
        Moved nowhere.

 6092.  July 19, 1990        SN2CL                         Bill C.
        Now selects calibrator solutions by antenna.  Cleaned up
        handling of table column pointers and modified to use logical
        function SLCTD to determine is a given source, calibrator or
        antenna was selected.
        Moved nowhere.

 6093.  July 19, 1990        SNAPP                         Bill C.
        Modified no to delete the input table and cleaned up the
        handling of column pointers.
        Moved nowhere.

 6094.  July 19, 1990        CALADJ                        Bill C.
        Changed call sequence.  No longer uses arrays in DSEL.INC or
        even includes DSEL.INC.  General cleanup of table column
        pointers.
        Moved nowhere.

 6095.  July 19, 1990        CALREF              Bill C.
        Bug fix.  ALL table entries were being ignored due to
        mishandling a return code of 0 from TABIO  (it was treated as a
        flagged entry).  This will cause all referencing of antenna
        phases to fail.
        Moved nowhere.

 6096.  July 20, 1990         TABSRT             Bill C.
        Corrected not to fail on empty tables.  Now it closes the table
        and returns.
        Moved nowhere.

 6097.  July 20, 1990                UNSHR                    Chris
        Added a standalone FORTRAN program, UNSHR.FOR,  to directory
        YSERV.  This program allows AIPS shell archives created with
        AIPSSHAR to be unpacked on machines that do not have a Bourne
        shell.  Also moved AIPSSHAR to YSERV and created a README file
        to explain what is happening in this directory.
        Moved to 15OCT90 this date.


 6098.  July 23, 1990                  GM                     Phil
        After the major surgery on CALIB/FRING GM still called DDOT
        as though it was a function instead of a subroutine.
        Moved nowhere.

 6099.  July 23, 1990        COMRPL in SYSUNIX                  Chris
        COMRPL in SYSUNIX now excludes any environmental variable that
        ends in an upper- or lower-case variation of CWD or PWD from
        consideration when performing the reverse look-up of directory
        name to AIPS `logical' where it previously only exluded case
        variations of CWD and PWD as a complete environmental variable
        name.  This prevents COMRPL being confused by the KornShell
        OLDPWD variable, and most other schemes that keep track of old
        working directories by storing them in environmental variables.
        Moved to 15OCT90 this date.

 6100.  July 23, 1990                FILLM                    Gareth
        This is a new version of FILLM which has the capability to
        create more than 4 uv-files in parallel.  The previous version
        could only manage 4.  However, with the implementation of all
        of the correlator modes in the VLA correlator, it is necessary
        to be able to fill 8 uv-files at the same time in the worst
        case (channel 0 and spectra for each of the 4 IFs).  The
        maximum number of simultaneous uv-files is now defined by
        MXSTRM in FILLM.INC and MXSTRE in MC2.INC.  These two MUST be
        kept identical.
        This version does not yet implement more than 4 uv-files at
        once.  However, the parameterization meant changing so many
        lines of code that I think it would be wise to see if I have
        made any blunders before going further.  I have myself tested
        this version on two spectral line observations.  I will let
        the users provide me with more tests!
        If this works, then the majority of the further changes have
        to be made in the routine MCINI.
        Moved nowhere (surprise, surprise!).

 6101.  July 25, 1990              AN10RS                    Chris
        Reimplemented AN10RS to deal with the case of excluded antennae.
        AN10RS was producing nonsensical output if any element of ANTENS
        was negative while all elements of BASELN were zero.  This lead
        to UVCOP, UVFLG and VBPLT not producing output if the user had
        tried to exclude specific antennae.  The code for the original
        version was sufficiently opaque to make writing a new version
        easier than locating the bug in the old version.  However,
        inspection of the old code showed up a number of defects in
        addition to the problem of generating incorrect output for
        excluded antennae:
        1 - the header comments were misleading regarding the output if
            ANTENS was all zero or positive and BASELN was all zero;
        2 - if there were any antenna numbers following a zero in
            ANTENS or BASELN these would be ignored;
        3 - if an antenna number was repeated in ANTENS all subsequent
            entries in the array would be ignored (BASELN was saved from
            this by an obvious typing error but the number of unique
            entries in BASELN would not have been counted correctly; and
        4 - only the first NANT antennas in each of ANTENS and BASELN
            were checked, where NANT was the maximum antenna number in
            the selected subarray (tasks using the ANTENNA and BASELINE
            adverbs should function correctly even if the user specifies
            a number of non-existent telescopes.
        These defects are all fixed in the new version

 6102.  July 26 1990             UVTBUN                 Glen
        Semi-major change allowing UVTBUN to uniform weight all sizes
        of maps.  Now scales Uniform grid to fit in available "AP"
        memory if grid is too large.  (Unchanged for big APs.)
        Will move to 15OCT90 after a few days of testing.

 6103.  July 26 1990             ALGSTB                 Glen
        New gridded unsorted subtraction.  Will handle any size map.
        Functions identically to ALGSUB.
        Moved nowhere.

 6104.  July 26 1990             UVGRTB                 Glen
        New grid without sorting subroutine.  Handels any size map.
        Will also handle Zerospacing with a user defined size.
        ZEROSP(2) is major axis FWHM in arc seconds.  ZEROSP(3) is
        minor axis FWHM in arc seconds.  ZEROSP(4) is position angle
        on the sky.  Uses new Zero spacing subroutine UVSETZ.
        Moved nowhere.

 6105.  July 26 1990             UVUNIF                 Glen
        Minor changes to make UVUNIF more similar to UVTBUN.
        Moved nowhere.

 6106.  July 26 1990             MX/GRDSUB              Glen
        Allow unsorted data to used gridded model subtraction.
        Both task and subroutine use variable ISORT in common DUVH
        to choose whether to use subroutines UVTBUN, UVGRTB and ALGSTB
        or the equivalent (older) set UVUNIF, UVGRID and ALGSUB.
        Moved nowhere.

 6107.  July 27, 1990             CLIP            Dan Briggs/Phil
        Modification to CLIP to allow the user just to clip data
        on specified baselines, or all baselines to an antenna.
        Also modified help file to reflect these changes.
        Moved nowhere.

 6108.  July 27, 1990             VLBIN              Phil
        Added the ability to print out the average clipper bias
        determined from the autoocorrelation functions. These
        are printed out for every antenna for every scan when
        AC data are present. The corrections for quantization
        and fringe-rotation are now applied to the xc data in
        VLBIN for spectral line data, they could not be absorbed
        into the b-factor because that would have to be different
        for xc and ac data. Added section to help file describing
        this.
        Moved nowhere.

 6109.  July 30, 1990             IBLED                   Phil
        So many changes I don't know where to begin.
        - changed the whole philosophy of the program, instead
          of gridding the data to a scratch file and having to
          use the MDISK routines to access it ( which was very
          slow for this type of editing), I now load up arrays
          in memory with the amplitude and phase and flagging
          information and from this I load the TV and do all
          the editing. This has given IBLED a speed up factor
          of order 20.
        - Now use graphics planes for the editing instead of
          the image plane as before. This means I can use IMVECT
          instead of YIMGIO, this speeded up the loading and
          reloading of the screen by a factor of 5 or so. One
          problem with this occurs on Suns where I sometimes have
          only one graphics plane and two image planes, in this
          I load the data plus its labelling to the one image
          plane and the menu etc goes in the graphics plane.
          On IIS and IVAS devices this problem does not occur.
        - Added new flagging and display options, there is now
          the ability to perform an interactive clip. The user
          can plot his error bars. Can display any of the STOKES
          parameters in his data. Has the option to flag all data
          to a given antenna.
        - Tidied up a lot of the subroutines to make program
          maintenance a lot easier.
        - Rewrote the help file to reflect all the new changes.
          Moved to 15OCT90 this date.

 6110.  August 1, 1990          UVGRID                 glen
        Removed some of the debugging messages and reformated
        others.  Also allowed points slightly closer to the edge
        of the V max of the grid to be used.  (In earlier versions,
        some points were excluded.)
        Moved to 15OCT90 Yesterday

 6111.  August 1, 1990          ALGSTB                 glen
        Removed some debugging messages and spare variables.
        Moved nowhere.

 6112.  August 3, 1990          POSSM                 Phil
        Someone had screwed up the ability of the user to supply
        his/her own plotting limits. Fixed so that the program
        once again uses these if specified.
        Moved nowhere.

 6113.  August 6, 1990            AN10RS                    Chris
        Fixed a small coding error which caused the first baseline of
        an explicit set of baselines to be lost (I don't understand
        why I didn't see this when I tested this case).
        Moved to 15OCT90 this date.

 6114.  August 7, 1990           DAYFX                      Bill C.
        New task to patch up times screwed up by FILLM at the beginning
        of a new tape.  It looks for a day number that is last than the
        last good day number and replaces it with the last good day
        number.  With any luck this task will not live long.
        Moved to 15OCT90 this date.

 6115.  August 8, 1990          AREAS.DAT                 Bill C
        Added definition of logical YXAS to point to Y.XAS as the
        directory for the NRL X windows version of the AIPS TV.
        Moved to 15OCT90 this date.

 6116.  August 8, 1990    XAS Z and Y routines            Chris
        Placed the Y-routines and Z-routines necessary to support
        NRL's XAS screen server into the system.  Some changes to the
        Z routines were necessary: addition of standard AIPS headers;
        removal of INTEGER*2 variables; removal of common header file
        from level-2 Z-routines; and removal of VMS support.  The latter
        change was necessary since we have no mechanisms for compiling
        C under VMS at present and VMS support seemed incomplete. At
        present the Z-routines have only been placed in APLBERK since
        they rely on sockets.
        Moved to 15OCT90 on August 15, 1990.

 6117. August 8, 1990                 VLBIN                 Phil
       For line data the XC spectra were not being corrected by the
       fringe-rotation factor (1.28), this is normally part of the
       b-factor for continuum data but cannot be for line because
       it applies only to xc not ac data.
       Moved nowhere yet.

 6118. August 8, 1990                  IBLED                 Phil
       The phase was being incorrectly calculated due to a mis-
       placed parenthesis, fixed that. Also stopped the screen
       being refreshed (ngray planes + 1) times every time the
       YZOOMC is called. YZOOMC is now only called if the magnif.
       factor has changed.
       Moed nowhere yet, more changes pending.

 6119. August 9, 1990                  APLNOT:DATPOL         Gareth
       This routine is internally documented to work only when KNCOR=4.
       It turns out that this was accurate, but it is nevertheless
       called with other values!  I have changed it so that it does
       nothing unless KNCOR=2 or 4.  In the case of KNCOR=2, it will
       apply only the mutual coupling between the parallel hands.  It
       is also clear that this only formally went through the code
       overhaul; it needs major surgery.  I will do this in the next
       week if I have time - otherwise I leave this as a reminder for
       the next person!
       Moved nowhere yet.

 6120. August 9, 1990 AIPSPUBL:COOKn.TEX,AIPSPUBL:COOKm.MAC  Bill J.
       Where n=1 to 15, m=82, 82G, G, Y and Z.  The revision of the
       Cookbook is now complete. Reordered the complete volume.
       Added Appendix Y on tape and disk file sizes. Serious revision
       of all chapters and appendices.  Note "Chapter 99" is now
       "Chapter 4".
       Moved nowhere.

 6121. August 9, 1990           APLPGM:PRTTP.FOR            Bill J.
       A new error code returned by TAPIO (error 10) was not handled
       correctly in subroutine PRTPHD in the case where PRTTP reads
       Modcomp archive tapes.  Changed the logic to accommodate this.
       Tested on archive tape and FITS tape.
       Moved 15OCT90 today.

 6122. August 13, 1990          AIPPGM:SETPAR.FOR           Bill J.
       SETPAR wouldn't allow the setting of "-1" in the disk
       assignments (-1 ==> scratch disk).  Minor error in code.
       Moved 15OCT90 today.

 6123.  August 14, 1990            XAS                     Chris
        Placed a self-unpacking shell archive (XAS.SHR) containing the
        source code and Makefile for the NRL X-AIPS server in area
        YSERV.  The only change from the NRL release is the inclusion of
        standard AIPS headers. Documentation will follow.
        Moved to 15OCT90 this date.

 6124.  August 14, 1990          AIPSSHAR                  Chris
        AIPSSHAR is no longer forced to run under the Bourne shell (it
        appears to require bash or the KornShell) and added the braces
        necessary to cope with the case where there are more than 10
        files to archive.
        Moved to 15OCT90 this date.

 6125.  August 14, 1990    AREAS.DAT in SYSAIPS           Chris
        Moved the declaration of YXAS to its correct place in the
        Y-routine declarations.  Unfortunately the actual directory
        is also in the wrong place (it should be a subdirectory of
        YGEN): this will be painful to fix.
        Moved to 15OCT90 this date.

 6126.  August 15, 1990           GAL                     Eric
        Corrected the plotting aspects of the task: (1) logical variables
        were only tested for value 0.0, now <= 0.0, (2) MAPOPN used a
        constant for an in/out variable, (3) plotting of character "o"
        for data points led to odd shifts of location, not draws an
        x with GPOS/GVEC, and (4) changed to correct input variables for
        the model computation routine.
        Moved from Oz.

 6127.  August 15, 1990        DFTPL                  Mark/Eric
        Fixed a bug in ACDFT related to skipping visibilities.  The logic
        was all wrong resulting in a bad pointer computation, and it could
        never have skipped anything anyway.  Excised everything relating to
        variable ISKIP.  This was a hold-over from its early days as UVPLT.
        Corrected handling of top strings in plot; changed from 200 to 500
        maximum time bins, made sensible defaults for UVRANGE (0,0 was
        believed!), get default TIMERANGE from the data, set default
        time increment to 0.01 of the time range, switch to hours on the
        x axis, and plot the UVRANGE when it is used.  Also changed adverb
        names in the Help file.
        Moved from Oz.

 6128.  August 15, 1990           UVPLT                         Eric
        In working on DFTPL, I noticed that UVPLT had its handling
        of the top lines in the plot messed up yet again.  The location
        given is the BLC of the first character!  Changed the line
        number at the top of the plot given to GINIT and altered the
        line spacing.  Also added a digit to the bandwidth.  Changed
        the time display to use TODHMS and corrected a format.
        Moved from Oz.

 6129.  August 15, 1990             Printing                    Eric
        Began the clean up of printing which will lead in the end to a
        cleaner interface to the "line printer" which can be one of a
        scratch file to be disposed to a real printer, a disk file to
        be saved but not printed, or a terminal.  Because of WRITEs to
        unit 1 in some of the code, the middle of these cannot be
        properly implemented as yet.  As of now, do not use direct
        writes to unit LPLUN (1) and use LPOPEN and LPCLOS rather than
        ZOPEN, ZCLOSE, BATPRT, and ZENDPG.  At present, these still
        just call ZOPEN and ZCLOSE as we have been doing.  A final
        switch can be done later after we change things slowly to
        correct the situation:
        PRTLIN   Changed to handle blank title lines without putting
                 numerous blanks on the output.  This will allow special
                 forms to be used on page 1.  Also fixed it to watch for
                 nulls in the strings.
        PRTALN   As PRTLIN.
        LPOPEN   New routine to open the full (old) range of line printer
                 options.  Also calls BATPRT for batch jobs
                 on real line printers.
        LPCLOS   New routine to close all possible line printer
                 devices and clear them from the FTAB.  Handles the
                 final page and batch remarks as well (ZENDPG and BATPRT).
        IMERGE   Cleaned up the typing --- people who do not follow
                 AIPS typing standards should never put code in
                 standard areas.
        ISORT    Cleaned up typing and corrected it to make the
                 algorithm work.  Above remarks go double when the
                 routine does not even work!
        TODHMS   Removed from LISTR - converts time to 4 integers
                 with no 60's and no 24's.  Even checks the sign.
        Moved from Oz to 15JAN91 and 15OCT90.

 6130.  August 15, 1990          Printing tasks           Eric
        PRTIM    Removed all direct writing to devices and cleaned up
                 the typing.  Made the page titles a bit more legible.
                 Corrected initializing page headers for non-standard
                 types of images.  Changed to use LPOPEN and LPCLOS.
        PRTUV    As PRTIM.  Also removed the junk referring to ZTX...
                 files.  That belongs elsewhere and will eventually
                 be put there.  Add support for linear polarizations.
                 Fixed default line count and changed to use TODHMS.
        LISTR    As PRTIM.  Removed TODHMS to be an separate
                 subroutine in APLSUB.  New CV help file also
                 installed.
        PRTSD    As PRTIM and changed to use TODHMS.
        UVDIF    As PRTIM, plus corrected default line count and
                 changed to use TODHMS.
        UVFND    As PRTIM, plus corrected default line count and
                 changed to use TODHMS.
        Moved from Oz to 15JAN91 and 15OCT90 (except LISTR).

 6131.  August 15, 1990        Other printing             Eric
        Changed the following to use LPOPEN and LPCLOS:
        AU1A      AU7       PRTMSG    BLSUM     CORER     PRTAB
        PRTAC     PRTAN     PRTCC     PRTGA     PRTTP     TXPL
        (1) Also installed Mike Kestevan's corrections to RENAME in AU7.
            He noticed that RENAME did not check all disks and otherwise
            did not use the tools already available in CATDIR.
        (2) Changed PRTGA to use TODHMS.  Also changed it to print
            all antennas in sets of as many as possible at a time.
            Dropped adverb BCHAN from code and help file.
        (3) Corrected VLA display in PRTAN - a station was listed
            twice in the mistaken idea that there are 25 stations/arm.
        (4) Changed TXPL to use the XYRATIO in the plot file and to
            represent grey-scales better.
        NOTE: all are based on the 15JAN91 version in CV, so a few
        improvements have arrived beyond those done in Oz.  They
        include summing the flux before the first negative in PRTCC
        and handling labeled tapes better in PRTTP.
        Moved from Oz to 15JAN91 and 15OCT90.

 6132.  August 15, 1990        IMFIT, JMFIT                  Eric
        Mike Kestevan noticed a long time ago that IMFIT/JMFIT did
        not handle the case of non-square grids correctly.  He made
        a partial change in the RP/AT version.  Changed the NRAO
        versions to use LPOPEN and LPCLOS for the line printer and
        implemented a full handling of the coordinate increments.
        Added a sanitised version of ELIPSQ to APLSUB.  This routine
        converts the parameters of an ellipse to different scalings.
        Note that the AT version had several errors in ELIPSQ and
        in handling the negative axis increment normal on the RA
        axis.
        Moved from Oz to 15JAN91 and 15OCT90.

 6133.  August 15, 1990            XVSS                    Chris
        Repackaged into a self-unpacking archive and move to YSERV.
        This should make installation easier.
        Moved to 15OCT90 this date.

 6134. August 15, 1990              VLBIN               John Benson/Phil
       Fixed up the FBS correction to work properly when data were
       correlated with DLYBYREC true. The bad data at the bit shift
       boundary do not now occur. Also the fringe rotator correction
       for line data was incorrect, the square root of the true value
       was being applied.
       Moved nowhere yet.

 6135.  August 16, 1990            SSS                        Chris
        SSS, like XVSS and XAS is now packaged into a shell archive for
        easier installation and has been moved to YSERV.
        Moved to 15OCT90 this date.

 6136.  August 16, 1990        AIPSSHAR                  Chris
        Changed the argument order so that the archive name comes first.
        AIPSSHAR now works under the Bourne shell again.
        Moved to 15OCT90 this date.

 6137.  August 16, 1990        XASVMS.SHR               Chris
        Archived the original versions of the XAS Z-routines from NRL
        and placed them in YSERV.  This allows sites to get at the VMS
        specific code.  This is tucked away like this since it is
        unsurported code:  we do not have the equipment to test this
        in NRAO.
        Moved to 15OCT90 this date.

 6138. August 16, 1990            PRTUV                Phil
       The logic for controlling how many channels could be printed
       on a line when docrt = -1 (or 132) assumed that the ampl, phase
       and weight occupied 15 columns, in fact after recent changes
       they now occupy 19 columns.
       Moved to 15OCT90 this date.

 6139.  August 16, 1990    README in YSERV              Chris
        Revised the README file in YSERV to update the index of
        archived source files.
        Moved to 15OCT90 this date.

 6140.  August 16, 1990              XVSS                      Chris
        Minor modifications for release 2.0 of XView.
        - Added (void) cast to xv_init, which now returns a pointer to
          the screen object.
        - Set the XV_VISUAL_CLASS of the frame to PseudoColor.
        - Removed the explicit call to repaint_canvas() from
          resize_canvas().  This was necessary in previous versions
          because the CANVAS_FIXED_IMAGE property was ignored so that
          the bit gravity was always set to NorthWestGravity.  This
          meant that shrinking the window did not cause an automatic
          redraw of the canvas.  The redraw is necessary to recentre the
          image.  Removal of the call improves performance since the
          canvas is no longer redrawn twice if the size of the window
          increases.
        - XV_X and XV_Y are no longer set in resize_pressed(). The new
          version of olwm is sufficiently literal-minded that it was
          placing the origin of the canvas at (0,0) on the screen so
          that the title bar and the control panel were above the top
          edge of the screen.
        Moved to 15OCT90 this date (on the assumption that the customers
        will have XView 2.0) by October.

 6141. August 16, 1990       APLNOT:TABSN                  Gareth
       Single character bug fix (.GT. becomes .GE.) to allow the second
       polarization to be written.  Correction to new version made by
       Bill C - (6091. on July 19, 1990).
       Moved nowhere.

 6142. August 17, 1990                   CVEL                  Phil
       Modified code and helpfile to deal properly with subarrays.
       There was a buffer problem if a flag table was being applied
       to the data while shifting. This was fixed. Also fixed once
       again the problem of trashing the HI file.
       Moved to 15OCT90 on Aug. 21

 6143.  18 August 1990              Printing                  Eric
        I have attempted to regularize printing.  Do not use
        WRITEs to unit 1 for line printers or bother with BATPRT,
        ZENDPG, or ZOPEN or ZCLOSE for printing.  Instead, use
        LPOPEN and LPCLOS described below for open/close and
        PRTLIN to print.  The printing to terminal, line printer,
        or text file will be handled.  Text files are opened
        with append so the user can add to an existing file.
        Batch jobs now print to to PRTFIL:BATCHjjj.nnn for job jjj
        user nnn unless an OUTPRINT adverb is given.
        Changed:
        ZOPEN    (APLGEN:) dropped the opening of the line printer,
                 cleaned up the coding.
        ZCLOSE   (APLGEN:) dropped the closing of the line printer.
        ZLPOPN   (APLGEN:) dropped the PNAME argument since it does
                 only real line printers now, added LUN and FIND
                 arguments, and added code to make an open in the FTAB.
        ZOPEN    (APLCRI:)
        ZFORMF   (APLGEN:) NEW - returns a form-feed character
        LPOPEN   Revised to open using ZTTOPN, ZLPOPN, and ZTXOPN (for
                 text file output with APPEND true).  Dropped call to
                 BATPRT.  Added code to set the default name for batch
                 print files to PRTFIL:BATCHjjj.nnn.  Added code to
                 detect whether the text file is new or not.  New ones
                 should not get a line feed at the beginning (conveyed
                 via common to ZFORMF).
        LPCLOS   Dropped call to BATPRT.  Changed ZCLOSE call to
                 calls to ZLPCLS, ZTXCLS, and ZTTCLS and code to
                 clear up the FTAB.
        BATPRT   Deleted.
        PRTLIN   Added calls to ZTXIO when LUN = 3 (disk text file).
        PRTALN   Added calls to ZTXIO when LUN = 3 (disk text file).
        ASSNBASIC  (SYSVMS:) added definition of PRTFIL.
        ASSNLOCAL  (SYSVMS:) changed LPRNTR to point at PRTFIL.
        LOGIN.CSH  (SYSUNIX:) added definition of PRTFIL.
        LOGIN.SH   (SYSUNIX:) added definition of PRTFIL.
        Moved from Oz to 15JAN91.

 6144.  18 August, 1990          OFMLIST                  Eric
        Forgot earlier to change this routine to use LPOPEN and LPCLOS.
        Moved from Oz to 15JAN91 and 15OCT90.

 6145.  18 August 1990           Help files                Eric
        Upgraded the information about OUTPRINT in the following help
        files:
        BATCHJOB   BLSUM      CORER      EXPLAIN    HELP       IMFIT
        JMFIT      LISTR      OFMLIST    OUTPRINT   PRTAB      PRTAC
        PRTAN      PRTCC      PRTGA      PRTHI      PRTIM      PRTMSG
        PRTSD      PRTTP      PRTUV      TXPL       UVDIF      UVFND
        Moved from Oz to 15JAN91.

 6146.  19 August 1990             DDT                      Eric
        Changed help files DDT and DDTSAVE:
        (1) Added TERSE --- otherwise the adverb is useless.
        (2) Added OUTPRINT --- allows the print to be directed to
            a disk file, rather than be printed.
        Changed DDTLOAD.001:
        (1) Made TERSE apply to TPHEAD listings
        (2) Made UV flux difference cutoff far less sensitive;
            with fluxes like 16 Jy, tiny phase differences make more
            15 milliJy amplitude differences.  Raised it to 50 millis.
        (3) Made sure DOCRT = -1 on UVDIF runs, PRTMSGs, and PRTAC;
            DDT is intended to run stand-alone, not with someone at a
            terminal to hit carriage returns.
        (4) Restored PRTAC --- it is one of 2 purposes for running
            the whole thing.  Also restored the PRIORITY 5 PRTMSG.
        (5) Changed to do PRTHED only if TERSE <= 3 and some of the
            PRTCAT only if TERSE <= 2.
        Moved from Oz to 15OCT90 and 15JAN91.

 6147.  20 August 1990           TVFLG, SPFLG                    Eric
        Changed them to use TODHMS in the display of times on the TV and
        in the history file.  This will avoid odd 60's and 24's.
        Changed how the times of the rows in the master grid are found.
        Before, odd beating of the recorded times with the times of the
        rows could occur.  Now, the first row begins 1 or 5 seconds (VLA
        and AT Compact Array) before the first sample.  Every other row
        with data begins $n \times \Delta_t$ thereafter.
        Moved from Oz to 15JAN91.

 6148.  August 20, 1990          AN10RS                Chris
        Removed a block on autocorrelations.
        Moved to 15OCT90 this date.

 6149.  August 21, 1990           GAPLT                Eric
        Bill J "fixed" the call to GINIT which he called "rubbish"
        by getting 2 arguments out of order (they were fine) and by
        adding CATBLK (which was missing).  Corrected.
        Moved from Oz to 15OCT90 and 15JAN91.

 6150.  August 21, 1990     APLVMS:ZLWOP.FOR         Harry Payne/Bill C
	During the installation of 15APR90 for VMS, LWPLA failed to work,
        basically because the output spool file was opened with
        "FORM='UNFORMATTED'" in APLVMS:ZLWOP.FOR, but APLGEN:ZLWIO.FOR
        tries to write formatted data to it.  The file needs to be
        opened as a formatted file with logical records long enough to
        hold 256 CHAR*4's.
        Moved nowhere.

 6151.  August 21, 1990           CVEL                   Phil
        When there are many sources in the datafile the interpolation
        of velocity shifts was being screwed up because it was not
        being reset at a source change. Fixed.
        Moved to 15OCT90 this date.

 6152.  August 22, 1990          SN2CL                   Bill C.
        Removed a bug I recently inserted which caused CLCAL to go into
        an infinite loop whenever the last calibrator in the SN table
        was not in the list of desired calibrators.
        Moved nowhere.

 6153.  August 22, 1990         TVOVER.TEX                  Chris
        Added TVOVER.TEX, a document giving an overview of the various
        workstation servers, together with installation instructions, to
        YSERV.  Also updated the README file in YSERV and deleted the
        now obsolete TVINSTALL.TEX in DOCTXT.
        Moved to 15OCT90 this date.

 6154.  August 22, 1990        SNINI                        Phil
        The call to FNDCOL near the end of the routine was being passed
        MAXCLC as the number of columns to find, this caused various
        variables to be overwritten, changed to pass NCOL which is
        determined just prior to the FNDCOL call.
        Moved nowhere.

 6155.  August 22, 1990                 ACFIT                   Phil
        Problem with FQ ID's, the input adverb was being reset to -1
        when the template spectrum is read, fixed this. Also fixed
        an incorrect format statement which attempted to report the
        above error.
        Moved to 15OCT90 this date.

 6156.  August 22, 1990      APLBERK:ZDATE.C,ZTIME.C            Brian
        These two routines broke when NRAO1 was upgraded to Convex OS
        8.1. Times that were declared int should instead be declared
        type time_t. I checked some other Berkeley systems (SunOS
        [34].x, Alliant, Convex 7.1, Ultrix) to make sure this wouldn't
        break anything.
        Will be moved to 15OCT90 when I figure out how.

 6157.  August 22, 1990      Unix Directory reading             Brian
        The following all broke at Convex OS 8.1 for the same reason.
                APLBERK:ZTACT2,ZTKILL,ZTXMA2
                APLCVEX:ZSPACE
        Convex went to a more modern directory reading scheme. A
        different include file was required, and a struct direct becomes
        a struct dirent. Also some code that checks for null directory
        entries was excised since it was non-portable and made backwards
        compatibility more difficult (this test is only necessary if you
        have to read the raw directory). The source is ifdef'd on the
        posix source keyword to try to distinguish when it should try to
        use the new format.
        Will be moved to 15OCT90 when I figure out how.

 6158.  August 22, 1990      APLCVEX:ZTPOP2                      Brian
        This broke at Convex OS 8.1 because the define FASIO became
        _FASIO to avoid compliance breaking namespace pollution. I
        ifdefed on posix source so it should still run under pre 8.1
        convex OS.
        Will be moved to 15OCT90 when I figure out how.

 6159.  August 22, 1990      AIPSPUBL:COOK4.TEX                   Bill J.
        Revision of the "Calibration" chapter prior to going to the
        printers --- to change references to the Ken Sowinski conversion
        program for pre-Jan 1988 archive tapes.  It appears that I was
        a little premature --- it won't be ready till the year's end.
        Moved nowhere.

 6160.  August 22, 1990                  ACFIT                Phil
        Made the default value of the subarray adverb mean subarray 1.
        Moved to 15OCT90 this date.

 6161.  August 22, 1990           BAKTP                 Mark
        Corrected call sequence of FNDEOT in APLUNIX:ZBKTP1.FOR.
        Moved from Oz to 15JAN91 and 15OCT90.

 6162.  August 23, 1990               POSSM & VBPLT         Phil
        Both POSSM and VBPLT assumed that the row number = antenna
        number, in general that was not the case. Changed so that
        assumption is not made.
        Moved to 15OCT90 this date.

 6163.  August 24, 1990             PSNTAB.INC              Bill C
        The pointers to the delay and rate columns were reversed.  This
        caused TABSN to do the wrong thing in FRING.
        Moved nowhere.

 6164.  August 24, 1990               SOURNU               Phil
        There was an interesting piece of code in here, on one line
        it was stated:
                      equal = source(j).eq.sounam
        on the next:
                      equal = source(j).eq.'        '
        which of course negated the first line. I removed the second
        line.
        Moved to 15OCT90 this date.

 6165.  August 25, 1990               UVCOP                Gareth
        Two mistakes in a single IF statement in ESTSIZ led to an
        underestimate of the size of the output data set.  Fixed.
        Moved nowhere.

 6166.  August 27, 1990               SNPLT                 Phil
        Added the qualifier adverb to SNPLT, a data statement inside
        the code forced all qualifiers to be 0, which of course is
        not true in general.
        Moved nowhere.

 6167.  August 27, 1990         APLUNIX:ZM70X2.C             Brian
        The M70 has been hanging on NRAO1 in Charlottesville. Arnold
        Rots suggested a kludge. When a read or write to the device
        fails we lie and say that it works. We then keep throwing
        out read/write requests until we have a header again. If we
        have a lot of failures we really exit. This is ugly but might
        be an acceptable alternative.
        Moved nowhere.

 6168.  August 28, 1990        APLNOT:UVGET.FOR          Bill J.
        UVGET was not handling the case of LL Stokes only. This was
        calling DGINIT with Stokes character code "HALF" and creating
        an output data set with the single dimension Stokes axis
        having a value of -1 i.e. = "RR".  In most cases, this
        shouldn't hurt but we should get it correct.  Added a subroutine
        FNDPOL to (1) find the input polarisation specifically if the
        given code is blank and to copy the input polarisation to the
        output and (2) given a valid Stokes code, check that the input
        can support this.  This attempts to cover all cases but there
        may be a problem with XY data (AT) since there is no Stokes code
        string equivalent to "RRLL" = "HALF" --- for XX, YY only.  In this
        case the subroutine passes "    " in the hope that this will be o.k.
        Moved nowhere.

 6169.  August 29, 1990        APLVMS:ZTOPE2.FOR             Bill C.
        Added "READONLY" to OPEN statment.  This was causing one AIPS
        using HELP, EXPLAIN or INPUT to block another AIPS from accessing
        the .HLP file causing HELP, EXPLAIN, INPUT, GO, TPUT and TGET to
        fail.  This was especially a problem for batch jobs.
        Moved to 15OCT90 this date.

 6170.  August 29, 1990           DATBND                     Phil
        In the case where the data had only one polzn but it was LL not
        RR the routine did not apply the correct column from the BP
        table.
        Moved nowhere yet.

 6171.  August 29, 1990            POSSM                    Phil
        Would not plot the LL bandpass function if there was only one
        polzn in the database and it was LL not RR.
        Moved nowhere yet.

 6172.  August 29, 1990              BPASS                     Phil
        Once again, in the case of only LL in the data there was a bug.
        Fixed BPASS to write both polarization columns to the BP table
        in this case because there is an implicit assumption that the
        first polzn is R, the second L in the BP table. Also made a
        minor fix for the AT case of IQUV; in BPUPDT the NCOR variable
        was being passed for the purposes of initializing BP table
        arrays, what should have been passed was NPOLBP, i.e. the number
        of polzns the BP table was initialized for.
        Moved nowhere yet.

 6173.  August 29, 1990                UVCOP                Phil
        When a FREQID is selcted the UVCOP the output tables were
        supposed to have their FQ ID changed to 1 like the data. The
        code I had inserted several months ago intended to do that
        but a typo screwed it up.
        Moved to 15OCT90 this date.

 6174.  August 29, 1990                CVEL                  Phil
        There was an infrequently used call to CHNDAT that asked for
        CH/FQ version 0, CHNDAT must be passed the version number
        actually needed. Changed to ask for version 1.
        Moved to 15OCT90 this date.

 6175.  August 29, 1990               APLNOT:FNDPOL.FOR       Bill J.
        Removed format error.  Added some combinations of requested
        Stokes/actual Stokes that are semi-legal and are required
        by HORUS amongst others e.g. RR (Stokes value = -1) is
        equivalent to I (Stokes value = 1)
        Moved nowhere.

 6176.  August 30, 1990               APGNOT:FETCH.FOR       Bill J.
        Unreasonably small limit on row dimension --- was 100 ---
        changed to 1024.  FETCH did not warn user that the actual
        row read was larger than the character buffer and truncated
        the image.
        Moved nowhere.

 6177.  August 31, 1990                BPASS                  Phil
        When fixing up BPASS for stokes LL I forgot to deal with
        the case of the user asking for LL alone.
        Moved nowhere yet.

 6178.  September 3, 1990             TVMOVIE                   Eric
        Changed TVMOVIE to allow it to use zoom factors lower than the
        number of frames across the screen when it is run on
        workstations.  Then it can run faster and still show all the
        pixels in the frame.  Files changed:
        SSS.SHR     Changed CURSOR.C portion to compute the cursor
                    positions using the displayed center correctly
                    rather than assuming the center to be the middle
                    of the image memory.  Corrected a subscript error
                    when forcing a desired window size and changed it
                    to make sure the desired window is fully displayed.
        TVMOVI.FOR  Changed to support workstation windows and zooms
                    of lower value than those suggested by the image
                    frames.
        AU5D.FOR    Changed to pass the new parameter to TVMOVI based
                    on new user adverbs.
        TVMOVIE.HLP Added new adverbs: DOCENTER to select this new
                    option and FACTOR to control the desired display
                    zoom.
        TVCUBE.HLP  As TVMOVIE.HLP.
        REMOVIE.HLP As TVMOVIE.HLP.
        The whole AIPS model of zoom and scroll should be changed away
        from the old IIS Model 70 (strange) conventions, but I can't do
        that without IIS Model 70's and IVAS's to test as well as the
        workstations.  So that will have to wait.
        Moved from Oz to 15JAN91.

 6179.  September 4, 1990         ANCAL                 Bill C
        Fixed a number of bugs and general cleanup.  The geometry
        calculation was changed to use SOUELV to compute the source
        apparent geometry at each antenna.  This lead to the removal of
        a number of routines.  The declaration of UT (time) in
        subroutine TWERP was REAL rather then DOUBLE PRECISION causing
        an error interpolating antenna temperatures.
        Moved nowhere.

 6180.  September 4, 1990        GETANT                 Bill C.
        Modified to return antenna coordinates in the same system for
        VLBI data as for VLA data.  This should fix problems for VLBI
        data in LISTR and CLCOR.
        Moved nowhere.

 6181.  September 5, 1990      TVMOVIE           Eric
        Changed (1) TVMOVI to set the zoom to 0 when using no zoom in the
        display, (2) YSSS:YZOOMC to allow zoom centers from -MAXXTV to
        2 * MAXXTV to allow the movie business to work, and (3)
        APLBERK:ZSSSX2.C to branch to exit on error (before if SSS died
        AIPS went in to infinite loops of error messages).
        Moved from Oz, ZSSSX2 also to 15OCT90.

 6182.  September 5, 1990            PCAL                      Bill C.
        Improved checking of error conditions.  LPCALC did not check to
        see if an adequate total intensity of polarization model was
        passed.  If the total intensity was 0 (a likely failure mode)
        then the fitted model had 0 for all parameters but PCAL
        otherwise appeared to work.  LPCALC now complains and dies in
        this case.  Also the handling of the case where an inappropriate
        IN2NAME etc. was provided was cleaned up.  Dimension
        declarations were cleaned up in a number of routines.
        Moved to 15OCT90 this date.

 6183.  September 7, 1990         DFTPL                       Eric
        Corrected display of channel number.  The number used for data
        selection was correct, but the number displayed was one too low.
        Moved from Oz to 15OCT90 and 15JAN91.

 6184.  September 9, 1990     YSSS routines              Chris
        Moved YZOOMC from the now obsolete YSSS directory to YSS.
        Moved nowhere (but midnight job kicked in both NEW and TST since
        the migration from YSSS to YSS had not happened on
        Charlottesville UNIX machines).

 6185.  September 9, 1990       ZMOUN2 in APLCVEX        Chris
        The Convex version of ZMOUN2 now uses the new (Convex OS 8.0
        and later) tape interface ({\tt tpmount} and {\tt tpunmount} if
        it is available rather than the older {\tt tpalloc} interface.
        This allows AIPS to bypass ANSI labelling.  This is done by
        testing whether {\tt /usr/convex/tpmount} exists and is
        executable and branching according to the result.  Note that
        testing for the preprocessor string _POSIX_SOURCE is an unsafe
        method of distinguishing revisions of the Convex OS since the C
        compiler does not predefine it in all modes (in particular, it
        is undefined if the compiler is in strict ANSI mode).
        Moved to 15OCT90 this date.

 6186.  September 10, 1990       CLAB1,CLAB2,CTICS,TICINC      Phil
        Modified to accept two more types of label: HA and LST,
        these are now associated with LABTYP 8 and 9 respectively.
        This was necessary to accomplish the modifications
        to SNPLT described below.
        Moved nowhere.

 6187.  September 10, 1990        SNPLT                       Phil
        Added two new abilities to SNPLT, it can now plot quantities
        against IAT time, antenna elevation, source hour angle and LST.
        The choice of which is determined by adverb XTYPE. Also
        it can now optionally plot error bars, this option is
        toggled by YTYPE. Modified the help file to reflect these
        changes.
        Moved nowhere.

 6188.  September 10, 1990    APLNOT:FNDPOL.FOR          Bill J.
        Fixed error where I had ignored the possibility of conversion
        between RR, LL, RL, LR <---> I, Q, U, V.  Seems to work
        o.k. now on LISTR and friends.
        Moved nowhere.

 6189.  September 10, 1990      APGNOT:LISTR.FOR         Bill J.
        Replaced PJD changes and EWG changes.  Eric's changes are
        minor --- formatting for AT.
        Moved nowhere.

 6190.  September 10, 1990        CCOPTS.SH               Chris
        Changed CCOPTS.SH to define the preprocessor symbol
        _POSIX_SOURCE on the C compiler command line.  This should be
        removed if using Convex OS 7.1 or earlier.
        Moved to 15OCT90 this date.

 6191.  September 10, 1990  ZMOUN2 in APLCVEX             Chris
        It turns out that early versions (7.1 and earlier) of the Convex
        OS do not have the <unistd.h> include file required by later
        systems.  This is now protected by a preprocessor conditional
        keyed on _POSIX_SOURCE (hence the previous change).
        Moved to 15OCT90 this date.

 6192.  September 10, 1990       POSSM.FOR,.HLP           Phil
        After a vigorous campaign mounted by E.Brinks I finally gave
        in and found the time to insert a positional shift into
        POSSM. The user can now request that his/her data be shifted
        in RA/Dec before plotting. Also updated the helpfile.
        Moved nowhere.

 6193.  September 11, 1990         ANCAL                 Bill C
        When the ratio of antenna to system temperature was given rather
        that the system temperature (usually the case for the phased
        VLA)  the antenna temperature correction was effectively  being
        done twice causing the corrected flux densities to be low by
        about the square root of the source flux density.
        Moved nowhere

 6194.  September 11, 1990          XAS.SHR                 Chris
        A number of minor changes.
        - IBM support: <sys/select.h> is included by {\tt xas.c} if the
          preprocessor symbol AIX is defined (hopefully this is defined
          by the RS/6000 C compiler.
        - Incorporated Eric's cursor changes from SSS.
        - Corrected indexing problems in returning the window size
          (corrections made to SSS by Eric).
        - Removed calls to XSetInput on EnterNotify and LeaveNotify in
          {\tt xas.c} events so that XAS complies with the ICCCM with
          regard to input focus.
        Moved to 15OCT90 this date.

 6195.  September 11, 1990          XVSS.SHR                Chris
        Incorporated changes to {\tt cursor.c} from SSS.
        Moved to 15OCT90 this date.

 6196.  September 12, 1990           UVDIF                  Bill C
        Modified to accept compressed data.  It now also keeps
        statistics on the correlation values that it checks (which is
        only what it can print).  The ratio of the peak and RMS
        sine/cosine differences to the peak sine/cosine value is
        reported and put in the catalog header of the first input file
        as keywords 'RATMAX' and 'RATRMS'.
        Moved nowhere.

 6197.  September 12, 1990   YZOOMC.FOR in YXAS          Chris
        Incorporated recent changes to version in YSS.
        Moved nowhere.

 6198.  September 12, 1990    APGNOT:LWPLA                   Bill J.
        Modified this to write the text "%!" and "%% (origins)" in the
        file before the shell script takes it over.  "%!" tells the printer
        that what's coming IS PostScript. This avoids problems when users
        create a disk file and attempt to plot it later.  Chris thinks
        that it was done the other way for some reason but I can't see why.
        Let's see what happens. Changed the associated script SYSUNIX:ZLASCL.PS
        to do the correct thing.
        Moved to 15OCT90 today.

 6199.  September 13, 1990            PCAL                      Bill C.
        Fixed problem with PCLSEL rereading the source fluxes for each
        IF.  This was preventing the fitted polarization fluxes from the
        first IFs from being recorded in the SU table.  Also cleaned up
        some array declarations using values for table arrays from
        PUVD.INC.  Also cleaned up handling of AN table in PUTANT to
        make it relatively immune to changes in the AN table structure.
        Changed the message level of the messages describing the
        solutions in LPCALC from 8 to 4.
        Moved nowhere.

 6299.  September 13, 1990            GETJY                      Phil
        GETJY was complaining that it could only calibrate 130 sources
        when the user was only trying to calibrate 10, this was because
        a logic error in one routine caused GETJY to try to calibrate
        all sources in the SU table regardless of what the user
        wanted. In the course of fixing this I uncovered another
        problem; the helpfile claims that the adverb CALCODE only
        refers to sources in the CALSOU list, this was not the case
        it was checking all sources for the specified CALCODE, fixed
        this.
        Moved to 15OCT90 this date.

 6300.  September 14, 1990 (AEST)   APLPGM:TAFFY.FOR             Mark
        In routine SENDMA, the test for deferred output was logically
        opposite to that required.
        Moved nowhere.

 6301.  September 14, 1990            VLBIN                      Phil
        After weeks of investigation I rediscovered the wheel.
        Apparently the cross-power amplitudes from the MkII
        correlator are a factor of 2 too high, this may be only
        true for correlator mode 0, we have to test this. The
        Cfa group have known this for years but neglected to
        write it down or tell anybody at NRAO. Effectively what
        that means is that the quantization corrections for line
        data should be:

         s(true) = s(corr) * 1.57 (Van-Vleck) * 1.28 (fringe-rot)
                            -------------------------------------
                                    2.0 (bugger factor)

        By a (what I regard as uncannily weird) concidence,
        1.57 * 1.28 / 2 = 1.005, i.e. YOU DON'T HAVE TO CORRECT THE
        DATA AT ALL! Fixed up VLBIN to do these corrections under
        user control, also modified the helpfile to explain all this.
        Moved to 15OCT90 this date.

 6302.  September 14, 1990       ACFIT                   Phil
        The weights from the fitting were being written into the
        SN table incorrectly. The inverse is what should have been
        written - fixed.
        Moved to 15OCT90 this date.

 6303.  September 14, 1990        New task: UVGLU         Huib/Phil
        A new task submitted by Huib Jan van Langevelde. This will
        glue together matching frequency blocks of spectral line
        data, i.e. if you had to split your 32 channel database
        into 4*8 channel files you can glue them back together
        with UVGLU.
        Moved to 15OCT90 this date.

 6304.  September 16, 1990               VBPLT            Phil
        Finally (after how many years?) added the ability to plot
        error bars associated with the data. The default (YTYPE=
        0) is still to not plot error bars. Modified helpfile
        also.
        Moved nowhere.

 ***********************************************************************

        Changes while 15JAN91  was NEW:

 ***********************************************************************
 ***********************************************************************

 6305.  September 24,1990           MK3IN               Athol/Bill C
        Extensive improvements and enhancements.
        1. Extensions for Spectral Line Data.
           Some changes in the Fourier transform conventions were
        neccessary in handling multiple correlator module lag functions.
        In particular the lag order convention needed to be reversed to
        concatenate the output of the modules. This produced several
        other changes in the Fourier transform of the lag functions to
        cross-power spectra which are discussed in a separate memo.  A
        difference in sign convention between FOURG and QUIKFT was
        resolved.  The cross-power spectra are reversed in frequency and
        have opposite sign of phase with respect to the original MK3IN.
        The frequency order is consistent with the known single dish
        spectra and the sign convention is consistent with the SAO
        program MK3MK2 (which claims to use the NRAO convention).

           AC functions are treated separately and are corrected for bias
        and clipping effects before being transformed to AC spectra.
        Auto-correlation functions are typically generated by
        cross-correlating half the XC lag range. Individual correlator
        modules can however be placed in auto-correlation mode and this
        may be used in the future.  Some changes in the code were
        neccessary to deal with the two methods of generating AC
        functions.
           Correlation functions which do not have the same number of
        lags as the output file are skipped and a warning is printed.
        This is neccessary to avoid 8-lag fringe finding scans which are
        often included in the output tape. A warning message is also
        printed in the centre lag of the correlation function is
        non-zero.  Magic value blanking is used in the lag domain to
        avoid transforming lag functions with missing lags.

        2.  Multiple Observing Bands.
           The new MK3IN produces an FQ table and allows multiple
        observing bands.

        3.  FBS Corrections
           Numerous test were carried out to determine the FBS model
        exactly.  The new version should now do this correctly.

        4.  Checks on A-tape File Structure.
           Some checks were introduced to ensure that the A-tape file
        structure is as expected by MK3IN. The A-tape file headers are
        decoded and the MK3 file parameters are extracted. A warning is
        printed if the tape is a member of a multi-volume SAVEM set, as
        this may cause loss of data.  The type 50 records within each
        extent are required to be in the expected order and only
        complete scan-baseline headers are used.

           These checks should diminish the effect of tape errors which
        may cause loss of synchronization and will also alert the user
        to any future changes in the MK3 data format.

        5. Data Rejection Criteria
           The data rejection criteria used by FRNGE at the Haystack
        correlator were implemented in the new MK3IN version. A
        breakdown of the error statistics is available for each scan
        which can optionally be indexed on correlator module serial
        number. This feature was requested by the Bonn correlator group
        for spectral line data.


        6. Baseline Indexing
           The MK3 tape format is baseline-based and consequently there
        is a high degree of redundancy in source- and antenna-based
        parameters which is the format that AIPS requires. The new
        version of MK3IN assumes that source and antenna parameters in
        files for different baselines may not be consistent and carries
        out several checks in this regard. The data are not rejected or
        changed in any way but a warning message is printed. The
        correlator model input parameters (or closely associated
        quantities) are also monitored throughout the run. A summary of
        the correlator model is printed at the end of the run.
           These consistency checks should help to isolate problems in
        the data set caused by changes in the correlation strategy or
        when merging data correlated at different times or different
        correlators. These checks may also alert the user to any
        unnanounced changes in the MK3 output tape format.

        7. New Input Parameters
           Some minor changes in the input parameters were unavoidable
        but these were kept to a minimum. The APARM parameters are now:

        APARM(1)     CL table increment (min).
        APARM(2)     Maximum parity error rate (def: 0.01) (previously
                     PE count).
        APARM(3)     Maximum dropout rate (def 0.5). Correlator modules
                     are rejected if the number of bits correlated is
                     less than this fraction of the expected correlator
                       count.
        APARM(4)     ge. 1 => No FBS (previous APARM(3))
        APARM(5)     Max no of files on tape to process. (0 = until
                     EOF). This is useful for short test runs where it
                     is important that task terminates normally and
                     writes the full complement  of tables.
        APARM(9)     Print level (0,1,2,3). See below.
        APARM(10)    Debug flag (as before).

        Experiment file parameters:
        STATIONS    Station names (as before).
        TIMEOFF     IAT-UTC  (as before).
        NO_LAGS     Accept only lag functions of this length (if not
                    present this will be set by the first lag function
                    encountered). This parameter was introduced to avoid
                    problems when the first scan is a fringe finding
                    scan.

        NO_IF       Number of AIPS IF's in output file. Introduced for
                    similar reasons to NO_LAGS. Optional, if not given
                    then this is determined from the first scan.

        SIDEBAND    Force double sideband structure in AIPS output file
                    (if this parameter is 'DOUBLE'). Optional, the
                    sidebands will be concatenated if both USB and LSB
                    data are present.

        STOKES      from set {'RR','LL','RL','LR'}. Define the Stokes
                    range of the output file. The largest contiguous range
                    within the parameters is used to define the output
                    file. Optional, if not given this will be determined
                    from the first scan.

        FREQCODE    MK3 character codes for {RR,LL,RL,LR} in that order.
                    These codes are not very standardised. A warning is
                    given if an unidentified MK3 code is encountered.
                    Previously these data were assigned the lowest
                    Stokes value.  (def: 'R','L','r','l').

           The optional parameters defining the AIPS output file
        structure were introduced to deal with tapes containing test
        scans as the first files (eg AC tests) and to force consistency.

        8. Print Levels
        The print levels available are:
        0:      Print only a source header for each scan.
        1:      Include a one line error summary for the scan.
        2:      Print the MK3 file names and extent numbers.
        3:      Produce a error summary for each correlator module.

        9. Miscellaneous
           The time indexing of each data record required modification
        due to a few minor typographical errors and rounding errors. It
        was also discovered that data records may not have time marks at
        integral correlator accumulation periods for the nominal scan
        start time. A scan start time offset is accumulated for each
        scan and the time mark is written for the AP midpoint.
           The HP number conversion routines were checked against known
        HP number reprresentations. A minor error in the conversion of
        single precision reals was found.
           A correlator index is generated from the 20XX module
        cross-reference table before processing each new type 51 data
        extent. This allows video converters to be multiply assigned in
        a given scan and should allow XC/AC mixing. The delay offsets
        can be in arbitrary order in the cross-ref table.

        10. Code Consolidation
           The large common blocks were broken up into smaller units to
        reduce considerable compiler overheads (debug tables) and the
        preamble comments were updated and consolidated.
        Moved from 15APR91 and to 15OCT90  this date.

 6306.  September 24, 1990       VLA cont. calib. test        Bill C.
        Added a new suite of POPS scripts to time and verify the
        correctness of the AIPS continuum calibration software
        especially as used for VLA data.  These tests are patterened
        after the DDT tests and consist of two RUN files: VLACLOAD.001
        and VLACEXEC.001; the first to read in procedures and the second
        to execute the tests.  The two HELP files are VLAC.HLP and
        VLACSAVE.HLP.  The test data and the master copy of the answers
        are on a FITS tape and were computed on a Sun 3/60.  The test
        will run in 15JAN91 and later releases of AIPS.  The tasks
        tested in some modes are: UVLOD, IMLOD, FITTP, UVCOP, TABED,
        UVFLG, SETJY, CALIB, TASRT, TASAV, GETJY, CLCAL, PCAL, TACOP,
        CLCOR, LISTR, SPLIT, UVDIF, HORUS and COMB.
        Moved from 15APR91 this date.

 6307.  September 24, 1990              AVSPC                Phil
        After much negotiation with Neil we have finally settled
        on what AVSPC should do with the reference frequency,
        it leaves it alone, so the reference pixel is updated to
        reflect freq. changes due to channel selection. Also
        the bandwidth in the output file is the input bandwidth
        * the number of channels averaged.
        Moved from 15APR91 this date.

 6308.  September 24, 1990                 BPASS                Phil
        There were two problems remaining with LL polarized line
        data: (1) If the user had a dual polzn database and
        requested solutions for LL alone, an indexing error
        caused the channels to be shifted to the right by one,
        this meant that the last channel in the internal buffer
        was occupied by the u, v, w of the next record, this
        caused large closure error messages to be printed.
        (2) Also in a dual polzn database, when dividing by
        an external channel 0, another indexing error caused
        the LL line data to be divided by the RR continuum.
           I discovered that I had also broken the ability to
        generate seperate BPASS entries for multiple bandpass
        calibrator scans.
        Moved from 15APR91 this date.

 6309.  September 24, 1990                ACFIT              Phil
        I added the ability to use the SNVER adverb, by incorporating
        a call to the CALSEL subroutine. In the course of debugging
        this I fixed a couple of other problems: (1) the last entry
        for a particular run of ACFIT had the incorrect source number;
        (2) if the user just wanted to solve for a single antenna
        rather than all antennas, there were logic problems, although
        it still worked; (3) if there was no valid data at all for
        a particular solution the program printed confusing error
        messages, but again still worked.
        Moved from 15APR91 today.

 6310.  September 24, 1990         New adverbs                   Phil
        Two new task-specific adverbs, XAXIS is used in SNPLT to
        specifiy which type of axis is to be plotted on the abscissa;
        DOERBAR is used by VBPLT and SNPLT to specify the use of
        error bars on the plots. Modified POPSDAT.HLP and NEWPARMS.001.
        Moved from 15APR91 this date.

 6311.  September 24, 1990         UVBAS              Juan Uson/Bill C
        Fixed a problem with flagged channels.  If a channel was
        flagged, no higher channel numbers were processed in averaging
        the "continuum" channels.
        Moved from 15APR91 this date.

 6312.  September 24, 1990           MAKMAP/UVPREP/HORUS     Glen
        MAKMAP was modified to call UVGRTB which will grid any size
        problem (up to 4096).  Unfortuately an assumption in a
        subroutine UVPREP was not correct for HORUS (although it was
        correct for MX.)  UVPREP fixed and HORUS relinked.
        Moved from 15APR91 this date.

 6313.  September 24, 1990           MX                      Glen
        Surprise. A long standing bug was uncovered.  MX did not scale
        U,V,W to second IF for data selection.  This caused some data
        to be outside ALGSTB, ALGSUB limits in gridded subtraction.
        Particularily frequent when working with multi-array data.
        Modified only MX subroutine MXSEL.
        Moved from 15APR91 this date.

 6314.  September 25, 1990               AVSPC                  Phil
        A philosophical argument with Neil was finally resolved
        (in Neil's favour unfortunately), and the calculation of the
        new reference pixel was changed.
        Moved from 15APR91 today.

 6315.  September 30, 1990     APGNOT:FILLM.FOR              Gareth
        This new version of FILLM represents several months' reworking
        and debugging.  The major changes are as follows:
        1.  The keywords associated with the multi-source files have
        been changed from LINECHAN and CORRMODE to OBSCHANS, CORRMODE,
        SELCHANS, and VLAIFS.  This is to permit more sophisticated
        selection criteria for appending data to existing datasets.
                OBSCHANS        number of channels on VLA archive tape
                CORRMODE        the VLA correlator mode
                SELCHANS        channels selected from OBSCHANS
                VLAIFS          the names of the VLA IFs used
        (OBSCHANS and SELCHANS are not used for continuum data.)  A
        multi-source file is checked for all of these parameters as well
        as the Band, # polarizations, 1st Stokes' parameter, and # IFs
        to determine whether data should be appended to the file by
        FILLM.  This change will mean that this version of FILLM cannot
        append data to databases created by previous versions.
        2.  The naming convention for output files has been simplified.
        The classes are '? BAND' for continuum, and 'LINE' and 'CH 0'
        for spectral line.  Classes such as 'CH 0 1' are obsolete.
        3.  A new source (NX) entry is now forced whenever the Start LST
        of the observation changes.  This is how the VLA on-line system
        marks a new scan.  This forces a new source in some cases where
        the older versions did not.  It has a two main advantages: it
        reliably detects a source scan change without checking for the
        almost infinite possible changes in the set-up of the
        observations; and it allows QUACK to be run subsequently for
        each change of the on-line system configuration.  The only
        disadvantage, that logically contiguous data are now in separate
        scans, can be easily addressed by running INDXR post facto.
        4.  The subroutine MCWANT, which controls the selection of data
        and the changes in configuration, has been completely recast.
        Selection criteria that are always in effect are timerange (and
        date), program name, and VLA subarray.  Selection criteria that
        may be overridden by DOALL=1 (true) are observing mode, number
        of channels per baseline, frequency, and band.
        5.  All possible spectral line observations with the VLA are now
        fully supported.  The flexibility now built in to the VLA
        on-line system is reflected in the complexity of the subroutine
        MCINI.  There are 26 different ways (3 continuum and 23 spectral
        line) of writing the data into up to 8 multi-source files in
        parallel.  (An additional 8 ways, for mixed continuum and
        spectral line data, are supported here but not yet provided by
        the VLA).
        6.  The derivation of the number of channels per IF has been
        moved from subroutine MCINI to MCH1, where most other control
        information from the VLA archive tape is decoded.
        Bugs fixed include:
        1.  FILLM did not always correctly respond to a configuration
        change, such as FQ number or correlator mode, when averaging
        data.  This was helped by the simpler and more rigorous scan
        change criterion (see above).  A change introduced in February
        1990 in the 15APR90 version had this unreliability as an
        undesirable side effect.
        2.  A baseline record that was split between to physical tape
        records had a jump in phase.  The subroutine MCGBRC miscounted
        by 1 the number of data points (real and imaginary being counted
        as 2) left at the end of the first record.  This change was also
        introduced in February 1990 and was not noticed for several
        months except by two careful observers.  It did not affect
        continuum data at all.  Since the VLA has been in the larger (A
        and B) configurations since that time, there has not been much
        use of the spectral line modes.
        Moved from 15APR91 this date.

 6316.  October 3, 1990        New directories/logicals      Bill C.
        Added several new directories and corresponding logicals in
        AREAS.DAT.
        ...APL/DEV/UNIX/BERK/IBM (APLIBM) IBM RS/6000 Z routines
        ...APL/DEV/UNIX/BERK/DEC (APLDEC) Decstation Z routines
        ...Q/DEV/PSAP/IBM (QIBM) IBM RS/6000 Q routines
        ...Q/DEV/PSAP/DEC (QDEC) Decstation Q routines
        ...INC/NOTST/IBM (INCIBM) IBM RS/6000 includes
        ...INC/NOTST/DEC (INCDEC) Decstation includes
        ...SYSTEM/UNIX/IBM (SYSIBM) IBM RS/6000 shell scripts etc.
        ...SYSTEM/UNIX/DEC (SYSDEC) Decstation shell scripts etc.
        ...APL/CONTRIB (APLCONTR) is a directory for contributed
        software that is not to be included in the standard installation
        but is available for users to compile, link and use.  Source and
        HELP files go in this directory.
        Moved from 15APR91 this date.

 6317.  October 4, 1990                 POSSM                     Phil
        Minor logic error caused the freq. labelling of the x-axis
        to fail. Fixed.
        Moved from 15APR91 this date.

 6318.  October 11, 1990           POSSM                          Eric
        Changed the setting of plot scales to avoid the 360-degree phase
        ambiguity when possible and to give some slight borders around
        the data.  Also corrected an error message.

        Used the latest version from CV to return to CV, but did not
        keep it here.  It claims to do phase shifting for position
        offsets but does not support sprectral-line data - and this in a
        spectral-line program!
        Moved from Oz this date to 15APR91 and 15JAN91.

 6319.  October 11, 1990       SPFLG, TVFLG, Calibration          Eric
        Changed:
        SOUFIL    It did not close the SU table on error and did not
                  examine the kind of error from ISTAB but simply
                  assumed that any ISTAB error meant non-existant SU
                  table (a non-error condition).  Now it will close
                  the table and treats most ISTAB errors as real errors.
        OTBSRT    Changed it to write a scratch table as the output
                  and then to rename it to the desired output name
                  only if everything has worked.  Otherwise, when a
                  file was sorted onto itself it could be destroyed
                  by any error.
        TABSRT    Removed close of input table - it is always needed
                  now to go to scratch table.  Corrected a recent
                  addition to the code --- it is okay to exit quickly
                  when there are no records, but only if the OUTVER
                  is the same as the INVER.
        SPFLG     Changed to call SOUFIL only when it is relevant and
                  to honor its error return.  Before it called it always
                  and ignored the error return.
        TVFLG     Changed to call SOUFIL only when it is relevant and
                  to honor its error return.  Before it called it always
                  and ignored the error return.
        Moved from Oz this date to 15APR91 and 15JAN91.

 6320.  October 11, 1990         SPFLG, TVFLG                    Eric
        Changed them so that when they apply the flags to the main
        FG table they remove them from the master grid file.  This
        means changing the FC table to zero entries and going
        through the master grid file and magic-value blanking all
        SPFLG'd or TVFLG'd pixels.
        Moved from Oz this date to 15JAN91 and 15APR91.

 6321.  October 11, 1990             LISTR                     Eric
        Changed SCAN display to show number of visibilities for each
        scan in the NX table list whenever the display is wider than
        79 characters.
        Moved from Oz this date to 15JAN91 and 15APR91.

 6322.  October 11, 1990       SPFLG, TVFLG, TVFIDL            Eric
        Changed SPFLG to display time and channel in all flagging
        modes.  Otherwise, the flux displayed doesn't mean much.
        Also changed SPFLG to force TVPSEUDO to display some color
        initially.  And changed TVFIDL to do have better initial
        values and hence not zoom further when it starts zoomed
        and to do black and white first even if a zoom was done
        ahead of all coloring.  Changed TVFLG as SPFLG.
        Moved from Oz this date to 15APR91 and 15JUL91.

 6323.  October 11, 1990          SCHOLD                        Eric
        Corrected SCHOLD to move 4 characters to upper case so that
        "quit" would be accepted as such rather than as an (illegal)
        AIPS verb.
        Moved from Oz this date to 15APR91 and 15JAN91.

 6324.  October 11, 1990        UVAVG                          Bill C.
        Modified not to take weighted sum of source and FQ id
        parameters.  This putting garbage into these variables.
        Moved from 15APR91 this date.

 6325.  October 11, 1990   APLIBM:* SYSIBM:* INCIBM:* QIBM:*   Brian
        Checked Kerry's IBM RS/6000 modifications into the system.
        The files were:

        APLIBM:
        D2IBM.FOR       ZCREA2.C        ZGNAME.FOR      ZTAP2.C         ZTPWAD.C
        D2IEEE.FOR      ZDATE.C         ZLPCL2.C        ZTIME.C         ZTQSP2.C
        S2IBM.FOR       ZDCHI2.FOR      ZR32RL.FOR      ZTKILL.C        ZTTOPN.FOR
        S2IEEE.FOR      ZDCHIC.C        ZR64RL.FOR      ZTPCLD.C        ZTTYIO.FOR
        ZABOR2.C        ZDEAXF.FOR      ZRLR32.FOR      ZTPMID.C        ZTXMA2.C
        ZABORS.C        ZFRE2.C         ZRLR64.FOR      ZTPMIO.FOR
        ZGNAM2.C        ZTACT2.C        ZTPOPD.C
        (ZACTV9 is checked out by Chris - I'll put it in later).

        INCIBM:
        DAPC.INC        DBUF.INC        DSEL.INC

        QIBM:
        QCFFT.FOR       QINIT.FOR       QRLSE.FOR
        QCLNSU.FOR      QMULCL.FOR      WHNALT.FOR

        SYSIBM:
        AIPS            ASSNLOCAL.SH    FCOPTS.SH       LIBR.DAT        ZLPCL2
        AIPXAS          CCOPTS.SH       INCS.SH         LINK            ZTRLOG.C
        ASOPTS.SH       CDVER.CSH       LDOPTS.SH       OPT2.LIS
        ASSNLOCAL.CSH   CDVER.SH        LIBR            PP
	
        Moved from 15APR91 this date.

 6326.  October 15, 1990         MK3IN.FOR         Athol/Bill C.
        Moved latest bug fixes to this version.
	Moved from 15JAN91 and 15APR91 this date.

 6327.  October 16, 1990                   IBLED             Phil
        Several new features and some bug fixes:
        (1) IBLED now has a mode in which it can create catalogued
            uv work files to which you can return for an editing
            session. (I call this its 'fire-and-forget' mode).
        (2) It now creates all its necessary scratch files at the
            start of the session to avoid disc space problems later.
        (3) The antennas, baselines adverbs are now used to select
            antennas to be edited.
        (4) The handling of the FC tables has been changed, previously
            when an FC table existed reading it and applying its
            contents was a painfully slow business. This table is now
            sorted to time order and the application is much more
            efficient.
        (5) IBLED could not apply the flagging information to single
            source compressed files, fixed this.
        (6) When averaging in time there was an error which caused
            one more visibility to be averaged each time, i.e. you
            asked for 2 minutes averaging time, you got three.
        (7) The times in the FG table were equal to time +/-
            interval/2, this was wrong it is now time +/- interval.
        (8) A display buffer was not being cleared so that when a
            new baseline or frame was displayed with a smaller number
            of points the old data from the previous buffer load was
            still visible.
        Also changed IBLED.HLP
        Moved from 15APR91 and to 15OCT90 this date.

 6328.  October 17, 1990                  CVEL             Phil
        I ran a profile on cvel and discovered that 28% of the cpu time
        was spent in TABIO, this was due to the fact that the CL table
        was read from the beginning for each visibility until the
        doppler freq. offset for a particular time was found. I
        changed this to keep an index of where I was in the CL table
        for each antenna and CL time and interval, this reduces the
        amount of TABIOing needed dramtically.
        Moved from 15OCT90 this date.

 6329.  October 17, 1990   IMLOD/UVLOD/FITTP               Brian
        To work around a bug in the Sun f77 compiler, the number
        -2147483648 was changed to -2147483647 - 1. (In 2s complement
        most_positive_int < abs(most_negative int)).
        Moved from 15JAN91 this date.

 6330.  October 19, 1990           XVSS                      Chris
        XVSS may now optionally use the MIT shared memory extension to
        the X Windows System.  This should speed up XVSS on machines
        with large amounts of physical memory.  In order to use the
        shared memory extension you must have a version of Unix that
        supports System V shared memory: SunOS supports this as an
        option (the kernel may have to be rebuilt on some systems).  You
        must build XVSS with SHMOPT set to -DUSE_SHM in the Makefile and
        add the line:
          {\tt xvss.useSharedMemory: True}
        to the X resources database before starting XVSS (the X
        resources database is normally initialised from {\tt
        .Xdefaults}).  If this line is missing or {\tt
        xvss.useSharedMemory} is set to {\tt False} shared memory is
        disabled.  This is recommended for machines with smaller
        memories since the use of large amounts of shared memory may
        cause severe paging problems.
        Also replaced the Makefile, which was missing from the .SHR
        file and made the following minor changes.
        - Excessive blank space has been removed from the control panel.
        - XVSS will now read the colour of the graphics plane from the
        {\tt xvss.graphicsColor} (for Americans who can't spell)
        resource in the X resource database.  The value of {\tt
        xvss.graphicsColor} may be a named colour from the X colour
        database or a hexadecimal specification in the normal X11
        #RRGGBB format.  The default colour is now green (the previous
        purple colour has a poor contrast against the blue dominated
        AIPS spectral colourmaps, particularly on slides);  users with
        the old style Sun greyscale monitors that run off the red gun
        may wish to set {\tt graphicsColour} to {\tt red} or {\tt
        white}.
        - XVSS now has OPEN LOOK help available for all components.
        This is limited at the moment since the current version of XView
        does not support scrolling help windows but it does provide an
        on-line reminder of the keyboard accelerator bindings.  The
        help text is provided in a seperate uuencoded file, xvss.uu,
        because the bloody checkin system on CVAX won't accept the long
        lines of text.
        Moved from 15APR91 this date (because of missing Makefile).

 6331.  October 19, 1990        APGNOT:FILLM.FOR        Gareth
        A bug in routine FLMDAT was causing the CH0 and LINE datasets to
        differ in the number of visibility data points.  This annoyed
        BPASS considerably.  The bug only occurred when the last
        visibility of a given time-stamp was flagged bad.  The logic
        error had also caused the first good visibility after a flagged
        visibility in a given time-stamp to be rejected!  This had not
        been noticed.  The bug only affected spectral line data, but the
        missing visibility occurred in continuum data as well.
        Moved to 15JAN91 and 15APR91 this date.

 6332.  October 22, 1990        APGNOT:FILLM.FOR        Gareth
        Fixed two tests in the selection criteria that were reversed
        (qualifier and channel code) and led to the exclusion of the
        requested data rather than the inclusion.
        Moved to 15JAN91 and 15APR91 this date.

 6333.  October 23, 1990       POSSM                      Phil
        A minor bug, when the user wished to plot the BP table
        and specified a source name then that was compared with the
        sourcename in the table, if they didn't match the data were not
        selected for plotting. I had missed the case of the source
        number in the table being 0, in which case it should be plotted.
        Fixed that.
        Moved from 15APR91 this date.

 6334.  October 25, 1990    APLSUB:CATKEY               Brian
        There was an off by one error so that an illegal type (of 0)
        was being accepted.
        Moved from 15APR91 this date.

 6335.  October 25, 1990    APLBERK:ZTQSP2               Brian
        Use a better heuristic to cut down on the number of aips only
        processes (something at the end of a line that has capital
        letters and ends in a number).
        Moved from 15APR91 this date.

 6336.  October 26, 1990      SYSIBM APLIBM INCIBM      Brian
           SYSIBM:AIPS     - source rather than execute AIPXAS
           SYSIBM:AIPXAS   - allow XAS display on remote hosts.
           APLIBM:ZACTV9   - ZACTV9 was out and couldn't be checked
                             in earlier.
           APLIBM:ZFRE2    - AIXized so that free now works.
           APLIBM:ZTQSP2   - Spy now works
           APLIBM:ZMOUN2   - Mount issues a rewind and selects
                             the correct device for 1600 or 6250
                             density. In general this will need to be
                             changed from site to site, althout most
                             machines likely won't have a 1/2" tape drive.
           INCIBM:DSEL.INC - No longer needed by xlf.
           INCIBM:DBUF.INC - No longer needed by xlf.
        Move from 15APR91.

 6337.  October 29, 1990     APLIBM:ZLPCL2.C              Brian
        Removed this stubbed version so we can print from the ibm.
        Also removed from 15APR91 this date.

 6338.  October 31, 1990        DOCTXT:USERNO.LIS       Gareth
        The file USERNO.LIS is used by various site-specific routines to
        display the local system use.  It contains the NRAO user number
        list.  This has not heretofore been part of the standard
        distribution for reasons that I do not understand.  It is now.
        Moved from 15APR91 this date

 6339.  November 1, 1990            CLBSNR                 Phil
        In the self-cal mode of CALIB, and when no closure errors
        are requested to be printed, CALIB changes the no closure
        errors to huge closure errors just to catch ridiculous
        values. This is OK but the user then gets a message on his/her
        screen for every integration. Changed this to print out the
        closure error message header only when there is an error.
        Moved from 15APR91 this date.

 6340.  November 1, 1990               APLNOT:NCALC        Phil
        NCALC assumed that routine DNRM2 was still a function but
        it was changed to a subroutine months ago. I'm surprised
        no one tripped over this before, I suppose it shows how
        often the GCON option in CALIB is used.
        Moved from 15APR91 this date.

 6341.  November 2, 1990               SPFLG                        Eric
        Corrected error which caused an incorrect upper channel number
        to be used for actual flagging when in the one-channel mode.
        Moved from Oz to 15JAN91 and 15APR91.

 6342.  November 2, 1990            SGLOCA                       Eric
        Corrected bad code for POPS error handling.
        Moved from Oz to 15JAN91 and 15APR91.

 6343.  November 2, 1990            AIPS                         Eric
        Corrected to actually abort on an error in INIT and not to
        say "ABORT!!!" when the Sg LASTEXIT file is too old.
        Moved from Oz to 15JAN91 and 15APR91.

 6344.  November 2, 1990           SQASH                        Phil
        Apparently SQASH has never worked when a sub-image in the first
        two coordinates was requested. The code looped from 1 -> NY
        (where NY = # output pixels in y direction) whereas it should
        have looped from BLC(2) to TRC(2). The loop in the x-direction
        was OK.
        Moved from 15APR91 today.

 6345.  November 2, 1990           APLPGM:UVDIF.FOR             Glen
        Has been broken for some time for UN-Compressed UVdata.  (At
        least uncompressed UVdata in the DDTs.)  Recent fix to allow
        Compressed data caused it to die for Uncompressed, so
        Compressed data checks are skipped for uncompressed data.
        Moved from 15APR91 this date.

 6346.  November 6, 1990           APGNOT:FITTP                 Bill J.
        Subroutine EXTWRT was not moving flagged table rows to the
        output buffer for transfer to tape.  This caused a mismatch
        between the IAXIS2 value recorded on the tape and what actually
        was on the tape.  This caused PRTTP etc some grief.  Now
        moves all rows to tape.  Also corrected a typo: "ISORTORD ="
        --> "ISORTORD=" to conform to standards.
        Moved from 15APR91 today.

 6347.  November 7, 1990          APGNOT:FITTP                  Bill J.
        Saving the flagged rows to tape effectively unflags them when
        the table is read back in again (see 6346).  Changed this so that
        EXTWRT first finds how many unflagged rows there are, writes this
        number to NAXIS2, then writes only the unflagged rows to the
        tape.  This is at variancei with our usual philosophy since the
        tape file and the disk file are not copies of each other.  This
        should change when the FITS writer/reader is modified for the
        VLBA.
        Moved from 15APR91 today.

  6348. November 7, 1990            CLBSNR             Phil
        Moved the printing of the closure phase error header message
        down 2 lines, in its current position it printed the header
        > 1 times before printing the closuer errors.
        Moved from 15APR91 this date.

 6349.  November 8, 1990        APLNOT:TABFQ, TABNDX     Gareth
        Minor changes in the declarations of EQUIVALENCEd arrays in
        TABFQ and TABNDX so that they can be used, in debugging, with
        array bounds checking turned on.
        Moved to 15APR91 and 15JAN91 this date.

 6350.  November 9, 1990      APLIBM:ZDELA2         Tom Pauls/Brian
        Tom Pauls has supplied a nice ZDELA2 (based on sleep/usleep)
        that actually works. I put in a paranoid error check.
        Moved from NRL to 15APR91 and 15JAN91 this date.

 6351.  November 13, 1990   TVFLG.FOR TVFLG.HLP DTVF.INC        Brian
        Modified TVFLG to write/read its grid file on the disk
        pointed at by IN2DISK.
        Moved from 15APR91 this date.

 6352.  November 13, 1990          LISTR            Bill J.
        A bug in the indexing when the data base contained only
        LL data and solutions for the same caused GAINUV and GAIUV1
        subroutines to die uninformatively.
        Moved from 15APR91 today.

 6353.  November 14, 1990       APGNOT:FILLM            Gareth
        Two major changes:  1. if the user is silly enough to try to
        force FILLM to append to a file which has incompatible data,
        FILLM now stops;  2. all character fields read from the data
        tape are forced to upper case.  Also fixed a pedantic complaint:
        DOCONCAT is now true only if >0.
        Moved from 15APR91 this date.

 6354.  November 14, 1990              MX                  Glen
        Slight modification to correct Max, Min UVrange to
        allow second IF to be included in UV data if first IF fits
        in allowed range.
        Moved from 15APR91

 6355.  November 14, 1990     ALGSTB/UVGRTB/UVGRID/UVAPAS  Glen
        Corrections to routines to correctly handle multi-if data for
        case when not all map fits in "AP".  Essentially requires
        multi-channel passes for two IFs widely separated.  Single
        IF and case of all map in "AP" are not affected by the changes.
        Moved from 15APR91

 6356. November 15, 1990      APLSUB:IMERGE                 Brian
       LISTR was not properly selecting baselines because of a bug
       in IMERGE.FOR - unique antennas were being rejected as
       duplicates. Besides being buggy, the code was quadratic
       although this wasn't necessary.
       Moved from 15APR91 this date.

 6357. November 15, 1990      APGNOT:IMMOD                   Brian
       The conversion of degrees to radians for BPA was done in
       exactly the wrong sense.
       Moved from 15APR91 this date.

 6358.  November 15, 1990         CLBSNR                  Phil
        Finally fixed up CLBSNR to write the closure error message
        only onece each time the routine is called.
        Moved from 15APR91 today.

 6359.  November 16, 1990         CVEL                      Phil
        The AC functions were being shifted in the opposite direction
        to the XC functions, this didn't matter too much for VLBA
        stations but did for intercontinental experiments.
        Moved from 15APR91 today.

 6360.  November 20, 1990         APGNOT:CLCAL.FOR          Bill C.
        Changed call sequence to SNSMO.  Also changed to allow
        OPCODE='SMOO' for multisource data.
        Moved from 15APR91 this date.

 6361.  November 20, 1990       APLNOT:SN2CL.FOR            Bill C.
        Removed the use of the weights in the SN table in determining
        the interpolation in the SN table.  This practice could cause
        serious problems if the SN table weights (SNRs) were not in fact
        related to the data quality.  An example of this is when, in one
        scan an antenna is used as the reference antenna in fringe
        fitting and thus has a low "SNR" = min acceptable + 1.0 and in
        the next scan was not the reference antenna and has a much
        higher weight="SNR".
        Moved from 15APR91 this date.

 6362.  November 20, 1990       APGNOT:DECOR.FOR            Bill C.
        New task to compute the decorrelation amoung a set of selected
        correlations.  The output values have a real part that is the
        ratio of the scalar amplitude average of the selected
        correlations to the vector average.  This progam is especially
        useful for looking for coherence problems in multi IF and/or
        multi channel data.  This task allows application of calibration
        and/or editing and will write a new multi source file.
        Moved from 15APR91 this date.  Also DECOR.HLP

 6363.  November 20, 1990       APGNOT:SNCOR.FOR            Bill C.
        New task to apply corrections to SN tables.  The corrent version
        only contains the option to force the residual fringe rates to
        the average of the selected IF/polarization.  This option
        appears necessary to maintain coherence between the
        polarizations for MkIII VLBA data.
        Moved from 15APR91 this date.

 6364.  November 20, 1990       APLPGM:DIFRL.FOR            Bill C.
        new task to divide the RR correlations by the LL correlations.
        This task is useful for looking for coherence and amplitude
        calibration  problems between RR and LL correlations. It should
        be generalized to allow referencing phases to an arbitrary
        correlation.
        Moved from 15APR91 this date.

 6365.  November 20, 1990       QPGNOT: FRING.FOR           Bill C.
        Fixed number of words of pops adverbs to ask GTPARM for (it was
        about 30 too few).  Also fixed indexing  and numerous other
        problem that occured when averaging frequencies in the output
        of a single source compressed data file.
        Moved from 15APR91 this date.

 6366.  November 20, 1990       APGNOT:SHOUV.FOR            Bill C.
        New task.  A clone of LISTR that does column listings of closure
        phases for selected triplets or listings with different
        IF/channels in different columns.  These displays are very
        useful for detecting and analysing problems in multi IF/channel
        data sets.  Also SHOUV.HLP.
        Moved to 15 JAN91 this date.

 6467.  November 21, 1990              TVFIDL                   Eric
        Correct to use the correct zoom factor when restarting in an
        already zoomed mode.
        Moved from Oz to 15JAN91 and 15APR91.

 6468.  November 32, 2990   APGNOT:FETCH FETCH.HLP    Frank Ghigo/Brian
        A bug was fixed that only allowed square images to be input.
        The number of characters allowed in a line was bumped up to
        16k to allow larger images to be Fetched.
        Moved to 15APR91 and 15JAN91 20-Nov-1990.

 6469.  November 25, 1990            APGNOT:DECOR          Bill J.
        The count of NPARMs was low by 1 which meant that OUTDISK was
        ignored.  Also fixed some typos in the HELP file.
        Moved from 15APR91 today.

 6450.  November 27, 1990        UVDIF.FOR              Bill C.
        The data being printed was read from the wrong buffer for
        compressed data causing very erratic results.  Added a second
        decompression buffer and now data to be printed are always
        copied to and used from the decompression buffers.
        Moved to 15JAN91 this date.

 6451.  November 27, 1990      APLUNIX:ZBYTF2            Brian
        ZBYTF2 was determining if the input and output arrays were
        the same incorrectly. Also, the case of no byteflip was
        not being handled properly (but ZBYTFL short-circuits this
        anyway).
        Moved from 15APR91 this date.

 6452.  November 27, 1990       APLGEN:ZR32RL             Brian
        ZR32RL was doing byteflips but not word flips which caused
        the Decstation to turn perfectly good IEEE numbers into garbage.
        The other 32 and 64 bit real conversion routines will need to
        be similarly changed (32 bit ints are wordflipped!).
        Moved to 15JAN91 this date.

 6453.  November 28, 1990       HORUS                Robert Braun/Bill C.
        HOURS was only applying uniform weighting corrections to the
        first of each group of images.
        Move from 15APR91 this date.

 6454.  November 29, 1990  ZR32RL ZRLR32 ZR64RL ZRLR64      Brian
        None of these worked for the decstation because although the bytes
        were properly flipped, the words weren't. Moreover the blank and
        zero checks were wrong as well.
        Moved to 15JAN91 this date.

 6455.  November 30, 1990       FILLM.FOR, FILLM.HLP    Gareth
        1. Fixed bug (denkfehler) introduced when the multi-colored VLA
        spectral line options were added.  Two VLA IF spectra from
        different polarizations (e.g. A & D) were put into the same AIPS
        IF even if the frequencies were different.  They are now
        correctly separated into different multi-source files.
        2. Allow a timerange as short as 10 seconds for debugging
        purposes.
        3. Added code to deal with VLA holography measurements.
        Moved to 15APR91 and 15JAN91 this date.

 6456.  December 1, 1990   INC:DAPC.INC, QYPGNOT/MX.FOR  Glen
        Have increased default AP size from 64K words to 256K words =
        1 Megabyte.  This allows 4Kx4K MXs to run.  Also moved all
        Multi-IF corrections to NEW.
        Moved from 15APR91.

 6457.  December 3, 1990        RUNSYS:DDTLOAD.001         Glen
        Yet another adjustment in TERSE so that some results are
        always printed.
        Moved from 15APR91 this date.

 6458.  December        APLIBM:ZABOR2.C                 Brian
        I changed every ZABOR2.C, i.e. in APLUNIX, APLBERK, APLBELL,
        APLSUN, APLCRI, APLIBM. Instead of handing the signal handler
        a function we have been typically giving it an uninitialized
        external function pointer which through a quirk of the linker
        has normally been resolved correctly - everywhere but on the
        IBM and Decstation. I am checking everything into TST and the
        IBM version only into New.
        Moved APLIBM:ZABOR2.C (Only) from 15APR91 this date.

 6459.  December4, 1990    APLDEC INCDEC QDEC SYSDEC        Brian
        The routines to make the Decstation work under AIPS. QDEC
        is currently empty, i.e. pure QPSAP.
        APLDEC: (Notable: byte problem in ZXASX2, Dec doesn't use
        the unix convention for recordlength in ZTPOPD.FOR)
           ZABOR2.C  ZCREA2.C  ZDCHIC.C  ZTPWAD.FOR  ZXASX2.C
           ZABORS.C  ZDCHI2.FOR  ZTPOPD.FOR  ZTTOPN.FOR
        INCDEC: (1MW=4MB PSAP)
           DAPC.INC
        SYSDEC: (The usual)
           AIPXAS  CCOPTS.SH  INCS.SH  QMSLAND.HDR  ZLPCL2.QMS
           ASSNLOCAL.CSH  CDVER.CSH  LDOPTS.SH  QMSPORT.HDR
           ASSNLOCAL.SH  FCOPTS.SH  LIBR.DAT  ZLPCL2
        Moved to 15APR91 and 15JAN91 this date.

 6460.  December 7, 1990 APLNOT:GCALC1.FOR Bill C.  A typo in the phase
        only solution portion caused the soluton to become unstable and
        sometimes give bad solutions.  It's pretty amazing that it ever
        worked at all.  This was the L1 solution routine for CALIB.
        Moved from 15APR91 this date.

 6461.  December 7, 1990      QPGNOT:CALIB.FOR              Bill C.
        In it's computation of the mean gain modulus for the gain
        stabilization CALIB was only checking that the weight of a
        solution was positive.  Routine CLSNOU was changing the weights
        of flagged reference antenna data to positive values so the
        blanking value was added to the sum.  This caused a very large
        mean gain modulus and thus very small amplitudes of data
        corrected using this mean gain modulus.
        Moved from 15APR91 this date.

 6462.  December 8, 1990                IBLED              Phil
        Migrated the TST version here, list the changes below.
        More new features and bug fixes.
        (1) Users had complained about the way IBLED switched between
            the editing and menu screens, this caused a lot of
            flashing on the IIS and IVAS and was painfully slow on
            the Sun's. Changed so that now the menu's appear on the
            same screen as the editing frame, they are always visible.
            Makes the process much more efficient.
        (2) Added a new menu option: SELECT FRAME - which enables the
            user to select his/her own frame to be edited by
            positioning the cursor on the total vis. fn at the top
            and define a start and stop position., this is then
            displayed in the main editing frame.
        (3) Added an on-line help facility, when users point to a menu
            item and hit button D a help message is printed on the
            terminal.
        (4) The user can now specify the IN2DISK to which the
            catalogued uv workfile goes, 0 => lets IBLED choose.
        (5) Added some checks to prevent users hitting the wrong buttons
            in some of the editing modes.
        (6) Discovered that when a user came to re-edit a file using
            an already existing catalogued file his/her previous
            editing appeared not to have been applied. Actually the
            editing info was present in the FG table but when reading
            a catalogued uv-file the FG table is not applied. So when
            finishing a session the FC table is copied to the uv
            work file before being translated to an FG table and deleted
            from the master file, so when a new session is started the FC
            table is copied back to the master file and applied before
            any data is displayed. Also updated the helpfile.
        (7) IBLED, like other tasks, was not correctly dealing with LL
            only data when reading the FC table. It now does. ALso
            when a user asked for all data to one antenna to be flagged
            that information was written correctly into the FC/FG table
            but internally the program was unaware of it and so it
            appeared as if the editing had not been done when a subsequent
            baseline was displayed.
        Moved from 15APR91 today.

 6463.  December 10, 1990          HLPFIL:UVAVG.HLP       Bill J.
        The helpfile was rather uncertain whether or not both 'TB' and
        'BT' data could be handled.
        Moved from 15APR91 today.

 6464.  December 10, 1990            ZLOCK in APLBERK       Chris
        Added a branch (keyed on the _POSIX_SOURCE feature test macro)
        to use the POSIX.1 fcntl() interface.  These appears to solve
        most of the phantom lock problems on Convex machines.
        Moved from 15APR91 this date.

 6465.  December 14, 1990               FILLM           Gareth
        1. Changed the method of determining whether antennas are
        present or not.  The previous method was not valid for copies of
        old (pre-1988) tapes.
        2. Two fixes to correct bugs in FQ table handling.  One was a
        "mad bomber" - four arrays whose dimensions were too small.  The
        second was the use of control information from VLA IFs A and B
        for IFs C and D.  This had been necessary in the past.  Since C
        and D are now, in general, independent of A and B, this
        assumption is not longer valid.  It was causing incorrect
        frequencies, bandwidths, channel separations, etc. for
        experiments where independent tuning is used.
        3. The velocity and reference frequency are now written into the
        SU table for channel 0 as well as the line data.
        4. Changed FLMBC, which determines the VLA band code, to use the
        most up-to-date frequency limits.  Other code to determine the
        band code has been replaced by a call to this subroutine.
        5. Fix to ignore shadowing for raster scan (holography) data.
        6. Problems with the VLA multiple-IF spectral line modes.  The
        previous fix (November 30, 1990) went too far - now corrected.
        Fixes made in 15JAN91 and 15APR91 yesterday

 6466.  December 17, 1990          INC:PUVD.INC                 Bill C.
        Changed MAXCHA  (number of channels) to 2050.
        Moved from 15APR91.

 6467.  December 17, 1990                CVEL                      Phil
        Mark Claussen discovered that CVEL did not work for data whose
        velocity type was heliocentric. That is not strictly true, the
        first data point was fine, after which the logical specifying
        if the data were heliocentric was reset to .false.. Fixed this.
        Moved from 15APR91 today.

 6468.  January 22, 1991         $AIPPGM                      Glen
        Accidently moved $AIPPGM/AIPLAS.FOR to $APLCONTR, then decided
        to leave it there.  Next moved $AIPPGM/AIPMAN.FOR to $APLCONTR.
        Now consistent with 15APR91 and 15JUL91.  Moved and then restorted
        to original state several other programs in $AIPPGM.
        Similar changes in 15APR91 and 15JUL91.

 6469.  January 25, 1991         $APLPGM/UVDIF.FOR            Glen
        UVDIF.FOR was aborting with a segmentation violation once in 10
        executions on the SUN-4 (Mandrill).  Never completely understood
        the problem, but have re-arranged some code and it seems to
        be OK.
        Will move to 15APR91 and 15JUL91

 6470.  February 6, 1991         $APLNOT/SOUELV.FOR           Glen
        SOUELV was returning hour angles with range greater than +/-Pi.
        This cause ANCAL errors for the 140' telescope.
        Moved from 15APR91 this date.
