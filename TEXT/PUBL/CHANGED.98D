-----------------------------------------------------------------------
;  Copyright (C) 1998-1999
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in Charlottesville.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


                    Changes to 15OCT98


***********************************************************************
***********************************************************************

                 Changes while 15OCT98 is TST

***********************************************************************
***********************************************************************


 9810.  March 19, 1998          24-bit TV                  Eric
        Rewrote parts of XAS to support 24-bit TrueColor TVs with an IIS
        Model 70 like algorithm when the user requests it (.Xdefaults
        parameter) and the display host allows it.
        Other changes:
        YSPLIT     To send all data to XAS under new opcode 47.
        SSS.TXT    To document YSPLIT change
        TVMOVI     Added frame rate testing if POPS debug is on.
        ZSSSO2.C   Added SPLOT opcode 46, SPLIT -> 47.
        XAS.HLP    To document all of the CVX changes plus this change.
        To use YHOLD a good bit more to avoid excess blits in this mode
        (n.b. a screen re-write is needed whenever channel or graphics
        selection changes, whenever LUT of OFM changes, zoom changes,
        etc.)  If several of these are to be done, issue a YHOLD onnn
        before them and a YHOLD offf after them.
        $AIPSUB/AU5, AU5A, AU5B, AU5D, AU5E, AU6, AU6A, GRPOLY, GRLUTS,
                HILUT, TVMOVI, TVROAM
        $YSS/YLUT
        $YSUB/COLORC, OFMIO, COLORL, COLORF, GRBOXS, IENHNS, TVBLNK
        Moved many of these to 15APR98 this date.

 9811.  March 19, 1998       INDXR, CLCAL                 Eric
        Blocked the VLB mode in INDXR and dropped the subarray 0 output
        option in SN2CL and CLCAL.  They cannot work as intended given
        the rest of the cal computation and application code.  A special
        task to make a regularly gridded (properly chosen) version of
        the multiple subarray CL table will need to be written to
        achieve the desired results.
        Moved to 15APR98 this date.

 9812.  March 19, 1998       $APLNOT/MCTAB                 Ketan
        Simple typos caused UVCOP to crash, two references to RECR
        should obviously have been to RECD.  Recompiled UVCOP,
        anything else?
        Moved to 15APR98 this date.

 9813.  March 19, 1998   $APGNOT/MSORT, $HLPFIL/MSORT      Ketan
        Yet another UVDISK problem related to sorting very small files.
        Also added a PRTLEV to make output more useful.
        Moved nowhere.

 9814.  March 19, 1998   $QPGNOT/KRING                     Ketan
        Simple typo resulted in multi-band delays being 10^9 too large.
        Moved to 15APR98 this date.

 9815.  March 23, 1998   $APLNOT/INDXIN                    Ketan
        INDXIN did not properly check the FREQID and NXSUBA values
        coming from the NX table or the SUBARR value specified by the
        calling task.  This could sometimes result in an NX record being
        delivered that shouldnt be.  This could only have affected VLBI
        data and only when actually subarraying sources.
        Moved to 15APR98 this date.

 9816.  March 26, 1998   $INSUNIX/CDSETUP, INSTEP1         Pat
        New script to do the bridging work from a CDrom to the start of
        INSTEP1.  It will permit the installer to (a) run from the CD
        [with a mere 10 MByte footprint on hard disk], (b) install a
        full-blown system, or (c) switch from one to the other.  Added
        hooks in INSTEP1 so that it doesn't try to move files off
        read-only media or equally silly things.
        Moved to 15APR98 this date.

 9817.  March 30, 1998     $SYSUNIX/XASERVERS              Pat
        Changed the order in which daemons are started: do the TVSERV
        and XAS servers first.  Robert Reid at Toronto found this to
        avoid a problem when using ssh to start up the servers remotely.
        Also removed the resetting of the DISPLAY to :n from hostname:n
        (this really messes up ssh connections with X tunneling) and
        streamlined it a bit (check on LOAD area only needed once).
        Moved to 15APR98 this date.

 9818.  March 30, 1998                Misc                       Eric
        Corrected minor typos in Chapters 1, 4, and 5 of the CookBook.
        Cleaned up the messages (old debug junk was left) in XAS.SHR.
        Moved nowhere.

 9819.  April 1, 1998             XAS, etc                      Eric
        Changed:
        XAS.SHR    Fixed coloring of graphics planes, byte order for
                   PCs, zeroing of individual graphics channels
        TVRGB      Moved and added YHOLDs, zero LUT(1), OFM(1).
        TVHUI      Raised internal buffer size.
        Moved nowhere.

 9820.  April 2, 1998            $APGNOT/ACCOR.FOR          Leonia
        ACCOR has not worked if the selected data have many negative
        weights. In this case ACCOR continues accumulating points
        with both negative and positive weights. That is not correct
        because points with negative weights should be rejected.
        I modified ACCOR to reject the points with negative weights
        and change some condition to exclude completely possibility
        of under SQRT expression to be negative.
        Moved nowhere.

 9821.  April 2, 1998            $QPGNOT/FRING.FOR           Ketan
        The DOFIT option in FRING did not work correctly if
        APARM(9).LE.0 due to an undefined indexing array.  Now fixed.
        Moved nowhere.

 9822.  April 2, 1998            $QPGNOT/KRING.FOR           Ketan
        The SNR calculation for the FFT stage of KRING has now been
        retro-fitted to match Bill C.'s original formula.  This is so
        people can are presented with a formula whose SNR calculations
        may be wrong but, at least, are familiar.  .HLP file updated.
        Moved nowhere.

 9823.  April 2, 1998            $RUNSYS/REFREQ.001          Ketan
        REFREQ will now no longer allow the user to shift reference
        frequency because this was not implemented consistently [the
        UVW coordinates were not properly adjusted]; implementing this
        would require REFREQ to become a task and it is not clear
        that the GEODESY community is well served by this capability
        anyway.  .HLP file updated.
        Moved nowhere.

 9824.  April 2, 1998            $APGNOT/UVPRT.FOR           Ketan
        If SUBARRAY=0 is set in UVPRT, the same visibility can get
        printed to the user multiple times.  The potential confusion
        outweighs the inconvenience of only being able to view one
        subarray at a time.  .HLP file updated.
        Moved nowhere.

 9825.  April 3, 1998           $SYSUNIX/OPTIMIZE.LIS     Eric/Pat
        Added an entry for DECBIT (in $APLSUB) to force no optimisation.
        The OPT3 level apparently did a number on this subroutine,
        causing bizarre behaviour such as TVLOD doing next to nothing
        other than saying "TV PROBLEM".  (The channel to load was
        getting passed to TVLOAD as zero).  Setting the level to OPT0
        for just this one routine seems to have cured the problem.
        Moved to ohsumi this date; will move to 15APR98 shortly.

 9826.  April 4, 1998 PRTTP,PRTLIN,TXPL,AU1A,CATLST,PRTALN Jeff
        All references to CRTMAX changed to ABS(CRTMAX)...prepping for
        auto-dectection of window-size changes.
        Moved nowhere.

 9827.  April 5, 1998              STARPL                      Eric
        Strangely the integer star type is a float in the table.  So a
        float got passed to PNTPLT which expects an inteeger.  Fixed up
        STARPL to use an integer, reading a float from the table.
        Moved to 15APR98 this date.

 9828.  April 9, 1998          $APLNOT/GETTIM.FOR,  CVEL.HLP   Leonia
        CVEL calls the task GETTIM.FOR which looks for the array name.
        If aparm(7) = 1, it expects the VLA/ATCA/LBA. Data from the
        Australian S2 correlator is labelled 'ATLBA', not 'LBA' so
        GETTIM fails (and so does CVEL). GETTIM should check for both
        'LBA' or 'ATLBA'.  I added ATLBA to the list of 'VLA' group of
        arrays (in GETTIM).  A small bug is fixed at GETTIM as well: If
        APARM(7) = 0, expecting VLBA, GETTIM failed if data are from
        VLA, but it shoud fail for any array belonged to the 'VLA'
        group: VLA/ATCA/LBA/ATLBA.
        The relevant change of CVEL.HLP has been done also.
        Moved nowhere.

 9829.  April 9, 1998               XAS.SHR                    Eric
        Changed code to do x and or y split screen.  This enables roam
        and other algorithms.  In the 8-bit PseudoColor mode, only one
        lookup table can be active.  This means that the option in blink
        that allows either LUT to be changed while looking at a split
        screen only shows the changes to one of the two images.  The
        other does get changed, but you see that only when the blink
        resumes.  It works very well indeed in the 24-bit TrueColor
        mode.  Changed TrueColor to be the default.  On a computer that
        does not do TrueColor there will be a message about goping to
        PseudoColor.  This message may be suppressed by a
              AIPStv*useTrueColor:          0
        in your .Xdefaults file.
        Moved nowhere.

 9830.  April 10, 1998             IMAGR                       Eric
        Fixed it to be more understanding about a missing AN file.  It
        can't get the average parallactic and zenith angles, but usually
        one does not care.
        Moved nowhere.

 9831.  April 13, 1998              RESEQ                     Chris
        Fixed several gross errors.
        - ZUVXPN and ZUVPAK are now called for compressed uv files and
        not for uncompressed files (this was reversed in previous
        versions).
        - Cross polarizations are now exchanged when antennae are
        switched on a baseline.
        - The baseline vector is now multiplied by -1 when antennae are
        exchanged on a baseline as required for consistency.
        - UV buffers are now sized using UVBFSL from ZPBUFSZ.INC.
        - UVINIT is given the correct buffer size in GBLOCK thus
        avoiding erroneous complaints about the buffer being too small.
        Moved nowhere.

 9832.  April 13, 1998            CXCLN                      Chris
        Attribute dimensions are now set correctly when storing the
        default window to the INPUTS object allowing CXCLN to run
        without specifying an explicit window.
        Moved nowhere.

 9833.  April 13, 1998            CCEDT                      Chris
        Added a crude hack to avoid division by zero in the loop that
        subdivides the region being searched for model components into
        rectangular subregions.
        Moved nowhere.

 9834.  April 14, 1998            OOP                        Eric
        Changed OBJMNGR to limit LUNs to 120.  For some reason ZOPEN,
        ZFIO, ZMIO have this limit rather than 128.
        Corrected QCLEAN - the NDIM argument to ARRWIN needs to be
        dimensioned (7) to hold all axes.  It was a scalar causing the
        HP to go into an infinite loop.
        Moved nowhere.

 9835.  April 16, 1998              CCMOD                      Eric
        This old clunker never worked.  Thanks to Lincoln Greenhill for
        pointing out one of the major bugs.  Fixed:
        1. Error/file status handling
        2. Addressing in the array (left and lower rows were omitted)
        3. Computation of disk - the radius was never tested so it made
           rectangles some of the time.
        4. Computation of Gaussian - it took exp (+ R ** 4) rather than
           exp (- R**2)!
        5. Changed it to use CCINI so that the CC file would have column
           labels, units etc to allow PRTCC to access it.
        6. Fixed handling of BITER - it could fail because one tried to
           write well after pre-existing portions.
        7. Changed help file - units are pixels, BITER causes
           over-writing of pre-existing components.
        Moved nowhere.

 9836.  April 16, 1998          COMB                         Eric
        A bug kept the output Stokes from being set to something besides
        the input when appropriate.
        Moved nowhere.

 9837.  April 16, 1998         TKSET adverb                  Chris
        Added calls to ZTKOPN and ZTKCLS around the call to SLOCIN
        in AU9C.  This prevents TKSET and TK1SET failing because
        the Tektronix LUN is not open.
        Moved nowhere.

 9838.  April 16, 1998         CHTRIM in APLSUB              Chris
        Added code to prevent CHTRIM writing beyond the end of the
        output string if the trimmed input string is longer than
        the output variable.  This was causing failures in FITLD.
        The string will now be truncated if it doesn't fit the
        output variable.
        Moved nowhere.

 9839.  April 17, 1998          UVDATA object                Chris
        OUVSCR was issuing a size request to SCREAT in units of AIPS
        bytes rather than block.  This was causing BLING (and perhaps
        other tasks) to create absurdly large scratch files.
        Moved nowhere.

 9840.  April 17, 1998            BLING                     Chris
        Fixed a number of errors.
        1 - Two FORMAT statements in WARNST contained concatenation
            operators instead of commas.
        2 - The KEYIN routine that reads the auxilliary file expected
            ALL as a token instead of ANY.
        3 - Acceleration interpolation multiplied the adjustment in
            cells by the acceleration spacing twice resulting in
            a negligable change from the cell centre.
        Moved nowhere.

 9841.  April 19, 1998                FITLD                      Eric
        ****  FITLD was making source tables with multiple occurrences
        of essentially the same source and with multiple occurrences of
        the same source number attached to different sources.  *****
        The VLBA Correlator treats the same source, with different
        CALCode as a different source.  This causes AIPS to have things
        in the source table that it cannot properly address and is
        simply due to the VLBA antennas passing on CALCodes while
        non-VLBA ones do not.  Changed FITLD to allow for source
        renumbering even while reading the first input file and changed
        the list handling to include current additions to the source
        list when checking the next input source.  The logic was
        backwards in handling the source number translation,
        complicating the process and forbidding any case in which 2 or
        more source numbers would both be translated into the same
        output source number.  This arises: file 1 had a cal as source
        1, 3C120 as sources 2 and 3 (w different CALCode).  File 2 has
        3C120 as sources 1 and 3 with the cal as source 2, so both 1 and
        3 have to become 2 on output.  Also fixed up the formatting of
        times.
        Moved to 15APR98 patch area this date.

 9842.  April 20, 1998               FITLD                     Chris
        Added code to FLTAB in APLNOT and to FITLD itself so that
        VLBA flag tables with conforming to table revision 1 (as
        documented in VLBA Memo 108) can be read in addition to the
        undocumented table revision 1.  Flag tables from Penticton
        should now be read correctly.  This is a band-aid type fix:
        routines that with VLBA tables don't seem to be well suited
        to dealing with multiple revision levels (which will be a
        necessity with 3 correlators providing data in VLBA format).
        Moved nowhere.

 9843.  April 21, 1998                GAL                    Eric
        For some reason GAL did not clean up after itself when it
        failed, did not test for zero divides in a model computation
        routine, assumed that the deprojected velocities are always
        positive, and otherwise got itself into trouble.  Fixed it up a
        little.
        Moved nowhere.

 9844.  April 21, 1998               FITLD                     Eric
        For some reason FITLD chose to stop reporting new scans after
        the USUBA condition was raised under most but not all
        conditions.  Changed it to report new scans all the time.
        Also added tests and warning/error messages if troubles arise in
        the source table for same source with two numbers and same
        number with two sources.
        Moved nowhere.

 9845.  April 22, 1998             IMAGR                    Eric
        In the 3D imaging mode, the routine doing the major cycle, one
        field at a time, has used only the count of iterations in that
        field to set cutoffs and the like.  I changed CLACLN to compute
        the total number of iterations over all fields and to maintain
        and use that total while Cleaning each field.
        Moved nowhere.

 9846.  April 23, 1998            ZTKSRV                     Eric
        ZTKSRV has $APLDEC and $APLSGI versions which were overlooked
        when I added the image catalog code to the $APLUNIX version.
        Cleaned this up.
        Moved to the 15APR98 patch area this date.

 9847.  April 23, 1998            XAS                        Eric
        The cursor was coming out black (on black) on hominid, our
        latest DEC machine.  It turns out that the color code for this
        machine (only) requires the colors to be in the low bits, all
        others require them to be left shifted 8 bits (including our
        older DEC machines and PCs - this is not a byte order problem).
        Changed XAS.SHR to put the cursor color in both the low and high
        bytes.
        Moved nowhere.

 9848.  April 23, 1998            $APGNOT/PCCOR.FOR          Leonia
        PCCOR has read the first row of the PC table to take the
        frequencies of the tones. It is wrong for multiple freqid case.
        I modified it to read the first row of the first appearence of
        the given freqid. The maximum and minimum tones for each IFs are
        calculated now instead of taking the first one and the last one.
        The dimensions of the arrays NANPC and DCABL are changed to MXAN
        from 15. The value of the parameter MXAN is increased from 20 to
        30.
        Moved nowhere.

 9849.  April 23, 1998              FITLD                       Eric
        Reinstated my short-lived DFILL argument fix in GETDEL.  Changed
        KBUFFA from 256 to 512 words in FITLD since it is used for a
        table buffer.  These caused aborts on HPs.
        Moved nowhere.

 9850.  April 24, 1998               LDGPS                    Chris
        Fixed LDGPS to handle dates in the YYYYMMDD format.  Also
        removed some ad hoc elements from the calculation of GPS time
        and added some protection against the 1024 week rollover
        (this happens for the first time on Aug 22 1999).
        Moved nowhere.

 9851.  April 27, 1998                  QEDIUTIL              Eric
        An addressing bug caused the table editing to be unable to reach
        the very last sample in the data set.  This addressing was
        handled correctly when UV data were read as in EDITR and SCMAP.
        Moved nowhere.

 9852.  April 27, 1998             FITLD                      Chris
        FITLD was reading what it presumed to be the first data record
        of each UV_DATA table without first checking if the table was
        empty. In the case that the table was empty, this lead to the
        first record of the header of the next table being consumed
        and to FITLD losing its place in the file.  FITLD now checks
        the number of rows in the table before reading data.
        Moved nowhere.

 9853.  April 28, 1998                 UVFLG                 Leonia
        Spurious fringers appear due to pulse cal injection,
        if fringe rate close to zero. These spurios fringes are
        self averaged at fringe rate stopping procedure if
        fringe rate is not close to zero. Time interval required
        to suppress the spurious fringes is calculated by Kogan
        at VLBA Test memo no 58, 1998.
        The new routine FLGPCL has been added to flag time interval
        at the vicinty of calculated time where fringe rate is zero.
        The length of this interval depends on the suppression factor.
        (APARM(5)).
        APARM(6)>0 allows to print source, time, baseline,
                   and U,V of expected zero fringe rate (U=0)
                   So the user can pay a special attention to
                   the PCAL tones at the vicinity of the points.
        The help file is updated.
        Moved nowhere.

 9854.  April 28, 1998                 ACCOR                 Leonia
        The logical error has been found inside of routine ACCRCOR.
        This error brought in some extra points at the data gaps if
        SOLINT less than the gap's length.
        Moved nowhere.

 9855.  April 28, 1998            DBCON                      Eric
        The code for rewighting the data had an off by one error in
        addressing the weights when the two data sets are in the same
        order.  So the rewighting was done to the imaginary parts of the
        vis!
        Moved to the patch area this date.

 9856.  April 29, 1998           BP cal                      Eric
        If an antenna is missing from a BP file entirely, but present in
        the data, then it is possible to have BPGET return with nothing
        set.  Changed BPGET to return IERR=-1 in this case.  Changed
        DATBND to handle this by flagging all of the data.  Upgraded the
        counting of partial and full flags as well.  IOBSRC did not set
        its flags if the data were not found - so they were left at
        their initial values.
        Moved nowhere.

 9857.  April 29, 1998       $AIPNOT/SETPAR.FOR              Jeff
        Removed restriction that CRTMAX must be between 9 and 200;
        negative values will soon be used to activate auto-detection of
        screen size.
        Moved nowhere.

 9858.  April 29, 1998       $INC/AIPSPROTO.H                Jeff
        (Also a change on 1998/04/15.)  Added prototypes for SIGWINCH
        handling.
        Moved nowhere.

 9859.  April 30, 1998       $APGOOP/COHER.FOR               Leonia
        A small mistake has been found in baseline selection.
        It is fixed.
        Moved nowhere.

 9860.  April 30, 1998             PROC helps               Eric
        Added comments to PROC.HLP and PROCEDUR.HLP concerning the
        choice of procedure name.  Bad choices can confuse the parser.
        Thus proc FRINGIT causes GO FRING to become TPUT FRINGIT,
        FRINGIT.  POPS does not know task names (thank GOD!) and so can
        be confused by bad verb and proc names.
        Moved nowhere.

 9861.  April 30, 1998              FLGIT                   Eric
        New task to apply flags based on a UVMLN like algorithm to
        corrupt (bad RFI) spectral-line data.  It needs a decent BP
        to fit a linear Real and Imaginary to look for deviant points,
        but actually does seem to do some good.
        Moved nowhere.

 9862.  May 1, 1998            TVFLG, SPFLG                     Eric
        The number of TV color levels was not initialized before the
        call to TVPSUD.  This caused the loops in hue to behave badly.
        Moved nowhere.

 9863.  May 1, 1998                  UVMLN                    Eric
        In doing FIXWT, I found a funny startup message and a bunch of
        unused variables to remove from UVMLN.
        Moved nowhere.

 9864.  May 1, 1998                PCNTR                      Eric
        Corrected a positioning error for text lines below the plot.
        When there was no rotation, the line was placed one too high.
        Moved nowhere.

 9865.  May 4, 1998            COMRPL, COMLNK                 Pat
        Put in a few vital lines that make it possible for users to
        compile and link tasks in their private areas without needing
        write access to the PREP area.  If the $PREP directory is not
        writable by the user, PREP is temporarily redefined to point at
        the current working directory.
        Moved to the AOC this date (so Bryan Butler can use it).

 9866.  May 4, 1998                 VPLOT.HLP                 Leonia
        Regime of editing bad amplitude points (APARM(1)) works
        naturally only with plotting of amplitude.
        This means that BPARM(2) should be equal 1 or its default 0.
        This statement in explicit form is added.
        Moved nowhere.

 9867.  May 5, 1998             BPASS                       Eric
        Found several serious errors:
        1. The worst was an addressing error which meant that the
           address for weights did not get incremented when a channel
           was flagged.  Then the weights for higher numbered channels
           were put in for lower numbered ones.  This could lead to
           channels being eliminated, but did not seem to cause flagged
           channels to acquire false solutions.  The excess channel
           elimination did lead to a message, so users should have
           noticed.
        2. The fit routine did not return an error code for no valid
           samples so the task did not know to invoke interpolation when
           a channel was fully flagged.
        3. The interpolation method used the wrong formula for weighting
           channels so that the interpolation was not quite right and it
           would fail to extrapolate a solution if the last couple of
           channels or more were failed.
        Moved to the patch area this date.

 9868.  May 5, 1998               UVUTIL                      eric
        The UVREFQ routine attempted to convert the reference pixel and
        frequency to account for BCHAN and channel averaging but did not
        do it quite correctly.  The only routine to call it U2IDES
        assumed - in the line case but not the continuum case - that no
        correction had been made and then attempted to do it right.
        Unfortunately, it was doing it to a partially corrected value.
        No error occurred if BCHAN and the input uv data reference pixel
        were both 1 which is a common case or if no (or all) channels
        were being averaged.
        Moved to the patch area, sigh....

 9869.  May 6, 1998         Autocorrelation phases            Eric
        Yes baseline n-n may have phase, but only in RL or LR. So
        changed:
        FITLD   to handle the RL and LR in the correction routines as
                cross correlations rather than autocorrelations
        PRTUV   to allow a request for baeline n-n in CPARM(9), to
                do amp and phase of n-n RL and LR as cross correlation.
        POSSM   to allow it to plot phase if STOKES "RL' or 'LR' in auto
                mode, dropped APARM(8)=5 setting that for RL and LR,
                fixed error in selection which left phases 0.
        POSSM   HLP - dropped APARM(8).
        Moved nowhere.

 9870.  May 6, 1998         Various $SYSUNIX scripts           Pat

        The initial work to enable the *optional* use of UNIX sockets
        for communications between AIPS tasks and the various graphical
        servers (XAS, TEKSRV, MSGSRV, TVSERV) has now been fully put
        back in the system.  This functionality is parallel to the
        existing INET socket scheme that AIPS has been using since 1992.
        While not in its final state, the use of UNIX sockets in this
        manner is now at a point where it can be tested in various ways.
        Multiple instances of the XAS TV and the other servers are now
        possible on a single host; this has been tested and verified on
        Linux/Intel and Solaris/Sparc platforms.
        The feature is *only* enabled via the USOCK and optional UNEW
        options to the AIPS command line.  These names are not cast in
        stone, and their usage may also change.
        Known problems:
          1.  After starting up one or more Unix socket based TV's on a
              given host, it is impossible to fire up an INET socket
              based TV.  The workaround is to start up the INET socket
              TV first.  Solution is to modify search patterns in
              TVDEVS.SH to anchor the 'grep' for XAS at end of line.
          2.  With multiple instances of the TV on the same host and
              display, it is currently impossible to select which one
              you want to use for new AIPS sessions.  A solution would
              be to modify the syntax of the command line (e.g. USOCK=n)
              to allow the user to choose, and modify the scripts
              accordingly.
          3.  Detection of pathological cases has not been implemented.
              Example: XAS for USOCK session 1 died but the other
              servers (MSGSRV, TEKSRV, TVSERV) did not.  The startup
              scripts will not notice the latter servers and will always
              use slot 1 (assuming the display host matches) even if
              UNEW has been specified.
        Files affected:
        START_AIPS: implement USOCK, UNEW.  This file needs copied to
                    $AIPS_ROOT (done in CV) and its AIPS_ROOT definition
                    changed as appropriate to enable the feature.  The
                    AOC will hold off on doing this pending further
                    tests.
        START_TVSERVERS: ditto.  Calls UNIXSERVERS or XASERVERS.
        TVDEVS.SH: New logic to figure out TV number.  MNJ sites should
                   check if $AIPS_ROOT/TVDEVS.SH is a symlink to the
                   wrong version of $SYSUNIX/TVDEVS.SH and fix
                   accordingly.
        UNIXSERVERS: needed cleaned up somewhat.
        Moved nowhere.

 9871.  May 8       $APGNOT/PCCOR.FOR                      Leonia
        There was a mistake in phase referencing. It was for the first
        tone frequency, not for the referencing frequency.
        I fixed it to reference to the reference frequency.
        Moved nowhere.

 9872.  May 8, 1998             FITLD                       Eric
        Changed the help file to drop CALCODE - I changed the code for
        this two days ago.  It worked in my area, but not when
        released.  CALCODE is unpredictable and should not be used for
        selections anywhere near FITLD.
        Moved to the AOC by hand this date.

 9873.  May 17, 1998            0-length baselines           Eric
        Changed more things to allow phases on RL, LR, XY, and YX
        correlators:
        UVPRT   Changed to have a logical control whether amplitude and
                phase of real part (signed) value is displayed.
        PRTUV   Changed to test for RL and LR more carefully than just
                correlator 3 and 4.
        UVPLT   Changed to handle autocorrelations without forcing the
                amplitude to be positive and to recognize RL and LR as
                having phase even when IA1 = IA2.
        Moved nowhere.

 9874.  May 17, 1998             REFRMT                      Eric
        Wrote a new subroutine to compress consecutive blanks out of a
        display string.  Now to display channel number use a generous
        format like I5 and then call REFRMT.  If you want more than one
        consecutive blank in some places in the string, place a "special
        character" (actually some real one like underscore) where you
        would like a blank that is not counted as a blank.  Also changed
        the handling of the LEVS list in COMLAB, GREYS, and KNTR.
        Changed to use REFRMT and to handle the COMLAB change
        COMLAB   PLAXES
        PFPL1    PFPL2   PFPL3   PLROW   PLCUB   IMRMS   UVPLT
        ISPEC    IMVIM   SL2PL   TAPLT   UVHGM   BPERR   BSTST
        IMEAN    SERCH   BPLOT   CLPLT   FRPLT   SNPLT   FRMAP
        ELINT    VPLOT   POSSM   DFTPL   GAL     IRING   TVFLG
        SPFLG    IAXIS1
        KNTR     GREYS   CNTR    CCNTR   PCNTR
        Also changed the display in ACOUNT to give one more character
        for cpu time when IOCNT is kept and several more, leaving out
        null IOCNTs when not.
        Moved nowhere.

 9875.  May 17, 1998            ANTENNAS, BASELINE           Eric
        Changed:
        SETANT    $APLSUB - new to convert ANTENNAS and BASELINE into
                  counts of unique and DESEL on either.
        REQBAS    $APLSUB - to simplify how DESEL is coded and to have
                  BASELINE and ANTENNAS be symmetric.
        AN10RS    $APLNOT - to use SETANT and to deselect MAXANT-MAXANT
                  as well as the other autocorrelations which were done
                  before.
        BASLST    $APLNOT - to use SETANT.
        ANTENNAS  $HLPFIL - to clarify the meaning and to add info re
                  BASELINE
        BASELINE  $HLPFIL - to correct the wrong statements and add the
                  same info about the interaction with ANTENNAS.
        FRMAP     $YPGNOT and $HLPFIL - to remove special REQBAS and
                  rearrange the handling of ANTEN and BASEL, using
                  SETANT
        VPLOT     $YPGNOT and $HLPFIL - to remove special REQBAS and
                  rearrange the handling of ANTEN and BASEL, using
                  SETANT
        COHER     $YPGNOT and $HLPFIL - to remove special REQBAS and
                  rearrange the handling of ANTEN and BASEL, using
                  SETANT
        UVPLT     $YPGNOT - to have BASEL set deselect too.
        POSSM     $YPGNOT and $HLPFIL - clean up antennas/baseline
        BLING     $QPGOOP - to deselect on BASELINE too.
        UVCOP     $APGNOT - history routines did not handle deselection
                  and were messy - changed to use SETANT.  Also reworded
                  the help file some.
        UVIMG     $APGNOT - changed to use REQBAS rather than home brew
                  and to use SETANT.
        GRIDTB    $APLNOT - changed to use REQBAS rather than home brew
        To use SETANT: UVPRM, UVPRT, CLIP, IBLED, TVFLG, SPFLG
        Moved nowhere.

 9876.  May 20, 1998        XASERVERS, UNIXSERVERS          Pat
        The methods by which the UNIX socket based TV's are started up
        has changed slightly:
           AIPS TV=LOCAL     forces Use of UNIX sockets
           AIPS TV=LOCAL:0   always creates a new instance of the TV
           AIPS TV=LOCAL:n   use local tv #n (n=1,2,...), or start it if
                             it's not already running
        This does not affect the existing INET based TV functionality at
        all; it will continue to work as it did (or did not!) before
        this change was made.  Some minor changes in the scripts were
        needed in order to avoid confusion in the "ps" information
        mining between the two types of TV.  Also, the string in the
        title bar and the icon label now indicates what type of TV one
        has, and in addition which number it is in the case of a UNIX
        socket based ("local") TV.
        Moved nowhere.

 9877.  May 20, 1998          FLGIT                         Eric
        Added more clip parameters to go after real and imaginary as
        well as amplitude.
        Moved nowhere.

 9878.  May 21, 1998          TVSERV, XAS                   Eric
        Added a die command to ZTVSRV and added code to XAS.SHR to kill
        the TV lock server when XAS exits.  The zssslk version in
        XAS.SHR did not prepare data for sending to the server on Unix
        sockets just Inet sockets.
        Moved nowhere.

 9879.  May 21, 1998                  XAS                   Chris
        Inserted code to shutdown and close AipsSocket in closedown().
        This prevents the lingering "socket in use" problem under
        Solaris.
        Moved nowhere.

 9880.  May 22, 1998              FLGIT                     Eric
        Added a new mode to subtract a median window value from each
        real and imaginary and the clip and flag from there.  This may
        reduce the need for bandpass calibration.
        Moved nowhere.

 9881.  May 22, 1998               TVSERV                  Chris
        Moved the socket clean-up code out of the main loop in ZTVSRV
        and forced an exit from the loop when requested to shutdown
        by XAS.  Closing down the sockets and exiting from inside the
        loop appears to cause lingering "socket in use" problems
        under Solaris; it is not clear why this should be the case.
        Moved nowhere.

 9882.  May 24 & 26, 1998              Servers                  Eric
        Took Chris's suggestion and added finished to ZTVSRV, ZMSSRV,
        ZTKSRV so that loops will be exited and close down calls will be
        made when errors occur (or when TVSERV is ordered to close).
        Dumb error in ZTVSRV (by me) fixed on 26 May.
        Moved nowhere.

 9883.  May 26, 1998             SNPLT                     Eric
        Added RATFAC scaling to the one rate plot that did not already
        have it at suggestion of Michael Bietenholz.
        Moved nowhere.

 9884.  May 26, 1998             FRING                     Eric
        At the suggestion of Michael Bietenholz I have changed FRING to
        call FRNADJ when DPARM(7) <= 0 or DPARM(8) > 0.  Inside, that
        routine I added DOREF=DPARM(7).LE.0 and test on it before doing
        the re-referncing parts.
        Moved nowhere.

 9885.  May 27, 1998            IMFLT                     Eric
        Fixed bug I introduced in 1995 (!) which made the output no good
        - the input buffer was 4096 while MINIT was told it was 8192.
        Corrected handling of BOX defaults, introduced PIXRANGE to limit
        the pixels used in the fit, cleaned up the history handling, etc
        Moved nowhere.

 9886.  May 27, 1998                PCCOR                  Leonia
        The standard AIPS parameters MAXANT and MAXIF have been
        introduced instead of local MXAN and MXSIF.
        Moved nowhere.

 9887.  May 28, 1998           VLOG                       Eric
        Added tests for bad characters and Nan's substituting ? and 999
        and issuing a message.  This is done on all input card images.
        Moved nowhere.

 9888.  May 28, 1998           $APLDEC/ZFRE2              Pat
        Modified this to use the actual number of bytes per block as
        returned by the OSF1 statfs() call; it was using a fixed value
        of 1024 bytes.  This resulted in Astronomers on Alpha systems
        thinking they had twice as much space as they really did.  The
        old assumption may have been necessary on OSF/1 1.2 but not on
        any recent incarnation of the OS.
        Moved nowhere.

 9889.  May 28, 1998                STARS                          Eric
        The position angle of 0 degrees has the major axis along the y
        axis, STARS acted as if the major axis goes with the x axis.
        Switched these and added tests to force PA=0 and to avoid
        precessing velocities as if they were angles when the two first
        axes are not a position pair.
        Moved nowhere.

 9890.  May 28, 1998             TVSERV                        Eric
        Changed ZTVSRV to suppress SIGINT.  The CTRL-Y to AIPS was
        passing through and killing TVSERV (but not XAS, MSGSRV,
        TEKSRV).
        Moved nowhere.

 9891.  May 29, 1998             CCNTR                      Eric
        Add a SETLOC call ahead of the CC and ST plotting to restore the
        plot parameters to standard rather than label-dependent.
        Moved nowhere.

 9892.  June 1, 1998            $APLDEC/ZTAP2.C             Eric
        Added tests for being at BOT at the start of the operation and
        use this to avoid BAXF, BAKR, REWI etc from there.  Added tests
        for wierd set of error conditions from a BAKF that hits the BOT
        and calls to reset to error condition status (later reads still
        did not work even though the error condition appeared to be
        ok).
        Moved to siamang for testing.

 9893.  June 2, 1998                  Y2K                     Eric
        Checking things at Tony's insistence:
        SETAN   Increased string lengths for KEYIN, call DATFST to
                translate either form to internal ("hand" translation of
                old form was there).
        GETKEY  Gets table keywords but needs to test for long string of
                form DATE.... plus RDATE and UTDATE and call DATFST
                before returning the 8-char string
        FITTP   Put header and table keywords in new FITS date format.
        Moved nowhere.

 9894.  June 3, 1998                TABHDR                   Chris
        Changed to 2-letter table codes for gain curve, phase-cal and
        system temperature tables that have been read from FITS
        interferometry data interchange files to GN, PH, and TS
        respectively. This prevents them being confused with the
        equivalent tables used internally by the AIPS calibration
        system. This has the side effect of temporarily disabling
        calibration transfer until changes to FITLD are complete.
        Moved nowhere.

 9895.  June 3, 1998          ZTAP2.C                   Eric
        Added another magic number to the BAKF at BOT tests - the
        write-lock bit affected the magic value previously tested.
        Moved to Bologna this date.

 9896.  June 3, 1998           TABHDR                  Eric
        Add DATFST call on date string to Chris's changed version.
        Moved nowhere.

 9897.  June 3, 1998          OTFUV                  Eric
        Changed directory handling so that the OFF and GAIN scan numbers
        are found in the data and then sought in the directories.  In
        this way, BCOUNT amd ECOUNT do not have to apply to them.
        Moved nowhere.

 9898.  June 4, 1998          START_AIPS               Pat
        Of all the calls to uname -n, one did not have the secondary awk
        code that converted a fully qualified domain name [FQDN]
        (e.g. orangutan.cv.nrao.edu) to a simple hostname (orangutan).
        On systems where uname -n returned a FQDN, this caused the local
        unix-socket tv startup to fail.
        Midnight job sites should move this to $AIPS_ROOT.
        Moved to AIPS_ROOT in Charlottesville today.

 9899.  June 5, 1998        GETKEY                     Eric
        Changed it to call DATFST for any character-valued keyword with
        DATE in the symbol.
        Moved to the patch area this date.

 9900.  June 9, 1998            CPASS.FOR                Leonia
        CPASS has produced additional column (weight) at the output BP
        table starting with the version 15APR. The weight calculated
        correctely only for the first polarization (LL) and the first
        IF. The weight (calculated in the routine BPUPD) has been zero
        for all other polarizations and IFs. As a result the new version
        of POSSM which uses the weights ploted only the first
        polarization and the first IF.  The problem has been fixed.
        Moved nowhere.

 9901.  June 10, 1998        OTFUV                     Eric
        An off by one failure caused muti-IF runs to fail.
        Moved nowhere.

 9902.  June 10, 1998          OTBSRT                Bill/Eric
        Did not return an error code when it failed!  Calling routines
        then assumed the output table == input table was sorted as
        needed when it was not.  Results are more than a little
        unpredictable.
        Moved nowhere.

 9903.  June 11, 1998          LPCAL                 Eric
        An 8-character HOLLERITH was declared as a single Hollerith.
        This led to an abort on HP computers.
        Moved to MPI-Bonn and to U of Bordeaux this date.

 9904.  June 11, 1998            SPLIT                Eric
        SPLIT took NOPCAL to be no of parameters per IF and so cleared
        an array of size NOPCAL * MAXIF.  Unfortunately, NOPCAL is
        actually 2 * Number of IFs already.
        Moved to MPI-Bonn this date.

 9905.  June 18, 1998            FITLD               Chris
        Overhauled the handling of calibration tables from FITS
        Interferometry Data Interchange files: specifically the
        FLAG, GAIN_CURVE, PHASE-CAL and SYSTEM_TEMPERATURE tables.
        These interchange files are now regarded as distinct from
        their AIPS equivalents and are checked to make sure that
        1) keywords that are necessary for the interpretation of
           the table are all present,
        2) the required columns are present,
        3) the required columns have the correct types, and
        4) the required columns have the correct dimensions.
        If any of these checks fails then a diagnostic message
        will be generated and the table will not be translated to
        its AIPS equivalent but will be retained in its original form.
        In their original forms, the table have two-letter codes that
        are distinct from the eqivalent AIPS tables so that faulty
        tables will not interfere with later processing.
        The assigned codes are
                FLAG                 FL (AIPS equivalent FG)
                GAIN_CURVE           GN (AIPS equivalent GC)
                PHASE-CAL            PH (AIPS equivalent PH)
                SYSTEM_TEMPERATURE   TS (AIPS equivalent TY)
        These changes are intended to decouple the AIPS tables
        from the interchange tables so that they can be revised
        separately and to allow FITLD more flexibility in dealing
        with multiple table revisions in interchange files as
        well as improving the handling of faulty tables.
            The following interfaces have been added to deal with
        the interchange tables.
                INC:PFLV.INC (replaces DFLV.INC)
                INC:PGNV.INC
                INC:PPHV.INC
                INC:PTSV.INC
                APLNOT:FLINI.FOR
                APLNOT:GNINI.FOR
                APLNOT:PHINI.FOR
                APLNOT:TABFL.FOR (replaces FLTAB.FOR)
                APLNOT:TABGN.FOR
                APLNOT:TABPH.FOR
                APLNOT:TABTS.FOR
                APLNOT:TSINI.FOR
            The following interfaces have been modified to remove
        keywords that are only needed for data interchange from
        internal AIPS tables (where they are not needed) and to
        make table access routines conform to normal AIPS table
        access conventions.
                INC:PPCV.INC (replaces DPCV.INC)
                APLNOT:GCINI.FOR
                APLNOT:PCINI.FOR
                APLNOT:TABPC.FOR (replaces PCTAB.FOR)
        The following routines and tasks have been modified
        to use the revised GC and PC table routines
                APLNOT:GCSEL.FOR
                APLNOT:PCSEL.FOR
                APGNOT:ANTAB.FOR
                APGNOT:PCCOR.FOR
                APGNOT:PCLOD.FOR
                YPGNOT:APCAL.FOR
        The following files are now obsolete and have been
        removed from the system
                INC:DFLV.INC
                INC:DPCV.INC
                APLNOT:FLIO.FOR
                APLNOT:FLTAB.FOR
                APLNOT:GCKEY.FOR
                APLNOT:PCIO.FOR
                APLNOT:PCTAB.FOR
        NOTE: the removal of keywords from the GC and PC tables
        means that GC and PC tables from 15OCT98 AIPS can not be
        used in earlier versions of AIPS.
        Moved nowhere.

 9906.  June 18, 1998            BPASS                      Eric
        My formula for interpolation was backwards.
        Moved to the patch area this date, patching the patch.

 9907.  June 22, 1998            PCCOR                      Chris
        Fixed a number of errors that I had introduced while updating
        the PC table interfaces (mostly 'WRIT' opcodes where there
        should have been 'READ' opcodes).
        Moved nowhere.

 9908.  June 22, 1998               FIXWT                   Chris
        Changed MEDIAN to use a temporary copy of the data buffer
        so that the data buffer is unmodified in the call as expected
        by the higher-level routines.
        Moved nowhere.

 9909.  June 22, 1998               TABPC                   Chris
        The indexing calculations used to write data to the data
        buffer incorrectly used the constant 4 where NUMTON (the
        number of tones) should have been used.
        Moved nowhere.

 9910.  June 24, 1998              TASKWT                  Eric
        Changed AIPS to wait at least 15 seconds for a task to start.
        Fast machines are having problems when served by slower machines
        or networks.
        Moved nowhere.

 9911.  June 28, 1998              OTFUV                   Eric
        There was an error in the new code addressing the gain file when
        the scan numbers for the offs were very different from the scan
        numbers for the gains.
        Moved nowhere.

 9912.  June 29, 1998               FLGIT                      Eric
        Corrected it to write SU tables only if the output file is
        multi-source.  Great confusion (see below) reigns otherwise.
        Moved nowhere.

 9913.  July 6, 1998               FITLD                   Chris
        FITLD subtracted the total bandwidth of an IF from the reference
        frequency of a lower sideband IF when swapping the channels into
        ascending order of frequency. This is only correct in the
        special case where the reference pixel is 0.5. The subroutines
        that deal with the reassignment of LSB frequencies, FRQORD and
        FR2FQ, have been modified to deal with the general case. In
        addition, reference frequencies are no longer rounded to even
        multiples of 10 kHz, which lead to shifts of a few kHz in the
        labelling of LSB frequencies.
        These changes copied to 15APR98 patch area on this date.

 9914.  July 7, 1998             SHOW & TELL                 Eric
        Changed the diensionality of the SHOW & TELL file (TC).  It was
        handled as if the maximum POPS number was 15 although is is now
        35 and it probably did not have enough entries as well.  Better
        clean up of pending TELLs is needed also.  So:
        AU2     Corrected error that caused it to use the next POPS
                number when one was full.  Changed addressing by factor
                2.  Changed STQ to clean up inactive TELLs always - I
                assume that ZTACTQ now works pretty reliably.
                Changed TC file name to TCD000001
        GTTELL  Changed addressing.  Changed to use NPARM < 0 to mean
                "clean out all entries for this task/POPS" for any user
                number.  New TC file name.
        GTPARM  Add call to GTTELL (-1...)
        DIETSK  Add call to GTTELL (-1...)
        FILINI  Changed the INIT section for new sizes of TC  New TC
                file name
        FILAIP  Changed file size to 18 + 16*(NINTRN+2+NBATQS)
                New TC file name
        FILAI2  Changed file size to 18 + 16*(NINTRN+2+NBATQS)
                New TC file name
        STQUEUE  Help file updated to drop special clean up option.
        Moved nowhere.

 9915.  July 7, 1998          IMHEAD                         Eric
        Change LSTHDR and MSGHDR to use 2 more digits each for shifts -
        the 74 MHz images require it.
        Moved nowhere.

 9916.  July 7, 1998           DATGET                        Eric
        Put it back to the old convention of not returning fully flagged
        data.  For a while, if DOFLAG was false, it would return fully
        flagged data.  Upper level programs did not expect this and made
        errors.
        Moved nowhere.

 9917.  July 7, 1998         Multi-source detection          Eric
        Changed:
        MULSDB   To check whether ILOCSU >= 0 as well as SU table
                 exists.
        Corrected to use ILOCSU >= 1 in OOP: COHER, MAPBM, UVUTIL,
        UVPHAS.  Also added tests for using FQ and SU to COHER and
        MAPBM AND UVUTIL.
        Corrected to use ILOCSO and ILOCFQ >= 0 for regular code:
        CALIB   PCAL    LPCAL   CPASS   FRING   VPLOT   CLPLT
        UVAVG   PHSRF   FXVLA   SPCAL   LISTR   UVFND   BLAVG
        Corrected logic to set MULTI includING ILOCSU and force ILOCSU
        >= 0: BLCAL, BPASS, CALIB, LPCAL, PCAL, FRING, SPCAL, CVEL
        Added tests for valid ILOCSU, ILOCFQ:   ACCOR, PCCOR, UVHGM
        Moved nowhere.

 9918.  July 7, 1998             DFLG.INC                    Eric
        Pulled the flagging stuff from DSEL.INC, creating separate
        DFLG.INC.  DOFLAG and FGVER are left in DSEL.  Also pulled the
        parameter MAXFLG from PUVD to PFLG.INC.  Changed:
        AVSPC    Changed local flag include to be mostly DFLG.INC.
        UVCOP    Made a local include for PFLG with 50000 simultaneous
                 flags allowed and appended FLGINI, DATFLG, and NXTFLG
                 modified to use the local include.
        UVFLG    Put PUVD.INC in the task include, simplifying things.
        UVMLN    Added PFLG/DFLG and fixed a declaration
        DATFLG   Added PFLG/DFLG.
        FGREFM   Fix comment.
        Simply added PFLG and DFLG to:
        NXTFLG   SDGET   UVGET    CVEL     SDVEL    IBLED    SPFLG
        TVFLG    VPLOT
        Moved nowhere.

 9919.  July 7, 1998           DHDR.INC                 Eric
        As long as I am breaking everything, add a header parameter for
        a normalization factor for uv data weights.
        DHDR.INC   Added KRWTN
        VHDRIN     Added KRWTN at the end of ext files
        CATN2L     Added KRWTN translation back and forth
        CATINI     CATR(KRWTN) init as 1.0
        LSTHDR     Changed to report non-0 non-1 normalization factors.
        MSGHDR     Changed to report non-0 non-1 normalization factors.
        Moved nowhere.

 9920.  July 7, 1998          Also use DFLG                    Eric
        Several things escaped my GREPs since they use KNCS etc and
        hence need DFLG/PFLG as well as DSEL:
        BASAVG   DATBND   DATCAL   DATPOL   DCALSD   SMOSP   CLPLT
        In the case of SOUFIL, found a buffer which was too large
        equivalenced to FGBUFF which could cause all sorts of problems
        for the unwary!
        LISTR used FGBUFF for scratch - changed to BLBUFF.
        Moved nowhere.

 9921.  July 7, 1998              SDVEL                       Eric
        Corrected the DFLG business and added/changed options having to
        do with when and with what coordinate the correction is
        computed.  Also the help file.
        Moved nowhere.

 9922.  July 7, 1998              FLATN                     Eric
        Corrected bugs that (1) caused the center position to be that of
        field 1 rather than the pointing position, and (2) caused it to
        check for the existence of fields 2-N only when actually opening
        them for interpolation.  The latter exposed a foible of OOP -
        one can ask for header parameters of non-existent files (or
        existing ones I suppose) that have not been opened with OOPEN
        and get back zeros for both the parameter and the error code.
        Added COORDINA adverb to the task to allow the user to set the
        central coordinate and fixed it to zero the shift parameters and
        put the sum of the numbers of CC components into the header.
        Dropped excess calls to copt observed coordinates and beam
        parameters since that is all done in IMDCOP.
        Moved nowhere.

 9923.  July 9, 1998              ZABOR2 in APLUNIX        Chris
        Removed the definition of the _POSIX_SOURCE feature test macro
        from ZABOR2 in APLUNIX.  The introduction of SIGWINCH into this
        module means that it no longer complies with POSIX standards
        (or any other UNIX standards, for that matter) and the SGI
        compiler correctly refuses to compile it when the _POSIX_SOURCE
        macro is defined.
        Moved nowhere.

 9924.  July 9, 1998               $APGNOT/PCCOR.FOR      Leonia
        The frequencies of the tones have been determined from the first
        row of the PC table (for the given selected parameters).
        PCCOR failed if this row is bad (filled by zeros).
        I added the codes making PCCOR look through the first succesful
        row.
        Moved nowhere.

 9925.  July 9, 1998             GAININ                      Eric
        GAININ checked for empty CL/SN tables and set DOCAL false.
        Unfortunately, it did not say anything and did not close the
        file thereby leaving a much used LUN occupied.
        Moved nowhere.

 9926.  July 10, 1998            ZWINCH in APLUNIX          Chris
        Removed a spurious definition of _POSIX_SOURCE (see the ZABOR2
        change above).
        Moved nowhere.

 9927.  July 11, 1998             $APGNOT/PCCOR.FOR     Leonia
        PCCOR uses the two tones (the biggest and the lowest frequency)
        even if more than two tones present at each IF. Originally I
        supposed that the last  tone has the biggest frequency. It seems
        not true. Currentely the second tone has the biggest frequency.
        As such a sequence of the tones is not fixed forever, I modifyed
        PCCOR recentely to calculate the the lowest and biggest
        frequency tones.  Unfortunately I broke unwittingly the logic
        for USB/LSB IFs during those modification. I fixed it now.
        Moved nowhere.

 9928.  July 14, 1998         SIGWINCH handling          Jeff
        Finished adding SIGWINCH detection for LINUX, DEC, & SOL a few
        days ago, also added "stub" for other OS's.
        Files added:
            $APLGEN/ZWINC.FOR: called by ZDCHIN & ZWINCH to call ZWINC2
          and get the current window size.  Sets CRTMAX based on
          ZWINC2's return value.
            $APLUNIX/ZWINCH.C: signal handler for SIGWINCH, calls ZWINC.
            $APLGEN/ZWINC2.FOR: stub for OS's that haven't had SIGWINCH
          support explicitly added for AIPS; returns 0 which tells ZWINC
          to leave CRTMAX's value alone.
            $APLLINUX/ZWINC2.C, $APLSOL/ZWINC2.C, $APLDEC/ZWINC2.C:
          OS-specific routines for determining window size.  Called by
          ZWINC.
        Files modified:
            $APLGEN/ZDCHIN.FOR: Added call to ZWINC to get initial
          window size & set CRTMAX.
            $APLUNIX/ZABOR2.C, $APLSOL/ZABOR2.C, $APLDEC/ZABOR2.C:
          ZWINCH as handler for SIGWINCH.
        Chris has already fixed up a couple of things I'd not thought
        of:
        _POSIX_SOURCE tests/sets in $APLUNIX/ZABOR2.C and
        $APLUNIX/ZWINCH.C.
        Moved nowhere.

 9929.  July 15, 1998              FITTP                     Eric
        Dropped the DOTWO adverb since it no longer can do anything.
        Also added remarks in the help file to point out that uv data is
        only IEEE floating point.  Changed initial values in POPSDAT.HLP
        for DOTWO to +1, for DOCRT to +132, for DOCALIB to -1.  Dropped
        FITTP, added EDITA and EDITR to DOTWO.HLP,
        Moved nowhere.

 9930.  July 16, 1998           CALIB.FOR                  Leonia
        CALIB has not worked with multiple source file if model is
        CC file of CLEAN map. I found and fixed two bugs both in
        subroutine SETFAC, which calculate the ratio of the flux
        from CC table and flux from SU table.
        The first bug:
        The output parameter of subroutine CATKEY - KEYTYP was fourced
        to be 2. It lead to the confusion with memory.
        The second bug:
        Reading SU table the row number was equal the source ID
        number. So the task can not work if the first row does not
        correspond to the source ID = 1, especially if the source ID
        of the first row is more than number of rows in SU table.
        Moved nowhere.

 9931.  July 16, 1998            BPASS, DATBND                 Eric
        1. BPASS was writing the actual bandpass values when they were
        determined with autocorrelation only.  It was then taking a sqrt
        in DATBND when applying to autocorrelations.  This is fine when
        the BP was found and applies only to autocorrelations.  But is
        not if it is found with cross correlations or applies to cross
        correlations.  Changed it to take the sqrt in BPASS instead.
        2. BPASS was finding the max antenna number by an ANTINI call
        and the AN file record count!  Wrote ANMAXA subroutine to read
        the whole file and look at the an numbers in each record to see
        what the max really is.
        Many more tasks are involved - not tonight!
        Moved nowhere.

 9932.  July 19, 1998               CRT printing               Eric
        Changed PRTLIN and PRTALN to call ZWINC after the page full do
        we continue query.  Changed LPOPEN to call ZWINC after opening
        the TT device for DOCRT > 0).  Added calls to ZWINC also to
        AU1A, AU7, OFMLST, and PRTMSG since in $AIPSUB LPOPEN is not
        used for DOCRT > 0.
        Relink every task compiled on and since July 8 since they
        included ZABOR2 changes
        Moved nowhere.

 9933.  July 20, 1998                FXPOL                    Chris
        Added logic to convert gain curve (GC), phase-cal (PC) and
        system temperature (TY) table to dual polarization tables.
        This is necessary for tables loaded from VLBA distribution
        tapes if RR and LL are present without the cross polarizations.
        Moved nowhere.

 9934.  July 20, 1998          $YPGNOT/CONFI.FOR  .HLP       Leonia
        The task finds the array configuration which has the minimum
        worst side lobe at the given circular area at the sky.
        Initial configuration is taken from the input file or
        calculated as
          a homogeneous configuration on the circumference;
          a configuration on the circumference with progressively
              increasing of the spacing;
          a homogeneous configuration on the two circumferences; or
          a homogeneous configuration on the three circumference;
        The optimization is provided under the following constraints:
          constraint of topography
          constraint of donuts
          constraint of two circles.
        The process of finding the configuration is iterational.
        At each iteration the position and value of the worst side lobe
        in the given sky area is found.  Then a small correction of
        each element position is provided to minimize the value of
        the worst side lobe.
        The value and the direction of the correction is calculated
        in accordance of the theory (L. Kogan, MMA memo # 171 ).
        Both the found configuration and relevant UV coverage are
        plotted at the same plot (on TV or in a file).
        The coordinates of the found configuration are recorded in
        the output file in normalized form or in meters.
        The task can be usefull in design of MMA, LSA and other arrays.
        Moved nowhere.

 9935.  July 20, 1998            EDITR et al               Eric
        Rearranged the logic of QEDIUTIL and thereby its demonstration
        tasks         EDITR, EDITA, and SNEDT.  Added DOTWO option to
        all three, upgraded their help files, and their run-time helps
        HLPEDICL (CL/SN for uv editing), HLPEDISN (editing the CL/SN
        itself), HLPEDITY, and HLPEDIUV.  SCMAP still needs some
        attention perhaps - maybe just a relink will do.
        Added options include flag point, flag fast, next antenna, next
        baseline, use expert mode, and displaying a second observable
        from the primary antenna/baseline.  Some bugs got squashed and
        the colors are better I think.
        Moved nowhere.

 9936.  July 20, 1998           SNPLT                       Eric
        I find it confusing that SNPLT prefers to average and plot
        flagged samples, even plotting blanked as zero for CL tables!
        Worked it over a bit to use X's rather than +'s for WT <= 0
        samples and report them too.
        Moved nowhere.

 9937.  July 21, 1998      UPDCONFIG, UPDCONTROL            Pat
        Added some functionality that should enable a "mini" midnight
        job to function.  Such a job will only apply COMRPL and COMLNK
        transaction entries if they are relevant to a list of tasks
        ("AIPNOT:MSGSRV AIPNOT:TEKSRV AIPNOT:TVSERV" is the default;
        this can be overridden in the relevant section of UPDCONFIG by
        setting the UpdMiniPrg variable to something different.
        Relevance is determined strictly by LIBR.DAT.
        Also removed power (was at the AOC, now in CV), added mandrill
        and preliminary entries for the SGI satellites in Socorro.
        Moved nowhere.

 9938.  July 21, 1998      New architecture AXLINUX         Pat
        The EGCS 1.0.3 version of gcc and g77 has been made to produce a
        native port of AIPS to the Alpha/Linux environment.  The only
        non-functional part at this time is readline; a new version is
        probably needed in place of the frozen snapshot we distribute in
        READLINE.SHR.  Files modified or added:
          AREAS.DAT    updated with new areas $APLAXLIN and $SYSAXLIN
          ZCPU.C       new, in $APLAXLIN (different from LINUX version)
          ZDCHI2.FOR   new, in $APLAXLIN (LINUX version has ancient rev)
          ZDELA2.C     essentially identical to LINUX version
          ZTPWA2.C     ditto
          CCOPTS.SH    version for $SYSAXLIN
          LDOPTS.SH    ditto
          LIBR.DAT     ditto
          CDVER.SH     ditto
          CDVER.CSH    ditto
          XAS.SHR      Makefile adjusted to allow AXLINUX architecture
          FDEFAULT.SH  AXLINUX section added
          RUN          Allow NORL (no readline) so POPSGN can function.
          INSTEP1      Allow recognition of new architecture
          REGISTER     ditto
          FTPGET       Change list of files (TC, no ICD000001;), and add
                        AXLINUX support
          CDSETUP      Add AXLINUX, don't make symlinks to source area
                        if doing a full-disk install.
        To be moved to mandrill this date, time permitting.

 9939.  July 21, 1998             FITLD                     Chris
        Removed some remaining instances where frequencies were rounded
        to 10 kHz multiples. Introduced tolerances appropriate for
        single-precision frequencies (reference frequencies are single-
        precision quantities in VLBA export tapes) into comparisons of
        frequency offsets. This fixes a problem which led to rounding
        differences causing the creation of new frequency IDs: this had
        been masked by the the 10 kHz rounding.
        Moved to patch area on this date.

 9940.  July 21, 1998            FITLD                      Chris
        Changed FR2FQ and SO2SU subroutines to suppress spurious IFs
        when a subset of IFs has been selected.
        Moved nowhere.

 9941.  July 21, 1998                  SCMAP                    Eric
        Cleaned up the handling of messages about excess baselines and
        number vis copied so that they come out only after they are
        fully known instead of with the first subarray.  Fixed the
        explain section of SCMAP to be for the current editor.  Fixed a
        type in QEDIUTIL re DAMP ve DAMPL.
        Moved nowhere.

 9942.  July 21, 1998            Kill SIGWINCH                  Eric
        Removed all references to SIGWINCH in $APLSOL, $APLUNIX, $APLDEC
        versions of ZABOR2.C and removed $APLUNIX/ZWINCH.C.  Even on
        linux these were causing aborts for interrupted system call.
        Fixed missing ZWINC calls in AU1A, remembered to compile PRTLIN
        and PRTALN.
        Moved nowhere.

 9943.  July 23, 1998         Antenna number                    Eric
        Fixed handling of antennas numbers - or tried to:
        CPASS    Like BPASS, it was using # records = max antenna
                 number.  Changed to call ANMAXA.
        FRING    Like BPASS, it was using # records = max antenna
                 number.  Changed to call ANMAXA.
        CLPLT    Like the others, it was using the number of records as
                 the maximum antenna number.  Changed it to compute the
                 max antenna number.
        TVFLG    It was setting locations of antennas by record number
                 and so sorting baselines by length on poor premises.
                 Other aspects were right due to using GETNAN.
        PCAL     They were putting the solution for ant I in record I
        LPCAL    even if that record and antenna J in it.  This could
        SPCAL    mess up a good polarization cal!
        Moved nowhere.

 9944.  July 24, 1998            MWFLT                     Eric
        For some reason MWFLT was different from TAFFY in handling the
        delayed writing of rows and so delayed one too many.  Also
        changed it to allow for larger median filters (up to 51x51)
        if anyone has a mchine fast enough for that.
        Moved nowhere,

 9945.  July 24, 1998            SETSP                     Eric
        Changed to allow # CRT lines <= 0.
        Moved nowhere.

 9946.  July 24, 1998       IMLOD, UVLOD, FITLD            Eric
        Changed to allow 64-bit primary image or uv data to come in.
        Corrected buffer sizes in UVLOD.
        Moved nowhere.

 9947.  July 25, 1998             BPASS.HLP                  Eric
        the inputs part said that BPASSPARM(10) had to be > 1 to get
        normalization while the help part said (correctly) > 0.
        Moved nowhere.

 9948.  July 27, 1998            SPLIT                       Eric
        Changed meanings of APARM(1) (frequency averaging) and added
        option to doing boxcar averaging of the spectrum still producing
        a line data set out (with fewer channels).  Wrote new
        $APLSUB/AVGSMO to do the boxcar smoothing.
        Moved nowhere.

 9949.  July 27, 1998             TV labels                  Eric
        The positioning of labels inside the TV picture was wrong when
        TXINC or TYINC > 1.  Also labels should not appear when the type
        is blank without regard for the prefix.  Changed IAXIS1, ITICS.
        Moved nowhere.

 9950.  July 27, 1998              FITLD                    Chris
        Added a test to prevent unselected frequency groups being
        written to the output FQ table when FREQSEL is used.
        Moved nowhere.

 9951.  July 28, 1998            KLEENEX                    Eric
        New verb to exit aips cleaning out all the servers as one goes.
        Changed:
        ZTKSRV     $APLUNIX/ Add new codes to force shutdown.
        ZMSSRV     $APLUNIX/ Add new code to force shutdown.
        SSS.TXT    $DOCTXT/ Describe new opcode to XAS
        XAS.SHR    $YSERV/ Add new opcode to call existing shutdown
                   routine
        YDIE       $YSS/ Routine to open, issue die command, close
                   SSS-type TV
        YDIE       $YGEN/ No op.
        ZSSSO2     $APLUNIX/ Add new opcode to list
        ZSSSX2     $APLUNIX/ Avoid error message when there is no return
                   after a die.
        KILSRV     $AIPSUB/ New routine to issue YDIE and TEK and MSG
                   codes for dying.
        AU1        $AIPSUB/ Added code for KLEENEX and cleaned up other
                   code a bit
        POPSDAT    $HLPFIL/ Added KLEENEX verb
        NEWPARMS   $RUNSYS/ Added KLEENEX verb
        Moved nowhere.

 9952.  July 28, 1998               MWFLT                    Chris
        Corrected the test on the filter window to reject windows with
        an x dimension larger than the maximum allowed rather than the
        reverse.
        Moved nowhere.

 9953.  July 29, 1998             Geometry                  Eric
        Changed POSITION (PSNCV3) to do the geometry of the 3D
        correction wrt the tangent point and the geometry of the radial
        corrections wrt to the pointing position.  These can be
        different esp in 3D imaging in IMAGR.  Changed INTERPLTE routine
        IMGHGE to use the new call sequence of PSNCV3.  Changed FLATN
        and its help to add the APARM adverb of OHGEO and to pass it
        down to IMGHGE et al.  Now FLATN - for better or worse - can
        also apply the radial and 3D corrections.  Relink OHGEO too.
        Moved nowhere.

 9954.  August 3, 1998           TABSOU, M3TAR             Eric
        TABSOU's data buufer was 15+10*MAXIF long - the correct number
        was 23+10*MAXIF causing it to blow up when the full number of
        IFs was invoked (for some reason) by M3TAR.  That task had a
        very silly subroutine to translate tape 64-bit numbers to local.
        It was a simple copy, but the offset pointer was decremented for
        convenience at input.  Since the offset was always coded as a
        constant, this had the affect of changing 2, 3, etc to ??
        Fortunately, some systems put constants on read-only pages and
        then die for this stupidity.  Furthermore, simply copying the
        doubles is only correct for normal byte ordering not for DEC and
        PCs.  Replaced the bad code with a call to ZR64RL.
        Moved nowhere.

 9955.  August 3, 1998               $QPGOOP/OMFIT         Ketan
        OMFIT now offers two sets of error bars, one assuming the model
        is perfect (the 'suggested' error bars) and one using a thermal
        noise level provided by the user.  The antenna-based time-
        independent amplitude scaling factors [gains] are now frequency
        and stokes dependent.  The self-calibration solutions now are
        also frequency and stokes dependent.  OMFIT can now write out the
        model-fit residuals as a catalogued AIPS data file. More of the
        input adverbs are listed in the OUTFILE.
        Moved nowhere.

 9956.  August 3, 1998                $QPGNOT/KRING         Ketan
        KRING now has the ability to extrapolate fringe-fit solutions
        in time.  A pre-FFT stage solution for each antenna is sought as
        follows.  KRING looks backwards to find the last good solution
        whose listed SNR exceeds some multiple of the FFT SNR threshold.
        If such a solution is found, its delay and rate solutions are
        adopted for the current solution and a new phase is computed.
        If the SNR of this solution exceeds the FFT SNR threshold by the
        above-mentioned KRING skips the FFT stage.  This pre-FFT stage
        is carried out for each antenna.  After going through the entire
        data set, KRING will, optionally, do a 'backwards' pass in which
        it looks forward instead of backward for solutions to
        extrapolate.  Unfortunately, only scans are done in backwards
        order.  Within each scan, solutions are still sought in forward
        order.  So, this is not a full backwards solution extrapolation
        Moved nowhere.

 9957.  August 4, 1998           $SYSUNIX/DADEVS.SH and .PL     Pat
        By request, reworked the order in which the three categories of
        disk are processed.  Now, required disks are always included
        first; local disks are second, and optional disks selected on
        the command line (DA=...) are third.  Code was also added to
        ensure that a disk is never included twice.  Finally, awk was
        used in the shell version in an attempt to speed things up a
        bit.  The perl version is still lots faster, but awk does beat
        the shell looping formerly done.
        Moved nowhere.

 9958.  August 4, 1998              FITLD                 Chris
        Inserted code to check the value types associated with the
        global interferometry data interchange keywords and to correct
        them (with warnings) whenever possible. This should prevent
        reference frequencies being rounded to single precision. The
        tolerances used in comparing frequencies have been revised
        accordingly.
        Moved nowhere.

 9959.  August 7, 1998            $QPGOOP/OMFIT.FOR        Ketan
        At user request, allow printing of the covariance matrix by a
        user-controlled switch.  For one component models with ten or
        less parameters, the full matrix is printed out as a matrix;
        otherwise, the matrix is printed out one element per line.
        Trapped an overflow that caused some models to crash even
        though some of the parameters were being held fixed.  Fixed a
        logic error that confused the maser model to use the wrong
        spectral profile slowing convergence.
        Moved nowhere.

 9960.  August 7, 1998            $APGNOT/DTSIM.FOR        Ketan
                                  $APLNOT/DTPARM.FOR
                                  $INC/DTPM.INC
        Changed the internals of DTSIM to process station coordinates
        using XYZ not Longitude, Latitude, and Elevation.  Changed the
        inputs processing routine to accept both types of inputs.  Need
        to relink $APGNOT/DTCHK as well.
        Moved nowhere.

 9961.  August 7, 1998            $QPGNOT/KRING.FOR        Ketan
        At user request, added the delay/rate search window sizes to the
        screen messages when PRTLEV>0 .
        Moved nowhere.

 9962.  August 7, 1998            $APLNOT/GEOPOS.FOR       Ketan
                                  $APGNOT/DTSIM.FOR
        The subroutine GEOPOS introduced into DTSIM just today is needed
        by DTPARM and is now to sit in APLNOT.
        Moved nowhere.

 9963.  August 7, 1998            AIPSWC                      Eric
        Checked in the aips system line counting procedure so that it
        won't get lost.
        Moved nowhere.

 9964.  August 7, 1998              IMAGR.HLP                Eric
        Added Bill Cotton's notice about WWW tools to help set the
        adverbs to IMAGR for interfering sources.
        Moved nowhere.

 9965.  August 10, 1998           $APGOOP/CL2HF.FOR        Ketan
        Merged last version of CL2HF cleaned up in July 1997 with latest
        version submitted by Dave Gordon in May 1998.  Changes include:
        cleaned up frequency calculations, correlator model now accessed
        using CL table and not IM table, some re-formatting of comments and
        some re-formatting of FORMAT statements.
        Moved nowhere.

 9966.  August 11, 1998             Misc                     Eric
        AU1A     Changed test on page full by one line to allow for
                 FOUND IN message
        AU8      Changed handling of errors in EXTDEST to close the file
                 and to take blank as NO in the call to CONFRM.
        UVSRT    Increased the work buffer from 256 Kilowords to 1280
                 Kilowords.  It should go faster now.
        Moved nowhere.

 9967.  August 12, 1998          $QPGNOT/KRING.FOR         Ketan
        Although KRING requires less memory than FRING, its been running
        dog slow.  It turns out that KRING has been trying to solve FFTs
        16x larger than FRING.  Turning this down to the same level as
        FRING results in a 15+factor decrease in execution time.  The
        solution extrapolation routine had some logic flaws which have
        now been fixed.  The new SNR calculation is now in place but is
        not yet the default.
        Moved nowhere.

 9968.  August 12, 1998           Cal system                 Eric
        Changing gain application code so that the gain records in the
        CL or SN table do not need to occur at the same times, but in
        strict time order:  Fixed errors handling subarray and FQ
        selection:
        DSEL.INC   Added NTIMCL, NEXTCL to point at the next CL record
                   to be used and TIMECL(2,MAXANT) to hold the current
                   times.
        PUVD.INC   Added parameter MAXFQ=256 max number FQ IDs. and
                   increased XCTBSZ from 2500 to 5000.  This then allows
                   a limit of 1000 for num ant * num pol * num IF which
                   should do (lthough it is < 5040 which is
                   MAXANT*MAXIF*2).
        DATCAL     Minor code cleanup.  Still needs new interpolation at
                   the same times as before.
        CGASET     Moved interpolation weight setting inside loop on
                   antenna and use the new antenna-dependent times.
        CSLGET     Fixed handling of SUBARR, FREQID - they are not
                   acceptable as zero although table records are.
                   Changed logic all around to fetch the records needed
                   for interpolation on an antenna basis.
        SDCGET     SUBARR = 0 meaningless - dropped.  Table can have 0.
        BLGET      FRQSEL, SUBARR = 0 meaningless - dropped.  Tables can
                   have 0 meaning all.
        BPASET     Was ignoring SUBARR entirely, mixing subarrays
                   happily.  Added proper tests and fixed FREQID test.
        BPGET      Was ignoring SUBARR entirely, mixing subarrays
                   happily.  Added proper tests and fixed FREQID test.
        UVGET      Added test and error exit for SUBARR < 1 or > # of
                   subarrays when calibrating.  It sets it to 1 if there
                   is only 1.
        SNPLT      Renames local TIMECL to avoid possible problems.
        Moved nowhere.

 9969.  August 12, 1998           GETANT                       Eric
        NSTNS was a common parameter widely used in all sorts of places.
        I did not realize this when I checked antenna usage and so
        allowed NSTNS to be set to the number of records in the file.
        Actually this was what was intended by the original designer
        with TELNO(i) giving the actual antenna number for record i and
        the other arrays being (j) where j-actual ant number.  But, no
        one else seems to have known of this clever if difficult usgae.
        Some tasks used this well, others messed up, and the
        polarization cal application seems to have ignored it entirely.
        Changed so that TELNO(i) = i always.
        Moved nowhere.

 9970.  August 12, 1998            UVPLT                     Eric
        Added EIF to the adverbs and fixed it to loop over subarray and
        loop over IF if requested.  Bandwidth synthesis may now be fully
        plotted.
        Moved nowhere.

 9971.  August 12, 1998          INDXR                        Eric
        Changed arguments to  OGTDEL and OGETMC to R*8 for times.
        Changed to allow the VLBMOD.
        Fixed TABLEUTIL and GETMC to use CLTIME as Double precision
        which it is supposed to be everywhere.
        Moved nowhere.

 9972.  August 12, 1998           UVDATA                     Eric
        Added keyword DOUVSCAL which when true in a read uv data set
        will cause UVREAD to scale the input u,v,w by the ratio of the
        output to the input frequencies.  Certain u,v copying routines
        may need this (e.g. SPLIT, UVCOP, FLGIT do something similar)
        but others like IMAGR transfer the input frequencies suitably to
        uv scratch files and do not want this option.
        Moved nowhere.

 9973.  August 12, 1998        u,v,w scaling                 Eric
        Some routines neglect to scale u,v,w from the input ref
        frequency to the frequncy being displayed/copied etc.  Changed
        DECOR    Scale u,v,w when transfer to output
        UVPRT    Scale displayed u,v,w to BIF, BCHAN
        UVFND    Scale u,v,w displayed and used to channel, IF.
        CLPLT    Scale u,v,w as read for UVGET affects.  Also dropped
                 several unused subroutines.
        FRPLT    Changed how frequency scaling is dopne in phase shift,
                 including getting the frequencies with CHNDAT.
        IBLED    Scale u,v,w as read into averaging routine.
        POSSM    Scale u,v,w as read - it already scaled for channel but
                 not for base-band shift
        VPLOT    Scale u,v,w as read for FREQ/UVFREQ.
        Moved nowhere.

 9974.  August 12, 1998      EXTLIST                      Eric
        The forgotten AU8A was updated for UVPLT - I will bet it does
        not work well onlots of plot type (esp CLPLT, VPLOT, ..)
        Moved nowhere.

 9975.  August 12, 1998    $APLNOT/LISRAN.FOR            Leonia
        The new routine LISRAN returns array of the list of the random
        parameters and the relevant array which informs whether the
        given parameter should be averaged (1), summed (0), or
        not averaged, not summed (-1).
        Moved nowhere.

 9976.  August 13, 1998    $APGNOT/UVAVG.FOR             Leonia
        UVAVG has treated correctely the 9 random parameters.
        If the number of random parameters exceeds 9, a warning
        has appeared, informing the user that this exceeding
        can be a reason that AVG MAY BE BAD. This warning confused
        users, because they has not have enough information to
        estimate how serious it is. I modified the warning.
        Using the new routine LISRAN (look 9975) I give the list
        of the extra random parameters which I think clarifys
        situation for the users.
        Moved nowhere.

 9977.  August 13, 1998      FITLD                        Chris
        Removed a test feature that had been left in the cal
        transfer code. This caused calibration tables loaded
        from different input files to be written to separate
        output tables. All calibration data is not concatenated
        in table version 1.
        Added a note in the explain file with recommended TAMRG
        settings for removing any duplicate records from the
        version 1 tables.
        Moved nowhere.

 9978.  August 13, 1998            PHNEG                Chris
        A new task to flip the sign of the visibility phase and
        contributed by George Moellenbrock. This is needed to
        fix some data correlated in Mitaka.
        Moved nowhere.

 9979.  August 13, 1998           FLGIT                       Eric
        Corrected it to recale u,v,w when output frequency is not the
        same as input.  Also changed it to copy the FQ file reformatted
        including (if multi-source in, single-source out) the source
        frequency offsets.  Changed it to loop over subarray when there
        is more than 1 and the user asks for all.  The fix yesterday
        caused SUBARR=0 to fail even when there is only one.  That fact
        made me alter UVGET to move the test on time order and subarray
        above all calls to calibration preparation routines.  Now, with
        1 subarray, it will work with SUBARRAY=0.
        Moved nowhere.

 9981.  August 14, 1998          TI2HA                        Eric
        New task to convert times in a UV data set to hour angles
        (offset to be around 1.0 to avoid negatives).  This will allow
        averaging of multiple days if desired, but prevents further
        calibration.
        Moved nowhere.

 9982.  August 14, 1998      $APGOOP/CL2HF       Ketan for Dave Gordon
               Updated CL2HF's date processing to properly convert the
        dates into the desired Haystack format. Also unnecessary call
        to obtain REFPIX was removed.
        Moved nowhere.

 9983.  August 17, 1998           LISTR                   Eric
        Fixed handling of LIST mode to avoid dividing the FREQ by 1.E9
        on each iteration and to loop over IF since it claims to be able
        to do so.
        Moved nowhere.

 9984.  August 17, 1998      POPS MEmory file size        Eric
        Large procedures are capable of blowing core still.  Changed
        DCON.INC    To get sizes from an include called PKSZ
        PKSZ.INC    To set K and LISTF sizes (4 times larger roughly)
                    and the legitimate Save/Get version number (now 16).
                    Also set KKT size 3 times larger.
        AU2A        Use PKSZ rather than a data
        INIT        Use PKSZ rather than hard-coded numbers
        FILAIP      Use PKSZ rather than hard-coded number
        FILAI2      Use PKSZ rather than hard-coded number
        FILINI      Trap ME now and use PKSZ for size
        SGLAST      Reset MPAGE and LPAGE after call to SGLOCA using
                    PKSZ.  Changed to invoke GET LASTEXIT when it fails
                    because the version is too old.  This uses the page
                    full printing trick to handle type aheads.
        STORES      To use whatever MPAGE and LPAGE come out of SGLOCA,
                    but reset to standard after disk is read.
        SGLOCA      Remove SGVERS setting to PKSZ, add array of former
                    MPAGE and LPAGE sizes for versions 14 and up, set
                    MPAGE or LPAGE to the size appropriate to the
                    outdated file about to be read.
        POPSGN      Use PKSZ to set values into K, KKT array.
        AIPS        Use PKSZ to set KKT parameters.
        AIPSB       Use PKSZ to set KKT parameters.
        AIPSC       Use PKSZ to set KKT parameters.
        DAIP        Use PKSZ to set KKT parameters.
        Moved nowhere.  This will require creating new ME files for
        everybody, old SG files will survive!

 9985.  August 17, 1998         FREQID = -1               Eric
        The pernicious FRQSEL or FREQID is set to -1 when there is no FQ
        selection - but I dropped that from the cal routines since one
        cannot mix Subarrays of FQ ids.  Allow FRQSEL=-1 again in
        CSLGET, BLGET, BPGET, BPASET.
        Moved nowhere.

 9986.  August 18, 1998              FITLD                Chris
        Corrected the reference frequency for lower sideband data
        when concatenating data.
        Moved to patch area on this date.

 9987.  August 19, 1998        UVCOP, SPLIT              Eric
        Changed both tasks to eliminate the random parameters called
        REMOVED which eat up space for no good reason.  This is tricky -
        please watch these tasks to make sure I did not miss some case.
        Moved nowhere.

 9988.  August 20, 1998           FITLD                  Chris
        The calibration transfer routines were looking up the order
        of the IFs in the output file in the FORDER map using the remapped
        frequency ID while FORDER was constructed using the unmapped
        frequency ID. This would cause FITLD to place calibration data
        in the wrong elements of the output arrays if the frequency IDs
        changed when a file was appended; since the faulty addressing
        usually resulted in a zero index, this was most likely to lead
        to a bus error.
        Moved nowhere.

 9989.  August 20, 1998           BLCAL                    Eric
        BLCAL fell into the trap of setting NKEY (to 3), then calling
        TABINI, and then using the output NKEY (now about 50 or so) to
        call TABKEY.  Fixed it to reset NKEY to the desired number - all
        other $APLNOT *INI.FOR have this right by now.
        Moved nowhere.

 9990.  August 20, 1998          IMAGR, MX                 Eric
        Both tasks refused to handle 1-pixel windows.  I changed QCLEAN
        to allow single pixels to go to the Cleaning if there is a
        single-pixel window (among the clean boxes), otherwise single
        pixel fields are skipped.  In MX, I changed it to go ahead and
        Clean any single-pixel field.  I also fixed the TV scaling which
        used the max/min in Clean boxes which is disasterous for a
        single-pixel box.
        Moved nowhere.

 9991.  August 20, 1998            APCAL                   Chris
        APCAL could only handle a maximum of 10 gain-curve records.
        Increased this limit to 2*MAXANT.
        Moved nowhere.

 9992.  August 21, 1998             BLINI                Eric
        I forgot to relink everything for yesterday's fix of BLINI.
        Moved nowhere.

 9993.  August 21, 1998            UVCOP                 Eric
        Corrected 2 bugs: a pointer was updated while the old value was
        still needed and the output gain for compression was
        misaddressed.  The copies of compressed data were therfore
        invalid and things could blow up or do odd things to the source
        table.
        Added SUBARRAY as an option.  This means testing for it,
        resetting the time and subarray when it is used and copying only
        the correct antenna file.  Also it meant fixing MCSEL, IMSEL,
        and PCSEL to have and use ISUB and JSUB options of the other
        selection subroutines and to take real advantage of these
        options by setting them properly for SUBARRAY > 0 (and also
        BPARM(2) > 0).
        Moved nowhere.

 9994.  August 22, 1998          OERROR                 Eric
        Changed code to leave the COMPRESS RUN file in $RUNFIL on error
        termination.  Added messages telling user how to fix things.
        Moved nowhere (tested on pilabo).

 9995.  August 22-23, 1998         CookBook                 Eric
        Changed things for EDITR, EDITA, SCMAP, SNEDT changes:
        COOK6   Remark about number of baselines
        COOK9   Remark about number of baselines
        COOK10  Reword the section on EDITR
        COOK5   Rewrite the section on EDITR.
        COOK4   Adjust the wording on EDITA, replace figure EDITA.PLT.
        COOKI   Adjust things a little for 4 and 5 changes
        COOK0   recipe gone from 5
        RECIPE  recipe no longer used
        Moved nowhere.

 9996.  August 22-23, 1998        EDITR et al.               Eric
        Changed QEDIUTIL to be smarter about auto-correlation only data
        sets.  No SHOW ALSO menu item is needed and SHOW PHASE is
        suppressed.
        Also fixed it to update the screen fully when a plot is pending
        and SELECT FRAME is chosen.  Changed it to make the lower (edit)
        plot a bit bigger than the others.
        Moved nowhere.

 9997.  August 24, 1998             UVCOP                  Eric
        Did not set the source number until there was a success, but the
        CURSOU was referenced in flagging.  A delete a source for all
        time could delete all data for all time thereby.  Also found yet
        another reference to IPTRO after it was already incremented - so
        moved the increment code yet again.
        Moved nowhere.

 9998.  August 25, 1998       $YPGNOT/CONFI.FOR            Leonia
        For two circle constraint, when the inner circle of the bigger
        configuration is used as outer circle of smaller configuration
        it is usefull using the same pads for the common elements
        of the common circles. For this purpose IN2FILE is used now to store
        the position of the fixed elements at the outer circle of the
        given configuration. During optimization these elements are not
        moved. The .HLP file is updated.
        Moved nowhere.

 9999.  August 25, 1998      VPLOT                         Leonia
        Historically VPLOT has not labeled vertical axis if weight is
        plotted. I added the labeling.
        If NCOUNT is selected very big erronously, VPLOT has failud to
        finish succesfully without warning what happened.
        I added the maximum of plots on a page: 40.
        If NCOUNT >40 the task stops with explanation the reason.
        Moved nowhere.

10000.  August 25, 1998      $APGNOT/SPLAT.FOR             Leonia
        I can not wait more to put the new task in the system,
        because I can not wait the next even ten thousand.
        The new task SPLAT having all ability of SPLIT, provides additional
        options:
        1. It can assemble selected sources having calibrated and edited
           (by FG table) into new multi source file.

        2. The averaging in time and averaging subsequent group of
           frequency channels is added.

        The task can be usefull when the preliminary calibration which
        reduced fringe rate and delay carried out. The output of SPLAT
        will have much less data because the averaging.
        Moved nowhere.

10001.  August 26, 1998      $QPGNOT/KRING                 Ketan
        My change of August 12, 1998 was ill-considered.  KRING was only
        running slowly because it was actually able to handle the
        heavily padded FFT that FRING choked on.   Turning down the
        padding level made KRING's FFT search unacceptably inaccurate
        for the Least Squares.  Ive now turned the padding level back
        up to what it was before and introduced a new handle, CPARM(10),
        that allows the user to turn down the padding manually.
        CPARM(10) defaults to a factor of 8 in delay and rate, and can
        be set to any positive power of 2.  KRING will not allow values
        less than 1 and will, in all cases, only use a padding level
        consistent with the amount of available memory.
        Moved nowhere.

10002.  August 27, 1998       TABKEY anticipation          Eric
        Changed TABKEY using routines to check floats for type and read
        the appropriate one into the variables being returns.  Then
        15OCT98 will be able to read tables made by 15APR99 (in which
        all will be real*8).  Changed:
        ANTINI   Add lots of tests for current R*4's.  Note that the
                 REAL*8's are gotten by RCOPies since alignment in the
                 data buffer is absolutely not guaranteed.
        ACTFRQ   Proper equivalence and test for GMMOD.
        BPINI    Added equivalence, stop copying REAL*4, add tests and
                 correct handle R*8 if it is returned (not expected)
        CALINI   Add REAL*8 test and handle for GMMOD.
        GAINI    Add REAL*8 test and handle for GMMOD and offsets
        GAININ   Add REAL*8 test and handle for GMMOD.
        GPINI    Add REAL*8 tests, handle for various parameters,
                 increase buffer size, fix error the Height was not set
                 and the lat was set to the height.
        IMREF1   Like IMIO below.
        MCINI    Changed call seq - freq should be REAL*8.  Fixed to
                 have FREQ REAL*8 and to handle either on read.
        MCSEL    Changed call seq to MCINI.
        PDRGET   Correct message suppression handling.  Changed to read
                 either R*4 or R*8 values.
        SNINI    Changed to use simpler equivalence scheme and to handle
                 reading REAL*8's
        TABKEY   Clarified a comment or two,
        CLCAL    Changed a few comments around (it writes an R*4 only).
        FITLD    Changed call seq to MCINI.  Changed to handle a table
                 key read by specifying the needed keywords rather than
                 reading "all" limited to 50.
        FXPOL    Changed FIMIO like the routines below.
        MFPRT    Changed TABKEY ALL read into a proper read to get the
                 DEPTH parameter which was being set to 1 otherwise.
        UNCAL    Added R*8 test for GMMOD.
        SNPLT    Added R*8 test for GMMOD.
        There is a collection of FITLD routines with real errors in them
        which needed fixing.  They were doing RCOPY REAL*8 variables
        onto REAL*4's in a common and were upping counters by 2 for
        REAL*8 not NWDPDP.  The include files also need their buffer
        for keywords increased for possible REAL*8's.  Changed
        DATV.INC DBAV.INC DBCV.INC DCAV.INC DCMV.INC DFRV.INC DIMV.INV
        ATIO     BAIO     BCIO     CAIO     CMIO     FRIO     IMIO
        AGIO     SOIO (includes okay)
        Moved nowhere.

10003.  August 27, 1998              FITLD                  Chris
        Generalized the processing of random parameters in UV_DATA tables
        from VLBA-style FITS files by introducing a table of parameters
        to be deleted and a table of parameter translations. FITLD now
        handles correct u, v, w label patterns (UU, UU--SIN, UU--NCP) as
        well as the incorrect UU-L pattern used by the VLBA and appends
        the projection suffixes in the output file (UU, UU-L, and UU--SIN
        become UU-L-SIN in AIPS while UU--NCP become UU-L-NCP). Before
        this change FITLD would only recognize parameters labelled
        using the UU-L pattern.
        NOTE: UU-L coordinates are assumed to be in seconds in UV_DATA
        tables and not wavelengths as the name suggests so that we can
        still read broken UV_DATA tables from the VLBA archives.
        Moved nowhere.

10004.  August 28, 1998            $YPGNOT/CONFI.FOR       Leonia
        Opimization with some elements fixed at the outer circle
        was added recentely for the two circle configuration.
        (see 9998). Now I added this option for the three circle
        configuration. The new part of task responsible for reading
        the fixed positions has been formed in separate subroutine.
        The HELP file has been updated.
        Moved nowhere.

10005.  August 29, 1998              CALIB                   Eric
        Added messages talking about self-cal and non-self-cal modes at
        the decision points.  Users were getting non self-cal quitely
        when they expected self-cal but selected > 1 source (say with
        QUAL).
        Moved nowhere.

10006.  August 31, 1998        DATCAL in APLNOT          Chris
        Recent changes to the calibration routines changed their
        interface so that CALTIM(3) no longer represented the time
        for which the calibrations were calculated. This change
        was not propagated to the rate correction in DATCAL which
        calculated phase changes with repect to the new definition
        of CALTIM(3) leading to an incorrect rate correction that
        was approximately twice what it should have been. Replaced
        CALTIM(3) with LCALTM in this expression.
        Moved nowhere.

10007.  September 1, 1998       CGASET in APLNOT           Chris
        CGASET set LCALTM to a large number after exhausting the
        calibration table. This made a mess of the rate corrections
        (see the previous change) if data continued past the end
        of the calibration table. Since the sole purpose of setting
        LCALTM to a special value appears to have been the avoidance
        of redundant recalculations of the complex gains and since
        this avoidance should not normally be a significant
        optimization, LCALTM is no longer set to a magic value when
        the calibration table is exhausted.
        Moved nowhere.


10008.  September 1, 1998        EDIT class                    Eric
        Changed:
        QEDIUTIL  1. FLAG FAST and POINT ignored the all antenna flag.
                  2. It just averaged subarrays with no thought.  Now it
                     forces a single subarray.
                  3. It forced OUT_FGVER to 1 when it was 0 and used
                     OUT_FGVER for input FG table for SN and TY modes.
                  4. If an output FG table is written, pick up its
                     version and store it back wih the input, so if
                     there is a loop the same output FG will then be
                     used.
                  5. Also for SCMAP, get the FG table for the UV data
                     and if it is none, change it to the new FG table.
        EDITA     Changed it to allow in and out FG versions to be
                  different using the same logic as EDITR.
        EDITA.HLP Ditto
        UVUTIL    Changed UVCOPY to loop over subrrays - can't cal more
                  than one at a time.
        INPUT     Changed several declarations of input character
                  variables not to be specific about length.  Otherwise
                  keywords were required to be 8 characters on input and
                  32 on output.
        SCMAP has bugs still and so was not putbck yet of COMLNK'd.
        Moved nowhere.

10009.  September 3, 1998        BooBoos                  Eric
        Did not edit the TABKEY advance changes properly for ANTINI and
        MCINI.  The former did not matter much, but the latter caused an
        abort because it used the previous type (double) for what is
        actually a REAL*4 leading to a 10**43 value.
        Moved nowhere.

10010.  September 4, 1998        FRING                   Eric
        Changed it to look for frequency increments only in one IF if
        the IFs are being done separately and to check the frequency
        increment and fix it if it is < 0.1 of a normal channel
        increment.  Fixed up some the the ABS value handling of
        frequency differences as well.  Multiple IFs from double
        sideband were having two channels overlap at 0 frequency
        difference.
        Moved from MPI this date.

10011.  September 4, 1998       EDIT class                    Eric
        Changed:
        FCINI     A buffer was too small - the HPs were the ones that
                  had problems with essential pointers being
                  overridden.
        REFFAZ    Changed it to fix phases even if weight <= 0 and to
                  fix refant even if sol'n = INDE.  Also changed it to
                  change the reference antenna when the current refant=0
                  if the solution is INDE (which it should be in that
                  case).
        QCLEAN    Correct TV loading to check for TXINC wrt the windows.
                  Failures were caused by truncation/rounding in CLBCHK.
        SCMAP     Changed TV menu to select Subarray to edit.  Changed
                  it to make a cataloged output file of the phase-only
                  calibrated data when switching to phase and amp.  It
                  cannot use the output file for this when there is more
                  than one subarray because one cannot copy over the
                  data set applying cal with > 1.  Fixed display of rms.
        UVUTIL    Copy tables only once.  Changed UVCOPY to loop over
                  subarrays calling UVCOP1 (the former UVCOPY).
        Moved nowhere.

10012.  September 4, 1998        DATCAL                 Chris
        JNDXA1 and JNDXA2 were not incremented in loop 25 so that
        DATCAL only checked for non-zero delay corrections in
        the first selected IF (EIF - BIF - 1 times). This resulted
        in delay corrections not being applied in cases where the
        delay corrections were zero for the first selected IF but
        not for others (usually as a result of missing data).
        Moved nowhere.

10013.  September 6, 1998        $APLNOT/DATBND             Ketan
        When DATBND and BPASS were modified on July 16, 1998, CPASS
        was forgotten.  As a result, bandpass corrections generated by
        CPASS were incorrectly applied for AC data in DATBND.  This
        had no effect upon cross-power spectra.
        Moved nowhere.

10014.  September 6, 1998        $APGOOP/CL2HF              Ketan
        I was supposed to begin versioning CL2HF as of Aug 11 but
        forgot to.  It begins now.  The date format change of Aug 14
        is the first entry.  Also, the versioning is to be mirrored
        in the help file.
        Moved nowhere.

10015.  September 7, 1998        $QPGOOP/OMFIT              Ketan
        At user request, changed user input for early termination
        from fractional change to percent change.  Fixed bug in
        error-bar calculation that caused error-bars to be sqrt(2)
        too small.
        Moved nowhere.

10016.  September 7, 1998        $APGNOT/DTSIM              Ketan
        Change noise calculation in DTSIM so that with a 0.5 MHz
        bandwidth, 2 sec integration time, and SEFD of 295 Jy
        [inclusive of all efficiency losses], results in a noise
        level of 0.295 Jy/vis.
        Moved nowhere.

10017.  September 8, 1998              FRING                   Eric
        Added code to cause the frequency increment error message to
        come out only once per subroutine.
        Moved nowhere.

10018.  September 8, 1998             QCLEAN                   Eric
        The dubious option of quitting on the first negative clean
        component was supported in the inner loop, but no where else.
        Changed things to get the actual residual value, to preserve it
        if negative even when the re-imaged fields have a positive peak,
        and to set FINISH true on the basis of it.  The middle point is
        why I do not like the option - the peak in the residual was
        positive after a re-imaging even when it had last found a
        negative component.  The first negative is not a meaningful
        concept.  Anyway, the routine now does as advertised.
        Moved nowhere.

10019.  September 8, 1998      LPSEC in APLNOT               Chris
        Added the upcoming leap second for December 31 1998.
        Moved nowhere.

10020.  September 8, 1998            GPSDL                   Chris
        Added voluminous diagnostics at PRTLEV 2. Also added a missing
        call to OGPTAB in TECMOD.
        Moved nowhere.

10021.  September 9, 1998        CLCAL, SN2CL                Eric
        Put the force subbaray to 0 option back into CLCAL including
        subroutine SN2CL and the help file.  With the new way of
        applying cal's, now debugged I hope, this should work.
        Moved nowhere.

10022.  September 9, 1998    $APGOOP/CCEDT.FOR(.HLP)        Leonia
        Craig Walker asked to add an option of cutting components.
        Now for each component, all components within +-CPARM(3)
        in X and +-CPARM(4) in Y (in arcseconds) are summed.
        The flux density test (CUTOFF) is then applied to the summed
        flux density.
        The HELP file has been updated.
        Moved nowhere.

10023.  September 10, 1998     $QPGOOP/OMFIT.FOR             Ketan
        Fixed user-encountered bugs with the simple self-cal mode.
        Added hooks for fitting multiple sources simultaneously.
        It is now no longer necessary to specify the source name
        when ultiple sources have not been selected.  At user-
        request, added option for writing output data set with only
        model instead of data-model.  All the model-types in OMFIT
        are automatically now available for generating fake data.
        This reproduces all the functionality of UVMOD except noise
        generation, weight modification, and the exponential disk
        [EXPD] type (ive never had a request for that one...).  OMFIT
        additionally allows an arbitrary number of model components
        to be added simultaneously instead of one at a time.  OMFIT's
        'MAS' and 'ZEE' model-types allow components with spectral
        profiles.  The 'POL' and 'ZEE' model-types allow components
        with polarization properties.  An almost-complete test suite
        of simulations is available to test that OMFIT does produce
        the correct results for each model-type and for the self-cal
        modes.  Enough already...
        Moved nowhere.

10024.  September 11, 1998        Fitting                   Eric
        IMFIT, JMFIT, and SAD had trouble with images that have no Clean
        Beam parameters.  They put out 0.0 for error estimates under
        that circumstance.  Fixed them not to do so.  Also fixed math
        routines in SAD that seemed able to try to take EXP{+128}.
        Changed IMFIT and JMFIT to get parameters in a normal way.
        Getting them with an array with indicies that have to change all
        the time is bad.
        Added option to use a beam-smeared Clean Beam as the initial
        guess and the Clean Beam for deconvolution.  The user must
        provide the ratio of the bandwidth to the center frequency which
        will be used to scale the FWHM of a Gaussian smearing function.
        Wrote RECONV, a routine to convolve two Gaussians, and added
        BWSMEAR to POPSDAT and NEWPARMS.
        Moved nowhere.

10025.  September 16, 1998               FRQUPD                 Eric
        Used the wrong format number causing it to blow up on error.
        Also repeated formats...
        Moved nowhere.

***********************************************************************

        15OCT98 as NEW

***********************************************************************


10026.  September 20, 1998        $QPGOOP/OMFIT             Ketan
        Indexing error caused SN table time-tags to be off by one
        solution interval when self-calibrating data.
        Moved from TST tomorrow.

10027.  September 21, 1998        $QPGOOP/OMFIT and HLP     Ketan
        Indexing error caused covariances between self-calibration
        parameters to be ignored - slowing convergence when
        self-calibrating data.  Also loosened convergence criteria
        until self-calibration error-bars are properly sorted out.  The
        weights reported in the SN table may not yet be correct.
        Moved from TST this date.

10028.  September 21, 1998          SPLIT                      Eric
        Changed
        INDXIN   To return -1 when there is no error except that no
                 matching index record is found
        UVGET    To handle the -1 return from INDXIN
        SPLIT    To handle -1 returns from UVGET better (keep going if
                 looping over subarray, else go on to next source).
                 Also to not send subarray 0 into UVGET at all.  Changed
                 default for NPOINTS to all channels.  Fixed count of
                 channels averaged to apply to FQ table values.
        SPLIT    Fixed help for new NPOINTS default.
        DATCAL   Changed logic counting samples so that those either
                 previously flagged or flagged by gain would be known as
                 dead.
        Moved to 15OCT98 this date.

10029.  September 21, 1998          TVFLG                      Eric
        There were several arrays of 5000 meant to handle #subarrays *
        #baselines.  Changed these to 15000 for Frazer.
        Moved to AOC today in SUL and to 15OCT98 this date.

10030.  September 22, 1998        $QPGOOP/OMFIT              Ketan
        Strange typo introduced yesterday is now fixed.  Also, found an
        array out-of-bounds condition that was only triggered for large
        self-calibration problems.
        Moved from TST this date.

10031.  September 22, 1998          FITLD                       Eric
        Added comments in DOCONCAT section about setting OUTSEQ=0 for
        concatenating.
        Moved to 15OCT98 this date.

10032.  September 22, 1998          UVCOP                       ERic
        Selecting by source in the CL copying can cause problems with CL
        tables that are not set up well wrt the sources being copied.
        Changed it to call CLSEL with 0 for the number of selected
        source (which means no selection applied).
        Moved to 15OCT98 this date.

10033.  September 30, 1998          $QPGNOT/KRING.FOR          Ketan
        Fixed a typo that prevented multi-band delay solutions from
        being transferred to all IFs in the solution table.  This
        only affected the 'SMBD' and 'MBD' OPTYPES.
        Moved from 15APR99 this date.

10034.  September 30, 1998     $HLPFIL/SAD.HLP           Ketan
        At user request, added missing description of DPARM(6) to
        inputs section of help file.
        Moved from 15APR99 this date.

10035.  September 30, 1998     $QPGOOP/OMFIT.FOR         Ketan
        Squashed some bugs, added some new ones.  Fixed SN table
        writing routine.  I was writing out each solution twice with
        different times.  Also, fixed the writing of GAINS model info
        to the SN table so that GAINS model solutions can be used with
        other AIPS tasks via the SN table.  At user request, I added a
        new model, the BLOB model.  This model allows for a Gaussian
        component with variable position.  Currently, the only linear
        variability with time is implemented.  This could easily be
        generalized to non-linear variations with time, frequency,
        channel, IF, etc. [any requests?]
        Moved from 15APR99 this date.

10036.  October 8, 1998       $APLAXLIN/various         Pat
        Placed the APLLINUX versions of ZGRLHI, ZGRLTC, and ZPRMPT in
        APLAXLIN to test them with the new readline v2.2 library.
        Readline now works under this architecture too.
        Moved from 15APR99 this date.

10037.  October 8, 1998       $AIPSPUBL/AIPSMEM101.TEX    Ketan
                              $AIPSFIG/AM101[A,B].EPS
        Fringe-fitting memo is now checked in.

10038.  October 8, 1998       $QPGNOT/KRING.FOR           Ketan
                              $HLPFIL/KRING.HLP
        New SNR calculation has been moved into place in KRING.  The
        HLP file now reflects the new calculation, proper references
        to the Schwab and Cotton paper, AIPS MEMO 101, and
        fringe-fitting now in explain section of HLP file.
        Moved from 15APR99 this date.

10039.  October 16, 1998      $QPGNOT/CVEL               Leonia
        CVEL has not worked in 15OCT98 and 15APR99 if SUBARRAY=0 is
        used. SUBARRAY has not been recalculated to 1 as it is written
        in HELP. I added this recalculation.
        Moved from 15APR99 this date by Pat Murphy.
