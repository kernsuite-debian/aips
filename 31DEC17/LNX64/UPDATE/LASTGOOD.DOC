;-----------------------------------------------------------------------
;  Copyright (C) 2016-2018
;  Associated Universities, Inc. Washington DC, USA.
;
;  This program is free software; you can redistribute it and/or
;  modify it under the terms of the GNU General Public License as
;  published by the Free Software Foundation; either version 2 of
;  the License, or (at your option) any later version.
;
;  This program is distributed in the hope that it will be useful,
;  but WITHOUT ANY WARRANTY; without even the implied warranty of
;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;  GNU General Public License for more details.
;
;  You should have received a copy of the GNU General Public
;  License along with this program; if not, write to the Free
;  Software Foundation, Inc., 675 Massachusetts Ave, Cambridge,
;  MA 02139, USA.
;
;  Correspondence concerning AIPS should be addressed as follows:
;         Internet email: aipsmail@nrao.edu.
;         Postal address: AIPS Project Office
;                         National Radio Astronomy Observatory
;                         520 Edgemont Road
;                         Charlottesville, VA 22903-2475 USA
-----------------------------------------------------------------------
     This file must be used to record any changes made to the Master
version of AIPS kept in SOCORRO.  An entry is:

   line 1:   Date Program name Your name
   line 2:   What was done (may span multiple lines)
   line n-1: Where has this change been moved (e.g. 15JUL94, nowhere)
   line n:   Blank

 The details of line 1 are important since programs are used to find
 specified strings and do conversions on them.  It MUST be typed as
 follows: 1 blank, 4 digits, a period, two blanks, then the Month,
 day, comma, year, some space, a title, some more space, your name.


***********************************************************************
***********************************************************************

                 Changes while 31DEC17 is TST

***********************************************************************
***********************************************************************

14939.  November 30, 2016         Version update               Eric
        Changed $APLSUB/GETRLS.FOR. $INSUNIX/INSTEP1,
        $SYSPERL/install.pl, $SYSPERL/update.pl, $SYSPERL/ZXHLP2.PL,
        $SYSPERL/LaCook.PL, $UPDUNIX/UPDCONTROL,
        $SYSUNIX/AIPSPATH.CSH, $SYSUNIX/AIPSPATH.SH
        to make 31DEC17 instead of 31DEC16 - also fix dates in
        install.pl.
        Moved nowhere.

14940.  December 1, 2016             PCASS                     Eric
        NEW TASK: Uses pulse-cal amplitudes and, optionally, residual
        phases, to compute bandpass records for each calibrator scan.
        They look like proper bandpass things but remain to be tested
        against real data.
        Moved to 31DEC16 this date.

14941.  December 2, 2106          PCASS                  Eric
        The handling of scans and PC records outside of any scan
        needed significant improvement.  Also the BP table requires
        the max antenna number in its header or DOBAN > 0 will abort
        with a nasty set of dynamic memory failure messages.  Added
        option to treat the PC amplitudes as power or (default) as
        voltage.  Quick tests suggest that I do not know which is
        right.
        Moved to 31DEC16 this date.

14942.  December 5, 2016          UVFLG                 Eric
        The shadowing function used variable DEC for computing the W
        term.  Unfortunately, DEC is the header declination in degrees
        which is zero for multi-source and which needed to be in
        radians for the computation.  Changed it to use DECEPO which
        is correct in all cases.  Changed the inputs section of the
        help file to clarify the meaning of APARM(5) = diameter of the
        antennas to be flagged in meters.
        Moved to 31DEC16 this date.

14943.  December 5, 2016           IMAGR                 Eric
        Added info to help file re ANTENNAS and BASELINE.  Some users
        are apparently confused by the wide-spread usage of these two
        adverbs in AIPS.
        Moved nowhere.

14944.  December 12, 2016          VLANT                 Eric
        The VLA has had an issue in the on-line atmospheric delay.  It
        was wrong from IAT August 9 to Nov 15, 2016.  I have added
        routines to correct for this following a formula from Barry
        Clark to VLANT which users should use first on their data and
        which writes a new CL table anyway.  The routines check the
        observation dates and only do the correction if it is needed.
        I also added a little-used adverb to let the user turn off
        either this elevation correction or the antenna position
        correction with the default to do both when appropriate.
        Note that the error is a delay error but it is a function of
        time (elevation and azimuth) and of source so the full phase
        correction enters at each IF.  The delay correction itself is
        small at elevations > 20 degrees or so but the phase
        correction matters even at rather higher elevations.
        Moved to 31DEC16 this date.

14945.  December 15, 2016          VLANT                 Eric
        Vivek has determined that there was in fact only one time
        interval and that the approximate best value for the
        correction is -1.0E-15 sec/m.
        Moved to 31DEC16 this date.

14946.  December 15, 2016        RFLAG, REWAY             Eric
        Added some general advice (from Fraser) to the help files for
        these tasks.  There are very many knobs and most can be
        ignored.
        Moved to 31DEC16 this date.

14947.  December 16, 2016             PCNTR              Eric
        Changed PCNTR adding DOFRACT adverb to make the polarization
        lines fractional polarization rather than total.  New adverb
        in POPSDAT and NEWPARMS with new help file.  Changed AU2A
        (PLGET) and AU8A (EXTLIST) for change in adverbs.  Changed
        help to allow DOVECT to go up to 4.  Task only cares that it
        is > 0, but sets it to 1, 2, or 3 depending on where the
        vectors come from.  This lets PLGET; GO work.
        Moved nowhere.

14948.  December 21, 2016         AIPSLetter             Eric
        The last 31DEC16 aipsletter was released: LET16B .TEX, .PS,
        .PDF files.
        Moved everywhere since in $AIPSPUBL.

14949.  December 22, 2016          UPDCONFIG             Eric
        VALEN uses rsync so does not need cvs.
        Moved to 31DEC16 this date.

14950.  December 27, 2016        TVSPC, Memo 120         Eric
        Changed TVSPC to display optionally a "spatial" (XYf) cube in
        grey-scale in a quadrant of the screen.  This lets the user
        look at spectra at a pixel and images at a channel with a
        surprisingly fast interactivity.  Updated the AIPS Memo 120
        describing TVSPC as well.
        Moved nowhere.

14951.  December 28, 2016          SETFC                 Eric
        Changed it so that BOXFILE=' ' will direct output to the
        message screen/file.  That way one does not have to create a
        disk file if one does not want to.  Field messages are at
        level 4, box messages at level 2.  One can then PRTMSG only
        the field ones if one wants.
        Moved nowhere.

14952.  December 29, 2016              UVFRE              Eric
        Changed help file header so that it will be listed under
        spectral.
        Moved nowhere.

14953.  December 30, 2016            REWAY              Eric
        Added statistical print out to help find reasonable ranges of
        weights and pin-point odd baselines/IFs/Stokes.
        Moved nowhere.

14954.  January 3, 2017           CALIB                Eric
        Added adverb DOHIST.  If DOHIST >= 0, a full history is
        written to the input file even if an output file is written.
        If DOHIST < 0, the task writes a full HI file to the input if
        no output is written or a short history if one is written.
        The latter was the standard previously.
        Moved nowhere.

14955.  January 4, 2017           POSSM                Eric
        The help claimed that correlation functions could be labeled
        in seconds (actually milli seconds or less) but the code went
        to trouble to turn off the option.  Changed to allow it using
        Delta_t = 2 * Nchan / Delta_f.
        Moved to 31DEC16 patch this date.

14956.  January 6, 2017         ATLOD                 Eric
        My error setting up TAPIO - worked for real tapes which I
        apparently had some time ago, but failed for disk files.
        The LUN tells TAPIO whether it is a real tape or a disk file.
        Moved to 31DEC16 this date.

14957.  January 10, 2017        EVAUV                 Eric
        Added all of the calibration and data selection adverbs -
        forcing a sort-of CALCOP to a scratch file.  Also added
        CELLSIZE which is used when SMODEL is set in order to make a
        usable histogram versus radius plot.  Added more tests to skip
        plots that are not available (e.g. image histogram when SMODEL
        is set).
        Moved nowhere.

14958.  January 12, 2017          CCRES               Eric
        CCRES ignored blanking and so could add a component to the
        magic value making it no longer magic, just very large.  It
        would also rescale magic blanks even if no CCs touched the
        blanked pixel.  Also changed the default OUTCLASS and reworded
        some in the help file.
        Moved to 31DEC16 this date.

14959.  January 13, 2017            NANS                Eric
        Changed it to do both UV and MA files.  In the latter, it does
        not look for magic blank values as they are "normal" and
        handled correctly (we hope).
        Moved nowhere.

14960.  January 17, 2017         UVIMG                 Eric
        Added DPARM(9) to let empty pixels be zero rather than magic
        blanks.  Added stuff from DPARM to history file.
        Moved nowhere.

14961.  January 18, 2017          EVAUV                 Eric
        When I changed EVAUV to apply calibration and selection to
        copy to a scratch file, the header needed by most of the steps
        was the header of the scratch file.  But the plot files needed
        the initial uv data set header.  Added code to keep and use
        that header in making plot files.  This bug destroyed the
        header info of the input file.  Also dropped checking on
        Stokes values - leaving that to the calibration/selection
        code.
        Moved nowhere.

14962.  January 19, 2017           UVIMG                Eric
        The Hermitian property should always be used except when the
        two samples will fall on top of each other (normal baseline
        and/or projected baseline length and/or time as the 2 axes).
        Changed code to do this and count the samples in the grid
        where both Hermitians fall on the grid so as to make the
        reports more understandable.
        Moved nowhere.

14963.  January 26, 2017            UVPLT              Eric
        Changed the binning option to use double precision - there are
        too many numbers being summed for single precision to be
        accurate.  Changed the task to make TV plots always as an
        array in memory and then loaded to the TV.  Also changed it to
        make plot file plots as an array in memory unless the user
        says not to do so.  (Small plots or ones requiring great
        accuracy might be better done the old way which remains
        available.)  Note that the labeling and the plot of the binned
        results are done the old way always and are not part of the
        "image".  That means that one can still modify the PostScript
        file from LWPLA fairly easily.  The new option requires that I
        add the DOACOR adverb to encompass the old usage of BPARM(10).
        Moved nowhere.

14964.  January 26, 2017       EXTLIST, PLGET           Eric
        Changed AU8A and AU2A for the added adverb in UVPLT.  A really
        old (2003?) version of UVPLT has fallen off of the EXTLIST
        support.
        Moved nowhere.

14965.  January 27, 2017           DISKU                Eric
        Changed the disp space counters from integer to double
        precision.  The integer could overflow at 2 Terabytes.
        Moved nowhere.

14966.  January 27, 2017          MOVE                  Eric
        Changed to test OPCODE 'MOVE' for the in and out disks being
        the same.  It switches to copy with a message if not.
        Added OPCODE='DUPL' which allows one to write a file with a
        duplicate name although not on the same disk.  This will allow
        copying a data area while preserving file names.  It is
        potentially dangerous if the old data area remains in service
        include the DUPLed files.
        Moved nowhere.

14967.  January 30, 2017           UVPLT                Eric
        Removed debug statement that caused failures for TVs wider
        than 2000 pixels.  Changed to allow the slow methood for the
        TV if BPARM(10) > 1.  It can be instructive.
        Moved nowhere.

14968.  January 30-31, 2017           DFTPL                Eric
        Did not get the frequencies correct when BIF > 1.  Also messed
        up the top label if BIF=EIF or BCHAN=ECHAN.
        Moved to 31DEC16 this date.

14969.  February 2, 2017             FRPLT                Eric
        Reworded and added to the help file introduction.  Added
        BPARM(5) and (6) to set the X range optionally and only if
        APARM(2) > 0.
        In the Fortran, moved the adjusting of SOLINT until after the
        start time is adjusted to match the data.  Changed the number
        of points plotted up by 1 and round up rather than down to
        make the number even.  Save/restore the input values of APARM
        and BPARM before fixing them to match a plot in the plot file
        header.  Set XMIN and XMAX from the plot or from the user and
        do the plotting using them.
        Moved nowhere.

14970.  February 2, 2017              TVALL               Eric
        TVALL used J as a temporrary variable.  Using GG will mess up
        scripts less.
        Moved nowhere.

14971.  February 3, 2017          ZEMAN                Eric
        Debug arrays left in code.
        Moved nowhere.

14972.  February 4, 2017           CATINI              Eric
        The catalog header init routine set the epoch to 1950 -
        changed to 2000.  Fixed lower case letter too.
        Moved nowhere.

14973.  February 9, 2017           EVAUV              Eric
        CELLSIZE was left out of help file.
        Moved nowhere.

14974.  February 13, 2017         XGAUS, ZEMAN             Eric
        Changed:
        XGINI   To add a keyword to indicate if the model is emission
                or absorption.  Changed amplitude units if
                absorption.
        ZEINI   To add a keyword to indicate if the model is emission
                or absorption.  Fixed Gaussian amplitude units in
                absorption.  Added column for XGAUS baseline
                parameters which should have been there all along.
                Changed it to be forgiving about the old format file.
        TABZE   Changed call sequence to include XGAUS baseline
                parameters.  Read/write them if the column exists.
        XGAUS   Test pre-existing XG for emission mode.  Changed call
                sequence to XGINI.  Dropped commented-out lines.
        ZEMAN   Carry XGAUS baseline in a common along with the
                Gaussian parameters.  Change call sequence to XGINI,
                ZEINI, and TABZE.  Test pre-existing XG and ZE files
                to make sure they are in emission mode.  Include the
                baseline parameters in the Ipol model plot.  Dropped
                DOMAX which did not work when false.
        Moved nowhere.

14975.  February 13, 2017           FRPLT              Eric
        Changed formats to allow for more spectral channels.
        Moved nowhere.

14976.  February 15, 2017           POPS               Eric
        When certain verbs are used in FOR loops, WHILE loops, or
        IF-THEN-ELSE constructs the "optional" immediate numeric
        arguments are no longer optional but required.  Else those
        verbs take a necessary control value from the stack and
        destroy the control.  Affected help files include
        POPSDAT (TVALL proc), FOR, TO, BY, EHEX, GROFF, GRON,
        HUEWEDGE, IMWEDGE, REHEX, TVOFF, TVON, TVWEDGE, WHILE, IF,
        THEN, ELSE.
        Moved nowhere.

14977.  February 16, 2017             PLOTR           Eric
        Added digits to the model fit rms display.
        Moved nowhere.

14978.  February 16, 2017           XG2PL              Eric
        Changed to new call sequences for XGINI, ZEINI, and TABZE.
        Changed to handle absorption spectra and Zeeman fits.  Added
        option to display absorption I polarization as optical depth
        instead of flux density.
        Moved nowhere.

14979.  February 23, 2017        XGAUS, ZEMAN              Eric
        Changed:
        ZEINI    Pre-sursor comments about absorption keyword - new
                 value => gain method
        TABZE    Corrected error handling Gaussian baseline parameters
        XGAUS    Made special versions of GRPOLY to handle images made
                 with pixel replication - otherwise the polygon
                 drawing was done with narrow line which were almost
                 invisible and then polygon fill did not always come
                 out right.
        ZEMAN    Changed to display one-pixel fitted images.
        Moved nowhere.

14980.  February 23, 2017          AGAUS, ZAMAN            Eric
        Made absorption-line versions of XGAUS and ZEMAN.  The math
        differs in so many places that it was best not to combine the
        two versions in a single task even for the Zeeman splitting.
        AGAUS fits Gaussians to the optical depths but fitting the
        observed lines.  This should handle relatively high optical
        depths.  The math for the Zeeman spliting also changes.  A
        special mode for the leakage gain when the Vpol cube was made
        from continuum subtracted visibilities is also offerred.
        Moved nowhere.

14981.  February 23, 2017           XG2PL                 Eric
        Changed to handle outputs from all 4 fitting tasks including
        the special gain mode added to ZAMAN (for Vpol from continuum
        subtracted visibilities).  An option to plot optical depth
        spectra rather than the observed Ipol is also available.
        Moved nowhere.

14982.  February 23, 2017         AIPS Memos              Eric
        A new AIPS Memo 122 has been written to describe AGAUS and
        ZAMAN, plus changes to XG2PL.  A section on systematic errors
        in Gaussian widths and Zeeman splitting is also presented.
        AIPS Memo 118 was modified to mention 122 and to remove adverb
        DOMAX which was found not to work.

14983.  February 24, 2017           DBCON              Eric
        A BAD ERROR was made May 28, 2014 in DBCON.  If the 2 data
        sets differed in frequency (after shifting of the reference
        pixel), the U-V-W of the second data set was scaled by the
        ratio of the frequencies.  This is not correct - the u-v-w
        with no scaling are in wavelengths at the observation and
        should not be changed.  (A shift of reference pixel does
        require a modest re-scaling based only on the frequencies in
        the particular data set.)  I have restored the correct code in
        DBCON and added a loud warning message to the Fortran and the
        help file.  The output of mixed frequencies should NEVER EVER
        be processed by a task that needs to change U-V-W since it
        cannoy fully know the frequencies to use.  The most obvious of
        these is UVFIX.
        Moved to 31DEC16 this date.

14984.  February 24, 2017          PRTUV               Eric
        Corrected it to take BIF into account for the frequency it
        prints.  It did the channel but not the IF.
        Moved nowhere.

14985.  March 1, 2017          DFTPL               Eric
        Corrected addressing of visibility data - pointers need to be
        set after UVGET ('INIT'..) not before.  Led to IFs > BIF being
        ignored.  Added STOKES to adverbs in help and Fortran and got
        rid of the messy selection of correlator to plot.  Trapped
        actual plotted RA and DEC and added that info to plot header.
        Moved pointer fix to 31DEC16 28 February..

14986.  March 1, 2017            DFTIM                  Eric
        NEW TASK: makes an image of the DFT at a selected coordinate
        from visibility data as functions of frequency and time.  It
        can also make an error image.  The data selection, flagging,
        and calibration adverbs are offerred as well as regular
        frequency averaging (NCHAV) and time averaging per pixel.
        Moved nowhere.

14987.  March 1, 2017         TYAPL, TYSMO              Eric
        Added paragraph to TYSMO and TYAPL help files emphasizing the
        need to have valid post-detector gains as well as Pdif and
        Psum for use by TYAPL.
        TYAPL in most places defended itself against blanked
        post-detector gains.  Added that defense to the few places
        missing it.
        Moved nowhere.

14988.  March 1, 2017              VBGLU                Eric
        changed it to glue together multiple versions of any extension
        tables it finds (except FG tables).  All input versions n go
        to output version n.  This is essential for ANtenna tables
        since they connote subarrays.  It may be useful for other
        tables but also offers opportunities for mischief.  Reworded
        help file introduction to modernize and to mention the tabls
        issue.
        Moved nowhere.

14989.  March 3, 2017             ELFIT                Eric
        NEW TASK: Fits polynomials to table data as functions of
        elevation, zenith angle, hour angle, parallactic angle, and
        azimuth.  Rick is using it for Psys vs zenith angle.  It is a
        simplified SNPLT with the added fitting.
        Moved nowhere.

14990.  March 6, 2017            ELFIT                  Eric
        Some arrays were only 1000 - made much larger and added tests
        to avoid overflow.
        Moved nowhere.

14991.  March 7, 2017            Maximum disk number     Eric
        Changed the maximum disk number to 71:  Changed
        ZDCHIN     $APLGEN: use characters 3 and 4 of disk logical
        ZPHFIL     $APLGEN: use characters 3 and 4 of disk logical
                   volume limit test changed
        ZPHOLV     $APLGEN: use characters 3 and 4 of disk logical
        DSKASS     $AIPSUB: use characters 3 and 4 of disk logical
        REBYTE     $AIPNOT: use characters 3 and 4 of disk logical
                   and use DA1Y and DA1Z for scratch areas
        DADEVS.SH  $SYSUNIX: Use $DA0$ehex for < 36, $DA$ehex for
                   greater  and set limit to 71.
        DADEVS.PL  $SYSUNIX:  Use $DA0$ehex for < 36, $DA$ehex for
                   greater  and set limit to 71.
        DDCH,INC   $INC: several arrays (35) -> (99)
        DDRC.INC   $INC: (36) -> (99)
        DISK.INC   $INC: (36) -> (99)
        ZFREE      $APLGEN: several larger arrays
        ZFRE2.C    $APLUNIX: DA0n needs if statement with a new DA1n
        ZFRE2.C    $APLMACIN: DA0n needs if statement with a new DA1n
        ZCREAT     $APLGEN: bigger buffers to call ZFRE2.
        DDBGR      $AIPNOT: corrected to use ZHEX10 to parse DAnn
        OPTIMIZE.LIS  $SYSUNIX: restore APCLN at level 1 opt only
        Major COMRPL required, relink everything
        Moved nowhere.

14992.  March 7, 2017              PARANG               Eric
        PARANG     Did not recognize EVLA as having the same
                   attributes as the old VLA (same parallactic angle
                   for all stations).  Depends on the array name being
                   set in DANT.INC and uses the FILLM final array
                   center values.
        Moved nowhere.

14993.  March 7, 2017          AIPS Memo 122             Eric
        Fixed some typos and corrected the Zeeman absorption math.
        The answers were correct but the development was all messed
        up.
        Moved nowhere.

14994.  March 8, 2017                  BPASS            Eric
        The normalization routine for BPASSPRM(10)=1 had an error
        affecting linearly polarized data.  The normalization was
        likely to be very wrong for some IFs and polarizations.
        Moved to 31DEC16 this date.

14995.  March 9, 2017             ELFIT                Eric
        Added APARM(2) and (3) to allow user control of fiducial
        points when printing model values after fit.
        Moved nowhere.

14996.  March 9, 2017          AGAUS, ZAMAN           Eric
        Created run-time help files HLPAGAUS.HLP and HLPZAMAN.HLP and
        fixed a couple of references in the two tasks to specify the
        new (overlooked) run-time helps.
        Moved nowhere.

14997.  March 14, 2017             DBCON               Eric
        The routine that merged AN files did not allow for the second
        data set to have antennas not in the first.  DBCON cannot
        renumber antennas so the two must be compatible but antenna n
        can occur in the second file even if it does not occur in the
        first.  This required keeping track of the used antenna
        records from data set 2 and what antenna numbers have already
        been used and then adding a loop to read any unused records
        from the 2nd AN file and potentially writing them to the
        output AN table.  Note - the task keeps going even if antennas
        do not match up - but the results amy not be desirable.  The
        task MATCH is now recommended on various disagreement
        conditions.
        Moved nowhere - this is a bit messy for a patch.

14998.  March 14, 2017             FITLD               Eric
        Corrected ANTNAME usage so that it is not ignored when
        concatenating.  Instead, it is tested and the pre-existing
        file will override the users' ANTNAME specification.  This
        can be very bad so warnings were added to the help file on
        ANTNAME and DOCONCAT.  The special ANTNAME='VLITE','' will
        generate 28 VLITE-like names in order 'V0','V1',...'V27'.
        Moved nowhere.

14999.  March 17, 2017                FITLD               Eric
        The VLITE names will use EHEX rather than decimal - changed
        the current implementation: V0...V9, VA, VB, ...
        Moved nowhere.

15000.  March 17, 2017           Holography              Eric
        The date of observation and the antenna number did not appear
        in the final PANEL outputs.  Changed UVHOL to add DATE-OBS to
        the output text file in the first line.  Changed HOLOG to pick
        up the antenna and date-obs from that line and to use them to
        set TELESCOP and DATE-OBS in the output image headers.
        Changed PANEL to pick these parms up from the header and put
        them ina new first line in the text outout.
        Moved nowhere.

15001.  March 21, 2017        Spectral Index              Eric
        I insisted that spectral index was based on 1 GHz and then
        became inconsistent in its application.  Those tasks that
        use Rick Perley's calibrator lists (CLIP, SETJY, UVFND,
        BLCHN, BPASS, CPASS, FTFLG, SPFLG, UVPLT) are obliged to stay
        on 1GHz as a reference to match the lists including when
        SPECINDX and SPECURVE are specified by the user.  But other
        tasks can be more flexible.  I note that IMAGR and OOCAL
        already read the reference frequency for spectral index from
        the spectral index images and use that in PBUTIL.  That
        leaves:
        SETJY      Help - fixed wording
        POPSDAT    Help - make new adverbs SPECFLUX, REFREQ
        NEWPARMS   RUNSYS - make new adverbs SPECFLUX, REFREQ
        UVMOD      Help - clarify the meaning of the flux, spectral
                   index, and curvature to be the header reference
                   frequency.
        UVMOD      Fortran - changed a bad kludge that sort of used
                   1GHz for the curvature, but set the fluxes at the
                   header reference frequency.  Now it is the header
                   frequency for all.
        EVAUV      Help - add SPECINDX, SPECURVE to be used when
                   SMODEL is specified.  Also add automtic fitting
                   when SMODEL < 0.
        EVAUV      Fortran - add adverbs, pick up spectral index and
                   fit it from FNDSPX if requested, display adverbs
                   used, in EVADFT (local VISDFT) add SMODEL with
                   spectral index code to do a channel at a time in
                   both subtraction and division.
        SPIXR      Help - add REFREQ to specify the desired frequency
                   to shich the output images are computed.  0 -> 1
                   GHz the old value.  < 0 -> header frequency
        SPIXR      Fortran - moved parameter setting so that output
                   header frequency will be REFREQ.  Compute frequency
                   array relative to REFREQ rather than 1 GHz for
                   doing the fits.
        SOUSP      Help - added REFREQ adverb as SPIXR
        SOUSP      Fortran - added REFREQ and do all scaling wrt
                   REFREQ as opposed to 1 GHz.  Got tricky in plotting
                   the X axis but worked it out.
        FNDSPX     Fortran routine made the mistake of leaving a loop
                   counting valid FLUX values on the first invalid.
                   This can happen due to flagging etc - the counting
                   loop must go over all IFs
        Moved UVMOD, FNDSPX, some of SPIXR,

15002.  March 27, 2017         OOCAL, OOFRING            Eric
        Added NEW PROCEDURE OOFRING in the OOCAL.001 RUN file.
        It is like OOCAL but does FRING rather than CALIB.  Changed
        OOCAL help file dropping a bunch of adverbs that calibrate and
        select the data to be processed - since OOSUB cannot do that.
        Added paragraph to help file pointing this out and requiring
        that the data be fully selected in advance.  Also added INDXR
        to procedure and actions to preserve the input values of CALIB
        and FRING and INDXR because the procedures must change them.
        Changed OOSUB since on multi-source files the SU table is
        copied in advance of the later extension file copies - like
        the FQ and AN tables.  Changed low-level routine TABCOP since
        it did not make messages about a bunch of its many possible
        errors.
        Moved nowhere.

15003.  March 28, 2017         FITLD IMLOD UVLOD         Eric
        The number parser caused these tasks to quit on bad numbers
        when the keyword is not structurally significant.  Changed
        them to report bad numbers but set the value to 0 except when
        reading number points on an axis, PCOUNT, GCOUNT, and other
        required and structural keywords.
        Moved nowhere.

15004.  March 29, 2017              HOLOG                Eric
        Swap X axis left to right so that we are looking at the
        antenna from the front (as we thought we were doing all
        along).
        Moved nowhere.

15005.  March 29, 2017        OOCAL IMFRING             Eric
        NEW PROCEDURE: IMFRING to take a CASA model image and break it
        into facets with Clean components to feed to OOSUB.  Changed
        OOFRING   help - drop SNVER adverb
        OOCAL     help - drop SNVER adverb, restore ICHANSEL adverb,
                  remove adverbs no longer used from help section
        IMSCAL    help - remove all adverbs no longer "used" by OOCAL
                  including CALSOUR, QUAL, CALCODE, SELBAND, SELFREQ,
                  FREQID, TIMERANG, SUBARRAY, DOCALIB, GAINUSE, DOPOL,
                  PDVER, BLVER, FLAGVER, DOBAND, BPVER, SMOOTH, and
                  CMODEL.
        IMFRING   help - new proc help has adverbs for IM2CC,
                  OOFRING.
        OOCAL.001 run file - add IMFRHIST proc to do IM2CC history to
                  input data set and enable call to OOFRHIST from
                  OOFRING.  Add proc IMFRING to do IM2CC, count output
                  images, invoke IMFRING, clean up images.  OOCAL and
                  OOFRING now clean out SN tables from temp file.
        Moved nowhere.

15006.  March 31, 2017               PANEL               Eric
        Added more explanatory text to the output to make sure that
        all conventions are fully described.
        Moved nowhere.

15007.  March 31, 2017       Perley-Butler 2017         Eric
        Rick and Brian have measured fluxes again and have now fits
        that cover the entire frequency range for standard sources and
        other fits for less standard sources which may be of use.
        Changed BPASS, CPASS, BLCHN, and PCAL to use the new values if
        the observation date is after Jan 1 2014.  They do only the 5
        standard calibrators (3C48, 3C138, 3C147, 3C286, 3C295)
        automatically but will use the fluxes in the SU table for
        other sources.
        SETJY   help - incremented the values of APARM(2) so that 0
                points at Perley-Butler 2017.  Document all the extra
                sources whose flux may be found even if they are not
                good calibrators (absent a decent model).
        SETJY   Fortran - made new larger tables of spectral index and
                possible sources.  The new sources (poor cals usually)
                have frequency ranges that are tested with a message
                for out of range.  Changed so that errors from GETFLX
                do not stop the processing just fill zeros.
        Moved nowhere.

15008.  April 5, 2017             UVIMG                Eric
        Changed it to allow NCHAV >= (EIF-BIF+1)*(ECHAN-BCHAN+1) to
        mean make a single plane using all the channels.
        Moved nowhere.

15009.  April 5, 2017              IRING                Eric
        Added FUNCTYPE='LG' to plot Y axis in log base 10 for the plot
        of mean values.  This lets us deal with severely centrally
        condensed things like UV distributions.
        Moved nowhere.

15010.  April 7, 2017        IRING, UVIMG                Eric
        Changed IRING to allow 10240 rings maximum.
        Fixed UVIMG addressing of channels - was wrong for new option.
        Moved nowhere.

15011.  April 12, 2017         SUBIM                Eric
        Added OPCODE 'SUM' for choices when XINC > 1 and/or
        YINC > 1.  It did min, max, and average but sum should have
        been included.
        Moved nowhere.

15012.  April 12, 2017         Slices                Eric
        Changed:
        SLICE     Corrected the buffer size parameter to match the
                  actual size.  The parameter was way small for big
                  slices.
        AU6E      The call to plot components had an incorrect
                  argument.
        SL2PL     Help file had small limits on BDROP and EROP.
        Moved nowhere.

15013.  April 12, 2017             DTSIM                Eric
        Bad addresses were used when there was no bandpass model.
        Changed DTSIM and DTBAND to check for index 0 and fill with
        zeros rather than whatever happened to be in RAM at the bad
        address.  Fixed potential failure in history also.
        Moved nowhere.

15014.  April 13, 2017               CLCOR               Eric
        While trying to trace a mysterious installation error
        (START_AIPS with AIPS_ROOT defined as /home/AIPS which is
        correct for the AOC only) I found a hard-coded path name in
        CLCOR for the JPL ephemeris file.  Corrected that code to use
        the normal AIPS file name - AIPSTARS:... and to translate that
        with ZPATH.  Changed JPLEPH to allow the incoming file name to
        be up to 256 characters rather than 80.
        Moved nowhere.

15015.  April 13, 2017             SLICE                Eric
        WaWa IO tripped me up - the buffer size sent in is in full
        words not AIPS "bytes".  Blew up badly when reading multiple
        rows.
        Moved nowhere.

15016.  April 13, 2017             history              Eric
        HISCOP took a failure of HICOPY too seriously - change to
        report failure at level 8 (not suppressed) but return 0 if new
        file okay.  HICOPY did not set error to 0 when read 0
        records.
        Moved nowhere.

15017.  April 19, 2017            IMAGR               Eric
        Added option of inverse taper with several statistical
        counters to display what was done.  Changed
        IMAGR    Pick up part of IM2PARM and pass on as INVERT
                 enahnce history in beam files
        QUVUTIL  Pick up INVERT and pass to UVWAIT as new argument
        UVWAIT   New call sequence, implement inverse taper plus
                 counting and average weight and sum of weight in
                 inverse taper region.
        Moved nowhere.

15018.  May 5, 2017             SETJY                 Eric
        A logic error caused the comparison of 2017 fluxes to 2013
        fluxes to be erroneous.  The actual fluxes stored in the SU
        table were fine.
        Moved nowhere.

15019.  May 8, 2017              PCLOD                Eric
        Corrected code to handle multiple concatenated files with
        multiple header lines each.  Added check on antenna name in
        each data line matching the one from the previous header (and
        changing if necessary with a message).
        Moved nowhere.

15020.  May 9, 2017              FITLD                   Eric
        VLITE antennas are named V1...V9, V10...V27 rather than the
        EHEX options previously suggested.
        Moved nowhere.

15021.  May 10, 2017             SETJY                   Eric
        Another residual line of code changed type 0 to -1 for data
        below 500 MHz.  We want to do that for types > 0 now, since
        Perley 2017 should work for low freq.
        Moved nowhere.

15022.  May 12, 2017              PCLOD                  Eric
        Round out the scan boundaries - PC records were just missing
        when they should not.
        Moved nowhere.

15023.  May 12, 2017                PCFIT                Eric
        Added time averaging under control of SOLINT.  It uses scan
        boundaries but also does not average over changes in antenna,
        source, and pulse-cal frequencies.  Therefore it does handle
        PC tables with multiple frequencies even if they are not all
        supported in the UV data set.
        Moved nowhere.

15024.  May 15, 2017               STUFFR                Eric
        The procedure was missing a semi-colon and needs to force
        INTYPE to 'UV' so that the ZAPs will work.
        Moved nowhere.

15025.  May 16, 2017               FRING                 Eric
        Corrected APARM(5) info in help file.
        Moved nowhere.

15026.  May 26, 2017               FILLM                 Eric
        Changed the positions equal test from 1.0D-6 (3.6 milli-asec)
        to 6.0D-6 degrees (~21 milli-asec) since coordinates do seem
        to shift a bit in some of these old data sets.
        Moved nowhere.

15027.  May 26, 2017               IMAGR                 Eric
        Changed QCLEAN to keep track of which field number set the
        current intensity range.  If it changes, the code will use
        the full range of the new field.  If it does not, the past
        behavior will be used (keep pix range unchanged unless the
        image range is too different).
        Moved nowhere.

15028.  June 2, 2017           1-liners                Eric
        Improved the 1-liners in the help files for CALRD, CALWR, and
        CALDIR.
        Moved nowhere.

15029.  June  6, 2017            PCAL                  Eric
        The source assignment with Perley 2017 was confused and bad
        values could result.  Led to bad solutions with DOSCALE set
        The evaluation of the flux at 1 GHz was wrong for low
        frequencies leading to bad solutions.
        Moved a similar fix to 31DEC16 this date.

15030.  June 7, 2017      RLDLY, CLCAL                Eric
        Discovered that CLCAL will re-reference the right-left delays
        all to zero if it does any re-referencing.  Made remarks in
        the RLDLY help file.
        Changed CLCAL to detect if an SN table was created by RLDLY
        and if so to block re-referencing.  If there is more than one
        SN table messages will appear noting any difference in
        creation task.  If any one is RLDLY, no re-referncing is done.
        Moved nowhere.

15031.  June 15, 2017          Solar cals                 Eric
        Changes to support Solar observations:
        The CD table gets two new columns giving the values of the
        Solar Tcals.  The SY table gets a columns indicating which
        type of Tcal one uses with that antenna and time.
        SYINI     Add column 3 = "CAL TYPE" an integet with 0 being
                  normal, 1 Solar, 2 ??.  All that column to be
                  missing.
        TABSY     Add CALTYP argument with default value out of 0.
        SYSEL     TABSY call sequence
        CDINI     Add 2 columns for SOLCAL1 and SOLCAL2 and allow
                  those columns to be missing.
        TABCD     Change TCAL from 2 per IF to 4 per IF always.
                  Return solar if present, blanked if not.  A solar
                  "value" of exactly 1.0 also returned blanked.
        CDSEL     Number columns, move TCAL values in IF change.
        GETCDS    Number columns, dimension of TCAL, loop over all 4
                  in error message and limit the number of same
        QEDIUTIL  Changed dimension of TCAL.  Added one more "random"
                  parameter to the SY data format and filled it with
                  CALTYP (reading from file if columns exists only).
                  Changed code to flag the time only when Psum, Pdif,
                  or Pgain are bad.  The Psys values are blanked on
                  those and also when Tcal undefined.
        FIXRL     TCAL dimension and swap Solar cals too, TABSY call
                  sequence
        LISTR     Pick up the type columns when needed and pass to the
                  gain average routine - select TCAL based on the
                  current value in that column.  Done several places.
        PRTSY     Change calls to TABSY, use CALTYP to slect TCAL
                  value
        SPLAT     Changed TABSY call and dimension of pointers
        SWPOL     TCAL dimension and swap Solar cals too, TABSY call
                  sequence
        SY2TY     TCAL dimension, TABSY call sequence, use CALTYP to
                  select which TCAL to use
        TACOP     Changed TABSY call and dimension of pointers
        TYAPL     Changed TCAL dimension, call sequence to TABSY.
                  It will fail if solar data are given to it.
        TYCOP     Dimension a proper TCAL and use it and the solar
                  values.  Call sequence of TABSY also.
        TYSMO     Change column pointers for SY table, pick up type
                  column.  Use it as needed to select TCAL values
        UVCOP     Changed TABSY call and dimension of pointers
        VLAMP     TCAL dimension, TABSY call sequence - solar had
                  better not be used
        ELFIT     pick up CAL TYPE and use when TCAL is needed
        SNPLT     pick up CAL TYPE and use when TCAL is needed
        SNIFS     pick up CAL TYPE and use when TCAL is needed.  Fixed
                  error zeroing max/min arrays.
        Help files:
        TYAPL     Do not use for solar data
        TYSMO     Set DOBTWEEN false for solar data!
        VLAMP     Does not work for data including the Sun.
        Moved nowhere.

15032.  June 15, 2017            SYSOL                   Eric
        NEW TASK: A version of TYAPL for SY tables and solar data.
        For the Sun it averages the visibility and weight scales over
        those antennas having Solar Tcals and then applies the average
        to those antennas that do not have Solar Tcals.  It does
        TYAPL exactly for regular sources.
        Moved nowhere.

15033.  June 15, 2017             CVEL                   Eric
        Corrected a DO loop that assumed there were 10 IFs - used in
        display only.  Changed warning for single source files to apply
        only to VLBA and EVN - they care about doing BP corrections on
        the fly.
        Moved nowhere.

15034.  June 16, 2017          ABOUT files              Eric
        Updated the tab completion file and about files on
        ADVERB  ANALYSIS  AP  CALIBRAT  CATALOG  FITS  IMAGE  IMAGE-UT
        INTERACT  MODELING  ONED  OOP  PLOT  POLARIZA  PROCEDUR
        SPECTRAL  TASK  TV-APPL  TV  UTILITY  UV  VERB  VLA  VLBI
        Moved nowhere.

15035.  June 20, 2017             MODAB                 Eric
        NEW task: makes a simple image model cube in I and V in either
        emission or absorption.
        Moved nowhere.

15036.  June 21, 2017              SQASH                Eric
        The task did not handle BLC and TRC correctly in the first two
        axes.  It worked with output plane size equal input plane size
        but not otherwise.
        Moved to 31DEC16 this date.

15037.  June 22, 2017                CookBook                   Eric
        Changed chapters:
        2    For change from 35 to 51 maximum data areas
        4    For SETJY, Solar calibration
        6    For PCNTR, TVSPC, AGAUS, ZAMAN, downplay Tektronix usage
        7    For DFTIM, TVSPC, AGAUS, ZAMAN, ELFIT, RMSD
        8    For TVSPC, RMSD, AGAUS et al.
        9    For PCASS, PCLOD
        13   To update numerous ABOUT files
        E    For REWAY, SETJY, IMSCAL, OOFRING, Solar cal
        Also chapters 0, I, J Recipe to match the changes
        Moved nowhere.

15038.  June 30, 2017            UVLSF                  Eric
        The task for no good reason called COPTAB twice for the BASFIT
        (continuum channel) output file.  This made a bad FQ table in
        particular and occasioned some error messages.
        Moved to 31DEC16 this date.

15039.  June 30, 2017              AIPSLetter            Eric
        Put back TEX, PS, PDF versions of June AIPSLetter.
        Moved nowhere.

15040.  July 3, 2017          SCMAP, SCIMG              Eric
        The call to the self-cal routine had variables in the wrong
        order, making the data array description messed up when
        there were not 2 IFs.
        Moved to 31DEC16 this date.

15041.  July 3, 2017           SCMAP, SCIMG              Eric
        Changed help files to emphaisize APARM(8) to allow negative CC
        components.
        Moved nowhere.

15042.  July 4, 2017              IMAGR                  Eric
        Added OVRSWTCH and FGAUSS to the allowed SHOW/TELL adverbs.
        Changed QCLEAN to pick up these adverbs from TELL and also to
        change IMAGRPRM(11), the multi-scale bias.  Changed IMAGR to
        prohibit any OVERLAP except >= 2 for multi-scale, blocking
        both OVERLAP < 2 and any OVRSWTCH.  Changed help file to
        enable these TELLs and to describe the TELL possibilities.
        QCLEAN also blocks OVRSWTCH and had a bad-things-are-happening
        change to OVERLAP 1 altered for multi-scale.  A bad format for
        "un-boxes" was also corrected.
        Moved nowhere.

15043.  July 5, 2017            VLBARUN                  Amy
        Added CLRTEMP after VLBAPANG, to solve occational BLEW TEMP C problem.
        set BOXFILE and OBOXFILE to '' for IMAGR runs.
        Moved nowhere.

15044.  July 11, 2017            PCAL                  Eric
        If the IF being copied to a scratch file had no data, the task
        left the ionosphere file open.  When the next IF was to be
        copied this caused a failure.
        Moved this fix to 31DEC16 this date.

15045.  July 12, 2017        AVSPC, NOIFS, UJOIN       Eric
        AVSPC and UJOIN both copied CD and SY tables in the global
        copy and then attempted to change their contents.  This would
        work if the format had not changed.  But it has.  Added CD and
        SY to the list of tables not to copy, leaving that to the
        change of contents step.  Added CD table reformating to
        NOIFS.
        Moved nowhere.

15046.  July 14, 2017            RSPEC                  Eric
        The previous usage in which BLC-TRC was an exclusion region
        was confusing.  Added DOINVERS adverb with now normal meaning
        - do statistics in BLC-TRC if DOINVER <= 0, outside BLC-TRC if
        DOINV > 0.  Also changed some logic that dropped BLC/TRC when
        the exclusion region covered nearly all of one axis.  Now it
        drops them when both axes are nearly completely covered and
        only on DOINV > 0.
        Moved nowhere.

15047.  July 15, 2017       TYAPL, PRTSY, VLAMP           Eric
        All 3 of these had an SYFSEL subroutine locally to apply flags
        to the SY table but had not had the number of columns in the
        SY table updated in the declarations.  Other tasks with SYFSEL
        had had this correction made earlier (UVCOP, SPLAT, TACOP).
        This led to copy errors in some of the architectures.
        MOved nowhere.

15048.  July 15, 2017               DBCON               Eric
        If the two frequency refernce pixels are in agreement, we
        should not change that unless requested to center REFPIX.
        Moved nowhere.

15049.  July 15, 2017           ABORTASK              Eric
        Added adverb NUMTELL to this pseudoverb.  This now allows a
        second AIPS session to stop a task from the another AIPS
        session.  This is useful when the task has locked up the input
        terminal that session.  Changed HELP files for NUMTELL and
        BORTASK and subroutine AU2.
        Moved nowhere.

15050.  July 20, 2017             TVSPC                Eric
        Added LABEL IMAGES? and CURVALUE options and suppressed the
        VERBOSE option.  Edited the help and run-time help files to
        add these options.  Memo needs to be done.
        Moved nowhere.

15051.  July 20, 2017  VLBAUTIL, VLBAEOPS.HLP, CLCOR.HLP    Amy
        URL for the EOPs file changed.  Fixed in the VLBAEOPS script
        and VLBAEOPS.HLP and CLCOR.HLP files.
        Moved nowhere.

15052.  July 20, 2017              WETHR                  Eric
        Changed DWXV.INC which specief a record length one too short.
        There are 13 columns but time is double precision so length is
        14.  Changed WETHR which used a very bad way to decide whether
        time is double or single precision in the table.  Could affect
        APCAL, FILLM, FITLD, INDXR as well as WETHR.
        Moved nowhere.

15053.  July 21, 2017               ANREFM                 Eric
        The subroutine had ways to generate an error message and leave
        without closing open file(s).  ANTINI wants to procede even if
        errors but the open files blocked that.  Fixed ANREFM to close
        any open files.
        Moved nowhere.

15054.  July 21, 2017               WETHR                 Eric
        Added option with FACTOR < 0 to connect the points with
        lines.  Points can be arbitrarily small in that case.
        Moved nowhere.

15055.  July 21, 2017               UVHOL                   Eric
        the task was not careful with antenna numbers and so managed
        to have them wrong when an unwanted baseline ended the group
        to be printed.  Since autocorrelations are allowed for some
        reason, the amplitude ended negative (potentially) and the
        phase pure zero in parallel hands.
        Moved nowhere.

15056.  July 22, 2017         AIPS Memo 120             Eric
        Updated AIPS Memo 120 to cover the LABEL IMAGES? and CURVALUE
        options.  Fixed color scheme to make the changes obvious and
        updated all figures.
        Moved nowhere.

15057.  July 24, 2017               IMAGR                Eric
        Changed QUVUTIL to call UVWAIT when inverse taper is requested
        even if taper and uniform weight are not requested.
        Moved nowhere.

15058.  July 24, 2017            UVHOL                Eric
        For some reason, autocorrelations were allowed.  Dropped
        that.
        MOved nowhere.

15059.  July 28, 2017            UVMOD                  Eric
        Changed to allow comment lines starting with $ or #.
        Moved nowhere.

15060.  July 31, 2017             UVMOD                Eric
        Changed to allow negative components and to emphasize that
        NGAUSS limits how much is read from INLIST.
        Moved nowhere.

15061.  August 1, 2017            HOLOG                Eric
        Changed to add routines to compute the images from
        user-supplied parameters (VPARM) rather than fitting the data.
        This can either replace the phase with the model or subtract
        the model from the observed phase.  It can also replace the
        amplitude (above some value) with the average of values above
        that value and set the rest of the amplitudes to 0.
        Also added a new OPTYPE = 'SURP' to simulate the effect of
        reference pointing on the model (it pulls the beam back to the
        center, changing the math for the feed offset X and Y
        parameters).
        Moved nowhere.

15062.  August 2, 2017            LISTR                Eric
        The gfortran optimized version did very strange things on the
        GAIN function.  Changing the table IO record to be
        equivalenced to a buffer specified in LISTR rather than
        DSEL.INC seems to cure it.
        Moved nowhere.

15063.  August 11, 2017           FGSPW                Eric
        NEW TASK: designed to find spectral windows overflowed by RFI
        and to flag the full window and scan on a baseline basis.
        Moved nowhere.

15064.  August 14, 2017           OPTIMIZE.LIS            Eric
        testing on my computer with my intended compiler options
        revealed that APCLN requires fails even at optimization level
        1 at least when variables are allowed to be dynamic.
        Moved nowhere.

15065.  August 28, 2017             GREYS                Eric
        It messed up LTYPES < 0.  Copied the handling of this from
        PCNTR and KNTR.
        Moved nowhere.

15066.  August 28, 2017             WIPER                Eric
        WIPER did not position the CURVALUE display correctly in
        zoomed images when the display was on the far right.  It also
        could not handle antenna numbers > 100 (not a problem for most
        people).
        Moved nowhere.

15067.  August 29, 2017          RMFIT                    Eric
        I had forgotten to move the correction made to XGAUS Feb 23
        into RMFIT.  The plotting and handling of blotches in
        pixel-replicated images is a bit tricky and is used when
        swapping TV-selected regions.
        Moved nowhere.

15068.  August 31, 2017             ANTAB                 Eric
        Changed the explain section on TSYS/TANT to expose the full
        allowed formats for times.  KEYIN handles the sexagesimal
        indicator (a colon) nicely, simply adjusting a scaling factor
        for the next numbers it reads.  Thus hh.hh, hh:mm.mm, and
        hh:mm:ss.ss are all okay for times in KEYIN.
        Moved nowhere.

15069.  August 31, 2017          WAITTASK               Eric
        Adde adverb NUMTELL to WAITTASK in subroutine AU2.  Also fixed
        help files for NUMTELL and WAITTASK.  Now one aips can wait on
        another.  E.g. wait on IMAGR before running a KNTR in a 2nd
        window.
        Moved nowhere.

15070.  September 7, 2017       ANREFM                  Eric
        CASA is now writing AN tables with one of the new columns and
        not the other.  Changed ANREFM to avoid being upset by that
        stupidity.
        Moved nowhere.

15071.  September 8, 2017           REFRMT             Eric
        Changed subroutine REFRMT to drop ALL leading blanks as well
        as its previous job of reducing consecutive blanks to a single
        one.
        Moved nowhere.

15072.  September 8, 2017       TVFLG, SPFLG, FTFLG       Eric
        Work on PCFLG revealed an issue with time labeling.  Changed
        it to show days when the day number > 0 even when the day
        number does not change within the plot.
        Moved nowhere.

15073.  September 11, 2017     TVFLG, SPFLG, FTFLG       Eric
        More work on PCFLG has revealed that enough parameters are
        changed while finding that the requested image (i.e. next
        part) lacks usable data that the labeling of the image will
        change.  Therefore, it is necessary to fill the image with
        zeros rather than leave the old image with new labeling.
        Moved nowhere.

15074.  September 11, 2017        Pulse Cals               Eric
        PCLOD   1. Corrected to set the start day only once and to do
                   that from the data set's reference date.  Later
                   concatenated files could have a later start day but
                   we must keep the one appropriate to the data.
                2. Added DOKEEP adverb to choose whether records not
                   inside scans are kept and added counters to report
                   the number of records written and the number not
                   inside scans.  Added these to the history as well.
        PCFLG   1. Raised the maiximum number of times allowed and
                   added code to test for it being exceeded
                2. Changed to copy the PC table if it is already
                   correctly sorted.
                3. If a start time is specified make sure that the
                   scan information updates.  Scans before the start
                   time (in TIMERANG) were creaping in partly.
                4. The gridding routine assumed that all desired
                   planes were present when the memory allocation put
                   a cap on things.  Dropped the cap, but also fixed
                   the assumption so that the cap could be restored.
                5. Fixed discord between eror messages and their
                   FORMAT statement.
                6. Fix time axis display to include day numbers > 0.
                7. When no valid pixels are found, still load the
                   all-zero image.
        PRTAB   1. Changed it to always add at least a 1-digit day
                   number to times in sexagesimal format.
        PCPLT   1. Added message about sorting the PC table
        Moved nowhere.

15075.  September 14, 2017         PC stuff             Eric
        PCAVG    NEW TASK: time averages a PC table either freely or
                 in strict intervals within each scan.  The latter
                 helps get al antennas to have the same times.
        PCFITR   Subroutine assumed that frequencies increased with
                 tone number (channel).  The opposite sign is also
                 possible.
        PCFLG    Help file - fixed typo, added paragraph to point out
                 what I was missing
        PCFIT    Added CUTOFF to reset the delay zero points if the
                 delay changes by too much.
        Moved nowhere.

15076.  September 15, 2017         LISTR                 Eric
        1. The LIST option divided all autocorrelation values by 100 -
           changed to do that for amplitude only.
        2. Added type 19 for post detector gain in the GAIN listings
           (all 4 subroutines).
        Moved nowhere.

15077.  September 28, 2017         KEYIN                Eric
        Changed KEYIN to read text-file lines up to 2560 characters in
        length rather than 256.  Link edits a bunch of stuff but main
        task this is aimed at is ANTEB.  Edited line-length remarks in
        help files for ANTAB, ANCAL, and LDGPS.
        Moved nowhere.

15078.  September 28, 2019           APCAL               Eric
        Raised the buffer that holds all the data for an antenna by a
        factor more than 10 (260000 -> 3000000).  This will allow 45
        IFs with 2 polarizations for the 32768 maximum number of times
        allowed.  Let's hope that is enough.  Raised the load module
        from 39 to 160 Mbytes.
        Moved nowhere.

15079.  October 9, 2017             RMFIT              Eric
        Output units were messed up by things done for XGAUS rather
        than RM images.  Affected the Q0 and U0 images.
        Moved nowhere.


15080.  October 12, 2017            RFARS              Eric
        It did not handle FQID axes correctly - with bad catalog
        header references.
        Moved nowhere.

15081.  October 21, 2017            PCPLT                Eric
        Corrected:
        1. Number of parameters - XYRATIO was being ignored.
        2. Pick up of ANTENNAS when specified.  It failed causing the
           plot to find no data.
        3. Set TRC with XYRATIO and use BLC and TRC for coordinates
           rather than 0 and 1000.
        4. Allow horizontal axis labeling for any number of panels.
        Moved nowhere.

15082.  October 21, 2017           PCFIT                 Eric
        Changed the sign of the delay and phase written to the SN
        table.  Tests comparing the answers with FRING require this.
        Moved nowhere.

15083.  October 22, 2017          PCEDT                 Eric
        Changed BPEDIT to make a bigger scratch variable, to correct
        units, to remove BP references in PC places, and to add
        progress messages.
        Moved nowhere.

15084.  October 22, 2017          SNPLT                Eric
        Added XYRATIO.
        Moived nowhere.

15085.  October 24, 2017        Pulse-cal               Eric
        Changed:
        (1) PCAVG, PCFIT, and PCFLG to insure that the output PC table
            sort order is properly indicated in the table.  This has
            to be done explicitly - TABINI clears the sort order.
        (2) PCASS to add sort and progress messages, to add BPARM(4)
            which can cause all scans to be averaged together.
        (3) POSSM fixed to honor XYRATIO.
        Moved nowhere.

15086.  October 24, 2017     new pulse-cal tasks        Eric
        Two new tasks:
        PCRMS computes PC table statistics, can write an output file
              with PC IF-average data, and can write a new flagged PC
              table.  This is an "auto-editor" meant for use in
              pipelines.
        PCHIS is a generalized histogram plotter written to handle
              PCRMS output, but usable for other sorts of text files.
        Moved nowhere.

15087.  October 26,27, 2017         Compiler finds           Eric
        Installed a new Intel compiler on a new, virtual "rishi" and
        tested AIPS under it.  This version (18.0.0 20170811) is an
        attempt to get away from the NaNs that have appeared recently
        with the old (2009) version of the compiler we were using.
        Y2K performance results are only marginally improved over the
        old version and both old versions beat out gfortran by only a
        little.
        The new Intel compiler for LNX64 does not like overstating
        EQUIVALENCEs such as repeating the statement or giving an
        unnecesary one that replicates what the COMMON statement does.
        Changed: BLOAT, CANDY, CUBIT, DBCON, FETCH, MODVF, TAPPE, and
        TARPL for this.
        The new compiler also points out all EW.d FORMAT codes where
        W is less than d+7.  Subroutines with this were
           GR3DUV  GRDMEM
        Tasks include
           SAD     TVSAD   CLCOR   CUBIT   FARAD   FIT2A   FITLD
           IMLOD   LISTR   M3TAR   MK3IN   POLCO   VLOG    APGPS
           BSPRT   HFPRT   DELZN   IBLED   UVPLT
        ELINT had many, many format issues and did not put a 0P
        following 1PE formats so the regular F formats were scaled
        inadvertently.
        CHANGED $SYSLNX64 versions of FDEFAULT.SH, LDOPTS.SH, and
        CCOPTS.SH to match the lesser requirements of the new
        compiler.  Changed several compiler options in XAS.SHR's
        Makefile section.
        Moved nowhere.

15088.  October 27, 2017          USUBA                Eric
        Raised MAXSOU from 300 to 400 and MAXENT from 100000 to
        750000.  This is as big as the compilers and linkers will
        allow without rewriting this code.  And it is complicated code
        that I have never been able to comprehend fully.
        Moved nowhere.

15089.  October 28, 2017          KRING                Eric
        KRING set multiband delay and dispersion to magic blanks when
        a polarization was missing.  This apparently causes the
        calibration routines to flag all polarizations rather than
        just the missing one.  Changed KRING to write zeros for these
        (like FRING).  Changed solution weights from -1.0 to zero
        although this does not change the behavior of CLCAL or
        calibration application.
        Moved nowhere should be a patch.

15090.  October 29, 2017        GNU compiler             Eric
        Changed $SYSLNX64 versions of FDEFAULT.SH, LDOPTS.SH, and
        CCOPTS.SH to use the appropriate gcc and gfortran compilers
        here in Socorro.  Also changed the Makefile portion of
        XAS.SHR.  NOTE: these are NOT the /usr/bin versions of RedHat
        6 which are back at 4.4.  I am using version 6.4 for the local
        LNX64 binaries which are also those distributed for the binary
        installation.
        Moved nowhere.

15091.  October 30, 2017       AIPS Memo 123            Eric
        New memo about the suite of tasks that may be used on the new
        large DiFX pulse-cal tables.
        Moved everywhere.

15092.  November 2, 2017           DATPOL                Eric
        gfortran needs this to be NOOPT apparently.  Changed
        OPTIMIZE.LIS.
        Moved nowhere.

15093.  November 7, 2017    AIPS Memo 123         Eric
        The PostScript file contained the $Id string associated with
        the pstricks macro package.  The MNJ will change these evey
        night and so copy the PostScript file as changed infinitely.
        Moved everywhere.

15094.  November 8, 2017         RMFIT                Eric
        RMFIT: 1. Added the option to compute and plot P=sqrt(Q*Q+U*U)
                  and angle=atan2(U,Q) / 2 alternatively to Q and U.
                  Model plotting requires computing arrays of Q and U
                  and then plotting P first, then A.
               2. Added P&A to PIXRANGE function and manage P&A
                  scaling separately from Q and U.
               3. Made an alternative initial guess being the last
                  fit RM and thickness with the amp and phase added
                  from the current spectrum.
        RMFIT.HLP: Corrected remarks about BLC and TRC and added
               option S (SHOW Q&A or SHOW A&P on the TV) to the menu
               seen during fitting.
        HLPRMFIT.HLP: Reworded the PIXRANGE explanation and added
               explanations for SHOW Q&U and SHOW A&P.
        AIPS Memo 118: updated 2 figures, reworded, changed coloring,
               and added a figure of P&A.
        Moved nowhere.

15095.  November 13, 2017           FARS                 Eric
        Added routine to write slice files of the real part, imaginary
        part, amplitude, and phase of the RMTF (beam) attached to each
        output image.  Dropped the TABINI copyright section in the
        special FARS version of TABINI.
        Moved nowhere.

15096.  November 16, 2017            FQUBE             Eric
        FQUBE did not like having FQ numbers that did not match
        the current image (e.g. one out of SUBIM with a restricted
        window inthe FQ axis or an increment in that z=axis > 1).
        Fixed it rather simply to handle such things correctly.
        Moved nowhere.

15097.  November 20, 2017         AIPS Memo 118         Eric
        Fixed various typos and poor wordings.
        Moved everywhere.

15098.  November 20, 2017          doc files           Eric
        Update the tab completion file HLPIT.LIS, the apropo file
        LSAPROPO.HLP, and about lists (ZZ*.HLP) for
        ADVERB    CALIBRAT    EDITING    INTERACT    OOP    PLOT
        POPS      SPECTRAL    TASK       TV-APPL     UV     VLBI
        Moved nowhere.

15099.  November 21, 2017             RM2PL             Eric
        Clarify in the help file what appears in OUTTEXT.
        Add option to plot and print total polarization and angle
        instead of Q and U.
        Moved nowhere.

15100.  November 22, 2017            CookBook               Eric
        Changed chapters and updated html and COOKBOOK.PDF
        3    for ABORTASK, WAITTASK
        4    for FGSPW
        6    for PCHIS, PLOTR
        7    for FARS, RM2PL
        9    for additional pulse-cal tasks and memo
        13   for updated ABOUT lists
        E    for FGSPW
        L    to include some spectral-line considerations
        0,I,J  to match the above
        Moved everywhere ($AIPSPUBL)

15101.  December 10, 2017         polarization              Eric
        Changed   - keep in directory ~/AIPS/polar
        DPDC.INC   to carry PANGLE plus subarray and xy->qu
                   translation indicator (TRXYQU)
        SELINI     to init parameters in DPDC
        DATPOL     to put PANGLE in common
        FNDPOL     to test XXYY coversion to true stokes in a manner
                   similar to RRLL
        DGINIT     Filled in dummy JADR and SELFAC coded plus TRXYQU=1
                   for XY -> I, Q, U, V.  Note all 4 linear are
                   required for a correct translation.  One can get an
                   approximation of I from XX and YY only and that
                   remains supported (TRXYQU <= 0).
        DATGET     Call DATPAR when DOPOL false and TRXYQU true to
                   make sure parallactic angles are current.  DATPOL
                   does this on DOPOL true.  Call DXYGET rather than
                   DGGET on TRXYQU>0.
        DATPAR     New routine to update antenna info if subarray
                   changes and update source and parallactic angle
                   info if source changes or time changes by > 1 sec.
        DXYGET     New routine to do a full translation of XX/YY/XY/YX
                   to needed parts of I/Q/U/V.
        Change LXYPOL, ORIPOL, VLBPOL, UVHOL to use PANGLE in the
        common rather than locally.  Call sequences of the first 3
        changed, dropping PANGLE.
        Moved nowhere.

15102.  December 11, 2017             LUNTMP              Eric
        Add argument 3 to do a new text file LUN not using any of the
        standard ones. Changed HELPS for RUN to use this - the RUNfile
        may contain GO or DEFAULT or ?? that will use the standard
        text LUNs so we must not use them for the nested RUNs.
        Moved nowhere.

***********************************************************************
***********************************************************************

                 Changes while 31DEC17 is NEW

***********************************************************************
***********************************************************************

15104.  December 14, 2017          UVHOL                Eric
        Corrected DATPOL version in UVHOL for correct call sequences
        to LXPOL and friends.  Added APARM(10) option to apply the
        normal parallactic angle correction, default is not to do it.
        Changed OPTIMIZE.LIS to not optimize this task.
        Moved to 31DEC17 this date.

15105.  December 15, 2017          HOLOG                Eric
        Added adverb REFREQ to give the reference frequency for the
        image spacing and DOVECT to choose between amplitude/phase and
        real/imaginary.
        In Fortran added arrays for real and imaginary.  Changed U/V
        coordinate labels to L/M.  Changed GRID to fill in real and
        imaginary and blank them.  Changed to honor DOVECT for
        real/imaginary when requested.  Try to pick up the Stokes from
        the INFILE name and if found add a Stokes axis to the output
        images.  Use REFREQ to scale images but save the actual
        frequency to put in the headers.

15106.  December 15, 2017           ANINI               Eric
        AN tables may need NIF keywords plus the 22 or so that occur
        always - PCAL requires this.  Changed ANINI to ask for this
        many keywords - others IF 30 led to PCAL failing.
        Moved to 31DEC18 December 18.

15107.  December 18, 2017              PCNTR             Eric
        Changed it to draw vectors even when the axes are not a
        position pair - with a warning.
        Moved to 31DEC17 this date.

15108.  December 18, 2017            COMB               Eric
        Changed to set Stokes to Q, U, or V when doing ratio with I
        image.
        Moved to 31DEC17 this date.

15109.  December 20, 2017         TVFLG, SPFLG          Eric
        Changed TVFLG, SPFLG, FTFLG, GRIDTB.FOR to support STOKES =
        'IQU' and 'IQUV'
        Moved to 31DEC17 this date.

15110.  December 21, 2017            PCNTR              Eric
        For the special case of axes = 'L' and 'M' with a positive
        increment for L, change the sign of the plotted polarization
        angle.
        Moved to 31DEC17 this date.

15111.  December 21, 2017            HOLOG              Eric
        changed to get the Stokes from the data file - using the file
        name depends too much on the user.
        Moved to 31DEC17 this date.

15112.  January 2, 2018          VLANT files             Eric
        Created the $AIPSTARS file EVLA.ant.2017 from the web location
        maintained for the EVLA and the dummy file VLA.ant.2018 to
        handle very old data.
        Moved everywhere.

15113.  January 2, 2018            DXYGET               Eric
        The subroutine to change linear polarization into true Stokes
        had addressing errors that caused the output to compress all
        flagged channels.
        Moved to 31DEC17 this date.

15115.  January 9, 2018          linear polarization       Eric
        The parallactic angle correction done for circulars must not
        be done for linears.  We do it later in DXYGET when converting
        to Stokes.  Changed:
        DGHEAD   To add 10 to any DOPOL > 0 if the input file is
                 linear.
        POLSET   To do MOD (DOPOL,10) when testing DOPOL.
        VLBPOL   To do MOD (DOPOL,10) when testing DOPOL.
        DATPOL   To use MOD (DOPOL,10) and to omit the parallactic
                 angle change if DOPOL > 10 (set by DGHEAD) or if the
                 output polarization is linear.
        Moved to 31DEC17 (patch) this date.

15118.  January 16, 2018          Batch                 Eric
        Both QMNGR and AIPSB had the wrong call sequence to subroutine
        BATQ - they lacked the host parameter.  I know I tested this
        to allow remote machine batch jobs.  Somehow, the changed
        programs did not get putbck.
        Moved to 31DEC17 this date.

15119.  January 16, 2018           CALIB                Eric
        The self-protective code in CALIB did not allow a multi-source
        file to use SMODEL even when properly specified (some SMODEL
        not zero, no (2nd) model image, only one cal source).  Added
        code to recognize the proper specification and allow it.
        Moved to 31DEC17 this date.

15123.  January 19, 2018            UVSUB              Eric
        The gridded version of OPCODE 'MODL' only included the last
        field.  This was due to a scaling factor which applies to the
        input visibilities in field 1 but then applies to the sum of
        the model for fields > 1.  Fixed ALGMEM and ALGSTB to set
        this factor to 1 for fields > 1.
        Moved to 31DEC17 this date.

15124.  January 20, 2018           UVSUB               Eric
        The fix I did yesterday does not work fully.  Changed ALGSTB
        and ALGMEM to zero the input data when MODL is requested
        before those data are written to the pseudo-AP.  The Q routine
        then adds the scaled model to the data always.
        Moved to 31DEC17 this date.

15133.  February 21, 2018           UVPLT                Eric
        A counter which is tested to see if the data may be
        self-scaled was a mere INTEGER which therefore could roll over
        to negative a 2^31-1.  Changed it to double precision.
        Also changed the max color to 0.97 rather than 1 to get a more
        visible deep blue.
        Moved to 31DEC17 this date.

15138.  February 28, 2018           SETJY              Eric
        It was quoting errors bars for no valid reason for P band at
        least with the PB 2017 fluxes.  Moved the setting of error to
        0 to before the 2017 computation.
        Moved to 31DEC17 1 March.

15151.  March 14, 2018          gridded models          Eric
        The correction made in January to ALGMEM and ALGSTB to compute
        models correctly for multiple facets caused the data weights
        to be zero.  Corrected this by putting an intelligent zeroing
        of the input data (leaving the weights alone).  Discovered
        that the zeroing of the input array when data fall off the
        grid was done with bad lengths and addresses.  Corrected these
        too.  UVSUB made an error in the HI file.
        This error affects OPCODE='MODL' only.
        Moved to 31DEC17 this date.

15145.  March 8, 2018     gridded models               Eric
        Changed CCSMEM to check the AP memory and ask for enough -
        somehow it survived when the images were moderately small.
        But it needs in a larger case a lot for the grid plus what was
        already allocated for the UV data.
        Moved to 31DEC17 on 4 April.

15146.  March 8, 2018           ANINI                  Eric
        When over-writing an antenna table, as in VLANT, the number of
        keywords allowed would be <= 51 unless PCAL had been run.  The
        code assumed that PCAL had been run (or was running) and so
        could demand more if the number of IFs was > 26.  Changed to
        check if the file is pre-existing and accept the number of
        keywords in same.
15148.  March 12, 2018           ANINI                  Eric
        The "fix" of March 8 made a requested version of 0 (i.e. make
        a new file) into version 1 and then managed to destroy it.
        This almost certainly would happen only in inadequate AN
        tables that looked as if they needed reformatting.
        Moved to 31DEC17 on 4 April.

15159.  April 2, 2018              FITLD                 Eric
        The program tested for duplicate FQIDs but used bad logic to
        substitute a new FQID number for the old.  Corrected the logic
        and improved the messaging.
15160.  April 3, 2018            FITLD                  Eric
        Yesterday's change fixed the UV data, but did not address the
        tables.  Easy changes in the writing of PC, TY, IM and GC
        tables were implemented.  The AT table needed to have FQIDs
        dropped if they were no longer used.  The MC table required
        the FQIDs to be replaced with the corrected ones.  Two new
        subroutines more or less cribbed from DFQID were added to
        FITLD to perform these chores.
        Moved to 31DEC17 4 April..

15162.  April 9. 2018            DBAPP                   Eric
        First serious test in a while.  Fixed
        1. Warn that UT1UTC differs in the antenna headers but do not
           quit.
        2. When testing the times, include any difference in day
           number.
        3. The DUVH common changed some time ago and the parallel
           versions in DBAPP did not keep pace.  The data got trashed
           as a result.
        Moved to 31DEC17 this date.

15163.  April 11, 2018               DBAPP               Eric
        One more issue: the NX table needed the addition of any day
        offset to the times of the input NX table and the start vis
        number for the NX table had to point at the last of the input
        version of the output table rather than 0.
        Moved to 31DEC17 this date.

15167.  April 16, 2018             FQUBE                 Eric
        FQUBE was writing N CG tables for N input images when there
        was no input CG table.  It should only write one version,
        filling it with N lines.
        Moved TO 31DEC17 23 April.

15169.  April 24, 2018             FITLD               Eric
        The change made in March 2017 to have ANTNAME honored when
        concatenating did not work in complicated circumstances.  I
        have returned FITLD to initializing ANTNAME to blank when
        concatenating.  It sets antenna names/numbers from the
        existing AN table and can add new ones if encountered.
        Moved changes only to 31DEC17 this date.

15170.  April 27, 2018            DOBAND 3              Eric
        The interpolation of bandpasses attempted to use the one good
        one when the other was bad at the upper levels of the code.
        But down at the bottom BPGET blanked the bandpass to be
        applied whenever either of the 2 was blanked.  Changed it to
        use the good one if there is a good one.
        Moved to 31DEC17 this date.
